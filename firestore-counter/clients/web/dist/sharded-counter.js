var sharded=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=12)}([function(e,t,n){"use strict";(function(e,r){n.d(t,"a",(function(){return m})),n.d(t,"b",(function(){return N})),n.d(t,"c",(function(){return A})),n.d(t,"d",(function(){return c})),n.d(t,"e",(function(){return a})),n.d(t,"f",(function(){return O})),n.d(t,"g",(function(){return y})),n.d(t,"h",(function(){return V})),n.d(t,"i",(function(){return x})),n.d(t,"j",(function(){return u})),n.d(t,"k",(function(){return F})),n.d(t,"l",(function(){return p})),n.d(t,"m",(function(){return d})),n.d(t,"n",(function(){return f})),n.d(t,"o",(function(){return g})),n.d(t,"p",(function(){return q})),n.d(t,"q",(function(){return v})),n.d(t,"r",(function(){return I})),n.d(t,"s",(function(){return _})),n.d(t,"t",(function(){return R})),n.d(t,"u",(function(){return E})),n.d(t,"v",(function(){return k})),n.d(t,"w",(function(){return w})),n.d(t,"x",(function(){return b})),n.d(t,"y",(function(){return T})),n.d(t,"z",(function(){return S})),n.d(t,"A",(function(){return L})),n.d(t,"B",(function(){return M})),n.d(t,"C",(function(){return C}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let t=0;t<e.length;t+=3){const i=e[t],s=t+1<e.length,o=s?e[t+1]:0,a=t+2<e.length,c=a?e[t+2]:0,u=i>>2,l=(3&i)<<4|o>>4;let h=(15&o)<<2|c>>6,d=63&c;a||(d=64,s||(h=64)),r.push(n[u],n[l],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(i(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let t=0;t<e.length;){const i=n[e.charAt(t++)],s=t<e.length?n[e.charAt(t)]:0;++t;const a=t<e.length?n[e.charAt(t)]:64;++t;const c=t<e.length?n[e.charAt(t)]:64;if(++t,null==i||null==s||null==a||null==c)throw new o;const u=i<<2|s>>4;if(r.push(u),64!==a){const e=s<<4&240|a>>2;if(r.push(e),64!==c){const e=a<<6&192|c;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=i(e);return s.encodeByteArray(t,!0)}(e).replace(/\./g,"")},c=function(e){try{return s.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function u(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=u(e[n],t[n]));return e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const l=()=>
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==e)return e;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,h=()=>{try{return l()||(()=>{if(void 0===r||void 0===r.env)return;const e=r.env.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}const t=e&&c(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: "+e)}},d=e=>{var t,n;return null===(n=null===(t=h())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},f=e=>{const t=d(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},p=()=>{var e;return null===(e=h())||void 0===e?void 0:e.config},g=e=>{var t;return null===(t=h())||void 0===t?void 0:t["_"+e]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class m{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/"+n,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function w(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(v())}function b(){var t;const n=null===(t=h())||void 0===t?void 0:t.forceEnvironment;if("node"===n)return!0;if("browser"===n)return!1;try{return"[object process]"===Object.prototype.toString.call(e.process)}catch(e){return!1}}function I(){return"object"==typeof self&&self.self===self}function _(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function T(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function E(){const e=v();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function S(){return!b()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"==typeof indexedDB}catch(e){return!1}}function C(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}class A extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N.prototype.create)}}class N{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(D,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error",o=`${this.serviceName}: ${s} (${r}).`;return new A(r,o,n)}}const D=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function O(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function R(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function x(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(P(n)&&P(s)){if(!x(n,s))return!1}else if(n!==s)return!1}for(const e of r)if(!n.includes(e))return!1;return!0}function P(e){return null!==e&&"object"==typeof e}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function L(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function M(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function F(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V(e,t){const n=new j(e,t);return n.subscribe.bind(n)}class j{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=U),void 0===r.error&&(r.error=U),void 0===r.complete&&(r.complete=U);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function U(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function q(e){return e&&e._delegate?e._delegate:e}}).call(this,n(8),n(11))},function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return Ce})),n.d(t,"c",(function(){return Ue})),n.d(t,"d",(function(){return Ge})),n.d(t,"e",(function(){return $e})),n.d(t,"f",(function(){return Ke})),n.d(t,"g",(function(){return Me})),n.d(t,"h",(function(){return ze})),n.d(t,"i",(function(){return Sn})),n.d(t,"j",(function(){return vr})),n.d(t,"k",(function(){return c})),n.d(t,"l",(function(){return vn})),n.d(t,"m",(function(){return We})),n.d(t,"n",(function(){return He})),n.d(t,"o",(function(){return Qe})),n.d(t,"p",(function(){return I})),n.d(t,"q",(function(){return _e})),n.d(t,"r",(function(){return m})),n.d(t,"s",(function(){return Xt})),n.d(t,"t",(function(){return Y})),n.d(t,"u",(function(){return Wn})),n.d(t,"v",(function(){return Un})),n.d(t,"w",(function(){return Z})),n.d(t,"y",(function(){return vt})),n.d(t,"z",(function(){return Ht})),n.d(t,"A",(function(){return gr})),n.d(t,"B",(function(){return Yt})),n.d(t,"C",(function(){return wt})),n.d(t,"D",(function(){return yt})),n.d(t,"E",(function(){return Ee})),n.d(t,"G",(function(){return It})),n.d(t,"H",(function(){return h})),n.d(t,"I",(function(){return kt})),n.d(t,"J",(function(){return jt})),n.d(t,"K",(function(){return Bt})),n.d(t,"L",(function(){return $n})),n.d(t,"M",(function(){return X})),n.d(t,"N",(function(){return ln})),n.d(t,"O",(function(){return Et})),n.d(t,"P",(function(){return ut})),n.d(t,"Q",(function(){return In})),n.d(t,"R",(function(){return Ln})),n.d(t,"S",(function(){return Kn})),n.d(t,"T",(function(){return Kt})),n.d(t,"U",(function(){return lt})),n.d(t,"V",(function(){return _n})),n.d(t,"W",(function(){return Pn})),n.d(t,"X",(function(){return Gn})),n.d(t,"Y",(function(){return Ct})),n.d(t,"Z",(function(){return mt})),n.d(t,"ab",(function(){return Tt})),n.d(t,"bb",(function(){return Ze})),n.d(t,"cb",(function(){return ct})),n.d(t,"db",(function(){return ht})),n.d(t,"eb",(function(){return _t})),n.d(t,"fb",(function(){return St})),n.d(t,"gb",(function(){return bn})),n.d(t,"hb",(function(){return xn})),n.d(t,"ib",(function(){return zn})),n.d(t,"jb",(function(){return rt})),n.d(t,"kb",(function(){return Dt})),n.d(t,"lb",(function(){return Ot})),n.d(t,"mb",(function(){return En})),n.d(t,"nb",(function(){return Nt})),n.d(t,"ob",(function(){return At})),n.d(t,"pb",(function(){return bt})),n.d(t,"x",(function(){return xr})),n.d(t,"F",(function(){return Or}));var r=n(0),i=n(3);function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;var o=n(5),a=n(6);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};function l(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const h=
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},d=l,f=new r.b("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),p=new o.b("@firebase/auth");function g(e,...t){p.logLevel<=o.a.ERROR&&p.error(`Auth (${i.SDK_VERSION}): ${e}`,...t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m(e,...t){throw b(e,...t)}function y(e,...t){return b(e,...t)}function v(e,t,n){const i=Object.assign(Object.assign({},d()),{[t]:n});return new r.b("auth","Firebase",i).create(t,{appName:e.name})}function w(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&m(e,"argument-error"),v(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function b(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return f.create(e,...t)}function I(e,t,...n){if(!e)throw b(t,...n)}function _(e){const t="INTERNAL ASSERTION FAILED: "+e;throw g(t),new Error(t)}function T(e,t){e||_(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function S(){return"http:"===k()||"https:"===k()}function k(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class C{constructor(e,t){this.shortDelay=e,this.longDelay=t,T(t>e,"Short delay should be less than long delay!"),this.isMobile=Object(r.w)()||Object(r.y)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(S()||Object(r.s)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A(e,t){T(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void _("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void _("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void _("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},O=new C(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function x(e,t,n,i,s={}){return P(e,s,async()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=Object(r.A)(Object.assign({key:e.config.apiKey},o)).slice(1),c=await e._getAdditionalHeaders();return c["Content-Type"]="application/json",e.languageCode&&(c["X-Firebase-Locale"]=e.languageCode),N.fetch()(M(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))})}async function P(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},D),t);try{const t=new F(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw V(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw V(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw V(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw V(e,"user-disabled",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw v(e,a,o);m(e,a)}}catch(t){if(t instanceof r.c)throw t;m(e,"network-request-failed",{message:String(t)})}}async function L(e,t,n,r,i={}){const s=await x(e,t,n,r,i);return"mfaPendingCredential"in s&&m(e,"multi-factor-auth-required",{_serverResponse:s}),s}function M(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?A(e.config,i):`${e.config.apiScheme}://${i}`}class F{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(y(this.auth,"network-request-failed")),O.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function V(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=y(e,t,r);return i.customData._tokenResponse=n,i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function j(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U(e){return 1e3*Number(e)}function q(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return g("JWT malformed, contained fewer than 3 sections"),null;try{const e=Object(r.d)(n);return e?JSON.parse(e):(g("Failed to decode base64 JWT payload"),null)}catch(e){return g("Caught error parsing JWT payload as JSON",null==e?void 0:e.toString()),null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function B(e,t,n=!1){if(n)return t;try{return await t}catch(t){throw t instanceof r.c&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t)&&e.auth.currentUser===e&&await e.auth.signOut(),t}}class z{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===(null==e?void 0:e.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=j(this.lastLoginAt),this.creationTime=j(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K(e){var t;const n=e.auth,r=await e.getIdToken(),i=await B(e,async function(e,t){return x(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));I(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map(e=>{var{providerId:t}=e,n=s(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const c=(u=e.providerData,l=a,[...u.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var u,l;const h=e.isAnonymous,d=!(e.email&&o.passwordHash||(null==c?void 0:c.length)),f=!!h&&d,p={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new G(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(e,p)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ${constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){I(e.idToken,"internal-error"),I(void 0!==e.idToken,"internal-error"),I(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=q(e);return I(t,"internal-error"),I(void 0!==t.exp,"internal-error"),I(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return I(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function(e,t){const n=await P(e,{},async()=>{const n=Object(r.A)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=M(e,i,"/v1/token","key="+s),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",N.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new $;return n&&(I("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(I("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(I("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new $,this.toJSON())}_performRefresh(){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W(e,t){I("string"==typeof e||void 0===e,"internal-error",{appName:t})}class H{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=s(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new z(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new G(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await B(this,this.stsTokenManager.getToken(this.auth,e));return I(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Object(r.p)(e),i=await n.getIdToken(t),s=q(i);I(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:j(U(s.auth_time)),issuedAtTime:j(U(s.iat)),expirationTime:j(U(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Object(r.p)(e);await K(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(I(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new H(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){I(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await K(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await B(this,async function(e,t){return x(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,u;const l=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:_,stsTokenManager:T}=t;I(v&&T,e,"internal-error");const E=$.fromJSON(this.name,T);I("string"==typeof v,e,"internal-error"),W(l,e.name),W(h,e.name),I("boolean"==typeof w,e,"internal-error"),I("boolean"==typeof b,e,"internal-error"),W(d,e.name),W(f,e.name),W(p,e.name),W(g,e.name),W(m,e.name),W(y,e.name);const S=new H({uid:v,auth:e,email:h,emailVerified:w,displayName:l,isAnonymous:b,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:E,createdAt:m,lastLoginAt:y});return _&&Array.isArray(_)&&(S.providerData=_.map(e=>Object.assign({},e))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t,n=!1){const r=new $;r.updateFromServerResponse(t);const i=new H({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await K(i),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=new Map;function Y(e){T(e instanceof Function,"Expected a class definition");let t=Q.get(e);return t?(T(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Q.set(e,t),t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}J.type="NONE";const X=J;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(e,t,n){return`firebase:${e}:${t}:${n}`}class ee{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Z(this.userKey,r.apiKey,i),this.fullPersistenceKey=Z("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?H._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new ee(Y(X),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Y(X);const s=Z(n,e.config.apiKey,e.name);let o=null;for(const n of t)try{const t=await n._get(s);if(t){const r=H._fromJSON(e,t);n!==i&&(o=r),i=n;break}}catch(e){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(e){}})),new ee(i,e,n)):new ee(i,e,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function te(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(se(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(ne(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ae(t))return"Blackberry";if(ce(t))return"Webos";if(re(t))return"Safari";if((t.includes("chrome/")||ie(t))&&!t.includes("edge/"))return"Chrome";if(oe(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function ne(e=Object(r.q)()){return/firefox\//i.test(e)}function re(e=Object(r.q)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ie(e=Object(r.q)()){return/crios\//i.test(e)}function se(e=Object(r.q)()){return/iemobile/i.test(e)}function oe(e=Object(r.q)()){return/android/i.test(e)}function ae(e=Object(r.q)()){return/blackberry/i.test(e)}function ce(e=Object(r.q)()){return/webos/i.test(e)}function ue(e=Object(r.q)()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function le(e=Object(r.q)()){return ue(e)||oe(e)||ce(e)||ae(e)||/windows phone/i.test(e)||se(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function he(e,t=[]){let n;switch(e){case"Browser":n=te(Object(r.q)());break;case"Worker":n=`${te(Object(r.q)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.SDK_VERSION}/${s}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function de(e,t){return x(e,"GET","/v2/recaptchaConfig",R(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(e){return void 0!==e&&void 0!==e.getResponse}function pe(e){return void 0!==e&&void 0!==e.enterprise}class ge{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=y("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function ye(e){return`__${e}${Math.floor(1e6*Math.random())}`}class ve{constructor(e){this.type="recaptcha-enterprise",this.auth=_e(e)}async verify(e="verify",t=!1){function n(t,n,r){const i=window.grecaptcha;pe(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{de(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new ge(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&pe(window.grecaptcha))n(i,e,r);else{if("undefined"==typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));me("https://www.google.com/recaptcha/enterprise.js?render="+i).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function we(e,t,n,r=!1){const i=new ve(e);let s;try{s=await i.verify(n)}catch(e){s=await i.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(e){r(e)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(e){t.reverse();for(const e of t)try{e()}catch(e){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==e?void 0:e.message})}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Te(this),this.idTokenSubscription=new Te(this),this.beforeStateQueue=new be(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=f,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Y(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await ee.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(e){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null==r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==s||!(null==o?void 0:o.user)||(r=o.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(e){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(e))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return I(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(e){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await K(e)}catch(e){if("auth/network-request-failed"!==(null==e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Object(r.p)(e):null;return t&&I(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&I(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Y(e))})}async initializeRecaptchaConfig(){const e=await de(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new ge(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new ve(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.b("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Y(e)||this._popupRedirectResolver;I(t,this,"argument-error"),this.redirectPersistenceManager=await ee.create(this,[Y(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return I(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return I(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=he(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){p.logLevel<=o.a.WARN&&p.warn(`Auth (${i.SDK_VERSION}): ${e}`,...t)}("Error while retrieving App Check token: "+t.error),null==t?void 0:t.token}}function _e(e){return Object(r.p)(e)}class Te{constructor(e){this.auth=e,this.observer=null,this.addObserver=Object(r.h)(e=>this.observer=e)}get next(){return I(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(e,t,n){const r=_e(e);I(r._canInitEmulator,r,"emulator-config-failed"),I(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=Se(t),{host:o,port:a}=function(e){const t=Se(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ke(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ke(t)}}}(t),c=null===a?"":":"+a;r.config.emulator={url:`${s}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */()}function Se(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ke(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Ce{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return _("not implemented")}_getIdTokenResponse(e){return _("not implemented")}_linkToIdToken(e,t){return _("not implemented")}_getReauthenticationResolver(e){return _("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ae(e,t){return x(e,"POST","/v1/accounts:resetPassword",R(e,t))}async function Ne(e,t){return x(e,"POST","/v1/accounts:update",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function De(e,t){return L(e,"POST","/v1/accounts:signInWithPassword",R(e,t))}async function Oe(e,t){return x(e,"POST","/v1/accounts:sendOobCode",R(e,t))}async function Re(e,t){return Oe(e,t)}async function xe(e,t){return Oe(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Pe extends Ce{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Pe(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new Pe(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await we(e,n,"signInWithPassword");return De(e,t)}return De(e,n).catch(async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await we(e,n,"signInWithPassword");return De(e,t)}return Promise.reject(t)});case"emailLink":
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
return async function(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))}(e,{email:this._email,oobCode:this._password});default:m(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Ne(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",R(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:m(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Le(e,t){return L(e,"POST","/v1/accounts:signInWithIdp",R(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Me extends Ce{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Me(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):m("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=s(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Me(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return Le(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Le(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Le(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Object(r.A)(t)}return e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe={USER_NOT_FOUND:"user-not-found"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ve extends Ce{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Ve({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Ve({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,t));if(n.temporaryProof)throw V(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",R(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Fe)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Ve({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e){var t,n,i,s,o,a;const c=Object(r.B)(Object(r.k)(e)),u=null!==(t=c.apiKey)&&void 0!==t?t:null,l=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);I(u&&l&&h,"argument-error"),this.apiKey=u,this.operation=h,this.code=l,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=Object(r.B)(Object(r.k)(e)).link,n=t?Object(r.B)(Object(r.k)(t)).deep_link_id:null,i=Object(r.B)(Object(r.k)(e)).deep_link_id;return(i?Object(r.B)(Object(r.k)(i)).link:null)||i||n||t||e}(e);try{return new je(t)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ue{constructor(){this.providerId=Ue.PROVIDER_ID}static credential(e,t){return Pe._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=je.parseLink(t);return I(n,"argument-error"),Pe._fromEmailAndCode(e,n.code,n.tenantId)}}Ue.PROVIDER_ID="password",Ue.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ue.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class qe{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends qe{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class ze extends Be{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return I("providerId"in t&&"signInMethod"in t,"argument-error"),Me._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return I(e.idToken||e.accessToken,"argument-error"),Me._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return ze.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return ze.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new ze(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge extends Be{constructor(){super("facebook.com")}static credential(e){return Me._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return Ge.credential(e.oauthAccessToken)}catch(e){return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com",Ge.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ke extends Be{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Me._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return Ke.credential(t,n)}catch(e){return null}}}Ke.GOOGLE_SIGN_IN_METHOD="google.com",Ke.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $e extends Be{constructor(){super("github.com")}static credential(e){return Me._fromParams({providerId:$e.PROVIDER_ID,signInMethod:$e.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return $e.credentialFromTaggedObject(e)}static credentialFromError(e){return $e.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return $e.credential(e.oauthAccessToken)}catch(e){return null}}}$e.GITHUB_SIGN_IN_METHOD="github.com",$e.PROVIDER_ID="github.com";class We extends Ce{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return Le(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Le(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Le(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new We(n,i):null}static _create(e,t){return new We(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He extends qe{constructor(e){I(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return He.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return He.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=We.fromJSON(e);return I(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return We._create(n,t)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends Be{constructor(){super("twitter.com")}static credential(e,t){return Me._fromParams({providerId:Qe.PROVIDER_ID,signInMethod:Qe.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Qe.credentialFromTaggedObject(e)}static credentialFromError(e){return Qe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return Qe.credential(t,n)}catch(e){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Ye(e,t){return L(e,"POST","/v1/accounts:signUp",R(e,t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qe.TWITTER_SIGN_IN_METHOD="twitter.com",Qe.PROVIDER_ID="twitter.com";class Je{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await H._fromIdTokenResponse(e,n,r),s=Xe(n);return new Je({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Xe(n);return new Je({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Xe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ze(e){var t;const n=_e(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Je({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Ye(n,{returnSecureToken:!0}),i=await Je._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et extends r.c{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,et.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new et(e,t,n,r)}}function tt(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw et._fromErrorAndOperation(e,n,t,r);throw n})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rt(e,t){const n=Object(r.p)(e);await st(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return x(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),s=nt(i||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function it(e,t,n=!1){const r=await B(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Je._forOperation(e,"link",r)}async function st(e,t,n){await K(t);const r=!1===e?"provider-already-linked":"no-such-provider";I(nt(t.providerData).has(n)===e,t.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ot(e,t,n=!1){const{auth:r}=e;try{const i=await B(e,tt(r,"reauthenticate",t,e),n);I(i.idToken,r,"internal-error");const s=q(i.idToken);I(s,r,"internal-error");const{sub:o}=s;return I(e.uid===o,r,"user-mismatch"),Je._forOperation(e,"reauthenticate",i)}catch(e){throw"auth/user-not-found"===(null==e?void 0:e.code)&&m(r,"user-mismatch"),e}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function at(e,t,n=!1){const r=await tt(e,"signIn",t),i=await Je._fromIdTokenResponse(e,"signIn",r);return n||await e._updateCurrentUser(i.user),i}async function ct(e,t){return at(_e(e),t)}async function ut(e,t){const n=Object(r.p)(e);return await st(!1,n,t.providerId),it(n,t)}async function lt(e,t){return ot(Object(r.p)(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function ht(e,t){const n=_e(e),r=await async function(e,t){return L(e,"POST","/v1/accounts:signInWithCustomToken",R(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Je._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?ft._fromServerResponse(e,t):"totpInfo"in t?pt._fromServerResponse(e,t):m(e,"internal-error")}}class ft extends dt{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new ft(t)}}class pt extends dt{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new pt(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(e,t,n){var r;I((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),I(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(I(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(I(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mt(e,t,n){var r;const i=_e(e),s={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await we(i,s,"getOobCode",!0);n&&gt(i,e,n),await Re(i,e)}else n&&gt(i,s,n),await Re(i,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const e=await we(i,s,"getOobCode",!0);n&&gt(i,e,n),await Re(i,e)}})}async function yt(e,t,n){await Ae(Object(r.p)(e),{oobCode:t,newPassword:n})}async function vt(e,t){await async function(e,t){return x(e,"POST","/v1/accounts:update",R(e,t))}(Object(r.p)(e),{oobCode:t})}async function wt(e,t){const n=Object(r.p)(e),i=await Ae(n,{oobCode:t}),s=i.requestType;switch(I(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":I(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":I(i.mfaInfo,n,"internal-error");default:I(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=dt._fromServerResponse(_e(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function bt(e,t){const{data:n}=await wt(Object(r.p)(e),t);return n.email}async function It(e,t,n){var r;const i=_e(e),s={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await we(i,s,"signUpPassword");o=Ye(i,e)}else o=Ye(i,s).catch(async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await we(i,s,"signUpPassword");return Ye(i,e)}return Promise.reject(e)});const a=await o.catch(e=>Promise.reject(e)),c=await Je._fromIdTokenResponse(i,"signIn",a);return await i._updateCurrentUser(c.user),c}function _t(e,t,n){return ct(Object(r.p)(e),Ue.credential(t,n))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tt(e,t,n){var r;const i=_e(e),s={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};function o(e,t){I(t.handleCodeInApp,i,"argument-error"),t&&gt(i,e,t)}if(null===(r=i._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await we(i,s,"getOobCode",!0);o(e,n),await xe(i,e)}else o(s,n),await xe(i,s).catch(async e=>{if("auth/missing-recaptcha-token"!==e.code)return Promise.reject(e);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const e=await we(i,s,"getOobCode",!0);o(e,n),await xe(i,e)}})}function Et(e,t){const n=je.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function St(e,t,n){const i=Object(r.p)(e),s=Ue.credentialWithLink(t,n||E());return I(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),ct(i,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function kt(e,t){const n={identifier:t,continueUri:S()?E():"http://localhost"},{signinMethods:i}=await async function(e,t){return x(e,"POST","/v1/accounts:createAuthUri",R(e,t))}(Object(r.p)(e),n);return i||[]}async function Ct(e,t){const n=Object(r.p)(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&gt(n.auth,i,t);const{email:s}=await async function(e,t){return Oe(e,t)}(n.auth,i);s!==e.email&&await e.reload()}async function At(e,t,n){const i=Object(r.p)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&gt(i.auth,s,n);const{email:o}=await async function(e,t){return Oe(e,t)}(i.auth,s);o!==e.email&&await e.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Nt(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=Object(r.p)(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await B(i,async function(e,t){return x(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function Dt(e,t){return Rt(Object(r.p)(e),t,null)}function Ot(e,t){return Rt(Object(r.p)(e),null,t)}async function Rt(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await B(e,Ne(r,i));await e._updateTokensIfNecessary(s,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class Pt extends xt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class Lt extends xt{constructor(e,t){super(e,"facebook.com",t)}}class Mt extends Pt{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class Ft extends xt{constructor(e,t){super(e,"google.com",t)}}class Vt extends Pt{constructor(e,t,n){super(e,"twitter.com",t,n)}}function jt(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=q(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r){return new xt(s,"anonymous"!==r&&"custom"!==r?r:null)}}if(!r)return null;switch(r){case"facebook.com":return new Lt(s,i);case"github.com":return new Mt(s,i);case"google.com":return new Ft(s,i);case"twitter.com":return new Vt(s,i,e.screenName||null);case"custom":case"anonymous":return new xt(s,null);default:return new xt(s,r,i)}}(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e,t,n){this.type=e,this.credential=t,this.auth=n}static _fromIdtoken(e,t){return new Ut("enroll",e,t)}static _fromMfaPendingCredential(e){return new Ut("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Ut._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Ut._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=_e(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>dt._fromServerResponse(n,e));I(r.mfaPendingCredential,n,"internal-error");const s=Ut._fromMfaPendingCredential(r.mfaPendingCredential);return new qt(s,i,async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Je._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return I(t.user,n,"internal-error"),Je._forOperation(t.user,t.operationType,o);default:m(n,"internal-error")}})}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}function Bt(e,t){var n;const i=Object(r.p)(e),s=t;return I(t.customData.operationType,i,"argument-error"),I(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),qt._fromError(i,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>dt._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new zt(e)}async getSession(){return Ut._fromIdtoken(await this.user.getIdToken(),this.user.auth)}async enroll(e,t){const n=e,r=await this.getSession(),i=await B(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await B(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},x(r,"POST","/v2/accounts/mfaEnrollment:withdraw",R(r,i))));this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(e){throw e}var r,i}}const Gt=new WeakMap;function Kt(e){const t=Object(r.p)(e);return Gt.has(t)||Gt.set(t,zt._fromUser(t)),Gt.get(t)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class $t{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem("__sak","1"),this.storage.removeItem("__sak"),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt extends $t{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=Object(r.q)();return re(e)||ue(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=le(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);Object(r.u)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wt.type="LOCAL";const Ht=Wt;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt extends $t{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Qt.type="SESSION";const Yt=Qt;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Jt{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Jt(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(e){return{fulfilled:!1,reason:e}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Xt(e="",t=10){let n="";for(let e=0;e<t;e++)n+=Math.floor(10*Math.random());return e+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.receivers=[];class Zt{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const c=Xt("",20);r.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(u),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return window}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function tn(){return void 0!==en().WorkerGlobalScope&&"function"==typeof en().importScripts}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const nn="firebaseLocalStorageDb";class rn{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function sn(e,t){return e.transaction(["firebaseLocalStorage"],t?"readwrite":"readonly").objectStore("firebaseLocalStorage")}function on(){const e=indexedDB.open(nn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(e){n(e)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains("firebaseLocalStorage")?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(nn);return new rn(e).toPromise()}(),t(await on()))})})}async function an(e,t,n){const r=sn(e,!0).put({fbase_key:t,value:n});return new rn(r).toPromise()}function cn(e,t){const n=sn(e,!0).delete(t);return new rn(n).toPromise()}class un{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await on()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(e){if(t++>3)throw e;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return tn()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jt._getInstance(tn()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Zt(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await on();return await an(e,"__sak","1"),await cn(e,"__sak"),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>an(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=sn(e,!1).get(t),r=await new rn(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>cn(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=sn(e,!1).getAll();return new rn(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const e of Object.keys(this.localCache))this.localCache[e]&&!n.has(e)&&(this.notifyListeners(e,null),t.push(e));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const e of Array.from(n))e(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}un.type="LOCAL";const ln=un;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.auth=e,this.counter=1e12,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new dn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||1e12;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||1e12;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||1e12;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class dn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;I(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(e){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(e){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const fn=ye("rcb"),pn=new C(3e4,6e4);class gn{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=en().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return I(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&fe(en().grecaptcha)?Promise.resolve(en().grecaptcha):new Promise((n,i)=>{const s=en().setTimeout(()=>{i(y(e,"network-request-failed"))},pn.get());en()[fn]=()=>{en().clearTimeout(s),delete en()[fn];const r=en().grecaptcha;if(!r||!fe(r))return void i(y(e,"internal-error"));const o=r.render;r.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(r)};me("https://www.google.com/recaptcha/api.js??"+Object(r.A)({onload:fn,render:"explicit",hl:t})).catch(()=>{clearTimeout(s),i(y(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=en().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class mn{async load(e){return new hn(e)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn={theme:"light",type:"image"};class vn{constructor(e,t=Object.assign({},yn),n){this.parameters=t,this.type="recaptcha",this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=_e(n),this.isInvisible="invisible"===this.parameters.size,I("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;I(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new mn:new gn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){I(!this.parameters.sitekey,this.auth,"argument-error"),I(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),I("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=en()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){I(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){I(S()&&!tn(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await x(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);I(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return I(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class wn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Ve._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function bn(e,t,n){const i=_e(e),s=await Tn(i,t,Object(r.p)(n));return new wn(s,e=>ct(i,e))}async function In(e,t,n){const i=Object(r.p)(e);await st(!1,i,"phone");const s=await Tn(i.auth,t,Object(r.p)(n));return new wn(s,e=>ut(i,e))}async function _n(e,t,n){const i=Object(r.p)(e),s=await Tn(i.auth,t,Object(r.p)(n));return new wn(s,e=>lt(i,e))}async function Tn(e,t,n){var r;const i=await n.verify();try{let s;if(I("string"==typeof i,e,"argument-error"),I("recaptcha"===n.type,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){I("enroll"===t.type,e,"internal-error");return(await function(e,t){return x(e,"POST","/v2/accounts/mfaEnrollment:start",R(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo}{I("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;I(n,e,"missing-multi-factor-info");return(await function(e,t){return x(e,"POST","/v2/accounts/mfaSignIn:start",R(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return x(e,"POST","/v1/accounts:sendVerificationCode",R(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}async function En(e,t){await it(Object(r.p)(e),t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(e){this.providerId=Sn.PROVIDER_ID,this.auth=_e(e)}verifyPhoneNumber(e,t){return Tn(this.auth,e,Object(r.p)(t))}static credential(e,t){return Ve._fromVerification(e,t)}static credentialFromResult(e){const t=e;return Sn.credentialFromTaggedObject(t)}static credentialFromError(e){return Sn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Ve._fromTokenResponse(t,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function kn(e,t){return t?Y(t):(I(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Sn.PROVIDER_ID="phone",Sn.PHONE_SIGN_IN_METHOD="phone";class Cn extends Ce{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Le(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Le(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Le(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function An(e){return at(e.auth,new Cn(e),e.bypassAuthState)}function Nn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),ot(n,new Cn(e),e.bypassAuthState)}async function Dn(e){const{auth:t,user:n}=e;return I(n,t,"internal-error"),it(n,new Cn(e),e.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(e){this.reject(e)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(e){this.reject(e)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return An;case"linkViaPopup":case"linkViaRedirect":return Dn;case"reauthViaPopup":case"reauthViaRedirect":return Nn;default:m(this.auth,"internal-error")}}resolve(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){T(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rn=new C(2e3,1e4);async function xn(e,t,n){const r=_e(e);w(e,t,qe);const i=kn(r,n);return new Mn(r,"signInViaPopup",t,i).executeNotNull()}async function Pn(e,t,n){const i=Object(r.p)(e);w(i.auth,t,qe);const s=kn(i.auth,n);return new Mn(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function Ln(e,t,n){const i=Object(r.p)(e);w(i.auth,t,qe);const s=kn(i.auth,n);return new Mn(i.auth,"linkViaPopup",t,s,i).executeNotNull()}class Mn extends On{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,Mn.currentPopupAction&&Mn.currentPopupAction.cancel(),Mn.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return I(e,this.auth,"internal-error"),e}async onExecution(){T(1===this.filter.length,"Popup operations only handle one event");const e=Xt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(y(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(y(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Mn.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(y(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Rn.get())};e()}}Mn.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Fn=new Map;class Vn extends On{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Fn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Bn(t),r=qn(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Fn.set(this.auth._key(),e)}return this.bypassAuthState||Fn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function jn(e,t){return qn(e)._set(Bn(t),"true")}function Un(e,t){Fn.set(e._key(),t)}function qn(e){return Y(e._redirectPersistence)}function Bn(e){return Z("pendingRedirect",e.config.apiKey,e.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zn(e,t,n){return async function(e,t,n){const r=_e(e);w(e,t,qe),await r._initializationPromise;const i=kn(r,n);return await jn(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Gn(e,t,n){return async function(e,t,n){const i=Object(r.p)(e);w(i.auth,t,qe),await i.auth._initializationPromise;const s=kn(i.auth,n);await jn(s,i.auth);const o=await Hn(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}(e,t,n)}function Kn(e,t,n){return async function(e,t,n){const i=Object(r.p)(e);w(i.auth,t,qe),await i.auth._initializationPromise;const s=kn(i.auth,n);await st(!1,i,t.providerId),await jn(s,i.auth);const o=await Hn(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}(e,t,n)}async function $n(e,t){return await _e(e)._initializationPromise,Wn(e,t,!1)}async function Wn(e,t,n=!1){const r=_e(e),i=kn(r,t),s=new Vn(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Hn(e){const t=Xt(e.uid+":::");return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qn{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jn(e);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Jn(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(y(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Yn(e))}saveEventToCache(e){this.cachedEventUids.add(Yn(e)),this.lastProcessedEventTime=Date.now()}}function Yn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Jn({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function Xn(e,t={}){return x(e,"GET","/v1/projects",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,er=/^https?/;function tr(e){const t=E(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!er.test(n))return!1;if(Zn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nr=new C(3e4,6e4);function rr(){const e=en().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let t=0;t<e.CP.length;t++)e.CP[t]=null}let ir=null;function sr(e){return ir=ir||function(e){return new Promise((t,n)=>{var r,i,s;function o(){rr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{rr(),n(y(e,"network-request-failed"))},timeout:nr.get()})}if(null===(i=null===(r=en().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=en().gapi)||void 0===s?void 0:s.load)){const t=ye("iframefcb");return en()[t]=()=>{gapi.load?o():n(y(e,"network-request-failed"))},me("https://apis.google.com/js/api.js?onload="+t).catch(e=>n(e))}o()}}).catch(e=>{throw ir=null,e})}(e),ir}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=new C(5e3,15e3),ar={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},cr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ur(e){const t=e.config;I(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:i.SDK_VERSION},o=cr.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${Object(r.A)(s).slice(1)}`}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const lr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function dr(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const u=Object.assign(Object.assign({},lr),{width:i.toString(),height:s.toString(),top:o,left:a}),l=Object(r.q)().toLowerCase();n&&(c=ie(l)?"_blank":n),ne(l)&&(t=t||"http://localhost",u.scrollbars="yes");const h=Object.entries(u).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=Object(r.q)()){var t;return ue(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(l)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t||"",c),new hr(null);const d=window.open(t||"",c,h);I(d,e,"popup-blocked");try{d.focus()}catch(e){}return new hr(d)}const fr=encodeURIComponent("fac");async function pr(e,t,n,s,o,a){I(e.config.authDomain,e,"auth-domain-config-required"),I(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.SDK_VERSION,eventId:o};if(t instanceof qe){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",Object(r.t)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof Be){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const u=c;for(const e of Object.keys(u))void 0===u[e]&&delete u[e];const l=await e._getAppCheckToken(),h=l?`#${fr}=${encodeURIComponent(l)}`:"";return`${function({config:e}){if(!e.emulator)return`https://${e.authDomain}/__/auth/handler`;return A(e,"emulator/auth/handler")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}?${Object(r.A)(u).slice(1)}${h}`}const gr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yt,this._completeRedirectFn=Wn,this._overrideRedirectResult=Un}async _openPopup(e,t,n,r){var i;T(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return dr(e,await pr(e,t,n,E(),r),Xt())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){en().location.href=e}(await pr(e,t,n,E(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(T(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await sr(e),n=en().gapi;return I(n,e,"internal-error"),t.open({where:document.body,url:ur(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ar,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=y(e,"network-request-failed"),s=en().setTimeout(()=>{r(i)},or.get());function o(){en().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}(e),n=new Qn(e);return t.register("authEvent",t=>{I(null==t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send("webStorageSupport",{type:"webStorageSupport"},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),m(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await Xn(e);for(const e of t)try{if(tr(e))return}catch(e){}m(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return le()||re()||ue()}};class mr{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return _("unexpected MultiFactorSessionType")}}}class yr extends mr{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new yr(e)}_finalizeEnroll(e,t,n){return function(e,t){return x(e,"POST","/v2/accounts/mfaEnrollment:finalize",R(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return x(e,"POST","/v2/accounts/mfaSignIn:finalize",R(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class vr{constructor(){}static assertion(e){return yr._fromCredential(e)}}vr.FACTOR_ID="phone";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class wr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){I(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
Object(r.o)("authIdTokenMaxAge");var br;
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ir(){return window}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */br="Browser",Object(i._registerComponent)(new a.a("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:s,authDomain:o}=n.options;I(s&&!s.includes(":"),"invalid-api-key",{appName:n.name});const a={apiKey:s,authDomain:o,clientPlatform:br,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:he(br)},c=new Ie(n,r,i,a);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Y);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Object(i._registerComponent)(new a.a("auth-internal",e=>(e=>new wr(e))(_e(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),Object(i.registerVersion)("@firebase/auth","0.23.2",function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(br)),Object(i.registerVersion)("@firebase/auth","0.23.2","esm2017");async function _r(e,t,n){var r;const{BuildInfo:i}=Ir();T(t.sessionId,"AuthEvent did not contain a session ID");const s=await async function(e){const t=function(e){if(T(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}(t.sessionId),o={};return ue()?o.ibi=i.packageName:oe()?o.apn=i.packageName:m(e,"operation-not-supported-in-this-environment"),i.displayName&&(o.appDisplayName=i.displayName),o.sessionId=s,pr(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,o)}function Tr(e){const{cordova:t}=Ir();return new Promise(n=>{t.plugins.browsertab.isAvailable(i=>{let s=null;i?t.plugins.browsertab.openUrl(e):s=t.InAppBrowser.open(e,function(e=Object(r.q)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(s)})})}class Er extends Qn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function Sr(e){const t=await Ar()._get(Nr(e));return t&&await Ar()._remove(Nr(e)),t}function kr(e,t){var n,r;const i=function(e){const t=Dr(e),n=t.link?decodeURIComponent(t.link):void 0,r=Dr(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return Dr(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=Dr(i),s=t.firebaseError?function(e){try{return JSON.parse(e)}catch(e){return null}}(decodeURIComponent(t.firebaseError)):null,o=null===(r=null===(n=null==s?void 0:s.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],a=o?y(o):null;return a?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:a,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function Cr(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function Ar(){return Y(Ht)}function Nr(e){return Z("authEvent",e.config.apiKey,e.name)}function Dr(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return Object(r.B)(n.join("?"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Or=class{constructor(){this._redirectPersistence=Yt,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Wn,this._overrideRedirectResult=Un}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new Er(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){m(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,s,o,a,c,u,l;const h=Ir();I("function"==typeof(null===(t=null==h?void 0:h.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),I(void 0!==(null===(n=null==h?void 0:h.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),I("function"==typeof(null===(s=null===(i=null===(r=null==h?void 0:h.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===s?void 0:s.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),I("function"==typeof(null===(c=null===(a=null===(o=null==h?void 0:h.cordova)||void 0===o?void 0:o.plugins)||void 0===a?void 0:a.browsertab)||void 0===c?void 0:c.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),I("function"==typeof(null===(l=null===(u=null==h?void 0:h.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===l?void 0:l.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),Fn.clear(),await this._originValidation(e);const s=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:Cr(),postBody:null,tenantId:e.tenantId,error:y(e,"no-auth-event")}}(e,n,r);await function(e,t){return Ar()._set(Nr(e),t)}(e,s);const o=await _r(e,s,t);return async function(e,t,n){const{cordova:r}=Ir();let i=()=>{};try{await new Promise((s,o)=>{let a=null;function c(){var e;s();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){a||(a=window.setTimeout(()=>{o(y(e,"redirect-cancelled-by-user"))},2e3))}function l(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(c),document.addEventListener("resume",u,!1),oe()&&document.addEventListener("visibilitychange",l,!1),i=()=>{t.removePassiveListener(c),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",l,!1),a&&window.clearTimeout(a)}})}finally{i()}}(e,i,await Tr(o))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=Ir(),n={};ue()?n.iosBundleId=t.packageName:oe()?n.androidPackageName=t.packageName:m(e,"operation-not-supported-in-this-environment"),await Xn(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=Ir(),s=setTimeout(async()=>{await Sr(e),t.onEvent(Rr())},500),o=async n=>{clearTimeout(s);const r=await Sr(e);let i=null;r&&(null==n?void 0:n.url)&&(i=kr(r,n.url)),t.onEvent(i||Rr())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,o);const a=r,c=i.packageName.toLowerCase()+"://";Ir().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(c)&&o({url:e}),"function"==typeof a)try{a(e)}catch(e){console.error(e)}}}};function Rr(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:y("no-auth-event")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(e,t){_e(e)._logFramework(t)}},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return th})),n.d(t,"b",(function(){return Wu})),n.d(t,"c",(function(){return Hu})),n.d(t,"d",(function(){return Qu})),n.d(t,"e",(function(){return Du})),n.d(t,"f",(function(){return Iu})),n.d(t,"g",(function(){return wu})),n.d(t,"h",(function(){return lh})),n.d(t,"i",(function(){return Yu})),n.d(t,"j",(function(){return Xu})),n.d(t,"k",(function(){return Ou})),n.d(t,"l",(function(){return T})),n.d(t,"m",(function(){return Zu})),n.d(t,"n",(function(){return Nu})),n.d(t,"o",(function(){return bu})),n.d(t,"p",(function(){return Ll})),n.d(t,"q",(function(){return Ol})),n.d(t,"r",(function(){return hh})),n.d(t,"s",(function(){return $l})),n.d(t,"t",(function(){return xl})),n.d(t,"u",(function(){return Ul})),n.d(t,"v",(function(){return Vl})),n.d(t,"w",(function(){return dh})),n.d(t,"x",(function(){return zl})),n.d(t,"y",(function(){return uh})),n.d(t,"z",(function(){return j})),n.d(t,"A",(function(){return Wh})),n.d(t,"B",(function(){return Kh})),n.d(t,"C",(function(){return vt})),n.d(t,"D",(function(){return K})),n.d(t,"E",(function(){return x})),n.d(t,"F",(function(){return k})),n.d(t,"G",(function(){return G})),n.d(t,"H",(function(){return jr})),n.d(t,"I",(function(){return pu})),n.d(t,"J",(function(){return b})),n.d(t,"K",(function(){return ct})),n.d(t,"L",(function(){return m})),n.d(t,"M",(function(){return lu})),n.d(t,"N",(function(){return Sh})),n.d(t,"O",(function(){return ah})),n.d(t,"P",(function(){return ch})),n.d(t,"Q",(function(){return Fl})),n.d(t,"R",(function(){return Xh})),n.d(t,"S",(function(){return Jh})),n.d(t,"T",(function(){return sh})),n.d(t,"U",(function(){return ju})),n.d(t,"V",(function(){return _u})),n.d(t,"W",(function(){return Tu})),n.d(t,"X",(function(){return vu})),n.d(t,"Y",(function(){return oh})),n.d(t,"Z",(function(){return Eh})),n.d(t,"ab",(function(){return Qh})),n.d(t,"bb",(function(){return Bu})),n.d(t,"cb",(function(){return Eu})),n.d(t,"db",(function(){return Ju})),n.d(t,"eb",(function(){return Mu})),n.d(t,"fb",(function(){return Fu})),n.d(t,"gb",(function(){return qu})),n.d(t,"hb",(function(){return Hl})),n.d(t,"ib",(function(){return Wl})),n.d(t,"jb",(function(){return Pu})),n.d(t,"kb",(function(){return Ah})),n.d(t,"lb",(function(){return Oh})),n.d(t,"mb",(function(){return Dh})),n.d(t,"nb",(function(){return gh})),n.d(t,"ob",(function(){return yh})),n.d(t,"pb",(function(){return vh})),n.d(t,"qb",(function(){return wh})),n.d(t,"rb",(function(){return bh})),n.d(t,"sb",(function(){return Ih})),n.d(t,"tb",(function(){return xu})),n.d(t,"ub",(function(){return Zh})),n.d(t,"vb",(function(){return Ru})),n.d(t,"wb",(function(){return ql})),n.d(t,"xb",(function(){return Bl})),n.d(t,"yb",(function(){return Gu})),n.d(t,"zb",(function(){return Mh})),n.d(t,"Ab",(function(){return Vh})),n.d(t,"Bb",(function(){return Fh})),n.d(t,"Cb",(function(){return Ku})),n.d(t,"Db",(function(){return kh})),n.d(t,"Eb",(function(){return Ch})),n.d(t,"Fb",(function(){return Ml})),n.d(t,"Gb",(function(){return jl})),n.d(t,"Hb",(function(){return jh})),n.d(t,"Ib",(function(){return zh})),n.d(t,"Jb",(function(){return Bh})),n.d(t,"Kb",(function(){return Rl})),n.d(t,"Lb",(function(){return ku})),n.d(t,"Mb",(function(){return Su})),n.d(t,"Nb",(function(){return Hh})),n.d(t,"Ob",(function(){return Yh})),n.d(t,"Pb",(function(){return _h})),n.d(t,"Qb",(function(){return td})),n.d(t,"Rb",(function(){return f})),n.d(t,"Sb",(function(){return ph})),n.d(t,"Tb",(function(){return Kl})),n.d(t,"Ub",(function(){return Gl})),n.d(t,"Vb",(function(){return ih})),n.d(t,"Wb",(function(){return zu})),n.d(t,"Xb",(function(){return Th})),n.d(t,"Yb",(function(){return Uu})),n.d(t,"Zb",(function(){return Pl})),n.d(t,"ac",(function(){return ed}));var r=n(3),i=n(6),s=n(5),o=n(0),a=n(4);const c="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}u.UNAUTHENTICATED=new u(null),u.GOOGLE_CREDENTIALS=new u("google-credentials-uid"),u.FIRST_PARTY=new u("first-party-uid"),u.MOCK_USER=new u("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let l="9.23.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h=new s.b("@firebase/firestore");function d(){return h.logLevel}function f(e){h.setLogLevel(e)}function p(e,...t){if(h.logLevel<=s.a.DEBUG){const n=t.map(y);h.debug(`Firestore (${l}): ${e}`,...n)}}function g(e,...t){if(h.logLevel<=s.a.ERROR){const n=t.map(y);h.error(`Firestore (${l}): ${e}`,...n)}}function m(e,...t){if(h.logLevel<=s.a.WARN){const n=t.map(y);h.warn(`Firestore (${l}): ${e}`,...n)}}function y(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v(e="Unexpected state"){const t=`FIRESTORE (${l}) INTERNAL ASSERTION FAILED: `+e;throw g(t),new Error(t)}function w(e,t){e||v()}function b(e,t){e||v()}function I(e,t){return e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class T extends o.c{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer "+e)}}class k{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(u.UNAUTHENTICATED))}shutdown(){}}class C{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class A{constructor(e){this.t=e,this.currentUser=u.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new E;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new E,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{p("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(p("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new E)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(p("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(w("string"==typeof t.accessToken),new S(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return w(null===e||"string"==typeof e),new u(e)}}class N{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=u.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class D{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new N(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(u.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class O{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&p("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: "+e.error.message);const n=e.token!==this.T;return this.T=e.token,p("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{p("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):p("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(w("string"==typeof e.token),this.T=e.token,new O(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class x{getToken(){return Promise.resolve(new O(""))}invalidateToken(){}start(e,t){}shutdown(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let t=0;t<e;t++)n[t]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=P(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function M(e,t){return e<t?-1:e>t?1:0}function F(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function V(e){return e+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new T(_.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new T(_.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return j.fromMillis(Date.now())}static fromDate(e){return j.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new j(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?M(this.nanoseconds,e.nanoseconds):M(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.timestamp=e}static fromTimestamp(e){return new U(e)}static min(){return new U(new j(0,0))}static max(){return new U(new j(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e,t,n){void 0===t?t=0:t>e.length&&v(),void 0===n?n=e.length-t:n>e.length-t&&v(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===q.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof q?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class B extends q{construct(e,t,n){return new B(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new T(_.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new B(t)}static emptyPath(){return new B([])}}const z=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class G extends q{construct(e,t,n){return new G(e,t,n)}static isValidIdentifier(e){return z.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),G.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new G(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new T(_.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new T(_.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new T(_.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new T(_.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new G(t)}static emptyPath(){return new G([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(B.fromString(e))}static fromName(e){return new K(B.fromString(e).popFirst(5))}static empty(){return new K(B.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===B.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return B.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new B(e.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function W(e){return e.fields.find(e=>2===e.kind)}function H(e){return e.fields.filter(e=>2!==e.kind)}function Q(e,t){let n=M(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=J(e.fields[r],t.fields[r]),0!==n)return n;return M(e.fields.length,t.fields.length)}$.UNKNOWN_ID=-1;class Y{constructor(e,t){this.fieldPath=e,this.kind=t}}function J(e,t){const n=G.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:M(e.kind,t.kind)}class X{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new X(0,te.min())}}function Z(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=U.fromTimestamp(1e9===r?new j(n+1,0):new j(n,r));return new te(i,K.empty(),t)}function ee(e){return new te(e.readTime,e.key,-1)}class te{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new te(U.min(),K.empty(),-1)}static max(){return new te(U.max(),K.empty(),-1)}}function ne(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=K.comparator(e.documentKey,t.documentKey),0!==n?n:M(e.largestBatchId,t.largestBatchId))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ie{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function se(e){if(e.code!==_.FAILED_PRECONDITION||e.message!==re)throw e;p("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&v(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(e){return oe.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,n)=>{t(e)})}static reject(e){return new oe((t,n)=>{n(e)})}static waitFor(e){return new oe((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=oe.resolve(!1);for(const n of e)t=t.next(e=>e?oe.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new oe((n,r)=>{const i=e.length,s=new Array(i);let o=0;for(let a=0;a<i;a++){const c=a;t(e[c]).next(e=>{s[c]=e,++o,o===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new oe((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new E,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new le(e,t.error)):this.v.resolve()},this.transaction.onerror=t=>{const n=ge(t.target.error);this.v.reject(new le(e,n))}}static open(e,t,n,r){try{return new ae(t,e.transaction(r,n))}catch(e){throw new le(t,e)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(p("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new de(t)}}class ce{constructor(e,t,n){this.name=e,this.version=t,this.V=n,12.2===ce.S(Object(o.q)())&&g("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return p("SimpleDb","Removing database:",e),fe(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Object(o.v)())return!1;if(ce.C())return!0;const e=Object(o.q)(),t=ce.S(e),n=0<t&&t<10,r=ce.N(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static N(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async $(e){return this.db||(p("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new le(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new T(_.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new T(_.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new le(e,r))},r.onupgradeneeded=e=>{p("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.V.O(t,r.transaction,e.oldVersion,this.version).next(()=>{p("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.F&&(this.db.onversionchange=e=>this.F(e)),this.db}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.$(e);const t=ae.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next(e=>(t.P(),e)).catch(e=>(t.abort(e),oe.reject(e))).toPromise();return s.catch(()=>{}),await t.R,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(p("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class ue{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return fe(this.L.delete())}}class le extends T{constructor(e,t){super(_.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function he(e){return"IndexedDbTransactionError"===e.name}class de{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(p("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(p("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),fe(n)}add(e){return p("SimpleDb","ADD",this.store.name,e,e),fe(this.store.add(e))}get(e){return fe(this.store.get(e)).next(t=>(void 0===t&&(t=null),p("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return p("SimpleDb","DELETE",this.store.name,e),fe(this.store.delete(e))}count(){return p("SimpleDb","COUNT",this.store.name),fe(this.store.count())}j(e,t){const n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}{const e=this.store.getAll(n.range);return new oe((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}}H(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new oe((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}J(e,t){p("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.Y=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}X(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Z(e){const t=this.cursor({});return new oe((n,r)=>{t.onerror=e=>{const t=ge(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new oe((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ue(i),o=t(i.primaryKey,i.value,s);if(o instanceof oe){const e=o.catch(e=>(s.done(),oe.reject(e)));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}}).next(()=>oe.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function fe(e){return new oe((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=ge(e.target.error);n(t)}})}let pe=!1;function ge(e){const t=ce.S(Object(o.q)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new T("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return pe||(pe=!0,setTimeout(()=>{throw e},0)),e}}return e}class me{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){p("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{p("IndexBackiller","Documents written: "+await this.tt.nt())}catch(e){he(e)?p("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e):await se(e)}await this.et(6e4)})}}class ye{constructor(e,t){this.localStore=e,this.persistence=t}async nt(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.st(t,e))}st(e,t){const n=new Set;let r=t,i=!0;return oe.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return p("IndexBackiller","Processing collection: "+t),this.it(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}it(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.rt(r,n)).next(n=>(p("IndexBackiller","Updating offset: "+n),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}rt(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=ee(t);ne(r,n)>0&&(n=r)}),new te(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ve{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function we(e){return null==e}function be(e){return 0===e&&1/e==-1/0}function Ie(e){return"number"==typeof e&&Number.isInteger(e)&&!be(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ee(t)),t=Te(e.get(n),t);return Ee(t)}function Te(e,t){let n=t;const r=e.length;for(let t=0;t<r;t++){const r=e.charAt(t);switch(r){case"\0":n+="";break;case"":n+="";break;default:n+=r}}return n}function Ee(e){return e+""}function Se(e){const t=e.length;if(w(t>=2),2===t)return w(""===e.charAt(0)&&""===e.charAt(1)),B.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("",s);switch((t<0||t>n)&&v(),e.charAt(t+1)){case"":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"":i+=e.substring(s,t),i+="\0";break;case"":i+=e.substring(s,t+1);break;default:v()}s=t+2}return new B(r)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ve.ct=-1;const ke=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(e,t){return[e,_e(t)]}function Ae(e,t,n){return[e,_e(t),n]}const Ne={},De=["prefixPath","collectionGroup","readTime","documentId"],Oe=["prefixPath","collectionGroup","documentId"],Re=["collectionGroup","readTime","prefixPath","documentId"],xe=["canonicalId","targetId"],Pe=["targetId","path"],Le=["path","targetId"],Me=["collectionId","parent"],Fe=["indexId","uid"],Ve=["uid","sequenceNumber"],je=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Ue=["indexId","uid","orderedDocumentKey"],qe=["userId","collectionPath","documentId"],Be=["userId","collectionPath","largestBatchId"],ze=["userId","collectionGroup","largestBatchId"],Ge=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ke=[...Ge,"documentOverlays"],$e=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],We=$e,He=[...We,"indexConfiguration","indexState","indexEntries"];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe extends ie{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ye(e,t){const n=I(e);return ce.M(n.ht,t)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Je(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Xe(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ze(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e,t){this.comparator=e,this.root=t||nt.EMPTY}insert(e,t){return new et(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nt.BLACK,null,null))}remove(e){return new et(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tt(this.root,e,this.comparator,!1)}getReverseIterator(){return new tt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tt(this.root,e,this.comparator,!0)}}class tt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:nt.RED,this.left=null!=r?r:nt.EMPTY,this.right=null!=i?i:nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new nt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return nt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw v();if(this.right.isRed())throw v();const e=this.left.check();if(e!==this.right.check())throw v();return e+(this.isRed()?0:1)}}nt.EMPTY=null,nt.RED=!0,nt.BLACK=!1,nt.EMPTY=new class{constructor(){this.size=0}get key(){throw v()}get value(){throw v()}get color(){throw v()}get left(){throw v()}get right(){throw v()}copy(e,t,n,r,i){return this}insert(e,t,n){return new nt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class rt{constructor(e){this.comparator=e,this.data=new et(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new it(this.data.getIterator())}getIteratorFrom(e){return new it(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof rt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new rt(this.comparator);return t.data=e,t}}class it{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function st(e){return e.hasNext()?e.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ot{constructor(e){this.fields=e,e.sort(G.comparator)}static empty(){return new ot([])}unionWith(e){let t=new rt(G.comparator);for(const e of this.fields)t=t.add(e);for(const n of e)t=t.add(n);return new ot(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return F(this.fields,e.fields,(e,t)=>e.isEqual(t))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class at extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new at("Invalid base64 string: "+e):e}}(e);return new ut(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return M(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ut.EMPTY_BYTE_STRING=new ut("");const lt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ht(e){if(w(!!e),"string"==typeof e){let t=0;const n=lt.exec(e);if(w(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:dt(e.seconds),nanos:dt(e.nanos)}}function dt(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ft(e){return"string"==typeof e?ut.fromBase64String(e):ut.fromUint8Array(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function gt(e){const t=e.mapValue.fields.__previous_value__;return pt(t)?gt(t):t}function mt(e){const t=ht(e.mapValue.fields.__local_write_time__.timestampValue);return new j(t.seconds,t.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t,n,r,i,s,o,a,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=c}}class vt{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new vt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof vt&&e.projectId===this.projectId&&e.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wt={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},bt={nullValue:"NULL_VALUE"};function It(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?pt(e)?4:Pt(e)?9007199254740991:10:v()}function _t(e,t){if(e===t)return!0;const n=It(e);if(n!==It(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return mt(e).isEqual(mt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ht(e.timestampValue),r=ht(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ft(e.bytesValue).isEqual(ft(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return dt(e.geoPointValue.latitude)===dt(t.geoPointValue.latitude)&&dt(e.geoPointValue.longitude)===dt(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return dt(e.integerValue)===dt(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=dt(e.doubleValue),r=dt(t.doubleValue);return n===r?be(n)===be(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return F(e.arrayValue.values||[],t.arrayValue.values||[],_t);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Je(n)!==Je(r))return!1;for(const e in n)if(n.hasOwnProperty(e)&&(void 0===r[e]||!_t(n[e],r[e])))return!1;return!0}(e,t);default:return v()}}function Tt(e,t){return void 0!==(e.values||[]).find(e=>_t(e,t))}function Et(e,t){if(e===t)return 0;const n=It(e),r=It(t);if(n!==r)return M(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return M(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=dt(e.integerValue||e.doubleValue),r=dt(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return St(e.timestampValue,t.timestampValue);case 4:return St(mt(e),mt(t));case 5:return M(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ft(e),r=ft(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let e=0;e<n.length&&e<r.length;e++){const t=M(n[e],r[e]);if(0!==t)return t}return M(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=M(dt(e.latitude),dt(t.latitude));return 0!==n?n:M(dt(e.longitude),dt(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let e=0;e<n.length&&e<r.length;++e){const t=Et(n[e],r[e]);if(t)return t}return M(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===wt.mapValue&&t===wt.mapValue)return 0;if(e===wt.mapValue)return 1;if(t===wt.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let e=0;e<r.length&&e<s.length;++e){const t=M(r[e],s[e]);if(0!==t)return t;const o=Et(n[r[e]],i[s[e]]);if(0!==o)return o}return M(r.length,s.length)}(e.mapValue,t.mapValue);default:throw v()}}function St(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return M(e,t);const n=ht(e),r=ht(t),i=M(n.seconds,r.seconds);return 0!==i?i:M(n.nanos,r.nanos)}function kt(e){return function e(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(e){const t=ht(e);return`time(${t.seconds},${t.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?ft(t.bytesValue).toBase64():"referenceValue"in t?(r=t.referenceValue,K.fromName(r).toString()):"geoPointValue"in t?`geo(${(n=t.geoPointValue).latitude},${n.longitude})`:"arrayValue"in t?function(t){let n="[",r=!0;for(const i of t.values||[])r?r=!1:n+=",",n+=e(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(t){const n=Object.keys(t.fields||{}).sort();let r="{",i=!0;for(const s of n)i?i=!1:r+=",",r+=`${s}:${e(t.fields[s])}`;return r+"}"}(t.mapValue):v();var n,r}(e)}function Ct(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function At(e){return!!e&&"integerValue"in e}function Nt(e){return!!e&&"arrayValue"in e}function Dt(e){return!!e&&"nullValue"in e}function Ot(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Rt(e){return!!e&&"mapValue"in e}function xt(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Xe(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=xt(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=xt(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Pt(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Lt(e){return"nullValue"in e?bt:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Ct(vt.empty(),K.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:v()}function Mt(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Ct(vt.empty(),K.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?wt:v()}function Ft(e,t){const n=Et(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Vt(e,t){const n=Et(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.value=e}static empty(){return new jt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Rt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=xt(t)}setAll(e){let t=G.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=xt(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Rt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return _t(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Rt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Xe(t,(t,n)=>e[t]=n);for(const t of n)delete e[t]}clone(){return new jt(xt(this.value))}}function Ut(e){const t=[];return Xe(e.fields,(e,n)=>{const r=new G([e]);if(Rt(n)){const e=Ut(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new ot(t)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class qt{constructor(e,t,n,r,i,s,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=o}static newInvalidDocument(e){return new qt(e,0,U.min(),U.min(),U.min(),jt.empty(),0)}static newFoundDocument(e,t,n,r){return new qt(e,1,t,U.min(),n,r,0)}static newNoDocument(e,t){return new qt(e,2,t,U.min(),U.min(),jt.empty(),0)}static newUnknownDocument(e,t){return new qt(e,3,t,U.min(),U.min(),jt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(U.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=jt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=jt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=U.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof qt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new qt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e,t){this.position=e,this.inclusive=t}}function zt(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?K.comparator(K.fromName(o.referenceValue),n.key):Et(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function Gt(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!_t(e.position[n],t.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t="asc"){this.field=e,this.dir=t}}function $t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{}class Ht extends Wt{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new rn(e,t,n):"array-contains"===t?new cn(e,n):"in"===t?new un(e,n):"not-in"===t?new ln(e,n):"array-contains-any"===t?new hn(e,n):new Ht(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new sn(e,n):new on(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Et(t,this.value)):null!==t&&It(this.value)===It(t)&&this.matchesComparison(Et(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return v()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Qt extends Wt{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Qt(e,t)}matches(e){return Yt(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Yt(e){return"and"===e.op}function Jt(e){return"or"===e.op}function Xt(e){return Zt(e)&&Yt(e)}function Zt(e){for(const t of e.filters)if(t instanceof Qt)return!1;return!0}function en(e,t){return e instanceof Ht?function(e,t){return t instanceof Ht&&e.op===t.op&&e.field.isEqual(t.field)&&_t(e.value,t.value)}(e,t):e instanceof Qt?function(e,t){return t instanceof Qt&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&en(n,t.filters[r]),!0)}(e,t):void v()}function tn(e,t){const n=e.filters.concat(t);return Qt.create(n,e.op)}function nn(e){return e instanceof Ht?function(e){return`${e.field.canonicalString()} ${e.op} ${kt(e.value)}`}(e):e instanceof Qt?function(e){return e.op.toString()+" {"+e.getFilters().map(nn).join(" ,")+"}"}(e):"Filter"}class rn extends Ht{constructor(e,t,n){super(e,t,n),this.key=K.fromName(n.referenceValue)}matches(e){const t=K.comparator(e.key,this.key);return this.matchesComparison(t)}}class sn extends Ht{constructor(e,t){super(e,"in",t),this.keys=an("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class on extends Ht{constructor(e,t){super(e,"not-in",t),this.keys=an("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function an(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>K.fromName(e.referenceValue))}class cn extends Ht{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Nt(t)&&Tt(t.arrayValue,this.value)}}class un extends Ht{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Tt(this.value.arrayValue,t)}}class ln extends Ht{constructor(e,t){super(e,"not-in",t)}matches(e){if(Tt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Tt(this.value.arrayValue,t)}}class hn extends Ht{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Nt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Tt(this.value.arrayValue,e))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.dt=null}}function fn(e,t=null,n=[],r=[],i=null,s=null,o=null){return new dn(e,t,n,r,i,s,o)}function pn(e){const t=I(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function e(t){if(t instanceof Ht)return t.field.canonicalString()+t.op.toString()+kt(t.value);if(Xt(t))return t.filters.map(t=>e(t)).join(",");{const n=t.filters.map(t=>e(t)).join(",");return`${t.op}(${n})`}}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),we(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>kt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>kt(e)).join(",")),t.dt=e}return t.dt}function gn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!$t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!en(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Gt(e.startAt,t.startAt)&&Gt(e.endAt,t.endAt)}function mn(e){return K.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function yn(e,t){return e.filters.filter(e=>e instanceof Ht&&e.field.isEqual(t))}function vn(e,t,n){let r=bt,i=!0;for(const n of yn(e,t)){let e=bt,t=!0;switch(n.op){case"<":case"<=":e=Lt(n.value);break;case"==":case"in":case">=":e=n.value;break;case">":e=n.value,t=!1;break;case"!=":case"not-in":e=bt}Ft({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Ft({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function wn(e,t,n){let r=wt,i=!0;for(const n of yn(e,t)){let e=wt,t=!0;switch(n.op){case">=":case">":e=Mt(n.value),t=!1;break;case"==":case"in":case"<=":e=n.value;break;case"<":e=n.value,t=!1;break;case"!=":case"not-in":e=wt}Vt({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];Vt({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bn{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function In(e,t,n,r,i,s,o,a){return new bn(e,t,n,r,i,s,o,a)}function _n(e){return new bn(e)}function Tn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function En(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Sn(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function kn(e){return null!==e.collectionGroup}function Cn(e){const t=I(e);if(null===t.wt){t.wt=[];const e=Sn(t),n=En(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Kt(e)),t.wt.push(new Kt(G.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Kt(G.keyField(),e))}}}return t.wt}function An(e){const t=I(e);if(!t._t)if("F"===t.limitType)t._t=fn(t.path,t.collectionGroup,Cn(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const n of Cn(t)){const t="desc"===n.dir?"asc":"desc";e.push(new Kt(n.field,t))}const n=t.endAt?new Bt(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Bt(t.startAt.position,t.startAt.inclusive):null;t._t=fn(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function Nn(e,t){t.getFirstInequalityField(),Sn(e);const n=e.filters.concat([t]);return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Dn(e,t,n){return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function On(e,t){return gn(An(e),An(t))&&e.limitType===t.limitType}function Rn(e){return`${pn(An(e))}|lt:${e.limitType}`}function xn(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>nn(e)).join(", ")}]`),we(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>kt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>kt(e)).join(",")),`Target(${t})`}(An(e))}; limitType=${e.limitType})`}function Pn(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):K.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Cn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=zt(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Cn(e),t))&&!(e.endAt&&!function(e,t,n){const r=zt(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Cn(e),t))}(e,t)}function Ln(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Mn(e){return(t,n)=>{let r=!1;for(const i of Cn(e)){const e=Fn(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function Fn(e,t,n){const r=e.field.isKeyField()?K.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Et(r,i):v()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return v()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[t,r]of n)if(this.equalsFn(t,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Xe(this.inner,(t,n)=>{for(const[t,r]of n)e(t,r)})}isEmpty(){return Ze(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jn=new et(K.comparator);function Un(){return jn}const qn=new et(K.comparator);function Bn(...e){let t=qn;for(const n of e)t=t.insert(n.key,n);return t}function zn(e){let t=qn;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Gn(){return $n()}function Kn(){return $n()}function $n(){return new Vn(e=>e.toString(),(e,t)=>e.isEqual(t))}const Wn=new et(K.comparator),Hn=new rt(K.comparator);function Qn(...e){let t=Hn;for(const n of e)t=t.add(n);return t}const Yn=new rt(M);function Jn(){return Yn}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:be(t)?"-0":t}}function Zn(e){return{integerValue:""+e}}function er(e,t){return Ie(t)?Zn(t):Xn(e,t)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this._=void 0}}function nr(e,t,n){return e instanceof sr?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&pt(t)&&(t=gt(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof or?ar(e,t):e instanceof cr?ur(e,t):function(e,t){const n=ir(e,t),r=hr(n)+hr(e.gt);return At(n)&&At(e.gt)?Zn(r):Xn(e.serializer,r)}(e,t)}function rr(e,t,n){return e instanceof or?ar(e,t):e instanceof cr?ur(e,t):n}function ir(e,t){return e instanceof lr?At(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class sr extends tr{}class or extends tr{constructor(e){super(),this.elements=e}}function ar(e,t){const n=dr(t);for(const t of e.elements)n.some(e=>_t(e,t))||n.push(t);return{arrayValue:{values:n}}}class cr extends tr{constructor(e){super(),this.elements=e}}function ur(e,t){let n=dr(t);for(const t of e.elements)n=n.filter(e=>!_t(e,t));return{arrayValue:{values:n}}}class lr extends tr{constructor(e,t){super(),this.serializer=e,this.gt=t}}function hr(e){return dt(e.integerValue||e.doubleValue)}function dr(e){return Nt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,t){this.field=e,this.transform=t}}class pr{constructor(e,t){this.version=e,this.transformResults=t}}class gr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new gr}static exists(e){return new gr(void 0,e)}static updateTime(e){return new gr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function mr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class yr{}function vr(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Ar(e.key,gr.none()):new Tr(e.key,e.data,gr.none());{const n=e.data,r=jt.empty();let i=new rt(G.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Er(e.key,r,new ot(i.toArray()),gr.none())}}function wr(e,t,n){e instanceof Tr?function(e,t,n){const r=e.value.clone(),i=kr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Er?function(e,t,n){if(!mr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=kr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Sr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function br(e,t,n,r){return e instanceof Tr?function(e,t,n,r){if(!mr(e.precondition,t))return n;const i=e.value.clone(),s=Cr(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Er?function(e,t,n,r){if(!mr(e.precondition,t))return n;const i=Cr(e.fieldTransforms,r,t),s=t.data;return s.setAll(Sr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return mr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ir(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=ir(r.transform,e||null);null!=i&&(null===n&&(n=jt.empty()),n.set(r.field,i))}return n||null}function _r(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&F(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof or&&t instanceof or||e instanceof cr&&t instanceof cr?F(e.elements,t.elements,_t):e instanceof lr&&t instanceof lr?_t(e.gt,t.gt):e instanceof sr&&t instanceof sr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Tr extends yr{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Er extends yr{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Sr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function kr(e,t,n){const r=new Map;w(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,rr(o,a,n[i]))}return r}function Cr(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,nr(e,s,t))}return r}class Ar extends yr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Nr extends yr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let t=0;t<this.mutations.length;t++){const r=this.mutations[t];r.key.isEqual(e.key)&&wr(r,e,n[t])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=br(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=br(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Kn();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let o=this.applyToLocalView(s,i.mutatedFields);o=t.has(r.key)?null:o;const a=vr(s,o);null!==a&&n.set(r.key,a),s.isValidDocument()||s.convertToNoDocument(U.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Qn())}isEqual(e){return this.batchId===e.batchId&&F(this.mutations,e.mutations,(e,t)=>_r(e,t))&&F(this.baseMutations,e.baseMutations,(e,t)=>_r(e,t))}}class Or{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){w(e.mutations.length===n.length);let r=Wn;const i=e.mutations;for(let e=0;e<i.length;e++)r=r.insert(i[e].key,n[e].version);return new Or(e,t,n,r)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t,n){this.alias=e,this.yt=t,this.fieldPath=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Lr,Mr;function Fr(e){switch(e){default:return v();case _.CANCELLED:case _.UNKNOWN:case _.DEADLINE_EXCEEDED:case _.RESOURCE_EXHAUSTED:case _.INTERNAL:case _.UNAVAILABLE:case _.UNAUTHENTICATED:return!1;case _.INVALID_ARGUMENT:case _.NOT_FOUND:case _.ALREADY_EXISTS:case _.PERMISSION_DENIED:case _.FAILED_PRECONDITION:case _.ABORTED:case _.OUT_OF_RANGE:case _.UNIMPLEMENTED:case _.DATA_LOSS:return!0}}function Vr(e){if(void 0===e)return g("GRPC error has no .code"),_.UNKNOWN;switch(e){case Lr.OK:return _.OK;case Lr.CANCELLED:return _.CANCELLED;case Lr.UNKNOWN:return _.UNKNOWN;case Lr.DEADLINE_EXCEEDED:return _.DEADLINE_EXCEEDED;case Lr.RESOURCE_EXHAUSTED:return _.RESOURCE_EXHAUSTED;case Lr.INTERNAL:return _.INTERNAL;case Lr.UNAVAILABLE:return _.UNAVAILABLE;case Lr.UNAUTHENTICATED:return _.UNAUTHENTICATED;case Lr.INVALID_ARGUMENT:return _.INVALID_ARGUMENT;case Lr.NOT_FOUND:return _.NOT_FOUND;case Lr.ALREADY_EXISTS:return _.ALREADY_EXISTS;case Lr.PERMISSION_DENIED:return _.PERMISSION_DENIED;case Lr.FAILED_PRECONDITION:return _.FAILED_PRECONDITION;case Lr.ABORTED:return _.ABORTED;case Lr.OUT_OF_RANGE:return _.OUT_OF_RANGE;case Lr.UNIMPLEMENTED:return _.UNIMPLEMENTED;case Lr.DATA_LOSS:return _.DATA_LOSS;default:return v()}}(Mr=Lr||(Lr={}))[Mr.OK=0]="OK",Mr[Mr.CANCELLED=1]="CANCELLED",Mr[Mr.UNKNOWN=2]="UNKNOWN",Mr[Mr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Mr[Mr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Mr[Mr.NOT_FOUND=5]="NOT_FOUND",Mr[Mr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Mr[Mr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Mr[Mr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Mr[Mr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Mr[Mr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Mr[Mr.ABORTED=10]="ABORTED",Mr[Mr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Mr[Mr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Mr[Mr.INTERNAL=13]="INTERNAL",Mr[Mr.UNAVAILABLE=14]="UNAVAILABLE",Mr[Mr.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class jr{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Ur}static getOrCreateInstance(){return null===Ur&&(Ur=new jr),Ur}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Ur=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qr(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Br=new a.e([4294967295,4294967295],0);function zr(e){const t=qr().encode(e),n=new a.f;return n.update(t),new Uint8Array(n.digest())}function Gr(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new a.e([n,r],0),new a.e([i,s],0)]}class Kr{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new $r("Invalid padding: "+t);if(n<0)throw new $r("Invalid hash count: "+n);if(e.length>0&&0===this.hashCount)throw new $r("Invalid hash count: "+n);if(0===e.length&&0!==t)throw new $r("Invalid padding when bitmap length is 0: "+t);this.It=8*e.length-t,this.Tt=a.e.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(a.e.fromNumber(n)));return 1===r.compare(Br)&&(r=new a.e([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=zr(e),[n,r]=Gr(t);for(let e=0;e<this.hashCount;e++){const t=this.Et(n,r,e);if(!this.At(t))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new Kr(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.It)return;const t=zr(e),[n,r]=Gr(t);for(let e=0;e<this.hashCount;e++){const t=this.Et(n,r,e);this.Rt(t)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class $r extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Hr.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Wr(U.min(),r,new et(M),Un(),Qn())}}class Hr{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Hr(n,t,Qn(),Qn(),Qn())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Yr{constructor(e,t){this.targetId=e,this.Vt=t}}class Jr{constructor(e,t,n=ut.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Xr{constructor(){this.St=0,this.Dt=ti(),this.Ct=ut.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Qn(),t=Qn(),n=Qn();return this.Dt.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:v()}}),new Hr(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=ti()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Zr{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Un(),this.zt=ei(),this.Wt=new et(M)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:v()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,i=this.se(n);if(i){const s=i.target;if(mn(s))if(0===r){const e=new K(s.path);this.Yt(n,e,qt.newNoDocument(e,U.min()))}else w(1===r);else{const i=this.ie(n);if(i!==r){const r=this.re(e,i);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=jr.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,i,s,o,a,c;const u={localCacheCount:t,existenceFilterCount:n.count},l=n.unchangedNames;return l&&(u.bloomFilter={applied:0===e,hashCount:null!==(r=null==l?void 0:l.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(s=null===(i=null==l?void 0:l.bits)||void 0===i?void 0:i.bitmap)||void 0===s?void 0:s.length)&&void 0!==o?o:0,padding:null!==(c=null===(a=null==l?void 0:l.bits)||void 0===a?void 0:a.padding)&&void 0!==c?c:0}),u}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r,i,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:i="",padding:s=0},hashCount:o=0}=n;let a,c;try{a=ft(i).toUint8Array()}catch(e){if(e instanceof at)return m("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{c=new Kr(a,s,o)}catch(e){return m(e instanceof $r?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===c.It?1:r!==t-this.oe(e.targetId,c)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const i=this.Gt.ue(),s=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;t.vt(s)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const i=this.se(r);if(i){if(n.current&&mn(i.target)){const t=new K(i.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,qt.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=Qn();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Wr(e,t,this.Wt,this.jt,n);return this.jt=Un(),this.zt=ei(),this.Wt=new et(M),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Xr,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new rt(M),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||p("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Xr),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function ei(){return new et(K.comparator)}function ti(){return new et(K.comparator)}const ni={asc:"ASCENDING",desc:"DESCENDING"},ri={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ii={and:"AND",or:"OR"};class si{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function oi(e,t){return e.useProto3Json||we(t)?t:{value:t}}function ai(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function ci(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function ui(e,t){return ai(e,t.toTimestamp())}function li(e){return w(!!e),U.fromTimestamp(function(e){const t=ht(e);return new j(t.seconds,t.nanos)}(e))}function hi(e,t){return function(e){return new B(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function di(e){const t=B.fromString(e);return w(Ri(t)),t}function fi(e,t){return hi(e.databaseId,t.path)}function pi(e,t){const n=di(t);if(n.get(1)!==e.databaseId.projectId)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new T(_.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new K(vi(n))}function gi(e,t){return hi(e.databaseId,t)}function mi(e){const t=di(e);return 4===t.length?B.emptyPath():vi(t)}function yi(e){return new B(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function vi(e){return w(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function wi(e,t,n){return{name:fi(e,t),fields:n.value.mapValue.fields}}function bi(e,t,n){const r=pi(e,t.name),i=li(t.updateTime),s=t.createTime?li(t.createTime):U.min(),o=new jt({mapValue:{fields:t.fields}}),a=qt.newFoundDocument(r,i,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function Ii(e,t){let n;if(t instanceof Tr)n={update:wi(e,t.key,t.value)};else if(t instanceof Ar)n={delete:fi(e,t.key)};else if(t instanceof Er)n={update:wi(e,t.key,t.data),updateMask:Oi(t.fieldMask)};else{if(!(t instanceof Nr))return v();n={verify:fi(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof sr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof or)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof cr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof lr)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw v()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:ui(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:v()}(e,t.precondition)),n}function _i(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?gr.updateTime(li(e.updateTime)):void 0!==e.exists?gr.exists(e.exists):gr.none()}(t.currentDocument):gr.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)w("REQUEST_TIME"===t.setToServerValue),n=new sr;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new or(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new cr(e)}else"increment"in t?n=new lr(e,t.increment):v();const r=G.fromServerFormat(t.fieldPath);return new fr(r,n)}(e,t)):[];if(t.update){t.update.name;const i=pi(e,t.update.name),s=new jt({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new ot(t.map(e=>G.fromServerFormat(e)))}(t.updateMask);return new Er(i,s,e,n,r)}return new Tr(i,s,n,r)}if(t.delete){const r=pi(e,t.delete);return new Ar(r,n)}if(t.verify){const r=pi(e,t.verify);return new Nr(r,n)}return v()}function Ti(e,t){return{documents:[gi(e,t.path)]}}function Ei(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=gi(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=gi(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0!==e.length)return function e(t){return t instanceof Ht?function(e){if("=="===e.op){if(Ot(e.value))return{unaryFilter:{field:Ni(e.field),op:"IS_NAN"}};if(Dt(e.value))return{unaryFilter:{field:Ni(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ot(e.value))return{unaryFilter:{field:Ni(e.field),op:"IS_NOT_NAN"}};if(Dt(e.value))return{unaryFilter:{field:Ni(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ni(e.field),op:Ci(e.op),value:e.value}}}(t):t instanceof Qt?function(t){const n=t.getFilters().map(t=>e(t));return 1===n.length?n[0]:{compositeFilter:{op:Ai(t.op),filters:n}}}(t):v()}(Qt.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ni(e.field),direction:ki(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=oi(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Si(e){let t=mi(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){w(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Di(e.unaryFilter.field);return Ht.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Di(e.unaryFilter.field);return Ht.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Di(e.unaryFilter.field);return Ht.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Di(e.unaryFilter.field);return Ht.create(i,"!=",{nullValue:"NULL_VALUE"});default:return v()}}(t):void 0!==t.fieldFilter?function(e){return Ht.create(Di(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return v()}}(e.fieldFilter.op),e.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return Qt.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return v()}}(t.compositeFilter.op))}(t):v()}(e);return t instanceof Qt&&Xt(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Kt(Di(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,we(t)?null:t}(n.limit));let c=null;n.startAt&&(c=function(e){const t=!!e.before,n=e.values||[];return new Bt(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new Bt(n,t)}(n.endAt)),In(t,i,o,s,a,"F",c,u)}function ki(e){return ni[e]}function Ci(e){return ri[e]}function Ai(e){return ii[e]}function Ni(e){return{fieldPath:e.canonicalString()}}function Di(e){return G.fromServerFormat(e.fieldPath)}function Oi(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Ri(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e,t,n,r,i=U.min(),s=U.min(),o=ut.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new xi(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xi(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.fe=e}}function Li(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Mi(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:fi(e,t.key),fields:t.data.value.mapValue.fields,updateTime:ai(e,t.version.toTimestamp()),createTime:ai(e,t.createTime.toTimestamp())}}(e.fe,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Fi(t.version)};else{if(!t.isUnknownDocument())return v();r.unknownDocument={path:n.path.toArray(),version:Fi(t.version)}}return r}function Mi(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Fi(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Vi(e){const t=new j(e.seconds,e.nanoseconds);return U.fromTimestamp(t)}function ji(e,t){const n=(t.baseMutations||[]).map(t=>_i(e.fe,t));for(let e=0;e<t.mutations.length-1;++e){const n=t.mutations[e];if(e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform){const r=t.mutations[e+1];n.updateTransforms=r.transform.fieldTransforms,t.mutations.splice(e+1,1),++e}}const r=t.mutations.map(t=>_i(e.fe,t)),i=j.fromMillis(t.localWriteTimeMs);return new Dr(t.batchId,i,n,r)}function Ui(e){const t=Vi(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?Vi(e.lastLimboFreeSnapshotVersion):U.min();let r;var i;return void 0!==e.query.documents?(w(1===(i=e.query).documents.length),r=An(_n(mi(i.documents[0])))):r=function(e){return An(Si(e))}(e.query),new xi(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,ut.fromBase64String(e.resumeToken))}function qi(e,t){const n=Fi(t.snapshotVersion),r=Fi(t.lastLimboFreeSnapshotVersion);let i;i=mn(t.target)?Ti(e.fe,t.target):Ei(e.fe,t.target);const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:pn(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function Bi(e){const t=Si({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Dn(t,t.limit,"L"):t}function zi(e,t){return new Rr(t.largestBatchId,_i(e.fe,t.overlayMutation))}function Gi(e,t){const n=t.path.lastSegment();return[e,_e(t.path.popLast()),n]}function Ki(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Fi(r.readTime),documentKey:_e(r.documentKey.path),largestBatchId:r.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{getBundleMetadata(e,t){return Wi(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:Vi(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Wi(e).put({bundleId:(n=t).id,createTime:Fi(li(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Hi(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Bi(t.bundledQuery),readTime:Vi(t.readTime)};var t})}saveNamedQuery(e,t){return Hi(e).put(function(e){return{name:e.name,readTime:Fi(li(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Wi(e){return Ye(e,"bundles")}function Hi(e){return Ye(e,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){const n=t.uid||"";return new Qi(e,n)}getOverlay(e,t){return Yi(e).get(Gi(this.userId,t)).next(e=>e?zi(this.serializer,e):null)}getOverlays(e,t){const n=Gn();return oe.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new Rr(t,i);r.push(this.we(e,s))}),oe.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(_e(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(Yi(e).J("collectionPathOverlayIndex",r))}),oe.waitFor(i)}getOverlaysForCollection(e,t,n){const r=Gn(),i=_e(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return Yi(e).j("collectionPathOverlayIndex",s).next(e=>{for(const t of e){const e=zi(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=Gn();let s;const o=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Yi(e).X({index:"collectionGroupOverlayIndex",range:o},(e,t,n)=>{const o=zi(this.serializer,t);i.size()<r||o.largestBatchId===s?(i.set(o.getKey(),o),s=o.largestBatchId):n.done()}).next(()=>i)}we(e,t){return Yi(e).put(function(e,t,n){const[r,i,s]=Gi(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Ii(e.fe,n.mutation)}}(this.serializer,this.userId,t))}}function Yi(e){return Ye(e,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(dt(e.integerValue));else if("doubleValue"in e){const n=dt(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),be(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(""+(n.seconds||"")),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ft(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Pt(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):v()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const e of Object.keys(n))this.Te(e,t),this.me(n[e],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const e of n)this.me(e,t)}ve(e,t){this.ye(t,37),K.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function Xi(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Zi(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Xi(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ji.Ve=new Ji;class es{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.De(n.value),n=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ne(n.value),n=t.next();this.ke()}Me(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.De(e);else if(e<2048)this.De(960|e>>>6),this.De(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.De(480|e>>>12),this.De(128|63&e>>>6),this.De(128|63&e);else{const e=t.codePointAt(0);this.De(240|e>>>18),this.De(128|63&e>>>12),this.De(128|63&e>>>6),this.De(128|63&e)}}this.Ce()}$e(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ne(e);else if(e<2048)this.Ne(960|e>>>6),this.Ne(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e);else{const e=t.codePointAt(0);this.Ne(240|e>>>18),this.Ne(128|63&e>>>12),this.Ne(128|63&e>>>6),this.Ne(128|63&e)}}this.ke()}Oe(e){const t=this.Fe(e),n=Zi(t);this.Be(1+n),this.buffer[this.position++]=255&n;for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=255&t[e]}Le(e){const t=this.Fe(e),n=Zi(t);this.Be(1+n),this.buffer[this.position++]=~(255&n);for(let e=t.length-n;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let e=1;e<t.length;++e)t[e]^=n?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class ts{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class ns{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class rs{constructor(){this.je=new es,this.ze=new ts(this.je),this.We=new ns(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new is(this.indexId,this.documentKey,this.arrayValue,n)}}function ss(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=os(e.arrayValue,t.arrayValue),0!==n?n:(n=os(e.directionalValue,t.directionalValue),0!==n?n:K.comparator(e.documentKey,t.documentKey)))}function os(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const e=t;e.isInequality()?this.Ze=e:this.Xe.push(e)}}tn(e){w(e.collectionGroup===this.collectionId);const t=W(e);if(void 0!==t&&!this.en(t))return!1;const n=H(e);let r=new Set,i=0,s=0;for(;i<n.length&&this.en(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(void 0!==this.Ze){if(!r.has(this.Ze.field.canonicalString())){const e=n[i];if(!this.nn(this.Ze,e)||!this.sn(this.Ye[s++],e))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.Ye.length||!this.sn(this.Ye[s++],e))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(e){if(0===e.getFilters().length)return[];const t=function e(t){if(w(t instanceof Ht||t instanceof Qt),t instanceof Ht)return t;if(1===t.filters.length)return e(t.filters[0]);const n=t.filters.map(t=>e(t));let r=Qt.create(n,t.op);return r=ps(r),hs(r)?r:(w(r instanceof Qt),w(Yt(r)),w(r.filters.length>1),r.filters.reduce((e,t)=>ds(e,t)))}(function e(t){var n,r;if(w(t instanceof Ht||t instanceof Qt),t instanceof Ht){if(t instanceof un){const e=(null===(r=null===(n=t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>Ht.create(t.field,"==",e)))||[];return Qt.create(e,"or")}return t}const i=t.filters.map(t=>e(t));return Qt.create(i,t.op)}(e));return w(hs(t)),us(t)||ls(t)?[t]:t.getFilters()}function us(e){return e instanceof Ht}function ls(e){return e instanceof Qt&&Xt(e)}function hs(e){return us(e)||ls(e)||function(e){if(e instanceof Qt&&Jt(e)){for(const t of e.getFilters())if(!us(t)&&!ls(t))return!1;return!0}return!1}(e)}function ds(e,t){let n;return w(e instanceof Ht||e instanceof Qt),w(t instanceof Ht||t instanceof Qt),n=e instanceof Ht?t instanceof Ht?function(e,t){return Qt.create([e,t],"and")}(e,t):fs(e,t):t instanceof Ht?fs(t,e):function(e,t){if(w(e.filters.length>0&&t.filters.length>0),Yt(e)&&Yt(t))return tn(e,t.getFilters());const n=Jt(e)?e:t,r=Jt(e)?t:e,i=n.filters.map(e=>ds(e,r));return Qt.create(i,"or")}(e,t),ps(n)}function fs(e,t){if(Yt(t))return tn(t,e.getFilters());{const n=t.filters.map(t=>ds(e,t));return Qt.create(n,"or")}}function ps(e){if(w(e instanceof Ht||e instanceof Qt),e instanceof Ht)return e;const t=e.getFilters();if(1===t.length)return ps(t[0]);if(Zt(e))return e;const n=t.map(e=>ps(e)),r=[];return n.forEach(t=>{t instanceof Ht?r.push(t):t instanceof Qt&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:Qt.create(r,e.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class gs{constructor(){this.rn=new ms}addToCollectionParentIndex(e,t){return this.rn.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(te.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(te.min())}updateCollectionGroup(e,t,n){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class ms{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new rt(B.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new rt(B.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Uint8Array(0);class vs{constructor(e,t){this.user=e,this.databaseId=t,this.on=new ms,this.un=new Vn(e=>pn(e),(e,t)=>gn(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const i={collectionId:n,parent:_e(r)};return ws(e).put(i)}return oe.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[V(t),""],!1,!0);return ws(e).j(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Se(r.parent))}return n})}addFieldIndex(e,t){const n=Is(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=_s(e);return i.next(e=>{n.put(Ki(e,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=Is(e),r=_s(e),i=bs(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const n=bs(e);let r=!0;const i=new Map;return oe.forEach(this.cn(t),t=>this.an(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=Qn();const r=[];return oe.forEach(i,(i,s)=>{var o;p("IndexedDbIndexManager",`Using index ${o=i,`id=${o.indexId}|cg=${o.collectionGroup}|f=${o.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")}`} to execute ${pn(t)}`);const a=function(e,t){const n=W(t);if(void 0===n)return null;for(const t of yn(e,n.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(s,i),c=function(e,t){const n=new Map;for(const r of H(t))for(const t of yn(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),u=function(e,t){const n=[];let r=!0;for(const i of H(t)){const t=0===i.kind?vn(e,i.fieldPath,e.startAt):wn(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new Bt(n,r)}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of H(t)){const t=0===i.kind?wn(e,i.fieldPath,e.endAt):vn(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new Bt(n,r)}(s,i),h=this.hn(i,s,u),d=this.hn(i,s,l),f=this.ln(i,s,c),g=this.fn(i.indexId,a,h,u.inclusive,d,l.inclusive,f);return oe.forEach(g,i=>n.H(i,t.limit).next(t=>{t.forEach(t=>{const n=K.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return oe.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:cs(Qt.create(e.filters,"and")).map(t=>fn(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,n,r,i,s,o){const a=(null!=t?t.length:1)*Math.max(n.length,i.length),c=a/(null!=t?t.length:1),u=[];for(let l=0;l<a;++l){const a=t?this.dn(t[l/c]):ys,h=this.wn(e,a,n[l%c],r),d=this._n(e,a,i[l%c],s),f=o.map(t=>this.wn(e,a,t,!0));u.push(...this.createRange(h,d,f))}return u}wn(e,t,n,r){const i=new is(e,K.empty(),t,n);return r?i:i.Je()}_n(e,t,n,r){const i=new is(e,K.empty(),t,n);return r?i.Je():i}an(e,t){const n=new as(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.cn(t);return oe.forEach(r,t=>this.an(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new rt(G.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const n of e.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}mn(e,t){const n=new rs;for(const r of H(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.He(r.kind);Ji.Ve._e(e,i)}return n.Qe()}dn(e){const t=new rs;return Ji.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const n=new rs;return Ji.Ve._e(Ct(this.databaseId,t),n.He(function(e){const t=H(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Qe()}ln(e,t,n){if(null===n)return[];let r=[];r.push(new rs);let i=0;for(const s of H(e)){const e=n[i++];for(const n of r)if(this.yn(t,s.fieldPath)&&Nt(e))r=this.pn(r,s,e);else{const t=n.He(s.kind);Ji.Ve._e(e,t)}}return this.In(r)}hn(e,t,n){return this.ln(e,t,n.position)}In(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Qe();return t}pn(e,t,n){const r=[...e],i=[];for(const e of n.arrayValue.values||[])for(const n of r){const r=new rs;r.seed(n.Qe()),Ji.Ve._e(e,r.He(t.kind)),i.push(r)}return i}yn(e,t){return!!e.filters.find(e=>e instanceof Ht&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Is(e),r=_s(e);return(t?n.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.j()).next(e=>{const t=[];return oe.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new X(t.sequenceNumber,new te(Vi(t.readTime),new K(Se(t.documentKey)),t.largestBatchId)):X.empty(),r=e.fields.map(([e,t])=>new Y(G.fromServerFormat(e),t));return new $(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:M(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=Is(e),i=_s(e);return this.Tn(e).next(e=>r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>oe.forEach(t,t=>i.put(Ki(t.indexId,this.user,e,n)))))}updateIndexEntries(e,t){const n=new Map;return oe.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?oe.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),oe.forEach(i,n=>this.En(e,t,n).next(t=>{const i=this.An(r,n);return t.isEqual(i)?oe.resolve():this.vn(e,r,n,t,i)}))))})}Rn(e,t,n,r){return bs(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,n,r){return bs(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}En(e,t,n){const r=bs(e);let i=new rt(ss);return r.X({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(e,r)=>{i=i.add(new is(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>i)}An(e,t){let n=new rt(ss);const r=this.mn(t,e);if(null==r)return n;const i=W(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Nt(s))for(const i of s.arrayValue.values||[])n=n.add(new is(t.indexId,e.key,this.dn(i),r))}else n=n.add(new is(t.indexId,e.key,ys,r));return n}vn(e,t,n,r,i){p("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),o=t.getIterator();let a=st(s),c=st(o);for(;a||c;){let e=!1,t=!1;if(a&&c){const r=n(a,c);r<0?t=!0:r>0&&(e=!0)}else null!=a?t=!0:e=!0;e?(r(c),c=st(o)):t?(i(a),a=st(s)):(a=st(s),c=st(o))}}(r,i,ss,r=>{s.push(this.Rn(e,t,n,r))},r=>{s.push(this.Pn(e,t,n,r))}),oe.waitFor(s)}Tn(e){let t=1;return _s(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>ss(e,t)).filter((e,t,n)=>!t||0!==ss(e,n[t-1]));const r=[];r.push(e);for(const i of n){const n=ss(i,e),s=ss(i,t);if(0===n)r[0]=e.Je();else if(n>0&&s<0)r.push(i),r.push(i.Je());else if(s>0)break}r.push(t);const i=[];for(let e=0;e<r.length;e+=2){if(this.bn(r[e],r[e+1]))return[];const t=[r[e].indexId,this.uid,r[e].arrayValue,r[e].directionalValue,ys,[]],n=[r[e+1].indexId,this.uid,r[e+1].arrayValue,r[e+1].directionalValue,ys,[]];i.push(IDBKeyRange.bound(t,n))}return i}bn(e,t){return ss(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Ts)}getMinOffset(e,t){return oe.mapArray(this.cn(t),t=>this.an(e,t).next(e=>e||v())).next(Ts)}}function ws(e){return Ye(e,"collectionParents")}function bs(e){return Ye(e,"indexEntries")}function Is(e){return Ye(e,"indexConfiguration")}function _s(e){return Ye(e,"indexState")}function Ts(e){w(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ne(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new te(t.readTime,t.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ss{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Ss(e,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ks(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.X({range:o},(e,t,n)=>(a++,n.delete()));s.push(c.next(()=>{w(1===a)}));const u=[];for(const e of n.mutations){const r=Ae(t,e.key.path,n.batchId);s.push(i.delete(r)),u.push(e.key)}return oe.waitFor(s).next(()=>u)}function Cs(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw v();t=e.noDocument}return JSON.stringify(t).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ss.DEFAULT_COLLECTION_PERCENTILE=10,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ss.DEFAULT=new Ss(41943040,Ss.DEFAULT_COLLECTION_PERCENTILE,Ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ss.DISABLED=new Ss(-1,0,0);class As{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Vn={}}static de(e,t,n,r){w(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new As(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ds(e).X({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=Os(e),s=Ds(e);return s.add({}).next(o=>{w("number"==typeof o);const a=new Dr(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>Ii(e.fe,t)),i=n.mutations.map(t=>Ii(e.fe,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,a),u=[];let l=new rt((e,t)=>M(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Ae(this.userId,e.key.path,o);l=l.add(e.key.path.popLast()),u.push(s.put(c)),u.push(i.put(t,Ne))}return l.forEach(t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Vn[o]=a.keys()}),oe.waitFor(u).next(()=>a)})}lookupMutationBatch(e,t){return Ds(e).get(t).next(e=>e?(w(e.userId===this.userId),ji(this.serializer,e)):null)}Sn(e,t){return this.Vn[t]?oe.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Vn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return Ds(e).X({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(w(t.batchId>=n),i=ji(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Ds(e).X({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ds(e).j("userMutationsIndex",t).next(e=>e.map(e=>ji(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ce(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return Os(e).X({range:r},(n,r,s)=>{const[o,a,c]=n,u=Se(a);if(o===this.userId&&t.path.isEqual(u))return Ds(e).get(c).next(e=>{if(!e)throw v();w(e.userId===this.userId),i.push(ji(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rt(M);const r=[];return t.forEach(t=>{const i=Ce(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=Os(e).X({range:s},(e,r,i)=>{const[s,o,a]=e,c=Se(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()});r.push(o)}),oe.waitFor(r).next(()=>this.Dn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Ce(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new rt(M);return Os(e).X({range:s},(e,t,i)=>{const[s,a,c]=e,u=Se(a);s===this.userId&&n.isPrefixOf(u)?u.length===r&&(o=o.add(c)):i.done()}).next(()=>this.Dn(e,o))}Dn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(Ds(e).get(t).next(e=>{if(null===e)throw v();w(e.userId===this.userId),n.push(ji(this.serializer,e))}))}),oe.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ks(e.ht,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),oe.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const n=IDBKeyRange.lowerBound([this.userId]),r=[];return Os(e).X({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Se(e[1]);r.push(t)}else n.done()}).next(()=>{w(0===r.length)})})}containsKey(e,t){return Ns(e,this.userId,t)}xn(e){return Rs(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Ns(e,t,n){const r=Ce(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return Os(e).X({range:s,Y:!0},(e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function Ds(e){return Ye(e,"mutations")}function Os(e){return Ye(e,"documentMutations")}function Rs(e){return Ye(e,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new xs(0)}static Mn(){return new xs(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const n=new xs(t.highestTargetId);return t.highestTargetId=n.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(e=>U.fromTimestamp(new j(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.$n(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.On(e,r)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(n=>(n.targetCount+=1,this.Bn(t,n),this.On(e,n))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ls(e).delete(t.targetId)).next(()=>this.$n(e)).next(t=>(w(t.targetCount>0),t.targetCount-=1,this.On(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return Ls(e).X((s,o)=>{const a=Ui(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>oe.waitFor(i)).next(()=>r)}forEachTarget(e,t){return Ls(e).X((e,n)=>{const r=Ui(n);t(r)})}$n(e){return Ms(e).get("targetGlobalKey").next(e=>(w(null!==e),e))}On(e,t){return Ms(e).put("targetGlobalKey",t)}Fn(e,t){return Ls(e).put(qi(this.serializer,t))}Bn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.$n(e).next(e=>e.targetCount)}getTargetData(e,t){const n=pn(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return Ls(e).X({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const s=Ui(n);gn(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=Fs(e);return t.forEach(t=>{const s=_e(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),oe.waitFor(r)}removeMatchingKeys(e,t,n){const r=Fs(e);return oe.forEach(t,t=>{const i=_e(t.path);return oe.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=Fs(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Fs(e);let i=Qn();return r.X({range:n,Y:!0},(e,t,n)=>{const r=Se(e[1]),s=new K(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=_e(t.path),r=IDBKeyRange.bound([n],[V(n)],!1,!0);let i=0;return Fs(e).X({index:"documentTargetsIndex",Y:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}le(e,t){return Ls(e).get(t).next(e=>e?Ui(e):null)}}function Ls(e){return Ye(e,"targets")}function Ms(e){return Ye(e,"targetGlobal")}function Fs(e){return Ye(e,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vs([e,t],[n,r]){const i=M(e,n);return 0===i?M(t,r):i}class js{constructor(e){this.Ln=e,this.buffer=new rt(Vs),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();Vs(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Us{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){p("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){he(e)?p("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await se(e)}await this.Qn(3e5)})}}class qs{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(ve.ct);const n=new js(t);return this.jn.forEachTarget(e,e=>n.Kn(e.sequenceNumber)).next(()=>this.jn.Wn(e,e=>n.Kn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(Es)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(p("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Es):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let n,r,i,o,a,c,u;const l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(p("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(u=Date.now(),d()<=s.a.DEBUG&&p("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-l}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${e} documents in `+(u-c)+"ms\n"+`Total Duration: ${u-l}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function Bs(e,t){return new qs(e,t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t){this.db=e,this.garbageCollector=Bs(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Jn(e){let t=0;return this.Wn(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(e,n)=>t(n))}addReference(e,t,n){return Gs(e,n)}removeReference(e,t,n){return Gs(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Gs(e,t)}Xn(e,t){return function(e,t){let n=!1;return Rs(e).Z(r=>Ns(e,r,t).next(e=>(e&&(n=!0),oe.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Yn(e,(s,o)=>{if(o<=t){const t=this.Xn(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,U.min()),Fs(e).delete([0,_e(s.path)])))});r.push(t)}}).next(()=>oe.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Gs(e,t)}Yn(e,t){const n=Fs(e);let r,i=ve.ct;return n.X({index:"documentTargetsIndex"},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==ve.ct&&t(new K(Se(r)),i),i=o,r=s):i=ve.ct}).next(()=>{i!==ve.ct&&t(new K(Se(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Gs(e,t){return Fs(e).put(function(e,t){return{targetId:0,path:_e(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.changes=new Vn(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,qt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?oe.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $s{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ys(e).put(n)}removeEntry(e,t,n){return Ys(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Mi(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Zn(e,n)))}getEntry(e,t){let n=qt.newInvalidDocument(t);return Ys(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Js(t))},(e,r)=>{n=this.ts(t,r)}).next(()=>n)}es(e,t){let n={size:0,document:qt.newInvalidDocument(t)};return Ys(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(Js(t))},(e,r)=>{n={document:this.ts(t,r),size:Cs(r)}}).next(()=>n)}getEntries(e,t){let n=Un();return this.ns(e,t,(e,t)=>{const r=this.ts(e,t);n=n.insert(e,r)}).next(()=>n)}ss(e,t){let n=Un(),r=new et(K.comparator);return this.ns(e,t,(e,t)=>{const i=this.ts(e,t);n=n.insert(e,i),r=r.insert(e,Cs(t))}).next(()=>({documents:n,rs:r}))}ns(e,t,n){if(t.isEmpty())return oe.resolve();let r=new rt(Zs);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(Js(r.first()),Js(r.last())),s=r.getIterator();let o=s.getNext();return Ys(e).X({index:"documentKeyIndex",range:i},(e,t,r)=>{const i=K.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&Zs(o,i)<0;)n(o,null),o=s.getNext();o&&o.isEqual(i)&&(n(o,t),o=s.hasNext()?s.getNext():null),o?r.G(Js(o)):r.done()}).next(()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n,r){const i=t.path,s=[i.popLast().toArray(),i.lastSegment(),Mi(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[i.popLast().toArray(),i.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ys(e).j(IDBKeyRange.bound(s,o,!0)).next(e=>{let n=Un();for(const i of e){const e=this.ts(K.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(Pn(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=Un();const s=Xs(t,n),o=Xs(t,te.max());return Ys(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},(e,t,n)=>{const s=this.ts(K.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new Hs(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Qs(e).get("remoteDocumentGlobalKey").next(e=>(w(!!e),e))}Zn(e,t){return Qs(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const e=function(e,t){let n;if(t.document)n=bi(e.fe,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=K.fromSegments(t.noDocument.path),r=Vi(t.noDocument.readTime);n=qt.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return v();{const e=K.fromSegments(t.unknownDocument.path),r=Vi(t.unknownDocument.version);n=qt.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new j(e[0],e[1]);return U.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(U.min()))return e}return qt.newInvalidDocument(e)}}function Ws(e){return new $s(e)}class Hs extends Ks{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Vn(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new rt((e,t)=>M(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.us.get(i);if(t.push(this.os.removeEntry(e,i,o.readTime)),s.isValidDocument()){const a=Li(this.os.serializer,s);r=r.add(i.path.popLast());const c=Cs(a);n+=c-o.size,t.push(this.os.addEntry(e,i,a))}else if(n-=o.size,this.trackRemovals){const n=Li(this.os.serializer,s.convertToNoDocument(U.min()));t.push(this.os.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.os.updateMetadata(e,n)),oe.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(e=>(this.us.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:e,rs:t})=>(t.forEach((t,n)=>{this.us.set(t,{size:n,readTime:e.get(t).readTime})}),e))}}function Qs(e){return Ye(e,"remoteDocumentGlobal")}function Ys(e){return Ye(e,"remoteDocumentsV14")}function Js(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Xs(e,t){const n=t.documentKey.path.toArray();return[e,Mi(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Zs(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let e=0;e<n.length-2&&e<r.length-2;++e)if(i=M(n[e],r[e]),i)return i;return i=M(n.length,r.length),i||(i=M(n[n.length-2],r[r.length-2]),i||M(n[n.length-1],r[r.length-1]))
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class eo{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class to{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&br(n.mutation,e,ot.empty(),j.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Qn()).next(()=>t))}getLocalViewOfDocuments(e,t,n=Qn()){const r=Gn();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=Bn();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Gn();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Qn()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=Un();const s=$n(),o=$n();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Er)?i=i.insert(t.key,t):void 0!==o?(s.set(t.key,o.mutation.getFieldMask()),br(o.mutation,t,o.mutation.getFieldMask(),j.now())):s.set(t.key,ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new eo(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=$n();let r=new et((e,t)=>e-t),i=Qn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let o=n.get(e)||ot.empty();o=i.applyToLocalView(s,o),n.set(e,o);const a=(r.get(i.batchId)||Qn()).add(e);r=r.insert(i.batchId,a)})}).next(()=>{const s=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,c=r.value,u=Kn();c.forEach(e=>{if(!i.has(e)){const r=vr(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,a,u))}return oe.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return K.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):kn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):oe.resolve(Gn());let o=-1,a=i;return s.next(t=>oe.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),i.get(t)?oe.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,a,t,Qn())).next(e=>({batchId:o,changes:zn(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new K(t)).next(e=>{let t=Bn();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let i=Bn();return this.indexManager.getCollectionParents(e,r).next(s=>oe.forEach(s,s=>{const o=function(e,t){return new bn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(r=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,qt.newInvalidDocument(r)))});let n=Bn();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&br(s.mutation,i,ot.empty(),j.now()),Pn(t,i)&&(n=n.insert(e,i))}),n})}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return oe.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:li(n.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Bi(e.bundledQuery),readTime:li(e.readTime)}}(t)),oe.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(){this.overlays=new et(K.comparator),this.ls=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Gn();return oe.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),oe.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),oe.resolve()}getOverlaysForCollection(e,t,n){const r=Gn(),i=t.length+1,s=new K(t.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const e=o.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return oe.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new et((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=Gn(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Gn(),a=i.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return oe.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Rr(t,n));let i=this.ls.get(t);void 0===i&&(i=Qn(),this.ls.set(t,i)),this.ls.set(t,i.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.fs=new rt(so.ds),this.ws=new rt(so._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new so(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new so(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new K(new B([])),n=new so(t,e),r=new so(t,e+1),i=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),i.push(e.key)}),i}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new K(new B([])),n=new so(t,e),r=new so(t,e+1);let i=Qn();return this.ws.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new so(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class so{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return K.comparator(e.key,t.key)||M(e.As,t.As)}static _s(e,t){return M(e.As,t.As)||K.comparator(e.key,t.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new rt(so.ds)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Dr(i,t,n,r);this.mutationQueue.push(s);for(const t of r)this.Rs=this.Rs.add(new so(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return oe.resolve(s)}lookupMutationBatch(e,t){return oe.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),i=r<0?0:r;return oe.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new so(t,0),r=new so(t,Number.POSITIVE_INFINITY),i=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);i.push(t)}),oe.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new rt(M);return t.forEach(e=>{const t=new so(e,0),r=new so(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),oe.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;K.isDocumentKey(i)||(i=i.child(""));const s=new so(new K(i),0);let o=new rt(M);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)},s),oe.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){w(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return oe.forEach(t.mutations,r=>{const i=new so(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new so(t,0),r=this.Rs.firstAfterOrEqual(n);return oe.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,oe.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.Ds=e,this.docs=new et(K.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return oe.resolve(n?n.document.mutableCopy():qt.newInvalidDocument(t))}getEntries(e,t){let n=Un();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():qt.newInvalidDocument(e))}),oe.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=Un();const s=t.path,o=new K(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ne(ee(o),n)<=0||(r.has(o.key)||Pn(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return oe.resolve(i)}getAllFromCollectionGroup(e,t,n,r){v()}Cs(e,t){return oe.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new co(this)}getSize(e){return oe.resolve(this.size)}}class co extends Ks{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),oe.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.persistence=e,this.xs=new Vn(e=>pn(e),gn),this.lastRemoteSnapshotVersion=U.min(),this.highestTargetId=0,this.Ns=0,this.ks=new io,this.targetCount=0,this.Ms=xs.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),oe.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new xs(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Fn(t),oe.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.xs.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),oe.waitFor(i).next(()=>r)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return oe.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),oe.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),oe.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return oe.resolve(n)}containsKey(e,t){return oe.resolve(this.ks.containsKey(t))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e,t){this.$s={},this.overlays={},this.Os=new ve(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new uo(this),this.indexManager=new gs,this.remoteDocumentCache=function(e){return new ao(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new Pi(t),this.qs=new no(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ro,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new oo(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){p("MemoryPersistence","Starting transaction:",e);const r=new ho(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return oe.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class ho extends ie{constructor(e){super(),this.currentSequenceNumber=e}}class fo{constructor(e){this.persistence=e,this.Qs=new io,this.js=null}static zs(e){return new fo(e)}get Ws(){if(this.js)return this.js;throw v()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),oe.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ws,n=>{const r=K.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,U.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return oe.or([()=>oe.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class po{constructor(e,t){this.persistence=e,this.Js=new Vn(e=>_e(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=Bs(this,t)}static zs(e,t){return new po(e,t)}Us(){}Ks(e){return oe.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}zn(e){const t=this.Jn(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Jn(e){let t=0;return this.Wn(e,e=>{t++}).next(()=>t)}Wn(e,t){return oe.forEach(this.Js,(n,r)=>this.Xn(e,n,r).next(e=>e?oe.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Cs(e,r=>this.Xn(e,r,t).next(e=>{e||(n++,i.removeEntry(r,U.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.Js.set(t,e.currentSequenceNumber),oe.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.Js.set(n,e.currentSequenceNumber),oe.resolve()}removeReference(e,t,n){return this.Js.set(n,e.currentSequenceNumber),oe.resolve()}updateLimboDocument(e,t){return this.Js.set(t,e.currentSequenceNumber),oe.resolve()}Ls(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=function e(t){switch(It(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const n=gt(t);return n?16+e(n):16;case 5:return 2*t.stringValue.length;case 6:return ft(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((t,n)=>t+e(n),0);case 10:return function(t){let n=0;return Xe(t.fields,(t,r)=>{n+=t.length+e(r)}),n}(t.mapValue);default:throw v()}}(e.data.value)),t}Xn(e,t,n){return oe.or([()=>this.persistence.Gs(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.Js.get(t);return oe.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class go{constructor(e){this.serializer=e}O(e,t,n,r){const i=new ae("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ke,{unique:!0}),e.createObjectStore("documentMutations")}(e),mo(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=oe.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),mo(e)),s=s.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:U.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store("mutations").j().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ke,{unique:!0});const r=t.store("mutations"),i=n.map(e=>r.put(e));return oe.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ys(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(i)))),n<7&&r>=7&&(s=s.next(()=>this.Zs(i))),n<8&&r>=8&&(s=s.next(()=>this.ti(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.ei(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:qe});t.createIndex("collectionPathOverlayIndex",Be,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",ze,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:De});t.createIndex("documentKeyIndex",Oe),t.createIndex("collectionGroupIndex",Re)}(e)).next(()=>this.ni(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>this.si(e,i))),n<15&&r>=15&&(s=s.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Fe}).createIndex("sequenceNumberIndex",Ve,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:je}).createIndex("documentKeyIndex",Ue,{unique:!1})}(e))),s}Xs(e){let t=0;return e.store("remoteDocuments").X((e,n)=>{t+=Cs(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}Ys(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.j().next(t=>oe.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.j("userMutationsIndex",r).next(n=>oe.forEach(n,n=>{w(n.userId===t.userId);const r=ji(this.serializer,n);return ks(e,t.userId,r).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.X((n,i)=>{const s=new B(n),o=function(e){return[0,_e(e)]}(s);r.push(t.get(o).next(n=>n?oe.resolve():(n=>t.put({targetId:0,path:_e(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>oe.waitFor(r))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Me});const n=t.store("collectionParents"),r=new ms,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:_e(r)})}};return t.store("remoteDocuments").X({Y:!0},(e,t)=>{const n=new B(e);return i(n.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([e,t,n],r)=>{const s=Se(t);return i(s.popLast())}))}ei(e){const t=e.store("targets");return t.X((e,n)=>{const r=Ui(n),i=qi(this.serializer,r);return t.put(i)})}ni(e,t){const n=t.store("remoteDocuments"),r=[];return n.X((e,n)=>{const i=t.store("remoteDocumentsV14"),s=(o=n,o.document?new K(B.fromString(o.document.name).popFirst(5)):o.noDocument?K.fromSegments(o.noDocument.path):o.unknownDocument?K.fromSegments(o.unknownDocument.path):v()).path.toArray();var o;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>oe.waitFor(r))}si(e,t){const n=t.store("mutations"),r=Ws(this.serializer),i=new lo(fo.zs,this.serializer.fe);return n.j().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:Qn();ji(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),oe.forEach(n,(e,n)=>{const s=new u(n),o=Qi.de(this.serializer,s),a=i.getIndexManager(s),c=As.de(s,this.serializer,a,i.referenceDelegate);return new to(r,c,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Qe(t,ve.ct),e).next()})})}}function mo(e){e.createObjectStore("targetDocuments",{keyPath:Pe}).createIndex("documentTargetsIndex",Le,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",xe,{unique:!0}),e.createObjectStore("targetGlobal")}const yo="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vo{constructor(e,t,n,r,i,s,o,a,c,u,l=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.ii=i,this.window=s,this.document=o,this.ri=c,this.oi=u,this.ui=l,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=e=>Promise.resolve(),!vo.D())throw new T(_.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new zs(this,r),this.di=t+"main",this.serializer=new Pi(a),this.wi=new ce(this.di,this.ui,new go(this.serializer)),this.Bs=new Ps(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Ws(this.serializer),this.qs=new $i,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===u&&g("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new T(_.FAILED_PRECONDITION,yo);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new ve(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){return this.fi=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget(async()=>{this.started&&await this.mi()}))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>bo(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(e=>{e||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(he(e))return p("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return p("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return wo(e).get("owner").next(e=>oe.resolve(this.Ri(e)))}Pi(e){return bo(e).delete(this.clientId)}async bi(){if(this.isPrimary&&!this.Vi(this.li,18e5)){this.li=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Ye(e,"clientMetadata");return t.j().next(e=>{const n=this.Si(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return oe.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this._i)for(const t of e)this._i.removeItem(this.Di(t.clientId))}}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?oe.resolve(!0):wo(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new T(_.FAILED_PRECONDITION,yo);return!1}}return!(!this.networkEnabled||!this.inForeground)||bo(e).j().next(e=>void 0===this.Si(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&p("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Fs=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Ni(),this.ki(),await this.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new Qe(e,ve.ct);return this.Ai(t).next(()=>this.Pi(t))}),this.wi.close(),this.Mi()}Si(e,t){return e.filter(e=>this.Vi(e.updateTimeMs,t)&&!this.Ci(e.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>bo(e).j().next(e=>this.Si(e,18e5).map(e=>e.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return As.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vs(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Qi.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,n){p("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=15===(s=this.ui)?He:14===s?We:13===s?$e:12===s?Ke:11===s?Ge:void v();var s;let o;return this.wi.runTransaction(e,r,i,r=>(o=new Qe(r,this.Os?this.Os.next():ve.ct),"readwrite-primary"===t?this.Ti(o).next(e=>!!e||this.Ei(o)).next(t=>{if(!t)throw g(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new T(_.FAILED_PRECONDITION,re);return n(o)}).next(e=>this.vi(o).next(()=>e)):this.Oi(o).next(()=>n(o)))).then(e=>(o.raiseOnCommittedEvent(),e))}Oi(e){return wo(e).get("owner").next(e=>{if(null!==e&&this.Vi(e.leaseTimestampMs,5e3)&&!this.Ci(e.ownerId)&&!this.Ri(e)&&!(this.oi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new T(_.FAILED_PRECONDITION,yo)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wo(e).put("owner",t)}static D(){return ce.D()}Ai(e){const t=wo(e);return t.get("owner").next(e=>this.Ri(e)?(p("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}Vi(e,t){const n=Date.now();return!(e<n-t||e>n&&(g(`Detected an update time that is in the future: ${e} > ${n}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;Object(o.z)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const n=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return p("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return g("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){g("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch(e){}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wo(e){return Ye(e,"owner")}function bo(e){return Ye(e,"clientMetadata")}function Io(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class _o{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Qn(),r=Qn();for(const e of t.docChanges)switch(e.type){case 0:n=n.add(e.doc.key);break;case 1:r=r.add(e.doc.key)}return new _o(e,t.fromCache,n,r)}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class To{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(i=>i||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(Tn(t))return oe.resolve(null);let n=An(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Dn(t,null,"F"),n=An(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=Qn(...r);return this.Ui.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.ji(t,r);return this.zi(t,s,i,n.readTime)?this.Ki(e,Dn(t,null,"F")):this.Wi(e,s,t,n)}))})))}Gi(e,t,n,r){return Tn(t)||r.isEqual(U.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(i=>{const o=this.ji(t,i);return this.zi(t,o,n,r)?this.Qi(e,t):(d()<=s.a.DEBUG&&p("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),xn(t)),this.Wi(e,o,t,Z(r,-1)))})}ji(e,t){let n=new rt(Mn(e));return t.forEach((t,r)=>{Pn(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Qi(e,t){return d()<=s.a.DEBUG&&p("QueryEngine","Using full collection scan to execute query:",xn(t)),this.Ui.getDocumentsMatchingQuery(e,t,te.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new et(M),this.Yi=new Vn(e=>pn(e),gn),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new to(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function So(e,t,n,r){return new Eo(e,t,n,r)}async function ko(e,t){const n=I(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let o=Qn();for(const e of r){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({er:e,removedBatchIds:i,addedBatchIds:s}))})})}function Co(e){const t=I(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Ao(e,t,n){let r=Qn(),i=Qn();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Un();return n.forEach((n,s)=>{const o=e.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(U.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):p("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)}),{nr:r,sr:i}})}function No(e,t){const n=I(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Do(e,t){const n=I(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(i=>i?(r=i,oe.resolve(r)):n.Bs.allocateTargetId(e).next(i=>(r=new xi(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function Oo(e,t,n){const r=I(e),i=r.Ji.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!he(e))throw e;p("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(i.target)}function Ro(e,t,n){const r=I(e);let i=U.min(),s=Qn();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=I(e),i=r.Yi.get(n);return void 0!==i?oe.resolve(r.Ji.get(i)):r.Bs.getTargetData(t,n)}(r,e,An(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?i:U.min(),n?s:Qn())).next(e=>(Lo(r,Ln(t),e),{documents:e,ir:s})))}function xo(e,t){const n=I(e),r=I(n.Bs),i=n.Ji.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.le(e,t).next(e=>e?e.target:null))}function Po(e,t){const n=I(e),r=n.Xi.get(t)||U.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.Zi.getAllFromCollectionGroup(e,t,Z(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(Lo(n,t,e),e))}function Lo(e,t,n){let r=e.Xi.get(t)||U.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}async function Mo(e,t,n=Qn()){const r=await Do(e,An(Bi(t.bundledQuery))),i=I(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=li(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.qs.saveNamedQuery(e,t);const o=r.withResumeToken(ut.EMPTY_BYTE_STRING,s);return i.Ji=i.Ji.insert(o.targetId,o),i.Bs.updateTargetData(e,o).next(()=>i.Bs.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.Bs.addMatchingKeys(e,n,r.targetId)).next(()=>i.qs.saveNamedQuery(e,t))})}function Fo(e,t){return`firestore_clients_${e}_${t}`}function Vo(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+="_"+t.uid),r}function jo(e,t){return`firestore_targets_${e}_${t}`}class Uo{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static ar(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new T(r.error.code,r.error.message))),s?new Uo(e,t,r.state,i):(g("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class qo{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static ar(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new T(n.error.code,n.error.message))),i?new qo(e,n.state,r):(g("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bo{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Jn();for(let e=0;r&&e<n.activeTargetIds.length;++e)r=Ie(n.activeTargetIds[e]),i=i.add(n.activeTargetIds[e]);return r?new Bo(e,i):(g("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class zo{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new zo(t.clientId,t.onlineState):(g("SharedClientState","Failed to parse online state: "+e),null)}}class Go{constructor(){this.activeTargetIds=Jn()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ko{constructor(e,t,n,r,i){this.window=e,this.ii=t,this.persistenceKey=n,this.wr=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new et(M),this.started=!1,this.yr=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.pr=Fo(this.persistenceKey,this.wr),this.Ir=function(e){return"firestore_sequence_number_"+e}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.gr=this.gr.insert(this.wr,new Go),this.Tr=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vr=function(e){return"firestore_online_state_"+e}(this.persistenceKey),this.Rr=function(e){return"firestore_bundle_loaded_v2_"+e}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const t of e){if(t===this.wr)continue;const e=this.getItem(Fo(this.persistenceKey,t));if(e){const n=Bo.ar(t,e);n&&(this.gr=this.gr.insert(n.clientId,n))}}this.Pr();const t=this.storage.getItem(this.vr);if(t){const e=this.br(t);e&&this.Vr(e)}for(const e of this.yr)this.mr(e);this.yr=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,n){this.Dr(e,t,n),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(jo(this.persistenceKey,e));if(n){const r=qo.ar(e,n);r&&(t=r.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(jo(this.persistenceKey,e))}updateQueryState(e,t,n){this.kr(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.Cr(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return p("SharedClientState","READ",e,t),t}setItem(e,t){p("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){p("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){const t=e;if(t.storageArea===this.storage){if(p("SharedClientState","EVENT",t.key,t.newValue),t.key===this.pr)return void g("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.Tr.test(t.key)){if(null==t.newValue){const e=this.Or(t.key);return this.Fr(e,null)}{const e=this.Br(t.key,t.newValue);if(e)return this.Fr(e.clientId,e)}}else if(this.Er.test(t.key)){if(null!==t.newValue){const e=this.Lr(t.key,t.newValue);if(e)return this.qr(e)}}else if(this.Ar.test(t.key)){if(null!==t.newValue){const e=this.Ur(t.key,t.newValue);if(e)return this.Kr(e)}}else if(t.key===this.vr){if(null!==t.newValue){const e=this.br(t.newValue);if(e)return this.Vr(e)}}else if(t.key===this.Ir){const e=function(e){let t=ve.ct;if(null!=e)try{const n=JSON.parse(e);w("number"==typeof n),t=n}catch(e){g("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==ve.ct&&this.sequenceNumberHandler(e)}else if(t.key===this.Rr){const e=this.Gr(t.newValue);await Promise.all(e.map(e=>this.syncEngine.Qr(e)))}}else this.yr.push(t)})}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,n){const r=new Uo(this.currentUser,e,t,n),i=Vo(this.persistenceKey,this.currentUser,e);this.setItem(i,r.hr())}Cr(e){const t=Vo(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){const t={clientId:this.wr,onlineState:e};this.storage.setItem(this.vr,JSON.stringify(t))}kr(e,t,n){const r=jo(this.persistenceKey,e),i=new qo(e,t,n);this.setItem(r,i.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const n=this.Or(e);return Bo.ar(n,t)}Lr(e,t){const n=this.Er.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Uo.ar(new u(i),r,t)}Ur(e,t){const n=this.Ar.exec(e),r=Number(n[1]);return qo.ar(r,t)}br(e){return zo.ar(e)}Gr(e){return JSON.parse(e)}async qr(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.jr(e.batchId,e.state,e.error);p("SharedClientState","Ignoring mutation for non-active user "+e.user.uid)}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const n=t?this.gr.insert(e,t):this.gr.remove(e),r=this.Sr(this.gr),i=this.Sr(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.Wr(s,o).then(()=>{this.gr=n})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=Jn();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class $o{constructor(){this.Hr=new Go,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Go,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{Yr(e){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){p("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){p("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qo=null;function Yo(){return null===Qo?Qo=268435456+Math.round(2147483648*Math.random()):Qo++,"0x"+Qo.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Jo={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zo="WebChannelConnection";class ea extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,i){const s=Yo(),o=this.To(e,t);p("RestConnection",`Sending RPC '${e}' ${s}:`,o,n);const a={};return this.Eo(a,r,i),this.Ao(e,o,a,n).then(t=>(p("RestConnection",`Received RPC '${e}' ${s}: `,t),t),t=>{throw m("RestConnection",`RPC '${e}' ${s} failed with error: `,t,"url: ",o,"request:",n),t})}vo(e,t,n,r,i,s){return this.Io(e,t,n,r,i)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+l,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=Jo[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const i=Yo();return new Promise((s,o)=>{const c=new a.i;c.setWithCredentials(!0),c.listenOnce(a.c.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case a.a.NO_ERROR:const t=c.getResponseJson();p(Zo,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),s(t);break;case a.a.TIMEOUT:p(Zo,`RPC '${e}' ${i} timed out`),o(new T(_.DEADLINE_EXCEEDED,"Request time out"));break;case a.a.HTTP_ERROR:const n=c.getStatus();if(p(Zo,`RPC '${e}' ${i} failed with status:`,n,"response text:",c.getResponseText()),n>0){let e=c.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(_).indexOf(t)>=0?t:_.UNKNOWN}(t.status);o(new T(e,t.message))}else o(new T(_.UNKNOWN,"Server responded with status "+c.getStatus()))}else o(new T(_.UNAVAILABLE,"Connection failed."));break;default:v()}}finally{p(Zo,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(r);p(Zo,`RPC '${e}' ${i} sending request:`,r),c.send(t,"POST",u,n,15)})}Ro(e,t,n){const r=Yo(),i=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Object(a.j)(),o=Object(a.k)(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;void 0!==u&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new a.d({})),this.Eo(c.initMessageHeaders,t,n),c.encodeInitMessageHeaders=!0;const l=i.join("");p(Zo,`Creating RPC '${e}' stream ${r}: ${l}`,c);const h=s.createWebChannel(l,c);let d=!1,f=!1;const g=new Xo({ro:t=>{f?p(Zo,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(p(Zo,`Opening RPC '${e}' stream ${r} transport.`),h.open(),d=!0),p(Zo,`RPC '${e}' stream ${r} sending:`,t),h.send(t))},oo:()=>h.close()}),y=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return y(h,a.h.EventType.OPEN,()=>{f||p(Zo,`RPC '${e}' stream ${r} transport opened.`)}),y(h,a.h.EventType.CLOSE,()=>{f||(f=!0,p(Zo,`RPC '${e}' stream ${r} transport closed`),g.wo())}),y(h,a.h.EventType.ERROR,t=>{f||(f=!0,m(Zo,`RPC '${e}' stream ${r} transport errored:`,t),g.wo(new T(_.UNAVAILABLE,"The operation could not be completed")))}),y(h,a.h.EventType.MESSAGE,t=>{var n;if(!f){const i=t.data[0];w(!!i);const s=i,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){p(Zo,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Lr[e];if(void 0!==t)return Vr(t)}(t),i=o.message;void 0===n&&(n=_.INTERNAL,i="Unknown error status: "+t+" with message "+o.message),f=!0,g.wo(new T(n,i)),h.close()}else p(Zo,`RPC '${e}' stream ${r} received:`,i),g._o(i)}}),y(o,a.b.STAT_EVENT,t=>{t.stat===a.g.PROXY?p(Zo,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===a.g.NOPROXY&&p(Zo,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{g.fo()},0),g}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(){return"undefined"!=typeof window?window:null}function na(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ra(e){return new si(e,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,t,n=1e3,r=1.5,i=6e4){this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=i,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&p("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(e,t,n,r,i,s,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new ia(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===_.RESOURCE_EXHAUSTED?(g(t.toString()),g("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===_.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,n])=>{this.Fo===t&&this.Zo(e,n)},t=>{e(()=>{const e=new T(_.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return p("PersistentStream","close with error: "+e),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(p("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oa extends sa{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:v()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(w(void 0===t||"string"==typeof t),ut.fromBase64String(t||"")):(w(void 0===t||t instanceof Uint8Array),ut.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?_.UNKNOWN:Vr(e.code);return new T(t,e.message||"")}(o);n=new Jr(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=pi(e,r.document.name),s=li(r.document.updateTime),o=r.document.createTime?li(r.document.createTime):U.min(),a=new jt({mapValue:{fields:r.document.fields}}),c=qt.newFoundDocument(i,s,o,a),u=r.targetIds||[],l=r.removedTargetIds||[];n=new Qr(u,l,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=pi(e,r.document),s=r.readTime?li(r.readTime):U.min(),o=qt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Qr([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=pi(e,r.document),s=r.removedTargetIds||[];n=new Qr([],s,i,null)}else{if(!("filter"in t))return v();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new Pr(r,i),o=e.targetId;n=new Yr(o,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return U.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?U.min():t.readTime?li(t.readTime):U.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=yi(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=mn(r)?{documents:Ti(e,r)}:{query:Ei(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=ci(e,t.resumeToken);const r=oi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(U.min())>0){n.readTime=ai(e,t.snapshotVersion.toTimestamp());const r=oi(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return v()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=yi(this.serializer),t.removeTarget=e,this.Wo(t)}}class aa extends sa{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(w(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(w(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?li(e.updateTime):li(t);return n.isEqual(U.min())&&(n=li(t)),new pr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=li(e.commitTime);return this.listener.cu(n,t)}return w(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=yi(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Ii(this.serializer,e))};this.Wo(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,i])=>this.connection.Io(e,t,n,r,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new T(_.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.vo(e,t,n,i,s,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===_.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new T(_.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class ua{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu("Connection failed 1 times. Most recent error: "+e.toString()),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(g(t),this.mu=!1):p("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=i,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{wa(this)&&(p("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=I(e);t.vu.add(4),await da(t),t.bu.set("Unknown"),t.vu.delete(4),await ha(t)}(this))})}),this.bu=new ua(n,r)}}async function ha(e){if(wa(e))for(const t of e.Ru)await t(!0)}async function da(e){for(const t of e.Ru)await t(!1)}function fa(e,t){const n=I(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),va(n)?ya(n):Fa(n).Ko()&&ga(n,t))}function pa(e,t){const n=I(e),r=Fa(n);n.Au.delete(t),r.Ko()&&ma(n,t),0===n.Au.size&&(r.Ko()?r.jo():wa(n)&&n.bu.set("Unknown"))}function ga(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(U.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Fa(e).su(t)}function ma(e,t){e.Vu.qt(t),Fa(e).iu(t)}function ya(e){e.Vu=new Zr({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Fa(e).start(),e.bu.gu()}function va(e){return wa(e)&&!Fa(e).Uo()&&e.Au.size>0}function wa(e){return 0===I(e).vu.size}function ba(e){e.Vu=void 0}async function Ia(e){e.Au.forEach((t,n)=>{ga(e,t)})}async function _a(e,t){ba(e),va(e)?(e.bu.Iu(t),ya(e)):e.bu.set("Unknown")}async function Ta(e,t,n){if(e.bu.set("Online"),t instanceof Jr&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){p("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Ea(e,n)}else if(t instanceof Qr?e.Vu.Ht(t):t instanceof Yr?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(U.min()))try{const t=await Co(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Au.get(r);i&&e.Au.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(ut.EMPTY_BYTE_STRING,r.snapshotVersion)),ma(e,t);const i=new xi(r.target,t,n,r.sequenceNumber);ga(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){p("RemoteStore","Failed to raise snapshot:",t),await Ea(e,t)}}async function Ea(e,t,n){if(!he(t))throw t;e.vu.add(1),await da(e),e.bu.set("Offline"),n||(n=()=>Co(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{p("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await ha(e)})}function Sa(e,t){return t().catch(n=>Ea(e,n,t))}async function ka(e){const t=I(e),n=Va(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Ca(t);)try{const e=await No(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Aa(t,e)}catch(e){await Ea(t,e)}Na(t)&&Da(t)}function Ca(e){return wa(e)&&e.Eu.length<10}function Aa(e,t){e.Eu.push(t);const n=Va(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Na(e){return wa(e)&&!Va(e).Uo()&&e.Eu.length>0}function Da(e){Va(e).start()}async function Oa(e){Va(e).hu()}async function Ra(e){const t=Va(e);for(const n of e.Eu)t.uu(n.mutations)}async function xa(e,t,n){const r=e.Eu.shift(),i=Or.from(r,t,n);await Sa(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await ka(e)}async function Pa(e,t){t&&Va(e).ou&&await async function(e,t){if(Fr(n=t.code)&&n!==_.ABORTED){const n=e.Eu.shift();Va(e).Qo(),await Sa(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await ka(e)}var n}(e,t),Na(e)&&Da(e)}async function La(e,t){const n=I(e);n.asyncQueue.verifyOperationInProgress(),p("RemoteStore","RemoteStore received new credentials");const r=wa(n);n.vu.add(3),await da(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await ha(n)}async function Ma(e,t){const n=I(e);t?(n.vu.delete(2),await ha(n)):t||(n.vu.add(2),await da(n),n.bu.set("Unknown"))}function Fa(e){return e.Su||(e.Su=function(e,t,n){const r=I(e);return r.fu(),new oa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(e.datastore,e.asyncQueue,{uo:Ia.bind(null,e),ao:_a.bind(null,e),nu:Ta.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),va(e)?ya(e):e.bu.set("Unknown")):(await e.Su.stop(),ba(e))})),e.Su}function Va(e){return e.Du||(e.Du=function(e,t,n){const r=I(e);return r.fu(),new aa(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Oa.bind(null,e),ao:Pa.bind(null,e),au:Ra.bind(null,e),cu:xa.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await ka(e)):(await e.Du.stop(),e.Eu.length>0&&(p("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class ja{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new E,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new ja(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new T(_.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ua(e,t){if(g("AsyncQueue",`${t}: ${e}`),he(e))return new T(_.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this.comparator=e?(t,n)=>e(t,n)||K.comparator(t.key,n.key):(e,t)=>K.comparator(e.key,t.key),this.keyedMap=Bn(),this.sortedSet=new et(this.comparator)}static emptySet(e){return new qa(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof qa))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new qa;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(){this.Cu=new et(K.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):v():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class za{constructor(e,t,n,r,i,s,o,a,c){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new za(e,t,qa.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&On(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==n[e].type||!t[e].doc.isEqual(n[e].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.Nu=void 0,this.listeners=[]}}class Ka{constructor(){this.queries=new Vn(e=>Rn(e),On),this.onlineState="Unknown",this.ku=new Set}}async function $a(e,t){const n=I(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new Ga),i)try{s.Nu=await n.onListen(r)}catch(e){const n=Ua(e,`Initialization of query '${xn(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.Mu(n.onlineState),s.Nu&&t.$u(s.Nu)&&Ya(n)}async function Wa(e,t){const n=I(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function Ha(e,t){const n=I(e);let r=!1;for(const e of t){const t=e.query,i=n.queries.get(t);if(i){for(const t of i.listeners)t.$u(e)&&(r=!0);i.Nu=e}}r&&Ya(n)}function Qa(e,t,n){const r=I(e),i=r.queries.get(t);if(i)for(const e of i.listeners)e.onError(n);r.queries.delete(t)}function Ya(e){e.ku.forEach(e=>{e.next()})}class Ja{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new za(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=za.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e){this.serializer=e}rr(e){return pi(this.serializer,e)}ur(e){return e.metadata.exists?bi(this.serializer,e.document,!1):qt.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return li(e)}}class ec{constructor(e,t,n){this.ju=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=tc(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const n=B.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,n=new Za(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.rr(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||Qn()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=I(e);let s=Qn(),o=Un();for(const e of n){const n=t.rr(e.metadata.name);e.document&&(s=s.add(n));const r=t.ur(e);r.setReadTime(t.cr(e.metadata.readTime)),o=o.insert(n,r)}const a=i.Zi.newChangeBuffer({trackRemovals:!0}),c=await Do(i,function(e){return An(_n(B.fromString("__bundle__/docs/"+e)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>Ao(e,a,o).next(t=>(a.apply(e),t)).next(t=>i.Bs.removeMatchingKeysForTargetId(e,c.targetId).next(()=>i.Bs.addMatchingKeys(e,s,c.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.nr,t.sr)).next(()=>t.nr)))}(this.localStore,new Za(this.serializer),this.documents,this.ju.id),t=this.Wu(this.documents);for(const e of this.queries)await Mo(this.localStore,e,t.get(e.name));return this.progress.taskState="Success",{progress:this.progress,Hu:this.collectionGroups,Ju:e}}}function tc(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nc{constructor(e){this.key=e}}class rc{constructor(e){this.key=e}}class ic{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Qn(),this.mutatedKeys=Qn(),this.tc=Mn(e),this.ec=new qa(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Ba,r=t?t.ec:this.ec;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,c="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const u=r.get(e),l=Pn(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),d=!!l&&(l.hasLocalMutations||this.mutatedKeys.has(l.key)&&l.hasCommittedMutations);let f=!1;u&&l?u.data.isEqual(l.data)?h!==d&&(n.track({type:3,doc:l}),f=!0):this.rc(u,l)||(n.track({type:2,doc:l}),f=!0,(a&&this.tc(l,a)>0||c&&this.tc(l,c)<0)&&(o=!0)):!u&&l?(n.track({type:0,doc:l}),f=!0):u&&!l&&(n.track({type:1,doc:u}),f=!0,(a||c)&&(o=!0)),f&&(l?(s=s.add(l),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ec:s,ic:n,zi:o,mutatedKeys:i}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const i=e.ic.xu();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return v()}};return n(e)-n(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const s=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==i.length||a?{snapshot:new za(this.query,e.ec,r,i,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:s}:{cc:s}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Ba,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Qn(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new rc(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new nc(n))}),t}hc(e){this.Yu=e.ir,this.Zu=Qn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return za.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class sc{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class oc{constructor(e){this.key=e,this.fc=!1}}class ac{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.dc={},this.wc=new Vn(e=>Rn(e),On),this._c=new Map,this.mc=new Set,this.gc=new et(K.comparator),this.yc=new Map,this.Ic=new io,this.Tc={},this.Ec=new Map,this.Ac=xs.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function cc(e,t){const n=Pc(e);let r,i;const s=n.wc.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const e=await Do(n.localStore,An(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await uc(n,t,r,"current"===s,e.resumeToken),n.isPrimaryClient&&fa(n.remoteStore,e)}return i}async function uc(e,t,n,r,i){e.Rc=(t,n,r)=>async function(e,t,n,r){let i=t.view.sc(n);i.zi&&(i=await Ro(e.localStore,t.query,!1).then(({documents:e})=>t.view.sc(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return bc(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const s=await Ro(e.localStore,t,!0),o=new ic(t,s.ir),a=o.sc(s.documents),c=Hr.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=o.applyChanges(a,e.isPrimaryClient,c);bc(e,n,u.cc);const l=new sc(t,n,o);return e.wc.set(t,l),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),u.snapshot}async function lc(e,t){const n=I(e),r=n.wc.get(t),i=n._c.get(r.targetId);if(i.length>1)return n._c.set(r.targetId,i.filter(e=>!On(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Oo(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),pa(n.remoteStore,r.targetId),vc(n,r.targetId)}).catch(se)):(vc(n,r.targetId),await Oo(n.localStore,r.targetId,!0))}async function hc(e,t){const n=I(e);try{const e=await function(e,t){const n=I(e),r=t.snapshotVersion;let i=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.Zi.newChangeBuffer({trackRemovals:!0});i=n.Ji;const o=[];t.targetChanges.forEach((s,a)=>{const c=i.get(a);if(!c)return;o.push(n.Bs.removeMatchingKeys(e,s.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,s.addedDocuments,a)));let u=c.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?u=u.withResumeToken(ut.EMPTY_BYTE_STRING,U.min()).withLastLimboFreeSnapshotVersion(U.min()):s.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(s.resumeToken,r)),i=i.insert(a,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(c,u,s)&&o.push(n.Bs.updateTargetData(e,u))});let a=Un(),c=Qn();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Ao(e,s,t.documentUpdates).next(e=>{a=e.nr,c=e.sr})),!r.isEqual(U.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return oe.waitFor(o).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,c)).next(()=>a)}).then(e=>(n.Ji=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(w(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?w(r.fc):e.removedDocuments.size>0&&(w(r.fc),r.fc=!1))}),await Tc(n,e,t)}catch(e){await se(e)}}function dc(e,t,n){const r=I(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const i=r.view.Mu(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=I(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const e of n.listeners)e.Mu(t)&&(r=!0)}),r&&Ya(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function fc(e,t,n){const r=I(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.yc.get(t),s=i&&i.key;if(s){let e=new et(K.comparator);e=e.insert(s,qt.newNoDocument(s,U.min()));const n=Qn().add(s),i=new Wr(U.min(),new Map,new et(M),e,n);await hc(r,i),r.gc=r.gc.remove(s),r.yc.delete(t),_c(r)}else await Oo(r.localStore,t,!1).then(()=>vc(r,t,n)).catch(se)}async function pc(e,t){const n=I(e),r=t.batch.batchId;try{const e=await function(e,t){const n=I(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=oe.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);w(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Qn();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);yc(n,r,null),mc(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Tc(n,e)}catch(e){await se(e)}}async function gc(e,t,n){const r=I(e);try{const e=await function(e,t){const n=I(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(w(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);yc(r,t,n),mc(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Tc(r,e)}catch(n){await se(n)}}function mc(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function yc(e,t,n){const r=I(e);let i=r.Tc[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Tc[r.currentUser.toKey()]=i}}function vc(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||wc(e,t)})}function wc(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(pa(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),_c(e))}function bc(e,t,n){for(const r of n)r instanceof nc?(e.Ic.addReference(r.key,t),Ic(e,r)):r instanceof rc?(p("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||wc(e,r.key)):v()}function Ic(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(p("SyncEngine","New document in limbo: "+n),e.mc.add(r),_c(e))}function _c(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new K(B.fromString(t)),r=e.Ac.next();e.yc.set(r,new oc(n)),e.gc=e.gc.insert(n,r),fa(e.remoteStore,new xi(An(_n(n.path)),r,"TargetPurposeLimboResolution",ve.ct))}}async function Tc(e,t,n){const r=I(e),i=[],s=[],o=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{o.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=_o.Li(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.dc.nu(i),await async function(e,t){const n=I(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>oe.forEach(t,t=>oe.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>oe.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!he(e))throw e;p("LocalStore","Failed to update sequence numbers: "+e)}for(const e of t){const t=e.targetId;if(!e.fromCache){const e=n.Ji.get(t),r=e.snapshotVersion,i=e.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(t,i)}}}(r.localStore,s))}async function Ec(e,t){const n=I(e);if(!n.currentUser.isEqual(t)){p("SyncEngine","User change. New user:",t.toKey());const e=await ko(n.localStore,t);n.currentUser=t,function(e,t){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new T(_.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Tc(n,e.er)}}function Sc(e,t){const n=I(e),r=n.yc.get(t);if(r&&r.fc)return Qn().add(r.key);{let e=Qn();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}async function kc(e,t){const n=I(e),r=await Ro(n.localStore,t.query,!0),i=t.view.hc(r);return n.isPrimaryClient&&bc(n,t.targetId,i.cc),i}async function Cc(e,t){const n=I(e);return Po(n.localStore,t).then(e=>Tc(n,e))}async function Ac(e,t,n,r){const i=I(e),s=await function(e,t){const n=I(e),r=I(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Sn(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):oe.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await ka(i.remoteStore):"acknowledged"===n||"rejected"===n?(yc(i,t,r||null),mc(i,t),function(e,t){I(I(e).mutationQueue).Cn(t)}(i.localStore,t)):v(),await Tc(i,s)):p("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Nc(e,t,n){const r=I(e),i=[],s=[];for(const e of t){let t;const n=r._c.get(e);if(n&&0!==n.length){t=await Do(r.localStore,An(n[0]));for(const e of n){const t=r.wc.get(e),n=await kc(r,t);n.snapshot&&s.push(n.snapshot)}}else{const n=await xo(r.localStore,e);t=await Do(r.localStore,n),await uc(r,Dc(n),e,!1,t.resumeToken)}i.push(t)}return r.dc.nu(s),i}function Dc(e){return In(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Oc(e){const t=I(e);return I(I(t.localStore).persistence).$i()}async function Rc(e,t,n,r){const i=I(e);if(i.vc)return void p("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await Po(i.localStore,Ln(s[0])),r=Wr.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,ut.EMPTY_BYTE_STRING);await Tc(i,e,r);break}case"rejected":await Oo(i.localStore,t,!0),vc(i,t,r);break;default:v()}}async function xc(e,t,n){const r=Pc(e);if(r.vc){for(const e of t){if(r._c.has(e)){p("SyncEngine","Adding an already active target "+e);continue}const t=await xo(r.localStore,e),n=await Do(r.localStore,t);await uc(r,Dc(t),n.targetId,!1,n.resumeToken),fa(r.remoteStore,n)}for(const e of n)r._c.has(e)&&await Oo(r.localStore,e,!1).then(()=>{pa(r.remoteStore,e),vc(r,e)}).catch(se)}}function Pc(e){const t=I(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=hc.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Sc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fc.bind(null,t),t.dc.nu=Ha.bind(null,t.eventManager),t.dc.Pc=Qa.bind(null,t.eventManager),t}function Lc(e){const t=I(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pc.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=gc.bind(null,t),t}class Mc{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=ra(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return So(this.persistence,new To,e.initialUser,this.serializer)}createPersistence(e){return new lo(fo.zs,this.serializer)}createSharedClientState(e){return new $o}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fc extends Mc{constructor(e){super(),this.cacheSizeBytes=e}createGarbageCollectionScheduler(e,t){w(this.persistence.referenceDelegate instanceof po);const n=this.persistence.referenceDelegate.garbageCollector;return new Us(n,e.asyncQueue,t)}createPersistence(e){const t=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new lo(e=>po.zs(e,t),this.serializer)}}class Vc extends Mc{constructor(e,t,n){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Vc.initialize(this,e),await Lc(this.Vc.syncEngine),await ka(this.Vc.remoteStore),await this.persistence.Ii(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return So(this.persistence,new To,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new Us(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new ye(t,this.persistence);return new me(e.asyncQueue,n)}createPersistence(e){const t=Io(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Ss.withCacheSize(this.cacheSizeBytes):Ss.DEFAULT;return new vo(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,ta(),na(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new $o}}class jc extends Vc{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Vc.syncEngine;this.sharedClientState instanceof Ko&&(this.sharedClientState.syncEngine={jr:Ac.bind(null,t),zr:Rc.bind(null,t),Wr:xc.bind(null,t),$i:Oc.bind(null,t),Qr:Cc.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Ii(async e=>{await async function(e,t){const n=I(e);if(Pc(n),Lc(n),!0===t&&!0!==n.vc){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Nc(n,e.toArray());n.vc=!0,await Ma(n.remoteStore,!0);for(const e of t)fa(n.remoteStore,e)}else if(!1===t&&!1!==n.vc){const e=[];let t=Promise.resolve();n._c.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(vc(n,i),Oo(n.localStore,i,!0))),pa(n.remoteStore,i)}),await t,await Nc(n,e),function(e){const t=I(e);t.yc.forEach((e,n)=>{pa(t.remoteStore,n)}),t.Ic.Ts(),t.yc=new Map,t.gc=new et(K.comparator)}(n),n.vc=!1,await Ma(n.remoteStore,!1)}}(this.Vc.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const t=ta();if(!Ko.D(t))throw new T(_.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Io(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ko(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Uc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>dc(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ec.bind(null,this.syncEngine),await Ma(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Ka}createDatastore(e){const t=ra(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new ea(r));var r;return function(e,t,n,r){return new ca(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>dc(this.syncEngine,e,0),s=Ho.D()?new Ho:new Wo,new la(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new ac(e,t,n,r,i,s);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=I(e);p("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await da(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qc(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):g("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new E,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(e=>{e&&e.Qu()?this.metadata.resolve(e.Gu.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==e?void 0:e.Gu)))},e=>this.metadata.reject(e))}close(){return this.Cc.cancel()}async getMetadata(){return this.metadata.promise}async bc(){return await this.getMetadata(),this.Nc()}async Nc(){const e=await this.kc();if(null===e)return null;const t=this.xc.decode(e),n=Number(t);isNaN(n)&&this.Mc(`length string (${t}) is not valid number`);const r=await this.$c(n);return new Xa(JSON.parse(r),e.length+n)}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async kc(){for(;this.Oc()<0&&!await this.Fc(););if(0===this.buffer.length)return null;const e=this.Oc();e<0&&this.Mc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async $c(e){for(;this.buffer.length<e;)await this.Fc()&&this.Mc("Reached the end of bundle when more is expected.");const t=this.xc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}Mc(e){throw this.Cc.cancel(),new Error("Invalid bundle format: "+e)}async Fc(){const e=await this.Cc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new T(_.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=I(e),r=yi(n.serializer)+"/documents",i={documents:t.map(e=>fi(n.serializer,e))},s=await n.vo("BatchGetDocuments",r,i,t.length),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){w(!!t.found),t.found.name,t.found.updateTime;const n=pi(e,t.found.name),r=li(t.found.updateTime),i=t.found.createTime?li(t.found.createTime):U.min(),s=new jt({mapValue:{fields:t.found.fields}});return qt.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){w(!!t.missing),w(!!t.readTime);const n=pi(e,t.missing),r=li(t.readTime);return qt.newNoDocument(n,r)}(e,t):v()}(n.serializer,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());w(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ar(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=K.fromPath(t);this.mutations.push(new Nr(n,this.precondition(n)))}),await async function(e,t){const n=I(e),r=yi(n.serializer)+"/documents",i={writes:t.map(e=>Ii(n.serializer,e))};await n.Io("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw v();t=U.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new T(_.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(U.min())?gr.exists(!1):gr.updateTime(t):gr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(U.min()))throw new T(_.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gr.updateTime(t)}return gr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kc{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.Bc=n.maxAttempts,this.qo=new ia(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){this.qo.No(async()=>{const e=new Gc(this.datastore),t=this.qc(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Uc(e)}))}).catch(e=>{this.Uc(e)})})}qc(e){try{const t=this.updateFunction(e);return!we(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Fr(t)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=u.UNAUTHENTICATED,this.clientId=L.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{p("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(p("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new T(_.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new E;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Ua(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Wc(e,t){e.asyncQueue.verifyOperationInProgress(),p("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await ko(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Hc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Yc(e);p("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>La(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>La(t.remoteStore,n)),e._onlineComponents=t}function Qc(e){return"FirebaseError"===e.name?e.code===_.FAILED_PRECONDITION||e.code===_.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Yc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){p("FirestoreClient","Using user provided OfflineComponentProvider");try{await Wc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!Qc(n))throw n;m("Error using user provided cache. Falling back to memory cache: "+n),await Wc(e,new Mc)}}else p("FirestoreClient","Using default OfflineComponentProvider"),await Wc(e,new Mc);return e._offlineComponents}async function Jc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(p("FirestoreClient","Using user provided OnlineComponentProvider"),await Hc(e,e._uninitializedComponentsProvider._online)):(p("FirestoreClient","Using default OnlineComponentProvider"),await Hc(e,new Uc))),e._onlineComponents}function Xc(e){return Yc(e).then(e=>e.persistence)}function Zc(e){return Yc(e).then(e=>e.localStore)}function eu(e){return Jc(e).then(e=>e.remoteStore)}function tu(e){return Jc(e).then(e=>e.syncEngine)}function nu(e){return Jc(e).then(e=>e.datastore)}async function ru(e){const t=await Jc(e),n=t.eventManager;return n.onListen=cc.bind(null,t.syncEngine),n.onUnlisten=lc.bind(null,t.syncEngine),n}function iu(e,t,n={}){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Bc({next:s=>{t.enqueueAndForget(()=>Wa(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new T(_.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new T(_.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new Ja(_n(n.path),s,{includeMetadataChanges:!0,Ku:!0});return $a(e,o)}(await ru(e),e.asyncQueue,t,n,r)),r.promise}function su(e,t,n={}){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Bc({next:n=>{t.enqueueAndForget(()=>Wa(e,o)),n.fromCache&&"server"===r.source?i.reject(new T(_.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new Ja(n,s,{includeMetadataChanges:!0,Ku:!0});return $a(e,o)}(await ru(e),e.asyncQueue,t,n,r)),r.promise}function ou(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?qr().encode(e):e,function(e,t){return new zc(e,t)}(function(e,t){if(e instanceof Uint8Array)return qc(e,t);if(e instanceof ArrayBuffer)return qc(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,ra(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=I(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=I(e),r=li(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.qs.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(tc(r));const i=new ec(r,e.localStore,t.serializer);let s=await t.bc();for(;s;){const e=await i.zu(s);e&&n._updateProgress(e),s=await t.bc()}const o=await i.complete();return await Tc(e,o.Ju,void 0),await function(e,t){const n=I(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.qs.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress),Promise.resolve(o.Hu)}catch(e){return m("SyncEngine","Loading bundle failed with "+e),n._failWith(e),Promise.resolve(new Set)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await tu(e),i,r)})}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function au(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const cu=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(e,t,n){if(!n)throw new T(_.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function lu(e,t,n,r){if(!0===t&&!0===r)throw new T(_.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function hu(e){if(!K.isDocumentKey(e))throw new T(_.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function du(e){if(K.isDocumentKey(e))throw new T(_.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function fu(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":v()}function pu(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new T(_.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=fu(e);throw new T(_.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function gu(e,t){if(t<=0)throw new T(_.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new T(_.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lu("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=au(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new T(_.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new T(_.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new T(_.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class yu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new T(_.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mu(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new k;switch(e.type){case"firstParty":return new D(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new T(_.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=cu.get(e);t&&(p("ComponentProvider","Removing Datastore"),cu.delete(e),t.terminate())}(this),Promise.resolve()}}function vu(e,t,n,r={}){var i;const s=(e=pu(e,yu))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==a&&m("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=u.MOCK_USER;else{t=Object(o.g)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new T(_.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new u(s)}e._authCredentials=new C(new S(t,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wu{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new wu(this.firestore,e,this._key)}}class bu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new bu(this.firestore,e,this._query)}}class Iu extends bu{constructor(e,t,n){super(e,t,_n(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new wu(this.firestore,null,new K(e))}withConverter(e){return new Iu(this.firestore,e,this._path)}}function _u(e,t,...n){if(e=Object(o.p)(e),uu("collection","path",t),e instanceof yu){const r=B.fromString(t,...n);return du(r),new Iu(e,null,r)}{if(!(e instanceof wu||e instanceof Iu))throw new T(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(B.fromString(t,...n));return du(r),new Iu(e.firestore,null,r)}}function Tu(e,t){if(e=pu(e,yu),uu("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new T(_.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new bu(e,null,function(e){return new bn(B.emptyPath(),e)}(t))}function Eu(e,t,...n){if(e=Object(o.p)(e),1===arguments.length&&(t=L.A()),uu("doc","path",t),e instanceof yu){const r=B.fromString(t,...n);return hu(r),new wu(e,null,new K(r))}{if(!(e instanceof wu||e instanceof Iu))throw new T(_.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(B.fromString(t,...n));return hu(r),new wu(e.firestore,e instanceof Iu?e.converter:null,new K(r))}}function Su(e,t){return e=Object(o.p)(e),t=Object(o.p)(t),(e instanceof wu||e instanceof Iu)&&(t instanceof wu||t instanceof Iu)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function ku(e,t){return e=Object(o.p)(e),t=Object(o.p)(t),e instanceof bu&&t instanceof bu&&e.firestore===t.firestore&&On(e._query,t._query)&&e.converter===t.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Cu{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new ia(this,"async_queue_retry"),this.Xc=()=>{const e=na();e&&p("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=na();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=na();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new E;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!he(e))throw e;p("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;throw g("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=ja.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&v()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Au(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of["next","error","complete"])if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e)}class Nu{constructor(){this._progressObserver={},this._taskCompletionResolver=new E,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=-1;class Ou extends yu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new Cu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Lu(this),this._firestoreClient.terminate()}}function Ru(e,t,n){n||(n="(default)");const i=Object(r._getProvider)(e,"firestore");if(i.isInitialized(n)){const e=i.getImmediate({identifier:n}),r=i.getOptions(n);if(Object(o.i)(r,t))return e;throw new T(_.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new T(_.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new T(_.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:t,instanceIdentifier:n})}function xu(e,t){const n="object"==typeof e?e:Object(r.getApp)(),i="string"==typeof e?e:t||"(default)",s=Object(r._getProvider)(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const e=Object(o.n)("firestore");e&&vu(s,...e)}return s}function Pu(e){return e._firestoreClient||Lu(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Lu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new yt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,au(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new $c(e._authCredentials,e._appCheckCredentials,e._queue,s),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Mu(e,t){$u(e=pu(e,Ou));const n=Pu(e);if(n._uninitializedComponentsProvider)throw new T(_.FAILED_PRECONDITION,"SDK cache is already specified.");m("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new Uc;return Vu(n,i,new Vc(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function Fu(e){$u(e=pu(e,Ou));const t=Pu(e);if(t._uninitializedComponentsProvider)throw new T(_.FAILED_PRECONDITION,"SDK cache is already specified.");m("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new Uc;return Vu(t,r,new jc(r,n.cacheSizeBytes))}function Vu(e,t,n){const r=new E;return e.asyncQueue.enqueue(async()=>{try{await Wc(e,n),await Hc(e,t),r.resolve()}catch(e){const t=e;if(!Qc(t))throw t;m("Error enabling indexeddb cache. Falling back to memory cache: "+t),r.reject(t)}}).then(()=>r.promise)}function ju(e){if(e._initialized&&!e._terminated)throw new T(_.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new E;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!ce.D())return Promise.resolve();const t=e+"main";await ce.delete(t)}(Io(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function Uu(e){return function(e){const t=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=I(e);wa(n.remoteStore)||p("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=I(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ec.get(e)||[];r.push(t),n.Ec.set(e,r)}catch(e){const n=Ua(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await tu(e),t)),t.promise}(Pu(e=pu(e,Ou)))}function qu(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await Xc(e),n=await eu(e);return t.setNetworkEnabled(!0),function(e){const t=I(e);return t.vu.delete(0),ha(t)}(n)})}(Pu(e=pu(e,Ou)))}function Bu(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await Xc(e),n=await eu(e);return t.setNetworkEnabled(!1),async function(e){const t=I(e);t.vu.add(0),await da(t),t.bu.set("Offline")}(n)})}(Pu(e=pu(e,Ou)))}function zu(e){return Object(r._removeServiceInstance)(e.app,"firestore",e._databaseId.database),e._delete()}function Gu(e,t){const n=Pu(e=pu(e,Ou)),r=new Nu;return ou(n,e._databaseId,t,r),r}function Ku(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=I(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.qs.getNamedQuery(e,t))}(await Zc(e),t))}(Pu(e=pu(e,Ou)),t).then(t=>t?new bu(e,null,t.query):null)}function $u(e){if(e._initialized||e._terminated)throw new T(_.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(e="count",t){this._aggregateType=e,this._internalFieldPath=t,this.type="AggregateField"}}class Hu{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Qu(ut.fromBase64String(e))}catch(e){throw new T(_.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Qu(ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new T(_.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new G(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Ju(){return new Yu("__name__")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e){this._methodName=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new T(_.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new T(_.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return M(this._lat,e._lat)||M(this._long,e._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=/^__.*__$/;class tl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Er(e,this.data,this.fieldMask,t,this.fieldTransforms):new Tr(e,this.data,t,this.fieldTransforms)}}class nl{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Er(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function rl(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw v()}}class il{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ua(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new il(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return El(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(rl(this.ca)&&el.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class sl{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||ra(e)}ya(e,t,n,r=!1){return new il({ca:e,methodName:t,ga:n,path:G.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ol(e){const t=e._freezeSettings(),n=ra(e._databaseId);return new sl(e._databaseId,!!t.ignoreUndefinedProperties,n)}function al(e,t,n,r,i,s={}){const o=e.ya(s.merge||s.mergeFields?2:0,t,n,i);bl("Data must be an object, but it was:",o,r);const a=vl(r,o);let c,u;if(s.merge)c=new ot(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Il(t,r,n);if(!o.contains(i))throw new T(_.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Sl(e,i)||e.push(i)}c=new ot(e),u=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,u=o.fieldTransforms;return new tl(new jt(a),c,u)}class cl extends Xu{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(this._methodName+"() can only appear at the top level of your update data"):e._a(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cl}}function ul(e,t,n){return new il({ca:3,ga:t.settings.ga,methodName:e._methodName,la:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class ll extends Xu{_toFieldTransform(e){return new fr(e.path,new sr)}isEqual(e){return e instanceof ll}}class hl extends Xu{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ul(this,e,!0),n=this.pa.map(e=>yl(e,t)),r=new or(n);return new fr(e.path,r)}isEqual(e){return this===e}}class dl extends Xu{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=ul(this,e,!0),n=this.pa.map(e=>yl(e,t)),r=new cr(n);return new fr(e.path,r)}isEqual(e){return this===e}}class fl extends Xu{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new lr(e.serializer,er(e.serializer,this.Ia));return new fr(e.path,t)}isEqual(e){return this===e}}function pl(e,t,n,r){const i=e.ya(1,t,n);bl("Data must be an object, but it was:",i,r);const s=[],a=jt.empty();Xe(r,(e,r)=>{const c=Tl(t,e,n);r=Object(o.p)(r);const u=i.da(c);if(r instanceof cl)s.push(c);else{const e=yl(r,u);null!=e&&(s.push(c),a.set(c,e))}});const c=new ot(s);return new nl(a,c,i.fieldTransforms)}function gl(e,t,n,r,i,s){const a=e.ya(1,t,n),c=[Il(t,r,n)],u=[i];if(s.length%2!=0)throw new T(_.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<s.length;e+=2)c.push(Il(t,s[e])),u.push(s[e+1]);const l=[],h=jt.empty();for(let e=c.length-1;e>=0;--e)if(!Sl(l,c[e])){const t=c[e];let n=u[e];n=Object(o.p)(n);const r=a.da(t);if(n instanceof cl)l.push(t);else{const e=yl(n,r);null!=e&&(l.push(t),h.set(t,e))}}const d=new ot(l);return new nl(h,d,a.fieldTransforms)}function ml(e,t,n,r=!1){return yl(n,e.ya(r?4:3,t))}function yl(e,t){if(wl(e=Object(o.p)(e)))return bl("Unsupported field value:",t,e),vl(e,t);if(e instanceof Xu)return function(e,t){if(!rl(t.ca))throw t._a(e._methodName+"() can only be used with update() and set()");if(!t.path)throw t._a(e._methodName+"() is not currently supported inside arrays");const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=yl(i,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Object(o.p)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return er(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=j.fromDate(e);return{timestampValue:ai(t.serializer,n)}}if(e instanceof j){const n=new j(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:ai(t.serializer,n)}}if(e instanceof Zu)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Qu)return{bytesValue:ci(t.serializer,e._byteString)};if(e instanceof wu){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:hi(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a("Unsupported field value: "+fu(e))}(e,t)}function vl(e,t){const n={};return Ze(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Xe(e,(e,r)=>{const i=yl(r,t.ha(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function wl(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof j||e instanceof Zu||e instanceof Qu||e instanceof wu||e instanceof Xu)}function bl(e,t,n){if(!wl(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=fu(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Il(e,t,n){if((t=Object(o.p)(t))instanceof Yu)return t._internalPath;if("string"==typeof t)return Tl(e,t);throw El("Field path arguments must be of type string or ",e,!1,void 0,n)}const _l=new RegExp("[~\\*/\\[\\]]");function Tl(e,t,n){if(t.search(_l)>=0)throw El(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Yu(...t.split("."))._internalPath}catch(r){throw El(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function El(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=" in field "+r),o&&(c+=" in document "+i),c+=")"),new T(_.INVALID_ARGUMENT,a+e+c)}function Sl(e,t){return e.some(e=>e.isEqual(t))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new wu(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Cl(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Al("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Cl extends kl{data(){return super.data()}}function Al(e,t){return"string"==typeof t?Tl(e,t):t instanceof Yu?t._internalPath:t._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new T(_.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dl{}class Ol extends Dl{}function Rl(e,t,...n){let r=[];t instanceof Dl&&r.push(t),r=r.concat(n),function(e){const t=e.filter(e=>e instanceof Ll).length,n=e.filter(e=>e instanceof xl).length;if(t>1||t>0&&n>0)throw new T(_.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(r);for(const t of r)e=t._apply(e);return e}class xl extends Ol{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new xl(e,t,n)}_apply(e){const t=this._parse(e);return Xl(e._query,t),new bu(e.firestore,e.converter,Nn(e._query,t))}_parse(e){const t=ol(e.firestore);return function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new T(_.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Jl(o,s);const t=[];for(const n of o)t.push(Yl(r,e,n));a={arrayValue:{values:t}}}else a=Yl(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Jl(o,s),a=ml(n,"where",o,"in"===s||"not-in"===s);return Ht.create(i,s,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}function Pl(e,t,n){const r=t,i=Al("where",e);return xl._create(i,r,n)}class Ll extends Dl{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ll(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Qt.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const e of r)Xl(n,e),n=Nn(n,e)}(e._query,t),new bu(e.firestore,e.converter,Nn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Ml(...e){return e.forEach(e=>eh("or",e)),Ll._create("or",e)}function Fl(...e){return e.forEach(e=>eh("and",e)),Ll._create("and",e)}class Vl extends Ol{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Vl(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new T(_.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new T(_.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Kt(t,n);return function(e,t){if(null===En(e)){const n=Sn(e);null!==n&&Zl(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new bu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new bn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function jl(e,t="asc"){const n=t,r=Al("orderBy",e);return Vl._create(r,n)}class Ul extends Ol{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new Ul(e,t,n)}_apply(e){return new bu(e.firestore,e.converter,Dn(e._query,this._limit,this._limitType))}}function ql(e){return gu("limit",e),Ul._create("limit",e,"F")}function Bl(e){return gu("limitToLast",e),Ul._create("limitToLast",e,"L")}class zl extends Ol{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new zl(e,t,n)}_apply(e){const t=Ql(e,this.type,this._docOrFields,this._inclusive);return new bu(e.firestore,e.converter,function(e,t){return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function Gl(...e){return zl._create("startAt",e,!0)}function Kl(...e){return zl._create("startAfter",e,!1)}class $l extends Ol{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new $l(e,t,n)}_apply(e){const t=Ql(e,this.type,this._docOrFields,this._inclusive);return new bu(e.firestore,e.converter,function(e,t){return new bn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Wl(...e){return $l._create("endBefore",e,!1)}function Hl(...e){return $l._create("endAt",e,!0)}function Ql(e,t,n,r){if(n[0]=Object(o.p)(n[0]),n[0]instanceof kl)return function(e,t,n,r,i){if(!r)throw new T(_.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const n of Cn(e))if(n.field.isKeyField())s.push(Ct(t,r.key));else{const e=r.data.field(n.field);if(pt(e))throw new T(_.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+n.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=n.field.canonicalString();throw new T(_.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new Bt(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=ol(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new T(_.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let s=0;s<i.length;s++){const c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new T(_.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof c}`);if(!kn(e)&&-1!==c.indexOf("/"))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${c}' contains a slash.`);const n=e.path.child(B.fromString(c));if(!K.isDocumentKey(n))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new K(n);a.push(Ct(t,i))}else{const e=ml(n,r,c);a.push(e)}}return new Bt(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Yl(e,t,n){if("string"==typeof(n=Object(o.p)(n))){if(""===n)throw new T(_.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kn(t)&&-1!==n.indexOf("/"))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(B.fromString(n));if(!K.isDocumentKey(r))throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ct(e,new K(r))}if(n instanceof wu)return Ct(e,n._key);throw new T(_.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fu(n)}.`)}function Jl(e,t){if(!Array.isArray(e)||0===e.length)throw new T(_.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Xl(e,t){if(t.isInequality()){const n=Sn(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new T(_.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const i=En(e);null!==i&&Zl(e,r,i)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new T(_.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new T(_.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Zl(e,t,n){if(!n.isEqual(t))throw new T(_.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}function eh(e,t){if(!(t instanceof xl||t instanceof Ll))throw new T(_.INVALID_ARGUMENT,`Function ${e}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class th{convertValue(e,t="none"){switch(It(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ft(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw v()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return Xe(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new Zu(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=gt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(mt(e));default:return null}}convertTimestamp(e){const t=ht(e);return new j(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=B.fromString(e);w(Ri(n));const r=new vt(n.get(1),n.get(3)),i=new K(n.popFirst(5));return r.isEqual(t)||g(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class rh extends th{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wu(this.firestore,null,t)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ih(e){return new Wu("sum",Il("sum",e))}function sh(e){return new Wu("avg",Il("average",e))}function oh(){return new Wu("count")}function ah(e,t){var n,r;return e instanceof Wu&&t instanceof Wu&&e._aggregateType===t._aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())}function ch(e,t){return ku(e.query,t.query)&&Object(o.i)(e.data(),t.data())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lh extends kl{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new hh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(Al("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class hh extends lh{data(e={}){return super.data(e)}}class dh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new uh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new hh(this._firestore,this._userDataWriter,n.key,n,new uh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new T(_.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new hh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new uh(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new hh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new uh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:fh(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function fh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return v()}}function ph(e,t){return e instanceof lh&&t instanceof lh?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof dh&&t instanceof dh&&e._firestore===t._firestore&&ku(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gh(e){e=pu(e,wu);const t=pu(e.firestore,Ou);return iu(Pu(t),e._key).then(n=>Nh(t,e,n))}class mh extends th{constructor(e){super(),this.firestore=e}convertBytes(e){return new Qu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new wu(this.firestore,null,t)}}function yh(e){e=pu(e,wu);const t=pu(e.firestore,Ou),n=Pu(t),r=new mh(t);return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=I(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new T(_.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=Ua(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await Zc(e),t,n)),n.promise}(n,e._key).then(n=>new lh(t,r,e._key,n,new uh(null!==n&&n.hasLocalMutations,!0),e.converter))}function vh(e){e=pu(e,wu);const t=pu(e.firestore,Ou);return iu(Pu(t),e._key,{source:"server"}).then(n=>Nh(t,e,n))}function wh(e){e=pu(e,bu);const t=pu(e.firestore,Ou),n=Pu(t),r=new mh(t);return Nl(e._query),su(n,e._query).then(n=>new dh(t,r,e,n))}function bh(e){e=pu(e,bu);const t=pu(e.firestore,Ou),n=Pu(t),r=new mh(t);return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await Ro(e,t,!0),i=new ic(t,r.ir),s=i.sc(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=Ua(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await Zc(e),t,n)),n.promise}(n,e._query).then(n=>new dh(t,r,e,n))}function Ih(e){e=pu(e,bu);const t=pu(e.firestore,Ou),n=Pu(t),r=new mh(t);return su(n,e._query,{source:"server"}).then(n=>new dh(t,r,e,n))}function _h(e,t,n){e=pu(e,wu);const r=pu(e.firestore,Ou),i=nh(e.converter,t,n);return Ah(r,[al(ol(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,gr.none())])}function Th(e,t,n,...r){e=pu(e,wu);const i=pu(e.firestore,Ou),s=ol(i);let a;return a="string"==typeof(t=Object(o.p)(t))||t instanceof Yu?gl(s,"updateDoc",e._key,t,n,r):pl(s,"updateDoc",e._key,t),Ah(i,[a.toMutation(e._key,gr.exists(!0))])}function Eh(e){return Ah(pu(e.firestore,Ou),[new Ar(e._key,gr.none())])}function Sh(e,t){const n=pu(e.firestore,Ou),r=Eu(e),i=nh(e.converter,t);return Ah(n,[al(ol(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,gr.exists(!1))]).then(()=>r)}function kh(e,...t){var n,r,i;e=Object(o.p)(e);let s={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||Au(t[a])||(s=t[a],a++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Au(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let u,l,h;if(e instanceof wu)l=pu(e.firestore,Ou),h=_n(e._key.path),u={next:n=>{t[a]&&t[a](Nh(l,e,n))},error:t[a+1],complete:t[a+2]};else{const n=pu(e,bu);l=pu(n.firestore,Ou),h=n._query;const r=new mh(l);u={next:e=>{t[a]&&t[a](new dh(l,r,n,e))},error:t[a+1],complete:t[a+2]},Nl(e._query)}return function(e,t,n,r){const i=new Bc(r),s=new Ja(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>$a(await ru(e),s)),()=>{i.Dc(),e.asyncQueue.enqueueAndForget(async()=>Wa(await ru(e),s))}}(Pu(l),h,c,u)}function Ch(e,t){return function(e,t){const n=new Bc(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){I(e).ku.add(t),t.next()}(await ru(e),n)),()=>{n.Dc(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){I(e).ku.delete(t)}(await ru(e),n))}}(Pu(e=pu(e,Ou)),Au(t)?t:{next:t})}function Ah(e,t){return function(e,t){const n=new E;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Lc(e);try{const e=await function(e,t){const n=I(e),r=j.now(),i=t.reduce((e,t)=>e.add(t.key),Qn());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Un(),c=Qn();return n.Zi.getEntries(e,i).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(c=c.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(i=>{s=i;const o=[];for(const e of t){const t=Ir(e,s.get(e.key).overlayedDocument);null!=t&&o.push(new Er(e.key,t,Ut(t.value.mapValue),gr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(s,c);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:zn(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new et(M)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Tc(r,e.changes),await ka(r.remoteStore)}catch(e){const t=Ua(e,"Failed to persist write");n.reject(t)}}(await tu(e),t,n)),n.promise}(Pu(e),t)}function Nh(e,t,n){const r=n.docs.get(t._key),i=new mh(e);return new lh(e,i,t._key,r,new uh(n.hasPendingWrites,n.fromCache),t.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(e){return Oh(e,{count:oh()})}function Oh(e,t){const n=pu(e.firestore,Ou),r=Pu(n),i=function(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r));return n}(t,(e,t)=>new xr(t,e._aggregateType,e._internalFieldPath));return function(e,t,n){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>{try{const i=await nu(e);r.resolve(async function(e,t,n){var r;const i=I(e),{request:s,du:o}=function(e,t,n){const r=Ei(e,t),i={},s=[];let o=0;return n.forEach(e=>{const t="aggregate_"+o++;i[t]=e.alias,"count"===e.yt?s.push({alias:t,count:{}}):"avg"===e.yt?s.push({alias:t,avg:{field:Ni(e.fieldPath)}}):"sum"===e.yt&&s.push({alias:t,sum:{field:Ni(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:s,structuredQuery:r.structuredQuery},parent:r.parent},du:i}}(i.serializer,An(t),n),a=s.parent;i.connection.po||delete s.parent;const c=(await i.vo("RunAggregationQuery",a,s,1)).filter(e=>!!e.result);w(1===c.length);const u=null===(r=c[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(u).reduce((e,t)=>(e[o[t]]=u[t],e),{})}(i,t,n))}catch(e){r.reject(e)}}),r.promise}(r,e._query,i).then(t=>function(e,t,n){const r=new mh(e);return new Hu(t,r,n)}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,e,t))}class Rh{constructor(e){this.kind="memory",this._onlineComponentProvider=new Uc,(null==e?void 0:e.garbageCollector)?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=new Mc}toJSON(){return{kind:this.kind}}}class xh{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=Bh(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class Ph{constructor(){this.kind="memoryEager",this._offlineComponentProvider=new Mc}toJSON(){return{kind:this.kind}}}class Lh{constructor(e){this.kind="memoryLru",this._offlineComponentProvider=new Fc(e)}toJSON(){return{kind:this.kind}}}function Mh(){return new Ph}function Fh(e){return new Lh(null==e?void 0:e.cacheSizeBytes)}function Vh(e){return new Rh(e)}function jh(e){return new xh(e)}class Uh{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Uc,this._offlineComponentProvider=new Vc(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}class qh{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=new Uc,this._offlineComponentProvider=new jc(this._onlineComponentProvider,null==e?void 0:e.cacheSizeBytes)}}function Bh(e){return new Uh(null==e?void 0:e.forceOwnership)}function zh(){return new qh}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gh={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=ol(e)}set(e,t,n){this._verifyNotCommitted();const r=$h(e,this._firestore),i=nh(r.converter,t,n),s=al(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,gr.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=$h(e,this._firestore);let s;return s="string"==typeof(t=Object(o.p)(t))||t instanceof Yu?gl(this._dataReader,"WriteBatch.update",i._key,t,n,r):pl(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,gr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=$h(e,this._firestore);return this._mutations=this._mutations.concat(new Ar(t._key,gr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new T(_.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function $h(e,t){if((e=Object(o.p)(e)).firestore!==t)throw new T(_.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wh extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=ol(e)}get(e){const t=$h(e,this._firestore),n=new rh(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return v();const r=e[0];if(r.isFoundDocument())return new kl(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new kl(this._firestore,n,t._key,null,t.converter);throw v()})}set(e,t,n){const r=$h(e,this._firestore),i=nh(r.converter,t,n),s=al(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=$h(e,this._firestore);let s;return s="string"==typeof(t=Object(o.p)(t))||t instanceof Yu?gl(this._dataReader,"Transaction.update",i._key,t,n,r):pl(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=$h(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=$h(e,this._firestore),n=new mh(this._firestore);return super.get(e).then(e=>new lh(this._firestore,n,t._key,e._document,new uh(!1,!1),t.converter))}}function Hh(e,t,n){e=pu(e,Ou);const r=Object.assign(Object.assign({},Gh),n);return function(e){if(e.maxAttempts<1)throw new T(_.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new E;return e.asyncQueue.enqueueAndForget(async()=>{const i=await nu(e);new Kc(e.asyncQueue,i,n,t,r).run()}),r.promise}(Pu(e),n=>t(new Wh(e,n)),r)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qh(){return new cl("deleteField")}function Yh(){return new ll("serverTimestamp")}function Jh(...e){return new hl("arrayUnion",e)}function Xh(...e){return new dl("arrayRemove",e)}function Zh(e){return new fl("increment",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(e){return Pu(e=pu(e,Ou)),new Kh(e,t=>Ah(e,t))
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function td(e,t){var n;const r=Pu(e=pu(e,Ou));if(!r._uninitializedComponentsProvider||"memory"===(null===(n=r._uninitializedComponentsProvider)||void 0===n?void 0:n._offlineKind))return m("Cannot enable indexes when persistence is disabled"),Promise.resolve();const i=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new T(_.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const e of t.indexes){const t=nd(e,"collectionGroup"),r=[];if(Array.isArray(e.fields))for(const t of e.fields){const e=Tl("setIndexConfiguration",nd(t,"fieldPath"));"CONTAINS"===t.arrayConfig?r.push(new Y(e,2)):"ASCENDING"===t.order?r.push(new Y(e,0)):"DESCENDING"===t.order&&r.push(new Y(e,1))}n.push(new $($.UNKNOWN_ID,t,r,X.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue(async()=>async function(e,t){const n=I(e),r=n.indexManager,i=[];return n.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(n=>
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e,t,n,r,i){e=[...e],t=[...t],e.sort(n),t.sort(n);const s=e.length,o=t.length;let a=0,c=0;for(;a<o&&c<s;){const s=n(e[c],t[a]);s<0?i(e[c++]):s>0?r(t[a++]):(a++,c++)}for(;a<o;)r(t[a++]);for(;c<s;)i(e[c++])}(n,t,Q,t=>{i.push(r.addFieldIndex(e,t))},t=>{i.push(r.deleteFieldIndex(e,t))})).next(()=>oe.waitFor(i)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(await Zc(e),t))}(r,i)}function nd(e,t){if("string"!=typeof e[t])throw new T(_.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}!function(e,t=!0){!function(e){l=e}(r.SDK_VERSION),Object(r._registerComponent)(new i.a("firestore",(e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),s=new Ou(new A(e.getProvider("auth-internal")),new R(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new T(_.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vt(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),s._setSettings(r),s},"PUBLIC").setMultipleInstances(!0)),Object(r.registerVersion)(c,"3.13.0",e),Object(r.registerVersion)(c,"3.13.0","esm2017")}()}).call(this,n(11))},function(e,t,n){"use strict";n.r(t),n.d(t,"FirebaseError",(function(){return s.c})),n.d(t,"SDK_VERSION",(function(){return V})),n.d(t,"_DEFAULT_ENTRY_NAME",(function(){return S})),n.d(t,"_addComponent",(function(){return N})),n.d(t,"_addOrOverwriteComponent",(function(){return D})),n.d(t,"_apps",(function(){return C})),n.d(t,"_clearComponents",(function(){return P})),n.d(t,"_components",(function(){return A})),n.d(t,"_getProvider",(function(){return R})),n.d(t,"_registerComponent",(function(){return O})),n.d(t,"_removeServiceInstance",(function(){return x})),n.d(t,"deleteApp",(function(){return B})),n.d(t,"getApp",(function(){return U})),n.d(t,"getApps",(function(){return q})),n.d(t,"initializeApp",(function(){return j})),n.d(t,"onLog",(function(){return G})),n.d(t,"registerVersion",(function(){return z})),n.d(t,"setLogLevel",(function(){return K}));var r=n(6),i=n(5),s=n(0);let o,a;const c=new WeakMap,u=new WeakMap,l=new WeakMap,h=new WeakMap,d=new WeakMap;let f={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return u.get(e);if("objectStoreNames"===t)return e.objectStoreNames||l.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return m(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(y(this),t),m(c.get(this))}:function(...t){return m(e.apply(y(this),t))}:function(t,...n){const r=e.call(y(this),t,...n);return l.set(r,t.sort?t.sort():[t]),m(r)}}function g(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(u.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});u.set(e,t)}(e),t=e,(o||(o=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,f):e);var t}function m(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(m(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&c.set(t,e)}).catch(()=>{}),d.set(t,e),t}(e);if(h.has(e))return h.get(e);const t=g(e);return t!==e&&(h.set(e,t),d.set(t,e)),t}const y=e=>d.get(e);const v=["get","getKey","getAll","getAllKeys","count"],w=["put","add","delete","clear"],b=new Map;function I(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(b.get(t))return b.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=w.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const s=async function(e,...t){const s=this.transaction(e,i?"readwrite":"readonly");let o=s.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&s.done]))[0]};return b.set(t,s),s}f=(e=>({...e,get:(t,n,r)=>I(t,n)||e.get(t,n,r),has:(t,n)=>!!I(t,n)||e.has(t,n)}))(f);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class _{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const T="@firebase/app",E=new i.b("@firebase/app"),S="[DEFAULT]",k={[T]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},C=new Map,A=new Map;function N(e,t){try{e.container.addComponent(t)}catch(n){E.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function D(e,t){e.container.addOrOverwriteComponent(t)}function O(e){const t=e.name;if(A.has(t))return E.debug(`There were multiple attempts to register component ${t}.`),!1;A.set(t,e);for(const t of C.values())N(t,e);return!0}function R(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function x(e,t,n=S){R(e,t).clearInstance(n)}function P(){A.clear()}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},M=new s.b("app","Firebase",L);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class F{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.a("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw M.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V="9.23.0";function j(e,t={}){let n=e;if("object"!=typeof t){t={name:t}}const i=Object.assign({name:S,automaticDataCollectionEnabled:!1},t),o=i.name;if("string"!=typeof o||!o)throw M.create("bad-app-name",{appName:String(o)});if(n||(n=Object(s.l)()),!n)throw M.create("no-options");const a=C.get(o);if(a){if(Object(s.i)(n,a.options)&&Object(s.i)(i,a.config))return a;throw M.create("duplicate-app",{appName:o})}const c=new r.b(o);for(const e of A.values())c.addComponent(e);const u=new F(n,i,c);return C.set(o,u),u}function U(e=S){const t=C.get(e);if(!t&&e===S&&Object(s.l)())return j();if(!t)throw M.create("no-app",{appName:e});return t}function q(){return Array.from(C.values())}async function B(e){const t=e.name;C.has(t)&&(C.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function z(e,t,n){var i;let s=null!==(i=k[e])&&void 0!==i?i:e;n&&(s+="-"+n);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void E.warn(e.join(" "))}O(new r.a(s+"-version",()=>({library:s,version:t}),"VERSION"))}function G(e,t){if(null!==e&&"function"!=typeof e)throw M.create("invalid-log-argument");Object(i.d)(e,t)}function K(e){Object(i.c)(e)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $="firebase-heartbeat-store";let W=null;function H(){return W||(W=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=m(o);return r&&o.addEventListener("upgradeneeded",e=>{r(m(o.result),e.oldVersion,e.newVersion,m(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore($)}}}).catch(e=>{throw M.create("idb-open",{originalErrorMessage:e.message})})),W}async function Q(e,t){try{const n=(await H()).transaction($,"readwrite"),r=n.objectStore($);await r.put(t,Y(e)),await n.done}catch(e){if(e instanceof s.c)E.warn(e.message);else{const t=M.create("idb-set",{originalErrorMessage:null==e?void 0:e.message});E.warn(t.message)}}}function Y(e){return`${e.name}!${e.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Z(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=X();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=X(),{heartbeatsToSend:t,unsentEntries:n}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),ee(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ee(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Object(s.e)(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function X(){return(new Date).toISOString().substring(0,10)}class Z{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Object(s.v)()&&Object(s.C)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){return await async function(e){try{const t=await H();return await t.transaction($).objectStore($).get(Y(e))}catch(e){if(e instanceof s.c)E.warn(e.message);else{const t=M.create("idb-get",{originalErrorMessage:null==e?void 0:e.message});E.warn(t.message)}}}(this.app)||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Q(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Q(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function ee(e){return Object(s.e)(JSON.stringify({version:2,heartbeats:e})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;te="",O(new r.a("platform-logger",e=>new _(e),"PRIVATE")),O(new r.a("heartbeat",e=>new J(e),"PRIVATE")),z(T,"0.9.13",te),z(T,"0.9.13","esm2017"),z("fire-js","")},function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return lr})),n.d(t,"b",(function(){return dr})),n.d(t,"c",(function(){return hr})),n.d(t,"d",(function(){return pr})),n.d(t,"e",(function(){return vr})),n.d(t,"f",(function(){return yr})),n.d(t,"g",(function(){return fr})),n.d(t,"h",(function(){return gr})),n.d(t,"i",(function(){return mr})),n.d(t,"j",(function(){return cr})),n.d(t,"k",(function(){return ur}));var r,i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{},s={},o=o||{},a=i||self;function c(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function u(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var l="closure_uid_"+(1e9*Math.random()>>>0),h=0;function d(e,t,n){return e.call.apply(e.bind,arguments)}function f(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function p(e,t,n){return(p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?d:f).apply(null,arguments)}function g(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function m(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function y(){this.s=this.s,this.o=this.o}y.prototype.s=!1,y.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,l)&&e[l]||(e[l]=++h))},y.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const v=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function w(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function b(e,t){for(let t=1;t<arguments.length;t++){const n=arguments[t];if(c(n)){const t=e.length||0,r=n.length||0;e.length=t+r;for(let i=0;i<r;i++)e[t+i]=n[i]}else e.push(n)}}function I(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var _=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{a.addEventListener("test",()=>{},t),a.removeEventListener("test",()=>{},t)}catch(e){}return e}();function T(e){return/^[\s\xa0]*$/.test(e)}function E(){var e=a.navigator;return e&&(e=e.userAgent)?e:""}function S(e){return-1!=E().indexOf(e)}function k(e){return k[" "](e),e}k[" "]=function(){};var C,A,N,D=S("Opera"),O=S("Trident")||S("MSIE"),R=S("Edge"),x=R||O,P=S("Gecko")&&!(-1!=E().toLowerCase().indexOf("webkit")&&!S("Edge"))&&!(S("Trident")||S("MSIE"))&&!S("Edge"),L=-1!=E().toLowerCase().indexOf("webkit")&&!S("Edge");function M(){var e=a.document;return e?e.documentMode:void 0}e:{var F="",V=(A=E(),P?/rv:([^\);]+)(\)|;)/.exec(A):R?/Edge\/([\d\.]+)/.exec(A):O?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(A):L?/WebKit\/(\S+)/.exec(A):D?/(?:Version)[ \/]?(\S+)/.exec(A):void 0);if(V&&(F=V?V[1]:""),O){var j=M();if(null!=j&&j>parseFloat(F)){C=String(j);break e}}C=F}if(a.document&&O){var U=M();N=U||(parseInt(C,10)||void 0)}else N=void 0;var q=N;function B(e,t){if(I.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(P){e:{try{k(t.nodeName);var i=!0;break e}catch(e){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:z[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&B.$.h.call(this)}}m(B,I);var z={2:"touch",3:"pen",4:"mouse"};B.prototype.h=function(){B.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var G="closure_listenable_"+(1e6*Math.random()|0),K=0;function $(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++K,this.fa=this.ia=!1}function W(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function H(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function Q(e){const t={};for(const n in e)t[n]=e[n];return t}const Y="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function J(e,t){let n,r;for(let t=1;t<arguments.length;t++){for(n in r=arguments[t],r)e[n]=r[n];for(let t=0;t<Y.length;t++)n=Y[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function X(e){this.src=e,this.g={},this.h=0}function Z(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=v(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(W(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ee(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.fa&&s.listener==t&&s.capture==!!n&&s.la==r)return i}return-1}X.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ee(e,t,r,i);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new $(t,this.src,s,!!r,i)).ia=n,e.push(t)),t};var te="closure_lm_"+(1e6*Math.random()|0),ne={};function re(e,t,n,r,i){if(r&&r.once)return function e(t,n,r,i,s){if(Array.isArray(n)){for(var o=0;o<n.length;o++)e(t,n[o],r,i,s);return null}return r=le(r),t&&t[G]?t.P(n,r,u(i)?!!i.capture:!!i,s):ie(t,n,r,!0,i,s)}(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)re(e,t[s],n,r,i);return null}return n=le(n),e&&e[G]?e.O(t,n,u(r)?!!r.capture:!!r,i):ie(e,t,n,!1,r,i)}function ie(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=u(i)?!!i.capture:!!i,a=ce(e);if(a||(e[te]=a=new X(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){const e=ae;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)_||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(oe(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function se(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[G])Z(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(oe(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=ce(t))?(Z(n,e),0==n.h&&(n.src=null,t[te]=null)):W(e)}}}function oe(e){return e in ne?ne[e]:ne[e]="on"+e}function ae(e,t){if(e.fa)e=!0;else{t=new B(t,this);var n=e.listener,r=e.la||e.src;e.ia&&se(e),e=n.call(r,t)}return e}function ce(e){return(e=e[te])instanceof X?e:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function le(e){return"function"==typeof e?e:(e[ue]||(e[ue]=function(t){return e.handleEvent(t)}),e[ue])}function he(){y.call(this),this.i=new X(this),this.S=this,this.J=null}function de(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new I(t,e);else if(t instanceof I)t.target=t.target||e;else{var i=t;J(t=new I(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=fe(o,r,!0,t)&&i}if(i=fe(o=t.g=e,r,!0,t)&&i,i=fe(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=fe(o=t.g=n[s],r,!1,t)&&i}function fe(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,c=o.la||o.src;o.ia&&Z(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}m(he,y),he.prototype[G]=!0,he.prototype.removeEventListener=function(e,t,n,r){!function e(t,n,r,i,s){if(Array.isArray(n))for(var o=0;o<n.length;o++)e(t,n[o],r,i,s);else i=u(i)?!!i.capture:!!i,r=le(r),t&&t[G]?(t=t.i,(n=String(n).toString())in t.g&&(-1<(r=ee(o=t.g[n],r,i,s))&&(W(o[r]),Array.prototype.splice.call(o,r,1),0==o.length&&(delete t.g[n],t.h--)))):t&&(t=ce(t))&&(n=t.g[n.toString()],t=-1,n&&(t=ee(n,r,i,s)),(r=-1<t?n[t]:null)&&se(r))}(this,e,t,n,r)},he.prototype.N=function(){if(he.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)W(n[r]);delete t.g[e],t.h--}}this.J=null},he.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},he.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var pe=a.JSON.stringify;function ge(){var e=_e;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var me=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ye,e=>e.reset());class ye{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function ve(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function we(e){a.setTimeout(()=>{throw e},0)}let be,Ie=!1,_e=new class{constructor(){this.h=this.g=null}add(e,t){const n=me.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},Te=()=>{const e=a.Promise.resolve(void 0);be=()=>{e.then(Ee)}};var Ee=()=>{for(var e;e=ge();){try{e.h.call(e.g)}catch(e){we(e)}var t=me;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Ie=!1};function Se(e,t){he.call(this),this.h=e||1,this.g=t||a,this.j=p(this.qb,this),this.l=Date.now()}function ke(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function Ce(e,t,n){if("function"==typeof e)n&&(e=p(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=p(e.handleEvent,e)}return 2147483647<Number(t)?-1:a.setTimeout(e,t||0)}m(Se,he),(r=Se.prototype).ga=!1,r.T=null,r.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),de(this,"tick"),this.ga&&(ke(this),this.start()))}},r.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.N=function(){Se.$.N.call(this),ke(this),delete this.g};class Ae extends y{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=Ce(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.j);const n=t.h;t.h=null,t.m.apply(null,n)}(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ne(e){y.call(this),this.h=e,this.g={}}m(Ne,y);var De=[];function Oe(e,t,n,r){Array.isArray(n)||(n&&(De[0]=n.toString()),n=De);for(var i=0;i<n.length;i++){var s=re(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function Re(e){H(e.g,(function(e,t){this.g.hasOwnProperty(t)&&se(e)}),e),e.g={}}function xe(){this.g=!0}function Pe(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return pe(n)}catch(e){return t}}(e,n)+(r?" "+r:"")}))}Ne.prototype.N=function(){Ne.$.N.call(this),Re(this)},Ne.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xe.prototype.Ea=function(){this.g=!1},xe.prototype.info=function(){};var Le={},Me=null;function Fe(){return Me=Me||new he}function Ve(e){I.call(this,Le.Ta,e)}function je(e){const t=Fe();de(t,new Ve(t))}function Ue(e,t){I.call(this,Le.STAT_EVENT,e),this.stat=t}function qe(e){const t=Fe();de(t,new Ue(t,e))}function Be(e,t){I.call(this,Le.Ua,e),this.size=t}function ze(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return a.setTimeout((function(){e()}),t)}Le.Ta="serverreachability",m(Ve,I),Le.STAT_EVENT="statevent",m(Ue,I),Le.Ua="timingevent",m(Be,I);var Ge={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Ke={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function $e(){}function We(e){return e.h||(e.h=e.i())}function He(){}$e.prototype.h=null;var Qe,Ye={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Je(){I.call(this,"d")}function Xe(){I.call(this,"c")}function Ze(){}function et(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new Ne(this),this.P=nt,e=x?125:void 0,this.V=new Se(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new tt}function tt(){this.i=null,this.g="",this.h=!1}m(Je,I),m(Xe,I),m(Ze,$e),Ze.prototype.g=function(){return new XMLHttpRequest},Ze.prototype.i=function(){return{}},Qe=new Ze;var nt=45e3,rt={},it={};function st(e,t,n){e.L=1,e.v=Et(wt(t)),e.s=n,e.S=!0,ot(e,null)}function ot(e,t){e.G=Date.now(),lt(e),e.A=wt(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),Ft(n.i,"t",r),e.C=0,n=e.l.J,e.h=new tt,e.g=Mn(e.l,n?t:null,!e.s),0<e.O&&(e.M=new Ae(p(e.Pa,e,e.g),e.O)),Oe(e.U,e.g,"readystatechange",e.nb),t=e.I?Q(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),je(),function(e,t,n,r,i,s){e.info((function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var u=a[c].split("=");if(1<u.length){var l=u[0];u=u[1];var h=l.split("_");o=2<=h.length&&"type"==h[1]?o+(l+"=")+u+"&":o+(l+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.W,e.s)}function at(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function ct(e,t,n){let r,i=!0;for(;!e.J&&e.C<n.length;){if(r=ut(e,n),r==it){4==t&&(e.o=4,qe(14),i=!1),Pe(e.j,e.m,null,"[Incomplete Response]");break}if(r==rt){e.o=4,qe(15),Pe(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Pe(e.j,e.m,r,null),gt(e,r)}at(e)&&r!=it&&r!=rt&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,qe(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),An(t),t.M=!0,qe(11))):(Pe(e.j,e.m,n,"[Invalid Chunked Response]"),pt(e),ft(e))}function ut(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?it:(n=Number(t.substring(n,r)),isNaN(n)?rt:(r+=1)+n>t.length?it:(t=t.slice(r,r+n),e.C=r+n,t))}function lt(e){e.Y=Date.now()+e.P,ht(e,e.P)}function ht(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ze(p(e.lb,e),t)}function dt(e){e.B&&(a.clearTimeout(e.B),e.B=null)}function ft(e){0==e.l.H||e.J||On(e.l,e)}function pt(e){dt(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ke(e.V),Re(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function gt(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||zt(n.i,e)))if(!e.K&&zt(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(e){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;Dn(n),bn(n)}Cn(n),qe(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=ze(p(n.ib,n),6e3));if(1>=Bt(n.i)&&n.oa){try{n.oa()}catch(e){}n.oa=void 0}}else xn(n,11)}else if((e.K||n.g==e)&&Dn(n),!T(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const l=u[5];null!=l&&"number"==typeof l&&0<l&&(r=1.5*l,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(Gt(s,s.h),s.h=null))}if(r.F){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,Tt(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=Ln(r,r.J?r.pa:null,r.Y),o.K){Kt(r.i,o);var a=o,c=r.L;c&&a.setTimeout(c),a.B&&(dt(a),lt(a)),r.g=o}else kn(r);0<n.j.length&&_n(n)}else"stop"!=u[0]&&"close"!=u[0]||xn(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?xn(n,7):wn(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}je()}catch(e){}}function mt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(c(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(c(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(c(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}(r=et.prototype).setTimeout=function(e){this.P=e},r.nb=function(e){e=e.target;const t=this.M;t&&3==fn(e)?t.l():this.Pa(e)},r.Pa=function(e){try{if(e==this.g)e:{const h=fn(this.g);var t=this.g.Ia();this.g.da();if(!(3>h)&&(3!=h||x||this.g&&(this.h.h||this.g.ja()||pn(this.g)))){this.J||4!=h||7==t||je(),dt(this);var n=this.g.da();this.ca=n;t:if(at(this)){var r=pn(this.g);e="";var i=r.length,s=4==fn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){pt(this),ft(this);var o="";break t}this.h.i=new a.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o}))}(this.j,this.u,this.A,this.m,this.W,h,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var c,u=this.g;if((c=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(c)){var l=c;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,qe(12),pt(this),ft(this);break e}Pe(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gt(this,n)}this.S?(ct(this,h,o),x&&this.i&&3==h&&(Oe(this.U,this.V,"tick",this.mb),this.V.start())):(Pe(this.j,this.m,o,null),gt(this,o)),4==h&&pt(this),this.i&&!this.J&&(4==h?On(this.l,this):(this.i=!1,lt(this)))}else(function(e){const t={};e=(e.g&&2<=fn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=ve(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,qe(12)):(this.o=0,qe(13)),pt(this),ft(this)}}}catch(e){}},r.mb=function(){if(this.g){var e=fn(this.g),t=this.g.ja();this.C<t.length&&(dt(this),ct(this,e,t),this.i&&4!=e&&lt(this))}},r.cancel=function(){this.J=!0,pt(this)},r.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.L&&(je(),qe(17)),pt(this),this.o=2,ft(this)):ht(this,this.Y-e)};var yt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function vt(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof vt){this.h=e.h,bt(this,e.j),this.s=e.s,this.g=e.g,It(this,e.m),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),_t(this,n),this.o=e.o}else e&&(t=String(e).match(yt))?(this.h=!1,bt(this,t[1]||"",!0),this.s=St(t[2]||""),this.g=St(t[3]||"",!0),It(this,t[4]),this.l=St(t[5]||"",!0),_t(this,t[6]||"",!0),this.o=St(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function wt(e){return new vt(e)}function bt(e,t,n){e.j=n?St(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function It(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function _t(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(Pt(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(Lt(this,t),Ft(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=kt(t,Ot)),e.i=new xt(t,e.h))}function Tt(e,t,n){e.i.set(t,n)}function Et(e){return Tt(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function St(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function kt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,Ct),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ct(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}vt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(kt(t,At,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(kt(t,At,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(kt(n,"/"==n.charAt(0)?Dt:Nt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",kt(n,Rt)),e.join("")};var At=/[#\/\?@]/g,Nt=/[#\?:]/g,Dt=/[#\?]/g,Ot=/[#\?@]/g,Rt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Pt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function Lt(e,t){Pt(e),t=Vt(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Mt(e,t){return Pt(e),t=Vt(e,t),e.g.has(t)}function Ft(e,t,n){Lt(e,t),0<n.length&&(e.i=null,e.g.set(Vt(e,t),w(n)),e.h+=n.length)}function Vt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(r=xt.prototype).add=function(e,t){Pt(this),this.i=null,e=Vt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Pt(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},r.ta=function(){Pt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},r.Z=function(e){Pt(this);let t=[];if("string"==typeof e)Mt(this,e)&&(t=t.concat(this.g.get(Vt(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},r.set=function(e,t){return Pt(this),this.i=null,Mt(this,e=Vt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;""!==o[r]&&(i+="="+encodeURIComponent(String(o[r]))),e.push(i)}}return this.i=e.join("&")};function jt(e){this.l=e||Ut,a.PerformanceNavigationTiming?e=0<(e=a.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(a.g&&a.g.Ka&&a.g.Ka()&&a.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var Ut=10;function qt(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Bt(e){return e.h?1:e.g?e.g.size:0}function zt(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Gt(e,t){e.g?e.g.add(t):e.h=t}function Kt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function $t(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return w(e.i)}jt.prototype.cancel=function(){if(this.i=$t(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};function Wt(){this.g=new class{stringify(e){return a.JSON.stringify(e,void 0)}parse(e){return a.JSON.parse(e,void 0)}}}function Ht(e,t,n){const r=n||"";try{mt(e,(function(e,n){let i=e;u(e)&&(i=pe(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(e){throw t.push(r+"type="+encodeURIComponent("_badmap")),e}}function Qt(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(e){}}function Yt(e){this.l=e.fc||null,this.j=e.ob||!1}function Jt(e,t){he.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Xt,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}m(Yt,$e),Yt.prototype.g=function(){return new Jt(this.l,this.j)},Yt.prototype.i=function(e){return function(){return e}}({}),m(Jt,he);var Xt=0;function Zt(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function en(e){e.readyState=4,e.l=null,e.j=null,e.A=null,tn(e)}function tn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=Jt.prototype).open=function(e,t){if(this.readyState!=Xt)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,tn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||a).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,en(this)),this.readyState=Xt},r.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tn(this)),this.g&&(this.readyState=3,tn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==a.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Zt(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},r.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?en(this):tn(this),3==this.readyState&&Zt(this)}},r.Za=function(e){this.g&&(this.response=this.responseText=e,en(this))},r.Ya=function(e){this.g&&(this.response=e,en(this))},r.ka=function(){this.g&&en(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Jt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var nn=a.JSON.parse;function rn(e){he.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sn,this.L=this.M=!1}m(rn,he);var sn="",on=/^https?$/i,an=["POST","PUT"];function cn(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,un(e),hn(e)}function un(e){e.F||(e.F=!0,de(e,"complete"),de(e,"error"))}function ln(e){if(e.h&&void 0!==o&&(!e.C[1]||4!=fn(e)||2!=e.da()))if(e.v&&4==fn(e))Ce(e.La,0,e);else if(de(e,"readystatechange"),4==fn(e)){e.h=!1;try{const o=e.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===o){var i=String(e.I).match(yt)[1]||null;!i&&a.self&&a.self.location&&(i=a.self.location.protocol.slice(0,-1)),r=!on.test(i?i.toLowerCase():"")}n=r}if(n)de(e,"complete"),de(e,"success");else{e.m=6;try{var s=2<fn(e)?e.g.statusText:""}catch(e){s=""}e.j=s+" ["+e.da()+"]",un(e)}}finally{hn(e)}}}function hn(e,t){if(e.g){dn(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||de(e,"ready");try{n.onreadystatechange=r}catch(e){}}}function dn(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(a.clearTimeout(e.A),e.A=null)}function fn(e){return e.g?e.g.readyState:0}function pn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case sn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function gn(e){let t="";return H(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function mn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=gn(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):Tt(e,t,n))}function yn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function vn(e){this.Ga=0,this.j=[],this.l=new xe,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=yn("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=yn("baseRetryDelayMs",5e3,e),this.hb=yn("retryDelaySeedMs",1e4,e),this.eb=yn("forwardChannelMaxRetries",2,e),this.xa=yn("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new jt(e&&e.concurrentRequestLimit),this.Ja=new Wt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function wn(e){if(In(e),3==e.H){var t=e.W++,n=wt(e.I);if(Tt(n,"SID",e.K),Tt(n,"RID",t),Tt(n,"TYPE","terminate"),En(e,n),(t=new et(e,e.l,t)).L=2,t.v=Et(wt(n)),n=!1,a.navigator&&a.navigator.sendBeacon)try{n=a.navigator.sendBeacon(t.v.toString(),"")}catch(e){}!n&&a.Image&&((new Image).src=t.v,n=!0),n||(t.g=Mn(t.l,null),t.g.ha(t.v)),t.G=Date.now(),lt(t)}Pn(e)}function bn(e){e.g&&(An(e),e.g.cancel(),e.g=null)}function In(e){bn(e),e.u&&(a.clearTimeout(e.u),e.u=null),Dn(e),e.i.cancel(),e.m&&("number"==typeof e.m&&a.clearTimeout(e.m),e.m=null)}function _n(e){if(!qt(e.i)&&!e.m){e.m=!0;var t=e.Na;be||Te(),Ie||(be(),Ie=!0),_e.add(t,e),e.C=0}}function Tn(e,t){var n;n=t?t.m:e.W++;const r=wt(e.I);Tt(r,"SID",e.K),Tt(r,"RID",n),Tt(r,"AID",e.V),En(e,r),e.o&&e.s&&mn(r,e.o,e.s),n=new et(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=Sn(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Gt(e.i,n),st(n,r,t)}function En(e,t){e.na&&H(e.na,(function(e,n){Tt(t,n,e)})),e.h&&mt({},(function(e,n){Tt(t,n,e)}))}function Sn(e,t,n){n=Math.min(e.j.length,n);var r=e.h?p(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].g;const a=i[o].map;if(n-=t,0>n)t=Math.max(0,i[o].g-100),s=!1;else try{Ht(a,e,"req"+n+"_")}catch(e){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function kn(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;be||Te(),Ie||(be(),Ie=!0),_e.add(t,e),e.A=0}}function Cn(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=ze(p(e.Ma,e),Rn(e,e.A)),e.A++,!0)}function An(e){null!=e.B&&(a.clearTimeout(e.B),e.B=null)}function Nn(e){e.g=new et(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=wt(e.wa);Tt(t,"RID","rpc"),Tt(t,"SID",e.K),Tt(t,"AID",e.V),Tt(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&Tt(t,"TO",e.qa),Tt(t,"TYPE","xmlhttp"),En(e,t),e.o&&e.s&&mn(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=Et(wt(t)),n.s=null,n.S=!0,ot(n,e)}function Dn(e){null!=e.v&&(a.clearTimeout(e.v),e.v=null)}function On(e,t){var n=null;if(e.g==t){Dn(e),An(e),e.g=null;var r=2}else{if(!zt(e.i,t))return;n=t.F,Kt(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var i=e.C;de(r=Fe(),new Be(r,n)),_n(e)}else kn(e);else if(3==(i=t.o)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(Bt(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=ze(p(e.Na,e,t),Rn(e,e.C)),e.C++,!0))}(e,t)||2==r&&Cn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:xn(e,5);break;case 4:xn(e,10);break;case 3:xn(e,6);break;default:xn(e,2)}}function Rn(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function xn(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=p(e.pb,e);n||(n=new vt("//www.google.com/images/cleardot.gif"),a.location&&"http"==a.location.protocol||bt(n,"https"),Et(n)),function(e,t){const n=new xe;if(a.Image){const r=new Image;r.onload=g(Qt,n,r,"TestLoadImage: loaded",!0,t),r.onerror=g(Qt,n,r,"TestLoadImage: error",!1,t),r.onabort=g(Qt,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=g(Qt,n,r,"TestLoadImage: timeout",!1,t),a.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else qe(2);e.H=0,e.h&&e.h.za(t),Pn(e),In(e)}function Pn(e){if(e.H=0,e.ma=[],e.h){const t=$t(e.i);0==t.length&&0==e.j.length||(b(e.ma,t),b(e.ma,e.j),e.i.i.length=0,w(e.j),e.j.length=0),e.h.ya()}}function Ln(e,t,n){var r=n instanceof vt?wt(n):new vt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),It(r,r.m);else{var i=a.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var s=new vt(null);r&&bt(s,r),t&&(s.g=t),i&&It(s,i),n&&(s.l=n),r=s}return n=e.F,t=e.Da,n&&t&&Tt(r,n,t),Tt(r,"VER",e.ra),En(e,r),r}function Mn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new rn(new Yt({ob:!0})):new rn(e.va)).Oa(e.J),t}function Fn(){}function Vn(){if(O&&!(10<=Number(q)))throw Error("Environmental error: no available transport.")}function jn(e,t){he.call(this),this.g=new vn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!T(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Bn(this)}function Un(e){Je.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function qn(){Xe.call(this),this.status=1}function Bn(e){this.g=e}function zn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Gn(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],o=t+(s^n&(i^s))+r[0]+3614090360&4294967295;o=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(o<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((s=(t=n+((o=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((i=s+((o=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function Kn(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}(r=rn.prototype).Oa=function(e){this.M=e},r.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Qe.g(),this.C=this.u?We(this.u):We(Qe),this.g.onreadystatechange=p(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(e){return void cn(this,e)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=a.FormData&&e instanceof a.FormData,!(0<=v(an,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[e,t]of n)this.g.setRequestHeader(e,t);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{dn(this),0<this.B&&((this.L=function(e){return O&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=p(this.ua,this)):this.A=Ce(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(e){cn(this,e)}},r.ua=function(){void 0!==o&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,de(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,de(this,"complete"),de(this,"abort"),hn(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),hn(this,!0)),rn.$.N.call(this)},r.La=function(){this.s||(this.G||this.v||this.l?ln(this):this.kb())},r.kb=function(){ln(this)},r.isActive=function(){return!!this.g},r.da=function(){try{return 2<fn(this)?this.g.status:-1}catch(e){return-1}},r.ja=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},r.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),nn(t)}},r.Ia=function(){return this.m},r.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=vn.prototype).ra=8,r.H=1,r.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new et(this,this.l,e);let s=this.s;if(this.U&&(s?(s=Q(s),J(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=Sn(this,i,t),Tt(n=wt(this.I),"RID",e),Tt(n,"CVER",22),this.F&&Tt(n,"X-HTTP-Session-Id",this.F),En(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(gn(s)))+"&"+t:this.o&&mn(n,this.o,s)),Gt(this.i,i),this.bb&&Tt(n,"TYPE","init"),this.P?(Tt(n,"$req",t),Tt(n,"SID","null"),i.aa=!0,st(i,n,null)):st(i,n,t),this.H=2}}else 3==this.H&&(e?Tn(this,e):0==this.j.length||qt(this.i)||Tn(this))},r.Ma=function(){if(this.u=null,Nn(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=ze(p(this.jb,this),e)}},r.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,qe(10),bn(this),Nn(this))},r.ib=function(){null!=this.v&&(this.v=null,bn(this),Cn(this),qe(19))},r.pb=function(e){e?(this.l.info("Successfully pinged google.com"),qe(2)):(this.l.info("Failed to ping google.com"),qe(1))},r.isActive=function(){return!!this.h&&this.h.isActive(this)},(r=Fn.prototype).Ba=function(){},r.Aa=function(){},r.za=function(){},r.ya=function(){},r.isActive=function(){return!0},r.Va=function(){},Vn.prototype.g=function(e,t){return new jn(e,t)},m(jn,he),jn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;qe(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=Ln(e,null,e.Y),_n(e)},jn.prototype.close=function(){wn(this.g)},jn.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=pe(e),e=n);t.j.push(new class{constructor(e,t){this.g=e,this.map=t}}(t.fb++,e)),3==t.H&&_n(t)},jn.prototype.N=function(){this.g.h=null,delete this.j,wn(this.g),delete this.g,jn.$.N.call(this)},m(Un,Je),m(qn,Xe),m(Bn,Fn),Bn.prototype.Ba=function(){de(this.g,"a")},Bn.prototype.Aa=function(e){de(this.g,new Un(e))},Bn.prototype.za=function(e){de(this.g,new qn)},Bn.prototype.ya=function(){de(this.g,"b")},m(zn,(function(){this.blockSize=-1})),zn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},zn.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,s=0;s<t;){if(0==i)for(;s<=n;)Gn(this,e,s),s+=this.blockSize;if("string"==typeof e){for(;s<t;)if(r[i++]=e.charCodeAt(s++),i==this.blockSize){Gn(this,r),i=0;break}}else for(;s<t;)if(r[i++]=e[s++],i==this.blockSize){Gn(this,r),i=0;break}}this.h=i,this.i+=t},zn.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var $n={};function Wn(e){return-128<=e&&128>e?function(e,t){var n=$n;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new Kn([0|e],0>e?-1:0)})):new Kn([0|e],0>e?-1:0)}function Hn(e){if(isNaN(e)||!isFinite(e))return Yn;if(0>e)return tr(Hn(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Qn;return new Kn(t,0)}var Qn=4294967296,Yn=Wn(0),Jn=Wn(1),Xn=Wn(16777216);function Zn(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function er(e){return-1==e.h}function tr(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Kn(n,~e.h).add(Jn)}function nr(e,t){return e.add(tr(t))}function rr(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function ir(e,t){this.g=e,this.h=t}function sr(e,t){if(Zn(t))throw Error("division by zero");if(Zn(e))return new ir(Yn,Yn);if(er(e))return t=sr(tr(e),t),new ir(tr(t.g),tr(t.h));if(er(t))return t=sr(e,tr(t)),new ir(tr(t.g),t.h);if(30<e.g.length){if(er(e)||er(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Jn,r=t;0>=r.X(e);)n=or(n),r=or(r);var i=ar(n,1),s=ar(r,1);for(r=ar(r,2),n=ar(n,2);!Zn(r);){var o=s.add(r);0>=o.X(e)&&(i=i.add(n),s=o),r=ar(r,1),n=ar(n,1)}return t=nr(e,i.R(t)),new ir(i,t)}for(i=Yn;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(s=Hn(n)).R(t);er(o)||0<o.X(e);)o=(s=Hn(n-=r)).R(t);Zn(s)&&(s=Jn),i=i.add(s),e=nr(e,o)}return new ir(i,e)}function or(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Kn(n,e.h)}function ar(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],s=0;s<r;s++)i[s]=0<t?e.D(s+n)>>>t|e.D(s+n+1)<<32-t:e.D(s+n);return new Kn(i,e.h)}(r=Kn.prototype).ea=function(){if(er(this))return-tr(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Qn+r)*t,t*=Qn}return e},r.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Zn(this))return"0";if(er(this))return"-"+tr(this).toString(e);for(var t=Hn(Math.pow(e,6)),n=this,r="";;){var i=sr(n,t).g,s=((0<(n=nr(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Zn(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},r.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},r.X=function(e){return er(e=nr(this,e))?-1:Zn(e)?0:1},r.abs=function(){return er(this)?tr(this):this},r.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var s=r+(65535&this.D(i))+(65535&e.D(i)),o=(s>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Kn(n,-2147483648&n[n.length-1]?-1:0)},r.R=function(e){if(Zn(this)||Zn(e))return Yn;if(er(this))return er(e)?tr(this).R(tr(e)):tr(tr(this).R(e));if(er(e))return tr(this.R(tr(e)));if(0>this.X(Xn)&&0>e.X(Xn))return Hn(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var s=this.D(r)>>>16,o=65535&this.D(r),a=e.D(i)>>>16,c=65535&e.D(i);n[2*r+2*i]+=o*c,rr(n,2*r+2*i),n[2*r+2*i+1]+=s*c,rr(n,2*r+2*i+1),n[2*r+2*i+1]+=o*a,rr(n,2*r+2*i+1),n[2*r+2*i+2]+=s*a,rr(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Kn(n,0)},r.gb=function(e){return sr(this,e).h},r.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Kn(n,this.h&e.h)},r.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Kn(n,this.h|e.h)},r.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Kn(n,this.h^e.h)},Vn.prototype.createWebChannel=Vn.prototype.g,jn.prototype.send=jn.prototype.u,jn.prototype.open=jn.prototype.m,jn.prototype.close=jn.prototype.close,Ge.NO_ERROR=0,Ge.TIMEOUT=8,Ge.HTTP_ERROR=6,Ke.COMPLETE="complete",He.EventType=Ye,Ye.OPEN="a",Ye.CLOSE="b",Ye.ERROR="c",Ye.MESSAGE="d",he.prototype.listen=he.prototype.O,rn.prototype.listenOnce=rn.prototype.P,rn.prototype.getLastError=rn.prototype.Sa,rn.prototype.getLastErrorCode=rn.prototype.Ia,rn.prototype.getStatus=rn.prototype.da,rn.prototype.getResponseJson=rn.prototype.Wa,rn.prototype.getResponseText=rn.prototype.ja,rn.prototype.send=rn.prototype.ha,rn.prototype.setWithCredentials=rn.prototype.Oa,zn.prototype.digest=zn.prototype.l,zn.prototype.reset=zn.prototype.reset,zn.prototype.update=zn.prototype.j,Kn.prototype.add=Kn.prototype.add,Kn.prototype.multiply=Kn.prototype.R,Kn.prototype.modulo=Kn.prototype.gb,Kn.prototype.compare=Kn.prototype.X,Kn.prototype.toNumber=Kn.prototype.ea,Kn.prototype.toString=Kn.prototype.toString,Kn.prototype.getBits=Kn.prototype.D,Kn.fromNumber=Hn,Kn.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return tr(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Hn(Math.pow(n,8)),i=Yn,s=0;s<t.length;s+=8){var o=Math.min(8,t.length-s),a=parseInt(t.substring(s,s+o),n);8>o?(o=Hn(Math.pow(n,o)),i=i.R(o).add(Hn(a))):i=(i=i.R(r)).add(Hn(a))}return i};var cr=s.createWebChannelTransport=function(){return new Vn},ur=s.getStatEventTarget=function(){return Fe()},lr=s.ErrorCode=Ge,hr=s.EventType=Ke,dr=s.Event=Le,fr=s.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},pr=s.FetchXmlHttpFactory=Yt,gr=s.WebChannel=He,mr=s.XhrIo=rn,yr=s.Md5=zn,vr=s.Integer=Kn}).call(this,n(8))},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return l})),n.d(t,"d",(function(){return h}));
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class u{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function l(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return o}));var r=n(0);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class s{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.a;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(e){if(r)return null;throw e}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e))try{this.getOrInitializeService({instanceIdentifier:"[DEFAULT]"})}catch(e){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(e){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[e,t]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(e)&&t.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(e){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,"[DEFAULT]"===r?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(e){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:"[DEFAULT]":e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new s(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),i=n(6),s=n(3),o=n(5);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class a{constructor(e,t){this._delegate=e,this.firebase=t,Object(s._addComponent)(e,new i.a("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),Object(s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){Object(s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){Object(s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},u=new r.b("app-compat","Firebase",c);const l=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function e(){const t=
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if(Object(r.f)(t,a.name))return t[a.name];const c=new e(a,n);return t[a.name]=c,c},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw u.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&Object(r.j)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){if("serverAuth"===t)return null;return t},modularAPIs:s}};function i(e){if(e=e||s._DEFAULT_ENTRY_NAME,!Object(r.f)(t,e))throw u.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){Object(r.j)(t,e)},createSubscribe:r.h,ErrorFactory:r.b,deepExtend:r.j}),t}(),h=new o.b("@firebase/app-compat");
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
if(Object(r.r)()&&void 0!==self.firebase){h.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&h.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const d=l;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var f;Object(s.registerVersion)("@firebase/app-compat","0.2.13",f)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var r=new Uint8Array(16);e.exports=function(){return n(r),r}}else{var i=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),i[t]=e>>>((3&t)<<3)&255;return i}}},function(e,t){for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);e.exports=function(e,t){var r=t||0,i=n;return[i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],"-",i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]],i[e[r++]]].join("")}},function(e,t){var n,r,i=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===s||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:s}catch(e){n=s}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++h<t;)c&&c[h].run();h=-1,t=u.length}c=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function g(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new p(e,t)),1!==u.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=g,i.addListener=g,i.once=g,i.off=g,i.removeListener=g,i.removeAllListeners=g,i.emit=g,i.prependListener=g,i.prependOnceListener=g,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Counter=void 0;const r=n(13),i=n(16);n(17),n(20);const s=n(19);t.Counter=class{constructor(e,t){this.doc=e,this.field=t,this.db=null,this.shardId="",this.shards={},this.notifyPromise=null,this.db=e.firestore,this.shardId=function(e){const t=new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)").exec(document.cookie);if(t)return t[1];const n=r.v4(),i=new Date;i.setTime(i.getTime()+2592e6);const s="; expires="+i.toUTCString();return document.cookie=encodeURIComponent(e)+"="+n+s+"; path=/",n}("FIRESTORE_COUNTER_SHARD_ID"),i.default.initializeApp(this.db.app.options);const n=i.default.firestore().collection(e.path+"/_counter_shards_");this.shards[e.path]=0,this.shards[n.path+"/"+this.shardId]=0,this.shards[n.path+"/\t"+this.shardId.slice(0,4)]=0,this.shards[n.path+"/\t\t"+this.shardId.slice(0,3)]=0,this.shards[n.path+"/\t\t\t"+this.shardId.slice(0,2)]=0,this.shards[n.path+"/\t\t\t"+this.shardId.slice(0,1)]=0}async get(e){const t=Object.keys(this.shards).map(async t=>(await this.db.doc(t).get(e)).get(this.field)||0);return(await Promise.all(t)).reduce((e,t)=>e+t,0)}onSnapshot(e){Object.keys(this.shards).forEach(t=>{const n=i.default.firestore().doc(t);(0,s.onSnapshot)(n,t=>{this.shards[t.ref.path]=t.get(this.field)||0,null===this.notifyPromise&&(this.notifyPromise=async function(e){return new Promise(async t=>{setTimeout(async()=>{const n=e();t(n)},0)})}(()=>{const t=Object.values(this.shards).reduce((e,t)=>e+t,0);e({exists:!0,data:()=>t}),this.notifyPromise=null}))})})}incrementBy(e){const t=i.default.firestore.FieldValue.increment(e),n=this.field.split(".").reverse().reduce((e,t)=>({[t]:e}),t),r=i.default.firestore().collection(this.doc.path+"/_counter_shards_");return(0,s.setDoc)((0,s.doc)(r,this.shardId),n,{merge:!0})}shard(){return this.doc.collection("_counter_shards_").doc(this.shardId)}}},function(e,t,n){var r=n(14),i=n(15),s=i;s.v1=r,s.v4=i,e.exports=s},function(e,t,n){var r,i,s=n(9),o=n(10),a=0,c=0;e.exports=function(e,t,n){var u=t&&n||0,l=t||[],h=(e=e||{}).node||r,d=void 0!==e.clockseq?e.clockseq:i;if(null==h||null==d){var f=s();null==h&&(h=r=[1|f[0],f[1],f[2],f[3],f[4],f[5]]),null==d&&(d=i=16383&(f[6]<<8|f[7]))}var p=void 0!==e.msecs?e.msecs:(new Date).getTime(),g=void 0!==e.nsecs?e.nsecs:c+1,m=p-a+(g-c)/1e4;if(m<0&&void 0===e.clockseq&&(d=d+1&16383),(m<0||p>a)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=p,c=g,i=d;var y=(1e4*(268435455&(p+=122192928e5))+g)%4294967296;l[u++]=y>>>24&255,l[u++]=y>>>16&255,l[u++]=y>>>8&255,l[u++]=255&y;var v=p/4294967296*1e4&268435455;l[u++]=v>>>8&255,l[u++]=255&v,l[u++]=v>>>24&15|16,l[u++]=v>>>16&255,l[u++]=d>>>8|128,l[u++]=255&d;for(var w=0;w<6;++w)l[u+w]=h[w];return t||o(l)}},function(e,t,n){var r=n(9),i=n(10);e.exports=function(e,t,n){var s=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||r)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var a=0;a<16;++a)t[s+a]=o[a];return t||i(o)}},function(e,t,n){"use strict";n.r(t);var r=n(7);n.d(t,"default",(function(){return r.a}));
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
r.a.registerVersion("firebase","9.23.0","app-compat")},function(e,t,n){"use strict";n.r(t);n(18)},function(e,t,n){"use strict";(function(e){var t=n(7),r=n(1),i=n(6),s=n(0);function o(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function a(e=Object(s.q)()){return!("file:"!==o()&&"ionic:"!==o()&&"capacitor:"!==o()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function c(e=Object(s.q)()){return Object(s.u)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=Object(s.q)()){return/Edge\/\d+/.test(e)}(e)}function u(){try{const e=self.localStorage,t=r.s();if(e)return e.setItem(t,"1"),e.removeItem(t),!c()||Object(s.v)()}catch(e){return l()&&Object(s.v)()}return!1}function l(){return void 0!==e&&"WorkerGlobalScope"in e&&"importScripts"in e}function h(){return("http:"===o()||"https:"===o()||Object(s.s)()||a())&&!(Object(s.y)()||Object(s.x)())&&u()&&!l()}function d(){return a()&&"undefined"!=typeof document}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const f={LOCAL:"local",NONE:"none",SESSION:"session"},p=r.p;async function g(e){await e._initializationPromise;const t=m(),n=r.w("persistence",e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function m(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(e){return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y=r.p;class v{constructor(){this.browserResolver=r.t(r.A),this.cordovaResolver=r.t(r.F),this.underlyingResolver=null,this._redirectPersistence=r.B,this._completeRedirectFn=r.u,this._overrideRedirectResult=r.v}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return d()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return y(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!d()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(e){return e.unwrap()}function b(e){const{_tokenResponse:t}=e instanceof s.c?e.customData:e;if(!t)return null;if(!(e instanceof s.c)&&"temporaryProof"in t&&"phoneNumber"in t)return r.i.credentialFromResult(e);const n=t.providerId;if(!n||n===r.k.PASSWORD)return null;let i;switch(n){case r.k.GOOGLE:i=r.f;break;case r.k.FACEBOOK:i=r.d;break;case r.k.GITHUB:i=r.e;break;case r.k.TWITTER:i=r.o;break;default:const{oauthIdToken:e,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:c}=t;return s||o||e||a?a?n.startsWith("saml.")?r.m._create(n,a):r.g._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:s}):new r.h(n).credential({idToken:e,accessToken:s,rawNonce:c}):null}return e instanceof s.c?i.credentialFromError(e):i.credentialFromResult(e)}function I(e,t){return t.catch(t=>{throw t instanceof s.c&&function(e,t){var n;const i=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==t?void 0:t.code)){t.resolver=new T(e,r.K(e,t))}else if(i){const e=b(t),n=t;e&&(n.credential=e,n.tenantId=i.tenantId||void 0,n.email=i.email||void 0,n.phoneNumber=i.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(i=e,b(i)),additionalUserInfo:r.J(e),user:E.getOrCreate(n)};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var i})}async function _(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>I(e,n.confirm(t))}}class T{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return I(w(this.auth),this.resolver.resolveSignIn(e))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E{constructor(e){this._delegate=e,this.multiFactor=r.T(e)}static getOrCreate(e){return E.USER_MAP.has(e)||E.USER_MAP.set(e,new E(e)),E.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return I(this.auth,r.P(this._delegate,e))}async linkWithPhoneNumber(e,t){return _(this.auth,r.Q(this._delegate,e,t))}async linkWithPopup(e){return I(this.auth,r.R(this._delegate,e,v))}async linkWithRedirect(e){return await g(r.q(this.auth)),r.S(this._delegate,e,v)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return I(this.auth,r.U(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return _(this.auth,r.V(this._delegate,e,t))}reauthenticateWithPopup(e){return I(this.auth,r.W(this._delegate,e,v))}async reauthenticateWithRedirect(e){return await g(r.q(this.auth)),r.X(this._delegate,e,v)}sendEmailVerification(e){return r.Y(this._delegate,e)}async unlink(e){return await r.jb(this._delegate,e),this}updateEmail(e){return r.kb(this._delegate,e)}updatePassword(e){return r.lb(this._delegate,e)}updatePhoneNumber(e){return r.mb(this._delegate,e)}updateProfile(e){return r.nb(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return r.ob(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}E.USER_MAP=new WeakMap;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const S=r.p;class k{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;S(n,"invalid-api-key",{appName:e.name}),S(n,"invalid-api-key",{appName:e.name});const i="undefined"!=typeof window?v:void 0;this._delegate=t.initialize({options:{persistence:A(n,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(r.H),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?E.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){r.E(this._delegate,e,t)}applyActionCode(e){return r.y(this._delegate,e)}checkActionCode(e){return r.C(this._delegate,e)}confirmPasswordReset(e,t){return r.D(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return I(this._delegate,r.G(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return r.I(this._delegate,e)}isSignInWithEmailLink(e){return r.O(this._delegate,e)}async getRedirectResult(){S(h(),this._delegate,"operation-not-supported-in-this-environment");const e=await r.L(this._delegate,v);return e?I(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){r.x(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=C(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=C(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return r.ab(this._delegate,e,t)}sendPasswordResetEmail(e,t){return r.Z(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){p(Object.values(f).includes(t),e,"invalid-persistence-type"),Object(s.y)()?p(t!==f.SESSION,e,"unsupported-persistence-type"):Object(s.x)()?p(t===f.NONE,e,"unsupported-persistence-type"):l()?p(t===f.NONE||t===f.LOCAL&&Object(s.v)(),e,"unsupported-persistence-type"):p(t===f.NONE||u(),e,"unsupported-persistence-type")}(this._delegate,e),e){case f.SESSION:t=r.B;break;case f.LOCAL:t=await r.t(r.N)._isAvailable()?r.N:r.z;break;case f.NONE:t=r.M;break;default:return r.r("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return I(this._delegate,r.bb(this._delegate))}signInWithCredential(e){return I(this._delegate,r.cb(this._delegate,e))}signInWithCustomToken(e){return I(this._delegate,r.db(this._delegate,e))}signInWithEmailAndPassword(e,t){return I(this._delegate,r.eb(this._delegate,e,t))}signInWithEmailLink(e,t){return I(this._delegate,r.fb(this._delegate,e,t))}signInWithPhoneNumber(e,t){return _(this._delegate,r.gb(this._delegate,e,t))}async signInWithPopup(e){return S(h(),this._delegate,"operation-not-supported-in-this-environment"),I(this._delegate,r.hb(this._delegate,e,v))}async signInWithRedirect(e){return S(h(),this._delegate,"operation-not-supported-in-this-environment"),await g(this._delegate),r.ib(this._delegate,e,v)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return r.pb(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function C(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&E.getOrCreate(e)),error:t,complete:n}}function A(e,t){const n=function(e,t){const n=m();if(!n)return[];const i=r.w("persistence",e,t);switch(n.getItem(i)){case f.NONE:return[r.M];case f.LOCAL:return[r.N,r.B];case f.SESSION:return[r.B];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(r.N)||n.push(r.N),"undefined"!=typeof window)for(const e of[r.z,r.B])n.includes(e)||n.push(e);return n.includes(r.M)||n.push(r.M),n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */k.Persistence=f;class N{constructor(){this.providerId="phone",this._delegate=new r.i(w(t.a.auth()))}static credential(e,t){return r.i.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}N.PHONE_SIGN_IN_METHOD=r.i.PHONE_SIGN_IN_METHOD,N.PROVIDER_ID=r.i.PROVIDER_ID;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const D=r.p;class O{constructor(e,n,i=t.a.app()){var s;D(null===(s=i.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:i.name}),this._delegate=new r.l(e,n,i.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var R;(R=t.a).INTERNAL.registerComponent(new i.a("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new k(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:r.a.EMAIL_SIGNIN,PASSWORD_RESET:r.a.PASSWORD_RESET,RECOVER_EMAIL:r.a.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:r.a.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:r.a.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:r.a.VERIFY_EMAIL}},EmailAuthProvider:r.c,FacebookAuthProvider:r.d,GithubAuthProvider:r.e,GoogleAuthProvider:r.f,OAuthProvider:r.h,SAMLAuthProvider:r.n,PhoneAuthProvider:N,PhoneMultiFactorGenerator:r.j,RecaptchaVerifier:O,TwitterAuthProvider:r.o,Auth:k,AuthCredential:r.b,Error:s.c}).setInstantiationMode("LAZY").setMultipleInstances(!1)),R.registerVersion("@firebase/auth-compat","0.4.2")}).call(this,n(8))},function(e,t,n){"use strict";n.r(t);var r=n(2);n.d(t,"AbstractUserDataWriter",(function(){return r.a})),n.d(t,"AggregateField",(function(){return r.b})),n.d(t,"AggregateQuerySnapshot",(function(){return r.c})),n.d(t,"Bytes",(function(){return r.d})),n.d(t,"CACHE_SIZE_UNLIMITED",(function(){return r.e})),n.d(t,"CollectionReference",(function(){return r.f})),n.d(t,"DocumentReference",(function(){return r.g})),n.d(t,"DocumentSnapshot",(function(){return r.h})),n.d(t,"FieldPath",(function(){return r.i})),n.d(t,"FieldValue",(function(){return r.j})),n.d(t,"Firestore",(function(){return r.k})),n.d(t,"FirestoreError",(function(){return r.l})),n.d(t,"GeoPoint",(function(){return r.m})),n.d(t,"LoadBundleTask",(function(){return r.n})),n.d(t,"Query",(function(){return r.o})),n.d(t,"QueryCompositeFilterConstraint",(function(){return r.p})),n.d(t,"QueryConstraint",(function(){return r.q})),n.d(t,"QueryDocumentSnapshot",(function(){return r.r})),n.d(t,"QueryEndAtConstraint",(function(){return r.s})),n.d(t,"QueryFieldFilterConstraint",(function(){return r.t})),n.d(t,"QueryLimitConstraint",(function(){return r.u})),n.d(t,"QueryOrderByConstraint",(function(){return r.v})),n.d(t,"QuerySnapshot",(function(){return r.w})),n.d(t,"QueryStartAtConstraint",(function(){return r.x})),n.d(t,"SnapshotMetadata",(function(){return r.y})),n.d(t,"Timestamp",(function(){return r.z})),n.d(t,"Transaction",(function(){return r.A})),n.d(t,"WriteBatch",(function(){return r.B})),n.d(t,"_DatabaseId",(function(){return r.C})),n.d(t,"_DocumentKey",(function(){return r.D})),n.d(t,"_EmptyAppCheckTokenProvider",(function(){return r.E})),n.d(t,"_EmptyAuthCredentialsProvider",(function(){return r.F})),n.d(t,"_FieldPath",(function(){return r.G})),n.d(t,"_TestingHooks",(function(){return r.H})),n.d(t,"_cast",(function(){return r.I})),n.d(t,"_debugAssert",(function(){return r.J})),n.d(t,"_isBase64Available",(function(){return r.K})),n.d(t,"_logWarn",(function(){return r.L})),n.d(t,"_validateIsNotUsedTogether",(function(){return r.M})),n.d(t,"addDoc",(function(){return r.N})),n.d(t,"aggregateFieldEqual",(function(){return r.O})),n.d(t,"aggregateQuerySnapshotEqual",(function(){return r.P})),n.d(t,"and",(function(){return r.Q})),n.d(t,"arrayRemove",(function(){return r.R})),n.d(t,"arrayUnion",(function(){return r.S})),n.d(t,"average",(function(){return r.T})),n.d(t,"clearIndexedDbPersistence",(function(){return r.U})),n.d(t,"collection",(function(){return r.V})),n.d(t,"collectionGroup",(function(){return r.W})),n.d(t,"connectFirestoreEmulator",(function(){return r.X})),n.d(t,"count",(function(){return r.Y})),n.d(t,"deleteDoc",(function(){return r.Z})),n.d(t,"deleteField",(function(){return r.ab})),n.d(t,"disableNetwork",(function(){return r.bb})),n.d(t,"doc",(function(){return r.cb})),n.d(t,"documentId",(function(){return r.db})),n.d(t,"enableIndexedDbPersistence",(function(){return r.eb})),n.d(t,"enableMultiTabIndexedDbPersistence",(function(){return r.fb})),n.d(t,"enableNetwork",(function(){return r.gb})),n.d(t,"endAt",(function(){return r.hb})),n.d(t,"endBefore",(function(){return r.ib})),n.d(t,"ensureFirestoreConfigured",(function(){return r.jb})),n.d(t,"executeWrite",(function(){return r.kb})),n.d(t,"getAggregateFromServer",(function(){return r.lb})),n.d(t,"getCountFromServer",(function(){return r.mb})),n.d(t,"getDoc",(function(){return r.nb})),n.d(t,"getDocFromCache",(function(){return r.ob})),n.d(t,"getDocFromServer",(function(){return r.pb})),n.d(t,"getDocs",(function(){return r.qb})),n.d(t,"getDocsFromCache",(function(){return r.rb})),n.d(t,"getDocsFromServer",(function(){return r.sb})),n.d(t,"getFirestore",(function(){return r.tb})),n.d(t,"increment",(function(){return r.ub})),n.d(t,"initializeFirestore",(function(){return r.vb})),n.d(t,"limit",(function(){return r.wb})),n.d(t,"limitToLast",(function(){return r.xb})),n.d(t,"loadBundle",(function(){return r.yb})),n.d(t,"memoryEagerGarbageCollector",(function(){return r.zb})),n.d(t,"memoryLocalCache",(function(){return r.Ab})),n.d(t,"memoryLruGarbageCollector",(function(){return r.Bb})),n.d(t,"namedQuery",(function(){return r.Cb})),n.d(t,"onSnapshot",(function(){return r.Db})),n.d(t,"onSnapshotsInSync",(function(){return r.Eb})),n.d(t,"or",(function(){return r.Fb})),n.d(t,"orderBy",(function(){return r.Gb})),n.d(t,"persistentLocalCache",(function(){return r.Hb})),n.d(t,"persistentMultipleTabManager",(function(){return r.Ib})),n.d(t,"persistentSingleTabManager",(function(){return r.Jb})),n.d(t,"query",(function(){return r.Kb})),n.d(t,"queryEqual",(function(){return r.Lb})),n.d(t,"refEqual",(function(){return r.Mb})),n.d(t,"runTransaction",(function(){return r.Nb})),n.d(t,"serverTimestamp",(function(){return r.Ob})),n.d(t,"setDoc",(function(){return r.Pb})),n.d(t,"setIndexConfiguration",(function(){return r.Qb})),n.d(t,"setLogLevel",(function(){return r.Rb})),n.d(t,"snapshotEqual",(function(){return r.Sb})),n.d(t,"startAfter",(function(){return r.Tb})),n.d(t,"startAt",(function(){return r.Ub})),n.d(t,"sum",(function(){return r.Vb})),n.d(t,"terminate",(function(){return r.Wb})),n.d(t,"updateDoc",(function(){return r.Xb})),n.d(t,"waitForPendingWrites",(function(){return r.Yb})),n.d(t,"where",(function(){return r.Zb})),n.d(t,"writeBatch",(function(){return r.ac}))},function(e,t,n){"use strict";n.r(t);var r=n(7),i=n(2),s=n(0),o=n(6);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function a(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new i.l("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c(){if("undefined"==typeof Uint8Array)throw new i.l("unimplemented","Uint8Arrays are not available in this environment.")}function u(){if(!Object(i.K)())throw new i.l("unimplemented","Blobs are unavailable in Firestore in this environment.")}class l{constructor(e){this._delegate=e}static fromBase64String(e){return u(),new l(i.d.fromBase64String(e))}static fromUint8Array(e){return c(),new l(i.d.fromUint8Array(e))}toBase64(){return u(),this._delegate.toBase64()}toUint8Array(){return c(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const e of t)if(e in n&&"function"==typeof n[e])return!0;return!1}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(e,["next","error","complete"])}class d{enableIndexedDbPersistence(e,t){return Object(i.eb)(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return Object(i.fb)(e._delegate)}clearIndexedDbPersistence(e){return Object(i.U)(e._delegate)}}class f{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof i.C||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||Object(i.L)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){Object(i.X)(this._delegate,e,t,n)}enableNetwork(){return Object(i.gb)(this._delegate)}disableNetwork(){return Object(i.bb)(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,Object(i.M)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return Object(i.Yb)(this._delegate)}onSnapshotsInSync(e){return Object(i.Eb)(this._delegate,e)}get app(){if(!this._appCompat)throw new i.l("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new C(this,Object(i.V)(this._delegate,e))}catch(e){throw w(e,"collection()","Firestore.collection()")}}doc(e){try{return new v(this,Object(i.cb)(this._delegate,e))}catch(e){throw w(e,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new E(this,Object(i.W)(this._delegate,e))}catch(e){throw w(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Object(i.Nb)(this._delegate,t=>e(new g(this,t)))}batch(){return Object(i.jb)(this._delegate),new m(new i.B(this._delegate,e=>Object(i.kb)(this._delegate,e)))}loadBundle(e){return Object(i.yb)(this._delegate,e)}namedQuery(e){return Object(i.Cb)(this._delegate,e).then(e=>e?new E(this,e):null)}}class p extends i.a{constructor(e){super(),this.firestore=e}convertBytes(e){return new l(new i.d(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return v.forKey(t,this.firestore,null)}}class g{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new p(e)}get(e){const t=A(e);return this._delegate.get(t).then(e=>new _(this._firestore,new i.h(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=A(e);return n?(a("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=A(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=A(e);return this._delegate.delete(t),this}}class m{constructor(e){this._delegate=e}set(e,t,n){const r=A(e);return n?(a("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=A(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=A(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class y{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new i.r(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new T(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=y.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new y(e,new p(e),t),r.set(t,i)),i}}y.INSTANCES=new WeakMap;class v{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new p(e)}static forPath(e,t,n){if(e.length%2!=0)throw new i.l("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new v(t,new i.g(t._delegate,n,new i.D(e)))}static forKey(e,t,n){return new v(t,new i.g(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new C(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new C(this.firestore,Object(i.V)(this._delegate,e))}catch(e){throw w(e,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Object(s.p)(e))instanceof i.g&&Object(i.Mb)(this._delegate,e)}set(e,t){t=a("DocumentReference.set",t);try{return t?Object(i.Pb)(this._delegate,e,t):Object(i.Pb)(this._delegate,e)}catch(e){throw w(e,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?Object(i.Xb)(this._delegate,e):Object(i.Xb)(this._delegate,e,t,...n)}catch(e){throw w(e,"updateDoc()","DocumentReference.update()")}}delete(){return Object(i.Z)(this._delegate)}onSnapshot(...e){const t=b(e),n=I(e,e=>new _(this.firestore,new i.h(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return Object(i.Db)(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Object(i.ob)(this._delegate):"server"===(null==e?void 0:e.source)?Object(i.pb)(this._delegate):Object(i.nb)(this._delegate),t.then(e=>new _(this.firestore,new i.h(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new v(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function w(e,t,n){return e.message=e.message.replace(t,n),e}function b(e){for(const t of e)if("object"==typeof t&&!h(t))return t;return{}}function I(e,t){var n,r;let i;return i=h(e[0])?e[0]:h(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class _{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new v(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Object(i.Sb)(this._delegate,e._delegate)}}class T extends _{data(e){const t=this._delegate.data(e);return Object(i.J)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class E{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new p(e)}where(e,t,n){try{return new E(this.firestore,Object(i.Kb)(this._delegate,Object(i.Zb)(e,t,n)))}catch(e){throw w(e,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new E(this.firestore,Object(i.Kb)(this._delegate,Object(i.Gb)(e,t)))}catch(e){throw w(e,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new E(this.firestore,Object(i.Kb)(this._delegate,Object(i.wb)(e)))}catch(e){throw w(e,"limit()","Query.limit()")}}limitToLast(e){try{return new E(this.firestore,Object(i.Kb)(this._delegate,Object(i.xb)(e)))}catch(e){throw w(e,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new E(this.firestore,Object(i.Kb)(this._delegate,Object(i.Ub)(...e)))}catch(e){throw w(e,"startAt()","Query.startAt()")}}startAfter(...e){try{return new E(this.firestore,Object(i.Kb)(this._delegate,Object(i.Tb)(...e)))}catch(e){throw w(e,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new E(this.firestore,Object(i.Kb)(this._delegate,Object(i.ib)(...e)))}catch(e){throw w(e,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new E(this.firestore,Object(i.Kb)(this._delegate,Object(i.hb)(...e)))}catch(e){throw w(e,"endAt()","Query.endAt()")}}isEqual(e){return Object(i.Lb)(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?Object(i.rb)(this._delegate):"server"===(null==e?void 0:e.source)?Object(i.sb)(this._delegate):Object(i.qb)(this._delegate),t.then(e=>new k(this.firestore,new i.w(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=b(e),n=I(e,e=>new k(this.firestore,new i.w(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return Object(i.Db)(this._delegate,t,n)}withConverter(e){return new E(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class S{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new T(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class k{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new E(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new T(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new S(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new T(this._firestore,n))})}isEqual(e){return Object(i.Sb)(this._delegate,e._delegate)}}class C extends E{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new v(this.firestore,e):null}doc(e){try{return new v(this.firestore,void 0===e?Object(i.cb)(this._delegate):Object(i.cb)(this._delegate,e))}catch(e){throw w(e,"doc()","CollectionReference.doc()")}}add(e){return Object(i.N)(this._delegate,e).then(e=>new v(this.firestore,e))}isEqual(e){return Object(i.Mb)(this._delegate,e._delegate)}withConverter(e){return new C(this.firestore,e?this._delegate.withConverter(y.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function A(e){return Object(i.I)(e,i.g)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(...e){this._delegate=new i.i(...e)}static documentId(){return new N(i.G.keyField().canonicalString())}isEqual(e){return(e=Object(s.p)(e))instanceof i.i&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this._delegate=e}static serverTimestamp(){const e=Object(i.Ob)();return e._methodName="FieldValue.serverTimestamp",new D(e)}static delete(){const e=Object(i.ab)();return e._methodName="FieldValue.delete",new D(e)}static arrayUnion(...e){const t=Object(i.S)(...e);return t._methodName="FieldValue.arrayUnion",new D(t)}static arrayRemove(...e){const t=Object(i.R)(...e);return t._methodName="FieldValue.arrayRemove",new D(t)}static increment(e){const t=Object(i.ub)(e);return t._methodName="FieldValue.increment",new D(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O={Firestore:f,GeoPoint:i.m,Timestamp:i.z,Blob:l,Transaction:g,WriteBatch:m,DocumentReference:v,DocumentSnapshot:_,Query:E,QueryDocumentSnapshot:T,QuerySnapshot:k,CollectionReference:C,FieldPath:N,FieldValue:D,setLogLevel:function(e){Object(i.Rb)(e)},CACHE_SIZE_UNLIMITED:i.e};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var R,x;R=r.a,x=(e,t)=>new f(e,t,new d),R.INTERNAL.registerComponent(new o.a("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return x(t,n)},"PUBLIC").setServiceProps(Object.assign({},O))),R.registerVersion("@firebase/firestore-compat","0.3.12")}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zaGFyZGVkL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3NoYXJkZWQvL1VzZXJzL2phY29iL2dvb2dsZS9leHRlbnNpb25zL25vZGVfbW9kdWxlcy8ucG5wbS9AZmlyZWJhc2UrdXRpbEAxLjkuMy9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3V0aWwvZGlzdC9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NoYXJkZWQvL1VzZXJzL2phY29iL2dvb2dsZS9leHRlbnNpb25zL25vZGVfbW9kdWxlcy8ucG5wbS90c2xpYkAyLjYuMy9ub2RlX21vZHVsZXMvdHNsaWIvdHNsaWIuZXM2LmpzIiwid2VicGFjazovL3NoYXJkZWQvL1VzZXJzL2phY29iL2dvb2dsZS9leHRlbnNpb25zL25vZGVfbW9kdWxlcy8ucG5wbS9AZmlyZWJhc2UrYXV0aEAwLjIzLjJfQGZpcmViYXNlK2FwcEAwLjkuMTMvbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoL2Rpc3QvZXNtMjAxNy9pbmRleC1lM2Q1ZDNmNC5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy9Vc2Vycy9qYWNvYi9nb29nbGUvZXh0ZW5zaW9ucy9ub2RlX21vZHVsZXMvLnBucG0vQGZpcmViYXNlK2F1dGhAMC4yMy4yX0BmaXJlYmFzZSthcHBAMC45LjEzL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXV0aC9kaXN0L2VzbTIwMTcvaW50ZXJuYWwuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL0BmaXJlYmFzZStmaXJlc3RvcmVAMy4xMy4wX0BmaXJlYmFzZSthcHBAMC45LjEzL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy9Vc2Vycy9qYWNvYi9nb29nbGUvZXh0ZW5zaW9ucy9ub2RlX21vZHVsZXMvLnBucG0vaWRiQDcuMS4xL25vZGVfbW9kdWxlcy9pZGIvYnVpbGQvd3JhcC1pZGItdmFsdWUuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL2lkYkA3LjEuMS9ub2RlX21vZHVsZXMvaWRiL2J1aWxkL2luZGV4LmpzIiwid2VicGFjazovL3NoYXJkZWQvL1VzZXJzL2phY29iL2dvb2dsZS9leHRlbnNpb25zL25vZGVfbW9kdWxlcy8ucG5wbS9AZmlyZWJhc2UrYXBwQDAuOS4xMy9ub2RlX21vZHVsZXMvQGZpcmViYXNlL2FwcC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NoYXJkZWQvL1VzZXJzL2phY29iL2dvb2dsZS9leHRlbnNpb25zL25vZGVfbW9kdWxlcy8ucG5wbS9AZmlyZWJhc2Urd2ViY2hhbm5lbC13cmFwcGVyQDAuMTAuMS9ub2RlX21vZHVsZXMvQGZpcmViYXNlL3dlYmNoYW5uZWwtd3JhcHBlci9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NoYXJkZWQvL1VzZXJzL2phY29iL2dvb2dsZS9leHRlbnNpb25zL25vZGVfbW9kdWxlcy8ucG5wbS9AZmlyZWJhc2UrbG9nZ2VyQDAuNC4wL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvbG9nZ2VyL2Rpc3QvZXNtL2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL0BmaXJlYmFzZStjb21wb25lbnRAMC42LjQvbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9jb21wb25lbnQvZGlzdC9lc20vaW5kZXguZXNtMjAxNy5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy9Vc2Vycy9qYWNvYi9nb29nbGUvZXh0ZW5zaW9ucy9ub2RlX21vZHVsZXMvLnBucG0vQGZpcmViYXNlK2FwcC1jb21wYXRAMC4yLjEzL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvYXBwLWNvbXBhdC9kaXN0L2VzbS9pbmRleC5lc20yMDE3LmpzIiwid2VicGFjazovL3NoYXJkZWQvKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovL3NoYXJkZWQvL1VzZXJzL2phY29iL2dvb2dsZS9leHRlbnNpb25zL25vZGVfbW9kdWxlcy8ucG5wbS91dWlkQDMuNC4wL25vZGVfbW9kdWxlcy91dWlkL2xpYi9ybmctYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy9Vc2Vycy9qYWNvYi9nb29nbGUvZXh0ZW5zaW9ucy9ub2RlX21vZHVsZXMvLnBucG0vdXVpZEAzLjQuMC9ub2RlX21vZHVsZXMvdXVpZC9saWIvYnl0ZXNUb1V1aWQuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL3Byb2Nlc3NAMC4xMS4xMC9ub2RlX21vZHVsZXMvcHJvY2Vzcy9icm93c2VyLmpzIiwid2VicGFjazovL3NoYXJkZWQvLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL3V1aWRAMy40LjAvbm9kZV9tb2R1bGVzL3V1aWQvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL3V1aWRAMy40LjAvbm9kZV9tb2R1bGVzL3V1aWQvdjEuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL3V1aWRAMy40LjAvbm9kZV9tb2R1bGVzL3V1aWQvdjQuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL2ZpcmViYXNlQDkuMjMuMC9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2FwcC9kaXN0L2VzbS9pbmRleC5lc20uanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL2ZpcmViYXNlQDkuMjMuMC9ub2RlX21vZHVsZXMvZmlyZWJhc2UvY29tcGF0L2F1dGgvZGlzdC9lc20vaW5kZXguZXNtLmpzIiwid2VicGFjazovL3NoYXJkZWQvL1VzZXJzL2phY29iL2dvb2dsZS9leHRlbnNpb25zL25vZGVfbW9kdWxlcy8ucG5wbS9AZmlyZWJhc2UrYXV0aC1jb21wYXRAMC40LjJfQGZpcmViYXNlK2FwcC1jb21wYXRAMC4yLjEzX0BmaXJlYmFzZSthcHAtdHlwZXNAMC45LjBfQGZpcmViYXNlK2FwcEAwLjkuMTMvbm9kZV9tb2R1bGVzL0BmaXJlYmFzZS9hdXRoLWNvbXBhdC9kaXN0L2luZGV4LmVzbTIwMTcuanMiLCJ3ZWJwYWNrOi8vc2hhcmRlZC8vVXNlcnMvamFjb2IvZ29vZ2xlL2V4dGVuc2lvbnMvbm9kZV9tb2R1bGVzLy5wbnBtL2ZpcmViYXNlQDkuMjMuMC9ub2RlX21vZHVsZXMvZmlyZWJhc2UvZmlyZXN0b3JlL2Rpc3QvZXNtL2luZGV4LmVzbS5qcyIsIndlYnBhY2s6Ly9zaGFyZGVkLy9Vc2Vycy9qYWNvYi9nb29nbGUvZXh0ZW5zaW9ucy9ub2RlX21vZHVsZXMvLnBucG0vQGZpcmViYXNlK2ZpcmVzdG9yZS1jb21wYXRAMC4zLjEyX0BmaXJlYmFzZSthcHAtY29tcGF0QDAuMi4xM19AZmlyZWJhc2UrYXBwLXR5cGVzQDAuOS4wX0BmaXJlYmFzZSthcHBAMC45LjEzL25vZGVfbW9kdWxlcy9AZmlyZWJhc2UvZmlyZXN0b3JlLWNvbXBhdC9kaXN0L2luZGV4LmVzbTIwMTcuanMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJzdHJpbmdUb0J5dGVBcnJheSQxIiwic3RyIiwib3V0IiwibGVuZ3RoIiwiY2hhckNvZGVBdCIsImJhc2U2NCIsImJ5dGVUb0NoYXJNYXBfIiwiY2hhclRvQnl0ZU1hcF8iLCJieXRlVG9DaGFyTWFwV2ViU2FmZV8iLCJjaGFyVG9CeXRlTWFwV2ViU2FmZV8iLCJFTkNPREVEX1ZBTFNfQkFTRSIsInRoaXMiLCJIQVNfTkFUSVZFX1NVUFBPUlQiLCJhdG9iIiwiaW5wdXQiLCJ3ZWJTYWZlIiwiQXJyYXkiLCJpc0FycmF5IiwiRXJyb3IiLCJpbml0XyIsImJ5dGVUb0NoYXJNYXAiLCJvdXRwdXQiLCJieXRlMSIsImhhdmVCeXRlMiIsImJ5dGUyIiwiaGF2ZUJ5dGUzIiwiYnl0ZTMiLCJvdXRCeXRlMSIsIm91dEJ5dGUyIiwib3V0Qnl0ZTMiLCJvdXRCeXRlNCIsInB1c2giLCJqb2luIiwiYnRvYSIsImVuY29kZUJ5dGVBcnJheSIsImJ5dGVzIiwicG9zIiwiYzEiLCJTdHJpbmciLCJmcm9tQ2hhckNvZGUiLCJjMiIsInUiLCJjMyIsImJ5dGVBcnJheVRvU3RyaW5nIiwiZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkiLCJjaGFyVG9CeXRlTWFwIiwiY2hhckF0IiwiYnl0ZTQiLCJEZWNvZGVCYXNlNjRTdHJpbmdFcnJvciIsIkVOQ09ERURfVkFMUyIsIkVOQ09ERURfVkFMU19XRUJTQUZFIiwic3VwZXIiLCJhcmd1bWVudHMiLCJiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyIsInV0ZjhCeXRlcyIsImJhc2U2NEVuY29kZSIsInJlcGxhY2UiLCJiYXNlNjREZWNvZGUiLCJkZWNvZGVTdHJpbmciLCJlIiwiY29uc29sZSIsImVycm9yIiwiZGVlcEV4dGVuZCIsInRhcmdldCIsInNvdXJjZSIsImNvbnN0cnVjdG9yIiwiRGF0ZSIsImdldFRpbWUiLCJ1bmRlZmluZWQiLCJwcm9wIiwiZ2V0RGVmYXVsdHNGcm9tR2xvYmFsIiwic2VsZiIsIndpbmRvdyIsImdsb2JhbCIsImdldEdsb2JhbCIsIl9fRklSRUJBU0VfREVGQVVMVFNfXyIsImdldERlZmF1bHRzIiwicHJvY2VzcyIsImVudiIsImRlZmF1bHRzSnNvblN0cmluZyIsIkpTT04iLCJwYXJzZSIsImdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlIiwiZG9jdW1lbnQiLCJtYXRjaCIsImNvb2tpZSIsImRlY29kZWQiLCJnZXREZWZhdWx0c0Zyb21Db29raWUiLCJpbmZvIiwiZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCIsInByb2R1Y3ROYW1lIiwiX2EiLCJfYiIsImVtdWxhdG9ySG9zdHMiLCJnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQiLCJob3N0Iiwic2VwYXJhdG9ySW5kZXgiLCJsYXN0SW5kZXhPZiIsInBvcnQiLCJwYXJzZUludCIsInN1YnN0cmluZyIsImdldERlZmF1bHRBcHBDb25maWciLCJjb25maWciLCJnZXRFeHBlcmltZW50YWxTZXR0aW5nIiwiRGVmZXJyZWQiLCJyZWplY3QiLCJyZXNvbHZlIiwicHJvbWlzZSIsIlByb21pc2UiLCJjYWxsYmFjayIsImNhdGNoIiwiY3JlYXRlTW9ja1VzZXJUb2tlbiIsInRva2VuIiwicHJvamVjdElkIiwidWlkIiwicHJvamVjdCIsImlhdCIsInN1YiIsInVzZXJfaWQiLCJwYXlsb2FkIiwiYXNzaWduIiwiaXNzIiwiYXVkIiwiZXhwIiwiYXV0aF90aW1lIiwiZmlyZWJhc2UiLCJzaWduX2luX3Byb3ZpZGVyIiwiaWRlbnRpdGllcyIsInN0cmluZ2lmeSIsImFsZyIsInR5cGUiLCJnZXRVQSIsIm5hdmlnYXRvciIsImlzTW9iaWxlQ29yZG92YSIsInRlc3QiLCJpc05vZGUiLCJmb3JjZUVudmlyb25tZW50IiwidG9TdHJpbmciLCJpc0Jyb3dzZXIiLCJpc0Jyb3dzZXJFeHRlbnNpb24iLCJydW50aW1lIiwiY2hyb21lIiwiYnJvd3NlciIsImlkIiwiaXNSZWFjdE5hdGl2ZSIsImlzSUUiLCJ1YSIsImluZGV4T2YiLCJpc1NhZmFyaSIsInVzZXJBZ2VudCIsImluY2x1ZGVzIiwiaXNJbmRleGVkREJBdmFpbGFibGUiLCJpbmRleGVkREIiLCJ2YWxpZGF0ZUluZGV4ZWREQk9wZW5hYmxlIiwicHJlRXhpc3QiLCJEQl9DSEVDS19OQU1FIiwicmVxdWVzdCIsIm9wZW4iLCJvbnN1Y2Nlc3MiLCJyZXN1bHQiLCJjbG9zZSIsImRlbGV0ZURhdGFiYXNlIiwib251cGdyYWRlbmVlZGVkIiwib25lcnJvciIsIm1lc3NhZ2UiLCJGaXJlYmFzZUVycm9yIiwiY29kZSIsImN1c3RvbURhdGEiLCJzZXRQcm90b3R5cGVPZiIsImNhcHR1cmVTdGFja1RyYWNlIiwiRXJyb3JGYWN0b3J5Iiwic2VydmljZSIsInNlcnZpY2VOYW1lIiwiZXJyb3JzIiwiZGF0YSIsImZ1bGxDb2RlIiwidGVtcGxhdGUiLCJQQVRURVJOIiwiXyIsInJlcGxhY2VUZW1wbGF0ZSIsImZ1bGxNZXNzYWdlIiwiY29udGFpbnMiLCJvYmoiLCJpc0VtcHR5IiwiZGVlcEVxdWFsIiwiYSIsImIiLCJhS2V5cyIsImtleXMiLCJiS2V5cyIsImsiLCJhUHJvcCIsImJQcm9wIiwiaXNPYmplY3QiLCJ0aGluZyIsInF1ZXJ5c3RyaW5nIiwicXVlcnlzdHJpbmdQYXJhbXMiLCJwYXJhbXMiLCJlbnRyaWVzIiwiZm9yRWFjaCIsImFycmF5VmFsIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwicXVlcnlzdHJpbmdEZWNvZGUiLCJzcGxpdCIsImRlY29kZVVSSUNvbXBvbmVudCIsImV4dHJhY3RRdWVyeXN0cmluZyIsInVybCIsInF1ZXJ5U3RhcnQiLCJmcmFnbWVudFN0YXJ0IiwiY3JlYXRlU3Vic2NyaWJlIiwiZXhlY3V0b3IiLCJvbk5vT2JzZXJ2ZXJzIiwicHJveHkiLCJPYnNlcnZlclByb3h5Iiwic3Vic2NyaWJlIiwib2JzZXJ2ZXJzIiwidW5zdWJzY3JpYmVzIiwib2JzZXJ2ZXJDb3VudCIsInRhc2siLCJmaW5hbGl6ZWQiLCJ0aGVuIiwiZm9yRWFjaE9ic2VydmVyIiwib2JzZXJ2ZXIiLCJuZXh0IiwiY29tcGxldGUiLCJuZXh0T3JPYnNlcnZlciIsIm1ldGhvZHMiLCJtZXRob2QiLCJpbXBsZW1lbnRzQW55TWV0aG9kcyIsIm5vb3AiLCJ1bnN1YiIsInVuc3Vic2NyaWJlT25lIiwiZmluYWxFcnJvciIsImZuIiwic2VuZE9uZSIsImVyciIsImdldE1vZHVsYXJJbnN0YW5jZSIsIl9kZWxlZ2F0ZSIsIl9fcmVzdCIsImdldE93blByb3BlcnR5U3ltYm9scyIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiU3VwcHJlc3NlZEVycm9yIiwiUHJvdmlkZXJJZCIsIkZBQ0VCT09LIiwiR0lUSFVCIiwiR09PR0xFIiwiUEFTU1dPUkQiLCJQSE9ORSIsIlRXSVRURVIiLCJBY3Rpb25Db2RlT3BlcmF0aW9uIiwiRU1BSUxfU0lHTklOIiwiUEFTU1dPUkRfUkVTRVQiLCJSRUNPVkVSX0VNQUlMIiwiUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04iLCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTCIsIlZFUklGWV9FTUFJTCIsIl9wcm9kRXJyb3JNYXAiLCJkZWJ1Z0Vycm9yTWFwIiwicHJvZEVycm9yTWFwIiwiX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZIiwibG9nQ2xpZW50IiwiX2xvZ0Vycm9yIiwibXNnIiwiYXJncyIsImxvZ0xldmVsIiwiRVJST1IiLCJfZmFpbCIsImF1dGhPckNvZGUiLCJyZXN0IiwiY3JlYXRlRXJyb3JJbnRlcm5hbCIsIl9jcmVhdGVFcnJvciIsIl9lcnJvcldpdGhDdXN0b21NZXNzYWdlIiwiYXV0aCIsImVycm9yTWFwIiwiYXBwTmFtZSIsIl9hc3NlcnRJbnN0YW5jZU9mIiwiaW5zdGFuY2UiLCJmdWxsUGFyYW1zIiwic2xpY2UiLCJfZXJyb3JGYWN0b3J5IiwiX2Fzc2VydCIsImFzc2VydGlvbiIsImRlYnVnRmFpbCIsImZhaWx1cmUiLCJkZWJ1Z0Fzc2VydCIsIl9nZXRDdXJyZW50VXJsIiwibG9jYXRpb24iLCJocmVmIiwiX2lzSHR0cE9ySHR0cHMiLCJfZ2V0Q3VycmVudFNjaGVtZSIsInByb3RvY29sIiwic2hvcnREZWxheSIsImxvbmdEZWxheSIsImlzTW9iaWxlIiwib25MaW5lIiwiTWF0aCIsIm1pbiIsIl9lbXVsYXRvclVybCIsInBhdGgiLCJlbXVsYXRvciIsInN0YXJ0c1dpdGgiLCJGZXRjaFByb3ZpZGVyIiwiZmV0Y2hJbXBsIiwiaGVhZGVyc0ltcGwiLCJyZXNwb25zZUltcGwiLCJmZXRjaCIsIkhlYWRlcnMiLCJSZXNwb25zZSIsIlNFUlZFUl9FUlJPUl9NQVAiLCJERUZBVUxUX0FQSV9USU1FT1VUX01TIiwiX2FkZFRpZElmTmVjZXNzYXJ5IiwidGVuYW50SWQiLCJhc3luYyIsIl9wZXJmb3JtQXBpUmVxdWVzdCIsImN1c3RvbUVycm9yTWFwIiwiX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nIiwiYm9keSIsInF1ZXJ5IiwiYXBpS2V5IiwiaGVhZGVycyIsIl9nZXRBZGRpdGlvbmFsSGVhZGVycyIsImxhbmd1YWdlQ29kZSIsIl9nZXRGaW5hbFRhcmdldCIsImFwaUhvc3QiLCJyZWZlcnJlclBvbGljeSIsImZldGNoRm4iLCJfY2FuSW5pdEVtdWxhdG9yIiwibmV0d29ya1RpbWVvdXQiLCJOZXR3b3JrVGltZW91dCIsInJlc3BvbnNlIiwicmFjZSIsImNsZWFyTmV0d29ya1RpbWVvdXQiLCJqc29uIiwiX21ha2VUYWdnZWRFcnJvciIsIm9rIiwiZXJyb3JNZXNzYWdlIiwic2VydmVyRXJyb3JDb2RlIiwic2VydmVyRXJyb3JNZXNzYWdlIiwiYXV0aEVycm9yIiwidG9Mb3dlckNhc2UiLCJfcGVyZm9ybVNpZ25JblJlcXVlc3QiLCJzZXJ2ZXJSZXNwb25zZSIsIl9zZXJ2ZXJSZXNwb25zZSIsImJhc2UiLCJhcGlTY2hlbWUiLCJ0aW1lciIsInNldFRpbWVvdXQiLCJjbGVhclRpbWVvdXQiLCJlcnJvclBhcmFtcyIsImVtYWlsIiwicGhvbmVOdW1iZXIiLCJfdG9rZW5SZXNwb25zZSIsInV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyIsInV0Y1RpbWVzdGFtcCIsImRhdGUiLCJOdW1iZXIiLCJpc05hTiIsInRvVVRDU3RyaW5nIiwic2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzIiwic2Vjb25kcyIsIl9wYXJzZVRva2VuIiwiYWxnb3JpdGhtIiwic2lnbmF0dXJlIiwiX2xvZ291dElmSW52YWxpZGF0ZWQiLCJ1c2VyIiwiYnlwYXNzQXV0aFN0YXRlIiwiaXNVc2VySW52YWxpZGF0ZWQiLCJjdXJyZW50VXNlciIsInNpZ25PdXQiLCJQcm9hY3RpdmVSZWZyZXNoIiwiaXNSdW5uaW5nIiwidGltZXJJZCIsImVycm9yQmFja29mZiIsInNjaGVkdWxlIiwid2FzRXJyb3IiLCJpbnRlcnZhbCIsInN0c1Rva2VuTWFuYWdlciIsImV4cGlyYXRpb25UaW1lIiwibm93IiwibWF4IiwiZ2V0SW50ZXJ2YWwiLCJpdGVyYXRpb24iLCJnZXRJZFRva2VuIiwiVXNlck1ldGFkYXRhIiwiY3JlYXRlZEF0IiwibGFzdExvZ2luQXQiLCJfaW5pdGlhbGl6ZVRpbWUiLCJsYXN0U2lnbkluVGltZSIsImNyZWF0aW9uVGltZSIsIm1ldGFkYXRhIiwiX3JlbG9hZFdpdGhvdXRTYXZpbmciLCJpZFRva2VuIiwiZ2V0QWNjb3VudEluZm8iLCJ1c2VycyIsImNvcmVBY2NvdW50IiwiX25vdGlmeVJlbG9hZExpc3RlbmVyIiwibmV3UHJvdmlkZXJEYXRhIiwicHJvdmlkZXJVc2VySW5mbyIsIm1hcCIsInByb3ZpZGVySWQiLCJwcm92aWRlciIsInJhd0lkIiwiZGlzcGxheU5hbWUiLCJwaG90b1VSTCIsInBob3RvVXJsIiwicHJvdmlkZXJEYXRhIiwib3JpZ2luYWwiLCJuZXdEYXRhIiwiZmlsdGVyIiwic29tZSIsIm9sZElzQW5vbnltb3VzIiwiaXNBbm9ueW1vdXMiLCJuZXdJc0Fub255bW91cyIsInBhc3N3b3JkSGFzaCIsInVwZGF0ZXMiLCJsb2NhbElkIiwiZW1haWxWZXJpZmllZCIsIlN0c1Rva2VuTWFuYWdlciIsInJlZnJlc2hUb2tlbiIsImFjY2Vzc1Rva2VuIiwiZXhwaXJlc0luIiwicGFyc2VkVG9rZW4iLCJfdG9rZW5FeHBpcmVzSW4iLCJ1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uIiwiZm9yY2VSZWZyZXNoIiwiaXNFeHBpcmVkIiwicmVmcmVzaCIsIm9sZFRva2VuIiwidG9rZW5BcGlIb3N0IiwiYWNjZXNzX3Rva2VuIiwiZXhwaXJlc19pbiIsInJlZnJlc2hfdG9rZW4iLCJyZXF1ZXN0U3RzVG9rZW4iLCJleHBpcmVzSW5TZWMiLCJtYW5hZ2VyIiwidG9KU09OIiwiYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQiLCJvcHQiLCJwcm9hY3RpdmVSZWZyZXNoIiwicmVsb2FkVXNlckluZm8iLCJyZWxvYWRMaXN0ZW5lciIsImdldFRva2VuIiwiX3BlcnNpc3RVc2VySWZDdXJyZW50IiwiX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCIsInVzZXJJbnRlcm5hbCIsImNsYWltcyIsInNpZ25JblByb3ZpZGVyIiwiYXV0aFRpbWUiLCJpc3N1ZWRBdFRpbWUiLCJzaWduSW5TZWNvbmRGYWN0b3IiLCJnZXRJZFRva2VuUmVzdWx0IiwicmVsb2FkIiwidXNlckluZm8iLCJfY29weSIsIl9hc3NpZ24iLCJuZXdVc2VyIiwiX2Nsb25lIiwiX3N0YXJ0IiwiX3N0b3AiLCJ0b2tlbnNSZWZyZXNoZWQiLCJ1cGRhdGVGcm9tU2VydmVyUmVzcG9uc2UiLCJkZWxldGVBY2NvdW50IiwiY2xlYXJSZWZyZXNoVG9rZW4iLCJfcmVkaXJlY3RFdmVudElkIiwiX2MiLCJfZCIsIl9lIiwiX2YiLCJfZyIsIl9oIiwicGxhaW5PYmplY3RUb2tlbk1hbmFnZXIiLCJmcm9tSlNPTiIsImlkVG9rZW5SZXNwb25zZSIsImluc3RhbmNlQ2FjaGUiLCJNYXAiLCJfZ2V0SW5zdGFuY2UiLCJjbHMiLCJGdW5jdGlvbiIsInNldCIsIkluTWVtb3J5UGVyc2lzdGVuY2UiLCJzdG9yYWdlIiwiX2tleSIsIl9saXN0ZW5lciIsImluTWVtb3J5UGVyc2lzdGVuY2UiLCJfcGVyc2lzdGVuY2VLZXlOYW1lIiwiUGVyc2lzdGVuY2VVc2VyTWFuYWdlciIsInBlcnNpc3RlbmNlIiwidXNlcktleSIsImZ1bGxVc2VyS2V5IiwiZnVsbFBlcnNpc3RlbmNlS2V5IiwiYm91bmRFdmVudEhhbmRsZXIiLCJfb25TdG9yYWdlRXZlbnQiLCJfYWRkTGlzdGVuZXIiLCJfc2V0IiwiYmxvYiIsIl9nZXQiLCJfZnJvbUpTT04iLCJfcmVtb3ZlIiwibmV3UGVyc2lzdGVuY2UiLCJnZXRDdXJyZW50VXNlciIsInJlbW92ZUN1cnJlbnRVc2VyIiwic2V0Q3VycmVudFVzZXIiLCJfcmVtb3ZlTGlzdGVuZXIiLCJwZXJzaXN0ZW5jZUhpZXJhcmNoeSIsImF2YWlsYWJsZVBlcnNpc3RlbmNlcyIsImFsbCIsIl9pc0F2YWlsYWJsZSIsInNlbGVjdGVkUGVyc2lzdGVuY2UiLCJ1c2VyVG9NaWdyYXRlIiwibWlncmF0aW9uSGllcmFyY2h5IiwiX3Nob3VsZEFsbG93TWlncmF0aW9uIiwiX2dldEJyb3dzZXJOYW1lIiwiX2lzSUVNb2JpbGUiLCJfaXNGaXJlZm94IiwiX2lzQmxhY2tCZXJyeSIsIl9pc1dlYk9TIiwiX2lzU2FmYXJpIiwiX2lzQ2hyb21lSU9TIiwiX2lzQW5kcm9pZCIsInJlIiwibWF0Y2hlcyIsIl9pc0lPUyIsIl9pc01vYmlsZUJyb3dzZXIiLCJfZ2V0Q2xpZW50VmVyc2lvbiIsImNsaWVudFBsYXRmb3JtIiwiZnJhbWV3b3JrcyIsInJlcG9ydGVkUGxhdGZvcm0iLCJyZXBvcnRlZEZyYW1ld29ya3MiLCJnZXRSZWNhcHRjaGFDb25maWciLCJpc1YyIiwiZ3JlY2FwdGNoYSIsImdldFJlc3BvbnNlIiwiaXNFbnRlcnByaXNlIiwiZW50ZXJwcmlzZSIsIlJlY2FwdGNoYUNvbmZpZyIsInNpdGVLZXkiLCJlbWFpbFBhc3N3b3JkRW5hYmxlZCIsInJlY2FwdGNoYUtleSIsInJlY2FwdGNoYUVuZm9yY2VtZW50U3RhdGUiLCJlbmZvcmNlbWVudFN0YXRlIiwiX2xvYWRKUyIsImVsIiwiY3JlYXRlRWxlbWVudCIsInNldEF0dHJpYnV0ZSIsIm9ubG9hZCIsImNoYXJzZXQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImFwcGVuZENoaWxkIiwiX2dlbmVyYXRlQ2FsbGJhY2tOYW1lIiwicHJlZml4IiwiZmxvb3IiLCJyYW5kb20iLCJSZWNhcHRjaGFFbnRlcnByaXNlVmVyaWZpZXIiLCJhdXRoRXh0ZXJuIiwiX2Nhc3RBdXRoIiwiYWN0aW9uIiwicmV0cmlldmVSZWNhcHRjaGFUb2tlbiIsInJlYWR5IiwiZXhlY3V0ZSIsIl9hZ2VudFJlY2FwdGNoYUNvbmZpZyIsIl90ZW5hbnRSZWNhcHRjaGFDb25maWdzIiwiY2xpZW50VHlwZSIsInZlcnNpb24iLCJyZXRyaWV2ZVNpdGVLZXkiLCJpbmplY3RSZWNhcHRjaGFGaWVsZHMiLCJjYXB0Y2hhUmVzcCIsInZlcmlmaWVyIiwiY2FwdGNoYVJlc3BvbnNlIiwidmVyaWZ5IiwibmV3UmVxdWVzdCIsIkF1dGhNaWRkbGV3YXJlUXVldWUiLCJxdWV1ZSIsIm9uQWJvcnQiLCJ3cmFwcGVkQ2FsbGJhY2siLCJpbmRleCIsIm5leHRVc2VyIiwib25BYm9ydFN0YWNrIiwiYmVmb3JlU3RhdGVDYWxsYmFjayIsInJldmVyc2UiLCJvcmlnaW5hbE1lc3NhZ2UiLCJhcHAiLCJoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIiLCJhcHBDaGVja1NlcnZpY2VQcm92aWRlciIsImVtdWxhdG9yQ29uZmlnIiwib3BlcmF0aW9ucyIsImF1dGhTdGF0ZVN1YnNjcmlwdGlvbiIsImlkVG9rZW5TdWJzY3JpcHRpb24iLCJiZWZvcmVTdGF0ZVF1ZXVlIiwicmVkaXJlY3RVc2VyIiwiaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCIsIl9pc0luaXRpYWxpemVkIiwiX2RlbGV0ZWQiLCJfaW5pdGlhbGl6YXRpb25Qcm9taXNlIiwiX3BvcHVwUmVkaXJlY3RSZXNvbHZlciIsImxhc3ROb3RpZmllZFVpZCIsInNldHRpbmdzIiwiYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nIiwiY2xpZW50VmVyc2lvbiIsInNka0NsaWVudFZlcnNpb24iLCJwb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJwZXJzaXN0ZW5jZU1hbmFnZXIiLCJfc2hvdWxkSW5pdFByb2FjdGl2ZWx5IiwiX2luaXRpYWxpemUiLCJpbml0aWFsaXplQ3VycmVudFVzZXIiLCJhc3NlcnRlZFBlcnNpc3RlbmNlIiwiX2N1cnJlbnRVc2VyIiwiX3VwZGF0ZUN1cnJlbnRVc2VyIiwicHJldmlvdXNseVN0b3JlZFVzZXIiLCJmdXR1cmVDdXJyZW50VXNlciIsIm5lZWRzVG9jaGVja01pZGRsZXdhcmUiLCJhdXRoRG9tYWluIiwiZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJyZWRpcmVjdFVzZXJFdmVudElkIiwic3RvcmVkVXNlckV2ZW50SWQiLCJ0cnlSZWRpcmVjdFNpZ25JbiIsImRpcmVjdGx5U2V0Q3VycmVudFVzZXIiLCJydW5NaWRkbGV3YXJlIiwiX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQiLCJyZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIiLCJyZWRpcmVjdFJlc29sdmVyIiwiX2NvbXBsZXRlUmVkaXJlY3RGbiIsIl9zZXRSZWRpcmVjdFVzZXIiLCJuYXZpZ2F0b3JMYW5ndWFnZSIsImxhbmd1YWdlcyIsImxhbmd1YWdlIiwiX2dldFVzZXJMYW5ndWFnZSIsInVzZXJFeHRlcm4iLCJza2lwQmVmb3JlU3RhdGVDYWxsYmFja3MiLCJub3RpZnlBdXRoTGlzdGVuZXJzIiwicmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIiLCJzZXRQZXJzaXN0ZW5jZSIsImNvbXBsZXRlZCIsInJlZ2lzdGVyU3RhdGVMaXN0ZW5lciIsInB1c2hDYWxsYmFjayIsInJlZGlyZWN0TWFuYWdlciIsInJlc29sdmVyIiwiX3JlZGlyZWN0UGVyc2lzdGVuY2UiLCJfc3RhcnRQcm9hY3RpdmVSZWZyZXNoIiwiX3N0b3BQcm9hY3RpdmVSZWZyZXNoIiwiY3VycmVudFVpZCIsInN1YnNjcmlwdGlvbiIsImNiIiwiYWRkT2JzZXJ2ZXIiLCJmcmFtZXdvcmsiLCJzb3J0IiwiX2dldEZyYW1ld29ya3MiLCJvcHRpb25zIiwiYXBwSWQiLCJoZWFydGJlYXRzSGVhZGVyIiwiZ2V0SW1tZWRpYXRlIiwib3B0aW9uYWwiLCJnZXRIZWFydGJlYXRzSGVhZGVyIiwiYXBwQ2hlY2tUb2tlbiIsIl9nZXRBcHBDaGVja1Rva2VuIiwiYXBwQ2hlY2tUb2tlblJlc3VsdCIsIldBUk4iLCJ3YXJuIiwiX2xvZ1dhcm4iLCJjb25uZWN0QXV0aEVtdWxhdG9yIiwiYXV0aEludGVybmFsIiwiZGlzYWJsZVdhcm5pbmdzIiwiZXh0cmFjdFByb3RvY29sIiwiYXV0aG9yaXR5IiwiZXhlYyIsInN1YnN0ciIsImhvc3RBbmRQb3J0IiwicG9wIiwiYnJhY2tldGVkSVB2NiIsInBhcnNlUG9ydCIsImV4dHJhY3RIb3N0QW5kUG9ydCIsInBvcnRTdHIiLCJmcmVlemUiLCJhdHRhY2hCYW5uZXIiLCJzdHkiLCJzdHlsZSIsImlubmVyVGV4dCIsInBvc2l0aW9uIiwid2lkdGgiLCJiYWNrZ3JvdW5kQ29sb3IiLCJib3JkZXIiLCJjb2xvciIsImJvdHRvbSIsImxlZnQiLCJtYXJnaW4iLCJ6SW5kZXgiLCJ0ZXh0QWxpZ24iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZWFkeVN0YXRlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImVtaXRFbXVsYXRvcldhcm5pbmciLCJwcm90b2NvbEVuZCIsIkF1dGhDcmVkZW50aWFsIiwic2lnbkluTWV0aG9kIiwiX2F1dGgiLCJfaWRUb2tlbiIsInJlc2V0UGFzc3dvcmQiLCJ1cGRhdGVFbWFpbFBhc3N3b3JkIiwic2lnbkluV2l0aFBhc3N3b3JkIiwic2VuZE9vYkNvZGUiLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsJDEiLCJzZW5kU2lnbkluTGlua1RvRW1haWwkMSIsIkVtYWlsQXV0aENyZWRlbnRpYWwiLCJfZW1haWwiLCJfcGFzc3dvcmQiLCJfdGVuYW50SWQiLCJwYXNzd29yZCIsIm9vYkNvZGUiLCJfZnJvbUVtYWlsQW5kUGFzc3dvcmQiLCJfZnJvbUVtYWlsQW5kQ29kZSIsInJldHVyblNlY3VyZVRva2VuIiwiX2dldFJlY2FwdGNoYUNvbmZpZyIsInJlcXVlc3RXaXRoUmVjYXB0Y2hhIiwibG9nIiwic2lnbkluV2l0aEVtYWlsTGluayQxIiwic2lnbkluV2l0aEVtYWlsTGlua0ZvckxpbmtpbmciLCJfZ2V0SWRUb2tlblJlc3BvbnNlIiwic2lnbkluV2l0aElkcCIsInBlbmRpbmdUb2tlbiIsImNyZWQiLCJub25jZSIsIm9hdXRoVG9rZW4iLCJvYXV0aFRva2VuU2VjcmV0Iiwic2VjcmV0IiwiYnVpbGRSZXF1ZXN0IiwiYXV0b0NyZWF0ZSIsInJlcXVlc3RVcmkiLCJwb3N0Qm9keSIsIlZFUklGWV9QSE9ORV9OVU1CRVJfRk9SX0VYSVNUSU5HX0VSUk9SX01BUF8iLCJQaG9uZUF1dGhDcmVkZW50aWFsIiwidmVyaWZpY2F0aW9uSWQiLCJ2ZXJpZmljYXRpb25Db2RlIiwidGVtcG9yYXJ5UHJvb2YiLCJzaWduSW5XaXRoUGhvbmVOdW1iZXIkMSIsIl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCIsImxpbmtXaXRoUGhvbmVOdW1iZXIkMSIsIm9wZXJhdGlvbiIsInZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmciLCJzZXNzaW9uSW5mbyIsImFjdGlvbkxpbmsiLCJzZWFyY2hQYXJhbXMiLCJwYXJzZU1vZGUiLCJjb250aW51ZVVybCIsImxpbmsiLCJkb3VibGVEZWVwTGluayIsImlPU0RlZXBMaW5rIiwicGFyc2VEZWVwTGluayIsIkVtYWlsQXV0aFByb3ZpZGVyIiwiUFJPVklERVJfSUQiLCJlbWFpbExpbmsiLCJhY3Rpb25Db2RlVXJsIiwicGFyc2VMaW5rIiwiRU1BSUxfUEFTU1dPUkRfU0lHTl9JTl9NRVRIT0QiLCJFTUFJTF9MSU5LX1NJR05fSU5fTUVUSE9EIiwiRmVkZXJhdGVkQXV0aFByb3ZpZGVyIiwiZGVmYXVsdExhbmd1YWdlQ29kZSIsImN1c3RvbVBhcmFtZXRlcnMiLCJjdXN0b21PQXV0aFBhcmFtZXRlcnMiLCJCYXNlT0F1dGhQcm92aWRlciIsInNjb3BlcyIsInNjb3BlIiwiT0F1dGhQcm92aWRlciIsIl9mcm9tUGFyYW1zIiwiX2NyZWRlbnRpYWwiLCJyYXdOb25jZSIsInVzZXJDcmVkZW50aWFsIiwib2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCIsInRva2VuUmVzcG9uc2UiLCJvYXV0aElkVG9rZW4iLCJvYXV0aEFjY2Vzc1Rva2VuIiwiRmFjZWJvb2tBdXRoUHJvdmlkZXIiLCJGQUNFQk9PS19TSUdOX0lOX01FVEhPRCIsImNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0IiwiY3JlZGVudGlhbCIsIkdvb2dsZUF1dGhQcm92aWRlciIsImFkZFNjb3BlIiwiR09PR0xFX1NJR05fSU5fTUVUSE9EIiwiR2l0aHViQXV0aFByb3ZpZGVyIiwiR0lUSFVCX1NJR05fSU5fTUVUSE9EIiwiU0FNTEF1dGhDcmVkZW50aWFsIiwiU0FNTEF1dGhQcm92aWRlciIsInNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCIsIl9jcmVhdGUiLCJUd2l0dGVyQXV0aFByb3ZpZGVyIiwiVFdJVFRFUl9TSUdOX0lOX01FVEhPRCIsInNpZ25VcCIsIlVzZXJDcmVkZW50aWFsSW1wbCIsIm9wZXJhdGlvblR5cGUiLCJfZnJvbUlkVG9rZW5SZXNwb25zZSIsInByb3ZpZGVySWRGb3JSZXNwb25zZSIsIl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeSIsInNpZ25JbkFub255bW91c2x5IiwiX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5IiwiX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlciIsIl9mcm9tRXJyb3JBbmRPcGVyYXRpb24iLCJwcm92aWRlckRhdGFBc05hbWVzIiwiU2V0IiwicGlkIiwidW5saW5rIiwiX2Fzc2VydExpbmtlZFN0YXR1cyIsImRlbGV0ZUxpbmtlZEFjY291bnRzIiwiZGVsZXRlUHJvdmlkZXIiLCJwcm92aWRlcnNMZWZ0IiwicGQiLCJoYXMiLCJfbGluayQxIiwiX2xpbmtUb0lkVG9rZW4iLCJfZm9yT3BlcmF0aW9uIiwiZXhwZWN0ZWQiLCJfcmVhdXRoZW50aWNhdGUiLCJwYXJzZWQiLCJfc2lnbkluV2l0aENyZWRlbnRpYWwiLCJzaWduSW5XaXRoQ3JlZGVudGlhbCIsImxpbmtXaXRoQ3JlZGVudGlhbCIsInJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwiLCJzaWduSW5XaXRoQ3VzdG9tVG9rZW4iLCJjdXN0b21Ub2tlbiIsInNpZ25JbldpdGhDdXN0b21Ub2tlbiQxIiwiTXVsdGlGYWN0b3JJbmZvSW1wbCIsImZhY3RvcklkIiwibWZhRW5yb2xsbWVudElkIiwiZW5yb2xsbWVudFRpbWUiLCJlbnJvbGxlZEF0IiwiZW5yb2xsbWVudCIsIlBob25lTXVsdGlGYWN0b3JJbmZvSW1wbCIsIl9mcm9tU2VydmVyUmVzcG9uc2UiLCJUb3RwTXVsdGlGYWN0b3JJbmZvSW1wbCIsInBob25lSW5mbyIsIl9zZXRBY3Rpb25Db2RlU2V0dGluZ3NPblJlcXVlc3QiLCJhY3Rpb25Db2RlU2V0dGluZ3MiLCJkeW5hbWljTGlua0RvbWFpbiIsImNhbkhhbmRsZUNvZGVJbkFwcCIsImhhbmRsZUNvZGVJbkFwcCIsImlPUyIsImJ1bmRsZUlkIiwiaU9TQnVuZGxlSWQiLCJhbmRyb2lkIiwicGFja2FnZU5hbWUiLCJhbmRyb2lkSW5zdGFsbEFwcCIsImluc3RhbGxBcHAiLCJhbmRyb2lkTWluaW11bVZlcnNpb25Db2RlIiwibWluaW11bVZlcnNpb24iLCJhbmRyb2lkUGFja2FnZU5hbWUiLCJzZW5kUGFzc3dvcmRSZXNldEVtYWlsIiwicmVxdWVzdFR5cGUiLCJjb25maXJtUGFzc3dvcmRSZXNldCIsIm5ld1Bhc3N3b3JkIiwiYXBwbHlBY3Rpb25Db2RlIiwiYXBwbHlBY3Rpb25Db2RlJDEiLCJjaGVja0FjdGlvbkNvZGUiLCJhdXRoTW9kdWxhciIsIm5ld0VtYWlsIiwibWZhSW5mbyIsIm11bHRpRmFjdG9ySW5mbyIsInByZXZpb3VzRW1haWwiLCJ2ZXJpZnlQYXNzd29yZFJlc2V0Q29kZSIsImNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCIsInNpZ25VcFJlc3BvbnNlIiwic2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQiLCJzZW5kU2lnbkluTGlua1RvRW1haWwiLCJzZXRBY3Rpb25Db2RlU2V0dGluZ3MiLCJpc1NpZ25JbldpdGhFbWFpbExpbmsiLCJzaWduSW5XaXRoRW1haWxMaW5rIiwiY3JlZGVudGlhbFdpdGhMaW5rIiwiZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwiLCJpZGVudGlmaWVyIiwiY29udGludWVVcmkiLCJzaWduaW5NZXRob2RzIiwiY3JlYXRlQXV0aFVyaSIsInNlbmRFbWFpbFZlcmlmaWNhdGlvbiIsInNlbmRFbWFpbFZlcmlmaWNhdGlvbiQxIiwidmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwiLCJ2ZXJpZnlBbmRDaGFuZ2VFbWFpbCIsInVwZGF0ZVByb2ZpbGUiLCJwcm9maWxlUmVxdWVzdCIsInVwZGF0ZVByb2ZpbGUkMSIsInBhc3N3b3JkUHJvdmlkZXIiLCJmaW5kIiwidXBkYXRlRW1haWwiLCJ1cGRhdGVFbWFpbE9yUGFzc3dvcmQiLCJ1cGRhdGVQYXNzd29yZCIsIkdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8iLCJpc05ld1VzZXIiLCJwcm9maWxlIiwiRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIiwidXNlcm5hbWUiLCJGYWNlYm9va0FkZGl0aW9uYWxVc2VySW5mbyIsIkdpdGh1YkFkZGl0aW9uYWxVc2VySW5mbyIsImxvZ2luIiwiR29vZ2xlQWRkaXRpb25hbFVzZXJJbmZvIiwiVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyIsInNjcmVlbk5hbWUiLCJnZXRBZGRpdGlvbmFsVXNlckluZm8iLCJyYXdVc2VySW5mbyIsImtpbmQiLCJNdWx0aUZhY3RvclNlc3Npb25JbXBsIiwibWZhUGVuZGluZ0NyZWRlbnRpYWwiLCJtdWx0aUZhY3RvclNlc3Npb24iLCJwZW5kaW5nQ3JlZGVudGlhbCIsIl9mcm9tTWZhUGVuZGluZ0NyZWRlbnRpYWwiLCJfZnJvbUlkdG9rZW4iLCJNdWx0aUZhY3RvclJlc29sdmVySW1wbCIsInNlc3Npb24iLCJoaW50cyIsInNpZ25JblJlc29sdmVyIiwibWZhUmVzcG9uc2UiLCJfcHJvY2VzcyIsImFzc2VydGlvbkV4dGVybiIsImdldE11bHRpRmFjdG9yUmVzb2x2ZXIiLCJlcnJvckludGVybmFsIiwiX2Zyb21FcnJvciIsIk11bHRpRmFjdG9yVXNlckltcGwiLCJlbnJvbGxlZEZhY3RvcnMiLCJfb25SZWxvYWQiLCJnZXRTZXNzaW9uIiwiZmluYWxpemVNZmFSZXNwb25zZSIsImluZm9PclVpZCIsIm11bHRpRmFjdG9yVXNlckNhY2hlIiwiV2Vha01hcCIsIm11bHRpRmFjdG9yIiwidXNlck1vZHVsYXIiLCJfZnJvbVVzZXIiLCJCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyIsInN0b3JhZ2VSZXRyaWV2ZXIiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImdldEl0ZW0iLCJCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZSIsImxvY2FsU3RvcmFnZSIsImV2ZW50IiwicG9sbCIsIm9uU3RvcmFnZUV2ZW50IiwibGlzdGVuZXJzIiwibG9jYWxDYWNoZSIsInBvbGxUaW1lciIsInNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCIsIl9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSIsInRvcCIsIl9pc0lmcmFtZSIsImZhbGxiYWNrVG9Qb2xsaW5nIiwibmV3VmFsdWUiLCJvbGRWYWx1ZSIsImZvckFsbENoYW5nZWRLZXlzIiwiX29sZFZhbHVlIiwibm90aWZ5TGlzdGVuZXJzIiwiZGV0YWNoTGlzdGVuZXIiLCJzdG9wUG9sbGluZyIsInN0b3JlZFZhbHVlIiwidHJpZ2dlckxpc3RlbmVycyIsImRvY3VtZW50TW9kZSIsImxpc3RlbmVyIiwiZnJvbSIsInNldEludGVydmFsIiwiU3RvcmFnZUV2ZW50IiwiY2xlYXJJbnRlcnZhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJzdGFydFBvbGxpbmciLCJhdHRhY2hMaXN0ZW5lciIsImRlbGV0ZSIsInNpemUiLCJicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSIsIkJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UiLCJzZXNzaW9uU3RvcmFnZSIsImJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UiLCJSZWNlaXZlciIsImV2ZW50VGFyZ2V0IiwiaGFuZGxlcnNNYXAiLCJoYW5kbGVFdmVudCIsImV4aXN0aW5nSW5zdGFuY2UiLCJyZWNlaXZlcnMiLCJyZWNlaXZlciIsImlzTGlzdGVuaW5ndG8iLCJuZXdJbnN0YW5jZSIsIm1lc3NhZ2VFdmVudCIsImV2ZW50SWQiLCJldmVudFR5cGUiLCJoYW5kbGVycyIsInBvcnRzIiwicG9zdE1lc3NhZ2UiLCJzdGF0dXMiLCJwcm9taXNlcyIsImhhbmRsZXIiLCJvcmlnaW4iLCJmdWxmaWxsZWQiLCJyZWFzb24iLCJfYWxsU2V0dGxlZCIsImV2ZW50SGFuZGxlciIsIl9nZW5lcmF0ZUV2ZW50SWQiLCJkaWdpdHMiLCJTZW5kZXIiLCJtZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwib25NZXNzYWdlIiwidGltZW91dCIsIk1lc3NhZ2VDaGFubmVsIiwiY29tcGxldGlvblRpbWVyIiwic3RhcnQiLCJhY2tUaW1lciIsInBvcnQyIiwiZmluYWxseSIsInJlbW92ZU1lc3NhZ2VIYW5kbGVyIiwiX3dpbmRvdyIsIl9pc1dvcmtlciIsIkRCX05BTUUiLCJEQlByb21pc2UiLCJnZXRPYmplY3RTdG9yZSIsImRiIiwiaXNSZWFkV3JpdGUiLCJ0cmFuc2FjdGlvbiIsIm9iamVjdFN0b3JlIiwiX29wZW5EYXRhYmFzZSIsImNyZWF0ZU9iamVjdFN0b3JlIiwia2V5UGF0aCIsIm9iamVjdFN0b3JlTmFtZXMiLCJ0b1Byb21pc2UiLCJfZGVsZXRlRGF0YWJhc2UiLCJfcHV0T2JqZWN0IiwicHV0IiwiX2RlbGV0ZU9iamVjdCIsIkluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UiLCJwZW5kaW5nV3JpdGVzIiwic2VuZGVyIiwic2VydmljZVdvcmtlclJlY2VpdmVyQXZhaWxhYmxlIiwiYWN0aXZlU2VydmljZVdvcmtlciIsIl93b3JrZXJJbml0aWFsaXphdGlvblByb21pc2UiLCJpbml0aWFsaXplU2VydmljZVdvcmtlck1lc3NhZ2luZyIsIm9wIiwibnVtQXR0ZW1wdHMiLCJfb3BlbkRiIiwiaW5pdGlhbGl6ZVJlY2VpdmVyIiwiaW5pdGlhbGl6ZVNlbmRlciIsIl9zdWJzY3JpYmUiLCJfb3JpZ2luIiwia2V5UHJvY2Vzc2VkIiwiX3BvbGwiLCJfZGF0YSIsInNlcnZpY2VXb3JrZXIiLCJhY3RpdmUiLCJfZ2V0QWN0aXZlU2VydmljZVdvcmtlciIsInJlc3VsdHMiLCJfc2VuZCIsImNvbnRyb2xsZXIiLCJ3cml0ZSIsIl93aXRoUGVuZGluZ1dyaXRlIiwiX3dpdGhSZXRyaWVzIiwibm90aWZ5U2VydmljZVdvcmtlciIsImdldE9iamVjdCIsImdldEFsbFJlcXVlc3QiLCJnZXRBbGwiLCJrZXlzSW5SZXN1bHQiLCJmYmFzZV9rZXkiLCJsb2NhbEtleSIsImluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UiLCJNb2NrUmVDYXB0Y2hhIiwiY291bnRlciIsIl93aWRnZXRzIiwiY29udGFpbmVyIiwicGFyYW1ldGVycyIsIk1vY2tXaWRnZXQiLCJvcHRXaWRnZXRJZCIsImNvbnRhaW5lck9ySWQiLCJkZWxldGVkIiwicmVzcG9uc2VUb2tlbiIsImNsaWNrSGFuZGxlciIsImdldEVsZW1lbnRCeUlkIiwiaXNWaXNpYmxlIiwiY2hlY2tJZkRlbGV0ZWQiLCJsZW4iLCJjaGFycyIsImFsbG93ZWRDaGFycyIsImdlbmVyYXRlUmFuZG9tQWxwaGFOdW1lcmljU3RyaW5nIiwiZXhwaXJlZENhbGxiYWNrIiwiX0pTTE9BRF9DQUxMQkFDSyIsIk5FVFdPUktfVElNRU9VVF9ERUxBWSIsImhvc3RMYW5ndWFnZSIsImxpYnJhcnlTZXBhcmF0ZWx5TG9hZGVkIiwicmVuZGVyIiwiaGwiLCJpc0hvc3RMYW5ndWFnZVZhbGlkIiwic2hvdWxkUmVzb2x2ZUltbWVkaWF0ZWx5IiwicmVjYXB0Y2hhIiwid2lkZ2V0SWQiLCJNb2NrUmVDYXB0Y2hhTG9hZGVySW1wbCIsIkRFRkFVTFRfUEFSQU1TIiwidGhlbWUiLCJSZWNhcHRjaGFWZXJpZmllciIsImRlc3Ryb3llZCIsInRva2VuQ2hhbmdlTGlzdGVuZXJzIiwicmVuZGVyUHJvbWlzZSIsImlzSW52aXNpYmxlIiwibWFrZVRva2VuQ2FsbGJhY2siLCJfcmVjYXB0Y2hhTG9hZGVyIiwidmFsaWRhdGVTdGFydGluZ1N0YXRlIiwiYXNzZXJ0Tm90RGVzdHJveWVkIiwiZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEiLCJ0b2tlbkNoYW5nZSIsIm1ha2VSZW5kZXJQcm9taXNlIiwicmVzZXQiLCJjbGVhcmVkT25lSW5zdGFuY2UiLCJjaGlsZE5vZGVzIiwibm9kZSIsInJlbW92ZUNoaWxkIiwic2l0ZWtleSIsImhhc0NoaWxkTm9kZXMiLCJleGlzdGluZyIsImdsb2JhbEZ1bmMiLCJpbml0IiwiZ3VhcmFudGVlZEVtcHR5IiwiZG9tUmVhZHkiLCJsb2FkIiwicmVjYXB0Y2hhU2l0ZUtleSIsImdldFJlY2FwdGNoYVBhcmFtcyIsIkNvbmZpcm1hdGlvblJlc3VsdEltcGwiLCJvbkNvbmZpcm1hdGlvbiIsImF1dGhDcmVkZW50aWFsIiwiX2Zyb21WZXJpZmljYXRpb24iLCJzaWduSW5XaXRoUGhvbmVOdW1iZXIiLCJhcHBWZXJpZmllciIsIl92ZXJpZnlQaG9uZU51bWJlciIsImxpbmtXaXRoUGhvbmVOdW1iZXIiLCJyZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlciIsInJlY2FwdGNoYVRva2VuIiwicGhvbmVJbmZvT3B0aW9ucyIsInN0YXJ0RW5yb2xsUGhvbmVNZmEiLCJwaG9uZUVucm9sbG1lbnRJbmZvIiwicGhvbmVTZXNzaW9uSW5mbyIsIm11bHRpRmFjdG9ySGludCIsIm11bHRpRmFjdG9yVWlkIiwic3RhcnRTaWduSW5QaG9uZU1mYSIsInBob25lU2lnbkluSW5mbyIsInBob25lUmVzcG9uc2VJbmZvIiwic2VuZFBob25lVmVyaWZpY2F0aW9uQ29kZSIsIl9yZXNldCIsInVwZGF0ZVBob25lTnVtYmVyIiwicGhvbmVPcHRpb25zIiwiYXBwbGljYXRpb25WZXJpZmllciIsIl9mcm9tVG9rZW5SZXNwb25zZSIsIl93aXRoRGVmYXVsdFJlc29sdmVyIiwicmVzb2x2ZXJPdmVycmlkZSIsIlBIT05FX1NJR05fSU5fTUVUSE9EIiwiSWRwQ3JlZGVudGlhbCIsIl9idWlsZElkcFJlcXVlc3QiLCJzZXNzaW9uSWQiLCJyZXR1cm5JZHBDcmVkZW50aWFsIiwiX3NpZ25JbiIsIl9yZWF1dGgiLCJfbGluayIsIkFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiIsInBlbmRpbmdQcm9taXNlIiwiZXZlbnRNYW5hZ2VyIiwib25FeGVjdXRpb24iLCJyZWdpc3RlckNvbnN1bWVyIiwidXJsUmVzcG9uc2UiLCJnZXRJZHBUYXNrIiwidW5yZWdpc3RlckFuZENsZWFuVXAiLCJ1bnJlZ2lzdGVyQ29uc3VtZXIiLCJjbGVhblVwIiwiX1BPTExfV0lORE9XX0NMT1NFX1RJTUVPVVQiLCJzaWduSW5XaXRoUG9wdXAiLCJyZXNvbHZlckludGVybmFsIiwiUG9wdXBPcGVyYXRpb24iLCJleGVjdXRlTm90TnVsbCIsInJlYXV0aGVudGljYXRlV2l0aFBvcHVwIiwibGlua1dpdGhQb3B1cCIsImF1dGhXaW5kb3ciLCJwb2xsSWQiLCJjdXJyZW50UG9wdXBBY3Rpb24iLCJjYW5jZWwiLCJfb3BlblBvcHVwIiwiYXNzb2NpYXRlZEV2ZW50IiwiX29yaWdpblZhbGlkYXRpb24iLCJfaXNJZnJhbWVXZWJTdG9yYWdlU3VwcG9ydGVkIiwiaXNTdXBwb3J0ZWQiLCJwb2xsVXNlckNhbmNlbGxhdGlvbiIsImNsb3NlZCIsInJlZGlyZWN0T3V0Y29tZU1hcCIsIlJlZGlyZWN0QWN0aW9uIiwicmVhZHlPdXRjb21lIiwicGVuZGluZ1JlZGlyZWN0S2V5IiwicmVzb2x2ZXJQZXJzaXN0ZW5jZSIsImhhc1BlbmRpbmdSZWRpcmVjdCIsIl9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsIm9uQXV0aEV2ZW50IiwiX3JlZGlyZWN0VXNlckZvcklkIiwiX3NldFBlbmRpbmdSZWRpcmVjdFN0YXR1cyIsInNpZ25JbldpdGhSZWRpcmVjdCIsIl9vcGVuUmVkaXJlY3QiLCJfc2lnbkluV2l0aFJlZGlyZWN0IiwicmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QiLCJwcmVwYXJlVXNlckZvclJlZGlyZWN0IiwiX3JlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0IiwibGlua1dpdGhSZWRpcmVjdCIsIl9saW5rV2l0aFJlZGlyZWN0IiwiZ2V0UmVkaXJlY3RSZXN1bHQiLCJfZ2V0UmVkaXJlY3RSZXN1bHQiLCJyZXNvbHZlckV4dGVybiIsIkF1dGhFdmVudE1hbmFnZXIiLCJjYWNoZWRFdmVudFVpZHMiLCJjb25zdW1lcnMiLCJxdWV1ZWRSZWRpcmVjdEV2ZW50IiwiaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0IiwibGFzdFByb2Nlc3NlZEV2ZW50VGltZSIsImF1dGhFdmVudENvbnN1bWVyIiwiaXNFdmVudEZvckNvbnN1bWVyIiwic2VuZFRvQ29uc3VtZXIiLCJzYXZlRXZlbnRUb0NhY2hlIiwiaGFzRXZlbnRCZWVuSGFuZGxlZCIsImhhbmRsZWQiLCJjb25zdW1lciIsImlzTnVsbFJlZGlyZWN0RXZlbnQiLCJpc1JlZGlyZWN0RXZlbnQiLCJvbkVycm9yIiwiZXZlbnRJZE1hdGNoZXMiLCJjbGVhciIsImV2ZW50VWlkIiwidiIsIl9nZXRQcm9qZWN0Q29uZmlnIiwiSVBfQUREUkVTU19SRUdFWCIsIkhUVFBfUkVHRVgiLCJtYXRjaERvbWFpbiIsImN1cnJlbnRVcmwiLCJob3N0bmFtZSIsIlVSTCIsImNlVXJsIiwiZXNjYXBlZERvbWFpblBhdHRlcm4iLCJSZWdFeHAiLCJORVRXT1JLX1RJTUVPVVQiLCJyZXNldFVubG9hZGVkR2FwaU1vZHVsZXMiLCJiZWFjb24iLCJfX19qc2wiLCJIIiwiaGludCIsIkwiLCJDUCIsImNhY2hlZEdBcGlMb2FkZXIiLCJfbG9hZEdhcGkiLCJsb2FkR2FwaUlmcmFtZSIsImdhcGkiLCJpZnJhbWVzIiwiZ2V0Q29udGV4dCIsIm9udGltZW91dCIsIklmcmFtZSIsImNiTmFtZSIsImxvYWRHYXBpIiwiUElOR19USU1FT1VUIiwiSUZSQU1FX0FUVFJJQlVURVMiLCJoZWlnaHQiLCJ0YWJpbmRleCIsIkVJRF9GUk9NX0FQSUhPU1QiLCJnZXRJZnJhbWVVcmwiLCJlaWQiLCJmdyIsIkJBU0VfUE9QVVBfT1BUSU9OUyIsInJlc2l6YWJsZSIsInN0YXR1c2JhciIsInRvb2xiYXIiLCJBdXRoUG9wdXAiLCJfb3BlbiIsInNjcmVlbiIsImF2YWlsSGVpZ2h0IiwiYXZhaWxXaWR0aCIsInNjcm9sbGJhcnMiLCJvcHRpb25zU3RyaW5nIiwicmVkdWNlIiwiYWNjdW0iLCJzdGFuZGFsb25lIiwiX2lzSU9TU3RhbmRhbG9uZSIsImNsaWNrIiwiY3JlYXRlRXZlbnQiLCJpbml0TW91c2VFdmVudCIsImRpc3BhdGNoRXZlbnQiLCJvcGVuQXNOZXdXaW5kb3dJT1MiLCJuZXdXaW4iLCJmb2N1cyIsIkZJUkVCQVNFX0FQUF9DSEVDS19GUkFHTUVOVF9JRCIsIl9nZXRSZWRpcmVjdFVybCIsImF1dGhUeXBlIiwicmVkaXJlY3RVcmwiLCJhZGRpdGlvbmFsUGFyYW1zIiwic2V0RGVmYXVsdExhbmd1YWdlIiwiZ2V0Q3VzdG9tUGFyYW1ldGVycyIsImdldFNjb3BlcyIsInRpZCIsInBhcmFtc0RpY3QiLCJhcHBDaGVja1Rva2VuRnJhZ21lbnQiLCJnZXRIYW5kbGVyQmFzZSIsImJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJldmVudE1hbmFnZXJzIiwib3JpZ2luVmFsaWRhdGlvblByb21pc2VzIiwiX3NldFdpbmRvd0xvY2F0aW9uIiwiaW5pdEFuZEdldE1hbmFnZXIiLCJpZnJhbWUiLCJjb250ZXh0Iiwid2hlcmUiLCJtZXNzYWdlSGFuZGxlcnNGaWx0ZXIiLCJDUk9TU19PUklHSU5fSUZSQU1FU19GSUxURVIiLCJhdHRyaWJ1dGVzIiwiZG9udGNsZWFyIiwicmVzdHlsZSIsInNldEhpZGVPbkxlYXZlIiwibmV0d29ya0Vycm9yIiwibmV0d29ya0Vycm9yVGltZXIiLCJjbGVhclRpbWVyQW5kUmVzb2x2ZSIsInBpbmciLCJfb3BlbklmcmFtZSIsInJlZ2lzdGVyIiwiaWZyYW1lRXZlbnQiLCJhdXRoRXZlbnQiLCJvbkV2ZW50Iiwic2VuZCIsImF1dGhvcml6ZWREb21haW5zIiwiZG9tYWluIiwiX3ZhbGlkYXRlT3JpZ2luIiwiTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIiwiX2ZpbmFsaXplRW5yb2xsIiwiX2ZpbmFsaXplU2lnbkluIiwiUGhvbmVNdWx0aUZhY3RvckFzc2VydGlvbkltcGwiLCJmaW5hbGl6ZUVucm9sbFBob25lTWZhIiwicGhvbmVWZXJpZmljYXRpb25JbmZvIiwiZmluYWxpemVTaWduSW5QaG9uZU1mYSIsIlBob25lTXVsdGlGYWN0b3JHZW5lcmF0b3IiLCJfZnJvbUNyZWRlbnRpYWwiLCJGQUNUT1JfSUQiLCJBdXRoSW50ZXJvcCIsImludGVybmFsTGlzdGVuZXJzIiwiYXNzZXJ0QXV0aENvbmZpZ3VyZWQiLCJ1bnN1YnNjcmliZSIsIm9uSWRUb2tlbkNoYW5nZWQiLCJ1cGRhdGVQcm9hY3RpdmVSZWZyZXNoIiwiX2NvcmRvdmFXaW5kb3ciLCJkZXBzIiwiZ2V0UHJvdmlkZXIiLCJhdXRoSW5zdGFuY2UiLCJoaWVyYXJjaHkiLCJfdXBkYXRlRXJyb3JNYXAiLCJfaW5pdGlhbGl6ZVdpdGhQZXJzaXN0ZW5jZSIsIl9pbml0aWFsaXplQXV0aEluc3RhbmNlIiwic2V0SW5zdGFudGlhdGlvbk1vZGUiLCJzZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjayIsIl9pbnN0YW5jZUlkZW50aWZpZXIiLCJfaW5zdGFuY2UiLCJpbml0aWFsaXplIiwiZ2V0VmVyc2lvbkZvclBsYXRmb3JtIiwiX2dlbmVyYXRlSGFuZGxlclVybCIsIkJ1aWxkSW5mbyIsInNlc3Npb25EaWdlc3QiLCJUZXh0RW5jb2RlciIsImVuY29kZSIsImJ1ZmYiLCJBcnJheUJ1ZmZlciIsInZpZXciLCJVaW50OEFycmF5Iiwic3RyaW5nVG9BcnJheUJ1ZmZlciIsImJ1ZiIsImNyeXB0byIsInN1YnRsZSIsImRpZ2VzdCIsIm51bSIsInBhZFN0YXJ0IiwiY29tcHV0ZVNoYTI1NiIsIl9wZXJmb3JtUmVkaXJlY3QiLCJoYW5kbGVyVXJsIiwiY29yZG92YSIsInBsdWdpbnMiLCJicm93c2VydGFiIiwiaXNBdmFpbGFibGUiLCJicm93c2VyVGFiSXNBdmFpbGFibGUiLCJpYWJSZWYiLCJvcGVuVXJsIiwiSW5BcHBCcm93c2VyIiwiX2lzSU9TN09yOCIsInBhc3NpdmVMaXN0ZW5lcnMiLCJpbml0UHJvbWlzZSIsInJlc29sdmVJbmlhbGl6ZWQiLCJfZ2V0QW5kUmVtb3ZlRXZlbnQiLCJwZXJzaXN0ZW5jZUtleSIsIl9ldmVudEZyb21QYXJ0aWFsQW5kVXJsIiwicGFydGlhbEV2ZW50IiwiY2FsbGJhY2tVcmwiLCJzZWFyY2hQYXJhbXNPckVtcHR5IiwiX2dldERlZXBMaW5rRnJvbUNhbGxiYWNrIiwiZXJyb3JPYmplY3QiLCJwYXJzZUpzb25Pck51bGwiLCJnZW5lcmF0ZVNlc3Npb25JZCIsImlkeCIsImNvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIiLCJhdHRhY2hDYWxsYmFja0xpc3RlbmVycyIsIl9qIiwiX2siLCJ3aW4iLCJ1bml2ZXJzYWxMaW5rcyIsIm1pc3NpbmdQbHVnaW4iLCJfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbiIsImluaXRpYWxpemVkIiwicmVzZXRSZWRpcmVjdCIsIl9nZW5lcmF0ZU5ld0V2ZW50IiwiX3NhdmVQYXJ0aWFsRXZlbnQiLCJldmVudExpc3RlbmVyIiwiY2xlYW51cCIsIm9uQ2xvc2VUaW1lciIsImF1dGhFdmVudFNlZW4iLCJjbG9zZUJyb3dzZXJUYWIiLCJyZXN1bWVkIiwidmlzaWJpbGl0eUNoYW5nZWQiLCJ2aXNpYmlsaXR5U3RhdGUiLCJhZGRQYXNzaXZlTGlzdGVuZXIiLCJyZW1vdmVQYXNzaXZlTGlzdGVuZXIiLCJfd2FpdEZvckFwcFJlc3VtZSIsIl9jYiIsImlvc0J1bmRsZUlkIiwiaGFuZGxlT3BlblVSTCIsIm5vRXZlbnRUaW1lb3V0IiwiZ2VuZXJhdGVOb0V2ZW50IiwidW5pdmVyc2FsTGlua3NDYiIsImV2ZW50RGF0YSIsImZpbmFsRXZlbnQiLCJleGlzdGluZ0hhbmRsZU9wZW5VUkwiLCJwYWNrYWdlUHJlZml4IiwiYWRkRnJhbWV3b3JrRm9yTG9nZ2luZyIsIl9sb2dGcmFtZXdvcmsiLCJWIiwiaXNBdXRoZW50aWNhdGVkIiwiVU5BVVRIRU5USUNBVEVEIiwiR09PR0xFX0NSRURFTlRJQUxTIiwiRklSU1RfUEFSVFkiLCJNT0NLX1VTRVIiLCJTIiwiRCIsIkMiLCJ4Iiwic2V0TG9nTGV2ZWwiLCJOIiwiREVCVUciLCIkIiwiZGVidWciLCJNIiwiTyIsIkYiLCJCIiwicSIsIk9LIiwiQ0FOQ0VMTEVEIiwiVU5LTk9XTiIsIklOVkFMSURfQVJHVU1FTlQiLCJERUFETElORV9FWENFRURFRCIsIk5PVF9GT1VORCIsIkFMUkVBRFlfRVhJU1RTIiwiUEVSTUlTU0lPTl9ERU5JRUQiLCJSRVNPVVJDRV9FWEhBVVNURUQiLCJGQUlMRURfUFJFQ09ORElUSU9OIiwiQUJPUlRFRCIsIk9VVF9PRl9SQU5HRSIsIlVOSU1QTEVNRU5URUQiLCJJTlRFUk5BTCIsIlVOQVZBSUxBQkxFIiwiREFUQV9MT1NTIiwiVSIsIksiLCJHIiwiUSIsImVucXVldWVSZXRyeWFibGUiLCJqIiwiY2hhbmdlTGlzdGVuZXIiLCJ6IiwiYWRkQXV0aFRva2VuTGlzdGVuZXIiLCJvbkluaXQiLCJyZW1vdmVBdXRoVG9rZW5MaXN0ZW5lciIsImdldFVpZCIsIlciLCJoIiwiZyIsIkoiLCJZIiwiSSIsImFwcENoZWNrIiwiVCIsImFkZFRva2VuTGlzdGVuZXIiLCJyZW1vdmVUb2tlbkxpc3RlbmVyIiwiWCIsIloiLCJtc0NyeXB0byIsImdldFJhbmRvbVZhbHVlcyIsInR0IiwiZXQiLCJudCIsImV2ZXJ5Iiwic3QiLCJpdCIsIm5hbm9zZWNvbmRzIiwiZnJvbU1pbGxpcyIsInRvTWlsbGlzIiwicnQiLCJ0aW1lc3RhbXAiLCJfY29tcGFyZVRvIiwiaXNFcXVhbCIsIm90Iiwic2VnbWVudHMiLCJvZmZzZXQiLCJjb21wYXJhdG9yIiwibGltaXQiLCJjb25zdHJ1Y3QiLCJ1dCIsInRvQXJyYXkiLCJjYW5vbmljYWxTdHJpbmciLCJjdCIsImF0IiwiaXNWYWxpZElkZW50aWZpZXIiLCJodCIsImZyb21TdHJpbmciLCJwb3BGaXJzdCIsImVtcHR5UGF0aCIsInBvcExhc3QiLCJsYXN0U2VnbWVudCIsImx0IiwiaW5kZXhJZCIsImNvbGxlY3Rpb25Hcm91cCIsImZpZWxkcyIsImluZGV4U3RhdGUiLCJmdCIsImR0Iiwid3QiLCJtdCIsIlVOS05PV05fSUQiLCJfdCIsImZpZWxkUGF0aCIsImd0Iiwic2VxdWVuY2VOdW1iZXIiLCJJdCIsInl0IiwidG9UaW1lc3RhbXAiLCJmcm9tVGltZXN0YW1wIiwiZW1wdHkiLCJwdCIsInJlYWRUaW1lIiwiZG9jdW1lbnRLZXkiLCJsYXJnZXN0QmF0Y2hJZCIsIlR0IiwiY29tcGFyZVRvIiwiRXQiLCJBdCIsIm9uQ29tbWl0dGVkTGlzdGVuZXJzIiwidnQiLCJSdCIsIm5leHRDYWxsYmFjayIsImNhdGNoQ2FsbGJhY2siLCJpc0RvbmUiLCJjYWxsYmFja0F0dGFjaGVkIiwid3JhcEZhaWx1cmUiLCJ3cmFwU3VjY2VzcyIsIndyYXBVc2VyRnVuY3Rpb24iLCJ3YWl0Rm9yIiwiUHQiLCJhYm9ydGVkIiwib25jb21wbGV0ZSIsIm9uYWJvcnQiLCJTdCIsImt0IiwiYWJvcnQiLCJjb21taXQiLCJDdCIsImJ0IiwieHQiLCJzdG9yZSIsIm9uYmxvY2tlZCIsIm9sZFZlcnNpb24iLCJvbnZlcnNpb25jaGFuZ2UiLCJQIiwiUiIsIlZ0IiwiRHQiLCJjb3VudCIsImN1cnNvciIsInJhbmdlIiwicHJpbWFyeUtleSIsImNvbnRpbnVlIiwiZG9uZSIsIm9wZW5LZXlDdXJzb3IiLCJvcGVuQ3Vyc29yIiwiTnQiLCJNdCIsImFzeW5jUXVldWUiLCJlbnF1ZXVlQWZ0ZXJEZWxheSIsIiR0IiwibG9jYWxTdG9yZSIsInJ1blRyYW5zYWN0aW9uIiwiZG9XaGlsZSIsImluZGV4TWFuYWdlciIsImdldE5leHRDb2xsZWN0aW9uR3JvdXBUb1VwZGF0ZSIsImdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAiLCJsb2NhbERvY3VtZW50cyIsImdldE5leHREb2N1bWVudHMiLCJjaGFuZ2VzIiwidXBkYXRlSW5kZXhFbnRyaWVzIiwidXBkYXRlQ29sbGVjdGlvbkdyb3VwIiwiYmF0Y2hJZCIsIk90IiwicHJldmlvdXNWYWx1ZSIsInNlcXVlbmNlTnVtYmVySGFuZGxlciIsIndyaXRlU2VxdWVuY2VOdW1iZXIiLCJGdCIsIkJ0IiwiTHQiLCJpc0ludGVnZXIiLCJNQVhfU0FGRV9JTlRFR0VSIiwiTUlOX1NBRkVfSU5URUdFUiIsInF0IiwiS3QiLCJVdCIsIkd0IiwiX19QUklWQVRFX2xhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXgiLCJRdCIsImp0IiwienQiLCJXdCIsIkh0IiwiSnQiLCJZdCIsIlh0IiwiWnQiLCJ0ZSIsImVlIiwibmUiLCJzZSIsImllIiwib2UiLCJ1ZSIsImNlIiwiYWUiLCJoZSIsImxlIiwiZmUiLCJkZSIsIndlIiwiY3VycmVudFNlcXVlbmNlTnVtYmVyIiwibWUiLCJnZSIsInllIiwicGUiLCJyb290IiwiVGUiLCJFTVBUWSIsImluc2VydCIsImNvcHkiLCJCTEFDSyIsInJlbW92ZSIsInJpZ2h0IiwibWluS2V5IiwibWF4S2V5IiwiaW5vcmRlclRyYXZlcnNhbCIsInJldmVyc2VUcmF2ZXJzYWwiLCJJZSIsImlzUmV2ZXJzZSIsIm5vZGVTdGFjayIsIlJFRCIsImZpeFVwIiwiaXNSZWQiLCJtb3ZlUmVkTGVmdCIsInJlbW92ZU1pbiIsInJvdGF0ZVJpZ2h0IiwibW92ZVJlZFJpZ2h0Iiwicm90YXRlTGVmdCIsImNvbG9yRmxpcCIsImNoZWNrIiwicG93IiwiRWUiLCJnZXRJdGVyYXRvckZyb20iLCJoYXNOZXh0IiwiZ2V0TmV4dCIsImdldEl0ZXJhdG9yIiwiQWUiLCJpdGVyIiwidmUiLCJSZSIsImlzUHJlZml4T2YiLCJQZSIsImJlIiwiVmUiLCJiaW5hcnlTdHJpbmciLCJET01FeGNlcHRpb24iLCJpdGVyYXRvciIsIkVNUFRZX0JZVEVfU1RSSU5HIiwiU2UiLCJEZSIsIm5hbm9zIiwiQ2UiLCJ4ZSIsImZyb21CYXNlNjRTdHJpbmciLCJmcm9tVWludDhBcnJheSIsIk5lIiwibWFwVmFsdWUiLCJfX3R5cGVfXyIsInN0cmluZ1ZhbHVlIiwia2UiLCJfX3ByZXZpb3VzX3ZhbHVlX18iLCJNZSIsIl9fbG9jYWxfd3JpdGVfdGltZV9fIiwidGltZXN0YW1wVmFsdWUiLCIkZSIsImRhdGFiYXNlSWQiLCJzc2wiLCJmb3JjZUxvbmdQb2xsaW5nIiwiYXV0b0RldGVjdExvbmdQb2xsaW5nIiwibG9uZ1BvbGxpbmdPcHRpb25zIiwidXNlRmV0Y2hTdHJlYW1zIiwiT2UiLCJkYXRhYmFzZSIsIkZlIiwiQmUiLCJudWxsVmFsdWUiLCJMZSIsImVuIiwicWUiLCJib29sZWFuVmFsdWUiLCJieXRlc1ZhbHVlIiwicmVmZXJlbmNlVmFsdWUiLCJnZW9Qb2ludFZhbHVlIiwibGF0aXR1ZGUiLCJsb25naXR1ZGUiLCJpbnRlZ2VyVmFsdWUiLCJkb3VibGVWYWx1ZSIsImFycmF5VmFsdWUiLCJ2YWx1ZXMiLCJVZSIsIktlIiwiR2UiLCJRZSIsImplIiwidG9CYXNlNjQiLCJmcm9tTmFtZSIsIldlIiwiSGUiLCJKZSIsIlllIiwiWGUiLCJaZSIsInRuIiwibm4iLCJOYU4iLCJzbiIsInJuIiwiaW5jbHVzaXZlIiwib24iLCJ1biIsImdldEZpZWxkc01hcCIsImlzSW1tZWRpYXRlUGFyZW50T2YiLCJhcHBseUNoYW5nZXMiLCJmaWVsZCIsImNuIiwiY2hpbGQiLCJhbiIsImRvY3VtZW50VHlwZSIsImNyZWF0ZVRpbWUiLCJkb2N1bWVudFN0YXRlIiwiaGFzTG9jYWxNdXRhdGlvbnMiLCJoYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJjbG9uZSIsImhuIiwibG4iLCJpc0tleUZpZWxkIiwiZGlyIiwiZG4iLCJ3biIsIl9uIiwibW4iLCJjcmVhdGVLZXlGaWVsZEluRmlsdGVyIiwiUG4iLCJEbiIsIkNuIiwieG4iLCJObiIsImJuIiwiVm4iLCJtYXRjaGVzQ29tcGFyaXNvbiIsImlzSW5lcXVhbGl0eSIsImduIiwiZmlsdGVycyIsInluIiwiY29uY2F0IiwiZ2V0RmxhdHRlbmVkRmlsdGVycyIsInBuIiwiSW4iLCJUbiIsIkFuIiwidm4iLCJSbiIsImdldEZpbHRlcnMiLCJTbiIsImtuIiwib3JkZXJCeSIsInN0YXJ0QXQiLCJlbmRBdCIsIk1uIiwiJG4iLCJFbiIsIk9uIiwiRm4iLCJpc0RvY3VtZW50S2V5IiwiQm4iLCJMbiIsInFuIiwiVW4iLCJleHBsaWNpdE9yZGVyQnkiLCJsaW1pdFR5cGUiLCJLbiIsIkduIiwiUW4iLCJqbiIsInpuIiwiZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQiLCJXbiIsIkhuIiwia2V5RmllbGQiLCJKbiIsIlluIiwiWG4iLCJabiIsInRzIiwiZXMiLCJpc0ZvdW5kRG9jdW1lbnQiLCJoYXNDb2xsZWN0aW9uSWQiLCJzcyIsImlzIiwicnMiLCJvcyIsIm1hcEtleUZuIiwiZXF1YWxzRm4iLCJpbm5lciIsImlubmVyU2l6ZSIsInNwbGljZSIsInVzIiwiY3MiLCJhcyIsImhzIiwibHMiLCJvdmVybGF5ZWREb2N1bWVudCIsImZzIiwid3MiLCJkcyIsIl9zIiwibXMiLCJncyIsInlzIiwicHMiLCJJcyIsInVzZVByb3RvM0pzb24iLCJUcyIsIkVzIiwiQXMiLCJ2cyIsImJzIiwiVnMiLCJTcyIsIkRzIiwiQ3MiLCJQcyIsIk5zIiwic2VyaWFsaXplciIsIlJzIiwieHMiLCJlbGVtZW50cyIsImtzIiwiTXMiLCJ0cmFuc2Zvcm0iLCJPcyIsInRyYW5zZm9ybVJlc3VsdHMiLCJGcyIsInVwZGF0ZVRpbWUiLCJleGlzdHMiLCJCcyIsIkxzIiwicXMiLCJpc05vRG9jdW1lbnQiLCJZcyIsIm5vbmUiLCJqcyIsInpzIiwiVXMiLCJIcyIsImZpZWxkVHJhbnNmb3JtcyIsInNldEFsbCIsImNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQiLCJzZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMiLCJwcmVjb25kaXRpb24iLCJjb252ZXJ0VG9Vbmtub3duRG9jdW1lbnQiLCJXcyIsImNvbnZlcnRUb05vRG9jdW1lbnQiLCJLcyIsIkpzIiwic2V0SGFzTG9jYWxNdXRhdGlvbnMiLCJ1bmlvbldpdGgiLCJmaWVsZE1hc2siLCJHcyIsIlFzIiwiJHMiLCJYcyIsIlpzIiwibG9jYWxXcml0ZVRpbWUiLCJiYXNlTXV0YXRpb25zIiwibXV0YXRpb25zIiwibXV0YXRpb25SZXN1bHRzIiwiYXBwbHlUb0xvY2FsVmlldyIsIm11dGF0ZWRGaWVsZHMiLCJpc1ZhbGlkRG9jdW1lbnQiLCJ0aSIsImJhdGNoIiwiY29tbWl0VmVyc2lvbiIsImRvY1ZlcnNpb25zIiwiZWkiLCJtdXRhdGlvbiIsIm5pIiwiYWxpYXMiLCJzaSIsInVuY2hhbmdlZE5hbWVzIiwiaWkiLCJyaSIsIm9pIiwidWkiLCJjaSIsIm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3MiLCJhaSIsImhpIiwibGkiLCJmaSIsInVwZGF0ZSIsImRpIiwiRGF0YVZpZXciLCJidWZmZXIiLCJnZXRVaW50MzIiLCJ3aSIsImJpdG1hcCIsInBhZGRpbmciLCJoYXNoQ291bnQiLCJfaSIsImZyb21OdW1iZXIiLCJtdWx0aXBseSIsImNvbXBhcmUiLCJnZXRCaXRzIiwibW9kdWxvIiwidG9OdW1iZXIiLCJjZWlsIiwibWkiLCJzbmFwc2hvdFZlcnNpb24iLCJ0YXJnZXRDaGFuZ2VzIiwidGFyZ2V0TWlzbWF0Y2hlcyIsImRvY3VtZW50VXBkYXRlcyIsInJlc29sdmVkTGltYm9Eb2N1bWVudHMiLCJnaSIsImNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSIsInJlc3VtZVRva2VuIiwiY3VycmVudCIsImFkZGVkRG9jdW1lbnRzIiwibW9kaWZpZWREb2N1bWVudHMiLCJyZW1vdmVkRG9jdW1lbnRzIiwieWkiLCJyZW1vdmVkVGFyZ2V0SWRzIiwicGkiLCJ0YXJnZXRJZCIsIklpIiwic3RhdGUiLCJ0YXJnZXRJZHMiLCJjYXVzZSIsIlRpIiwidmkiLCJhcHByb3hpbWF0ZUJ5dGVTaXplIiwiRWkiLCJBaSIsImZvckVhY2hUYXJnZXQiLCJyZW1vdmVUYXJnZXQiLCJuZXdOb0RvY3VtZW50Iiwibm90aWZ5T25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaCIsImxvY2FsQ2FjaGVDb3VudCIsImV4aXN0ZW5jZUZpbHRlckNvdW50IiwiYmxvb21GaWx0ZXIiLCJhcHBsaWVkIiwiYml0bWFwTGVuZ3RoIiwiYml0cyIsInRvVWludDhBcnJheSIsImdldFJlbW90ZUtleXNGb3JUYXJnZXQiLCJmb3JFYWNoV2hpbGUiLCJwdXJwb3NlIiwic2V0UmVhZFRpbWUiLCJSaSIsImFzYyIsImRlc2MiLCJQaSIsImluIiwiYmkiLCJhbmQiLCJvciIsIlZpIiwiU2kiLCJEaSIsInRvSVNPU3RyaW5nIiwiQ2kiLCJ4aSIsIk5pIiwia2kiLCJNaSIsInVyIiwiJGkiLCJPaSIsInFpIiwiRmkiLCJCaSIsIkxpIiwiVWkiLCJLaSIsIm5ld0ZvdW5kRG9jdW1lbnQiLCJqaSIsInVwZGF0ZU1hc2siLCJ1cGRhdGVUcmFuc2Zvcm1zIiwic2V0VG9TZXJ2ZXJWYWx1ZSIsImFwcGVuZE1pc3NpbmdFbGVtZW50cyIsInJlbW92ZUFsbEZyb21BcnJheSIsImluY3JlbWVudCIsImlzTm9uZSIsImN1cnJlbnREb2N1bWVudCIsInppIiwiZnJvbVNlcnZlckZvcm1hdCIsImZpZWxkUGF0aHMiLCJIaSIsImRvY3VtZW50cyIsIkppIiwic3RydWN0dXJlZFF1ZXJ5IiwicGFyZW50IiwiY29sbGVjdGlvbklkIiwiYWxsRGVzY2VuZGFudHMiLCJyciIsInVuYXJ5RmlsdGVyIiwic3IiLCJmaWVsZEZpbHRlciIsImVyIiwiY29tcG9zaXRlRmlsdGVyIiwibnIiLCJkaXJlY3Rpb24iLCJ0ciIsImJlZm9yZSIsIllpIiwiWmkiLCJpciIsImNyIiwibGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiIsImV4cGVjdGVkQ291bnQiLCJhciIsImxyIiwicHJlZml4UGF0aCIsImdldENvbGxlY3Rpb25QYXRoIiwiZG9jdW1lbnRJZCIsImZyIiwibm9Eb2N1bWVudCIsImRyIiwiaXNVbmtub3duRG9jdW1lbnQiLCJ1bmtub3duRG9jdW1lbnQiLCJ3ciIsIl9yIiwibG9jYWxXcml0ZVRpbWVNcyIsIm1yIiwibGFzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwiZ3IiLCJjYW5vbmljYWxJZCIsInlyIiwicHIiLCJvdmVybGF5TXV0YXRpb24iLCJJciIsIlRyIiwiRXIiLCJBciIsInZyIiwiYnVuZGxlZFF1ZXJ5IiwiUnIiLCJ1c2VySWQiLCJQciIsImdldE92ZXJsYXkiLCJJREJLZXlSYW5nZSIsImJvdW5kIiwiUE9TSVRJVkVfSU5GSU5JVFkiLCJnZXRLZXkiLCJjb2xsZWN0aW9uUGF0aCIsImdldENvbGxlY3Rpb25Hcm91cCIsImJyIiwiVnIiLCJTciIsIkRyIiwiY29kZVBvaW50QXQiLCJzZXRGbG9hdDY0IiwiQ3IiLCJ4ciIsIk5yIiwiemUiLCJzZWVkIiwia3IiLCJkaXJlY3Rpb25hbFZhbHVlIiwiTXIiLCIkciIsIk9yIiwiQnIiLCJLciIsImpyIiwiVXIiLCJHciIsIkZyIiwiTHIiLCJxciIsIlFyIiwienIiLCJXciIsImdldEVudHJpZXMiLCJIciIsIkpyIiwiYWRkT25Db21taXR0ZWRMaXN0ZW5lciIsIllyIiwiWnIiLCJ0byIsIlhyIiwiZiIsInciLCJmcm9tU2VnbWVudHMiLCJjcmVhdGVSYW5nZSIsImdldEZpZWxkSW5kZXhlcyIsIm9yZGVyZWREb2N1bWVudEtleSIsIm9ubHkiLCJ1cHBlckJvdW5kIiwiZW8iLCJtYXBBcnJheSIsIm5vIiwiZGlkUnVuIiwic2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkIiwidGFyZ2V0c1JlbW92ZWQiLCJkb2N1bWVudHNSZW1vdmVkIiwic28iLCJjYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkIiwicGVyY2VudGlsZVRvQ29sbGVjdCIsIm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QiLCJERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSIsIkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCIsImlvIiwicm8iLCJERUZBVUxUIiwiRElTQUJMRUQiLCJvbyIsInJlZmVyZW5jZURlbGVnYXRlIiwiTkVHQVRJVkVfSU5GSU5JVFkiLCJjbyIsImFvIiwiYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgiLCJsb29rdXBNdXRhdGlvbkJhdGNoIiwibG93ZXJCb3VuZCIsIm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkIiwiY2hlY2tFbXB0eSIsInVvIiwiaG8iLCJsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZCIsImxhc3RTdHJlYW1Ub2tlbiIsImxvIiwiZm8iLCJoaWdoZXN0VGFyZ2V0SWQiLCJsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uIiwiaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyIiwidGFyZ2V0Q291bnQiLCJyZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCIsIndvIiwicmVtb3ZlVGFyZ2V0RGF0YSIsIl9vIiwibW8iLCJhZGRSZWZlcmVuY2UiLCJyZW1vdmVSZWZlcmVuY2UiLCJnbyIsInlvIiwibGFzdCIsInBvIiwiZ2FyYmFnZUNvbGxlY3RvciIsImNvbGxlY3RHYXJiYWdlIiwiSW8iLCJtYXhWYWx1ZSIsInJlbW92ZVRhcmdldHMiLCJyZW1vdmVPcnBoYW5lZERvY3VtZW50cyIsImdldENhY2hlU2l6ZSIsImNhbGN1bGF0ZVRhcmdldENvdW50IiwibnRoU2VxdWVuY2VOdW1iZXIiLCJUbyIsIkVvIiwiZ2V0VGFyZ2V0Q2FjaGUiLCJnZXRUYXJnZXRDb3VudCIsIkFvIiwiZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSIsIm5ld0NoYW5nZUJ1ZmZlciIsImdldEVudHJ5IiwicmVtb3ZlRW50cnkiLCJhcHBseSIsIndpdGhTZXF1ZW5jZU51bWJlciIsInVwZGF0ZVRhcmdldERhdGEiLCJnZXRTaXplIiwidm8iLCJjaGFuZ2VzQXBwbGllZCIsImFzc2VydE5vdEFwcGxpZWQiLCJuZXdJbnZhbGlkRG9jdW1lbnQiLCJnZXRGcm9tQ2FjaGUiLCJnZXRBbGxGcm9tQ2FjaGUiLCJSbyIsIlNvIiwiZ2V0TWV0YWRhdGEiLCJieXRlU2l6ZSIsIkRvIiwieG8iLCJmaXJzdCIsIkNvIiwiYm8iLCJ0cmFja1JlbW92YWxzIiwiVm8iLCJuZXdVbmtub3duRG9jdW1lbnQiLCJociIsIlBvIiwiYWRkRW50cnkiLCJ1cGRhdGVNZXRhZGF0YSIsIk5vIiwia28iLCJyZW1vdGVEb2N1bWVudENhY2hlIiwibXV0YXRpb25RdWV1ZSIsImRvY3VtZW50T3ZlcmxheUNhY2hlIiwiZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHMiLCJwb3B1bGF0ZU92ZXJsYXlzIiwiY29tcHV0ZVZpZXdzIiwiZ2V0T3ZlcmxheXMiLCJnZXRGaWVsZE1hc2siLCJyZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyIsImdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5cyIsImdldFJldmVyc2VJdGVyYXRvciIsInNhdmVPdmVybGF5cyIsImdldERvY3VtZW50c01hdGNoaW5nRG9jdW1lbnRRdWVyeSIsImdldERvY3VtZW50c01hdGNoaW5nQ29sbGVjdGlvbkdyb3VwUXVlcnkiLCJnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSIsImdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAiLCJnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cCIsImdldERvY3VtZW50IiwiZ2V0Q29sbGVjdGlvblBhcmVudHMiLCJnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24iLCJnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5IiwiTW8iLCIkbyIsIm92ZXJsYXlzIiwiT28iLCJGbyIsImZvckVhY2hJblJhbmdlIiwiZmlyc3RBZnRlck9yRXF1YWwiLCJCbyIsInNoaWZ0IiwiTG8iLCJkb2NzIiwibXV0YWJsZUNvcHkiLCJxbyIsIlVvIiwiY29udGFpbnNLZXkiLCJLbyIsInRvS2V5IiwiR28iLCJyYWlzZU9uQ29tbWl0dGVkRXZlbnQiLCJRbyIsImdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkIiwiZnJvbVBhdGgiLCJqbyIsInpvIiwiYXV0b0luY3JlbWVudCIsImNyZWF0ZUluZGV4IiwidW5pcXVlIiwiV28iLCJkZWxldGVPYmplY3RTdG9yZSIsImdldEluZGV4TWFuYWdlciIsInJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzIiwiSG8iLCJKbyIsImFsbG93VGFiU3luY2hyb25pemF0aW9uIiwiY2xpZW50SWQiLCJpc1ByaW1hcnkiLCJuZXR3b3JrRW5hYmxlZCIsImluRm9yZWdyb3VuZCIsImdldEhpZ2hlc3RTZXF1ZW5jZU51bWJlciIsInN0YXJ0ZWQiLCJuZXdWZXJzaW9uIiwiZW5xdWV1ZUFuZEZvcmdldCIsIlhvIiwidXBkYXRlVGltZU1zIiwiWW8iLCJvd25lcklkIiwibGVhc2VUaW1lc3RhbXBNcyIsImFwcFZlcnNpb24iLCJlbnRlclJlc3RyaWN0ZWRNb2RlIiwic2h1dGRvd24iLCJabyIsImlzRGVmYXVsdERhdGFiYXNlIiwidHUiLCJmcm9tQ2FjaGUiLCJkb2NDaGFuZ2VzIiwiZG9jIiwiZXUiLCJHaSIsIlFpIiwiZ2V0SW5kZXhUeXBlIiwiZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQiLCJnZXREb2N1bWVudHMiLCJnZXRNaW5PZmZzZXQiLCJXaSIsImhhc1BlbmRpbmdXcml0ZXMiLCJudSIsIlhpIiwiZ2V0QnVuZGxlQ2FjaGUiLCJnZXREb2N1bWVudE92ZXJsYXlDYWNoZSIsImdldE11dGF0aW9uUXVldWUiLCJzZXRJbmRleE1hbmFnZXIiLCJjb2xsZWN0Iiwic3UiLCJpdSIsImdldEFsbE11dGF0aW9uQmF0Y2hlcyIsInJlbW92ZWRCYXRjaElkcyIsImFkZGVkQmF0Y2hJZHMiLCJvdSIsImdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24iLCJjdSIsImF1IiwiZ2V0TmV4dE11dGF0aW9uQmF0Y2hBZnRlckJhdGNoSWQiLCJodSIsImdldFRhcmdldERhdGEiLCJhbGxvY2F0ZVRhcmdldElkIiwiYWRkVGFyZ2V0RGF0YSIsImx1IiwiZnUiLCJfdSIsImR1Iiwid3UiLCJndSIsInNhdmVOYW1lZFF1ZXJ5Iiwid2l0aFJlc3VtZVRva2VuIiwiYWRkTWF0Y2hpbmdLZXlzIiwieXUiLCJwdSIsIkl1IiwiVHUiLCJFdSIsIkF1IiwiYWN0aXZlVGFyZ2V0SWRzIiwidnUiLCJvbmxpbmVTdGF0ZSIsIlJ1IiwiUHUiLCJzeW5jRW5naW5lIiwib25saW5lU3RhdGVIYW5kbGVyIiwiaXNBY3RpdmVRdWVyeVRhcmdldCIsImFkZFBlbmRpbmdNdXRhdGlvbiIsInN0b3JhZ2VBcmVhIiwiYnUiLCJWdSIsIlN1IiwiRHUiLCJDdSIsInJvdW5kIiwieHUiLCJCYXRjaEdldERvY3VtZW50cyIsIkNvbW1pdCIsIlJ1blF1ZXJ5IiwiUnVuQWdncmVnYXRpb25RdWVyeSIsIk51Iiwia3UiLCJNdSIsImRhdGFiYXNlSW5mbyIsInNldFdpdGhDcmVkZW50aWFscyIsImxpc3Rlbk9uY2UiLCJDT01QTEVURSIsImdldExhc3RFcnJvckNvZGUiLCJOT19FUlJPUiIsImdldFJlc3BvbnNlSnNvbiIsIlRJTUVPVVQiLCJIVFRQX0VSUk9SIiwiZ2V0U3RhdHVzIiwiZ2V0UmVzcG9uc2VUZXh0IiwiaHR0cFNlc3Npb25JZFBhcmFtIiwiaW5pdE1lc3NhZ2VIZWFkZXJzIiwibWVzc2FnZVVybFBhcmFtcyIsInNlbmRSYXdKc29uIiwic3VwcG9ydHNDcm9zc0RvbWFpblhociIsImludGVybmFsQ2hhbm5lbFBhcmFtcyIsImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNcyIsImRldGVjdEJ1ZmZlcmluZ1Byb3h5IiwidGltZW91dFNlY29uZHMiLCJsb25nUG9sbGluZ1RpbWVvdXQiLCJ4bWxIdHRwRmFjdG9yeSIsImVuY29kZUluaXRNZXNzYWdlSGVhZGVycyIsImNyZWF0ZVdlYkNoYW5uZWwiLCJsaXN0ZW4iLCJFdmVudFR5cGUiLCJPUEVOIiwiQ0xPU0UiLCJNRVNTQUdFIiwiU1RBVF9FVkVOVCIsInN0YXQiLCJQUk9YWSIsIk5PUFJPWFkiLCIkdSIsIk91IiwiRnUiLCJCdSIsInNraXBEZWxheSIsIkx1IiwiY29ubmVjdGlvbiIsImF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyIiwiYXBwQ2hlY2tDcmVkZW50aWFsc1Byb3ZpZGVyIiwic3RyZWFtIiwiaW52YWxpZGF0ZVRva2VuIiwicXUiLCJ0YXJnZXRDaGFuZ2UiLCJ0YXJnZXRDaGFuZ2VUeXBlIiwiZG9jdW1lbnRDaGFuZ2UiLCJkb2N1bWVudERlbGV0ZSIsImRvY3VtZW50UmVtb3ZlIiwiYWRkVGFyZ2V0IiwibGFiZWxzIiwiVXUiLCJydSIsInV1Iiwic3RyZWFtVG9rZW4iLCJ3cml0ZVJlc3VsdHMiLCJjb21taXRUaW1lIiwid3JpdGVzIiwiS3UiLCJhdXRoQ3JlZGVudGlhbHMiLCJhcHBDaGVja0NyZWRlbnRpYWxzIiwiUXUiLCJtdSIsImp1IiwiZGF0YXN0b3JlIiwicmVtb3RlU3luY2VyIiwiZWMiLCJXdSIsInp1IiwiSHUiLCJ0YyIsIlp1IiwicGMiLCJZdSIsIkp1IiwiWHUiLCJ3aXRoRXhwZWN0ZWRDb3VudCIsIm5jIiwic2MiLCJpYyIsInJjIiwicmVqZWN0TGlzdGVuIiwib2MiLCJhcHBseVJlbW90ZUV2ZW50IiwidWMiLCJjYyIsIkljIiwiYWMiLCJoYyIsImxjIiwiZmMiLCJkYyIsIndjIiwiYXBwbHlTdWNjZXNzZnVsV3JpdGUiLCJtYyIsInJlamVjdEZhaWxlZFdyaXRlIiwiZ2MiLCJ2ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzIiwiaGFuZGxlQ3JlZGVudGlhbENoYW5nZSIsInljIiwic3RvcCIsIlRjIiwidGFyZ2V0VGltZU1zIiwicmVtb3ZhbENhbGxiYWNrIiwiZGVmZXJyZWQiLCJ0aW1lckhhbmRsZSIsImhhbmRsZURlbGF5RWxhcHNlZCIsIkVjIiwiQWMiLCJrZXllZE1hcCIsInNvcnRlZFNldCIsInZjIiwiUmMiLCJvbGREb2NzIiwibXV0YXRlZEtleXMiLCJzeW5jU3RhdGVDaGFuZ2VkIiwiZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMiLCJoYXNDYWNoZWRSZXN1bHRzIiwiZW1wdHlTZXQiLCJQYyIsImJjIiwicXVlcmllcyIsIlZjIiwib25MaXN0ZW4iLCJ4YyIsIlNjIiwib25Vbmxpc3RlbiIsIkRjIiwiQ2MiLCJOYyIsImluY2x1ZGVNZXRhZGF0YUNoYW5nZXMiLCJmcm9tSW5pdGlhbERvY3VtZW50cyIsImtjIiwiR3UiLCJieXRlTGVuZ3RoIiwiTWMiLCIkYyIsImNvbGxlY3Rpb25Hcm91cHMiLCJwcm9ncmVzcyIsIk9jIiwiYnl0ZXNMb2FkZWQiLCJkb2N1bWVudHNMb2FkZWQiLCJuYW1lZFF1ZXJ5IiwiZG9jdW1lbnRNZXRhZGF0YSIsInRhc2tTdGF0ZSIsInRvdGFsRG9jdW1lbnRzIiwidG90YWxCeXRlcyIsIkZjIiwiQmMiLCJMYyIsInRyYWNrIiwic25hcHNob3QiLCJxYyIsIlVjIiwiS2MiLCJyZW1vdGVTdG9yZSIsInNoYXJlZENsaWVudFN0YXRlIiwibWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMiLCJHYyIsInBhIiwiYWRkTG9jYWxRdWVyeVRhcmdldCIsIlFjIiwiaXNQcmltYXJ5Q2xpZW50IiwiaWEiLCJqYyIsInJlbW92ZUxvY2FsUXVlcnlUYXJnZXQiLCJjbGVhclF1ZXJ5U3RhdGUiLCJuYSIsIldjIiwicmVtb3ZlTWF0Y2hpbmdLZXlzIiwid2l0aExhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24iLCJ0b01pY3Jvc2Vjb25kcyIsInVwZGF0ZUxpbWJvRG9jdW1lbnQiLCJzZXRUYXJnZXRzTWV0YWRhdGEiLCJIYyIsInNldE9ubGluZVN0YXRlIiwiSmMiLCJ1cGRhdGVRdWVyeVN0YXRlIiwib2EiLCJZYyIsImFwcGx5VG9SZW1vdGVEb2N1bWVudCIsInJlbW92ZU11dGF0aW9uQmF0Y2giLCJwZXJmb3JtQ29uc2lzdGVuY3lDaGVjayIsInJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCIsImVhIiwidGEiLCJ1cGRhdGVNdXRhdGlvblN0YXRlIiwiWGMiLCJzYSIsInJhIiwiY2EiLCJoYW5kbGVVc2VyQ2hhbmdlIiwiYWEiLCJoYSIsImxhIiwiZmEiLCJ3YSIsIm1hIiwiZ2EiLCJjcmVhdGVTeW50aGVzaXplZFJlbW90ZUV2ZW50Rm9yQ3VycmVudENoYW5nZSIsInlhIiwiSWEiLCJFYSIsInN5bmNocm9uaXplVGFicyIsImNyZWF0ZVNoYXJlZENsaWVudFN0YXRlIiwiY3JlYXRlUGVyc2lzdGVuY2UiLCJjcmVhdGVMb2NhbFN0b3JlIiwiZ2NTY2hlZHVsZXIiLCJjcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlciIsImluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsImNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlciIsImluaXRpYWxVc2VyIiwiQWEiLCJjYWNoZVNpemVCeXRlcyIsIndpdGhDYWNoZVNpemUiLCJ2YSIsImZvcmNlT3duZXJzaGlwIiwiUmEiLCJnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMiLCJpc0xvY2FsUXVlcnlUYXJnZXQiLCJkYSIsIlBhIiwiY3JlYXRlRGF0YXN0b3JlIiwiY3JlYXRlUmVtb3RlU3RvcmUiLCJjcmVhdGVFdmVudE1hbmFnZXIiLCJjcmVhdGVTeW5jRW5naW5lIiwiYmEiLCJWYSIsIm11dGVkIiwiU2EiLCJUZXh0RGVjb2RlciIsImRlY29kZSIsImZpbmRJbmRleCIsInJlYWQiLCJEYSIsInJlYWRWZXJzaW9ucyIsImNvbW1pdHRlZCIsImxhc3RXcml0ZUVycm9yIiwid3JpdHRlbkRvY3MiLCJlbnN1cmVDb21taXROb3RDYWxsZWQiLCJmb3VuZCIsIm1pc3NpbmciLCJyZWNvcmRWZXJzaW9uIiwidG9NdXRhdGlvbiIsInByZWNvbmRpdGlvbkZvclVwZGF0ZSIsIkNhIiwidXBkYXRlRnVuY3Rpb24iLCJtYXhBdHRlbXB0cyIsInhhIiwiQSIsImF1dGhDcmVkZW50aWFsTGlzdGVuZXIiLCJhcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciIsImlzU2h1dHRpbmdEb3duIiwiZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQiLCJfb25saW5lQ29tcG9uZW50cyIsInRlcm1pbmF0ZSIsIl9vZmZsaW5lQ29tcG9uZW50cyIsIk5hIiwiZ2V0Q29uZmlndXJhdGlvbiIsInNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciIsInNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyIiwia2EiLCIkYSIsInNldEFwcENoZWNrVG9rZW5DaGFuZ2VMaXN0ZW5lciIsIk1hIiwiX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIiLCJfb2ZmbGluZSIsIk9hIiwiX29ubGluZSIsIkZhIiwiQmEiLCJMYSIsInFhIiwiVWEiLCJLYSIsInphIiwiSGEiLCJZYSIsIlJlYWRhYmxlU3RyZWFtIiwiZ2V0UmVhZGVyIiwiZ2V0QnVuZGxlTWV0YWRhdGEiLCJfY29tcGxldGVXaXRoIiwiX3VwZGF0ZVByb2dyZXNzIiwic2F2ZUJ1bmRsZU1ldGFkYXRhIiwiX2ZhaWxXaXRoIiwibm90aWZ5QnVuZGxlTG9hZGVkIiwiVGEiLCJ0aCIsImVoIiwibmgiLCJzaCIsImloIiwicmgiLCJvaCIsInVoIiwiY2giLCJhaCIsImNyZWRlbnRpYWxzIiwiaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyIsImNhY2hlIiwiZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyIsImV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucyIsImhoIiwiX2F1dGhDcmVkZW50aWFscyIsIl9hcHBDaGVja0NyZWRlbnRpYWxzIiwiX2RhdGFiYXNlSWQiLCJfYXBwIiwiX3BlcnNpc3RlbmNlS2V5IiwiX3NldHRpbmdzIiwiX3NldHRpbmdzRnJvemVuIiwiX3Rlcm1pbmF0ZVRhc2siLCJzZXNzaW9uSW5kZXgiLCJpYW1Ub2tlbiIsImF1dGhUb2tlbkZhY3RvcnkiLCJjbGllbnQiLCJfdGVybWluYXRlIiwibGgiLCJfZ2V0U2V0dGluZ3MiLCJfc2V0U2V0dGluZ3MiLCJtb2NrVXNlclRva2VuIiwiZmgiLCJjb252ZXJ0ZXIiLCJmaXJlc3RvcmUiLCJ3aCIsImRoIiwiX3F1ZXJ5IiwiX3BhdGgiLCJtaCIsImdoIiwieWgiLCJwaCIsIkloIiwiemMiLCJlbnF1ZXVlIiwiWmMiLCJzdGFjayIsImNyZWF0ZUFuZFNjaGVkdWxlIiwiVGgiLCJFaCIsIl9wcm9ncmVzc09ic2VydmVyIiwiX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIiLCJfbGFzdFByb2dyZXNzIiwiQWgiLCJ2aCIsIl9xdWV1ZSIsIl9maXJlc3RvcmVDbGllbnQiLCJWaCIsIlJoIiwiaXNJbml0aWFsaXplZCIsImdldE9wdGlvbnMiLCJpbnN0YW5jZUlkZW50aWZpZXIiLCJQaCIsIl9pbml0aWFsaXplZCIsImJoIiwidmVyaWZ5Tm90VGVybWluYXRlZCIsIl9mcmVlemVTZXR0aW5ncyIsIl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIiLCJfb25saW5lQ29tcG9uZW50UHJvdmlkZXIiLCJfb2ZmbGluZUtpbmQiLCJTaCIsIkJoIiwiQ2giLCJEaCIsInhoIiwiX3Rlcm1pbmF0ZWQiLCJOaCIsImdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQiLCJraCIsInNldE5ldHdvcmtFbmFibGVkIiwiR2EiLCJNaCIsIlFhIiwiJGgiLCJfZGVsZXRlIiwiT2giLCJGaCIsImdldE5hbWVkUXVlcnkiLCJYYSIsIkxoIiwiX2FnZ3JlZ2F0ZVR5cGUiLCJfaW50ZXJuYWxGaWVsZFBhdGgiLCJxaCIsIl91c2VyRGF0YVdyaXRlciIsImNvbnZlcnRPYmplY3RNYXAiLCJVaCIsIl9ieXRlU3RyaW5nIiwiS2giLCJfaW50ZXJuYWxQYXRoIiwiR2giLCJRaCIsIl9tZXRob2ROYW1lIiwiamgiLCJpc0Zpbml0ZSIsIl9sYXQiLCJfbG9uZyIsInpoIiwiV2giLCJIaCIsIkpoIiwiWWgiLCJnbCIsIm1ldGhvZE5hbWUiLCJYaCIsIlpoIiwidGwiLCJtZXJnZSIsIm1lcmdlRmllbGRzIiwiZGwiLCJsbCIsIndsIiwieWwiLCJjb3ZlcnMiLCJubCIsInNsIiwiaWwiLCJybCIsIm9sIiwidWwiLCJtbCIsImNsIiwiYWwiLCJmbCIsIl90b0ZpZWxkVHJhbnNmb3JtIiwiZnJvbURhdGUiLCJnZXRQcm90b3R5cGVPZiIsIl9sIiwic2VhcmNoIiwicGwiLCJfZmlyZXN0b3JlIiwiX2RvY3VtZW50IiwiX2NvbnZlcnRlciIsIklsIiwiZnJvbUZpcmVzdG9yZSIsImNvbnZlcnRWYWx1ZSIsIlRsIiwiRWwiLCJBbCIsInZsIiwiUmwiLCJWbCIsIlBsIiwiX2FwcGx5IiwiX2ZpZWxkIiwiX29wIiwiX3ZhbHVlIiwiX3BhcnNlIiwiUWwiLCJHbCIsIktsIiwiYmwiLCJfcXVlcnlDb25zdHJhaW50cyIsIl9nZXRPcGVyYXRvciIsIlNsIiwiemwiLCJEbCIsIkNsIiwiX2RpcmVjdGlvbiIsImpsIiwieGwiLCJObCIsIl9saW1pdCIsIl9saW1pdFR5cGUiLCJrbCIsIk1sIiwiJGwiLCJfZG9jT3JGaWVsZHMiLCJfaW5jbHVzaXZlIiwiVWwiLCJPbCIsIkZsIiwiQmwiLCJMbCIsInFsIiwiV2wiLCJjb252ZXJ0VGltZXN0YW1wIiwiY29udmVydFNlcnZlclRpbWVzdGFtcCIsImNvbnZlcnRCeXRlcyIsImNvbnZlcnRSZWZlcmVuY2UiLCJjb252ZXJ0R2VvUG9pbnQiLCJjb252ZXJ0QXJyYXkiLCJjb252ZXJ0T2JqZWN0IiwiSGwiLCJ0b0ZpcmVzdG9yZSIsIkpsIiwiY29udmVydERvY3VtZW50S2V5IiwiWWwiLCJYbCIsIlpsIiwidGYiLCJlZiIsIm5mIiwic2YiLCJfZmlyZXN0b3JlSW1wbCIsInJmIiwic2VydmVyVGltZXN0YW1wcyIsIm9mIiwiX3NuYXBzaG90IiwiX2NhY2hlZENoYW5nZXMiLCJfY2FjaGVkQ2hhbmdlc0luY2x1ZGVNZXRhZGF0YUNoYW5nZXMiLCJvbGRJbmRleCIsIm5ld0luZGV4IiwidWYiLCJjZiIsImFmIiwiQWYiLCJoZiIsImxmIiwiamEiLCJmZiIsImRmIiwid2YiLCJXYSIsIm1mIiwiRWYiLCJnZiIsInlmIiwicGYiLCJJZiIsIlRmIiwiSmEiLCJnZXRPdmVybGF5ZWREb2N1bWVudHMiLCJhZGRNdXRhdGlvbkJhdGNoIiwiYXBwbHlUb0xvY2FsRG9jdW1lbnRTZXQiLCJ2ZiIsIlJmIiwiYXZnIiwic3VtIiwic3RydWN0dXJlZEFnZ3JlZ2F0aW9uUXVlcnkiLCJhZ2dyZWdhdGlvbnMiLCJhZ2dyZWdhdGVGaWVsZHMiLCJQZiIsImJmIiwidGFiTWFuYWdlciIsIiRmIiwiVmYiLCJTZiIsIkRmIiwiQ2YiLCJ4ZiIsIk5mIiwia2YiLCJNZiIsIk9mIiwiRmYiLCJCZiIsIl9jb21taXRIYW5kbGVyIiwiX211dGF0aW9ucyIsIl9jb21taXR0ZWQiLCJfZGF0YVJlYWRlciIsIl92ZXJpZnlOb3RDb21taXR0ZWQiLCJMZiIsInFmIiwiX3RyYW5zYWN0aW9uIiwibG9va3VwIiwiVWYiLCJydW4iLCJLZiIsIkdmIiwiUWYiLCJqZiIsInpmIiwiV2YiLCJIZiIsImluZGV4ZXMiLCJKZiIsImFycmF5Q29uZmlnIiwib3JkZXIiLCJhZGRGaWVsZEluZGV4IiwiZGVsZXRlRmllbGRJbmRleCIsIlphIiwic2V0TXVsdGlwbGVJbnN0YW5jZXMiLCJpZGJQcm94eWFibGVUeXBlcyIsImN1cnNvckFkdmFuY2VNZXRob2RzIiwiY3Vyc29yUmVxdWVzdE1hcCIsInRyYW5zYWN0aW9uRG9uZU1hcCIsInRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCIsInRyYW5zZm9ybUNhY2hlIiwicmV2ZXJzZVRyYW5zZm9ybUNhY2hlIiwiaWRiUHJveHlUcmFwcyIsIklEQlRyYW5zYWN0aW9uIiwid3JhcCIsIndyYXBGdW5jdGlvbiIsImZ1bmMiLCJJREJEYXRhYmFzZSIsIklEQkN1cnNvciIsImFkdmFuY2UiLCJjb250aW51ZVByaW1hcnlLZXkiLCJ1bndyYXAiLCJzdG9yZU5hbWVzIiwidHgiLCJ0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlIiwidW5saXN0ZW4iLCJjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24iLCJJREJPYmplY3RTdG9yZSIsIklEQkluZGV4IiwiUHJveHkiLCJJREJSZXF1ZXN0Iiwic3VjY2VzcyIsInByb21pc2lmeVJlcXVlc3QiLCJyZWFkTWV0aG9kcyIsIndyaXRlTWV0aG9kcyIsImNhY2hlZE1ldGhvZHMiLCJnZXRNZXRob2QiLCJ0YXJnZXRGdW5jTmFtZSIsInVzZUluZGV4IiwiaXNXcml0ZSIsInN0b3JlTmFtZSIsIm9sZFRyYXBzIiwiUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCIsImdldFByb3ZpZGVycyIsImNvbXBvbmVudCIsImdldENvbXBvbmVudCIsImlzVmVyc2lvblNlcnZpY2VQcm92aWRlciIsImxpYnJhcnkiLCJsb2dTdHJpbmciLCJuYW1lJG8iLCJsb2dnZXIiLCJERUZBVUxUX0VOVFJZX05BTUUiLCJQTEFURk9STV9MT0dfU1RSSU5HIiwiX2FwcHMiLCJfY29tcG9uZW50cyIsIl9hZGRDb21wb25lbnQiLCJhZGRDb21wb25lbnQiLCJfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQiLCJhZGRPck92ZXJ3cml0ZUNvbXBvbmVudCIsIl9yZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWUiLCJfZ2V0UHJvdmlkZXIiLCJoZWFydGJlYXRDb250cm9sbGVyIiwidHJpZ2dlckhlYXJ0YmVhdCIsIl9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UiLCJjbGVhckluc3RhbmNlIiwiX2NsZWFyQ29tcG9uZW50cyIsIkVSUk9SUyIsIkVSUk9SX0ZBQ1RPUlkiLCJfaXNEZWxldGVkIiwiX29wdGlvbnMiLCJfY29uZmlnIiwiX25hbWUiLCJfYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkIiwiX2NvbnRhaW5lciIsImNoZWNrRGVzdHJveWVkIiwidmFsIiwiaXNEZWxldGVkIiwiU0RLX1ZFUlNJT04iLCJpbml0aWFsaXplQXBwIiwicmF3Q29uZmlnIiwiZXhpc3RpbmdBcHAiLCJuZXdBcHAiLCJnZXRBcHAiLCJnZXRBcHBzIiwiZGVsZXRlQXBwIiwicmVnaXN0ZXJWZXJzaW9uIiwibGlicmFyeUtleU9yTmFtZSIsInZhcmlhbnQiLCJsaWJyYXJ5TWlzbWF0Y2giLCJ2ZXJzaW9uTWlzbWF0Y2giLCJ3YXJuaW5nIiwib25Mb2ciLCJsb2dDYWxsYmFjayIsIlNUT1JFX05BTUUiLCJkYlByb21pc2UiLCJnZXREYlByb21pc2UiLCJibG9ja2VkIiwidXBncmFkZSIsImJsb2NraW5nIiwidGVybWluYXRlZCIsIm9wZW5Qcm9taXNlIiwib3BlbkRCIiwib3JpZ2luYWxFcnJvck1lc3NhZ2UiLCJ3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQiIsImhlYXJ0YmVhdE9iamVjdCIsImNvbXB1dGVLZXkiLCJpZGJHZXRFcnJvciIsIl9oZWFydGJlYXRzQ2FjaGUiLCJfc3RvcmFnZSIsIl9oZWFydGJlYXRzQ2FjaGVQcm9taXNlIiwiYWdlbnQiLCJnZXRQbGF0Zm9ybUluZm9TdHJpbmciLCJnZXRVVENEYXRlU3RyaW5nIiwibGFzdFNlbnRIZWFydGJlYXREYXRlIiwiaGVhcnRiZWF0cyIsInNpbmdsZURhdGVIZWFydGJlYXQiLCJoYlRpbWVzdGFtcCIsInZhbHVlT2YiLCJvdmVyd3JpdGUiLCJoZWFydGJlYXRzVG9TZW5kIiwidW5zZW50RW50cmllcyIsImhlYXJ0YmVhdHNDYWNoZSIsIm1heFNpemUiLCJoZWFydGJlYXRFbnRyeSIsImhiIiwiZGF0ZXMiLCJjb3VudEJ5dGVzIiwiZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIiLCJoZWFkZXJTdHJpbmciLCJfY2FuVXNlSW5kZXhlZERCUHJvbWlzZSIsInJ1bkluZGV4ZWREQkVudmlyb25tZW50Q2hlY2siLCJyZWFkSGVhcnRiZWF0c0Zyb21JbmRleGVkREIiLCJoZWFydGJlYXRzT2JqZWN0IiwiZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0IiwiY29tbW9uanNHbG9iYWwiLCJnbG9iYWxUaGlzIiwiZXNtIiwiZ29vZyIsInVuc2hpZnQiLCJkZWZhdWx0UHJldmVudGVkIiwieSIsInBhcnNlRmxvYXQiLCJyZWxhdGVkVGFyZ2V0IiwiYnV0dG9uIiwic2NyZWVuWSIsInNjcmVlblgiLCJjbGllbnRZIiwiY2xpZW50WCIsIm1ldGFLZXkiLCJzaGlmdEtleSIsImFsdEtleSIsImN0cmxLZXkiLCJwb2ludGVySWQiLCJwb2ludGVyVHlwZSIsImNoYW5nZWRUb3VjaGVzIiwic3JjRWxlbWVudCIsIm5vZGVOYW1lIiwiZnJvbUVsZW1lbnQiLCJ0b0VsZW1lbnQiLCJwYWdlWCIsInBhZ2VZIiwiMiIsIjMiLCI0IiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsInNyYyIsImNhcHR1cmUiLCJvbmNlIiwiYWIiLCJiYiIsImViIiwiYXR0YWNoRXZlbnQiLCJhZGRMaXN0ZW5lciIsInJlbW92ZUxpc3RlbmVyIiwiZ2IiLCJkZXRhY2hFdmVudCIsImliIiwiZmIiLCJqYiIsImxiIiwibWIiLCJvYiIsInBiIiwicWIiLCJyYiIsInNiIiwidGIiLCJ2YiIsInViIiwid2IiLCJ4YiIsInliIiwiQWIiLCJ6YiIsIkJiIiwiQ2IiLCJEYiIsIkZiIiwiR2IiLCJKYiIsIkUiLCJMYiIsIk1iIiwiTmIiLCJPYiIsIlBiIiwiUWIiLCJSYiIsIlNiIiwiRWIiLCJJYiIsIlRiIiwiS2IiLCIkYiIsIlViIiwiVmIiLCJXYiIsIlhiIiwiSGIiLCJZYiIsIlpiIiwiWE1MSHR0cFJlcXVlc3QiLCJuYiIsImdldFJlc3BvbnNlSGVhZGVyIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwidHJpbSIsImFicyIsImRlY29kZVVSSSIsImVuY29kZVVSSSIsImFkIiwiY2QiLCJkZCIsIlBlcmZvcm1hbmNlTmF2aWdhdGlvblRpbWluZyIsInBlcmZvcm1hbmNlIiwiZ2V0RW50cmllc0J5VHlwZSIsIm5leHRIb3BQcm90b2NvbCIsImVkIiwiZmQiLCJoZCIsImtkIiwibGQiLCJtZCIsIm5kIiwicmVzcG9uc2VUeXBlIiwicmVzcG9uc2VUZXh0Iiwic3RhdHVzVGV4dCIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsInFkIiwib2QiLCJSZXF1ZXN0IiwiYXJyYXlCdWZmZXIiLCJ0ZXh0Iiwic2V0UmVxdWVzdEhlYWRlciIsImFwcGVuZCIsInJkIiwic2QiLCJ0ZCIsInVkIiwidmQiLCJ5ZCIsInpkIiwiQWQiLCJ3ZCIsIm1velJlc3BvbnNlQXJyYXlCdWZmZXIiLCJCZCIsIkNkIiwiRGQiLCJFZCIsImNvbmN1cnJlbnRSZXF1ZXN0TGltaXQiLCJmYXN0SGFuZHNoYWtlIiwiRmQiLCJHZCIsInNlbmRCZWFjb24iLCJJbWFnZSIsIkhkIiwiTGQiLCJLZCIsIkpkIiwiTWQiLCJJZCIsImlzQWN0aXZlIiwiamQiLCJOZCIsIk9kIiwibWVzc2FnZUhlYWRlcnMiLCJjbGllbnRQcm90b2NvbEhlYWRlclJlcXVpcmVkIiwibWVzc2FnZUNvbnRlbnRUeXBlIiwiUGQiLCJfX2hlYWRlcnNfXyIsInN0YXR1c0NvZGUiLCJfX3N0YXR1c19fIiwiX19zbV9fIiwiUWQiLCJibG9ja1NpemUiLCJTZCIsInRvVXBwZXJDYXNlIiwiRm9ybURhdGEiLCJ3aXRoQ3JlZGVudGlhbHMiLCJ4ZCIsImtiIiwiX19kYXRhX18iLCJUZCIsIlVkIiwiV2QiLCJYZCIsIlpkIiwiJGQiLCJZZCIsIkxOMiIsInhvciIsImdldExhc3RFcnJvciIsIlZkIiwiY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCIsImdldFN0YXRFdmVudFRhcmdldCIsIkVycm9yQ29kZSIsIkV2ZW50IiwiU3RhdCIsIkZldGNoWG1sSHR0cEZhY3RvcnkiLCJXZWJDaGFubmVsIiwiWGhySW8iLCJNZDUiLCJJbnRlZ2VyIiwiaW5zdGFuY2VzIiwiTG9nTGV2ZWwiLCJsZXZlbFN0cmluZ1RvRW51bSIsIlZFUkJPU0UiLCJJTkZPIiwiU0lMRU5UIiwiZGVmYXVsdExvZ0xldmVsIiwiQ29uc29sZU1ldGhvZCIsImRlZmF1bHRMb2dIYW5kbGVyIiwibG9nVHlwZSIsIkxvZ2dlciIsIl9sb2dMZXZlbCIsIl9sb2dIYW5kbGVyIiwiX3VzZXJMb2dIYW5kbGVyIiwiVHlwZUVycm9yIiwibGV2ZWwiLCJpbnN0Iiwic2V0VXNlckxvZ0hhbmRsZXIiLCJjdXN0b21Mb2dMZXZlbCIsInVzZXJMb2dIYW5kbGVyIiwiYXJnIiwiaWdub3JlZCIsIkNvbXBvbmVudCIsImluc3RhbmNlRmFjdG9yeSIsIm11bHRpcGxlSW5zdGFuY2VzIiwic2VydmljZVByb3BzIiwiaW5zdGFudGlhdGlvbk1vZGUiLCJvbkluc3RhbmNlQ3JlYXRlZCIsInByb3BzIiwiUHJvdmlkZXIiLCJpbnN0YW5jZXNEZWZlcnJlZCIsImluc3RhbmNlc09wdGlvbnMiLCJvbkluaXRDYWxsYmFja3MiLCJub3JtYWxpemVkSWRlbnRpZmllciIsIm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllciIsInNob3VsZEF1dG9Jbml0aWFsaXplIiwiZ2V0T3JJbml0aWFsaXplU2VydmljZSIsImlzQ29tcG9uZW50RWFnZXIiLCJpbnN0YW5jZURlZmVycmVkIiwic2VydmljZXMiLCJvcHRzIiwiaXNDb21wb25lbnRTZXQiLCJleGlzdGluZ0NhbGxiYWNrcyIsImNhbGxiYWNrcyIsImludm9rZU9uSW5pdENhbGxiYWNrcyIsIkNvbXBvbmVudENvbnRhaW5lciIsInByb3ZpZGVycyIsInNldENvbXBvbmVudCIsIkZpcmViYXNlQXBwSW1wbCIsInJlbW92ZUFwcCIsImZpcmViYXNlJDEiLCJjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZSIsIm5hbWVzcGFjZSIsImZpcmViYXNlQXBwSW1wbCIsImFwcHMiLCJhcHBDb21wYXQiLCJyZWdpc3RlckNvbXBvbmVudCIsImNvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0Iiwic2VydmljZU5hbWVzcGFjZSIsImFwcEFyZyIsIl9nZXRTZXJ2aWNlIiwidXNlQXNTZXJ2aWNlIiwibW9kdWxhckFQSXMiLCJjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUiLCJleHRlbmROYW1lc3BhY2UiLCJzZGtWZXJzaW9uIiwicm5kczgiLCJybmRzIiwiYnl0ZVRvSGV4IiwiYnRoIiwiY2FjaGVkU2V0VGltZW91dCIsImNhY2hlZENsZWFyVGltZW91dCIsImRlZmF1bHRTZXRUaW1vdXQiLCJkZWZhdWx0Q2xlYXJUaW1lb3V0IiwicnVuVGltZW91dCIsImZ1biIsImN1cnJlbnRRdWV1ZSIsImRyYWluaW5nIiwicXVldWVJbmRleCIsImNsZWFuVXBOZXh0VGljayIsImRyYWluUXVldWUiLCJtYXJrZXIiLCJydW5DbGVhclRpbWVvdXQiLCJJdGVtIiwiYXJyYXkiLCJuZXh0VGljayIsInRpdGxlIiwiYXJndiIsInZlcnNpb25zIiwib2ZmIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsInByZXBlbmRMaXN0ZW5lciIsInByZXBlbmRPbmNlTGlzdGVuZXIiLCJiaW5kaW5nIiwiY3dkIiwiY2hkaXIiLCJ1bWFzayIsInNoYXJkSWQiLCJzaGFyZHMiLCJub3RpZnlQcm9taXNlIiwidXVpZCIsInY0Iiwic2V0VGltZSIsImV4cGlyZXMiLCJnZXRTaGFyZElkIiwic2hhcmRzUmVmIiwiY29sbGVjdGlvbiIsInZhbHVlUHJvbWlzZXMiLCJvYnNlcnZhYmxlIiwib25TbmFwc2hvdCIsInNuYXAiLCJyZWYiLCJGaWVsZFZhbHVlIiwic2hhcmRSZWYiLCJzZXREb2MiLCJ2MSIsIl9ub2RlSWQiLCJfY2xvY2tzZXEiLCJybmciLCJieXRlc1RvVXVpZCIsIl9sYXN0TVNlY3MiLCJfbGFzdE5TZWNzIiwiY2xvY2tzZXEiLCJzZWVkQnl0ZXMiLCJtc2VjcyIsIm5zZWNzIiwidG1oIiwiX2lzQW5kcm9pZE9ySW9zQ29yZG92YVNjaGVtZSIsIl9pc0xvY2FsU3RvcmFnZU5vdFN5bmNocm9uaXplZCIsIl9pc0VkZ2UiLCJfaXNXZWJTdG9yYWdlU3VwcG9ydGVkIiwiX2lzUG9wdXBSZWRpcmVjdFN1cHBvcnRlZCIsIl9pc0xpa2VseUNvcmRvdmEiLCJQZXJzaXN0ZW5jZSIsIkxPQ0FMIiwiTk9ORSIsIlNFU1NJT04iLCJfYXNzZXJ0JDMiLCJfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QiLCJnZXRTZXNzaW9uU3RvcmFnZUlmQXZhaWxhYmxlIiwiX2dldFBlcnNpc3RlbmNlIiwiX2Fzc2VydCQyIiwiQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyIiwiYnJvd3NlclJlc29sdmVyIiwiY29yZG92YVJlc29sdmVyIiwidW5kZXJseWluZ1Jlc29sdmVyIiwic2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyIiwiYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIiLCJpc0NvcmRvdmEiLCJ0aW1lb3V0SWQiLCJfaXNDb3Jkb3ZhIiwiY3JlZGVudGlhbEZyb21PYmplY3QiLCJjcmVkZW50aWFsRnJvbVJlc3VsdCIsImNyZWRlbnRpYWxGcm9tRXJyb3IiLCJjb252ZXJ0Q3JlZGVudGlhbCIsImNyZWRlbnRpYWxQcm9taXNlIiwiTXVsdGlGYWN0b3JSZXNvbHZlciIsImNyZWRFcnIiLCJhdHRhY2hFeHRyYUVycm9yRmllbGRzIiwiYWRkaXRpb25hbFVzZXJJbmZvIiwiVXNlciIsImdldE9yQ3JlYXRlIiwiY29udmVydENvbmZpcm1hdGlvblJlc3VsdCIsImNvbmZpcm1hdGlvblJlc3VsdFByb21pc2UiLCJjb25maXJtYXRpb25SZXN1bHRFeHAiLCJjb25maXJtIiwid3JhcHBlZCIsInJlc29sdmVTaWduSW4iLCJVU0VSX01BUCIsInBob25lQ3JlZGVudGlhbCIsIl9hc3NlcnQkMSIsIkF1dGgiLCJsaW5rVW5kZXJseWluZ0F1dGgiLCJidWlsZFBlcnNpc3RlbmNlSGllcmFyY2h5IiwidXNlRGV2aWNlTGFuZ3VhZ2UiLCJlcnJvckZuIiwid3JhcE9ic2VydmVycyIsIm9uQXV0aFN0YXRlQ2hhbmdlZCIsImNvbnZlcnRlZCIsIl92YWxpZGF0ZVBlcnNpc3RlbmNlQXJndW1lbnQiLCJ1cGRhdGVDdXJyZW50VXNlciIsIm9sZE5leHQiLCJwZXJzaXN0ZW5jZXMiLCJfZ2V0UGVyc2lzdGVuY2VzRnJvbVJlZGlyZWN0IiwiUGhvbmVBdXRoUHJvdmlkZXIiLCJ2ZXJpZnlQaG9uZU51bWJlciIsImF1dGhQcm92aWRlciIsInNldFNlcnZpY2VQcm9wcyIsIkFjdGlvbkNvZGVJbmZvIiwiT3BlcmF0aW9uIiwidmFsaWRhdGVTZXRPcHRpb25zIiwiYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSIsImFzc2VydEJhc2U2NEF2YWlsYWJsZSIsIm90aGVyIiwiaXNQYXJ0aWFsT2JzZXJ2ZXIiLCJkYXRhYmFzZUlkT3JBcHAiLCJfcGVyc2lzdGVuY2VQcm92aWRlciIsIl9hcHBDb21wYXQiLCJzZXR0aW5nc0xpdGVyYWwiLCJjdXJyZW50U2V0dGluZ3MiLCJleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYiIsImVuYWJsZU11bHRpVGFiSW5kZXhlZERiUGVyc2lzdGVuY2UiLCJlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSIsImNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UiLCJwYXRoU3RyaW5nIiwicmVwbGFjZUZ1bmN0aW9uTmFtZSIsIldyaXRlQmF0Y2giLCJidW5kbGVEYXRhIiwiZXhwUXVlcnkiLCJmb3JLZXkiLCJkb2N1bWVudFJlZiIsImNhc3RSZWZlcmVuY2UiLCJkYXRhT3JGaWVsZCIsIm1vcmVGaWVsZHNBbmRWYWx1ZXMiLCJleHBTbmFwc2hvdCIsIm1vZGVsT2JqZWN0IiwiY29udmVydGVyTWFwQnlGaXJlc3RvcmUiLCJJTlNUQU5DRVMiLCJ1bnR5cGVkQ29udmVydGVyQnlDb252ZXJ0ZXIiLCJmaWVsZE9yVXBkYXRlRGF0YSIsImV4dHJhY3RTbmFwc2hvdE9wdGlvbnMiLCJ3cmFwT2JzZXJ2ZXIiLCJ3aXRoQ29udmVydGVyIiwiZ2V0SW5zdGFuY2UiLCJ1cGRhdGVkIiwid3JhcHBlciIsInVzZXJPYnNlcnZlciIsIm9wU3RyIiwiZGlyZWN0aW9uU3RyIiwiRG9jdW1lbnRDaGFuZ2UiLCJkb2NDaGFuZ2UiLCJ0aGlzQXJnIiwiZG9jUmVmIiwiZG9jdW1lbnRQYXRoIiwiZmllbGROYW1lcyIsImRlbGVnYXRlIiwiZmlyZXN0b3JlTmFtZXNwYWNlIiwiRmlyZXN0b3JlIiwiR2VvUG9pbnQiLCJUaW1lc3RhbXAiLCJCbG9iIiwiVHJhbnNhY3Rpb24iLCJEb2N1bWVudFJlZmVyZW5jZSIsIkRvY3VtZW50U25hcHNob3QiLCJRdWVyeSIsIlF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCIsIlF1ZXJ5U25hcHNob3QiLCJDb2xsZWN0aW9uUmVmZXJlbmNlIiwiRmllbGRQYXRoIiwiQ0FDSEVfU0laRV9VTkxJTUlURUQiLCJmaXJlc3RvcmVGYWN0b3J5IiwiZmlyZXN0b3JlRXhwIl0sIm1hcHBpbmdzIjoid0JBQ0UsSUFBSUEsRUFBbUIsR0FHdkIsU0FBU0MsRUFBb0JDLEdBRzVCLEdBQUdGLEVBQWlCRSxHQUNuQixPQUFPRixFQUFpQkUsR0FBVUMsUUFHbkMsSUFBSUMsRUFBU0osRUFBaUJFLEdBQVksQ0FDekNHLEVBQUdILEVBQ0hJLEdBQUcsRUFDSEgsUUFBUyxJQVVWLE9BTkFJLEVBQVFMLEdBQVVNLEtBQUtKLEVBQU9ELFFBQVNDLEVBQVFBLEVBQU9ELFFBQVNGLEdBRy9ERyxFQUFPRSxHQUFJLEVBR0pGLEVBQU9ELFFBMERmLE9BckRBRixFQUFvQlEsRUFBSUYsRUFHeEJOLEVBQW9CUyxFQUFJVixFQUd4QkMsRUFBb0JVLEVBQUksU0FBU1IsRUFBU1MsRUFBTUMsR0FDM0NaLEVBQW9CYSxFQUFFWCxFQUFTUyxJQUNsQ0csT0FBT0MsZUFBZWIsRUFBU1MsRUFBTSxDQUFFSyxZQUFZLEVBQU1DLElBQUtMLEtBS2hFWixFQUFvQmtCLEVBQUksU0FBU2hCLEdBQ1gsb0JBQVhpQixRQUEwQkEsT0FBT0MsYUFDMUNOLE9BQU9DLGVBQWViLEVBQVNpQixPQUFPQyxZQUFhLENBQUVDLE1BQU8sV0FFN0RQLE9BQU9DLGVBQWViLEVBQVMsYUFBYyxDQUFFbUIsT0FBTyxLQVF2RHJCLEVBQW9Cc0IsRUFBSSxTQUFTRCxF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eXlGLEVBQWlCOTJGLEVBQUsrMkYsSUFDOUIsVUFBVWhFLGdCQUFnQno0RyxPQUFPOEksT0FBTyxHQUFJNHlHLEtBeUIvQ2hwRyxFQUFTcXJGLGdCQTE5QkEsNkJBQ0ciLCJmaWxlIjoic2hhcmRlZC1jb3VudGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEyKTtcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBAZmlsZW92ZXJ2aWV3IEZpcmViYXNlIGNvbnN0YW50cy4gIFNvbWUgb2YgdGhlc2UgKEBkZWZpbmVzKSBjYW4gYmUgb3ZlcnJpZGRlbiBhdCBjb21waWxlLXRpbWUuXHJcbiAqL1xyXG5jb25zdCBDT05TVEFOVFMgPSB7XHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgY2xpZW50IE5vZGUuanMgU0RLLlxyXG4gICAgICovXHJcbiAgICBOT0RFX0NMSUVOVDogZmFsc2UsXHJcbiAgICAvKipcclxuICAgICAqIEBkZWZpbmUge2Jvb2xlYW59IFdoZXRoZXIgdGhpcyBpcyB0aGUgQWRtaW4gTm9kZS5qcyBTREsuXHJcbiAgICAgKi9cclxuICAgIE5PREVfQURNSU46IGZhbHNlLFxyXG4gICAgLyoqXHJcbiAgICAgKiBGaXJlYmFzZSBTREsgVmVyc2lvblxyXG4gICAgICovXHJcbiAgICBTREtfVkVSU0lPTjogJyR7SlNDT1JFX1ZFUlNJT059J1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhyb3dzIGFuIGVycm9yIGlmIHRoZSBwcm92aWRlZCBhc3NlcnRpb24gaXMgZmFsc3lcclxuICovXHJcbmNvbnN0IGFzc2VydCA9IGZ1bmN0aW9uIChhc3NlcnRpb24sIG1lc3NhZ2UpIHtcclxuICAgIGlmICghYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgdGhyb3cgYXNzZXJ0aW9uRXJyb3IobWVzc2FnZSk7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGFuIEVycm9yIG9iamVjdCBzdWl0YWJsZSBmb3IgdGhyb3dpbmcuXHJcbiAqL1xyXG5jb25zdCBhc3NlcnRpb25FcnJvciA9IGZ1bmN0aW9uIChtZXNzYWdlKSB7XHJcbiAgICByZXR1cm4gbmV3IEVycm9yKCdGaXJlYmFzZSBEYXRhYmFzZSAoJyArXHJcbiAgICAgICAgQ09OU1RBTlRTLlNES19WRVJTSU9OICtcclxuICAgICAgICAnKSBJTlRFUk5BTCBBU1NFUlQgRkFJTEVEOiAnICtcclxuICAgICAgICBtZXNzYWdlKTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkkMSA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICBpZiAoYyA8IDEyOCkge1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IGM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPCAyMDQ4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gNikgfCAxOTI7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChjICYgMHhmYzAwKSA9PT0gMHhkODAwICYmXHJcbiAgICAgICAgICAgIGkgKyAxIDwgc3RyLmxlbmd0aCAmJlxyXG4gICAgICAgICAgICAoc3RyLmNoYXJDb2RlQXQoaSArIDEpICYgMHhmYzAwKSA9PT0gMHhkYzAwKSB7XHJcbiAgICAgICAgICAgIC8vIFN1cnJvZ2F0ZSBQYWlyXHJcbiAgICAgICAgICAgIGMgPSAweDEwMDAwICsgKChjICYgMHgwM2ZmKSA8PCAxMCkgKyAoc3RyLmNoYXJDb2RlQXQoKytpKSAmIDB4MDNmZik7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiAxMikgfCAyMjQ7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBUdXJucyBhbiBhcnJheSBvZiBudW1iZXJzIGludG8gdGhlIHN0cmluZyBnaXZlbiBieSB0aGUgY29uY2F0ZW5hdGlvbiBvZiB0aGVcclxuICogY2hhcmFjdGVycyB0byB3aGljaCB0aGUgbnVtYmVycyBjb3JyZXNwb25kLlxyXG4gKiBAcGFyYW0gYnl0ZXMgQXJyYXkgb2YgbnVtYmVycyByZXByZXNlbnRpbmcgY2hhcmFjdGVycy5cclxuICogQHJldHVybiBTdHJpbmdpZmljYXRpb24gb2YgdGhlIGFycmF5LlxyXG4gKi9cclxuY29uc3QgYnl0ZUFycmF5VG9TdHJpbmcgPSBmdW5jdGlvbiAoYnl0ZXMpIHtcclxuICAgIC8vIFRPRE8odXNlcik6IFVzZSBuYXRpdmUgaW1wbGVtZW50YXRpb25zIGlmL3doZW4gYXZhaWxhYmxlXHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwb3MgPSAwLCBjID0gMDtcclxuICAgIHdoaWxlIChwb3MgPCBieXRlcy5sZW5ndGgpIHtcclxuICAgICAgICBjb25zdCBjMSA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICBpZiAoYzEgPCAxMjgpIHtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGMxKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAxOTEgJiYgYzEgPCAyMjQpIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIG91dFtjKytdID0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMxICYgMzEpIDw8IDYpIHwgKGMyICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYzEgPiAyMzkgJiYgYzEgPCAzNjUpIHtcclxuICAgICAgICAgICAgLy8gU3Vycm9nYXRlIFBhaXJcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBjb25zdCBjNCA9IGJ5dGVzW3BvcysrXTtcclxuICAgICAgICAgICAgY29uc3QgdSA9ICgoKGMxICYgNykgPDwgMTgpIHwgKChjMiAmIDYzKSA8PCAxMikgfCAoKGMzICYgNjMpIDw8IDYpIHwgKGM0ICYgNjMpKSAtXHJcbiAgICAgICAgICAgICAgICAweDEwMDAwO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoMHhkODAwICsgKHUgPj4gMTApKTtcclxuICAgICAgICAgICAgb3V0W2MrK10gPSBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4ZGMwMCArICh1ICYgMTAyMykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgYzIgPSBieXRlc1twb3MrK107XHJcbiAgICAgICAgICAgIGNvbnN0IGMzID0gYnl0ZXNbcG9zKytdO1xyXG4gICAgICAgICAgICBvdXRbYysrXSA9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjMSAmIDE1KSA8PCAxMikgfCAoKGMyICYgNjMpIDw8IDYpIHwgKGMzICYgNjMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3V0LmpvaW4oJycpO1xyXG59O1xyXG4vLyBXZSBkZWZpbmUgaXQgYXMgYW4gb2JqZWN0IGxpdGVyYWwgaW5zdGVhZCBvZiBhIGNsYXNzIGJlY2F1c2UgYSBjbGFzcyBjb21waWxlZCBkb3duIHRvIGVzNSBjYW4ndFxyXG4vLyBiZSB0cmVlc2hha2VkLiBodHRwczovL2dpdGh1Yi5jb20vcm9sbHVwL3JvbGx1cC9pc3N1ZXMvMTY5MVxyXG4vLyBTdGF0aWMgbG9va3VwIG1hcHMsIGxhemlseSBwb3B1bGF0ZWQgYnkgaW5pdF8oKVxyXG5jb25zdCBiYXNlNjQgPSB7XHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gY2hhcmFjdGVycy5cclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqL1xyXG4gICAgY2hhclRvQnl0ZU1hcF86IG51bGwsXHJcbiAgICAvKipcclxuICAgICAqIE1hcHMgYnl0ZXMgdG8gd2Vic2FmZSBjaGFyYWN0ZXJzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgYnl0ZVRvQ2hhck1hcFdlYlNhZmVfOiBudWxsLFxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXBzIHdlYnNhZmUgY2hhcmFjdGVycyB0byBieXRlcy5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNoYXJUb0J5dGVNYXBXZWJTYWZlXzogbnVsbCxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQsIHNoYXJlZCBiZXR3ZWVuXHJcbiAgICAgKiBFTkNPREVEX1ZBTFMgYW5kIEVOQ09ERURfVkFMU19XRUJTQUZFXHJcbiAgICAgKi9cclxuICAgIEVOQ09ERURfVkFMU19CQVNFOiAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVonICsgJ2FiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6JyArICcwMTIzNDU2Nzg5JyxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIGRlZmF1bHQgYWxwaGFiZXQuIFZhbHVlIDY0ICg9KSBpcyBzcGVjaWFsOyBpdCBtZWFucyBcIm5vdGhpbmcuXCJcclxuICAgICAqL1xyXG4gICAgZ2V0IEVOQ09ERURfVkFMUygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICcrLz0nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogT3VyIHdlYnNhZmUgYWxwaGFiZXQuXHJcbiAgICAgKi9cclxuICAgIGdldCBFTkNPREVEX1ZBTFNfV0VCU0FGRSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRSArICctXy4nO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogV2hldGhlciB0aGlzIGJyb3dzZXIgc3VwcG9ydHMgdGhlIGF0b2IgYW5kIGJ0b2EgZnVuY3Rpb25zLiBUaGlzIGV4dGVuc2lvblxyXG4gICAgICogc3RhcnRlZCBhdCBNb3ppbGxhIGJ1dCBpcyBub3cgaW1wbGVtZW50ZWQgYnkgbWFueSBicm93c2Vycy4gV2UgdXNlIHRoZVxyXG4gICAgICogQVNTVU1FXyogdmFyaWFibGVzIHRvIGF2b2lkIHB1bGxpbmcgaW4gdGhlIGZ1bGwgdXNlcmFnZW50IGRldGVjdGlvbiBsaWJyYXJ5XHJcbiAgICAgKiBidXQgc3RpbGwgYWxsb3dpbmcgdGhlIHN0YW5kYXJkIHBlci1icm93c2VyIGNvbXBpbGF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIEhBU19OQVRJVkVfU1VQUE9SVDogdHlwZW9mIGF0b2IgPT09ICdmdW5jdGlvbicsXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1lbmNvZGUgYW4gYXJyYXkgb2YgYnl0ZXMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IEFuIGFycmF5IG9mIGJ5dGVzIChudW1iZXJzIHdpdGhcclxuICAgICAqICAgICB2YWx1ZSBpbiBbMCwgMjU1XSkgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgQm9vbGVhbiBpbmRpY2F0aW5nIHdlIHNob3VsZCB1c2UgdGhlXHJcbiAgICAgKiAgICAgYWx0ZXJuYXRpdmUgYWxwaGFiZXQuXHJcbiAgICAgKiBAcmV0dXJuIFRoZSBiYXNlNjQgZW5jb2RlZCBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIGVuY29kZUJ5dGVBcnJheShpbnB1dCwgd2ViU2FmZSkge1xyXG4gICAgICAgIGlmICghQXJyYXkuaXNBcnJheShpbnB1dCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2VuY29kZUJ5dGVBcnJheSB0YWtlcyBhbiBhcnJheSBhcyBhIHBhcmFtZXRlcicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluaXRfKCk7XHJcbiAgICAgICAgY29uc3QgYnl0ZVRvQ2hhck1hcCA9IHdlYlNhZmVcclxuICAgICAgICAgICAgPyB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1xyXG4gICAgICAgICAgICA6IHRoaXMuYnl0ZVRvQ2hhck1hcF87XHJcbiAgICAgICAgY29uc3Qgb3V0cHV0ID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkgKz0gMykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGlucHV0W2ldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpICsgMSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTIgPSBoYXZlQnl0ZTIgPyBpbnB1dFtpICsgMV0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTMgPSBpICsgMiA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBpbnB1dFtpICsgMl0gOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IGJ5dGUxID4+IDI7XHJcbiAgICAgICAgICAgIGNvbnN0IG91dEJ5dGUyID0gKChieXRlMSAmIDB4MDMpIDw8IDQpIHwgKGJ5dGUyID4+IDQpO1xyXG4gICAgICAgICAgICBsZXQgb3V0Qnl0ZTMgPSAoKGJ5dGUyICYgMHgwZikgPDwgMikgfCAoYnl0ZTMgPj4gNik7XHJcbiAgICAgICAgICAgIGxldCBvdXRCeXRlNCA9IGJ5dGUzICYgMHgzZjtcclxuICAgICAgICAgICAgaWYgKCFoYXZlQnl0ZTMpIHtcclxuICAgICAgICAgICAgICAgIG91dEJ5dGU0ID0gNjQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWhhdmVCeXRlMikge1xyXG4gICAgICAgICAgICAgICAgICAgIG91dEJ5dGUzID0gNjQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3V0cHV0LnB1c2goYnl0ZVRvQ2hhck1hcFtvdXRCeXRlMV0sIGJ5dGVUb0NoYXJNYXBbb3V0Qnl0ZTJdLCBieXRlVG9DaGFyTWFwW291dEJ5dGUzXSwgYnl0ZVRvQ2hhck1hcFtvdXRCeXRlNF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0LmpvaW4oJycpO1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogQmFzZTY0LWVuY29kZSBhIHN0cmluZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaW5wdXQgQSBzdHJpbmcgdG8gZW5jb2RlLlxyXG4gICAgICogQHBhcmFtIHdlYlNhZmUgSWYgdHJ1ZSwgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gVGhlIGJhc2U2NCBlbmNvZGVkIHN0cmluZy5cclxuICAgICAqL1xyXG4gICAgZW5jb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidG9hKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZW5jb2RlQnl0ZUFycmF5KHN0cmluZ1RvQnl0ZUFycmF5JDEoaW5wdXQpLCB3ZWJTYWZlKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGlucHV0IHRvIGRlY29kZS5cclxuICAgICAqIEBwYXJhbSB3ZWJTYWZlIFRydWUgaWYgd2Ugc2hvdWxkIHVzZSB0aGVcclxuICAgICAqICAgICBhbHRlcm5hdGl2ZSBhbHBoYWJldC5cclxuICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgZGVjb2RlZCB2YWx1ZS5cclxuICAgICAqL1xyXG4gICAgZGVjb2RlU3RyaW5nKGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgLy8gU2hvcnRjdXQgZm9yIE1vemlsbGEgYnJvd3NlcnMgdGhhdCBpbXBsZW1lbnRcclxuICAgICAgICAvLyBhIG5hdGl2ZSBiYXNlNjQgZW5jb2RlciBpbiB0aGUgZm9ybSBvZiBcImJ0b2EvYXRvYlwiXHJcbiAgICAgICAgaWYgKHRoaXMuSEFTX05BVElWRV9TVVBQT1JUICYmICF3ZWJTYWZlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBhdG9iKGlucHV0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGJ5dGVBcnJheVRvU3RyaW5nKHRoaXMuZGVjb2RlU3RyaW5nVG9CeXRlQXJyYXkoaW5wdXQsIHdlYlNhZmUpKTtcclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIEJhc2U2NC1kZWNvZGUgYSBzdHJpbmcuXHJcbiAgICAgKlxyXG4gICAgICogSW4gYmFzZS02NCBkZWNvZGluZywgZ3JvdXBzIG9mIGZvdXIgY2hhcmFjdGVycyBhcmUgY29udmVydGVkIGludG8gdGhyZWVcclxuICAgICAqIGJ5dGVzLiAgSWYgdGhlIGVuY29kZXIgZGlkIG5vdCBhcHBseSBwYWRkaW5nLCB0aGUgaW5wdXQgbGVuZ3RoIG1heSBub3RcclxuICAgICAqIGJlIGEgbXVsdGlwbGUgb2YgNC5cclxuICAgICAqXHJcbiAgICAgKiBJbiB0aGlzIGNhc2UsIHRoZSBsYXN0IGdyb3VwIHdpbGwgaGF2ZSBmZXdlciB0aGFuIDQgY2hhcmFjdGVycywgYW5kXHJcbiAgICAgKiBwYWRkaW5nIHdpbGwgYmUgaW5mZXJyZWQuICBJZiB0aGUgZ3JvdXAgaGFzIG9uZSBvciB0d28gY2hhcmFjdGVycywgaXQgZGVjb2Rlc1xyXG4gICAgICogdG8gb25lIGJ5dGUuICBJZiB0aGUgZ3JvdXAgaGFzIHRocmVlIGNoYXJhY3RlcnMsIGl0IGRlY29kZXMgdG8gdHdvIGJ5dGVzLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpbnB1dCBJbnB1dCB0byBkZWNvZGUuXHJcbiAgICAgKiBAcGFyYW0gd2ViU2FmZSBUcnVlIGlmIHdlIHNob3VsZCB1c2UgdGhlIHdlYi1zYWZlIGFscGhhYmV0LlxyXG4gICAgICogQHJldHVybiBieXRlcyByZXByZXNlbnRpbmcgdGhlIGRlY29kZWQgdmFsdWUuXHJcbiAgICAgKi9cclxuICAgIGRlY29kZVN0cmluZ1RvQnl0ZUFycmF5KGlucHV0LCB3ZWJTYWZlKSB7XHJcbiAgICAgICAgdGhpcy5pbml0XygpO1xyXG4gICAgICAgIGNvbnN0IGNoYXJUb0J5dGVNYXAgPSB3ZWJTYWZlXHJcbiAgICAgICAgICAgID8gdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9cclxuICAgICAgICAgICAgOiB0aGlzLmNoYXJUb0J5dGVNYXBfO1xyXG4gICAgICAgIGNvbnN0IG91dHB1dCA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMSA9IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkrKyldO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTIgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlMiA9IGhhdmVCeXRlMiA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDA7XHJcbiAgICAgICAgICAgICsraTtcclxuICAgICAgICAgICAgY29uc3QgaGF2ZUJ5dGUzID0gaSA8IGlucHV0Lmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgYnl0ZTMgPSBoYXZlQnl0ZTMgPyBjaGFyVG9CeXRlTWFwW2lucHV0LmNoYXJBdChpKV0gOiA2NDtcclxuICAgICAgICAgICAgKytpO1xyXG4gICAgICAgICAgICBjb25zdCBoYXZlQnl0ZTQgPSBpIDwgaW5wdXQubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBieXRlNCA9IGhhdmVCeXRlNCA/IGNoYXJUb0J5dGVNYXBbaW5wdXQuY2hhckF0KGkpXSA6IDY0O1xyXG4gICAgICAgICAgICArK2k7XHJcbiAgICAgICAgICAgIGlmIChieXRlMSA9PSBudWxsIHx8IGJ5dGUyID09IG51bGwgfHwgYnl0ZTMgPT0gbnVsbCB8fCBieXRlNCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb25zdCBvdXRCeXRlMSA9IChieXRlMSA8PCAyKSB8IChieXRlMiA+PiA0KTtcclxuICAgICAgICAgICAgb3V0cHV0LnB1c2gob3V0Qnl0ZTEpO1xyXG4gICAgICAgICAgICBpZiAoYnl0ZTMgIT09IDY0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMiA9ICgoYnl0ZTIgPDwgNCkgJiAweGYwKSB8IChieXRlMyA+PiAyKTtcclxuICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUyKTtcclxuICAgICAgICAgICAgICAgIGlmIChieXRlNCAhPT0gNjQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvdXRCeXRlMyA9ICgoYnl0ZTMgPDwgNikgJiAweGMwKSB8IGJ5dGU0O1xyXG4gICAgICAgICAgICAgICAgICAgIG91dHB1dC5wdXNoKG91dEJ5dGUzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0cHV0O1xyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICogTGF6eSBzdGF0aWMgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24uIENhbGxlZCBiZWZvcmVcclxuICAgICAqIGFjY2Vzc2luZyBhbnkgb2YgdGhlIHN0YXRpYyBtYXAgdmFyaWFibGVzLlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgaW5pdF8oKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5dGVUb0NoYXJNYXBfKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnl0ZVRvQ2hhck1hcF8gPSB7fTtcclxuICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBXZWJTYWZlXyA9IHt9O1xyXG4gICAgICAgICAgICAvLyBXZSB3YW50IHF1aWNrIG1hcHBpbmdzIGJhY2sgYW5kIGZvcnRoLCBzbyB3ZSBwcmVjb21wdXRlIHR3byBtYXBzLlxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMuRU5DT0RFRF9WQUxTLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldID0gdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwX1t0aGlzLmJ5dGVUb0NoYXJNYXBfW2ldXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ5dGVUb0NoYXJNYXBXZWJTYWZlX1tpXSA9IHRoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5ieXRlVG9DaGFyTWFwV2ViU2FmZV9baV1dID0gaTtcclxuICAgICAgICAgICAgICAgIC8vIEJlIGZvcmdpdmluZyB3aGVuIGRlY29kaW5nIGFuZCBjb3JyZWN0bHkgZGVjb2RlIGJvdGggZW5jb2RpbmdzLlxyXG4gICAgICAgICAgICAgICAgaWYgKGkgPj0gdGhpcy5FTkNPREVEX1ZBTFNfQkFTRS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoYXJUb0J5dGVNYXBfW3RoaXMuRU5DT0RFRF9WQUxTX1dFQlNBRkUuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGFyVG9CeXRlTWFwV2ViU2FmZV9bdGhpcy5FTkNPREVEX1ZBTFMuY2hhckF0KGkpXSA9IGk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBBbiBlcnJvciBlbmNvdW50ZXJlZCB3aGlsZSBkZWNvZGluZyBiYXNlNjQgc3RyaW5nLlxyXG4gKi9cclxuY2xhc3MgRGVjb2RlQmFzZTY0U3RyaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdEZWNvZGVCYXNlNjRTdHJpbmdFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZ1xyXG4gKi9cclxuY29uc3QgYmFzZTY0RW5jb2RlID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgY29uc3QgdXRmOEJ5dGVzID0gc3RyaW5nVG9CeXRlQXJyYXkkMShzdHIpO1xyXG4gICAgcmV0dXJuIGJhc2U2NC5lbmNvZGVCeXRlQXJyYXkodXRmOEJ5dGVzLCB0cnVlKTtcclxufTtcclxuLyoqXHJcbiAqIFVSTC1zYWZlIGJhc2U2NCBlbmNvZGluZyAod2l0aG91dCBcIi5cIiBwYWRkaW5nIGluIHRoZSBlbmQpLlxyXG4gKiBlLmcuIFVzZWQgaW4gSlNPTiBXZWIgVG9rZW4gKEpXVCkgcGFydHMuXHJcbiAqL1xyXG5jb25zdCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyA9IGZ1bmN0aW9uIChzdHIpIHtcclxuICAgIC8vIFVzZSBiYXNlNjR1cmwgZW5jb2RpbmcgYW5kIHJlbW92ZSBwYWRkaW5nIGluIHRoZSBlbmQgKGRvdCBjaGFyYWN0ZXJzKS5cclxuICAgIHJldHVybiBiYXNlNjRFbmNvZGUoc3RyKS5yZXBsYWNlKC9cXC4vZywgJycpO1xyXG59O1xyXG4vKipcclxuICogVVJMLXNhZmUgYmFzZTY0IGRlY29kaW5nXHJcbiAqXHJcbiAqIE5PVEU6IERPIE5PVCB1c2UgdGhlIGdsb2JhbCBhdG9iKCkgZnVuY3Rpb24gLSBpdCBkb2VzIE5PVCBzdXBwb3J0IHRoZVxyXG4gKiBiYXNlNjRVcmwgdmFyaWFudCBlbmNvZGluZy5cclxuICpcclxuICogQHBhcmFtIHN0ciBUbyBiZSBkZWNvZGVkXHJcbiAqIEByZXR1cm4gRGVjb2RlZCByZXN1bHQsIGlmIHBvc3NpYmxlXHJcbiAqL1xyXG5jb25zdCBiYXNlNjREZWNvZGUgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiBiYXNlNjQuZGVjb2RlU3RyaW5nKHN0ciwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ2Jhc2U2NERlY29kZSBmYWlsZWQ6ICcsIGUpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBEbyBhIGRlZXAtY29weSBvZiBiYXNpYyBKYXZhU2NyaXB0IE9iamVjdHMgb3IgQXJyYXlzLlxyXG4gKi9cclxuZnVuY3Rpb24gZGVlcENvcHkodmFsdWUpIHtcclxuICAgIHJldHVybiBkZWVwRXh0ZW5kKHVuZGVmaW5lZCwgdmFsdWUpO1xyXG59XHJcbi8qKlxyXG4gKiBDb3B5IHByb3BlcnRpZXMgZnJvbSBzb3VyY2UgdG8gdGFyZ2V0IChyZWN1cnNpdmVseSBhbGxvd3MgZXh0ZW5zaW9uXHJcbiAqIG9mIE9iamVjdHMgYW5kIEFycmF5cykuICBTY2FsYXIgdmFsdWVzIGluIHRoZSB0YXJnZXQgYXJlIG92ZXItd3JpdHRlbi5cclxuICogSWYgdGFyZ2V0IGlzIHVuZGVmaW5lZCwgYW4gb2JqZWN0IG9mIHRoZSBhcHByb3ByaWF0ZSB0eXBlIHdpbGwgYmUgY3JlYXRlZFxyXG4gKiAoYW5kIHJldHVybmVkKS5cclxuICpcclxuICogV2UgcmVjdXJzaXZlbHkgY29weSBhbGwgY2hpbGQgcHJvcGVydGllcyBvZiBwbGFpbiBPYmplY3RzIGluIHRoZSBzb3VyY2UtIHNvXHJcbiAqIHRoYXQgbmFtZXNwYWNlLSBsaWtlIGRpY3Rpb25hcmllcyBhcmUgbWVyZ2VkLlxyXG4gKlxyXG4gKiBOb3RlIHRoYXQgdGhlIHRhcmdldCBjYW4gYmUgYSBmdW5jdGlvbiwgaW4gd2hpY2ggY2FzZSB0aGUgcHJvcGVydGllcyBpblxyXG4gKiB0aGUgc291cmNlIE9iamVjdCBhcmUgY29waWVkIG9udG8gaXQgYXMgc3RhdGljIHByb3BlcnRpZXMgb2YgdGhlIEZ1bmN0aW9uLlxyXG4gKlxyXG4gKiBOb3RlOiB3ZSBkb24ndCBtZXJnZSBfX3Byb3RvX18gdG8gcHJldmVudCBwcm90b3R5cGUgcG9sbHV0aW9uXHJcbiAqL1xyXG5mdW5jdGlvbiBkZWVwRXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XHJcbiAgICBpZiAoIShzb3VyY2UgaW5zdGFuY2VvZiBPYmplY3QpKSB7XHJcbiAgICAgICAgcmV0dXJuIHNvdXJjZTtcclxuICAgIH1cclxuICAgIHN3aXRjaCAoc291cmNlLmNvbnN0cnVjdG9yKSB7XHJcbiAgICAgICAgY2FzZSBEYXRlOlxyXG4gICAgICAgICAgICAvLyBUcmVhdCBEYXRlcyBsaWtlIHNjYWxhcnM7IGlmIHRoZSB0YXJnZXQgZGF0ZSBvYmplY3QgaGFkIGFueSBjaGlsZFxyXG4gICAgICAgICAgICAvLyBwcm9wZXJ0aWVzIC0gdGhleSB3aWxsIGJlIGxvc3QhXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGVWYWx1ZSA9IHNvdXJjZTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGVWYWx1ZS5nZXRUaW1lKCkpO1xyXG4gICAgICAgIGNhc2UgT2JqZWN0OlxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGNhc2UgQXJyYXk6XHJcbiAgICAgICAgICAgIC8vIEFsd2F5cyBjb3B5IHRoZSBhcnJheSBzb3VyY2UgYW5kIG92ZXJ3cml0ZSB0aGUgdGFyZ2V0LlxyXG4gICAgICAgICAgICB0YXJnZXQgPSBbXTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgLy8gTm90IGEgcGxhaW4gT2JqZWN0IC0gdHJlYXQgaXQgYXMgYSBzY2FsYXIuXHJcbiAgICAgICAgICAgIHJldHVybiBzb3VyY2U7XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IHByb3AgaW4gc291cmNlKSB7XHJcbiAgICAgICAgLy8gdXNlIGlzVmFsaWRLZXkgdG8gZ3VhcmQgYWdhaW5zdCBwcm90b3R5cGUgcG9sbHV0aW9uLiBTZWUgaHR0cHM6Ly9zbnlrLmlvL3Z1bG4vU05ZSy1KUy1MT0RBU0gtNDUwMjAyXHJcbiAgICAgICAgaWYgKCFzb3VyY2UuaGFzT3duUHJvcGVydHkocHJvcCkgfHwgIWlzVmFsaWRLZXkocHJvcCkpIHtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRhcmdldFtwcm9wXSA9IGRlZXBFeHRlbmQodGFyZ2V0W3Byb3BdLCBzb3VyY2VbcHJvcF0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRhcmdldDtcclxufVxyXG5mdW5jdGlvbiBpc1ZhbGlkS2V5KGtleSkge1xyXG4gICAgcmV0dXJuIGtleSAhPT0gJ19fcHJvdG9fXyc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvbHlmaWxsIGZvciBgZ2xvYmFsVGhpc2Agb2JqZWN0LlxyXG4gKiBAcmV0dXJucyB0aGUgYGdsb2JhbFRoaXNgIG9iamVjdCBmb3IgdGhlIGdpdmVuIGVudmlyb25tZW50LlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRHbG9iYWwoKSB7XHJcbiAgICBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIHNlbGY7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gd2luZG93O1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIGdsb2JhbDtcclxuICAgIH1cclxuICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIGxvY2F0ZSBnbG9iYWwgb2JqZWN0LicpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzRnJvbUdsb2JhbCA9ICgpID0+IGdldEdsb2JhbCgpLl9fRklSRUJBU0VfREVGQVVMVFNfXztcclxuLyoqXHJcbiAqIEF0dGVtcHQgdG8gcmVhZCBkZWZhdWx0cyBmcm9tIGEgSlNPTiBzdHJpbmcgcHJvdmlkZWQgdG9cclxuICogcHJvY2VzcyguKWVudiguKV9fRklSRUJBU0VfREVGQVVMVFNfXyBvciBhIEpTT04gZmlsZSB3aG9zZSBwYXRoIGlzIGluXHJcbiAqIHByb2Nlc3MoLillbnYoLilfX0ZJUkVCQVNFX0RFRkFVTFRTX1BBVEhfX1xyXG4gKiBUaGUgZG90cyBhcmUgaW4gcGFyZW5zIGJlY2F1c2UgY2VydGFpbiBjb21waWxlcnMgKFZpdGU/KSBjYW5ub3RcclxuICogaGFuZGxlIHNlZWluZyB0aGF0IHZhcmlhYmxlIGluIGNvbW1lbnRzLlxyXG4gKiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvNjgzOFxyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tRW52VmFyaWFibGUgPSAoKSA9PiB7XHJcbiAgICBpZiAodHlwZW9mIHByb2Nlc3MgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiBwcm9jZXNzLmVudiA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWZhdWx0c0pzb25TdHJpbmcgPSBwcm9jZXNzLmVudi5fX0ZJUkVCQVNFX0RFRkFVTFRTX187XHJcbiAgICBpZiAoZGVmYXVsdHNKc29uU3RyaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoZGVmYXVsdHNKc29uU3RyaW5nKTtcclxuICAgIH1cclxufTtcclxuY29uc3QgZ2V0RGVmYXVsdHNGcm9tQ29va2llID0gKCkgPT4ge1xyXG4gICAgaWYgKHR5cGVvZiBkb2N1bWVudCA9PT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIG1hdGNoID0gZG9jdW1lbnQuY29va2llLm1hdGNoKC9fX0ZJUkVCQVNFX0RFRkFVTFRTX189KFteO10rKS8pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBTb21lIGVudmlyb25tZW50cyBzdWNoIGFzIEFuZ3VsYXIgVW5pdmVyc2FsIFNTUiBoYXZlIGFcclxuICAgICAgICAvLyBgZG9jdW1lbnRgIG9iamVjdCBidXQgZXJyb3Igb24gYWNjZXNzaW5nIGBkb2N1bWVudC5jb29raWVgLlxyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IGRlY29kZWQgPSBtYXRjaCAmJiBiYXNlNjREZWNvZGUobWF0Y2hbMV0pO1xyXG4gICAgcmV0dXJuIGRlY29kZWQgJiYgSlNPTi5wYXJzZShkZWNvZGVkKTtcclxufTtcclxuLyoqXHJcbiAqIEdldCB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC4gSXQgY2hlY2tzIGluIG9yZGVyOlxyXG4gKiAoMSkgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGFzIGEgcHJvcGVydHkgb2YgYGdsb2JhbFRoaXNgXHJcbiAqICgyKSBpZiBzdWNoIGFuIG9iamVjdCB3YXMgcHJvdmlkZWQgb24gYSBzaGVsbCBlbnZpcm9ubWVudCB2YXJpYWJsZVxyXG4gKiAoMykgaWYgc3VjaCBhbiBvYmplY3QgZXhpc3RzIGluIGEgY29va2llXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRzID0gKCkgPT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKGdldERlZmF1bHRzRnJvbUdsb2JhbCgpIHx8XHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzRnJvbUVudlZhcmlhYmxlKCkgfHxcclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNGcm9tQ29va2llKCkpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDYXRjaC1hbGwgZm9yIGJlaW5nIHVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZVxyXG4gICAgICAgICAqIHRvIGFueSBlbnZpcm9ubWVudCBjYXNlIHdlIGhhdmUgbm90IGFjY291bnRlZCBmb3IuIExvZyB0b1xyXG4gICAgICAgICAqIGluZm8gaW5zdGVhZCBvZiBzd2FsbG93aW5nIHNvIHdlIGNhbiBmaW5kIHRoZXNlIHVua25vd24gY2FzZXNcclxuICAgICAgICAgKiBhbmQgYWRkIHBhdGhzIGZvciB0aGVtIGlmIG5lZWRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zb2xlLmluZm8oYFVuYWJsZSB0byBnZXQgX19GSVJFQkFTRV9ERUZBVUxUU19fIGR1ZSB0bzogJHtlfWApO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdCBzdG9yZWQgaW4gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3RcclxuICogZm9yIHRoZSBnaXZlbiBwcm9kdWN0LlxyXG4gKiBAcmV0dXJucyBhIFVSTCBob3N0IGZvcm1hdHRlZCBsaWtlIGAxMjcuMC4wLjE6OTk5OWAgb3IgYFs6OjFdOjQwMDBgIGlmIGF2YWlsYWJsZVxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBnZXREZWZhdWx0RW11bGF0b3JIb3N0ID0gKHByb2R1Y3ROYW1lKSA9PiB7IHZhciBfYSwgX2I7IHJldHVybiAoX2IgPSAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZW11bGF0b3JIb3N0cykgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iW3Byb2R1Y3ROYW1lXTsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgZW11bGF0b3IgaG9zdG5hbWUgYW5kIHBvcnQgc3RvcmVkIGluIHRoZSBfX0ZJUkVCQVNFX0RFRkFVTFRTX18gb2JqZWN0XHJcbiAqIGZvciB0aGUgZ2l2ZW4gcHJvZHVjdC5cclxuICogQHJldHVybnMgYSBwYWlyIG9mIGhvc3RuYW1lIGFuZCBwb3J0IGxpa2UgYFtcIjo6MVwiLCA0MDAwXWAgaWYgYXZhaWxhYmxlXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCA9IChwcm9kdWN0TmFtZSkgPT4ge1xyXG4gICAgY29uc3QgaG9zdCA9IGdldERlZmF1bHRFbXVsYXRvckhvc3QocHJvZHVjdE5hbWUpO1xyXG4gICAgaWYgKCFob3N0KSB7XHJcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxuICAgIGNvbnN0IHNlcGFyYXRvckluZGV4ID0gaG9zdC5sYXN0SW5kZXhPZignOicpOyAvLyBGaW5kaW5nIHRoZSBsYXN0IHNpbmNlIElQdjYgYWRkciBhbHNvIGhhcyBjb2xvbnMuXHJcbiAgICBpZiAoc2VwYXJhdG9ySW5kZXggPD0gMCB8fCBzZXBhcmF0b3JJbmRleCArIDEgPT09IGhvc3QubGVuZ3RoKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIGhvc3QgJHtob3N0fSB3aXRoIG5vIHNlcGFyYXRlIGhvc3RuYW1lIGFuZCBwb3J0IWApO1xyXG4gICAgfVxyXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xyXG4gICAgY29uc3QgcG9ydCA9IHBhcnNlSW50KGhvc3Quc3Vic3RyaW5nKHNlcGFyYXRvckluZGV4ICsgMSksIDEwKTtcclxuICAgIGlmIChob3N0WzBdID09PSAnWycpIHtcclxuICAgICAgICAvLyBCcmFja2V0LXF1b3RlZCBgW2lwdjZhZGRyXTpwb3J0YCA9PiByZXR1cm4gXCJpcHY2YWRkclwiICh3aXRob3V0IGJyYWNrZXRzKS5cclxuICAgICAgICByZXR1cm4gW2hvc3Quc3Vic3RyaW5nKDEsIHNlcGFyYXRvckluZGV4IC0gMSksIHBvcnRdO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIFtob3N0LnN1YnN0cmluZygwLCBzZXBhcmF0b3JJbmRleCksIHBvcnRdO1xyXG4gICAgfVxyXG59O1xyXG4vKipcclxuICogUmV0dXJucyBGaXJlYmFzZSBhcHAgY29uZmlnIHN0b3JlZCBpbiB0aGUgX19GSVJFQkFTRV9ERUZBVUxUU19fIG9iamVjdC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgZ2V0RGVmYXVsdEFwcENvbmZpZyA9ICgpID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZ2V0RGVmYXVsdHMoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmNvbmZpZzsgfTtcclxuLyoqXHJcbiAqIFJldHVybnMgYW4gZXhwZXJpbWVudGFsIHNldHRpbmcgb24gdGhlIF9fRklSRUJBU0VfREVGQVVMVFNfXyBvYmplY3QgKHByb3BlcnRpZXNcclxuICogcHJlZml4ZWQgYnkgXCJfXCIpXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGdldEV4cGVyaW1lbnRhbFNldHRpbmcgPSAobmFtZSkgPT4geyB2YXIgX2E7IHJldHVybiAoX2EgPSBnZXREZWZhdWx0cygpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbYF8ke25hbWV9YF07IH07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIERlZmVycmVkIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0ID0gKCkgPT4geyB9O1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZSA9ICgpID0+IHsgfTtcclxuICAgICAgICB0aGlzLnByb21pc2UgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZSA9IHJlc29sdmU7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0ID0gcmVqZWN0O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBPdXIgQVBJIGludGVybmFscyBhcmUgbm90IHByb21pc2VpZmllZCBhbmQgY2Fubm90IGJlY2F1c2Ugb3VyIGNhbGxiYWNrIEFQSXMgaGF2ZSBzdWJ0bGUgZXhwZWN0YXRpb25zIGFyb3VuZFxyXG4gICAgICogaW52b2tpbmcgcHJvbWlzZXMgaW5saW5lLCB3aGljaCBQcm9taXNlcyBhcmUgZm9yYmlkZGVuIHRvIGRvLiBUaGlzIG1ldGhvZCBhY2NlcHRzIGFuIG9wdGlvbmFsIG5vZGUtc3R5bGUgY2FsbGJhY2tcclxuICAgICAqIGFuZCByZXR1cm5zIGEgbm9kZS1zdHlsZSBjYWxsYmFjayB3aGljaCB3aWxsIHJlc29sdmUgb3IgcmVqZWN0IHRoZSBEZWZlcnJlZCdzIHByb21pc2UuXHJcbiAgICAgKi9cclxuICAgIHdyYXBDYWxsYmFjayhjYWxsYmFjaykge1xyXG4gICAgICAgIHJldHVybiAoZXJyb3IsIHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNvbHZlKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBBdHRhY2hpbmcgbm9vcCBoYW5kbGVyIGp1c3QgaW4gY2FzZSBkZXZlbG9wZXIgd2Fzbid0IGV4cGVjdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvbWlzZS5jYXRjaCgoKSA9PiB7IH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gU29tZSBvZiBvdXIgY2FsbGJhY2tzIGRvbid0IGV4cGVjdCBhIHZhbHVlIGFuZCBvdXIgb3duIHRlc3RzXHJcbiAgICAgICAgICAgICAgICAvLyBhc3NlcnQgdGhhdCB0aGUgcGFyYW1ldGVyIGxlbmd0aCBpcyAxXHJcbiAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2soZXJyb3IsIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlTW9ja1VzZXJUb2tlbih0b2tlbiwgcHJvamVjdElkKSB7XHJcbiAgICBpZiAodG9rZW4udWlkKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgXCJ1aWRcIiBmaWVsZCBpcyBubyBsb25nZXIgc3VwcG9ydGVkIGJ5IG1vY2tVc2VyVG9rZW4uIFBsZWFzZSB1c2UgXCJzdWJcIiBpbnN0ZWFkIGZvciBGaXJlYmFzZSBBdXRoIFVzZXIgSUQuJyk7XHJcbiAgICB9XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgXCJub25lXCIgYXMgdGhlIGFsZ29yaXRobS5cclxuICAgIGNvbnN0IGhlYWRlciA9IHtcclxuICAgICAgICBhbGc6ICdub25lJyxcclxuICAgICAgICB0eXBlOiAnSldUJ1xyXG4gICAgfTtcclxuICAgIGNvbnN0IHByb2plY3QgPSBwcm9qZWN0SWQgfHwgJ2RlbW8tcHJvamVjdCc7XHJcbiAgICBjb25zdCBpYXQgPSB0b2tlbi5pYXQgfHwgMDtcclxuICAgIGNvbnN0IHN1YiA9IHRva2VuLnN1YiB8fCB0b2tlbi51c2VyX2lkO1xyXG4gICAgaWYgKCFzdWIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJtb2NrVXNlclRva2VuIG11c3QgY29udGFpbiAnc3ViJyBvciAndXNlcl9pZCcgZmllbGQhXCIpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcGF5bG9hZCA9IE9iamVjdC5hc3NpZ24oeyBcclxuICAgICAgICAvLyBTZXQgYWxsIHJlcXVpcmVkIGZpZWxkcyB0byBkZWNlbnQgZGVmYXVsdHNcclxuICAgICAgICBpc3M6IGBodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vJHtwcm9qZWN0fWAsIGF1ZDogcHJvamVjdCwgaWF0LCBleHA6IGlhdCArIDM2MDAsIGF1dGhfdGltZTogaWF0LCBzdWIsIHVzZXJfaWQ6IHN1YiwgZmlyZWJhc2U6IHtcclxuICAgICAgICAgICAgc2lnbl9pbl9wcm92aWRlcjogJ2N1c3RvbScsXHJcbiAgICAgICAgICAgIGlkZW50aXRpZXM6IHt9XHJcbiAgICAgICAgfSB9LCB0b2tlbik7XHJcbiAgICAvLyBVbnNlY3VyZWQgSldUcyB1c2UgdGhlIGVtcHR5IHN0cmluZyBhcyBhIHNpZ25hdHVyZS5cclxuICAgIGNvbnN0IHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgcmV0dXJuIFtcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShoZWFkZXIpKSxcclxuICAgICAgICBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeShwYXlsb2FkKSksXHJcbiAgICAgICAgc2lnbmF0dXJlXHJcbiAgICBdLmpvaW4oJy4nKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBuYXZpZ2F0b3IudXNlckFnZW50IHN0cmluZyBvciAnJyBpZiBpdCdzIG5vdCBkZWZpbmVkLlxyXG4gKiBAcmV0dXJuIHVzZXIgYWdlbnQgc3RyaW5nXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRVQSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHJldHVybiBuYXZpZ2F0b3JbJ3VzZXJBZ2VudCddO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgQ29yZG92YSAvIFBob25lR2FwIC8gSW9uaWMgZnJhbWV3b3JrcyBvbiBhIG1vYmlsZSBkZXZpY2UuXHJcbiAqXHJcbiAqIERlbGliZXJhdGVseSBkb2VzIG5vdCByZWx5IG9uIGNoZWNraW5nIGBmaWxlOi8vYCBVUkxzIChhcyB0aGlzIGZhaWxzIFBob25lR2FwXHJcbiAqIGluIHRoZSBSaXBwbGUgZW11bGF0b3IpIG5vciBDb3Jkb3ZhIGBvbkRldmljZVJlYWR5YCwgd2hpY2ggd291bGQgbm9ybWFsbHlcclxuICogd2FpdCBmb3IgYSBjYWxsYmFjay5cclxuICovXHJcbmZ1bmN0aW9uIGlzTW9iaWxlQ29yZG92YSgpIHtcclxuICAgIHJldHVybiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAvLyBAdHMtaWdub3JlIFNldHRpbmcgdXAgYW4gYnJvYWRseSBhcHBsaWNhYmxlIGluZGV4IHNpZ25hdHVyZSBmb3IgV2luZG93XHJcbiAgICAgICAgLy8ganVzdCB0byBkZWFsIHdpdGggdGhpcyBjYXNlIHdvdWxkIHByb2JhYmx5IGJlIGEgYmFkIGlkZWEuXHJcbiAgICAgICAgISEod2luZG93Wydjb3Jkb3ZhJ10gfHwgd2luZG93WydwaG9uZWdhcCddIHx8IHdpbmRvd1snUGhvbmVHYXAnXSkgJiZcclxuICAgICAgICAvaW9zfGlwaG9uZXxpcG9kfGlwYWR8YW5kcm9pZHxibGFja2JlcnJ5fGllbW9iaWxlL2kudGVzdChnZXRVQSgpKSk7XHJcbn1cclxuLyoqXHJcbiAqIERldGVjdCBOb2RlLmpzLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgTm9kZS5qcyBlbnZpcm9ubWVudCBpcyBkZXRlY3RlZCBvciBzcGVjaWZpZWQuXHJcbiAqL1xyXG4vLyBOb2RlIGRldGVjdGlvbiBsb2dpYyBmcm9tOiBodHRwczovL2dpdGh1Yi5jb20vaWxpYWthbi9kZXRlY3Qtbm9kZS9cclxuZnVuY3Rpb24gaXNOb2RlKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgZm9yY2VFbnZpcm9ubWVudCA9IChfYSA9IGdldERlZmF1bHRzKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5mb3JjZUVudmlyb25tZW50O1xyXG4gICAgaWYgKGZvcmNlRW52aXJvbm1lbnQgPT09ICdub2RlJykge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoZm9yY2VFbnZpcm9ubWVudCA9PT0gJ2Jyb3dzZXInKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChnbG9iYWwucHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJyk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogRGV0ZWN0IEJyb3dzZXIgRW52aXJvbm1lbnRcclxuICovXHJcbmZ1bmN0aW9uIGlzQnJvd3NlcigpIHtcclxuICAgIHJldHVybiB0eXBlb2Ygc2VsZiA9PT0gJ29iamVjdCcgJiYgc2VsZi5zZWxmID09PSBzZWxmO1xyXG59XHJcbmZ1bmN0aW9uIGlzQnJvd3NlckV4dGVuc2lvbigpIHtcclxuICAgIGNvbnN0IHJ1bnRpbWUgPSB0eXBlb2YgY2hyb21lID09PSAnb2JqZWN0J1xyXG4gICAgICAgID8gY2hyb21lLnJ1bnRpbWVcclxuICAgICAgICA6IHR5cGVvZiBicm93c2VyID09PSAnb2JqZWN0J1xyXG4gICAgICAgICAgICA/IGJyb3dzZXIucnVudGltZVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIHJldHVybiB0eXBlb2YgcnVudGltZSA9PT0gJ29iamVjdCcgJiYgcnVudGltZS5pZCAhPT0gdW5kZWZpbmVkO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3QgUmVhY3QgTmF0aXZlLlxyXG4gKlxyXG4gKiBAcmV0dXJuIHRydWUgaWYgUmVhY3ROYXRpdmUgZW52aXJvbm1lbnQgaXMgZGV0ZWN0ZWQuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1JlYWN0TmF0aXZlKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3JbJ3Byb2R1Y3QnXSA9PT0gJ1JlYWN0TmF0aXZlJyk7XHJcbn1cclxuLyoqIERldGVjdHMgRWxlY3Ryb24gYXBwcy4gKi9cclxuZnVuY3Rpb24gaXNFbGVjdHJvbigpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ0VsZWN0cm9uLycpID49IDA7XHJcbn1cclxuLyoqIERldGVjdHMgSW50ZXJuZXQgRXhwbG9yZXIuICovXHJcbmZ1bmN0aW9uIGlzSUUoKSB7XHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCk7XHJcbiAgICByZXR1cm4gdWEuaW5kZXhPZignTVNJRSAnKSA+PSAwIHx8IHVhLmluZGV4T2YoJ1RyaWRlbnQvJykgPj0gMDtcclxufVxyXG4vKiogRGV0ZWN0cyBVbml2ZXJzYWwgV2luZG93cyBQbGF0Zm9ybSBhcHBzLiAqL1xyXG5mdW5jdGlvbiBpc1VXUCgpIHtcclxuICAgIHJldHVybiBnZXRVQSgpLmluZGV4T2YoJ01TQXBwSG9zdC8nKSA+PSAwO1xyXG59XHJcbi8qKlxyXG4gKiBEZXRlY3Qgd2hldGhlciB0aGUgY3VycmVudCBTREsgYnVpbGQgaXMgdGhlIE5vZGUgdmVyc2lvbi5cclxuICpcclxuICogQHJldHVybiB0cnVlIGlmIGl0J3MgdGhlIE5vZGUgU0RLIGJ1aWxkLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNOb2RlU2RrKCkge1xyXG4gICAgcmV0dXJuIENPTlNUQU5UUy5OT0RFX0NMSUVOVCA9PT0gdHJ1ZSB8fCBDT05TVEFOVFMuTk9ERV9BRE1JTiA9PT0gdHJ1ZTtcclxufVxyXG4vKiogUmV0dXJucyB0cnVlIGlmIHdlIGFyZSBydW5uaW5nIGluIFNhZmFyaS4gKi9cclxuZnVuY3Rpb24gaXNTYWZhcmkoKSB7XHJcbiAgICByZXR1cm4gKCFpc05vZGUoKSAmJlxyXG4gICAgICAgIG5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ1NhZmFyaScpICYmXHJcbiAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQuaW5jbHVkZXMoJ0Nocm9tZScpKTtcclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICogQHJldHVybiB0cnVlIGlmIGluZGV4ZWREQiBpcyBzdXBwb3J0ZWQgYnkgY3VycmVudCBicm93c2VyL3NlcnZpY2Ugd29ya2VyIGNvbnRleHRcclxuICovXHJcbmZ1bmN0aW9uIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gdHlwZW9mIGluZGV4ZWREQiA9PT0gJ29iamVjdCc7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogVGhpcyBtZXRob2QgdmFsaWRhdGVzIGJyb3dzZXIvc3cgY29udGV4dCBmb3IgaW5kZXhlZERCIGJ5IG9wZW5pbmcgYSBkdW1teSBpbmRleGVkREIgZGF0YWJhc2UgYW5kIHJlamVjdFxyXG4gKiBpZiBlcnJvcnMgb2NjdXIgZHVyaW5nIHRoZSBkYXRhYmFzZSBvcGVuIG9wZXJhdGlvbi5cclxuICpcclxuICogQHRocm93cyBleGNlcHRpb24gaWYgY3VycmVudCBicm93c2VyL3N3IGNvbnRleHQgY2FuJ3QgcnVuIGlkYi5vcGVuIChleDogU2FmYXJpIGlmcmFtZSwgRmlyZWZveFxyXG4gKiBwcml2YXRlIGJyb3dzaW5nKVxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVJbmRleGVkREJPcGVuYWJsZSgpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbGV0IHByZUV4aXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgY29uc3QgREJfQ0hFQ0tfTkFNRSA9ICd2YWxpZGF0ZS1icm93c2VyLWNvbnRleHQtZm9yLWluZGV4ZWRkYi1hbmFseXRpY3MtbW9kdWxlJztcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHNlbGYuaW5kZXhlZERCLm9wZW4oREJfQ0hFQ0tfTkFNRSk7XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub25zdWNjZXNzID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5yZXN1bHQuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIC8vIGRlbGV0ZSBkYXRhYmFzZSBvbmx5IHdoZW4gaXQgZG9lc24ndCBwcmUtZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghcHJlRXhpc3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLmluZGV4ZWREQi5kZWxldGVEYXRhYmFzZShEQl9DSEVDS19OQU1FKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJlcXVlc3Qub251cGdyYWRlbmVlZGVkID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlRXhpc3QgPSBmYWxzZTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmVxdWVzdC5vbmVycm9yID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KCgoX2EgPSByZXF1ZXN0LmVycm9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWVzc2FnZSkgfHwgJycpO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmVqZWN0KGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG4vKipcclxuICpcclxuICogVGhpcyBtZXRob2QgY2hlY2tzIHdoZXRoZXIgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKiBAcmV0dXJuIHRydWUgaWYgY29va2llIGlzIGVuYWJsZWQgd2l0aGluIGN1cnJlbnQgYnJvd3NlclxyXG4gKi9cclxuZnVuY3Rpb24gYXJlQ29va2llc0VuYWJsZWQoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEBmaWxlb3ZlcnZpZXcgU3RhbmRhcmRpemVkIEZpcmViYXNlIEVycm9yLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICpcclxuICogICAvLyBUeXBlc2NyaXB0IHN0cmluZyBsaXRlcmFscyBmb3IgdHlwZS1zYWZlIGNvZGVzXHJcbiAqICAgdHlwZSBFcnIgPVxyXG4gKiAgICAgJ3Vua25vd24nIHxcclxuICogICAgICdvYmplY3Qtbm90LWZvdW5kJ1xyXG4gKiAgICAgO1xyXG4gKlxyXG4gKiAgIC8vIENsb3N1cmUgZW51bSBmb3IgdHlwZS1zYWZlIGVycm9yIGNvZGVzXHJcbiAqICAgLy8gYXQtZW51bSB7c3RyaW5nfVxyXG4gKiAgIHZhciBFcnIgPSB7XHJcbiAqICAgICBVTktOT1dOOiAndW5rbm93bicsXHJcbiAqICAgICBPQkpFQ1RfTk9UX0ZPVU5EOiAnb2JqZWN0LW5vdC1mb3VuZCcsXHJcbiAqICAgfVxyXG4gKlxyXG4gKiAgIGxldCBlcnJvcnM6IE1hcDxFcnIsIHN0cmluZz4gPSB7XHJcbiAqICAgICAnZ2VuZXJpYy1lcnJvcic6IFwiVW5rbm93biBlcnJvclwiLFxyXG4gKiAgICAgJ2ZpbGUtbm90LWZvdW5kJzogXCJDb3VsZCBub3QgZmluZCBmaWxlOiB7JGZpbGV9XCIsXHJcbiAqICAgfTtcclxuICpcclxuICogICAvLyBUeXBlLXNhZmUgZnVuY3Rpb24gLSBtdXN0IHBhc3MgYSB2YWxpZCBlcnJvciBjb2RlIGFzIHBhcmFtLlxyXG4gKiAgIGxldCBlcnJvciA9IG5ldyBFcnJvckZhY3Rvcnk8RXJyPignc2VydmljZScsICdTZXJ2aWNlJywgZXJyb3JzKTtcclxuICpcclxuICogICAuLi5cclxuICogICB0aHJvdyBlcnJvci5jcmVhdGUoRXJyLkdFTkVSSUMpO1xyXG4gKiAgIC4uLlxyXG4gKiAgIHRocm93IGVycm9yLmNyZWF0ZShFcnIuRklMRV9OT1RfRk9VTkQsIHsnZmlsZSc6IGZpbGVOYW1lfSk7XHJcbiAqICAgLi4uXHJcbiAqICAgLy8gU2VydmljZTogQ291bGQgbm90IGZpbGUgZmlsZTogZm9vLnR4dCAoc2VydmljZS9maWxlLW5vdC1mb3VuZCkuXHJcbiAqXHJcbiAqICAgY2F0Y2ggKGUpIHtcclxuICogICAgIGFzc2VydChlLm1lc3NhZ2UgPT09IFwiQ291bGQgbm90IGZpbmQgZmlsZTogZm9vLnR4dC5cIik7XHJcbiAqICAgICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdzZXJ2aWNlL2ZpbGUtbm90LWZvdW5kJykge1xyXG4gKiAgICAgICBjb25zb2xlLmxvZyhcIkNvdWxkIG5vdCByZWFkIGZpbGU6IFwiICsgZVsnZmlsZSddKTtcclxuICogICAgIH1cclxuICogICB9XHJcbiAqL1xyXG5jb25zdCBFUlJPUl9OQU1FID0gJ0ZpcmViYXNlRXJyb3InO1xyXG4vLyBCYXNlZCBvbiBjb2RlIGZyb206XHJcbi8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Vycm9yI0N1c3RvbV9FcnJvcl9UeXBlc1xyXG5jbGFzcyBGaXJlYmFzZUVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAvKiogVGhlIGVycm9yIGNvZGUgZm9yIHRoaXMgZXJyb3IuICovXHJcbiAgICBjb2RlLCBtZXNzYWdlLCBcclxuICAgIC8qKiBDdXN0b20gZGF0YSBmb3IgdGhpcyBlcnJvci4gKi9cclxuICAgIGN1c3RvbURhdGEpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IGN1c3RvbURhdGE7XHJcbiAgICAgICAgLyoqIFRoZSBjdXN0b20gbmFtZSBmb3IgYWxsIEZpcmViYXNlRXJyb3JzLiAqL1xyXG4gICAgICAgIHRoaXMubmFtZSA9IEVSUk9SX05BTUU7XHJcbiAgICAgICAgLy8gRml4IEZvciBFUzVcclxuICAgICAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vTWljcm9zb2Z0L1R5cGVTY3JpcHQtd2lraS9ibG9iL21hc3Rlci9CcmVha2luZy1DaGFuZ2VzLm1kI2V4dGVuZGluZy1idWlsdC1pbnMtbGlrZS1lcnJvci1hcnJheS1hbmQtbWFwLW1heS1uby1sb25nZXItd29ya1xyXG4gICAgICAgIE9iamVjdC5zZXRQcm90b3R5cGVPZih0aGlzLCBGaXJlYmFzZUVycm9yLnByb3RvdHlwZSk7XHJcbiAgICAgICAgLy8gTWFpbnRhaW5zIHByb3BlciBzdGFjayB0cmFjZSBmb3Igd2hlcmUgb3VyIGVycm9yIHdhcyB0aHJvd24uXHJcbiAgICAgICAgLy8gT25seSBhdmFpbGFibGUgb24gVjguXHJcbiAgICAgICAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XHJcbiAgICAgICAgICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIEVycm9yRmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRXJyb3JGYWN0b3J5IHtcclxuICAgIGNvbnN0cnVjdG9yKHNlcnZpY2UsIHNlcnZpY2VOYW1lLCBlcnJvcnMpIHtcclxuICAgICAgICB0aGlzLnNlcnZpY2UgPSBzZXJ2aWNlO1xyXG4gICAgICAgIHRoaXMuc2VydmljZU5hbWUgPSBzZXJ2aWNlTmFtZTtcclxuICAgICAgICB0aGlzLmVycm9ycyA9IGVycm9ycztcclxuICAgIH1cclxuICAgIGNyZWF0ZShjb2RlLCAuLi5kYXRhKSB7XHJcbiAgICAgICAgY29uc3QgY3VzdG9tRGF0YSA9IGRhdGFbMF0gfHwge307XHJcbiAgICAgICAgY29uc3QgZnVsbENvZGUgPSBgJHt0aGlzLnNlcnZpY2V9LyR7Y29kZX1gO1xyXG4gICAgICAgIGNvbnN0IHRlbXBsYXRlID0gdGhpcy5lcnJvcnNbY29kZV07XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZSA9IHRlbXBsYXRlID8gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBjdXN0b21EYXRhKSA6ICdFcnJvcic7XHJcbiAgICAgICAgLy8gU2VydmljZSBOYW1lOiBFcnJvciBtZXNzYWdlIChzZXJ2aWNlL2NvZGUpLlxyXG4gICAgICAgIGNvbnN0IGZ1bGxNZXNzYWdlID0gYCR7dGhpcy5zZXJ2aWNlTmFtZX06ICR7bWVzc2FnZX0gKCR7ZnVsbENvZGV9KS5gO1xyXG4gICAgICAgIGNvbnN0IGVycm9yID0gbmV3IEZpcmViYXNlRXJyb3IoZnVsbENvZGUsIGZ1bGxNZXNzYWdlLCBjdXN0b21EYXRhKTtcclxuICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcmVwbGFjZVRlbXBsYXRlKHRlbXBsYXRlLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gdGVtcGxhdGUucmVwbGFjZShQQVRURVJOLCAoXywga2V5KSA9PiB7XHJcbiAgICAgICAgY29uc3QgdmFsdWUgPSBkYXRhW2tleV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlICE9IG51bGwgPyBTdHJpbmcodmFsdWUpIDogYDwke2tleX0/PmA7XHJcbiAgICB9KTtcclxufVxyXG5jb25zdCBQQVRURVJOID0gL1xce1xcJChbXn1dKyl9L2c7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBFdmFsdWF0ZXMgYSBKU09OIHN0cmluZyBpbnRvIGEgamF2YXNjcmlwdCBvYmplY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHIgQSBzdHJpbmcgY29udGFpbmluZyBKU09OLlxyXG4gKiBAcmV0dXJuIHsqfSBUaGUgamF2YXNjcmlwdCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzcGVjaWZpZWQgSlNPTi5cclxuICovXHJcbmZ1bmN0aW9uIGpzb25FdmFsKHN0cikge1xyXG4gICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyBKU09OIHJlcHJlc2VudGluZyBhIGphdmFzY3JpcHQgb2JqZWN0LlxyXG4gKiBAcGFyYW0geyp9IGRhdGEgSmF2YXNjcmlwdCBvYmplY3QgdG8gYmUgc3RyaW5naWZpZWQuXHJcbiAqIEByZXR1cm4ge3N0cmluZ30gVGhlIEpTT04gY29udGVudHMgb2YgdGhlIG9iamVjdC5cclxuICovXHJcbmZ1bmN0aW9uIHN0cmluZ2lmeShkYXRhKSB7XHJcbiAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBpbnRvIGNvbnN0aXR1ZW50IHBhcnRzLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIHdpdGggaW52YWxpZCAvIGluY29tcGxldGUgY2xhaW1zIGlmIHRoZXJlJ3Mgbm8gbmF0aXZlIGJhc2U2NCBkZWNvZGluZyBzdXBwb3J0LlxyXG4gKiAtIERvZXNuJ3QgY2hlY2sgaWYgdGhlIHRva2VuIGlzIGFjdHVhbGx5IHZhbGlkLlxyXG4gKi9cclxuY29uc3QgZGVjb2RlID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBsZXQgaGVhZGVyID0ge30sIGNsYWltcyA9IHt9LCBkYXRhID0ge30sIHNpZ25hdHVyZSA9ICcnO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBwYXJ0cyA9IHRva2VuLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgaGVhZGVyID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzBdKSB8fCAnJyk7XHJcbiAgICAgICAgY2xhaW1zID0ganNvbkV2YWwoYmFzZTY0RGVjb2RlKHBhcnRzWzFdKSB8fCAnJyk7XHJcbiAgICAgICAgc2lnbmF0dXJlID0gcGFydHNbMl07XHJcbiAgICAgICAgZGF0YSA9IGNsYWltc1snZCddIHx8IHt9O1xyXG4gICAgICAgIGRlbGV0ZSBjbGFpbXNbJ2QnXTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7IH1cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgaGVhZGVyLFxyXG4gICAgICAgIGNsYWltcyxcclxuICAgICAgICBkYXRhLFxyXG4gICAgICAgIHNpZ25hdHVyZVxyXG4gICAgfTtcclxufTtcclxuLyoqXHJcbiAqIERlY29kZXMgYSBGaXJlYmFzZSBhdXRoLiB0b2tlbiBhbmQgY2hlY2tzIHRoZSB2YWxpZGl0eSBvZiBpdHMgdGltZS1iYXNlZCBjbGFpbXMuIFdpbGwgcmV0dXJuIHRydWUgaWYgdGhlXHJcbiAqIHRva2VuIGlzIHdpdGhpbiB0aGUgdGltZSB3aW5kb3cgYXV0aG9yaXplZCBieSB0aGUgJ25iZicgKG5vdC1iZWZvcmUpIGFuZCAnaWF0JyAoaXNzdWVkLWF0KSBjbGFpbXMuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gYSBmYWxzZSBuZWdhdGl2ZSBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzVmFsaWRUaW1lc3RhbXAgPSBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgIGNvbnN0IGNsYWltcyA9IGRlY29kZSh0b2tlbikuY2xhaW1zO1xyXG4gICAgY29uc3Qgbm93ID0gTWF0aC5mbG9vcihuZXcgRGF0ZSgpLmdldFRpbWUoKSAvIDEwMDApO1xyXG4gICAgbGV0IHZhbGlkU2luY2UgPSAwLCB2YWxpZFVudGlsID0gMDtcclxuICAgIGlmICh0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ25iZicpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ25iZiddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjbGFpbXMuaGFzT3duUHJvcGVydHkoJ2lhdCcpKSB7XHJcbiAgICAgICAgICAgIHZhbGlkU2luY2UgPSBjbGFpbXNbJ2lhdCddO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoY2xhaW1zLmhhc093blByb3BlcnR5KCdleHAnKSkge1xyXG4gICAgICAgICAgICB2YWxpZFVudGlsID0gY2xhaW1zWydleHAnXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIHRva2VuIHdpbGwgZXhwaXJlIGFmdGVyIDI0aCBieSBkZWZhdWx0XHJcbiAgICAgICAgICAgIHZhbGlkVW50aWwgPSB2YWxpZFNpbmNlICsgODY0MDA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICghIW5vdyAmJlxyXG4gICAgICAgICEhdmFsaWRTaW5jZSAmJlxyXG4gICAgICAgICEhdmFsaWRVbnRpbCAmJlxyXG4gICAgICAgIG5vdyA+PSB2YWxpZFNpbmNlICYmXHJcbiAgICAgICAgbm93IDw9IHZhbGlkVW50aWwpO1xyXG59O1xyXG4vKipcclxuICogRGVjb2RlcyBhIEZpcmViYXNlIGF1dGguIHRva2VuIGFuZCByZXR1cm5zIGl0cyBpc3N1ZWQgYXQgdGltZSBpZiB2YWxpZCwgbnVsbCBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIE5vdGVzOlxyXG4gKiAtIE1heSByZXR1cm4gbnVsbCBpZiB0aGVyZSdzIG5vIG5hdGl2ZSBiYXNlNjQgZGVjb2Rpbmcgc3VwcG9ydC5cclxuICogLSBEb2Vzbid0IGNoZWNrIGlmIHRoZSB0b2tlbiBpcyBhY3R1YWxseSB2YWxpZC5cclxuICovXHJcbmNvbnN0IGlzc3VlZEF0VGltZSA9IGZ1bmN0aW9uICh0b2tlbikge1xyXG4gICAgY29uc3QgY2xhaW1zID0gZGVjb2RlKHRva2VuKS5jbGFpbXM7XHJcbiAgICBpZiAodHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKSkge1xyXG4gICAgICAgIHJldHVybiBjbGFpbXNbJ2lhdCddO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbn07XHJcbi8qKlxyXG4gKiBEZWNvZGVzIGEgRmlyZWJhc2UgYXV0aC4gdG9rZW4gYW5kIGNoZWNrcyB0aGUgdmFsaWRpdHkgb2YgaXRzIGZvcm1hdC4gRXhwZWN0cyBhIHZhbGlkIGlzc3VlZC1hdCB0aW1lLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc1ZhbGlkRm9ybWF0ID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBkZWNvZGVkID0gZGVjb2RlKHRva2VuKSwgY2xhaW1zID0gZGVjb2RlZC5jbGFpbXM7XHJcbiAgICByZXR1cm4gISFjbGFpbXMgJiYgdHlwZW9mIGNsYWltcyA9PT0gJ29iamVjdCcgJiYgY2xhaW1zLmhhc093blByb3BlcnR5KCdpYXQnKTtcclxufTtcclxuLyoqXHJcbiAqIEF0dGVtcHRzIHRvIHBlZXIgaW50byBhbiBhdXRoIHRva2VuIGFuZCBkZXRlcm1pbmUgaWYgaXQncyBhbiBhZG1pbiBhdXRoIHRva2VuIGJ5IGxvb2tpbmcgYXQgdGhlIGNsYWltcyBwb3J0aW9uLlxyXG4gKlxyXG4gKiBOb3RlczpcclxuICogLSBNYXkgcmV0dXJuIGEgZmFsc2UgbmVnYXRpdmUgaWYgdGhlcmUncyBubyBuYXRpdmUgYmFzZTY0IGRlY29kaW5nIHN1cHBvcnQuXHJcbiAqIC0gRG9lc24ndCBjaGVjayBpZiB0aGUgdG9rZW4gaXMgYWN0dWFsbHkgdmFsaWQuXHJcbiAqL1xyXG5jb25zdCBpc0FkbWluID0gZnVuY3Rpb24gKHRva2VuKSB7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBkZWNvZGUodG9rZW4pLmNsYWltcztcclxuICAgIHJldHVybiB0eXBlb2YgY2xhaW1zID09PSAnb2JqZWN0JyAmJiBjbGFpbXNbJ2FkbWluJ10gPT09IHRydWU7XHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNvbnRhaW5zKG9iaiwga2V5KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcclxufVxyXG5mdW5jdGlvbiBzYWZlR2V0KG9iaiwga2V5KSB7XHJcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgIHJldHVybiBvYmpba2V5XTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNFbXB0eShvYmopIHtcclxuICAgIGZvciAoY29uc3Qga2V5IGluIG9iaikge1xyXG4gICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBtYXAob2JqLCBmbiwgY29udGV4dE9iaikge1xyXG4gICAgY29uc3QgcmVzID0ge307XHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBvYmopIHtcclxuICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KSkge1xyXG4gICAgICAgICAgICByZXNba2V5XSA9IGZuLmNhbGwoY29udGV4dE9iaiwgb2JqW2tleV0sIGtleSwgb2JqKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzO1xyXG59XHJcbi8qKlxyXG4gKiBEZWVwIGVxdWFsIHR3byBvYmplY3RzLiBTdXBwb3J0IEFycmF5cyBhbmQgT2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGRlZXBFcXVhbChhLCBiKSB7XHJcbiAgICBpZiAoYSA9PT0gYikge1xyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgY29uc3QgYUtleXMgPSBPYmplY3Qua2V5cyhhKTtcclxuICAgIGNvbnN0IGJLZXlzID0gT2JqZWN0LmtleXMoYik7XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYUtleXMpIHtcclxuICAgICAgICBpZiAoIWJLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYVByb3AgPSBhW2tdO1xyXG4gICAgICAgIGNvbnN0IGJQcm9wID0gYltrXTtcclxuICAgICAgICBpZiAoaXNPYmplY3QoYVByb3ApICYmIGlzT2JqZWN0KGJQcm9wKSkge1xyXG4gICAgICAgICAgICBpZiAoIWRlZXBFcXVhbChhUHJvcCwgYlByb3ApKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYVByb3AgIT09IGJQcm9wKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IGsgb2YgYktleXMpIHtcclxuICAgICAgICBpZiAoIWFLZXlzLmluY2x1ZGVzKGspKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5mdW5jdGlvbiBpc09iamVjdCh0aGluZykge1xyXG4gICAgcmV0dXJuIHRoaW5nICE9PSBudWxsICYmIHR5cGVvZiB0aGluZyA9PT0gJ29iamVjdCc7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlamVjdHMgaWYgdGhlIGdpdmVuIHByb21pc2UgZG9lc24ndCByZXNvbHZlIGluIHRpbWVJbk1TIG1pbGxpc2Vjb25kcy5cclxuICogQGludGVybmFsXHJcbiAqL1xyXG5mdW5jdGlvbiBwcm9taXNlV2l0aFRpbWVvdXQocHJvbWlzZSwgdGltZUluTVMgPSAyMDAwKSB7XHJcbiAgICBjb25zdCBkZWZlcnJlZFByb21pc2UgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4gZGVmZXJyZWRQcm9taXNlLnJlamVjdCgndGltZW91dCEnKSwgdGltZUluTVMpO1xyXG4gICAgcHJvbWlzZS50aGVuKGRlZmVycmVkUHJvbWlzZS5yZXNvbHZlLCBkZWZlcnJlZFByb21pc2UucmVqZWN0KTtcclxuICAgIHJldHVybiBkZWZlcnJlZFByb21pc2UucHJvbWlzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUmV0dXJucyBhIHF1ZXJ5c3RyaW5nLWZvcm1hdHRlZCBzdHJpbmcgKGUuZy4gJmFyZz12YWwmYXJnMj12YWwyKSBmcm9tIGFcclxuICogcGFyYW1zIG9iamVjdCAoZS5nLiB7YXJnOiAndmFsJywgYXJnMjogJ3ZhbDInfSlcclxuICogTm90ZTogWW91IG11c3QgcHJlcGVuZCBpdCB3aXRoID8gd2hlbiBhZGRpbmcgaXQgdG8gYSBVUkwuXHJcbiAqL1xyXG5mdW5jdGlvbiBxdWVyeXN0cmluZyhxdWVyeXN0cmluZ1BhcmFtcykge1xyXG4gICAgY29uc3QgcGFyYW1zID0gW107XHJcbiAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhxdWVyeXN0cmluZ1BhcmFtcykpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgdmFsdWUuZm9yRWFjaChhcnJheVZhbCA9PiB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMucHVzaChlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChhcnJheVZhbCkpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5wdXNoKGVuY29kZVVSSUNvbXBvbmVudChrZXkpICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHBhcmFtcy5sZW5ndGggPyAnJicgKyBwYXJhbXMuam9pbignJicpIDogJyc7XHJcbn1cclxuLyoqXHJcbiAqIERlY29kZXMgYSBxdWVyeXN0cmluZyAoZS5nLiA/YXJnPXZhbCZhcmcyPXZhbDIpIGludG8gYSBwYXJhbXMgb2JqZWN0XHJcbiAqIChlLmcuIHthcmc6ICd2YWwnLCBhcmcyOiAndmFsMid9KVxyXG4gKi9cclxuZnVuY3Rpb24gcXVlcnlzdHJpbmdEZWNvZGUocXVlcnlzdHJpbmcpIHtcclxuICAgIGNvbnN0IG9iaiA9IHt9O1xyXG4gICAgY29uc3QgdG9rZW5zID0gcXVlcnlzdHJpbmcucmVwbGFjZSgvXlxcPy8sICcnKS5zcGxpdCgnJicpO1xyXG4gICAgdG9rZW5zLmZvckVhY2godG9rZW4gPT4ge1xyXG4gICAgICAgIGlmICh0b2tlbikge1xyXG4gICAgICAgICAgICBjb25zdCBba2V5LCB2YWx1ZV0gPSB0b2tlbi5zcGxpdCgnPScpO1xyXG4gICAgICAgICAgICBvYmpbZGVjb2RlVVJJQ29tcG9uZW50KGtleSldID0gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIHJldHVybiBvYmo7XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgdGhlIHF1ZXJ5IHN0cmluZyBwYXJ0IG9mIGEgVVJMLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgcXVlc3Rpb24gbWFyayAoaWYgcHJlc2VudCkuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UXVlcnlzdHJpbmcodXJsKSB7XHJcbiAgICBjb25zdCBxdWVyeVN0YXJ0ID0gdXJsLmluZGV4T2YoJz8nKTtcclxuICAgIGlmICghcXVlcnlTdGFydCkge1xyXG4gICAgICAgIHJldHVybiAnJztcclxuICAgIH1cclxuICAgIGNvbnN0IGZyYWdtZW50U3RhcnQgPSB1cmwuaW5kZXhPZignIycsIHF1ZXJ5U3RhcnQpO1xyXG4gICAgcmV0dXJuIHVybC5zdWJzdHJpbmcocXVlcnlTdGFydCwgZnJhZ21lbnRTdGFydCA+IDAgPyBmcmFnbWVudFN0YXJ0IDogdW5kZWZpbmVkKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGZpbGVvdmVydmlldyBTSEEtMSBjcnlwdG9ncmFwaGljIGhhc2guXHJcbiAqIFZhcmlhYmxlIG5hbWVzIGZvbGxvdyB0aGUgbm90YXRpb24gaW4gRklQUyBQVUIgMTgwLTM6XHJcbiAqIGh0dHA6Ly9jc3JjLm5pc3QuZ292L3B1YmxpY2F0aW9ucy9maXBzL2ZpcHMxODAtMy9maXBzMTgwLTNfZmluYWwucGRmLlxyXG4gKlxyXG4gKiBVc2FnZTpcclxuICogICB2YXIgc2hhMSA9IG5ldyBzaGExKCk7XHJcbiAqICAgc2hhMS51cGRhdGUoYnl0ZXMpO1xyXG4gKiAgIHZhciBoYXNoID0gc2hhMS5kaWdlc3QoKTtcclxuICpcclxuICogUGVyZm9ybWFuY2U6XHJcbiAqICAgQ2hyb21lIDIzOiAgIH40MDAgTWJpdC9zXHJcbiAqICAgRmlyZWZveCAxNjogIH4yNTAgTWJpdC9zXHJcbiAqXHJcbiAqL1xyXG4vKipcclxuICogU0hBLTEgY3J5cHRvZ3JhcGhpYyBoYXNoIGNvbnN0cnVjdG9yLlxyXG4gKlxyXG4gKiBUaGUgcHJvcGVydGllcyBkZWNsYXJlZCBoZXJlIGFyZSBkaXNjdXNzZWQgaW4gdGhlIGFib3ZlIGFsZ29yaXRobSBkb2N1bWVudC5cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqIEBmaW5hbFxyXG4gKiBAc3RydWN0XHJcbiAqL1xyXG5jbGFzcyBTaGExIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhvbGRzIHRoZSBwcmV2aW91cyB2YWx1ZXMgb2YgYWNjdW11bGF0ZWQgdmFyaWFibGVzIGEtZSBpbiB0aGUgY29tcHJlc3NfXHJcbiAgICAgICAgICogZnVuY3Rpb24uXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmNoYWluXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEEgYnVmZmVyIGhvbGRpbmcgdGhlIHBhcnRpYWxseSBjb21wdXRlZCBoYXNoIHJlc3VsdC5cclxuICAgICAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuYnVmXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFuIGFycmF5IG9mIDgwIGJ5dGVzLCBlYWNoIGEgcGFydCBvZiB0aGUgbWVzc2FnZSB0byBiZSBoYXNoZWQuICBSZWZlcnJlZCB0b1xyXG4gICAgICAgICAqIGFzIHRoZSBtZXNzYWdlIHNjaGVkdWxlIGluIHRoZSBkb2NzLlxyXG4gICAgICAgICAqIEBwcml2YXRlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5XXyA9IFtdO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnRhaW5zIGRhdGEgbmVlZGVkIHRvIHBhZCBtZXNzYWdlcyBsZXNzIHRoYW4gNjQgYnl0ZXMuXHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLnBhZF8gPSBbXTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBAcHJpdmF0ZSB7bnVtYmVyfVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMudG90YWxfID0gMDtcclxuICAgICAgICB0aGlzLmJsb2NrU2l6ZSA9IDUxMiAvIDg7XHJcbiAgICAgICAgdGhpcy5wYWRfWzBdID0gMTI4O1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5ibG9ja1NpemU7ICsraSkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZF9baV0gPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlc2V0KCk7XHJcbiAgICB9XHJcbiAgICByZXNldCgpIHtcclxuICAgICAgICB0aGlzLmNoYWluX1swXSA9IDB4Njc0NTIzMDE7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bMV0gPSAweGVmY2RhYjg5O1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gMHg5OGJhZGNmZTtcclxuICAgICAgICB0aGlzLmNoYWluX1szXSA9IDB4MTAzMjU0NzY7XHJcbiAgICAgICAgdGhpcy5jaGFpbl9bNF0gPSAweGMzZDJlMWYwO1xyXG4gICAgICAgIHRoaXMuaW5idWZfID0gMDtcclxuICAgICAgICB0aGlzLnRvdGFsXyA9IDA7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEludGVybmFsIGNvbXByZXNzIGhlbHBlciBmdW5jdGlvbi5cclxuICAgICAqIEBwYXJhbSBidWYgQmxvY2sgdG8gY29tcHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gb2Zmc2V0IE9mZnNldCBvZiB0aGUgYmxvY2sgaW4gdGhlIGJ1ZmZlci5cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIGNvbXByZXNzXyhidWYsIG9mZnNldCkge1xyXG4gICAgICAgIGlmICghb2Zmc2V0KSB7XHJcbiAgICAgICAgICAgIG9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IFcgPSB0aGlzLldfO1xyXG4gICAgICAgIC8vIGdldCAxNiBiaWcgZW5kaWFuIHdvcmRzXHJcbiAgICAgICAgaWYgKHR5cGVvZiBidWYgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETyh1c2VyKTogW2J1ZyA4MTQwMTIyXSBSZWNlbnQgdmVyc2lvbnMgb2YgU2FmYXJpIGZvciBNYWMgT1MgYW5kIGlPU1xyXG4gICAgICAgICAgICAgICAgLy8gaGF2ZSBhIGJ1ZyB0aGF0IHR1cm5zIHRoZSBwb3N0LWluY3JlbWVudCArKyBvcGVyYXRvciBpbnRvIHByZS1pbmNyZW1lbnRcclxuICAgICAgICAgICAgICAgIC8vIGR1cmluZyBKSVQgY29tcGlsYXRpb24uICBXZSBoYXZlIGNvZGUgdGhhdCBkZXBlbmRzIGhlYXZpbHkgb24gU0hBLTEgZm9yXHJcbiAgICAgICAgICAgICAgICAvLyBjb3JyZWN0bmVzcyBhbmQgd2hpY2ggaXMgYWZmZWN0ZWQgYnkgdGhpcyBidWcsIHNvIEkndmUgcmVtb3ZlZCBhbGwgdXNlc1xyXG4gICAgICAgICAgICAgICAgLy8gb2YgcG9zdC1pbmNyZW1lbnQgKysgaW4gd2hpY2ggdGhlIHJlc3VsdCB2YWx1ZSBpcyB1c2VkLiAgV2UgY2FuIHJldmVydFxyXG4gICAgICAgICAgICAgICAgLy8gdGhpcyBjaGFuZ2Ugb25jZSB0aGUgU2FmYXJpIGJ1Z1xyXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMDkwMzYpIGhhcyBiZWVuIGZpeGVkIGFuZFxyXG4gICAgICAgICAgICAgICAgLy8gbW9zdCBjbGllbnRzIGhhdmUgYmVlbiB1cGRhdGVkLlxyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCkgPDwgMjQpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDEpIDw8IDE2KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWYuY2hhckNvZGVBdChvZmZzZXQgKyAyKSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1Zi5jaGFyQ29kZUF0KG9mZnNldCArIDMpO1xyXG4gICAgICAgICAgICAgICAgb2Zmc2V0ICs9IDQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTY7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgV1tpXSA9XHJcbiAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXRdIDw8IDI0KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIChidWZbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKGJ1ZltvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZltvZmZzZXQgKyAzXTtcclxuICAgICAgICAgICAgICAgIG9mZnNldCArPSA0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGV4cGFuZCB0byA4MCB3b3Jkc1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAxNjsgaSA8IDgwOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgdCA9IFdbaSAtIDNdIF4gV1tpIC0gOF0gXiBXW2kgLSAxNF0gXiBXW2kgLSAxNl07XHJcbiAgICAgICAgICAgIFdbaV0gPSAoKHQgPDwgMSkgfCAodCA+Pj4gMzEpKSAmIDB4ZmZmZmZmZmY7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBhID0gdGhpcy5jaGFpbl9bMF07XHJcbiAgICAgICAgbGV0IGIgPSB0aGlzLmNoYWluX1sxXTtcclxuICAgICAgICBsZXQgYyA9IHRoaXMuY2hhaW5fWzJdO1xyXG4gICAgICAgIGxldCBkID0gdGhpcy5jaGFpbl9bM107XHJcbiAgICAgICAgbGV0IGUgPSB0aGlzLmNoYWluX1s0XTtcclxuICAgICAgICBsZXQgZiwgaztcclxuICAgICAgICAvLyBUT0RPKHVzZXIpOiBUcnkgdG8gdW5yb2xsIHRoaXMgbG9vcCB0byBzcGVlZCB1cCB0aGUgY29tcHV0YXRpb24uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA4MDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGlmIChpIDwgNDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChpIDwgMjApIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gZCBeIChiICYgKGMgXiBkKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4NWE4Mjc5OTk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmID0gYiBeIGMgXiBkO1xyXG4gICAgICAgICAgICAgICAgICAgIGsgPSAweDZlZDllYmExO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGkgPCA2MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSAoYiAmIGMpIHwgKGQgJiAoYiB8IGMpKTtcclxuICAgICAgICAgICAgICAgICAgICBrID0gMHg4ZjFiYmNkYztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGYgPSBiIF4gYyBeIGQ7XHJcbiAgICAgICAgICAgICAgICAgICAgayA9IDB4Y2E2MmMxZDY7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgdCA9ICgoKGEgPDwgNSkgfCAoYSA+Pj4gMjcpKSArIGYgKyBlICsgayArIFdbaV0pICYgMHhmZmZmZmZmZjtcclxuICAgICAgICAgICAgZSA9IGQ7XHJcbiAgICAgICAgICAgIGQgPSBjO1xyXG4gICAgICAgICAgICBjID0gKChiIDw8IDMwKSB8IChiID4+PiAyKSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgICAgICBiID0gYTtcclxuICAgICAgICAgICAgYSA9IHQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuY2hhaW5fWzBdID0gKHRoaXMuY2hhaW5fWzBdICsgYSkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzFdID0gKHRoaXMuY2hhaW5fWzFdICsgYikgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzJdID0gKHRoaXMuY2hhaW5fWzJdICsgYykgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzNdID0gKHRoaXMuY2hhaW5fWzNdICsgZCkgJiAweGZmZmZmZmZmO1xyXG4gICAgICAgIHRoaXMuY2hhaW5fWzRdID0gKHRoaXMuY2hhaW5fWzRdICsgZSkgJiAweGZmZmZmZmZmO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlKGJ5dGVzLCBsZW5ndGgpIHtcclxuICAgICAgICAvLyBUT0RPKGpvaG5sZW56KTogdGlnaHRlbiB0aGUgZnVuY3Rpb24gc2lnbmF0dXJlIGFuZCByZW1vdmUgdGhpcyBjaGVja1xyXG4gICAgICAgIGlmIChieXRlcyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgbGVuZ3RoTWludXNCbG9jayA9IGxlbmd0aCAtIHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICAvLyBVc2luZyBsb2NhbCBpbnN0ZWFkIG9mIG1lbWJlciB2YXJpYWJsZXMgZ2l2ZXMgfjUlIHNwZWVkdXAgb24gRmlyZWZveCAxNi5cclxuICAgICAgICBjb25zdCBidWYgPSB0aGlzLmJ1Zl87XHJcbiAgICAgICAgbGV0IGluYnVmID0gdGhpcy5pbmJ1Zl87XHJcbiAgICAgICAgLy8gVGhlIG91dGVyIHdoaWxlIGxvb3Agc2hvdWxkIGV4ZWN1dGUgYXQgbW9zdCB0d2ljZS5cclxuICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAvLyBXaGVuIHdlIGhhdmUgbm8gZGF0YSBpbiB0aGUgYmxvY2sgdG8gdG9wIHVwLCB3ZSBjYW4gZGlyZWN0bHkgcHJvY2VzcyB0aGVcclxuICAgICAgICAgICAgLy8gaW5wdXQgYnVmZmVyIChhc3N1bWluZyBpdCBjb250YWlucyBzdWZmaWNpZW50IGRhdGEpLiBUaGlzIGdpdmVzIH4yNSVcclxuICAgICAgICAgICAgLy8gc3BlZWR1cCBvbiBDaHJvbWUgMjMgYW5kIH4xNSUgc3BlZWR1cCBvbiBGaXJlZm94IDE2LCBidXQgcmVxdWlyZXMgdGhhdFxyXG4gICAgICAgICAgICAvLyB0aGUgZGF0YSBpcyBwcm92aWRlZCBpbiBsYXJnZSBjaHVua3MgKG9yIGluIG11bHRpcGxlcyBvZiA2NCBieXRlcykuXHJcbiAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgd2hpbGUgKG4gPD0gbGVuZ3RoTWludXNCbG9jaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29tcHJlc3NfKGJ5dGVzLCBuKTtcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRoaXMuYmxvY2tTaXplO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICB3aGlsZSAobiA8IGxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1ZltpbmJ1Zl0gPSBieXRlcy5jaGFyQ29kZUF0KG4pO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHdoaWxlIChuIDwgbGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmW2luYnVmXSA9IGJ5dGVzW25dO1xyXG4gICAgICAgICAgICAgICAgICAgICsraW5idWY7XHJcbiAgICAgICAgICAgICAgICAgICAgKytuO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmJ1ZiA9PT0gdGhpcy5ibG9ja1NpemUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wcmVzc18oYnVmKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5idWYgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBKdW1wIHRvIHRoZSBvdXRlciBsb29wIHNvIHdlIHVzZSB0aGUgZnVsbC1ibG9jayBvcHRpbWl6YXRpb24uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmluYnVmXyA9IGluYnVmO1xyXG4gICAgICAgIHRoaXMudG90YWxfICs9IGxlbmd0aDtcclxuICAgIH1cclxuICAgIC8qKiBAb3ZlcnJpZGUgKi9cclxuICAgIGRpZ2VzdCgpIHtcclxuICAgICAgICBjb25zdCBkaWdlc3QgPSBbXTtcclxuICAgICAgICBsZXQgdG90YWxCaXRzID0gdGhpcy50b3RhbF8gKiA4O1xyXG4gICAgICAgIC8vIEFkZCBwYWQgMHg4MCAweDAwKi5cclxuICAgICAgICBpZiAodGhpcy5pbmJ1Zl8gPCA1Nikge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZSh0aGlzLnBhZF8sIDU2IC0gdGhpcy5pbmJ1Zl8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGUodGhpcy5wYWRfLCB0aGlzLmJsb2NrU2l6ZSAtICh0aGlzLmluYnVmXyAtIDU2KSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFkZCAjIGJpdHMuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuYmxvY2tTaXplIC0gMTsgaSA+PSA1NjsgaS0tKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYnVmX1tpXSA9IHRvdGFsQml0cyAmIDI1NTtcclxuICAgICAgICAgICAgdG90YWxCaXRzIC89IDI1NjsgLy8gRG9uJ3QgdXNlIGJpdC1zaGlmdGluZyBoZXJlIVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXByZXNzXyh0aGlzLmJ1Zl8pO1xyXG4gICAgICAgIGxldCBuID0gMDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMjQ7IGogPj0gMDsgaiAtPSA4KSB7XHJcbiAgICAgICAgICAgICAgICBkaWdlc3Rbbl0gPSAodGhpcy5jaGFpbl9baV0gPj4gaikgJiAyNTU7XHJcbiAgICAgICAgICAgICAgICArK247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRpZ2VzdDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogSGVscGVyIHRvIG1ha2UgYSBTdWJzY3JpYmUgZnVuY3Rpb24gKGp1c3QgbGlrZSBQcm9taXNlIGhlbHBzIG1ha2UgYVxyXG4gKiBUaGVuYWJsZSkuXHJcbiAqXHJcbiAqIEBwYXJhbSBleGVjdXRvciBGdW5jdGlvbiB3aGljaCBjYW4gbWFrZSBjYWxscyB0byBhIHNpbmdsZSBPYnNlcnZlclxyXG4gKiAgICAgYXMgYSBwcm94eS5cclxuICogQHBhcmFtIG9uTm9PYnNlcnZlcnMgQ2FsbGJhY2sgd2hlbiBjb3VudCBvZiBPYnNlcnZlcnMgZ29lcyB0byB6ZXJvLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3Vic2NyaWJlKGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKSB7XHJcbiAgICBjb25zdCBwcm94eSA9IG5ldyBPYnNlcnZlclByb3h5KGV4ZWN1dG9yLCBvbk5vT2JzZXJ2ZXJzKTtcclxuICAgIHJldHVybiBwcm94eS5zdWJzY3JpYmUuYmluZChwcm94eSk7XHJcbn1cclxuLyoqXHJcbiAqIEltcGxlbWVudCBmYW4tb3V0IGZvciBhbnkgbnVtYmVyIG9mIE9ic2VydmVycyBhdHRhY2hlZCB2aWEgYSBzdWJzY3JpYmVcclxuICogZnVuY3Rpb24uXHJcbiAqL1xyXG5jbGFzcyBPYnNlcnZlclByb3h5IHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGV4ZWN1dG9yIEZ1bmN0aW9uIHdoaWNoIGNhbiBtYWtlIGNhbGxzIHRvIGEgc2luZ2xlIE9ic2VydmVyXHJcbiAgICAgKiAgICAgYXMgYSBwcm94eS5cclxuICAgICAqIEBwYXJhbSBvbk5vT2JzZXJ2ZXJzIENhbGxiYWNrIHdoZW4gY291bnQgb2YgT2JzZXJ2ZXJzIGdvZXMgdG8gemVyby5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IoZXhlY3V0b3IsIG9uTm9PYnNlcnZlcnMpIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudW5zdWJzY3JpYmVzID0gW107XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50ID0gMDtcclxuICAgICAgICAvLyBNaWNyby10YXNrIHNjaGVkdWxpbmcgYnkgY2FsbGluZyB0YXNrLnRoZW4oKS5cclxuICAgICAgICB0aGlzLnRhc2sgPSBQcm9taXNlLnJlc29sdmUoKTtcclxuICAgICAgICB0aGlzLmZpbmFsaXplZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub25Ob09ic2VydmVycyA9IG9uTm9PYnNlcnZlcnM7XHJcbiAgICAgICAgLy8gQ2FsbCB0aGUgZXhlY3V0b3IgYXN5bmNocm9ub3VzbHkgc28gc3Vic2NyaWJlcnMgdGhhdCBhcmUgY2FsbGVkXHJcbiAgICAgICAgLy8gc3luY2hyb25vdXNseSBhZnRlciB0aGUgY3JlYXRpb24gb2YgdGhlIHN1YnNjcmliZSBmdW5jdGlvblxyXG4gICAgICAgIC8vIGNhbiBzdGlsbCByZWNlaXZlIHRoZSB2ZXJ5IGZpcnN0IHZhbHVlIGdlbmVyYXRlZCBpbiB0aGUgZXhlY3V0b3IuXHJcbiAgICAgICAgdGhpcy50YXNrXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZXhlY3V0b3IodGhpcyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKGUgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmVycm9yKGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgbmV4dCh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5uZXh0KHZhbHVlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgdGhpcy5mb3JFYWNoT2JzZXJ2ZXIoKG9ic2VydmVyKSA9PiB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmVycm9yKGVycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmNsb3NlKGVycm9yKTtcclxuICAgIH1cclxuICAgIGNvbXBsZXRlKCkge1xyXG4gICAgICAgIHRoaXMuZm9yRWFjaE9ic2VydmVyKChvYnNlcnZlcikgPT4ge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5jb21wbGV0ZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gYWRkIGFuIE9ic2VydmVyIHRvIHRoZSBmYW4tb3V0IGxpc3QuXHJcbiAgICAgKlxyXG4gICAgICogLSBXZSByZXF1aXJlIHRoYXQgbm8gZXZlbnQgaXMgc2VudCB0byBhIHN1YnNjcmliZXIgc3ljaHJvbm91c2x5IHRvIHRoZWlyXHJcbiAgICAgKiAgIGNhbGwgdG8gc3Vic2NyaWJlKCkuXHJcbiAgICAgKi9cclxuICAgIHN1YnNjcmliZShuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlKSB7XHJcbiAgICAgICAgbGV0IG9ic2VydmVyO1xyXG4gICAgICAgIGlmIChuZXh0T3JPYnNlcnZlciA9PT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgICAgIGVycm9yID09PSB1bmRlZmluZWQgJiZcclxuICAgICAgICAgICAgY29tcGxldGUgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgT2JzZXJ2ZXIuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEFzc2VtYmxlIGFuIE9ic2VydmVyIG9iamVjdCB3aGVuIHBhc3NlZCBhcyBjYWxsYmFjayBmdW5jdGlvbnMuXHJcbiAgICAgICAgaWYgKGltcGxlbWVudHNBbnlNZXRob2RzKG5leHRPck9ic2VydmVyLCBbXHJcbiAgICAgICAgICAgICduZXh0JyxcclxuICAgICAgICAgICAgJ2Vycm9yJyxcclxuICAgICAgICAgICAgJ2NvbXBsZXRlJ1xyXG4gICAgICAgIF0pKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyID0gbmV4dE9yT2JzZXJ2ZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBvYnNlcnZlciA9IHtcclxuICAgICAgICAgICAgICAgIG5leHQ6IG5leHRPck9ic2VydmVyLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIubmV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLm5leHQgPSBub29wO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAob2JzZXJ2ZXIuZXJyb3IgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBvYnNlcnZlci5lcnJvciA9IG5vb3A7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChvYnNlcnZlci5jb21wbGV0ZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIG9ic2VydmVyLmNvbXBsZXRlID0gbm9vcDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWIgPSB0aGlzLnVuc3Vic2NyaWJlT25lLmJpbmQodGhpcywgdGhpcy5vYnNlcnZlcnMubGVuZ3RoKTtcclxuICAgICAgICAvLyBBdHRlbXB0IHRvIHN1YnNjcmliZSB0byBhIHRlcm1pbmF0ZWQgT2JzZXJ2YWJsZSAtIHdlXHJcbiAgICAgICAgLy8ganVzdCByZXNwb25kIHRvIHRoZSBPYnNlcnZlciB3aXRoIHRoZSBmaW5hbCBlcnJvciBvciBjb21wbGV0ZVxyXG4gICAgICAgIC8vIGV2ZW50LlxyXG4gICAgICAgIGlmICh0aGlzLmZpbmFsaXplZCkge1xyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgICAgIHRoaXMudGFzay50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZmluYWxFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5lcnJvcih0aGlzLmZpbmFsRXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIuY29tcGxldGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIG5vdGhpbmdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2gob2JzZXJ2ZXIpO1xyXG4gICAgICAgIHJldHVybiB1bnN1YjtcclxuICAgIH1cclxuICAgIC8vIFVuc3Vic2NyaWJlIGlzIHN5bmNocm9ub3VzIC0gd2UgZ3VhcmFudGVlIHRoYXQgbm8gZXZlbnRzIGFyZSBzZW50IHRvXHJcbiAgICAvLyBhbnkgdW5zdWJzY3JpYmVkIE9ic2VydmVyLlxyXG4gICAgdW5zdWJzY3JpYmVPbmUoaSkge1xyXG4gICAgICAgIGlmICh0aGlzLm9ic2VydmVycyA9PT0gdW5kZWZpbmVkIHx8IHRoaXMub2JzZXJ2ZXJzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWxldGUgdGhpcy5vYnNlcnZlcnNbaV07XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlckNvdW50IC09IDE7XHJcbiAgICAgICAgaWYgKHRoaXMub2JzZXJ2ZXJDb3VudCA9PT0gMCAmJiB0aGlzLm9uTm9PYnNlcnZlcnMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnModGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZm9yRWFjaE9ic2VydmVyKGZuKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIC8vIEFscmVhZHkgY2xvc2VkIGJ5IHByZXZpb3VzIGV2ZW50Li4uLmp1c3QgZWF0IHRoZSBhZGRpdGlvbmFsIHZhbHVlcy5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTaW5jZSBzZW5kT25lIGNhbGxzIGFzeW5jaHJvbm91c2x5IC0gdGhlcmUgaXMgbm8gY2hhbmNlIHRoYXRcclxuICAgICAgICAvLyB0aGlzLm9ic2VydmVycyB3aWxsIGJlY29tZSB1bmRlZmluZWQuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9ic2VydmVycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRPbmUoaSwgZm4pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIENhbGwgdGhlIE9ic2VydmVyIHZpYSBvbmUgb2YgaXQncyBjYWxsYmFjayBmdW5jdGlvbi4gV2UgYXJlIGNhcmVmdWwgdG9cclxuICAgIC8vIGNvbmZpcm0gdGhhdCB0aGUgb2JzZXJ2ZSBoYXMgbm90IGJlZW4gdW5zdWJzY3JpYmVkIHNpbmNlIHRoaXMgYXN5bmNocm9ub3VzXHJcbiAgICAvLyBmdW5jdGlvbiBoYWQgYmVlbiBxdWV1ZWQuXHJcbiAgICBzZW5kT25lKGksIGZuKSB7XHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0aGUgY2FsbGJhY2sgYXN5bmNocm9ub3VzbHlcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgdGhpcy50YXNrLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5vYnNlcnZlcnMgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm9ic2VydmVyc1tpXSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZuKHRoaXMub2JzZXJ2ZXJzW2ldKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGV4Y2VwdGlvbnMgcmFpc2VkIGluIE9ic2VydmVycyBvciBtaXNzaW5nIG1ldGhvZHMgb2YgYW5cclxuICAgICAgICAgICAgICAgICAgICAvLyBPYnNlcnZlci5cclxuICAgICAgICAgICAgICAgICAgICAvLyBMb2cgZXJyb3IgdG8gY29uc29sZS4gYi8zMTQwNDgwNlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiYgY29uc29sZS5lcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY2xvc2UoZXJyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuZmluYWxpemVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5maW5hbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgIGlmIChlcnIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB0aGlzLmZpbmFsRXJyb3IgPSBlcnI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFByb3h5IGlzIG5vIGxvbmdlciBuZWVkZWQgLSBnYXJiYWdlIGNvbGxlY3QgcmVmZXJlbmNlc1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICB0aGlzLnRhc2sudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB0aGlzLm9uTm9PYnNlcnZlcnMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqIFR1cm4gc3luY2hyb25vdXMgZnVuY3Rpb24gaW50byBvbmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5LiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L2Jhbi10eXBlc1xyXG5mdW5jdGlvbiBhc3luYyhmbiwgb25FcnJvcikge1xyXG4gICAgcmV0dXJuICguLi5hcmdzKSA9PiB7XHJcbiAgICAgICAgUHJvbWlzZS5yZXNvbHZlKHRydWUpXHJcbiAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgZm4oLi4uYXJncyk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAob25FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgb25FcnJvcihlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIFJldHVybiB0cnVlIGlmIHRoZSBvYmplY3QgcGFzc2VkIGluIGltcGxlbWVudHMgYW55IG9mIHRoZSBuYW1lZCBtZXRob2RzLlxyXG4gKi9cclxuZnVuY3Rpb24gaW1wbGVtZW50c0FueU1ldGhvZHMob2JqLCBtZXRob2RzKSB7XHJcbiAgICBpZiAodHlwZW9mIG9iaiAhPT0gJ29iamVjdCcgfHwgb2JqID09PSBudWxsKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgZm9yIChjb25zdCBtZXRob2Qgb2YgbWV0aG9kcykge1xyXG4gICAgICAgIGlmIChtZXRob2QgaW4gb2JqICYmIHR5cGVvZiBvYmpbbWV0aG9kXSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuZnVuY3Rpb24gbm9vcCgpIHtcclxuICAgIC8vIGRvIG5vdGhpbmdcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQ2hlY2sgdG8gbWFrZSBzdXJlIHRoZSBhcHByb3ByaWF0ZSBudW1iZXIgb2YgYXJndW1lbnRzIGFyZSBwcm92aWRlZCBmb3IgYSBwdWJsaWMgZnVuY3Rpb24uXHJcbiAqIFRocm93cyBhbiBlcnJvciBpZiBpdCBmYWlscy5cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gbWluQ291bnQgVGhlIG1pbmltdW0gbnVtYmVyIG9mIGFyZ3VtZW50cyB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIG1heENvdW50IFRoZSBtYXhpbXVtIG51bWJlciBvZiBhcmd1bWVudCB0byBhbGxvdyBmb3IgdGhlIGZ1bmN0aW9uIGNhbGxcclxuICogQHBhcmFtIGFyZ0NvdW50IFRoZSBhY3R1YWwgbnVtYmVyIG9mIGFyZ3VtZW50cyBwcm92aWRlZC5cclxuICovXHJcbmNvbnN0IHZhbGlkYXRlQXJnQ291bnQgPSBmdW5jdGlvbiAoZm5OYW1lLCBtaW5Db3VudCwgbWF4Q291bnQsIGFyZ0NvdW50KSB7XHJcbiAgICBsZXQgYXJnRXJyb3I7XHJcbiAgICBpZiAoYXJnQ291bnQgPCBtaW5Db3VudCkge1xyXG4gICAgICAgIGFyZ0Vycm9yID0gJ2F0IGxlYXN0ICcgKyBtaW5Db3VudDtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKGFyZ0NvdW50ID4gbWF4Q291bnQpIHtcclxuICAgICAgICBhcmdFcnJvciA9IG1heENvdW50ID09PSAwID8gJ25vbmUnIDogJ25vIG1vcmUgdGhhbiAnICsgbWF4Q291bnQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYXJnRXJyb3IpIHtcclxuICAgICAgICBjb25zdCBlcnJvciA9IGZuTmFtZSArXHJcbiAgICAgICAgICAgICcgZmFpbGVkOiBXYXMgY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgIGFyZ0NvdW50ICtcclxuICAgICAgICAgICAgKGFyZ0NvdW50ID09PSAxID8gJyBhcmd1bWVudC4nIDogJyBhcmd1bWVudHMuJykgK1xyXG4gICAgICAgICAgICAnIEV4cGVjdHMgJyArXHJcbiAgICAgICAgICAgIGFyZ0Vycm9yICtcclxuICAgICAgICAgICAgJy4nO1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvcik7XHJcbiAgICB9XHJcbn07XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSBzdHJpbmcgdG8gcHJlZml4IGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgZmFpbGVkIGFyZ3VtZW50IHZhbGlkYXRpb25cclxuICpcclxuICogQHBhcmFtIGZuTmFtZSBUaGUgZnVuY3Rpb24gbmFtZVxyXG4gKiBAcGFyYW0gYXJnTmFtZSBUaGUgbmFtZSBvZiB0aGUgYXJndW1lbnRcclxuICogQHJldHVybiBUaGUgcHJlZml4IHRvIGFkZCB0byB0aGUgZXJyb3IgdGhyb3duIGZvciB2YWxpZGF0aW9uLlxyXG4gKi9cclxuZnVuY3Rpb24gZXJyb3JQcmVmaXgoZm5OYW1lLCBhcmdOYW1lKSB7XHJcbiAgICByZXR1cm4gYCR7Zm5OYW1lfSBmYWlsZWQ6ICR7YXJnTmFtZX0gYXJndW1lbnQgYDtcclxufVxyXG4vKipcclxuICogQHBhcmFtIGZuTmFtZVxyXG4gKiBAcGFyYW0gYXJndW1lbnROdW1iZXJcclxuICogQHBhcmFtIG5hbWVzcGFjZVxyXG4gKiBAcGFyYW0gb3B0aW9uYWxcclxuICovXHJcbmZ1bmN0aW9uIHZhbGlkYXRlTmFtZXNwYWNlKGZuTmFtZSwgbmFtZXNwYWNlLCBvcHRpb25hbCkge1xyXG4gICAgaWYgKG9wdGlvbmFsICYmICFuYW1lc3BhY2UpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIG5hbWVzcGFjZSAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAvL1RPRE86IEkgc2hvdWxkIGRvIG1vcmUgdmFsaWRhdGlvbiBoZXJlLiBXZSBvbmx5IGFsbG93IGNlcnRhaW4gY2hhcnMgaW4gbmFtZXNwYWNlcy5cclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoZXJyb3JQcmVmaXgoZm5OYW1lLCAnbmFtZXNwYWNlJykgKyAnbXVzdCBiZSBhIHZhbGlkIGZpcmViYXNlIG5hbWVzcGFjZS4nKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiB2YWxpZGF0ZUNhbGxiYWNrKGZuTmFtZSwgYXJndW1lbnROYW1lLCBcclxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHlwZXNcclxuY2FsbGJhY2ssIG9wdGlvbmFsKSB7XHJcbiAgICBpZiAob3B0aW9uYWwgJiYgIWNhbGxiYWNrKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGVvZiBjYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGZ1bmN0aW9uLicpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHZhbGlkYXRlQ29udGV4dE9iamVjdChmbk5hbWUsIGFyZ3VtZW50TmFtZSwgY29udGV4dCwgb3B0aW9uYWwpIHtcclxuICAgIGlmIChvcHRpb25hbCAmJiAhY29udGV4dCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgY29udGV4dCAhPT0gJ29iamVjdCcgfHwgY29udGV4dCA9PT0gbnVsbCkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihlcnJvclByZWZpeChmbk5hbWUsIGFyZ3VtZW50TmFtZSkgKyAnbXVzdCBiZSBhIHZhbGlkIGNvbnRleHQgb2JqZWN0LicpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIENvZGUgb3JpZ2luYWxseSBjYW1lIGZyb20gZ29vZy5jcnlwdC5zdHJpbmdUb1V0ZjhCeXRlQXJyYXksIGJ1dCBmb3Igc29tZSByZWFzb24gdGhleVxyXG4vLyBhdXRvbWF0aWNhbGx5IHJlcGxhY2VkICdcXHJcXG4nIHdpdGggJ1xcbicsIGFuZCB0aGV5IGRpZG4ndCBoYW5kbGUgc3Vycm9nYXRlIHBhaXJzLFxyXG4vLyBzbyBpdCdzIGJlZW4gbW9kaWZpZWQuXHJcbi8vIE5vdGUgdGhhdCBub3QgYWxsIFVuaWNvZGUgY2hhcmFjdGVycyBhcHBlYXIgYXMgc2luZ2xlIGNoYXJhY3RlcnMgaW4gSmF2YVNjcmlwdCBzdHJpbmdzLlxyXG4vLyBmcm9tQ2hhckNvZGUgcmV0dXJucyB0aGUgVVRGLTE2IGVuY29kaW5nIG9mIGEgY2hhcmFjdGVyIC0gc28gc29tZSBVbmljb2RlIGNoYXJhY3RlcnNcclxuLy8gdXNlIDIgY2hhcmFjdGVycyBpbiBKYXZhc2NyaXB0LiAgQWxsIDQtYnl0ZSBVVEYtOCBjaGFyYWN0ZXJzIGJlZ2luIHdpdGggYSBmaXJzdFxyXG4vLyBjaGFyYWN0ZXIgaW4gdGhlIHJhbmdlIDB4RDgwMCAtIDB4REJGRiAodGhlIGZpcnN0IGNoYXJhY3RlciBvZiBhIHNvLWNhbGxlZCBzdXJyb2dhdGVcclxuLy8gcGFpcikuXHJcbi8vIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNS4xLyNzZWMtMTUuMS4zXHJcbi8qKlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyXHJcbiAqIEByZXR1cm4ge0FycmF5fVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nVG9CeXRlQXJyYXkgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICBjb25zdCBvdXQgPSBbXTtcclxuICAgIGxldCBwID0gMDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgbGV0IGMgPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgICAgICAvLyBJcyB0aGlzIHRoZSBsZWFkIHN1cnJvZ2F0ZSBpbiBhIHN1cnJvZ2F0ZSBwYWlyP1xyXG4gICAgICAgIGlmIChjID49IDB4ZDgwMCAmJiBjIDw9IDB4ZGJmZikge1xyXG4gICAgICAgICAgICBjb25zdCBoaWdoID0gYyAtIDB4ZDgwMDsgLy8gdGhlIGhpZ2ggMTAgYml0cy5cclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgICAgICBhc3NlcnQoaSA8IHN0ci5sZW5ndGgsICdTdXJyb2dhdGUgcGFpciBtaXNzaW5nIHRyYWlsIHN1cnJvZ2F0ZS4nKTtcclxuICAgICAgICAgICAgY29uc3QgbG93ID0gc3RyLmNoYXJDb2RlQXQoaSkgLSAweGRjMDA7IC8vIHRoZSBsb3cgMTAgYml0cy5cclxuICAgICAgICAgICAgYyA9IDB4MTAwMDAgKyAoaGlnaCA8PCAxMCkgKyBsb3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChjIDwgMTI4KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gYztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDIwNDgpIHtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyA+PiA2KSB8IDE5MjtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoYyA8IDY1NTM2KSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTIpIHwgMjI0O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiA2KSAmIDYzKSB8IDEyODtcclxuICAgICAgICAgICAgb3V0W3ArK10gPSAoYyAmIDYzKSB8IDEyODtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKGMgPj4gMTgpIHwgMjQwO1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9ICgoYyA+PiAxMikgJiA2MykgfCAxMjg7XHJcbiAgICAgICAgICAgIG91dFtwKytdID0gKChjID4+IDYpICYgNjMpIHwgMTI4O1xyXG4gICAgICAgICAgICBvdXRbcCsrXSA9IChjICYgNjMpIHwgMTI4O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBvdXQ7XHJcbn07XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgbGVuZ3RoIHdpdGhvdXQgYWN0dWFsbHkgY29udmVydGluZzsgdXNlZnVsIGZvciBkb2luZyBjaGVhcGVyIHZhbGlkYXRpb24uXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzdHJcclxuICogQHJldHVybiB7bnVtYmVyfVxyXG4gKi9cclxuY29uc3Qgc3RyaW5nTGVuZ3RoID0gZnVuY3Rpb24gKHN0cikge1xyXG4gICAgbGV0IHAgPSAwO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdHIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgaWYgKGMgPCAxMjgpIHtcclxuICAgICAgICAgICAgcCsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChjIDwgMjA0OCkge1xyXG4gICAgICAgICAgICBwICs9IDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGMgPj0gMHhkODAwICYmIGMgPD0gMHhkYmZmKSB7XHJcbiAgICAgICAgICAgIC8vIExlYWQgc3Vycm9nYXRlIG9mIGEgc3Vycm9nYXRlIHBhaXIuICBUaGUgcGFpciB0b2dldGhlciB3aWxsIHRha2UgNCBieXRlcyB0byByZXByZXNlbnQuXHJcbiAgICAgICAgICAgIHAgKz0gNDtcclxuICAgICAgICAgICAgaSsrOyAvLyBza2lwIHRyYWlsIHN1cnJvZ2F0ZS5cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHAgKz0gMztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcDtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvcGllZCBmcm9tIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqIEdlbmVyYXRlcyBhIG5ldyB1dWlkLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCB1dWlkdjQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBjID0+IHtcclxuICAgICAgICBjb25zdCByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcclxuICAgICAgICByZXR1cm4gdi50b1N0cmluZygxNik7XHJcbiAgICB9KTtcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFRoZSBhbW91bnQgb2YgbWlsbGlzZWNvbmRzIHRvIGV4cG9uZW50aWFsbHkgaW5jcmVhc2UuXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0lOVEVSVkFMX01JTExJUyA9IDEwMDA7XHJcbi8qKlxyXG4gKiBUaGUgZmFjdG9yIHRvIGJhY2tvZmYgYnkuXHJcbiAqIFNob3VsZCBiZSBhIG51bWJlciBncmVhdGVyIHRoYW4gMS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQkFDS09GRl9GQUNUT1IgPSAyO1xyXG4vKipcclxuICogVGhlIG1heGltdW0gbWlsbGlzZWNvbmRzIHRvIGluY3JlYXNlIHRvLlxyXG4gKlxyXG4gKiA8cD5WaXNpYmxlIGZvciB0ZXN0aW5nXHJcbiAqL1xyXG5jb25zdCBNQVhfVkFMVUVfTUlMTElTID0gNCAqIDYwICogNjAgKiAxMDAwOyAvLyBGb3VyIGhvdXJzLCBsaWtlIGlPUyBhbmQgQW5kcm9pZC5cclxuLyoqXHJcbiAqIFRoZSBwZXJjZW50YWdlIG9mIGJhY2tvZmYgdGltZSB0byByYW5kb21pemUgYnkuXHJcbiAqIFNlZVxyXG4gKiBodHRwOi8vZ28vc2FmZS1jbGllbnQtYmVoYXZpb3Ijc3RlcC0xLWRldGVybWluZS10aGUtYXBwcm9wcmlhdGUtcmV0cnktaW50ZXJ2YWwtdG8taGFuZGxlLXNwaWtlLXRyYWZmaWNcclxuICogZm9yIGNvbnRleHQuXHJcbiAqXHJcbiAqIDxwPlZpc2libGUgZm9yIHRlc3RpbmdcclxuICovXHJcbmNvbnN0IFJBTkRPTV9GQUNUT1IgPSAwLjU7XHJcbi8qKlxyXG4gKiBCYXNlZCBvbiB0aGUgYmFja29mZiBtZXRob2QgZnJvbVxyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2Nsb3N1cmUtbGlicmFyeS9ibG9iL21hc3Rlci9jbG9zdXJlL2dvb2cvbWF0aC9leHBvbmVudGlhbGJhY2tvZmYuanMuXHJcbiAqIEV4dHJhY3RlZCBoZXJlIHNvIHdlIGRvbid0IG5lZWQgdG8gcGFzcyBtZXRhZGF0YSBhbmQgYSBzdGF0ZWZ1bCBFeHBvbmVudGlhbEJhY2tvZmYgb2JqZWN0IGFyb3VuZC5cclxuICovXHJcbmZ1bmN0aW9uIGNhbGN1bGF0ZUJhY2tvZmZNaWxsaXMoYmFja29mZkNvdW50LCBpbnRlcnZhbE1pbGxpcyA9IERFRkFVTFRfSU5URVJWQUxfTUlMTElTLCBiYWNrb2ZmRmFjdG9yID0gREVGQVVMVF9CQUNLT0ZGX0ZBQ1RPUikge1xyXG4gICAgLy8gQ2FsY3VsYXRlcyBhbiBleHBvbmVudGlhbGx5IGluY3JlYXNpbmcgdmFsdWUuXHJcbiAgICAvLyBEZXZpYXRpb246IGNhbGN1bGF0ZXMgdmFsdWUgZnJvbSBjb3VudCBhbmQgYSBjb25zdGFudCBpbnRlcnZhbCwgc28gd2Ugb25seSBuZWVkIHRvIHNhdmUgdmFsdWVcclxuICAgIC8vIGFuZCBjb3VudCB0byByZXN0b3JlIHN0YXRlLlxyXG4gICAgY29uc3QgY3VyckJhc2VWYWx1ZSA9IGludGVydmFsTWlsbGlzICogTWF0aC5wb3coYmFja29mZkZhY3RvciwgYmFja29mZkNvdW50KTtcclxuICAgIC8vIEEgcmFuZG9tIFwiZnV6elwiIHRvIGF2b2lkIHdhdmVzIG9mIHJldHJpZXMuXHJcbiAgICAvLyBEZXZpYXRpb246IHJhbmRvbUZhY3RvciBpcyByZXF1aXJlZC5cclxuICAgIGNvbnN0IHJhbmRvbVdhaXQgPSBNYXRoLnJvdW5kKFxyXG4gICAgLy8gQSBmcmFjdGlvbiBvZiB0aGUgYmFja29mZiB2YWx1ZSB0byBhZGQvc3VidHJhY3QuXHJcbiAgICAvLyBEZXZpYXRpb246IGNoYW5nZXMgbXVsdGlwbGljYXRpb24gb3JkZXIgdG8gaW1wcm92ZSByZWFkYWJpbGl0eS5cclxuICAgIFJBTkRPTV9GQUNUT1IgKlxyXG4gICAgICAgIGN1cnJCYXNlVmFsdWUgKlxyXG4gICAgICAgIC8vIEEgcmFuZG9tIGZsb2F0IChyb3VuZGVkIHRvIGludCBieSBNYXRoLnJvdW5kIGFib3ZlKSBpbiB0aGUgcmFuZ2UgWy0xLCAxXS4gRGV0ZXJtaW5lc1xyXG4gICAgICAgIC8vIGlmIHdlIGFkZCBvciBzdWJ0cmFjdC5cclxuICAgICAgICAoTWF0aC5yYW5kb20oKSAtIDAuNSkgKlxyXG4gICAgICAgIDIpO1xyXG4gICAgLy8gTGltaXRzIGJhY2tvZmYgdG8gbWF4IHRvIGF2b2lkIGVmZmVjdGl2ZWx5IHBlcm1hbmVudCBiYWNrb2ZmLlxyXG4gICAgcmV0dXJuIE1hdGgubWluKE1BWF9WQUxVRV9NSUxMSVMsIGN1cnJCYXNlVmFsdWUgKyByYW5kb21XYWl0KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZSBFbmdsaXNoIG9yZGluYWwgbGV0dGVycyBhZnRlciBhIG51bWJlclxyXG4gKi9cclxuZnVuY3Rpb24gb3JkaW5hbChpKSB7XHJcbiAgICBpZiAoIU51bWJlci5pc0Zpbml0ZShpKSkge1xyXG4gICAgICAgIHJldHVybiBgJHtpfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gaSArIGluZGljYXRvcihpKTtcclxufVxyXG5mdW5jdGlvbiBpbmRpY2F0b3IoaSkge1xyXG4gICAgaSA9IE1hdGguYWJzKGkpO1xyXG4gICAgY29uc3QgY2VudCA9IGkgJSAxMDA7XHJcbiAgICBpZiAoY2VudCA+PSAxMCAmJiBjZW50IDw9IDIwKSB7XHJcbiAgICAgICAgcmV0dXJuICd0aCc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBkZWMgPSBpICUgMTA7XHJcbiAgICBpZiAoZGVjID09PSAxKSB7XHJcbiAgICAgICAgcmV0dXJuICdzdCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAyKSB7XHJcbiAgICAgICAgcmV0dXJuICduZCc7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVjID09PSAzKSB7XHJcbiAgICAgICAgcmV0dXJuICdyZCc7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gJ3RoJztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRNb2R1bGFySW5zdGFuY2Uoc2VydmljZSkge1xyXG4gICAgaWYgKHNlcnZpY2UgJiYgc2VydmljZS5fZGVsZWdhdGUpIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZS5fZGVsZWdhdGU7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICByZXR1cm4gc2VydmljZTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDT05TVEFOVFMsIERlY29kZUJhc2U2NFN0cmluZ0Vycm9yLCBEZWZlcnJlZCwgRXJyb3JGYWN0b3J5LCBGaXJlYmFzZUVycm9yLCBNQVhfVkFMVUVfTUlMTElTLCBSQU5ET01fRkFDVE9SLCBTaGExLCBhcmVDb29raWVzRW5hYmxlZCwgYXNzZXJ0LCBhc3NlcnRpb25FcnJvciwgYXN5bmMsIGJhc2U2NCwgYmFzZTY0RGVjb2RlLCBiYXNlNjRFbmNvZGUsIGJhc2U2NHVybEVuY29kZVdpdGhvdXRQYWRkaW5nLCBjYWxjdWxhdGVCYWNrb2ZmTWlsbGlzLCBjb250YWlucywgY3JlYXRlTW9ja1VzZXJUb2tlbiwgY3JlYXRlU3Vic2NyaWJlLCBkZWNvZGUsIGRlZXBDb3B5LCBkZWVwRXF1YWwsIGRlZXBFeHRlbmQsIGVycm9yUHJlZml4LCBleHRyYWN0UXVlcnlzdHJpbmcsIGdldERlZmF1bHRBcHBDb25maWcsIGdldERlZmF1bHRFbXVsYXRvckhvc3QsIGdldERlZmF1bHRFbXVsYXRvckhvc3RuYW1lQW5kUG9ydCwgZ2V0RGVmYXVsdHMsIGdldEV4cGVyaW1lbnRhbFNldHRpbmcsIGdldEdsb2JhbCwgZ2V0TW9kdWxhckluc3RhbmNlLCBnZXRVQSwgaXNBZG1pbiwgaXNCcm93c2VyLCBpc0Jyb3dzZXJFeHRlbnNpb24sIGlzRWxlY3Ryb24sIGlzRW1wdHksIGlzSUUsIGlzSW5kZXhlZERCQXZhaWxhYmxlLCBpc01vYmlsZUNvcmRvdmEsIGlzTm9kZSwgaXNOb2RlU2RrLCBpc1JlYWN0TmF0aXZlLCBpc1NhZmFyaSwgaXNVV1AsIGlzVmFsaWRGb3JtYXQsIGlzVmFsaWRUaW1lc3RhbXAsIGlzc3VlZEF0VGltZSwganNvbkV2YWwsIG1hcCwgb3JkaW5hbCwgcHJvbWlzZVdpdGhUaW1lb3V0LCBxdWVyeXN0cmluZywgcXVlcnlzdHJpbmdEZWNvZGUsIHNhZmVHZXQsIHN0cmluZ0xlbmd0aCwgc3RyaW5nVG9CeXRlQXJyYXksIHN0cmluZ2lmeSwgdXVpZHY0LCB2YWxpZGF0ZUFyZ0NvdW50LCB2YWxpZGF0ZUNhbGxiYWNrLCB2YWxpZGF0ZUNvbnRleHRPYmplY3QsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUsIHZhbGlkYXRlTmFtZXNwYWNlIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxyXG5Db3B5cmlnaHQgKGMpIE1pY3Jvc29mdCBDb3Jwb3JhdGlvbi5cclxuXHJcblBlcm1pc3Npb24gdG8gdXNlLCBjb3B5LCBtb2RpZnksIGFuZC9vciBkaXN0cmlidXRlIHRoaXMgc29mdHdhcmUgZm9yIGFueVxyXG5wdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuXHJcblxyXG5USEUgU09GVFdBUkUgSVMgUFJPVklERUQgXCJBUyBJU1wiIEFORCBUSEUgQVVUSE9SIERJU0NMQUlNUyBBTEwgV0FSUkFOVElFUyBXSVRIXHJcblJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWVxyXG5BTkQgRklUTkVTUy4gSU4gTk8gRVZFTlQgU0hBTEwgVEhFIEFVVEhPUiBCRSBMSUFCTEUgRk9SIEFOWSBTUEVDSUFMLCBESVJFQ1QsXHJcbklORElSRUNULCBPUiBDT05TRVFVRU5USUFMIERBTUFHRVMgT1IgQU5ZIERBTUFHRVMgV0hBVFNPRVZFUiBSRVNVTFRJTkcgRlJPTVxyXG5MT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUlxyXG5PVEhFUiBUT1JUSU9VUyBBQ1RJT04sIEFSSVNJTkcgT1VUIE9GIE9SIElOIENPTk5FQ1RJT04gV0lUSCBUSEUgVVNFIE9SXHJcblBFUkZPUk1BTkNFIE9GIFRISVMgU09GVFdBUkUuXHJcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXHJcbi8qIGdsb2JhbCBSZWZsZWN0LCBQcm9taXNlLCBTdXBwcmVzc2VkRXJyb3IsIFN5bWJvbCAqL1xyXG5cclxudmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbihkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChiLCBwKSkgZFtwXSA9IGJbcF07IH07XHJcbiAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2V4dGVuZHMoZCwgYikge1xyXG4gICAgaWYgKHR5cGVvZiBiICE9PSBcImZ1bmN0aW9uXCIgJiYgYiAhPT0gbnVsbClcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIiArIFN0cmluZyhiKSArIFwiIGlzIG5vdCBhIGNvbnN0cnVjdG9yIG9yIG51bGxcIik7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19lc0RlY29yYXRlKGN0b3IsIGRlc2NyaXB0b3JJbiwgZGVjb3JhdG9ycywgY29udGV4dEluLCBpbml0aWFsaXplcnMsIGV4dHJhSW5pdGlhbGl6ZXJzKSB7XHJcbiAgICBmdW5jdGlvbiBhY2NlcHQoZikgeyBpZiAoZiAhPT0gdm9pZCAwICYmIHR5cGVvZiBmICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGdW5jdGlvbiBleHBlY3RlZFwiKTsgcmV0dXJuIGY7IH1cclxuICAgIHZhciBraW5kID0gY29udGV4dEluLmtpbmQsIGtleSA9IGtpbmQgPT09IFwiZ2V0dGVyXCIgPyBcImdldFwiIDoga2luZCA9PT0gXCJzZXR0ZXJcIiA/IFwic2V0XCIgOiBcInZhbHVlXCI7XHJcbiAgICB2YXIgdGFyZ2V0ID0gIWRlc2NyaXB0b3JJbiAmJiBjdG9yID8gY29udGV4dEluW1wic3RhdGljXCJdID8gY3RvciA6IGN0b3IucHJvdG90eXBlIDogbnVsbDtcclxuICAgIHZhciBkZXNjcmlwdG9yID0gZGVzY3JpcHRvckluIHx8ICh0YXJnZXQgPyBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHRhcmdldCwgY29udGV4dEluLm5hbWUpIDoge30pO1xyXG4gICAgdmFyIF8sIGRvbmUgPSBmYWxzZTtcclxuICAgIGZvciAodmFyIGkgPSBkZWNvcmF0b3JzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgdmFyIGNvbnRleHQgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbikgY29udGV4dFtwXSA9IHAgPT09IFwiYWNjZXNzXCIgPyB7fSA6IGNvbnRleHRJbltwXTtcclxuICAgICAgICBmb3IgKHZhciBwIGluIGNvbnRleHRJbi5hY2Nlc3MpIGNvbnRleHQuYWNjZXNzW3BdID0gY29udGV4dEluLmFjY2Vzc1twXTtcclxuICAgICAgICBjb250ZXh0LmFkZEluaXRpYWxpemVyID0gZnVuY3Rpb24gKGYpIHsgaWYgKGRvbmUpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgYWRkIGluaXRpYWxpemVycyBhZnRlciBkZWNvcmF0aW9uIGhhcyBjb21wbGV0ZWRcIik7IGV4dHJhSW5pdGlhbGl6ZXJzLnB1c2goYWNjZXB0KGYgfHwgbnVsbCkpOyB9O1xyXG4gICAgICAgIHZhciByZXN1bHQgPSAoMCwgZGVjb3JhdG9yc1tpXSkoa2luZCA9PT0gXCJhY2Nlc3NvclwiID8geyBnZXQ6IGRlc2NyaXB0b3IuZ2V0LCBzZXQ6IGRlc2NyaXB0b3Iuc2V0IH0gOiBkZXNjcmlwdG9yW2tleV0sIGNvbnRleHQpO1xyXG4gICAgICAgIGlmIChraW5kID09PSBcImFjY2Vzc29yXCIpIHtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gdm9pZCAwKSBjb250aW51ZTtcclxuICAgICAgICAgICAgaWYgKHJlc3VsdCA9PT0gbnVsbCB8fCB0eXBlb2YgcmVzdWx0ICE9PSBcIm9iamVjdFwiKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiT2JqZWN0IGV4cGVjdGVkXCIpO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuZ2V0KSkgZGVzY3JpcHRvci5nZXQgPSBfO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuc2V0KSkgZGVzY3JpcHRvci5zZXQgPSBfO1xyXG4gICAgICAgICAgICBpZiAoXyA9IGFjY2VwdChyZXN1bHQuaW5pdCkpIGluaXRpYWxpemVycy51bnNoaWZ0KF8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChfID0gYWNjZXB0KHJlc3VsdCkpIHtcclxuICAgICAgICAgICAgaWYgKGtpbmQgPT09IFwiZmllbGRcIikgaW5pdGlhbGl6ZXJzLnVuc2hpZnQoXyk7XHJcbiAgICAgICAgICAgIGVsc2UgZGVzY3JpcHRvcltrZXldID0gXztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAodGFyZ2V0KSBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBjb250ZXh0SW4ubmFtZSwgZGVzY3JpcHRvcik7XHJcbiAgICBkb25lID0gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3J1bkluaXRpYWxpemVycyh0aGlzQXJnLCBpbml0aWFsaXplcnMsIHZhbHVlKSB7XHJcbiAgICB2YXIgdXNlVmFsdWUgPSBhcmd1bWVudHMubGVuZ3RoID4gMjtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW5pdGlhbGl6ZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFsdWUgPSB1c2VWYWx1ZSA/IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcsIHZhbHVlKSA6IGluaXRpYWxpemVyc1tpXS5jYWxsKHRoaXNBcmcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVzZVZhbHVlID8gdmFsdWUgOiB2b2lkIDA7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wcm9wS2V5KHgpIHtcclxuICAgIHJldHVybiB0eXBlb2YgeCA9PT0gXCJzeW1ib2xcIiA/IHggOiBcIlwiLmNvbmNhdCh4KTtcclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NldEZ1bmN0aW9uTmFtZShmLCBuYW1lLCBwcmVmaXgpIHtcclxuICAgIGlmICh0eXBlb2YgbmFtZSA9PT0gXCJzeW1ib2xcIikgbmFtZSA9IG5hbWUuZGVzY3JpcHRpb24gPyBcIltcIi5jb25jYXQobmFtZS5kZXNjcmlwdGlvbiwgXCJdXCIpIDogXCJcIjtcclxuICAgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkoZiwgXCJuYW1lXCIsIHsgY29uZmlndXJhYmxlOiB0cnVlLCB2YWx1ZTogcHJlZml4ID8gXCJcIi5jb25jYXQocHJlZml4LCBcIiBcIiwgbmFtZSkgOiBuYW1lIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWV0YWRhdGEobWV0YWRhdGFLZXksIG1ldGFkYXRhVmFsdWUpIHtcclxuICAgIGlmICh0eXBlb2YgUmVmbGVjdCA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSA9PT0gXCJmdW5jdGlvblwiKSByZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0ZXIodGhpc0FyZywgX2FyZ3VtZW50cywgUCwgZ2VuZXJhdG9yKSB7XHJcbiAgICBmdW5jdGlvbiBhZG9wdCh2YWx1ZSkgeyByZXR1cm4gdmFsdWUgaW5zdGFuY2VvZiBQID8gdmFsdWUgOiBuZXcgUChmdW5jdGlvbiAocmVzb2x2ZSkgeyByZXNvbHZlKHZhbHVlKTsgfSk7IH1cclxuICAgIHJldHVybiBuZXcgKFAgfHwgKFAgPSBQcm9taXNlKSkoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgIGZ1bmN0aW9uIGZ1bGZpbGxlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvci5uZXh0KHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiByZWplY3RlZCh2YWx1ZSkgeyB0cnkgeyBzdGVwKGdlbmVyYXRvcltcInRocm93XCJdKHZhbHVlKSk7IH0gY2F0Y2ggKGUpIHsgcmVqZWN0KGUpOyB9IH1cclxuICAgICAgICBmdW5jdGlvbiBzdGVwKHJlc3VsdCkgeyByZXN1bHQuZG9uZSA/IHJlc29sdmUocmVzdWx0LnZhbHVlKSA6IGFkb3B0KHJlc3VsdC52YWx1ZSkudGhlbihmdWxmaWxsZWQsIHJlamVjdGVkKTsgfVxyXG4gICAgICAgIHN0ZXAoKGdlbmVyYXRvciA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSkubmV4dCgpKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19nZW5lcmF0b3IodGhpc0FyZywgYm9keSkge1xyXG4gICAgdmFyIF8gPSB7IGxhYmVsOiAwLCBzZW50OiBmdW5jdGlvbigpIHsgaWYgKHRbMF0gJiAxKSB0aHJvdyB0WzFdOyByZXR1cm4gdFsxXTsgfSwgdHJ5czogW10sIG9wczogW10gfSwgZiwgeSwgdCwgZztcclxuICAgIHJldHVybiBnID0geyBuZXh0OiB2ZXJiKDApLCBcInRocm93XCI6IHZlcmIoMSksIFwicmV0dXJuXCI6IHZlcmIoMikgfSwgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIChnW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0pLCBnO1xyXG4gICAgZnVuY3Rpb24gdmVyYihuKSB7IHJldHVybiBmdW5jdGlvbiAodikgeyByZXR1cm4gc3RlcChbbiwgdl0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzdGVwKG9wKSB7XHJcbiAgICAgICAgaWYgKGYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBleGVjdXRpbmcuXCIpO1xyXG4gICAgICAgIHdoaWxlIChnICYmIChnID0gMCwgb3BbMF0gJiYgKF8gPSAwKSksIF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IHZhciBfX2NyZWF0ZUJpbmRpbmcgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIG0sIGssIGsyKSB7XHJcbiAgICBpZiAoazIgPT09IHVuZGVmaW5lZCkgazIgPSBrO1xyXG4gICAgdmFyIGRlc2MgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG0sIGspO1xyXG4gICAgaWYgKCFkZXNjIHx8IChcImdldFwiIGluIGRlc2MgPyAhbS5fX2VzTW9kdWxlIDogZGVzYy53cml0YWJsZSB8fCBkZXNjLmNvbmZpZ3VyYWJsZSkpIHtcclxuICAgICAgICBkZXNjID0geyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGZ1bmN0aW9uKCkgeyByZXR1cm4gbVtrXTsgfSB9O1xyXG4gICAgfVxyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG8sIGsyLCBkZXNjKTtcclxufSkgOiAoZnVuY3Rpb24obywgbSwgaywgazIpIHtcclxuICAgIGlmIChrMiA9PT0gdW5kZWZpbmVkKSBrMiA9IGs7XHJcbiAgICBvW2syXSA9IG1ba107XHJcbn0pO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBvKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG8sIHApKSBfX2NyZWF0ZUJpbmRpbmcobywgbSwgcCk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWQoKSB7XHJcbiAgICBmb3IgKHZhciBhciA9IFtdLCBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKylcclxuICAgICAgICBhciA9IGFyLmNvbmNhdChfX3JlYWQoYXJndW1lbnRzW2ldKSk7XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbi8qKiBAZGVwcmVjYXRlZCAqL1xyXG5leHBvcnQgZnVuY3Rpb24gX19zcHJlYWRBcnJheXMoKSB7XHJcbiAgICBmb3IgKHZhciBzID0gMCwgaSA9IDAsIGlsID0gYXJndW1lbnRzLmxlbmd0aDsgaSA8IGlsOyBpKyspIHMgKz0gYXJndW1lbnRzW2ldLmxlbmd0aDtcclxuICAgIGZvciAodmFyIHIgPSBBcnJheShzKSwgayA9IDAsIGkgPSAwOyBpIDwgaWw7IGkrKylcclxuICAgICAgICBmb3IgKHZhciBhID0gYXJndW1lbnRzW2ldLCBqID0gMCwgamwgPSBhLmxlbmd0aDsgaiA8IGpsOyBqKyssIGsrKylcclxuICAgICAgICAgICAgcltrXSA9IGFbal07XHJcbiAgICByZXR1cm4gcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkodG8sIGZyb20sIHBhY2spIHtcclxuICAgIGlmIChwYWNrIHx8IGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIGZvciAodmFyIGkgPSAwLCBsID0gZnJvbS5sZW5ndGgsIGFyOyBpIDwgbDsgaSsrKSB7XHJcbiAgICAgICAgaWYgKGFyIHx8ICEoaSBpbiBmcm9tKSkge1xyXG4gICAgICAgICAgICBpZiAoIWFyKSBhciA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20sIDAsIGkpO1xyXG4gICAgICAgICAgICBhcltpXSA9IGZyb21baV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvLmNvbmNhdChhciB8fCBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tKSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2F3YWl0KHYpIHtcclxuICAgIHJldHVybiB0aGlzIGluc3RhbmNlb2YgX19hd2FpdCA/ICh0aGlzLnYgPSB2LCB0aGlzKSA6IG5ldyBfX2F3YWl0KHYpO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0dlbmVyYXRvcih0aGlzQXJnLCBfYXJndW1lbnRzLCBnZW5lcmF0b3IpIHtcclxuICAgIGlmICghU3ltYm9sLmFzeW5jSXRlcmF0b3IpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJTeW1ib2wuYXN5bmNJdGVyYXRvciBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICB2YXIgZyA9IGdlbmVyYXRvci5hcHBseSh0aGlzQXJnLCBfYXJndW1lbnRzIHx8IFtdKSwgaSwgcSA9IFtdO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiLCBhd2FpdFJldHVybiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIGF3YWl0UmV0dXJuKGYpIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBQcm9taXNlLnJlc29sdmUodikudGhlbihmLCByZWplY3QpOyB9OyB9XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaWYgKGdbbl0pIHsgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgaWYgKGYpIGlbbl0gPSBmKGlbbl0pOyB9IH1cclxuICAgIGZ1bmN0aW9uIHJlc3VtZShuLCB2KSB7IHRyeSB7IHN0ZXAoZ1tuXSh2KSk7IH0gY2F0Y2ggKGUpIHsgc2V0dGxlKHFbMF1bM10sIGUpOyB9IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAocikgeyByLnZhbHVlIGluc3RhbmNlb2YgX19hd2FpdCA/IFByb21pc2UucmVzb2x2ZShyLnZhbHVlLnYpLnRoZW4oZnVsZmlsbCwgcmVqZWN0KSA6IHNldHRsZShxWzBdWzJdLCByKTsgfVxyXG4gICAgZnVuY3Rpb24gZnVsZmlsbCh2YWx1ZSkgeyByZXN1bWUoXCJuZXh0XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gcmVqZWN0KHZhbHVlKSB7IHJlc3VtZShcInRocm93XCIsIHZhbHVlKTsgfVxyXG4gICAgZnVuY3Rpb24gc2V0dGxlKGYsIHYpIHsgaWYgKGYodiksIHEuc2hpZnQoKSwgcS5sZW5ndGgpIHJlc3VtZShxWzBdWzBdLCBxWzBdWzFdKTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY0RlbGVnYXRvcihvKSB7XHJcbiAgICB2YXIgaSwgcDtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiwgZnVuY3Rpb24gKGUpIHsgdGhyb3cgZTsgfSksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHRoaXM7IH0sIGk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4sIGYpIHsgaVtuXSA9IG9bbl0gPyBmdW5jdGlvbiAodikgeyByZXR1cm4gKHAgPSAhcCkgPyB7IHZhbHVlOiBfX2F3YWl0KG9bbl0odikpLCBkb25lOiBmYWxzZSB9IDogZiA/IGYodikgOiB2OyB9IDogZjsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hc3luY1ZhbHVlcyhvKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIG0gPSBvW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSwgaTtcclxuICAgIHJldHVybiBtID8gbS5jYWxsKG8pIDogKG8gPSB0eXBlb2YgX192YWx1ZXMgPT09IFwiZnVuY3Rpb25cIiA/IF9fdmFsdWVzKG8pIDogb1tTeW1ib2wuaXRlcmF0b3JdKCksIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiKSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7IHJldHVybiB0aGlzOyB9LCBpKTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpW25dID0gb1tuXSAmJiBmdW5jdGlvbiAodikgeyByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgeyB2ID0gb1tuXSh2KSwgc2V0dGxlKHJlc29sdmUsIHJlamVjdCwgdi5kb25lLCB2LnZhbHVlKTsgfSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHNldHRsZShyZXNvbHZlLCByZWplY3QsIGQsIHYpIHsgUHJvbWlzZS5yZXNvbHZlKHYpLnRoZW4oZnVuY3Rpb24odikgeyByZXNvbHZlKHsgdmFsdWU6IHYsIGRvbmU6IGQgfSk7IH0sIHJlamVjdCk7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fbWFrZVRlbXBsYXRlT2JqZWN0KGNvb2tlZCwgcmF3KSB7XHJcbiAgICBpZiAoT2JqZWN0LmRlZmluZVByb3BlcnR5KSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjb29rZWQsIFwicmF3XCIsIHsgdmFsdWU6IHJhdyB9KTsgfSBlbHNlIHsgY29va2VkLnJhdyA9IHJhdzsgfVxyXG4gICAgcmV0dXJuIGNvb2tlZDtcclxufTtcclxuXHJcbnZhciBfX3NldE1vZHVsZURlZmF1bHQgPSBPYmplY3QuY3JlYXRlID8gKGZ1bmN0aW9uKG8sIHYpIHtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvLCBcImRlZmF1bHRcIiwgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdiB9KTtcclxufSkgOiBmdW5jdGlvbihvLCB2KSB7XHJcbiAgICBvW1wiZGVmYXVsdFwiXSA9IHY7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChrICE9PSBcImRlZmF1bHRcIiAmJiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwobW9kLCBrKSkgX19jcmVhdGVCaW5kaW5nKHJlc3VsdCwgbW9kLCBrKTtcclxuICAgIF9fc2V0TW9kdWxlRGVmYXVsdChyZXN1bHQsIG1vZCk7XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnREZWZhdWx0KG1vZCkge1xyXG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBkZWZhdWx0OiBtb2QgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRHZXQocmVjZWl2ZXIsIHN0YXRlLCBraW5kLCBmKSB7XHJcbiAgICBpZiAoa2luZCA9PT0gXCJhXCIgJiYgIWYpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJQcml2YXRlIGFjY2Vzc29yIHdhcyBkZWZpbmVkIHdpdGhvdXQgYSBnZXR0ZXJcIik7XHJcbiAgICBpZiAodHlwZW9mIHN0YXRlID09PSBcImZ1bmN0aW9uXCIgPyByZWNlaXZlciAhPT0gc3RhdGUgfHwgIWYgOiAhc3RhdGUuaGFzKHJlY2VpdmVyKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCByZWFkIHByaXZhdGUgbWVtYmVyIGZyb20gYW4gb2JqZWN0IHdob3NlIGNsYXNzIGRpZCBub3QgZGVjbGFyZSBpdFwiKTtcclxuICAgIHJldHVybiBraW5kID09PSBcIm1cIiA/IGYgOiBraW5kID09PSBcImFcIiA/IGYuY2FsbChyZWNlaXZlcikgOiBmID8gZi52YWx1ZSA6IHN0YXRlLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBzdGF0ZSwgdmFsdWUsIGtpbmQsIGYpIHtcclxuICAgIGlmIChraW5kID09PSBcIm1cIikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgbWV0aG9kIGlzIG5vdCB3cml0YWJsZVwiKTtcclxuICAgIGlmIChraW5kID09PSBcImFcIiAmJiAhZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlByaXZhdGUgYWNjZXNzb3Igd2FzIGRlZmluZWQgd2l0aG91dCBhIHNldHRlclwiKTtcclxuICAgIGlmICh0eXBlb2Ygc3RhdGUgPT09IFwiZnVuY3Rpb25cIiA/IHJlY2VpdmVyICE9PSBzdGF0ZSB8fCAhZiA6ICFzdGF0ZS5oYXMocmVjZWl2ZXIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IHdyaXRlIHByaXZhdGUgbWVtYmVyIHRvIGFuIG9iamVjdCB3aG9zZSBjbGFzcyBkaWQgbm90IGRlY2xhcmUgaXRcIik7XHJcbiAgICByZXR1cm4gKGtpbmQgPT09IFwiYVwiID8gZi5jYWxsKHJlY2VpdmVyLCB2YWx1ZSkgOiBmID8gZi52YWx1ZSA9IHZhbHVlIDogc3RhdGUuc2V0KHJlY2VpdmVyLCB2YWx1ZSkpLCB2YWx1ZTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY2xhc3NQcml2YXRlRmllbGRJbihzdGF0ZSwgcmVjZWl2ZXIpIHtcclxuICAgIGlmIChyZWNlaXZlciA9PT0gbnVsbCB8fCAodHlwZW9mIHJlY2VpdmVyICE9PSBcIm9iamVjdFwiICYmIHR5cGVvZiByZWNlaXZlciAhPT0gXCJmdW5jdGlvblwiKSkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCB1c2UgJ2luJyBvcGVyYXRvciBvbiBub24tb2JqZWN0XCIpO1xyXG4gICAgcmV0dXJuIHR5cGVvZiBzdGF0ZSA9PT0gXCJmdW5jdGlvblwiID8gcmVjZWl2ZXIgPT09IHN0YXRlIDogc3RhdGUuaGFzKHJlY2VpdmVyKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlKGVudiwgdmFsdWUsIGFzeW5jKSB7XHJcbiAgICBpZiAodmFsdWUgIT09IG51bGwgJiYgdmFsdWUgIT09IHZvaWQgMCkge1xyXG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgIT09IFwib2JqZWN0XCIgJiYgdHlwZW9mIHZhbHVlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3QgZXhwZWN0ZWQuXCIpO1xyXG4gICAgICAgIHZhciBkaXNwb3NlLCBpbm5lcjtcclxuICAgICAgICBpZiAoYXN5bmMpIHtcclxuICAgICAgICAgICAgaWYgKCFTeW1ib2wuYXN5bmNEaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jRGlzcG9zZSBpcyBub3QgZGVmaW5lZC5cIik7XHJcbiAgICAgICAgICAgIGRpc3Bvc2UgPSB2YWx1ZVtTeW1ib2wuYXN5bmNEaXNwb3NlXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGRpc3Bvc2UgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICBpZiAoIVN5bWJvbC5kaXNwb3NlKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmRpc3Bvc2UgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgICAgICAgICBkaXNwb3NlID0gdmFsdWVbU3ltYm9sLmRpc3Bvc2VdO1xyXG4gICAgICAgICAgICBpZiAoYXN5bmMpIGlubmVyID0gZGlzcG9zZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHR5cGVvZiBkaXNwb3NlICE9PSBcImZ1bmN0aW9uXCIpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJPYmplY3Qgbm90IGRpc3Bvc2FibGUuXCIpO1xyXG4gICAgICAgIGlmIChpbm5lcikgZGlzcG9zZSA9IGZ1bmN0aW9uKCkgeyB0cnkgeyBpbm5lci5jYWxsKHRoaXMpOyB9IGNhdGNoIChlKSB7IHJldHVybiBQcm9taXNlLnJlamVjdChlKTsgfSB9O1xyXG4gICAgICAgIGVudi5zdGFjay5wdXNoKHsgdmFsdWU6IHZhbHVlLCBkaXNwb3NlOiBkaXNwb3NlLCBhc3luYzogYXN5bmMgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChhc3luYykge1xyXG4gICAgICAgIGVudi5zdGFjay5wdXNoKHsgYXN5bmM6IHRydWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcblxyXG59XHJcblxyXG52YXIgX1N1cHByZXNzZWRFcnJvciA9IHR5cGVvZiBTdXBwcmVzc2VkRXJyb3IgPT09IFwiZnVuY3Rpb25cIiA/IFN1cHByZXNzZWRFcnJvciA6IGZ1bmN0aW9uIChlcnJvciwgc3VwcHJlc3NlZCwgbWVzc2FnZSkge1xyXG4gICAgdmFyIGUgPSBuZXcgRXJyb3IobWVzc2FnZSk7XHJcbiAgICByZXR1cm4gZS5uYW1lID0gXCJTdXBwcmVzc2VkRXJyb3JcIiwgZS5lcnJvciA9IGVycm9yLCBlLnN1cHByZXNzZWQgPSBzdXBwcmVzc2VkLCBlO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZGlzcG9zZVJlc291cmNlcyhlbnYpIHtcclxuICAgIGZ1bmN0aW9uIGZhaWwoZSkge1xyXG4gICAgICAgIGVudi5lcnJvciA9IGVudi5oYXNFcnJvciA/IG5ldyBfU3VwcHJlc3NlZEVycm9yKGUsIGVudi5lcnJvciwgXCJBbiBlcnJvciB3YXMgc3VwcHJlc3NlZCBkdXJpbmcgZGlzcG9zYWwuXCIpIDogZTtcclxuICAgICAgICBlbnYuaGFzRXJyb3IgPSB0cnVlO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbmV4dCgpIHtcclxuICAgICAgICB3aGlsZSAoZW52LnN0YWNrLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB2YXIgcmVjID0gZW52LnN0YWNrLnBvcCgpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlYy5kaXNwb3NlICYmIHJlYy5kaXNwb3NlLmNhbGwocmVjLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZWMuYXN5bmMpIHJldHVybiBQcm9taXNlLnJlc29sdmUocmVzdWx0KS50aGVuKG5leHQsIGZ1bmN0aW9uKGUpIHsgZmFpbChlKTsgcmV0dXJuIG5leHQoKTsgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIGZhaWwoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGVudi5oYXNFcnJvcikgdGhyb3cgZW52LmVycm9yO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG5leHQoKTtcclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQge1xyXG4gICAgX19leHRlbmRzOiBfX2V4dGVuZHMsXHJcbiAgICBfX2Fzc2lnbjogX19hc3NpZ24sXHJcbiAgICBfX3Jlc3Q6IF9fcmVzdCxcclxuICAgIF9fZGVjb3JhdGU6IF9fZGVjb3JhdGUsXHJcbiAgICBfX3BhcmFtOiBfX3BhcmFtLFxyXG4gICAgX19tZXRhZGF0YTogX19tZXRhZGF0YSxcclxuICAgIF9fYXdhaXRlcjogX19hd2FpdGVyLFxyXG4gICAgX19nZW5lcmF0b3I6IF9fZ2VuZXJhdG9yLFxyXG4gICAgX19jcmVhdGVCaW5kaW5nOiBfX2NyZWF0ZUJpbmRpbmcsXHJcbiAgICBfX2V4cG9ydFN0YXI6IF9fZXhwb3J0U3RhcixcclxuICAgIF9fdmFsdWVzOiBfX3ZhbHVlcyxcclxuICAgIF9fcmVhZDogX19yZWFkLFxyXG4gICAgX19zcHJlYWQ6IF9fc3ByZWFkLFxyXG4gICAgX19zcHJlYWRBcnJheXM6IF9fc3ByZWFkQXJyYXlzLFxyXG4gICAgX19zcHJlYWRBcnJheTogX19zcHJlYWRBcnJheSxcclxuICAgIF9fYXdhaXQ6IF9fYXdhaXQsXHJcbiAgICBfX2FzeW5jR2VuZXJhdG9yOiBfX2FzeW5jR2VuZXJhdG9yLFxyXG4gICAgX19hc3luY0RlbGVnYXRvcjogX19hc3luY0RlbGVnYXRvcixcclxuICAgIF9fYXN5bmNWYWx1ZXM6IF9fYXN5bmNWYWx1ZXMsXHJcbiAgICBfX21ha2VUZW1wbGF0ZU9iamVjdDogX19tYWtlVGVtcGxhdGVPYmplY3QsXHJcbiAgICBfX2ltcG9ydFN0YXI6IF9faW1wb3J0U3RhcixcclxuICAgIF9faW1wb3J0RGVmYXVsdDogX19pbXBvcnREZWZhdWx0LFxyXG4gICAgX19jbGFzc1ByaXZhdGVGaWVsZEdldDogX19jbGFzc1ByaXZhdGVGaWVsZEdldCxcclxuICAgIF9fY2xhc3NQcml2YXRlRmllbGRTZXQ6IF9fY2xhc3NQcml2YXRlRmllbGRTZXQsXHJcbiAgICBfX2NsYXNzUHJpdmF0ZUZpZWxkSW46IF9fY2xhc3NQcml2YXRlRmllbGRJbixcclxuICAgIF9fYWRkRGlzcG9zYWJsZVJlc291cmNlOiBfX2FkZERpc3Bvc2FibGVSZXNvdXJjZSxcclxuICAgIF9fZGlzcG9zZVJlc291cmNlczogX19kaXNwb3NlUmVzb3VyY2VzLFxyXG59O1xyXG4iLCJpbXBvcnQgeyBFcnJvckZhY3RvcnksIGlzQnJvd3NlckV4dGVuc2lvbiwgaXNNb2JpbGVDb3Jkb3ZhLCBpc1JlYWN0TmF0aXZlLCBGaXJlYmFzZUVycm9yLCBxdWVyeXN0cmluZywgZ2V0TW9kdWxhckluc3RhbmNlLCBiYXNlNjREZWNvZGUsIGdldFVBLCBpc0lFLCBjcmVhdGVTdWJzY3JpYmUsIGRlZXBFcXVhbCwgcXVlcnlzdHJpbmdEZWNvZGUsIGV4dHJhY3RRdWVyeXN0cmluZywgaXNFbXB0eSwgZ2V0RXhwZXJpbWVudGFsU2V0dGluZywgZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdCB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IFNES19WRVJTSU9OLCBfZ2V0UHJvdmlkZXIsIF9yZWdpc3RlckNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uLCBnZXRBcHAgfSBmcm9tICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCB7IF9fcmVzdCB9IGZyb20gJ3RzbGliJztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQW4gZW51bSBvZiBmYWN0b3JzIHRoYXQgbWF5IGJlIHVzZWQgZm9yIG11bHRpZmFjdG9yIGF1dGhlbnRpY2F0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBGYWN0b3JJZCA9IHtcclxuICAgIC8qKiBQaG9uZSBhcyBzZWNvbmQgZmFjdG9yICovXHJcbiAgICBQSE9ORTogJ3Bob25lJyxcclxuICAgIFRPVFA6ICd0b3RwJ1xyXG59O1xyXG4vKipcclxuICogRW51bWVyYXRpb24gb2Ygc3VwcG9ydGVkIHByb3ZpZGVycy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgUHJvdmlkZXJJZCA9IHtcclxuICAgIC8qKiBGYWNlYm9vayBwcm92aWRlciBJRCAqL1xyXG4gICAgRkFDRUJPT0s6ICdmYWNlYm9vay5jb20nLFxyXG4gICAgLyoqIEdpdEh1YiBwcm92aWRlciBJRCAqL1xyXG4gICAgR0lUSFVCOiAnZ2l0aHViLmNvbScsXHJcbiAgICAvKiogR29vZ2xlIHByb3ZpZGVyIElEICovXHJcbiAgICBHT09HTEU6ICdnb29nbGUuY29tJyxcclxuICAgIC8qKiBQYXNzd29yZCBwcm92aWRlciAqL1xyXG4gICAgUEFTU1dPUkQ6ICdwYXNzd29yZCcsXHJcbiAgICAvKiogUGhvbmUgcHJvdmlkZXIgKi9cclxuICAgIFBIT05FOiAncGhvbmUnLFxyXG4gICAgLyoqIFR3aXR0ZXIgcHJvdmlkZXIgSUQgKi9cclxuICAgIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBzaWduLWluIG1ldGhvZHMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IFNpZ25Jbk1ldGhvZCA9IHtcclxuICAgIC8qKiBFbWFpbCBsaW5rIHNpZ24gaW4gbWV0aG9kICovXHJcbiAgICBFTUFJTF9MSU5LOiAnZW1haWxMaW5rJyxcclxuICAgIC8qKiBFbWFpbC9wYXNzd29yZCBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgRU1BSUxfUEFTU1dPUkQ6ICdwYXNzd29yZCcsXHJcbiAgICAvKiogRmFjZWJvb2sgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEZBQ0VCT09LOiAnZmFjZWJvb2suY29tJyxcclxuICAgIC8qKiBHaXRIdWIgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIEdJVEhVQjogJ2dpdGh1Yi5jb20nLFxyXG4gICAgLyoqIEdvb2dsZSBzaWduIGluIG1ldGhvZCAqL1xyXG4gICAgR09PR0xFOiAnZ29vZ2xlLmNvbScsXHJcbiAgICAvKiogUGhvbmUgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIFBIT05FOiAncGhvbmUnLFxyXG4gICAgLyoqIFR3aXR0ZXIgc2lnbiBpbiBtZXRob2QgKi9cclxuICAgIFRXSVRURVI6ICd0d2l0dGVyLmNvbSdcclxufTtcclxuLyoqXHJcbiAqIEVudW1lcmF0aW9uIG9mIHN1cHBvcnRlZCBvcGVyYXRpb24gdHlwZXMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IE9wZXJhdGlvblR5cGUgPSB7XHJcbiAgICAvKiogT3BlcmF0aW9uIGludm9sdmluZyBsaW5raW5nIGFuIGFkZGl0aW9uYWwgcHJvdmlkZXIgdG8gYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cclxuICAgIExJTks6ICdsaW5rJyxcclxuICAgIC8qKiBPcGVyYXRpb24gaW52b2x2aW5nIHVzaW5nIGEgcHJvdmlkZXIgdG8gcmVhdXRoZW50aWNhdGUgYW4gYWxyZWFkeSBzaWduZWQtaW4gdXNlci4gKi9cclxuICAgIFJFQVVUSEVOVElDQVRFOiAncmVhdXRoZW50aWNhdGUnLFxyXG4gICAgLyoqIE9wZXJhdGlvbiBpbnZvbHZpbmcgc2lnbmluZyBpbiBhIHVzZXIuICovXHJcbiAgICBTSUdOX0lOOiAnc2lnbkluJ1xyXG59O1xyXG4vKipcclxuICogQW4gZW51bWVyYXRpb24gb2YgdGhlIHBvc3NpYmxlIGVtYWlsIGFjdGlvbiB0eXBlcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgQWN0aW9uQ29kZU9wZXJhdGlvbiA9IHtcclxuICAgIC8qKiBUaGUgZW1haWwgbGluayBzaWduLWluIGFjdGlvbi4gKi9cclxuICAgIEVNQUlMX1NJR05JTjogJ0VNQUlMX1NJR05JTicsXHJcbiAgICAvKiogVGhlIHBhc3N3b3JkIHJlc2V0IGFjdGlvbi4gKi9cclxuICAgIFBBU1NXT1JEX1JFU0VUOiAnUEFTU1dPUkRfUkVTRVQnLFxyXG4gICAgLyoqIFRoZSBlbWFpbCByZXZvY2F0aW9uIGFjdGlvbi4gKi9cclxuICAgIFJFQ09WRVJfRU1BSUw6ICdSRUNPVkVSX0VNQUlMJyxcclxuICAgIC8qKiBUaGUgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb24gZW1haWwgYWN0aW9uLiAqL1xyXG4gICAgUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT046ICdSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTicsXHJcbiAgICAvKiogVGhlIHJldmVydCBzZWNvbmQgZmFjdG9yIGFkZGl0aW9uIGVtYWlsIGFjdGlvbi4gKi9cclxuICAgIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOiAnVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwnLFxyXG4gICAgLyoqIFRoZSBlbWFpbCB2ZXJpZmljYXRpb24gYWN0aW9uLiAqL1xyXG4gICAgVkVSSUZZX0VNQUlMOiAnVkVSSUZZX0VNQUlMJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfZGVidWdFcnJvck1hcCgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgW1wiYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb25cIiAvKiBBdXRoRXJyb3JDb2RlLkFETUlOX09OTFlfT1BFUkFUSU9OICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIHJlc3RyaWN0ZWQgdG8gYWRtaW5pc3RyYXRvcnMgb25seS4nLFxyXG4gICAgICAgIFtcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqL106ICcnLFxyXG4gICAgICAgIFtcImFwcC1ub3QtYXV0aG9yaXplZFwiIC8qIEF1dGhFcnJvckNvZGUuQVBQX05PVF9BVVRIT1JJWkVEICovXTogXCJUaGlzIGFwcCwgaWRlbnRpZmllZCBieSB0aGUgZG9tYWluIHdoZXJlIGl0J3MgaG9zdGVkLCBpcyBub3QgXCIgK1xyXG4gICAgICAgICAgICAnYXV0aG9yaXplZCB0byB1c2UgRmlyZWJhc2UgQXV0aGVudGljYXRpb24gd2l0aCB0aGUgcHJvdmlkZWQgQVBJIGtleS4gJyArXHJcbiAgICAgICAgICAgICdSZXZpZXcgeW91ciBrZXkgY29uZmlndXJhdGlvbiBpbiB0aGUgR29vZ2xlIEFQSSBjb25zb2xlLicsXHJcbiAgICAgICAgW1wiYXBwLW5vdC1pbnN0YWxsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkFQUF9OT1RfSU5TVEFMTEVEICovXTogJ1RoZSByZXF1ZXN0ZWQgbW9iaWxlIGFwcGxpY2F0aW9uIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGlkZW50aWZpZXIgKCcgK1xyXG4gICAgICAgICAgICAnQW5kcm9pZCBwYWNrYWdlIG5hbWUgb3IgaU9TIGJ1bmRsZSBJRCkgcHJvdmlkZWQgaXMgbm90IGluc3RhbGxlZCBvbiAnICtcclxuICAgICAgICAgICAgJ3RoaXMgZGV2aWNlLicsXHJcbiAgICAgICAgW1wiY2FwdGNoYS1jaGVjay1mYWlsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkNBUFRDSEFfQ0hFQ0tfRkFJTEVEICovXTogJ1RoZSByZUNBUFRDSEEgcmVzcG9uc2UgdG9rZW4gcHJvdmlkZWQgaXMgZWl0aGVyIGludmFsaWQsIGV4cGlyZWQsICcgK1xyXG4gICAgICAgICAgICAnYWxyZWFkeSB1c2VkIG9yIHRoZSBkb21haW4gYXNzb2NpYXRlZCB3aXRoIGl0IGRvZXMgbm90IG1hdGNoIHRoZSBsaXN0ICcgK1xyXG4gICAgICAgICAgICAnb2Ygd2hpdGVsaXN0ZWQgZG9tYWlucy4nLFxyXG4gICAgICAgIFtcImNvZGUtZXhwaXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuQ09ERV9FWFBJUkVEICovXTogJ1RoZSBTTVMgY29kZSBoYXMgZXhwaXJlZC4gUGxlYXNlIHJlLXNlbmQgdGhlIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRyeSAnICtcclxuICAgICAgICAgICAgJ2FnYWluLicsXHJcbiAgICAgICAgW1wiY29yZG92YS1ub3QtcmVhZHlcIiAvKiBBdXRoRXJyb3JDb2RlLkNPUkRPVkFfTk9UX1JFQURZICovXTogJ0NvcmRvdmEgZnJhbWV3b3JrIGlzIG5vdCByZWFkeS4nLFxyXG4gICAgICAgIFtcImNvcnMtdW5zdXBwb3J0ZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkNPUlNfVU5TVVBQT1JURUQgKi9dOiAnVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQuJyxcclxuICAgICAgICBbXCJjcmVkZW50aWFsLWFscmVhZHktaW4tdXNlXCIgLyogQXV0aEVycm9yQ29kZS5DUkVERU5USUFMX0FMUkVBRFlfSU5fVVNFICovXTogJ1RoaXMgY3JlZGVudGlhbCBpcyBhbHJlYWR5IGFzc29jaWF0ZWQgd2l0aCBhIGRpZmZlcmVudCB1c2VyIGFjY291bnQuJyxcclxuICAgICAgICBbXCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIiAvKiBBdXRoRXJyb3JDb2RlLkNSRURFTlRJQUxfTUlTTUFUQ0ggKi9dOiAnVGhlIGN1c3RvbSB0b2tlbiBjb3JyZXNwb25kcyB0byBhIGRpZmZlcmVudCBhdWRpZW5jZS4nLFxyXG4gICAgICAgIFtcInJlcXVpcmVzLXJlY2VudC1sb2dpblwiIC8qIEF1dGhFcnJvckNvZGUuQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIHNlbnNpdGl2ZSBhbmQgcmVxdWlyZXMgcmVjZW50IGF1dGhlbnRpY2F0aW9uLiBMb2cgaW4gJyArXHJcbiAgICAgICAgICAgICdhZ2FpbiBiZWZvcmUgcmV0cnlpbmcgdGhpcyByZXF1ZXN0LicsXHJcbiAgICAgICAgW1wiZGVwZW5kZW50LXNkay1pbml0aWFsaXplZC1iZWZvcmUtYXV0aFwiIC8qIEF1dGhFcnJvckNvZGUuREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIICovXTogJ0Fub3RoZXIgRmlyZWJhc2UgU0RLIHdhcyBpbml0aWFsaXplZCBhbmQgaXMgdHJ5aW5nIHRvIHVzZSBBdXRoIGJlZm9yZSBBdXRoIGlzICcgK1xyXG4gICAgICAgICAgICAnaW5pdGlhbGl6ZWQuIFBsZWFzZSBiZSBzdXJlIHRvIGNhbGwgYGluaXRpYWxpemVBdXRoYCBvciBgZ2V0QXV0aGAgYmVmb3JlICcgK1xyXG4gICAgICAgICAgICAnc3RhcnRpbmcgYW55IG90aGVyIEZpcmViYXNlIFNESy4nLFxyXG4gICAgICAgIFtcImR5bmFtaWMtbGluay1ub3QtYWN0aXZhdGVkXCIgLyogQXV0aEVycm9yQ29kZS5EWU5BTUlDX0xJTktfTk9UX0FDVElWQVRFRCAqL106ICdQbGVhc2UgYWN0aXZhdGUgRHluYW1pYyBMaW5rcyBpbiB0aGUgRmlyZWJhc2UgQ29uc29sZSBhbmQgYWdyZWUgdG8gdGhlIHRlcm1zIGFuZCAnICtcclxuICAgICAgICAgICAgJ2NvbmRpdGlvbnMuJyxcclxuICAgICAgICBbXCJlbWFpbC1jaGFuZ2UtbmVlZHMtdmVyaWZpY2F0aW9uXCIgLyogQXV0aEVycm9yQ29kZS5FTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OICovXTogJ011bHRpLWZhY3RvciB1c2VycyBtdXN0IGFsd2F5cyBoYXZlIGEgdmVyaWZpZWQgZW1haWwuJyxcclxuICAgICAgICBbXCJlbWFpbC1hbHJlYWR5LWluLXVzZVwiIC8qIEF1dGhFcnJvckNvZGUuRU1BSUxfRVhJU1RTICovXTogJ1RoZSBlbWFpbCBhZGRyZXNzIGlzIGFscmVhZHkgaW4gdXNlIGJ5IGFub3RoZXIgYWNjb3VudC4nLFxyXG4gICAgICAgIFtcImVtdWxhdG9yLWNvbmZpZy1mYWlsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkVNVUxBVE9SX0NPTkZJR19GQUlMRUQgKi9dOiAnQXV0aCBpbnN0YW5jZSBoYXMgYWxyZWFkeSBiZWVuIHVzZWQgdG8gbWFrZSBhIG5ldHdvcmsgY2FsbC4gQXV0aCBjYW4gJyArXHJcbiAgICAgICAgICAgICdubyBsb25nZXIgYmUgY29uZmlndXJlZCB0byB1c2UgdGhlIGVtdWxhdG9yLiBUcnkgY2FsbGluZyAnICtcclxuICAgICAgICAgICAgJ1wiY29ubmVjdEF1dGhFbXVsYXRvcigpXCIgc29vbmVyLicsXHJcbiAgICAgICAgW1wiZXhwaXJlZC1hY3Rpb24tY29kZVwiIC8qIEF1dGhFcnJvckNvZGUuRVhQSVJFRF9PT0JfQ09ERSAqL106ICdUaGUgYWN0aW9uIGNvZGUgaGFzIGV4cGlyZWQuJyxcclxuICAgICAgICBbXCJjYW5jZWxsZWQtcG9wdXAtcmVxdWVzdFwiIC8qIEF1dGhFcnJvckNvZGUuRVhQSVJFRF9QT1BVUF9SRVFVRVNUICovXTogJ1RoaXMgb3BlcmF0aW9uIGhhcyBiZWVuIGNhbmNlbGxlZCBkdWUgdG8gYW5vdGhlciBjb25mbGljdGluZyBwb3B1cCBiZWluZyBvcGVuZWQuJyxcclxuICAgICAgICBbXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYXBwLWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQVBQX0NSRURFTlRJQUwgKi9dOiAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGNvbnRhaW5zIGFuIGludmFsaWQgYXBwbGljYXRpb24gdmVyaWZpZXIuJyArXHJcbiAgICAgICAgICAgICcgVGhlIHJlQ0FQVENIQSB0b2tlbiByZXNwb25zZSBpcyBlaXRoZXIgaW52YWxpZCBvciBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcHAtaWRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQVBQX0lEICovXTogJ1RoZSBtb2JpbGUgYXBwIGlkZW50aWZpZXIgaXMgbm90IHJlZ2lzdGVkIGZvciB0aGUgY3VycmVudCBwcm9qZWN0LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC11c2VyLXRva2VuXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0FVVEggKi9dOiBcIlRoaXMgdXNlcidzIGNyZWRlbnRpYWwgaXNuJ3QgdmFsaWQgZm9yIHRoaXMgcHJvamVjdC4gVGhpcyBjYW4gaGFwcGVuIFwiICtcclxuICAgICAgICAgICAgXCJpZiB0aGUgdXNlcidzIHRva2VuIGhhcyBiZWVuIHRhbXBlcmVkIHdpdGgsIG9yIGlmIHRoZSB1c2VyIGlzbid0IGZvciBcIiArXHJcbiAgICAgICAgICAgICd0aGUgcHJvamVjdCBhc3NvY2lhdGVkIHdpdGggdGhpcyBBUEkga2V5LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hdXRoLWV2ZW50XCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0FVVEhfRVZFTlQgKi9dOiAnQW4gaW50ZXJuYWwgQXV0aEVycm9yIGhhcyBvY2N1cnJlZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09ERSAqL106ICdUaGUgU01TIHZlcmlmaWNhdGlvbiBjb2RlIHVzZWQgdG8gY3JlYXRlIHRoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgaXMgJyArXHJcbiAgICAgICAgICAgICdpbnZhbGlkLiBQbGVhc2UgcmVzZW5kIHRoZSB2ZXJpZmljYXRpb24gY29kZSBzbXMgYW5kIGJlIHN1cmUgdG8gdXNlIHRoZSAnICtcclxuICAgICAgICAgICAgJ3ZlcmlmaWNhdGlvbiBjb2RlIHByb3ZpZGVkIGJ5IHRoZSB1c2VyLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jb250aW51ZS11cmlcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09OVElOVUVfVVJJICovXTogJ1RoZSBjb250aW51ZSBVUkwgcHJvdmlkZWQgaW4gdGhlIHJlcXVlc3QgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqL106ICdUaGUgZm9sbG93aW5nIENvcmRvdmEgcGx1Z2lucyBtdXN0IGJlIGluc3RhbGxlZCB0byBlbmFibGUgT0F1dGggc2lnbi1pbjogJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm8sIGNvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbiwgJyArXHJcbiAgICAgICAgICAgICdjb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiLCBjb3Jkb3ZhLXBsdWdpbi1pbmFwcGJyb3dzZXIgYW5kICcgK1xyXG4gICAgICAgICAgICAnY29yZG92YS1wbHVnaW4tY3VzdG9tdXJsc2NoZW1lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jdXN0b20tdG9rZW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ1VTVE9NX1RPS0VOICovXTogJ1RoZSBjdXN0b20gdG9rZW4gZm9ybWF0IGlzIGluY29ycmVjdC4gUGxlYXNlIGNoZWNrIHRoZSBkb2N1bWVudGF0aW9uLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU4gKi9dOiAnVGhlIHByb3ZpZGVkIGR5bmFtaWMgbGluayBkb21haW4gaXMgbm90IGNvbmZpZ3VyZWQgb3IgYXV0aG9yaXplZCBmb3IgdGhlIGN1cnJlbnQgcHJvamVjdC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtZW1haWxcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGFkZHJlc3MgaXMgYmFkbHkgZm9ybWF0dGVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1lbXVsYXRvci1zY2hlbWVcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfRU1VTEFUT1JfU0NIRU1FICovXTogJ0VtdWxhdG9yIFVSTCBtdXN0IHN0YXJ0IHdpdGggYSB2YWxpZCBzY2hlbWUgKGh0dHA6Ly8gb3IgaHR0cHM6Ly8pLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1hcGkta2V5XCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0FQSV9LRVkgKi9dOiAnWW91ciBBUEkga2V5IGlzIGludmFsaWQsIHBsZWFzZSBjaGVjayB5b3UgaGF2ZSBjb3BpZWQgaXQgY29ycmVjdGx5LicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1jZXJ0LWhhc2hcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ0VSVF9IQVNIICovXTogJ1RoZSBTSEEtMSBjZXJ0aWZpY2F0ZSBoYXNoIHByb3ZpZGVkIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfSURQX1JFU1BPTlNFICovXTogJ1RoZSBzdXBwbGllZCBhdXRoIGNyZWRlbnRpYWwgaXMgbWFsZm9ybWVkIG9yIGhhcyBleHBpcmVkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1tZXNzYWdlLXBheWxvYWRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfTUVTU0FHRV9QQVlMT0FEICovXTogJ1RoZSBlbWFpbCB0ZW1wbGF0ZSBjb3JyZXNwb25kaW5nIHRvIHRoaXMgYWN0aW9uIGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyBpbiBpdHMgbWVzc2FnZS4gJyArXHJcbiAgICAgICAgICAgICdQbGVhc2UgZml4IGJ5IGdvaW5nIHRvIHRoZSBBdXRoIGVtYWlsIHRlbXBsYXRlcyBzZWN0aW9uIGluIHRoZSBGaXJlYmFzZSBDb25zb2xlLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9NRkFfU0VTU0lPTiAqL106ICdUaGUgcmVxdWVzdCBkb2VzIG5vdCBjb250YWluIGEgdmFsaWQgcHJvb2Ygb2YgZmlyc3QgZmFjdG9yIHN1Y2Nlc3NmdWwgc2lnbi1pbi4nLFxyXG4gICAgICAgIFtcImludmFsaWQtb2F1dGgtcHJvdmlkZXJcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfT0FVVEhfUFJPVklERVIgKi9dOiAnRW1haWxBdXRoUHJvdmlkZXIgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyBvcGVyYXRpb24uIFRoaXMgb3BlcmF0aW9uICcgK1xyXG4gICAgICAgICAgICAnb25seSBzdXBwb3J0cyBPQXV0aCBwcm92aWRlcnMuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLW9hdXRoLWNsaWVudC1pZFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi9dOiAnVGhlIE9BdXRoIGNsaWVudCBJRCBwcm92aWRlZCBpcyBlaXRoZXIgaW52YWxpZCBvciBkb2VzIG5vdCBtYXRjaCB0aGUgJyArXHJcbiAgICAgICAgICAgICdzcGVjaWZpZWQgQVBJIGtleS4nLFxyXG4gICAgICAgIFtcInVuYXV0aG9yaXplZC1kb21haW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfT1JJR0lOICovXTogJ1RoaXMgZG9tYWluIGlzIG5vdCBhdXRob3JpemVkIGZvciBPQXV0aCBvcGVyYXRpb25zIGZvciB5b3VyIEZpcmViYXNlICcgK1xyXG4gICAgICAgICAgICAncHJvamVjdC4gRWRpdCB0aGUgbGlzdCBvZiBhdXRob3JpemVkIGRvbWFpbnMgZnJvbSB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcImludmFsaWQtYWN0aW9uLWNvZGVcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfT09CX0NPREUgKi9dOiAnVGhlIGFjdGlvbiBjb2RlIGlzIGludmFsaWQuIFRoaXMgY2FuIGhhcHBlbiBpZiB0aGUgY29kZSBpcyBtYWxmb3JtZWQsICcgK1xyXG4gICAgICAgICAgICAnZXhwaXJlZCwgb3IgaGFzIGFscmVhZHkgYmVlbiB1c2VkLicsXHJcbiAgICAgICAgW1wid3JvbmctcGFzc3dvcmRcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUEFTU1dPUkQgKi9dOiAnVGhlIHBhc3N3b3JkIGlzIGludmFsaWQgb3IgdGhlIHVzZXIgZG9lcyBub3QgaGF2ZSBhIHBhc3N3b3JkLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1BFUlNJU1RFTkNFICovXTogJ1RoZSBzcGVjaWZpZWQgcGVyc2lzdGVuY2UgdHlwZSBpcyBpbnZhbGlkLiBJdCBjYW4gb25seSBiZSBsb2NhbCwgc2Vzc2lvbiBvciBub25lLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1waG9uZS1udW1iZXJcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUEhPTkVfTlVNQkVSICovXTogJ1RoZSBmb3JtYXQgb2YgdGhlIHBob25lIG51bWJlciBwcm92aWRlZCBpcyBpbmNvcnJlY3QuIFBsZWFzZSBlbnRlciB0aGUgJyArXHJcbiAgICAgICAgICAgICdwaG9uZSBudW1iZXIgaW4gYSBmb3JtYXQgdGhhdCBjYW4gYmUgcGFyc2VkIGludG8gRS4xNjQgZm9ybWF0LiBFLjE2NCAnICtcclxuICAgICAgICAgICAgJ3Bob25lIG51bWJlcnMgYXJlIHdyaXR0ZW4gaW4gdGhlIGZvcm1hdCBbK11bY291bnRyeSBjb2RlXVtzdWJzY3JpYmVyICcgK1xyXG4gICAgICAgICAgICAnbnVtYmVyIGluY2x1ZGluZyBhcmVhIGNvZGVdLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1wcm92aWRlci1pZFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9QUk9WSURFUl9JRCAqL106ICdUaGUgc3BlY2lmaWVkIHByb3ZpZGVyIElEIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXJlY2lwaWVudC1lbWFpbFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRUNJUElFTlRfRU1BSUwgKi9dOiAnVGhlIGVtYWlsIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyBhY3Rpb24gZmFpbGVkIHRvIHNlbmQgYXMgdGhlIHByb3ZpZGVkICcgK1xyXG4gICAgICAgICAgICAncmVjaXBpZW50IGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZC4nLFxyXG4gICAgICAgIFtcImludmFsaWQtc2VuZGVyXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1NFTkRFUiAqL106ICdUaGUgZW1haWwgdGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGlzIGFjdGlvbiBjb250YWlucyBhbiBpbnZhbGlkIHNlbmRlciBlbWFpbCBvciBuYW1lLiAnICtcclxuICAgICAgICAgICAgJ1BsZWFzZSBmaXggYnkgZ29pbmcgdG8gdGhlIEF1dGggZW1haWwgdGVtcGxhdGVzIHNlY3Rpb24gaW4gdGhlIEZpcmViYXNlIENvbnNvbGUuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXZlcmlmaWNhdGlvbi1pZFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9TRVNTSU9OX0lORk8gKi9dOiAnVGhlIHZlcmlmaWNhdGlvbiBJRCB1c2VkIHRvIGNyZWF0ZSB0aGUgcGhvbmUgYXV0aCBjcmVkZW50aWFsIGlzIGludmFsaWQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXRlbmFudC1pZFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9URU5BTlRfSUQgKi9dOiBcIlRoZSBBdXRoIGluc3RhbmNlJ3MgdGVuYW50IElEIGlzIGludmFsaWQuXCIsXHJcbiAgICAgICAgW1wibG9naW4tYmxvY2tlZFwiIC8qIEF1dGhFcnJvckNvZGUuTE9HSU5fQkxPQ0tFRCAqL106ICdMb2dpbiBibG9ja2VkIGJ5IHVzZXItcHJvdmlkZWQgbWV0aG9kOiB7JG9yaWdpbmFsTWVzc2FnZX0nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqL106ICdBbiBBbmRyb2lkIFBhY2thZ2UgTmFtZSBtdXN0IGJlIHByb3ZpZGVkIGlmIHRoZSBBbmRyb2lkIEFwcCBpcyByZXF1aXJlZCB0byBiZSBpbnN0YWxsZWQuJyxcclxuICAgICAgICBbXCJhdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQVVUSF9ET01BSU4gKi9dOiAnQmUgc3VyZSB0byBpbmNsdWRlIGF1dGhEb21haW4gd2hlbiBjYWxsaW5nIGZpcmViYXNlLmluaXRpYWxpemVBcHAoKSwgJyArXHJcbiAgICAgICAgICAgICdieSBmb2xsb3dpbmcgdGhlIGluc3RydWN0aW9ucyBpbiB0aGUgRmlyZWJhc2UgY29uc29sZS4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctYXBwLWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQVBQX0NSRURFTlRJQUwgKi9dOiAnVGhlIHBob25lIHZlcmlmaWNhdGlvbiByZXF1ZXN0IGlzIG1pc3NpbmcgYW4gYXBwbGljYXRpb24gdmVyaWZpZXIgJyArXHJcbiAgICAgICAgICAgICdhc3NlcnRpb24uIEEgcmVDQVBUQ0hBIHJlc3BvbnNlIHRva2VuIG5lZWRzIHRvIGJlIHByb3ZpZGVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy12ZXJpZmljYXRpb24tY29kZVwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19DT0RFICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSBTTVMgdmVyaWZpY2F0aW9uIGNvZGUuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWNvbnRpbnVlLXVyaVwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19DT05USU5VRV9VUkkgKi9dOiAnQSBjb250aW51ZSBVUkwgbXVzdCBiZSBwcm92aWRlZCBpbiB0aGUgcmVxdWVzdC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctaWZyYW1lLXN0YXJ0XCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0lGUkFNRV9TVEFSVCAqL106ICdBbiBpbnRlcm5hbCBBdXRoRXJyb3IgaGFzIG9jY3VycmVkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1pb3MtYnVuZGxlLWlkXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0lPU19CVU5ETEVfSUQgKi9dOiAnQW4gaU9TIEJ1bmRsZSBJRCBtdXN0IGJlIHByb3ZpZGVkIGlmIGFuIEFwcCBTdG9yZSBJRCBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3Npbmctb3ItaW52YWxpZC1ub25jZVwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19PUl9JTlZBTElEX05PTkNFICovXTogJ1RoZSByZXF1ZXN0IGRvZXMgbm90IGNvbnRhaW4gYSB2YWxpZCBub25jZS4gVGhpcyBjYW4gb2NjdXIgaWYgdGhlICcgK1xyXG4gICAgICAgICAgICAnU0hBLTI1NiBoYXNoIG9mIHRoZSBwcm92aWRlZCByYXcgbm9uY2UgZG9lcyBub3QgbWF0Y2ggdGhlIGhhc2hlZCBub25jZSAnICtcclxuICAgICAgICAgICAgJ2luIHRoZSBJRCB0b2tlbiBwYXlsb2FkLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1wYXNzd29yZFwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19QQVNTV09SRCAqL106ICdBIG5vbi1lbXB0eSBwYXNzd29yZCBtdXN0IGJlIHByb3ZpZGVkJyxcclxuICAgICAgICBbXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX01GQV9JTkZPICovXTogJ05vIHNlY29uZCBmYWN0b3IgaWRlbnRpZmllciBpcyBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctbXVsdGktZmFjdG9yLXNlc3Npb25cIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfTUZBX1NFU1NJT04gKi9dOiAnVGhlIHJlcXVlc3QgaXMgbWlzc2luZyBwcm9vZiBvZiBmaXJzdCBmYWN0b3Igc3VjY2Vzc2Z1bCBzaWduLWluLicsXHJcbiAgICAgICAgW1wibWlzc2luZy1waG9uZS1udW1iZXJcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUEhPTkVfTlVNQkVSICovXTogJ1RvIHNlbmQgdmVyaWZpY2F0aW9uIGNvZGVzLCBwcm92aWRlIGEgcGhvbmUgbnVtYmVyIGZvciB0aGUgcmVjaXBpZW50LicsXHJcbiAgICAgICAgW1wibWlzc2luZy12ZXJpZmljYXRpb24taWRcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogJ1RoZSBwaG9uZSBhdXRoIGNyZWRlbnRpYWwgd2FzIGNyZWF0ZWQgd2l0aCBhbiBlbXB0eSB2ZXJpZmljYXRpb24gSUQuJyxcclxuICAgICAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIEF1dGhFcnJvckNvZGUuTU9EVUxFX0RFU1RST1lFRCAqL106ICdUaGlzIGluc3RhbmNlIG9mIEZpcmViYXNlQXBwIGhhcyBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJtdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmRcIiAvKiBBdXRoRXJyb3JDb2RlLk1GQV9JTkZPX05PVF9GT1VORCAqL106ICdUaGUgdXNlciBkb2VzIG5vdCBoYXZlIGEgc2Vjb25kIGZhY3RvciBtYXRjaGluZyB0aGUgaWRlbnRpZmllciBwcm92aWRlZC4nLFxyXG4gICAgICAgIFtcIm11bHRpLWZhY3Rvci1hdXRoLXJlcXVpcmVkXCIgLyogQXV0aEVycm9yQ29kZS5NRkFfUkVRVUlSRUQgKi9dOiAnUHJvb2Ygb2Ygb3duZXJzaGlwIG9mIGEgc2Vjb25kIGZhY3RvciBpcyByZXF1aXJlZCB0byBjb21wbGV0ZSBzaWduLWluLicsXHJcbiAgICAgICAgW1wiYWNjb3VudC1leGlzdHMtd2l0aC1kaWZmZXJlbnQtY3JlZGVudGlhbFwiIC8qIEF1dGhFcnJvckNvZGUuTkVFRF9DT05GSVJNQVRJT04gKi9dOiAnQW4gYWNjb3VudCBhbHJlYWR5IGV4aXN0cyB3aXRoIHRoZSBzYW1lIGVtYWlsIGFkZHJlc3MgYnV0IGRpZmZlcmVudCAnICtcclxuICAgICAgICAgICAgJ3NpZ24taW4gY3JlZGVudGlhbHMuIFNpZ24gaW4gdXNpbmcgYSBwcm92aWRlciBhc3NvY2lhdGVkIHdpdGggdGhpcyAnICtcclxuICAgICAgICAgICAgJ2VtYWlsIGFkZHJlc3MuJyxcclxuICAgICAgICBbXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovXTogJ0EgbmV0d29yayBBdXRoRXJyb3IgKHN1Y2ggYXMgdGltZW91dCwgaW50ZXJydXB0ZWQgY29ubmVjdGlvbiBvciB1bnJlYWNoYWJsZSBob3N0KSBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJuby1hdXRoLWV2ZW50XCIgLyogQXV0aEVycm9yQ29kZS5OT19BVVRIX0VWRU5UICovXTogJ0FuIGludGVybmFsIEF1dGhFcnJvciBoYXMgb2NjdXJyZWQuJyxcclxuICAgICAgICBbXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogQXV0aEVycm9yQ29kZS5OT19TVUNIX1BST1ZJREVSICovXTogJ1VzZXIgd2FzIG5vdCBsaW5rZWQgdG8gYW4gYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBwcm92aWRlci4nLFxyXG4gICAgICAgIFtcIm51bGwtdXNlclwiIC8qIEF1dGhFcnJvckNvZGUuTlVMTF9VU0VSICovXTogJ0EgbnVsbCB1c2VyIG9iamVjdCB3YXMgcHJvdmlkZWQgYXMgdGhlIGFyZ3VtZW50IGZvciBhbiBvcGVyYXRpb24gd2hpY2ggJyArXHJcbiAgICAgICAgICAgICdyZXF1aXJlcyBhIG5vbi1udWxsIHVzZXIgb2JqZWN0LicsXHJcbiAgICAgICAgW1wib3BlcmF0aW9uLW5vdC1hbGxvd2VkXCIgLyogQXV0aEVycm9yQ29kZS5PUEVSQVRJT05fTk9UX0FMTE9XRUQgKi9dOiAnVGhlIGdpdmVuIHNpZ24taW4gcHJvdmlkZXIgaXMgZGlzYWJsZWQgZm9yIHRoaXMgRmlyZWJhc2UgcHJvamVjdC4gJyArXHJcbiAgICAgICAgICAgICdFbmFibGUgaXQgaW4gdGhlIEZpcmViYXNlIGNvbnNvbGUsIHVuZGVyIHRoZSBzaWduLWluIG1ldGhvZCB0YWIgb2YgdGhlICcgK1xyXG4gICAgICAgICAgICAnQXV0aCBzZWN0aW9uLicsXHJcbiAgICAgICAgW1wib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIEF1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi9dOiAnVGhpcyBvcGVyYXRpb24gaXMgbm90IHN1cHBvcnRlZCBpbiB0aGUgZW52aXJvbm1lbnQgdGhpcyBhcHBsaWNhdGlvbiBpcyAnICtcclxuICAgICAgICAgICAgJ3J1bm5pbmcgb24uIFwibG9jYXRpb24ucHJvdG9jb2xcIiBtdXN0IGJlIGh0dHAsIGh0dHBzIG9yIGNocm9tZS1leHRlbnNpb24nICtcclxuICAgICAgICAgICAgJyBhbmQgd2ViIHN0b3JhZ2UgbXVzdCBiZSBlbmFibGVkLicsXHJcbiAgICAgICAgW1wicG9wdXAtYmxvY2tlZFwiIC8qIEF1dGhFcnJvckNvZGUuUE9QVVBfQkxPQ0tFRCAqL106ICdVbmFibGUgdG8gZXN0YWJsaXNoIGEgY29ubmVjdGlvbiB3aXRoIHRoZSBwb3B1cC4gSXQgbWF5IGhhdmUgYmVlbiBibG9ja2VkIGJ5IHRoZSBicm93c2VyLicsXHJcbiAgICAgICAgW1wicG9wdXAtY2xvc2VkLWJ5LXVzZXJcIiAvKiBBdXRoRXJyb3JDb2RlLlBPUFVQX0NMT1NFRF9CWV9VU0VSICovXTogJ1RoZSBwb3B1cCBoYXMgYmVlbiBjbG9zZWQgYnkgdGhlIHVzZXIgYmVmb3JlIGZpbmFsaXppbmcgdGhlIG9wZXJhdGlvbi4nLFxyXG4gICAgICAgIFtcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogQXV0aEVycm9yQ29kZS5QUk9WSURFUl9BTFJFQURZX0xJTktFRCAqL106ICdVc2VyIGNhbiBvbmx5IGJlIGxpbmtlZCB0byBvbmUgaWRlbnRpdHkgZm9yIHRoZSBnaXZlbiBwcm92aWRlci4nLFxyXG4gICAgICAgIFtcInF1b3RhLWV4Y2VlZGVkXCIgLyogQXV0aEVycm9yQ29kZS5RVU9UQV9FWENFRURFRCAqL106IFwiVGhlIHByb2plY3QncyBxdW90YSBmb3IgdGhpcyBvcGVyYXRpb24gaGFzIGJlZW4gZXhjZWVkZWQuXCIsXHJcbiAgICAgICAgW1wicmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXJcIiAvKiBBdXRoRXJyb3JDb2RlLlJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovXTogJ1RoZSByZWRpcmVjdCBvcGVyYXRpb24gaGFzIGJlZW4gY2FuY2VsbGVkIGJ5IHRoZSB1c2VyIGJlZm9yZSBmaW5hbGl6aW5nLicsXHJcbiAgICAgICAgW1wicmVkaXJlY3Qtb3BlcmF0aW9uLXBlbmRpbmdcIiAvKiBBdXRoRXJyb3JDb2RlLlJFRElSRUNUX09QRVJBVElPTl9QRU5ESU5HICovXTogJ0EgcmVkaXJlY3Qgc2lnbi1pbiBvcGVyYXRpb24gaXMgYWxyZWFkeSBwZW5kaW5nLicsXHJcbiAgICAgICAgW1wicmVqZWN0ZWQtY3JlZGVudGlhbFwiIC8qIEF1dGhFcnJvckNvZGUuUkVKRUNURURfQ1JFREVOVElBTCAqL106ICdUaGUgcmVxdWVzdCBjb250YWlucyBtYWxmb3JtZWQgb3IgbWlzbWF0Y2hpbmcgY3JlZGVudGlhbHMuJyxcclxuICAgICAgICBbXCJzZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlXCIgLyogQXV0aEVycm9yQ29kZS5TRUNPTkRfRkFDVE9SX0FMUkVBRFlfRU5ST0xMRUQgKi9dOiAnVGhlIHNlY29uZCBmYWN0b3IgaXMgYWxyZWFkeSBlbnJvbGxlZCBvbiB0aGlzIGFjY291bnQuJyxcclxuICAgICAgICBbXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi9dOiAnVGhlIG1heGltdW0gYWxsb3dlZCBudW1iZXIgb2Ygc2Vjb25kIGZhY3RvcnMgb24gYSB1c2VyIGhhcyBiZWVuIGV4Y2VlZGVkLicsXHJcbiAgICAgICAgW1widGVuYW50LWlkLW1pc21hdGNoXCIgLyogQXV0aEVycm9yQ29kZS5URU5BTlRfSURfTUlTTUFUQ0ggKi9dOiBcIlRoZSBwcm92aWRlZCB0ZW5hbnQgSUQgZG9lcyBub3QgbWF0Y2ggdGhlIEF1dGggaW5zdGFuY2UncyB0ZW5hbnQgSURcIixcclxuICAgICAgICBbXCJ0aW1lb3V0XCIgLyogQXV0aEVycm9yQ29kZS5USU1FT1VUICovXTogJ1RoZSBvcGVyYXRpb24gaGFzIHRpbWVkIG91dC4nLFxyXG4gICAgICAgIFtcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuVE9LRU5fRVhQSVJFRCAqL106IFwiVGhlIHVzZXIncyBjcmVkZW50aWFsIGlzIG5vIGxvbmdlciB2YWxpZC4gVGhlIHVzZXIgbXVzdCBzaWduIGluIGFnYWluLlwiLFxyXG4gICAgICAgIFtcInRvby1tYW55LXJlcXVlc3RzXCIgLyogQXV0aEVycm9yQ29kZS5UT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi9dOiAnV2UgaGF2ZSBibG9ja2VkIGFsbCByZXF1ZXN0cyBmcm9tIHRoaXMgZGV2aWNlIGR1ZSB0byB1bnVzdWFsIGFjdGl2aXR5LiAnICtcclxuICAgICAgICAgICAgJ1RyeSBhZ2FpbiBsYXRlci4nLFxyXG4gICAgICAgIFtcInVuYXV0aG9yaXplZC1jb250aW51ZS11cmlcIiAvKiBBdXRoRXJyb3JDb2RlLlVOQVVUSE9SSVpFRF9ET01BSU4gKi9dOiAnVGhlIGRvbWFpbiBvZiB0aGUgY29udGludWUgVVJMIGlzIG5vdCB3aGl0ZWxpc3RlZC4gIFBsZWFzZSB3aGl0ZWxpc3QgJyArXHJcbiAgICAgICAgICAgICd0aGUgZG9tYWluIGluIHRoZSBGaXJlYmFzZSBjb25zb2xlLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtZmlyc3QtZmFjdG9yXCIgLyogQXV0aEVycm9yQ29kZS5VTlNVUFBPUlRFRF9GSVJTVF9GQUNUT1IgKi9dOiAnRW5yb2xsaW5nIGEgc2Vjb25kIGZhY3RvciBvciBzaWduaW5nIGluIHdpdGggYSBtdWx0aS1mYWN0b3IgYWNjb3VudCByZXF1aXJlcyBzaWduLWluIHdpdGggYSBzdXBwb3J0ZWQgZmlyc3QgZmFjdG9yLicsXHJcbiAgICAgICAgW1widW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIEF1dGhFcnJvckNvZGUuVU5TVVBQT1JURURfUEVSU0lTVEVOQ0UgKi9dOiAnVGhlIGN1cnJlbnQgZW52aXJvbm1lbnQgZG9lcyBub3Qgc3VwcG9ydCB0aGUgc3BlY2lmaWVkIHBlcnNpc3RlbmNlIHR5cGUuJyxcclxuICAgICAgICBbXCJ1bnN1cHBvcnRlZC10ZW5hbnQtb3BlcmF0aW9uXCIgLyogQXV0aEVycm9yQ29kZS5VTlNVUFBPUlRFRF9URU5BTlRfT1BFUkFUSU9OICovXTogJ1RoaXMgb3BlcmF0aW9uIGlzIG5vdCBzdXBwb3J0ZWQgaW4gYSBtdWx0aS10ZW5hbnQgY29udGV4dC4nLFxyXG4gICAgICAgIFtcInVudmVyaWZpZWQtZW1haWxcIiAvKiBBdXRoRXJyb3JDb2RlLlVOVkVSSUZJRURfRU1BSUwgKi9dOiAnVGhlIG9wZXJhdGlvbiByZXF1aXJlcyBhIHZlcmlmaWVkIGVtYWlsLicsXHJcbiAgICAgICAgW1widXNlci1jYW5jZWxsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlVTRVJfQ0FOQ0VMTEVEICovXTogJ1RoZSB1c2VyIGRpZCBub3QgZ3JhbnQgeW91ciBhcHBsaWNhdGlvbiB0aGUgcGVybWlzc2lvbnMgaXQgcmVxdWVzdGVkLicsXHJcbiAgICAgICAgW1widXNlci1ub3QtZm91bmRcIiAvKiBBdXRoRXJyb3JDb2RlLlVTRVJfREVMRVRFRCAqL106ICdUaGVyZSBpcyBubyB1c2VyIHJlY29yZCBjb3JyZXNwb25kaW5nIHRvIHRoaXMgaWRlbnRpZmllci4gVGhlIHVzZXIgbWF5ICcgK1xyXG4gICAgICAgICAgICAnaGF2ZSBiZWVuIGRlbGV0ZWQuJyxcclxuICAgICAgICBbXCJ1c2VyLWRpc2FibGVkXCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX0RJU0FCTEVEICovXTogJ1RoZSB1c2VyIGFjY291bnQgaGFzIGJlZW4gZGlzYWJsZWQgYnkgYW4gYWRtaW5pc3RyYXRvci4nLFxyXG4gICAgICAgIFtcInVzZXItbWlzbWF0Y2hcIiAvKiBBdXRoRXJyb3JDb2RlLlVTRVJfTUlTTUFUQ0ggKi9dOiAnVGhlIHN1cHBsaWVkIGNyZWRlbnRpYWxzIGRvIG5vdCBjb3JyZXNwb25kIHRvIHRoZSBwcmV2aW91c2x5IHNpZ25lZCBpbiB1c2VyLicsXHJcbiAgICAgICAgW1widXNlci1zaWduZWQtb3V0XCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX1NJR05FRF9PVVQgKi9dOiAnJyxcclxuICAgICAgICBbXCJ3ZWFrLXBhc3N3b3JkXCIgLyogQXV0aEVycm9yQ29kZS5XRUFLX1BBU1NXT1JEICovXTogJ1RoZSBwYXNzd29yZCBtdXN0IGJlIDYgY2hhcmFjdGVycyBsb25nIG9yIG1vcmUuJyxcclxuICAgICAgICBbXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiIC8qIEF1dGhFcnJvckNvZGUuV0VCX1NUT1JBR0VfVU5TVVBQT1JURUQgKi9dOiAnVGhpcyBicm93c2VyIGlzIG5vdCBzdXBwb3J0ZWQgb3IgM3JkIHBhcnR5IGNvb2tpZXMgYW5kIGRhdGEgbWF5IGJlIGRpc2FibGVkLicsXHJcbiAgICAgICAgW1wiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEF1dGhFcnJvckNvZGUuQUxSRUFEWV9JTklUSUFMSVpFRCAqL106ICdpbml0aWFsaXplQXV0aCgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggJyArXHJcbiAgICAgICAgICAgICdkaWZmZXJlbnQgb3B0aW9ucy4gVG8gYXZvaWQgdGhpcyBlcnJvciwgY2FsbCBpbml0aWFsaXplQXV0aCgpIHdpdGggdGhlICcgK1xyXG4gICAgICAgICAgICAnc2FtZSBvcHRpb25zIGFzIHdoZW4gaXQgd2FzIG9yaWdpbmFsbHkgY2FsbGVkLCBvciBjYWxsIGdldEF1dGgoKSB0byByZXR1cm4gdGhlJyArXHJcbiAgICAgICAgICAgICcgYWxyZWFkeSBpbml0aWFsaXplZCBpbnN0YW5jZS4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctcmVjYXB0Y2hhLXRva2VuXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1JFQ0FQVENIQV9UT0tFTiAqL106ICdUaGUgcmVDQVBUQ0hBIHRva2VuIGlzIG1pc3Npbmcgd2hlbiBzZW5kaW5nIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXJlY2FwdGNoYS10b2tlblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRUNBUFRDSEFfVE9LRU4gKi9dOiAnVGhlIHJlQ0FQVENIQSB0b2tlbiBpcyBpbnZhbGlkIHdoZW4gc2VuZGluZyByZXF1ZXN0IHRvIHRoZSBiYWNrZW5kLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1yZWNhcHRjaGEtYWN0aW9uXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1JFQ0FQVENIQV9BQ1RJT04gKi9dOiAnVGhlIHJlQ0FQVENIQSBhY3Rpb24gaXMgaW52YWxpZCB3aGVuIHNlbmRpbmcgcmVxdWVzdCB0byB0aGUgYmFja2VuZC4nLFxyXG4gICAgICAgIFtcInJlY2FwdGNoYS1ub3QtZW5hYmxlZFwiIC8qIEF1dGhFcnJvckNvZGUuUkVDQVBUQ0hBX05PVF9FTkFCTEVEICovXTogJ3JlQ0FQVENIQSBFbnRlcnByaXNlIGludGVncmF0aW9uIGlzIG5vdCBlbmFibGVkIGZvciB0aGlzIHByb2plY3QuJyxcclxuICAgICAgICBbXCJtaXNzaW5nLWNsaWVudC10eXBlXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0NMSUVOVF9UWVBFICovXTogJ1RoZSByZUNBUFRDSEEgY2xpZW50IHR5cGUgaXMgbWlzc2luZyB3aGVuIHNlbmRpbmcgcmVxdWVzdCB0byB0aGUgYmFja2VuZC4nLFxyXG4gICAgICAgIFtcIm1pc3NpbmctcmVjYXB0Y2hhLXZlcnNpb25cIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUkVDQVBUQ0hBX1ZFUlNJT04gKi9dOiAnVGhlIHJlQ0FQVENIQSB2ZXJzaW9uIGlzIG1pc3Npbmcgd2hlbiBzZW5kaW5nIHJlcXVlc3QgdG8gdGhlIGJhY2tlbmQuJyxcclxuICAgICAgICBbXCJpbnZhbGlkLXJlcS10eXBlXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1JFUV9UWVBFICovXTogJ0ludmFsaWQgcmVxdWVzdCBwYXJhbWV0ZXJzLicsXHJcbiAgICAgICAgW1wiaW52YWxpZC1yZWNhcHRjaGEtdmVyc2lvblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRUNBUFRDSEFfVkVSU0lPTiAqL106ICdUaGUgcmVDQVBUQ0hBIHZlcnNpb24gaXMgaW52YWxpZCB3aGVuIHNlbmRpbmcgcmVxdWVzdCB0byB0aGUgYmFja2VuZC4nXHJcbiAgICB9O1xyXG59XHJcbmZ1bmN0aW9uIF9wcm9kRXJyb3JNYXAoKSB7XHJcbiAgICAvLyBXZSB3aWxsIGluY2x1ZGUgdGhpcyBvbmUgbWVzc2FnZSBpbiB0aGUgcHJvZCBlcnJvciBtYXAgc2luY2UgYnkgdGhlIHZlcnlcclxuICAgIC8vIG5hdHVyZSBvZiB0aGlzIGVycm9yLCBkZXZlbG9wZXJzIHdpbGwgbmV2ZXIgYmUgYWJsZSB0byBzZWUgdGhlIG1lc3NhZ2VcclxuICAgIC8vIHVzaW5nIHRoZSBkZWJ1Z0Vycm9yTWFwICh3aGljaCBpcyBpbnN0YWxsZWQgZHVyaW5nIGF1dGggaW5pdGlhbGl6YXRpb24pLlxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBbXCJkZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoXCIgLyogQXV0aEVycm9yQ29kZS5ERVBFTkRFTlRfU0RLX0lOSVRfQkVGT1JFX0FVVEggKi9dOiAnQW5vdGhlciBGaXJlYmFzZSBTREsgd2FzIGluaXRpYWxpemVkIGFuZCBpcyB0cnlpbmcgdG8gdXNlIEF1dGggYmVmb3JlIEF1dGggaXMgJyArXHJcbiAgICAgICAgICAgICdpbml0aWFsaXplZC4gUGxlYXNlIGJlIHN1cmUgdG8gY2FsbCBgaW5pdGlhbGl6ZUF1dGhgIG9yIGBnZXRBdXRoYCBiZWZvcmUgJyArXHJcbiAgICAgICAgICAgICdzdGFydGluZyBhbnkgb3RoZXIgRmlyZWJhc2UgU0RLLidcclxuICAgIH07XHJcbn1cclxuLyoqXHJcbiAqIEEgdmVyYm9zZSBlcnJvciBtYXAgd2l0aCBkZXRhaWxlZCBkZXNjcmlwdGlvbnMgZm9yIG1vc3QgZXJyb3IgY29kZXMuXHJcbiAqXHJcbiAqIFNlZSBkaXNjdXNzaW9uIGF0IHtAbGluayBBdXRoRXJyb3JNYXB9XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGRlYnVnRXJyb3JNYXAgPSBfZGVidWdFcnJvck1hcDtcclxuLyoqXHJcbiAqIEEgbWluaW1hbCBlcnJvciBtYXAgd2l0aCBhbGwgdmVyYm9zZSBlcnJvciBtZXNzYWdlcyBzdHJpcHBlZC5cclxuICpcclxuICogU2VlIGRpc2N1c3Npb24gYXQge0BsaW5rIEF1dGhFcnJvck1hcH1cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgcHJvZEVycm9yTWFwID0gX3Byb2RFcnJvck1hcDtcclxuY29uc3QgX0RFRkFVTFRfQVVUSF9FUlJPUl9GQUNUT1JZID0gbmV3IEVycm9yRmFjdG9yeSgnYXV0aCcsICdGaXJlYmFzZScsIF9wcm9kRXJyb3JNYXAoKSk7XHJcbi8qKlxyXG4gKiBBIG1hcCBvZiBwb3RlbnRpYWwgYEF1dGhgIGVycm9yIGNvZGVzLCBmb3IgZWFzaWVyIGNvbXBhcmlzb24gd2l0aCBlcnJvcnNcclxuICogdGhyb3duIGJ5IHRoZSBTREsuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIE5vdGUgdGhhdCB5b3UgY2FuJ3QgdHJlZS1zaGFrZSBpbmRpdmlkdWFsIGtleXNcclxuICogaW4gdGhlIG1hcCwgc28gYnkgdXNpbmcgdGhlIG1hcCB5b3UgbWlnaHQgc3Vic3RhbnRpYWxseSBpbmNyZWFzZSB5b3VyXHJcbiAqIGJ1bmRsZSBzaXplLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBBVVRIX0VSUk9SX0NPREVTX01BUF9ET19OT1RfVVNFX0lOVEVSTkFMTFkgPSB7XHJcbiAgICBBRE1JTl9PTkxZX09QRVJBVElPTjogJ2F1dGgvYWRtaW4tcmVzdHJpY3RlZC1vcGVyYXRpb24nLFxyXG4gICAgQVJHVU1FTlRfRVJST1I6ICdhdXRoL2FyZ3VtZW50LWVycm9yJyxcclxuICAgIEFQUF9OT1RfQVVUSE9SSVpFRDogJ2F1dGgvYXBwLW5vdC1hdXRob3JpemVkJyxcclxuICAgIEFQUF9OT1RfSU5TVEFMTEVEOiAnYXV0aC9hcHAtbm90LWluc3RhbGxlZCcsXHJcbiAgICBDQVBUQ0hBX0NIRUNLX0ZBSUxFRDogJ2F1dGgvY2FwdGNoYS1jaGVjay1mYWlsZWQnLFxyXG4gICAgQ09ERV9FWFBJUkVEOiAnYXV0aC9jb2RlLWV4cGlyZWQnLFxyXG4gICAgQ09SRE9WQV9OT1RfUkVBRFk6ICdhdXRoL2NvcmRvdmEtbm90LXJlYWR5JyxcclxuICAgIENPUlNfVU5TVVBQT1JURUQ6ICdhdXRoL2NvcnMtdW5zdXBwb3J0ZWQnLFxyXG4gICAgQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRTogJ2F1dGgvY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZScsXHJcbiAgICBDUkVERU5USUFMX01JU01BVENIOiAnYXV0aC9jdXN0b20tdG9rZW4tbWlzbWF0Y2gnLFxyXG4gICAgQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOOiAnYXV0aC9yZXF1aXJlcy1yZWNlbnQtbG9naW4nLFxyXG4gICAgREVQRU5ERU5UX1NES19JTklUX0JFRk9SRV9BVVRIOiAnYXV0aC9kZXBlbmRlbnQtc2RrLWluaXRpYWxpemVkLWJlZm9yZS1hdXRoJyxcclxuICAgIERZTkFNSUNfTElOS19OT1RfQUNUSVZBVEVEOiAnYXV0aC9keW5hbWljLWxpbmstbm90LWFjdGl2YXRlZCcsXHJcbiAgICBFTUFJTF9DSEFOR0VfTkVFRFNfVkVSSUZJQ0FUSU9OOiAnYXV0aC9lbWFpbC1jaGFuZ2UtbmVlZHMtdmVyaWZpY2F0aW9uJyxcclxuICAgIEVNQUlMX0VYSVNUUzogJ2F1dGgvZW1haWwtYWxyZWFkeS1pbi11c2UnLFxyXG4gICAgRU1VTEFUT1JfQ09ORklHX0ZBSUxFRDogJ2F1dGgvZW11bGF0b3ItY29uZmlnLWZhaWxlZCcsXHJcbiAgICBFWFBJUkVEX09PQl9DT0RFOiAnYXV0aC9leHBpcmVkLWFjdGlvbi1jb2RlJyxcclxuICAgIEVYUElSRURfUE9QVVBfUkVRVUVTVDogJ2F1dGgvY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3QnLFxyXG4gICAgSU5URVJOQUxfRVJST1I6ICdhdXRoL2ludGVybmFsLWVycm9yJyxcclxuICAgIElOVkFMSURfQVBJX0tFWTogJ2F1dGgvaW52YWxpZC1hcGkta2V5JyxcclxuICAgIElOVkFMSURfQVBQX0NSRURFTlRJQUw6ICdhdXRoL2ludmFsaWQtYXBwLWNyZWRlbnRpYWwnLFxyXG4gICAgSU5WQUxJRF9BUFBfSUQ6ICdhdXRoL2ludmFsaWQtYXBwLWlkJyxcclxuICAgIElOVkFMSURfQVVUSDogJ2F1dGgvaW52YWxpZC11c2VyLXRva2VuJyxcclxuICAgIElOVkFMSURfQVVUSF9FVkVOVDogJ2F1dGgvaW52YWxpZC1hdXRoLWV2ZW50JyxcclxuICAgIElOVkFMSURfQ0VSVF9IQVNIOiAnYXV0aC9pbnZhbGlkLWNlcnQtaGFzaCcsXHJcbiAgICBJTlZBTElEX0NPREU6ICdhdXRoL2ludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGUnLFxyXG4gICAgSU5WQUxJRF9DT05USU5VRV9VUkk6ICdhdXRoL2ludmFsaWQtY29udGludWUtdXJpJyxcclxuICAgIElOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OOiAnYXV0aC9pbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvbicsXHJcbiAgICBJTlZBTElEX0NVU1RPTV9UT0tFTjogJ2F1dGgvaW52YWxpZC1jdXN0b20tdG9rZW4nLFxyXG4gICAgSU5WQUxJRF9EWU5BTUlDX0xJTktfRE9NQUlOOiAnYXV0aC9pbnZhbGlkLWR5bmFtaWMtbGluay1kb21haW4nLFxyXG4gICAgSU5WQUxJRF9FTUFJTDogJ2F1dGgvaW52YWxpZC1lbWFpbCcsXHJcbiAgICBJTlZBTElEX0VNVUxBVE9SX1NDSEVNRTogJ2F1dGgvaW52YWxpZC1lbXVsYXRvci1zY2hlbWUnLFxyXG4gICAgSU5WQUxJRF9JRFBfUkVTUE9OU0U6ICdhdXRoL2ludmFsaWQtY3JlZGVudGlhbCcsXHJcbiAgICBJTlZBTElEX01FU1NBR0VfUEFZTE9BRDogJ2F1dGgvaW52YWxpZC1tZXNzYWdlLXBheWxvYWQnLFxyXG4gICAgSU5WQUxJRF9NRkFfU0VTU0lPTjogJ2F1dGgvaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvbicsXHJcbiAgICBJTlZBTElEX09BVVRIX0NMSUVOVF9JRDogJ2F1dGgvaW52YWxpZC1vYXV0aC1jbGllbnQtaWQnLFxyXG4gICAgSU5WQUxJRF9PQVVUSF9QUk9WSURFUjogJ2F1dGgvaW52YWxpZC1vYXV0aC1wcm92aWRlcicsXHJcbiAgICBJTlZBTElEX09PQl9DT0RFOiAnYXV0aC9pbnZhbGlkLWFjdGlvbi1jb2RlJyxcclxuICAgIElOVkFMSURfT1JJR0lOOiAnYXV0aC91bmF1dGhvcml6ZWQtZG9tYWluJyxcclxuICAgIElOVkFMSURfUEFTU1dPUkQ6ICdhdXRoL3dyb25nLXBhc3N3b3JkJyxcclxuICAgIElOVkFMSURfUEVSU0lTVEVOQ0U6ICdhdXRoL2ludmFsaWQtcGVyc2lzdGVuY2UtdHlwZScsXHJcbiAgICBJTlZBTElEX1BIT05FX05VTUJFUjogJ2F1dGgvaW52YWxpZC1waG9uZS1udW1iZXInLFxyXG4gICAgSU5WQUxJRF9QUk9WSURFUl9JRDogJ2F1dGgvaW52YWxpZC1wcm92aWRlci1pZCcsXHJcbiAgICBJTlZBTElEX1JFQ0lQSUVOVF9FTUFJTDogJ2F1dGgvaW52YWxpZC1yZWNpcGllbnQtZW1haWwnLFxyXG4gICAgSU5WQUxJRF9TRU5ERVI6ICdhdXRoL2ludmFsaWQtc2VuZGVyJyxcclxuICAgIElOVkFMSURfU0VTU0lPTl9JTkZPOiAnYXV0aC9pbnZhbGlkLXZlcmlmaWNhdGlvbi1pZCcsXHJcbiAgICBJTlZBTElEX1RFTkFOVF9JRDogJ2F1dGgvaW52YWxpZC10ZW5hbnQtaWQnLFxyXG4gICAgTUZBX0lORk9fTk9UX0ZPVU5EOiAnYXV0aC9tdWx0aS1mYWN0b3ItaW5mby1ub3QtZm91bmQnLFxyXG4gICAgTUZBX1JFUVVJUkVEOiAnYXV0aC9tdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZCcsXHJcbiAgICBNSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FOiAnYXV0aC9taXNzaW5nLWFuZHJvaWQtcGtnLW5hbWUnLFxyXG4gICAgTUlTU0lOR19BUFBfQ1JFREVOVElBTDogJ2F1dGgvbWlzc2luZy1hcHAtY3JlZGVudGlhbCcsXHJcbiAgICBNSVNTSU5HX0FVVEhfRE9NQUlOOiAnYXV0aC9hdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWQnLFxyXG4gICAgTUlTU0lOR19DT0RFOiAnYXV0aC9taXNzaW5nLXZlcmlmaWNhdGlvbi1jb2RlJyxcclxuICAgIE1JU1NJTkdfQ09OVElOVUVfVVJJOiAnYXV0aC9taXNzaW5nLWNvbnRpbnVlLXVyaScsXHJcbiAgICBNSVNTSU5HX0lGUkFNRV9TVEFSVDogJ2F1dGgvbWlzc2luZy1pZnJhbWUtc3RhcnQnLFxyXG4gICAgTUlTU0lOR19JT1NfQlVORExFX0lEOiAnYXV0aC9taXNzaW5nLWlvcy1idW5kbGUtaWQnLFxyXG4gICAgTUlTU0lOR19PUl9JTlZBTElEX05PTkNFOiAnYXV0aC9taXNzaW5nLW9yLWludmFsaWQtbm9uY2UnLFxyXG4gICAgTUlTU0lOR19NRkFfSU5GTzogJ2F1dGgvbWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mbycsXHJcbiAgICBNSVNTSU5HX01GQV9TRVNTSU9OOiAnYXV0aC9taXNzaW5nLW11bHRpLWZhY3Rvci1zZXNzaW9uJyxcclxuICAgIE1JU1NJTkdfUEhPTkVfTlVNQkVSOiAnYXV0aC9taXNzaW5nLXBob25lLW51bWJlcicsXHJcbiAgICBNSVNTSU5HX1NFU1NJT05fSU5GTzogJ2F1dGgvbWlzc2luZy12ZXJpZmljYXRpb24taWQnLFxyXG4gICAgTU9EVUxFX0RFU1RST1lFRDogJ2F1dGgvYXBwLWRlbGV0ZWQnLFxyXG4gICAgTkVFRF9DT05GSVJNQVRJT046ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnLFxyXG4gICAgTkVUV09SS19SRVFVRVNUX0ZBSUxFRDogJ2F1dGgvbmV0d29yay1yZXF1ZXN0LWZhaWxlZCcsXHJcbiAgICBOVUxMX1VTRVI6ICdhdXRoL251bGwtdXNlcicsXHJcbiAgICBOT19BVVRIX0VWRU5UOiAnYXV0aC9uby1hdXRoLWV2ZW50JyxcclxuICAgIE5PX1NVQ0hfUFJPVklERVI6ICdhdXRoL25vLXN1Y2gtcHJvdmlkZXInLFxyXG4gICAgT1BFUkFUSU9OX05PVF9BTExPV0VEOiAnYXV0aC9vcGVyYXRpb24tbm90LWFsbG93ZWQnLFxyXG4gICAgT1BFUkFUSU9OX05PVF9TVVBQT1JURUQ6ICdhdXRoL29wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnQnLFxyXG4gICAgUE9QVVBfQkxPQ0tFRDogJ2F1dGgvcG9wdXAtYmxvY2tlZCcsXHJcbiAgICBQT1BVUF9DTE9TRURfQllfVVNFUjogJ2F1dGgvcG9wdXAtY2xvc2VkLWJ5LXVzZXInLFxyXG4gICAgUFJPVklERVJfQUxSRUFEWV9MSU5LRUQ6ICdhdXRoL3Byb3ZpZGVyLWFscmVhZHktbGlua2VkJyxcclxuICAgIFFVT1RBX0VYQ0VFREVEOiAnYXV0aC9xdW90YS1leGNlZWRlZCcsXHJcbiAgICBSRURJUkVDVF9DQU5DRUxMRURfQllfVVNFUjogJ2F1dGgvcmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXInLFxyXG4gICAgUkVESVJFQ1RfT1BFUkFUSU9OX1BFTkRJTkc6ICdhdXRoL3JlZGlyZWN0LW9wZXJhdGlvbi1wZW5kaW5nJyxcclxuICAgIFJFSkVDVEVEX0NSRURFTlRJQUw6ICdhdXRoL3JlamVjdGVkLWNyZWRlbnRpYWwnLFxyXG4gICAgU0VDT05EX0ZBQ1RPUl9BTFJFQURZX0VOUk9MTEVEOiAnYXV0aC9zZWNvbmQtZmFjdG9yLWFscmVhZHktaW4tdXNlJyxcclxuICAgIFNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQ6ICdhdXRoL21heGltdW0tc2Vjb25kLWZhY3Rvci1jb3VudC1leGNlZWRlZCcsXHJcbiAgICBURU5BTlRfSURfTUlTTUFUQ0g6ICdhdXRoL3RlbmFudC1pZC1taXNtYXRjaCcsXHJcbiAgICBUSU1FT1VUOiAnYXV0aC90aW1lb3V0JyxcclxuICAgIFRPS0VOX0VYUElSRUQ6ICdhdXRoL3VzZXItdG9rZW4tZXhwaXJlZCcsXHJcbiAgICBUT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVI6ICdhdXRoL3Rvby1tYW55LXJlcXVlc3RzJyxcclxuICAgIFVOQVVUSE9SSVpFRF9ET01BSU46ICdhdXRoL3VuYXV0aG9yaXplZC1jb250aW51ZS11cmknLFxyXG4gICAgVU5TVVBQT1JURURfRklSU1RfRkFDVE9SOiAnYXV0aC91bnN1cHBvcnRlZC1maXJzdC1mYWN0b3InLFxyXG4gICAgVU5TVVBQT1JURURfUEVSU0lTVEVOQ0U6ICdhdXRoL3Vuc3VwcG9ydGVkLXBlcnNpc3RlbmNlLXR5cGUnLFxyXG4gICAgVU5TVVBQT1JURURfVEVOQU5UX09QRVJBVElPTjogJ2F1dGgvdW5zdXBwb3J0ZWQtdGVuYW50LW9wZXJhdGlvbicsXHJcbiAgICBVTlZFUklGSUVEX0VNQUlMOiAnYXV0aC91bnZlcmlmaWVkLWVtYWlsJyxcclxuICAgIFVTRVJfQ0FOQ0VMTEVEOiAnYXV0aC91c2VyLWNhbmNlbGxlZCcsXHJcbiAgICBVU0VSX0RFTEVURUQ6ICdhdXRoL3VzZXItbm90LWZvdW5kJyxcclxuICAgIFVTRVJfRElTQUJMRUQ6ICdhdXRoL3VzZXItZGlzYWJsZWQnLFxyXG4gICAgVVNFUl9NSVNNQVRDSDogJ2F1dGgvdXNlci1taXNtYXRjaCcsXHJcbiAgICBVU0VSX1NJR05FRF9PVVQ6ICdhdXRoL3VzZXItc2lnbmVkLW91dCcsXHJcbiAgICBXRUFLX1BBU1NXT1JEOiAnYXV0aC93ZWFrLXBhc3N3b3JkJyxcclxuICAgIFdFQl9TVE9SQUdFX1VOU1VQUE9SVEVEOiAnYXV0aC93ZWItc3RvcmFnZS11bnN1cHBvcnRlZCcsXHJcbiAgICBBTFJFQURZX0lOSVRJQUxJWkVEOiAnYXV0aC9hbHJlYWR5LWluaXRpYWxpemVkJyxcclxuICAgIFJFQ0FQVENIQV9OT1RfRU5BQkxFRDogJ2F1dGgvcmVjYXB0Y2hhLW5vdC1lbmFibGVkJyxcclxuICAgIE1JU1NJTkdfUkVDQVBUQ0hBX1RPS0VOOiAnYXV0aC9taXNzaW5nLXJlY2FwdGNoYS10b2tlbicsXHJcbiAgICBJTlZBTElEX1JFQ0FQVENIQV9UT0tFTjogJ2F1dGgvaW52YWxpZC1yZWNhcHRjaGEtdG9rZW4nLFxyXG4gICAgSU5WQUxJRF9SRUNBUFRDSEFfQUNUSU9OOiAnYXV0aC9pbnZhbGlkLXJlY2FwdGNoYS1hY3Rpb24nLFxyXG4gICAgTUlTU0lOR19DTElFTlRfVFlQRTogJ2F1dGgvbWlzc2luZy1jbGllbnQtdHlwZScsXHJcbiAgICBNSVNTSU5HX1JFQ0FQVENIQV9WRVJTSU9OOiAnYXV0aC9taXNzaW5nLXJlY2FwdGNoYS12ZXJzaW9uJyxcclxuICAgIElOVkFMSURfUkVDQVBUQ0hBX1ZFUlNJT046ICdhdXRoL2ludmFsaWQtcmVjYXB0Y2hhLXZlcnNpb24nLFxyXG4gICAgSU5WQUxJRF9SRVFfVFlQRTogJ2F1dGgvaW52YWxpZC1yZXEtdHlwZSdcclxufTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgbG9nQ2xpZW50ID0gbmV3IExvZ2dlcignQGZpcmViYXNlL2F1dGgnKTtcclxuZnVuY3Rpb24gX2xvZ1dhcm4obXNnLCAuLi5hcmdzKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IExvZ0xldmVsLldBUk4pIHtcclxuICAgICAgICBsb2dDbGllbnQud2FybihgQXV0aCAoJHtTREtfVkVSU0lPTn0pOiAke21zZ31gLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfbG9nRXJyb3IobXNnLCAuLi5hcmdzKSB7XHJcbiAgICBpZiAobG9nQ2xpZW50LmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XHJcbiAgICAgICAgbG9nQ2xpZW50LmVycm9yKGBBdXRoICgke1NES19WRVJTSU9OfSk6ICR7bXNnfWAsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9mYWlsKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbn1cclxuZnVuY3Rpb24gX2NyZWF0ZUVycm9yKGF1dGhPckNvZGUsIC4uLnJlc3QpIHtcclxuICAgIHJldHVybiBjcmVhdGVFcnJvckludGVybmFsKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIGNvZGUsIG1lc3NhZ2UpIHtcclxuICAgIGNvbnN0IGVycm9yTWFwID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwcm9kRXJyb3JNYXAoKSksIHsgW2NvZGVdOiBtZXNzYWdlIH0pO1xyXG4gICAgY29uc3QgZmFjdG9yeSA9IG5ldyBFcnJvckZhY3RvcnkoJ2F1dGgnLCAnRmlyZWJhc2UnLCBlcnJvck1hcCk7XHJcbiAgICByZXR1cm4gZmFjdG9yeS5jcmVhdGUoY29kZSwge1xyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZVxyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgb2JqZWN0LCBpbnN0YW5jZSkge1xyXG4gICAgY29uc3QgY29uc3RydWN0b3JJbnN0YW5jZSA9IGluc3RhbmNlO1xyXG4gICAgaWYgKCEob2JqZWN0IGluc3RhbmNlb2YgY29uc3RydWN0b3JJbnN0YW5jZSkpIHtcclxuICAgICAgICBpZiAoY29uc3RydWN0b3JJbnN0YW5jZS5uYW1lICE9PSBvYmplY3QuY29uc3RydWN0b3IubmFtZSkge1xyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IF9lcnJvcldpdGhDdXN0b21NZXNzYWdlKGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovLCBgVHlwZSBvZiAke29iamVjdC5jb25zdHJ1Y3Rvci5uYW1lfSBkb2VzIG5vdCBtYXRjaCBleHBlY3RlZCBpbnN0YW5jZS5gICtcclxuICAgICAgICAgICAgYERpZCB5b3UgcGFzcyBhIHJlZmVyZW5jZSBmcm9tIGEgZGlmZmVyZW50IEF1dGggU0RLP2ApO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCkge1xyXG4gICAgaWYgKHR5cGVvZiBhdXRoT3JDb2RlICE9PSAnc3RyaW5nJykge1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSByZXN0WzBdO1xyXG4gICAgICAgIGNvbnN0IGZ1bGxQYXJhbXMgPSBbLi4ucmVzdC5zbGljZSgxKV07XHJcbiAgICAgICAgaWYgKGZ1bGxQYXJhbXNbMF0pIHtcclxuICAgICAgICAgICAgZnVsbFBhcmFtc1swXS5hcHBOYW1lID0gYXV0aE9yQ29kZS5uYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXV0aE9yQ29kZS5fZXJyb3JGYWN0b3J5LmNyZWF0ZShjb2RlLCAuLi5mdWxsUGFyYW1zKTtcclxuICAgIH1cclxuICAgIHJldHVybiBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlkuY3JlYXRlKGF1dGhPckNvZGUsIC4uLnJlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9hc3NlcnQoYXNzZXJ0aW9uLCBhdXRoT3JDb2RlLCAuLi5yZXN0KSB7XHJcbiAgICBpZiAoIWFzc2VydGlvbikge1xyXG4gICAgICAgIHRocm93IGNyZWF0ZUVycm9ySW50ZXJuYWwoYXV0aE9yQ29kZSwgLi4ucmVzdCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFVuY29uZGl0aW9uYWxseSBmYWlscywgdGhyb3dpbmcgYW4gaW50ZXJuYWwgZXJyb3Igd2l0aCB0aGUgZ2l2ZW4gbWVzc2FnZS5cclxuICpcclxuICogQHBhcmFtIGZhaWx1cmUgdHlwZSBvZiBmYWlsdXJlIGVuY291bnRlcmVkXHJcbiAqIEB0aHJvd3MgRXJyb3JcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnRmFpbChmYWlsdXJlKSB7XHJcbiAgICAvLyBMb2cgdGhlIGZhaWx1cmUgaW4gYWRkaXRpb24gdG8gdGhyb3cgYW4gZXhjZXB0aW9uLCBqdXN0IGluIGNhc2UgdGhlXHJcbiAgICAvLyBleGNlcHRpb24gaXMgc3dhbGxvd2VkLlxyXG4gICAgY29uc3QgbWVzc2FnZSA9IGBJTlRFUk5BTCBBU1NFUlRJT04gRkFJTEVEOiBgICsgZmFpbHVyZTtcclxuICAgIF9sb2dFcnJvcihtZXNzYWdlKTtcclxuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlYmFzZUVycm9yIGhlcmUgYmVjYXVzZSB0aGVzZSBhcmUgaW50ZXJuYWwgZmFpbHVyZXNcclxuICAgIC8vIHRoYXQgY2Fubm90IGJlIGhhbmRsZWQgYnkgdGhlIHVzZXIuIChBbHNvIGl0IHdvdWxkIGNyZWF0ZSBhIGNpcmN1bGFyXHJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKG1lc3NhZ2UpO1xyXG59XHJcbi8qKlxyXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcclxuICogZ2l2ZW4gbWVzc2FnZSBpZiBpdCBkaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhc3NlcnRpb25cclxuICogQHBhcmFtIG1lc3NhZ2VcclxuICovXHJcbmZ1bmN0aW9uIGRlYnVnQXNzZXJ0KGFzc2VydGlvbiwgbWVzc2FnZSkge1xyXG4gICAgaWYgKCFhc3NlcnRpb24pIHtcclxuICAgICAgICBkZWJ1Z0ZhaWwobWVzc2FnZSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dldEN1cnJlbnRVcmwoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyAmJiAoKF9hID0gc2VsZi5sb2NhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmhyZWYpKSB8fCAnJztcclxufVxyXG5mdW5jdGlvbiBfaXNIdHRwT3JIdHRwcygpIHtcclxuICAgIHJldHVybiBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cDonIHx8IF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwczonO1xyXG59XHJcbmZ1bmN0aW9uIF9nZXRDdXJyZW50U2NoZW1lKCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgcmV0dXJuICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgKChfYSA9IHNlbGYubG9jYXRpb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wcm90b2NvbCkpIHx8IG51bGw7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIERldGVybWluZSB3aGV0aGVyIHRoZSBicm93c2VyIGlzIHdvcmtpbmcgb25saW5lXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNPbmxpbmUoKSB7XHJcbiAgICBpZiAodHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICBuYXZpZ2F0b3IgJiZcclxuICAgICAgICAnb25MaW5lJyBpbiBuYXZpZ2F0b3IgJiZcclxuICAgICAgICB0eXBlb2YgbmF2aWdhdG9yLm9uTGluZSA9PT0gJ2Jvb2xlYW4nICYmXHJcbiAgICAgICAgLy8gQXBwbHkgb25seSBmb3IgdHJhZGl0aW9uYWwgd2ViIGFwcHMgYW5kIENocm9tZSBleHRlbnNpb25zLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgZXNwZWNpYWxseSB0cnVlIGZvciBDb3Jkb3ZhIGFwcHMgd2hpY2ggaGF2ZSB1bnJlbGlhYmxlXHJcbiAgICAgICAgLy8gbmF2aWdhdG9yLm9uTGluZSBiZWhhdmlvciB1bmxlc3MgY29yZG92YS1wbHVnaW4tbmV0d29yay1pbmZvcm1hdGlvbiBpc1xyXG4gICAgICAgIC8vIGluc3RhbGxlZCB3aGljaCBvdmVyd3JpdGVzIHRoZSBuYXRpdmUgbmF2aWdhdG9yLm9uTGluZSB2YWx1ZSBhbmRcclxuICAgICAgICAvLyBkZWZpbmVzIG5hdmlnYXRvci5jb25uZWN0aW9uLlxyXG4gICAgICAgIChfaXNIdHRwT3JIdHRwcygpIHx8IGlzQnJvd3NlckV4dGVuc2lvbigpIHx8ICdjb25uZWN0aW9uJyBpbiBuYXZpZ2F0b3IpKSB7XHJcbiAgICAgICAgcmV0dXJuIG5hdmlnYXRvci5vbkxpbmU7XHJcbiAgICB9XHJcbiAgICAvLyBJZiB3ZSBjYW4ndCBkZXRlcm1pbmUgdGhlIHN0YXRlLCBhc3N1bWUgaXQgaXMgb25saW5lLlxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuZnVuY3Rpb24gX2dldFVzZXJMYW5ndWFnZSgpIHtcclxuICAgIGlmICh0eXBlb2YgbmF2aWdhdG9yID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmF2aWdhdG9yTGFuZ3VhZ2UgPSBuYXZpZ2F0b3I7XHJcbiAgICByZXR1cm4gKFxyXG4gICAgLy8gTW9zdCByZWxpYWJsZSwgYnV0IG9ubHkgc3VwcG9ydGVkIGluIENocm9tZS9GaXJlZm94LlxyXG4gICAgKG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlcyAmJiBuYXZpZ2F0b3JMYW5ndWFnZS5sYW5ndWFnZXNbMF0pIHx8XHJcbiAgICAgICAgLy8gU3VwcG9ydGVkIGluIG1vc3QgYnJvd3NlcnMsIGJ1dCByZXR1cm5zIHRoZSBsYW5ndWFnZSBvZiB0aGUgYnJvd3NlclxyXG4gICAgICAgIC8vIFVJLCBub3QgdGhlIGxhbmd1YWdlIHNldCBpbiBicm93c2VyIHNldHRpbmdzLlxyXG4gICAgICAgIG5hdmlnYXRvckxhbmd1YWdlLmxhbmd1YWdlIHx8XHJcbiAgICAgICAgLy8gQ291bGRuJ3QgZGV0ZXJtaW5lIGxhbmd1YWdlLlxyXG4gICAgICAgIG51bGwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIHN0cnVjdHVyZSB0byBoZWxwIHBpY2sgYmV0d2VlbiBhIHJhbmdlIG9mIGxvbmcgYW5kIHNob3J0IGRlbGF5IGR1cmF0aW9uc1xyXG4gKiBkZXBlbmRpbmcgb24gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuIEluIGdlbmVyYWwsIHRoZSBsb25nIGRlbGF5IGlzIHVzZWQgZm9yXHJcbiAqIG1vYmlsZSBlbnZpcm9ubWVudHMgd2hlcmVhcyBzaG9ydCBkZWxheXMgYXJlIHVzZWQgZm9yIGRlc2t0b3AgZW52aXJvbm1lbnRzLlxyXG4gKi9cclxuY2xhc3MgRGVsYXkge1xyXG4gICAgY29uc3RydWN0b3Ioc2hvcnREZWxheSwgbG9uZ0RlbGF5KSB7XHJcbiAgICAgICAgdGhpcy5zaG9ydERlbGF5ID0gc2hvcnREZWxheTtcclxuICAgICAgICB0aGlzLmxvbmdEZWxheSA9IGxvbmdEZWxheTtcclxuICAgICAgICAvLyBJbnRlcm5hbCBlcnJvciB3aGVuIGltcHJvcGVybHkgaW5pdGlhbGl6ZWQuXHJcbiAgICAgICAgZGVidWdBc3NlcnQobG9uZ0RlbGF5ID4gc2hvcnREZWxheSwgJ1Nob3J0IGRlbGF5IHNob3VsZCBiZSBsZXNzIHRoYW4gbG9uZyBkZWxheSEnKTtcclxuICAgICAgICB0aGlzLmlzTW9iaWxlID0gaXNNb2JpbGVDb3Jkb3ZhKCkgfHwgaXNSZWFjdE5hdGl2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0KCkge1xyXG4gICAgICAgIGlmICghX2lzT25saW5lKCkpIHtcclxuICAgICAgICAgICAgLy8gUGljayB0aGUgc2hvcnRlciB0aW1lb3V0LlxyXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oNTAwMCAvKiBEZWxheU1pbi5PRkZMSU5FICovLCB0aGlzLnNob3J0RGVsYXkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiBydW5uaW5nIGluIGEgbW9iaWxlIGVudmlyb25tZW50LCByZXR1cm4gdGhlIGxvbmcgZGVsYXksIG90aGVyd2lzZVxyXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2hvcnQgZGVsYXkuXHJcbiAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBpbXByb3ZlZCBpbiB0aGUgZnV0dXJlIHRvIGR5bmFtaWNhbGx5IGNoYW5nZSBiYXNlZCBvbiBvdGhlclxyXG4gICAgICAgIC8vIHZhcmlhYmxlcyBpbnN0ZWFkIG9mIGp1c3QgcmVhZGluZyB0aGUgY3VycmVudCBlbnZpcm9ubWVudC5cclxuICAgICAgICByZXR1cm4gdGhpcy5pc01vYmlsZSA/IHRoaXMubG9uZ0RlbGF5IDogdGhpcy5zaG9ydERlbGF5O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9lbXVsYXRvclVybChjb25maWcsIHBhdGgpIHtcclxuICAgIGRlYnVnQXNzZXJ0KGNvbmZpZy5lbXVsYXRvciwgJ0VtdWxhdG9yIHNob3VsZCBhbHdheXMgYmUgc2V0IGhlcmUnKTtcclxuICAgIGNvbnN0IHsgdXJsIH0gPSBjb25maWcuZW11bGF0b3I7XHJcbiAgICBpZiAoIXBhdGgpIHtcclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0ke3BhdGguc3RhcnRzV2l0aCgnLycpID8gcGF0aC5zbGljZSgxKSA6IHBhdGh9YDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBGZXRjaFByb3ZpZGVyIHtcclxuICAgIHN0YXRpYyBpbml0aWFsaXplKGZldGNoSW1wbCwgaGVhZGVyc0ltcGwsIHJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgIHRoaXMuZmV0Y2hJbXBsID0gZmV0Y2hJbXBsO1xyXG4gICAgICAgIGlmIChoZWFkZXJzSW1wbCkge1xyXG4gICAgICAgICAgICB0aGlzLmhlYWRlcnNJbXBsID0gaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXNwb25zZUltcGwpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNwb25zZUltcGwgPSByZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhdGljIGZldGNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmZldGNoSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaEltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ2ZldGNoJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLmZldGNoO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIGZldGNoIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGhlYWRlcnMoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGVhZGVyc0ltcGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaGVhZGVyc0ltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ0hlYWRlcnMnIGluIHNlbGYpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHNlbGYuSGVhZGVycztcclxuICAgICAgICB9XHJcbiAgICAgICAgZGVidWdGYWlsKCdDb3VsZCBub3QgZmluZCBIZWFkZXJzIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHJlc3BvbnNlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLnJlc3BvbnNlSW1wbCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZXNwb25zZUltcGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiYgJ1Jlc3BvbnNlJyBpbiBzZWxmKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzZWxmLlJlc3BvbnNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBkZWJ1Z0ZhaWwoJ0NvdWxkIG5vdCBmaW5kIFJlc3BvbnNlIGltcGxlbWVudGF0aW9uLCBtYWtlIHN1cmUgeW91IGNhbGwgRmV0Y2hQcm92aWRlci5pbml0aWFsaXplKCkgd2l0aCBhbiBhcHByb3ByaWF0ZSBwb2x5ZmlsbCcpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYXAgZnJvbSBlcnJvcnMgcmV0dXJuZWQgYnkgdGhlIHNlcnZlciB0byBlcnJvcnMgdG8gZGV2ZWxvcGVyIHZpc2libGUgZXJyb3JzXHJcbiAqL1xyXG5jb25zdCBTRVJWRVJfRVJST1JfTUFQID0ge1xyXG4gICAgLy8gQ3VzdG9tIHRva2VuIGVycm9ycy5cclxuICAgIFtcIkNSRURFTlRJQUxfTUlTTUFUQ0hcIiAvKiBTZXJ2ZXJFcnJvci5DUkVERU5USUFMX01JU01BVENIICovXTogXCJjdXN0b20tdG9rZW4tbWlzbWF0Y2hcIiAvKiBBdXRoRXJyb3JDb2RlLkNSRURFTlRJQUxfTUlTTUFUQ0ggKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX0NVU1RPTV9UT0tFTlwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfQ1VTVE9NX1RPS0VOICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBDcmVhdGUgQXV0aCBVUkkgZXJyb3JzLlxyXG4gICAgW1wiSU5WQUxJRF9JREVOVElGSUVSXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9JREVOVElGSUVSICovXTogXCJpbnZhbGlkLWVtYWlsXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0VNQUlMICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19DT05USU5VRV9VUklcIiAvKiBTZXJ2ZXJFcnJvci5NSVNTSU5HX0NPTlRJTlVFX1VSSSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gU2lnbiBpbiB3aXRoIGVtYWlsIGFuZCBwYXNzd29yZCBlcnJvcnMgKHNvbWUgYXBwbHkgdG8gc2lnbiB1cCB0b28pLlxyXG4gICAgW1wiSU5WQUxJRF9QQVNTV09SRFwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfUEFTU1dPUkQgKi9dOiBcIndyb25nLXBhc3N3b3JkXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1BBU1NXT1JEICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19QQVNTV09SRFwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfUEFTU1dPUkQgKi9dOiBcIm1pc3NpbmctcGFzc3dvcmRcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUEFTU1dPUkQgKi8sXHJcbiAgICAvLyBTaWduIHVwIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkIGVycm9ycy5cclxuICAgIFtcIkVNQUlMX0VYSVNUU1wiIC8qIFNlcnZlckVycm9yLkVNQUlMX0VYSVNUUyAqL106IFwiZW1haWwtYWxyZWFkeS1pbi11c2VcIiAvKiBBdXRoRXJyb3JDb2RlLkVNQUlMX0VYSVNUUyAqLyxcclxuICAgIFtcIlBBU1NXT1JEX0xPR0lOX0RJU0FCTEVEXCIgLyogU2VydmVyRXJyb3IuUEFTU1dPUkRfTE9HSU5fRElTQUJMRUQgKi9dOiBcIm9wZXJhdGlvbi1ub3QtYWxsb3dlZFwiIC8qIEF1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9BTExPV0VEICovLFxyXG4gICAgLy8gVmVyaWZ5IGFzc2VydGlvbiBmb3Igc2lnbiBpbiB3aXRoIGNyZWRlbnRpYWwgZXJyb3JzOlxyXG4gICAgW1wiSU5WQUxJRF9JRFBfUkVTUE9OU0VcIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX0lEUF9SRVNQT05TRSAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIklOVkFMSURfUEVORElOR19UT0tFTlwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfUEVORElOR19UT0tFTiAqL106IFwiaW52YWxpZC1jcmVkZW50aWFsXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0lEUF9SRVNQT05TRSAqLyxcclxuICAgIFtcIkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEXCIgLyogU2VydmVyRXJyb3IuRkVERVJBVEVEX1VTRVJfSURfQUxSRUFEWV9MSU5LRUQgKi9dOiBcImNyZWRlbnRpYWwtYWxyZWFkeS1pbi11c2VcIiAvKiBBdXRoRXJyb3JDb2RlLkNSRURFTlRJQUxfQUxSRUFEWV9JTl9VU0UgKi8sXHJcbiAgICAvLyBUaGlzIGNhbiBvbmx5IGhhcHBlbiBpZiB0aGUgU0RLIHNlbmRzIGEgYmFkIHJlcXVlc3QuXHJcbiAgICBbXCJNSVNTSU5HX1JFUV9UWVBFXCIgLyogU2VydmVyRXJyb3IuTUlTU0lOR19SRVFfVFlQRSAqL106IFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovLFxyXG4gICAgLy8gU2VuZCBQYXNzd29yZCByZXNldCBlbWFpbCBlcnJvcnM6XHJcbiAgICBbXCJFTUFJTF9OT1RfRk9VTkRcIiAvKiBTZXJ2ZXJFcnJvci5FTUFJTF9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX0RFTEVURUQgKi8sXHJcbiAgICBbXCJSRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVRcIiAvKiBTZXJ2ZXJFcnJvci5SRVNFVF9QQVNTV09SRF9FWENFRURfTElNSVQgKi9dOiBcInRvby1tYW55LXJlcXVlc3RzXCIgLyogQXV0aEVycm9yQ29kZS5UT09fTUFOWV9BVFRFTVBUU19UUllfTEFURVIgKi8sXHJcbiAgICBbXCJFWFBJUkVEX09PQl9DT0RFXCIgLyogU2VydmVyRXJyb3IuRVhQSVJFRF9PT0JfQ09ERSAqL106IFwiZXhwaXJlZC1hY3Rpb24tY29kZVwiIC8qIEF1dGhFcnJvckNvZGUuRVhQSVJFRF9PT0JfQ09ERSAqLyxcclxuICAgIFtcIklOVkFMSURfT09CX0NPREVcIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX09PQl9DT0RFICovXTogXCJpbnZhbGlkLWFjdGlvbi1jb2RlXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX09PQl9DT0RFICovLFxyXG4gICAgLy8gVGhpcyBjYW4gb25seSBoYXBwZW4gaWYgdGhlIFNESyBzZW5kcyBhIGJhZCByZXF1ZXN0LlxyXG4gICAgW1wiTUlTU0lOR19PT0JfQ09ERVwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfT09CX0NPREUgKi9dOiBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyxcclxuICAgIC8vIE9wZXJhdGlvbnMgdGhhdCByZXF1aXJlIElEIHRva2VuIGluIHJlcXVlc3Q6XHJcbiAgICBbXCJDUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU5cIiAvKiBTZXJ2ZXJFcnJvci5DUkVERU5USUFMX1RPT19PTERfTE9HSU5fQUdBSU4gKi9dOiBcInJlcXVpcmVzLXJlY2VudC1sb2dpblwiIC8qIEF1dGhFcnJvckNvZGUuQ1JFREVOVElBTF9UT09fT0xEX0xPR0lOX0FHQUlOICovLFxyXG4gICAgW1wiSU5WQUxJRF9JRF9UT0tFTlwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfSURfVE9LRU4gKi9dOiBcImludmFsaWQtdXNlci10b2tlblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9BVVRIICovLFxyXG4gICAgW1wiVE9LRU5fRVhQSVJFRFwiIC8qIFNlcnZlckVycm9yLlRPS0VOX0VYUElSRUQgKi9dOiBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuVE9LRU5fRVhQSVJFRCAqLyxcclxuICAgIFtcIlVTRVJfTk9UX0ZPVU5EXCIgLyogU2VydmVyRXJyb3IuVVNFUl9OT1RfRk9VTkQgKi9dOiBcInVzZXItdG9rZW4tZXhwaXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuVE9LRU5fRVhQSVJFRCAqLyxcclxuICAgIC8vIE90aGVyIGVycm9ycy5cclxuICAgIFtcIlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUlwiIC8qIFNlcnZlckVycm9yLlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqL106IFwidG9vLW1hbnktcmVxdWVzdHNcIiAvKiBBdXRoRXJyb3JDb2RlLlRPT19NQU5ZX0FUVEVNUFRTX1RSWV9MQVRFUiAqLyxcclxuICAgIC8vIFBob25lIEF1dGggcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJJTlZBTElEX0NPREVcIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX0NPREUgKi9dOiBcImludmFsaWQtdmVyaWZpY2F0aW9uLWNvZGVcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09ERSAqLyxcclxuICAgIFtcIklOVkFMSURfU0VTU0lPTl9JTkZPXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9TRVNTSU9OX0lORk8gKi9dOiBcImludmFsaWQtdmVyaWZpY2F0aW9uLWlkXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1NFU1NJT05fSU5GTyAqLyxcclxuICAgIFtcIklOVkFMSURfVEVNUE9SQVJZX1BST09GXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9URU1QT1JBUllfUFJPT0YgKi9dOiBcImludmFsaWQtY3JlZGVudGlhbFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9JRFBfUkVTUE9OU0UgKi8sXHJcbiAgICBbXCJNSVNTSU5HX1NFU1NJT05fSU5GT1wiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfU0VTU0lPTl9JTkZPICovXTogXCJtaXNzaW5nLXZlcmlmaWNhdGlvbi1pZFwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19TRVNTSU9OX0lORk8gKi8sXHJcbiAgICBbXCJTRVNTSU9OX0VYUElSRURcIiAvKiBTZXJ2ZXJFcnJvci5TRVNTSU9OX0VYUElSRUQgKi9dOiBcImNvZGUtZXhwaXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuQ09ERV9FWFBJUkVEICovLFxyXG4gICAgLy8gT3RoZXIgYWN0aW9uIGNvZGUgZXJyb3JzIHdoZW4gYWRkaXRpb25hbCBzZXR0aW5ncyBwYXNzZWQuXHJcbiAgICAvLyBNSVNTSU5HX0NPTlRJTlVFX1VSSSBpcyBnZXR0aW5nIG1hcHBlZCB0byBJTlRFUk5BTF9FUlJPUiBhYm92ZS5cclxuICAgIC8vIFRoaXMgaXMgT0sgYXMgdGhpcyBlcnJvciB3aWxsIGJlIGNhdWdodCBieSBjbGllbnQgc2lkZSB2YWxpZGF0aW9uLlxyXG4gICAgW1wiTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRVwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfQU5EUk9JRF9QQUNLQUdFX05BTUUgKi9dOiBcIm1pc3NpbmctYW5kcm9pZC1wa2ctbmFtZVwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19BTkRST0lEX1BBQ0tBR0VfTkFNRSAqLyxcclxuICAgIFtcIlVOQVVUSE9SSVpFRF9ET01BSU5cIiAvKiBTZXJ2ZXJFcnJvci5VTkFVVEhPUklaRURfRE9NQUlOICovXTogXCJ1bmF1dGhvcml6ZWQtY29udGludWUtdXJpXCIgLyogQXV0aEVycm9yQ29kZS5VTkFVVEhPUklaRURfRE9NQUlOICovLFxyXG4gICAgLy8gZ2V0UHJvamVjdENvbmZpZyBlcnJvcnMgd2hlbiBjbGllbnRJZCBpcyBwYXNzZWQuXHJcbiAgICBbXCJJTlZBTElEX09BVVRIX0NMSUVOVF9JRFwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfT0FVVEhfQ0xJRU5UX0lEICovXTogXCJpbnZhbGlkLW9hdXRoLWNsaWVudC1pZFwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9PQVVUSF9DTElFTlRfSUQgKi8sXHJcbiAgICAvLyBVc2VyIGFjdGlvbnMgKHNpZ24tdXAgb3IgZGVsZXRpb24pIGRpc2FibGVkIGVycm9ycy5cclxuICAgIFtcIkFETUlOX09OTFlfT1BFUkFUSU9OXCIgLyogU2VydmVyRXJyb3IuQURNSU5fT05MWV9PUEVSQVRJT04gKi9dOiBcImFkbWluLXJlc3RyaWN0ZWQtb3BlcmF0aW9uXCIgLyogQXV0aEVycm9yQ29kZS5BRE1JTl9PTkxZX09QRVJBVElPTiAqLyxcclxuICAgIC8vIE11bHRpIGZhY3RvciByZWxhdGVkIGVycm9ycy5cclxuICAgIFtcIklOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTFwiIC8qIFNlcnZlckVycm9yLklOVkFMSURfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCAqL106IFwiaW52YWxpZC1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9NRkFfU0VTU0lPTiAqLyxcclxuICAgIFtcIk1GQV9FTlJPTExNRU5UX05PVF9GT1VORFwiIC8qIFNlcnZlckVycm9yLk1GQV9FTlJPTExNRU5UX05PVF9GT1VORCAqL106IFwibXVsdGktZmFjdG9yLWluZm8tbm90LWZvdW5kXCIgLyogQXV0aEVycm9yQ29kZS5NRkFfSU5GT19OT1RfRk9VTkQgKi8sXHJcbiAgICBbXCJNSVNTSU5HX01GQV9FTlJPTExNRU5UX0lEXCIgLyogU2VydmVyRXJyb3IuTUlTU0lOR19NRkFfRU5ST0xMTUVOVF9JRCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3ItaW5mb1wiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19NRkFfSU5GTyAqLyxcclxuICAgIFtcIk1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTFwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfTUZBX1BFTkRJTkdfQ1JFREVOVElBTCAqL106IFwibWlzc2luZy1tdWx0aS1mYWN0b3Itc2Vzc2lvblwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19NRkFfU0VTU0lPTiAqLyxcclxuICAgIFtcIlNFQ09ORF9GQUNUT1JfRVhJU1RTXCIgLyogU2VydmVyRXJyb3IuU0VDT05EX0ZBQ1RPUl9FWElTVFMgKi9dOiBcInNlY29uZC1mYWN0b3ItYWxyZWFkeS1pbi11c2VcIiAvKiBBdXRoRXJyb3JDb2RlLlNFQ09ORF9GQUNUT1JfQUxSRUFEWV9FTlJPTExFRCAqLyxcclxuICAgIFtcIlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERURcIiAvKiBTZXJ2ZXJFcnJvci5TRUNPTkRfRkFDVE9SX0xJTUlUX0VYQ0VFREVEICovXTogXCJtYXhpbXVtLXNlY29uZC1mYWN0b3ItY291bnQtZXhjZWVkZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlNFQ09ORF9GQUNUT1JfTElNSVRfRVhDRUVERUQgKi8sXHJcbiAgICAvLyBCbG9ja2luZyBmdW5jdGlvbnMgcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJCTE9DS0lOR19GVU5DVElPTl9FUlJPUl9SRVNQT05TRVwiIC8qIFNlcnZlckVycm9yLkJMT0NLSU5HX0ZVTkNUSU9OX0VSUk9SX1JFU1BPTlNFICovXTogXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8sXHJcbiAgICAvLyBSZWNhcHRjaGEgcmVsYXRlZCBlcnJvcnMuXHJcbiAgICBbXCJSRUNBUFRDSEFfTk9UX0VOQUJMRURcIiAvKiBTZXJ2ZXJFcnJvci5SRUNBUFRDSEFfTk9UX0VOQUJMRUQgKi9dOiBcInJlY2FwdGNoYS1ub3QtZW5hYmxlZFwiIC8qIEF1dGhFcnJvckNvZGUuUkVDQVBUQ0hBX05PVF9FTkFCTEVEICovLFxyXG4gICAgW1wiTUlTU0lOR19SRUNBUFRDSEFfVE9LRU5cIiAvKiBTZXJ2ZXJFcnJvci5NSVNTSU5HX1JFQ0FQVENIQV9UT0tFTiAqL106IFwibWlzc2luZy1yZWNhcHRjaGEtdG9rZW5cIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUkVDQVBUQ0hBX1RPS0VOICovLFxyXG4gICAgW1wiSU5WQUxJRF9SRUNBUFRDSEFfVE9LRU5cIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX1JFQ0FQVENIQV9UT0tFTiAqL106IFwiaW52YWxpZC1yZWNhcHRjaGEtdG9rZW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUkVDQVBUQ0hBX1RPS0VOICovLFxyXG4gICAgW1wiSU5WQUxJRF9SRUNBUFRDSEFfQUNUSU9OXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9SRUNBUFRDSEFfQUNUSU9OICovXTogXCJpbnZhbGlkLXJlY2FwdGNoYS1hY3Rpb25cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfUkVDQVBUQ0hBX0FDVElPTiAqLyxcclxuICAgIFtcIk1JU1NJTkdfQ0xJRU5UX1RZUEVcIiAvKiBTZXJ2ZXJFcnJvci5NSVNTSU5HX0NMSUVOVF9UWVBFICovXTogXCJtaXNzaW5nLWNsaWVudC10eXBlXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0NMSUVOVF9UWVBFICovLFxyXG4gICAgW1wiTUlTU0lOR19SRUNBUFRDSEFfVkVSU0lPTlwiIC8qIFNlcnZlckVycm9yLk1JU1NJTkdfUkVDQVBUQ0hBX1ZFUlNJT04gKi9dOiBcIm1pc3NpbmctcmVjYXB0Y2hhLXZlcnNpb25cIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfUkVDQVBUQ0hBX1ZFUlNJT04gKi8sXHJcbiAgICBbXCJJTlZBTElEX1JFQ0FQVENIQV9WRVJTSU9OXCIgLyogU2VydmVyRXJyb3IuSU5WQUxJRF9SRUNBUFRDSEFfVkVSU0lPTiAqL106IFwiaW52YWxpZC1yZWNhcHRjaGEtdmVyc2lvblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9SRUNBUFRDSEFfVkVSU0lPTiAqLyxcclxuICAgIFtcIklOVkFMSURfUkVRX1RZUEVcIiAvKiBTZXJ2ZXJFcnJvci5JTlZBTElEX1JFUV9UWVBFICovXTogXCJpbnZhbGlkLXJlcS10eXBlXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX1JFUV9UWVBFICovXHJcbn07XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfQVBJX1RJTUVPVVRfTVMgPSBuZXcgRGVsYXkoMzAwMDAsIDYwMDAwKTtcclxuZnVuY3Rpb24gX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIGlmIChhdXRoLnRlbmFudElkICYmICFyZXF1ZXN0LnRlbmFudElkKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCksIHsgdGVuYW50SWQ6IGF1dGgudGVuYW50SWQgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVxdWVzdDtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgbWV0aG9kLCBwYXRoLCByZXF1ZXN0LCBjdXN0b21FcnJvck1hcCA9IHt9KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIGN1c3RvbUVycm9yTWFwLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgbGV0IGJvZHkgPSB7fTtcclxuICAgICAgICBsZXQgcGFyYW1zID0ge307XHJcbiAgICAgICAgaWYgKHJlcXVlc3QpIHtcclxuICAgICAgICAgICAgaWYgKG1ldGhvZCA9PT0gXCJHRVRcIiAvKiBIdHRwTWV0aG9kLkdFVCAqLykge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zID0gcmVxdWVzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJvZHkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkocmVxdWVzdClcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcXVlcnkgPSBxdWVyeXN0cmluZyhPYmplY3QuYXNzaWduKHsga2V5OiBhdXRoLmNvbmZpZy5hcGlLZXkgfSwgcGFyYW1zKSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IGF3YWl0IGF1dGguX2dldEFkZGl0aW9uYWxIZWFkZXJzKCk7XHJcbiAgICAgICAgaGVhZGVyc1tcIkNvbnRlbnQtVHlwZVwiIC8qIEh0dHBIZWFkZXIuQ09OVEVOVF9UWVBFICovXSA9ICdhcHBsaWNhdGlvbi9qc29uJztcclxuICAgICAgICBpZiAoYXV0aC5sYW5ndWFnZUNvZGUpIHtcclxuICAgICAgICAgICAgaGVhZGVyc1tcIlgtRmlyZWJhc2UtTG9jYWxlXCIgLyogSHR0cEhlYWRlci5YX0ZJUkVCQVNFX0xPQ0FMRSAqL10gPSBhdXRoLmxhbmd1YWdlQ29kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIEZldGNoUHJvdmlkZXIuZmV0Y2goKShfZ2V0RmluYWxUYXJnZXQoYXV0aCwgYXV0aC5jb25maWcuYXBpSG9zdCwgcGF0aCwgcXVlcnkpLCBPYmplY3QuYXNzaWduKHsgbWV0aG9kLFxyXG4gICAgICAgICAgICBoZWFkZXJzLCByZWZlcnJlclBvbGljeTogJ25vLXJlZmVycmVyJyB9LCBib2R5KSk7XHJcbiAgICB9KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcGVyZm9ybUZldGNoV2l0aEVycm9ySGFuZGxpbmcoYXV0aCwgY3VzdG9tRXJyb3JNYXAsIGZldGNoRm4pIHtcclxuICAgIGF1dGguX2NhbkluaXRFbXVsYXRvciA9IGZhbHNlO1xyXG4gICAgY29uc3QgZXJyb3JNYXAgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIFNFUlZFUl9FUlJPUl9NQVApLCBjdXN0b21FcnJvck1hcCk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IG5ldHdvcmtUaW1lb3V0ID0gbmV3IE5ldHdvcmtUaW1lb3V0KGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgUHJvbWlzZS5yYWNlKFtcclxuICAgICAgICAgICAgZmV0Y2hGbigpLFxyXG4gICAgICAgICAgICBuZXR3b3JrVGltZW91dC5wcm9taXNlXHJcbiAgICAgICAgXSk7XHJcbiAgICAgICAgLy8gSWYgd2UndmUgcmVhY2hlZCB0aGlzIHBvaW50LCB0aGUgZmV0Y2ggc3VjY2VlZGVkIGFuZCB0aGUgbmV0d29ya1RpbWVvdXRcclxuICAgICAgICAvLyBkaWRuJ3QgdGhyb3c7IGNsZWFyIHRoZSBuZXR3b3JrIHRpbWVvdXQgZGVsYXkgc28gdGhhdCBOb2RlIHdvbid0IGhhbmdcclxuICAgICAgICBuZXR3b3JrVGltZW91dC5jbGVhck5ldHdvcmtUaW1lb3V0KCk7XHJcbiAgICAgICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICBpZiAoJ25lZWRDb25maXJtYXRpb24nIGluIGpzb24pIHtcclxuICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImFjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLk5FRURfQ09ORklSTUFUSU9OICovLCBqc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlc3BvbnNlLm9rICYmICEoJ2Vycm9yTWVzc2FnZScgaW4ganNvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGpzb247XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSByZXNwb25zZS5vayA/IGpzb24uZXJyb3JNZXNzYWdlIDoganNvbi5lcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICBjb25zdCBbc2VydmVyRXJyb3JDb2RlLCBzZXJ2ZXJFcnJvck1lc3NhZ2VdID0gZXJyb3JNZXNzYWdlLnNwbGl0KCcgOiAnKTtcclxuICAgICAgICAgICAgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gXCJGRURFUkFURURfVVNFUl9JRF9BTFJFQURZX0xJTktFRFwiIC8qIFNlcnZlckVycm9yLkZFREVSQVRFRF9VU0VSX0lEX0FMUkVBRFlfTElOS0VEICovKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBfbWFrZVRhZ2dlZEVycm9yKGF1dGgsIFwiY3JlZGVudGlhbC1hbHJlYWR5LWluLXVzZVwiIC8qIEF1dGhFcnJvckNvZGUuQ1JFREVOVElBTF9BTFJFQURZX0lOX1VTRSAqLywganNvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAoc2VydmVyRXJyb3JDb2RlID09PSBcIkVNQUlMX0VYSVNUU1wiIC8qIFNlcnZlckVycm9yLkVNQUlMX0VYSVNUUyAqLykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImVtYWlsLWFscmVhZHktaW4tdXNlXCIgLyogQXV0aEVycm9yQ29kZS5FTUFJTF9FWElTVFMgKi8sIGpzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHNlcnZlckVycm9yQ29kZSA9PT0gXCJVU0VSX0RJU0FCTEVEXCIgLyogU2VydmVyRXJyb3IuVVNFUl9ESVNBQkxFRCAqLykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcInVzZXItZGlzYWJsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlVTRVJfRElTQUJMRUQgKi8sIGpzb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnN0IGF1dGhFcnJvciA9IGVycm9yTWFwW3NlcnZlckVycm9yQ29kZV0gfHxcclxuICAgICAgICAgICAgICAgIHNlcnZlckVycm9yQ29kZVxyXG4gICAgICAgICAgICAgICAgICAgIC50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1tfXFxzXSsvZywgJy0nKTtcclxuICAgICAgICAgICAgaWYgKHNlcnZlckVycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgX2Vycm9yV2l0aEN1c3RvbU1lc3NhZ2UoYXV0aCwgYXV0aEVycm9yLCBzZXJ2ZXJFcnJvck1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgYXV0aEVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENoYW5naW5nIHRoaXMgdG8gYSBkaWZmZXJlbnQgZXJyb3IgY29kZSB3aWxsIGxvZyB1c2VyIG91dCB3aGVuIHRoZXJlIGlzIGEgbmV0d29yayBlcnJvclxyXG4gICAgICAgIC8vIGJlY2F1c2Ugd2UgdHJlYXQgYW55IGVycm9yIG90aGVyIHRoYW4gTkVUV09SS19SRVFVRVNUX0ZBSUxFRCBhcyB0b2tlbiBpcyBpbnZhbGlkLlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvYmxvYi80ZmJjNzM2MTBkNzBiZTRlMDg1MmU3ZGU2M2EzOWNiNzg5N2U4NTQ2L3BhY2thZ2VzL2F1dGgvc3JjL2NvcmUvYXV0aC9hdXRoX2ltcGwudHMjTDMwOS1MMzE2XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovLCB7ICdtZXNzYWdlJzogU3RyaW5nKGUpIH0pO1xyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwID0ge30pIHtcclxuICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gKGF3YWl0IF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBtZXRob2QsIHBhdGgsIHJlcXVlc3QsIGN1c3RvbUVycm9yTWFwKSk7XHJcbiAgICBpZiAoJ21mYVBlbmRpbmdDcmVkZW50aWFsJyBpbiBzZXJ2ZXJSZXNwb25zZSkge1xyXG4gICAgICAgIF9mYWlsKGF1dGgsIFwibXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLk1GQV9SRVFVSVJFRCAqLywge1xyXG4gICAgICAgICAgICBfc2VydmVyUmVzcG9uc2U6IHNlcnZlclJlc3BvbnNlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gc2VydmVyUmVzcG9uc2U7XHJcbn1cclxuZnVuY3Rpb24gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIGhvc3QsIHBhdGgsIHF1ZXJ5KSB7XHJcbiAgICBjb25zdCBiYXNlID0gYCR7aG9zdH0ke3BhdGh9PyR7cXVlcnl9YDtcclxuICAgIGlmICghYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm4gYCR7YXV0aC5jb25maWcuYXBpU2NoZW1lfTovLyR7YmFzZX1gO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9lbXVsYXRvclVybChhdXRoLmNvbmZpZywgYmFzZSk7XHJcbn1cclxuY2xhc3MgTmV0d29ya1RpbWVvdXQge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgLy8gTm9kZSB0aW1lcnMgYW5kIGJyb3dzZXIgdGltZXJzIGFyZSBmdW5kYW1lbnRhbGx5IGluY29tcGF0aWJsZSwgYnV0IHdlXHJcbiAgICAgICAgLy8gZG9uJ3QgY2FyZSBhYm91dCB0aGUgdmFsdWUgaGVyZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy50aW1lciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcm9taXNlID0gbmV3IFByb21pc2UoKF8sIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIEF1dGhFcnJvckNvZGUuTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLykpO1xyXG4gICAgICAgICAgICB9LCBERUZBVUxUX0FQSV9USU1FT1VUX01TLmdldCgpKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsZWFyTmV0d29ya1RpbWVvdXQoKSB7XHJcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9tYWtlVGFnZ2VkRXJyb3IoYXV0aCwgY29kZSwgcmVzcG9uc2UpIHtcclxuICAgIGNvbnN0IGVycm9yUGFyYW1zID0ge1xyXG4gICAgICAgIGFwcE5hbWU6IGF1dGgubmFtZVxyXG4gICAgfTtcclxuICAgIGlmIChyZXNwb25zZS5lbWFpbCkge1xyXG4gICAgICAgIGVycm9yUGFyYW1zLmVtYWlsID0gcmVzcG9uc2UuZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAocmVzcG9uc2UucGhvbmVOdW1iZXIpIHtcclxuICAgICAgICBlcnJvclBhcmFtcy5waG9uZU51bWJlciA9IHJlc3BvbnNlLnBob25lTnVtYmVyO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXJyb3IgPSBfY3JlYXRlRXJyb3IoYXV0aCwgY29kZSwgZXJyb3JQYXJhbXMpO1xyXG4gICAgLy8gV2Uga25vdyBjdXN0b21EYXRhIGlzIGRlZmluZWQgb24gZXJyb3IgYmVjYXVzZSBlcnJvclBhcmFtcyBpcyBkZWZpbmVkXHJcbiAgICBlcnJvci5jdXN0b21EYXRhLl90b2tlblJlc3BvbnNlID0gcmVzcG9uc2U7XHJcbiAgICByZXR1cm4gZXJyb3I7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlQWNjb3VudChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6ZGVsZXRlXCIgLyogRW5kcG9pbnQuREVMRVRFX0FDQ09VTlQgKi8sIHJlcXVlc3QpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUxpbmtlZEFjY291bnRzKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czp1cGRhdGVcIiAvKiBFbmRwb2ludC5TRVRfQUNDT1VOVF9JTkZPICovLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBnZXRBY2NvdW50SW5mbyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6bG9va3VwXCIgLyogRW5kcG9pbnQuR0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHV0Y1RpbWVzdGFtcCkge1xyXG4gICAgaWYgKCF1dGNUaW1lc3RhbXApIHtcclxuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgdHJ5IHtcclxuICAgICAgICAvLyBDb252ZXJ0IHRvIGRhdGUgb2JqZWN0LlxyXG4gICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShOdW1iZXIodXRjVGltZXN0YW1wKSk7XHJcbiAgICAgICAgLy8gVGVzdCBkYXRlIGlzIHZhbGlkLlxyXG4gICAgICAgIGlmICghaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnZlcnQgdG8gVVRDIGRhdGUgc3RyaW5nLlxyXG4gICAgICAgICAgICByZXR1cm4gZGF0ZS50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gRG8gbm90aGluZy4gdW5kZWZpbmVkIHdpbGwgYmUgcmV0dXJuZWQuXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgSlNPTiBXZWIgVG9rZW4gKEpXVCkgdXNlZCB0byBpZGVudGlmeSB0aGUgdXNlciB0byBhIEZpcmViYXNlIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFJldHVybnMgdGhlIGN1cnJlbnQgdG9rZW4gaWYgaXQgaGFzIG5vdCBleHBpcmVkIG9yIGlmIGl0IHdpbGwgbm90IGV4cGlyZSBpbiB0aGUgbmV4dCBmaXZlXHJcbiAqIG1pbnV0ZXMuIE90aGVyd2lzZSwgdGhpcyB3aWxsIHJlZnJlc2ggdGhlIHRva2VuIGFuZCByZXR1cm4gYSBuZXcgb25lLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gZm9yY2VSZWZyZXNoIC0gRm9yY2UgcmVmcmVzaCByZWdhcmRsZXNzIG9mIHRva2VuIGV4cGlyYXRpb24uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldElkVG9rZW4odXNlciwgZm9yY2VSZWZyZXNoID0gZmFsc2UpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgZGVzZXJpYWxpemVkIEpTT04gV2ViIFRva2VuIChKV1QpIHVzZWQgdG8gaWRlbnRpZnkgdGhlIHVzZXIgdG8gYSBGaXJlYmFzZSBzZXJ2aWNlLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBSZXR1cm5zIHRoZSBjdXJyZW50IHRva2VuIGlmIGl0IGhhcyBub3QgZXhwaXJlZCBvciBpZiBpdCB3aWxsIG5vdCBleHBpcmUgaW4gdGhlIG5leHQgZml2ZVxyXG4gKiBtaW51dGVzLiBPdGhlcndpc2UsIHRoaXMgd2lsbCByZWZyZXNoIHRoZSB0b2tlbiBhbmQgcmV0dXJuIGEgbmV3IG9uZS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGZvcmNlUmVmcmVzaCAtIEZvcmNlIHJlZnJlc2ggcmVnYXJkbGVzcyBvZiB0b2tlbiBleHBpcmF0aW9uLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRJZFRva2VuUmVzdWx0KHVzZXIsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCB0b2tlbiA9IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICBjb25zdCBjbGFpbXMgPSBfcGFyc2VUb2tlbih0b2tlbik7XHJcbiAgICBfYXNzZXJ0KGNsYWltcyAmJiBjbGFpbXMuZXhwICYmIGNsYWltcy5hdXRoX3RpbWUgJiYgY2xhaW1zLmlhdCwgdXNlckludGVybmFsLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGZpcmViYXNlID0gdHlwZW9mIGNsYWltcy5maXJlYmFzZSA9PT0gJ29iamVjdCcgPyBjbGFpbXMuZmlyZWJhc2UgOiB1bmRlZmluZWQ7XHJcbiAgICBjb25zdCBzaWduSW5Qcm92aWRlciA9IGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9wcm92aWRlciddO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBjbGFpbXMsXHJcbiAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgYXV0aFRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmF1dGhfdGltZSkpLFxyXG4gICAgICAgIGlzc3VlZEF0VGltZTogdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHNlY29uZHNTdHJpbmdUb01pbGxpc2Vjb25kcyhjbGFpbXMuaWF0KSksXHJcbiAgICAgICAgZXhwaXJhdGlvblRpbWU6IHV0Y1RpbWVzdGFtcFRvRGF0ZVN0cmluZyhzZWNvbmRzU3RyaW5nVG9NaWxsaXNlY29uZHMoY2xhaW1zLmV4cCkpLFxyXG4gICAgICAgIHNpZ25JblByb3ZpZGVyOiBzaWduSW5Qcm92aWRlciB8fCBudWxsLFxyXG4gICAgICAgIHNpZ25JblNlY29uZEZhY3RvcjogKGZpcmViYXNlID09PSBudWxsIHx8IGZpcmViYXNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmaXJlYmFzZVsnc2lnbl9pbl9zZWNvbmRfZmFjdG9yJ10pIHx8IG51bGxcclxuICAgIH07XHJcbn1cclxuZnVuY3Rpb24gc2Vjb25kc1N0cmluZ1RvTWlsbGlzZWNvbmRzKHNlY29uZHMpIHtcclxuICAgIHJldHVybiBOdW1iZXIoc2Vjb25kcykgKiAxMDAwO1xyXG59XHJcbmZ1bmN0aW9uIF9wYXJzZVRva2VuKHRva2VuKSB7XHJcbiAgICBjb25zdCBbYWxnb3JpdGhtLCBwYXlsb2FkLCBzaWduYXR1cmVdID0gdG9rZW4uc3BsaXQoJy4nKTtcclxuICAgIGlmIChhbGdvcml0aG0gPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHBheWxvYWQgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgIHNpZ25hdHVyZSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgX2xvZ0Vycm9yKCdKV1QgbWFsZm9ybWVkLCBjb250YWluZWQgZmV3ZXIgdGhhbiAzIHNlY3Rpb25zJyk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGRlY29kZWQgPSBiYXNlNjREZWNvZGUocGF5bG9hZCk7XHJcbiAgICAgICAgaWYgKCFkZWNvZGVkKSB7XHJcbiAgICAgICAgICAgIF9sb2dFcnJvcignRmFpbGVkIHRvIGRlY29kZSBiYXNlNjQgSldUIHBheWxvYWQnKTtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGRlY29kZWQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBfbG9nRXJyb3IoJ0NhdWdodCBlcnJvciBwYXJzaW5nIEpXVCBwYXlsb2FkIGFzIEpTT04nLCBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEV4dHJhY3QgZXhwaXJlc0luIFRUTCBmcm9tIGEgdG9rZW4gYnkgc3VidHJhY3RpbmcgdGhlIGV4cGlyYXRpb24gZnJvbSB0aGUgaXNzdWFuY2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfdG9rZW5FeHBpcmVzSW4odG9rZW4pIHtcclxuICAgIGNvbnN0IHBhcnNlZFRva2VuID0gX3BhcnNlVG9rZW4odG9rZW4pO1xyXG4gICAgX2Fzc2VydChwYXJzZWRUb2tlbiwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uZXhwICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgcGFyc2VkVG9rZW4uaWF0ICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIE51bWJlcihwYXJzZWRUb2tlbi5leHApIC0gTnVtYmVyKHBhcnNlZFRva2VuLmlhdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX2xvZ291dElmSW52YWxpZGF0ZWQodXNlciwgcHJvbWlzZSwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGlmIChieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIGF3YWl0IHByb21pc2U7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvciAmJiBpc1VzZXJJbnZhbGlkYXRlZChlKSkge1xyXG4gICAgICAgICAgICBpZiAodXNlci5hdXRoLmN1cnJlbnRVc2VyID09PSB1c2VyKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB1c2VyLmF1dGguc2lnbk91dCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNVc2VySW52YWxpZGF0ZWQoeyBjb2RlIH0pIHtcclxuICAgIHJldHVybiAoY29kZSA9PT0gYGF1dGgvJHtcInVzZXItZGlzYWJsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlVTRVJfRElTQUJMRUQgKi99YCB8fFxyXG4gICAgICAgIGNvZGUgPT09IGBhdXRoLyR7XCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRUQgKi99YCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUHJvYWN0aXZlUmVmcmVzaCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IGZhbHNlO1xyXG4gICAgICAgIC8vIE5vZGUgdGltZXJzIGFuZCBicm93c2VyIHRpbWVycyByZXR1cm4gZnVuZGFtZW50YWxseSBkaWZmZXJlbnQgdHlwZXMuXHJcbiAgICAgICAgLy8gV2UgZG9uJ3QgYWN0dWFsbHkgY2FyZSB3aGF0IHRoZSB2YWx1ZSBpcyBidXQgVFMgd29uJ3QgYWNjZXB0IHVua25vd24gYW5kXHJcbiAgICAgICAgLy8gd2UgY2FuJ3QgY2FzdCBwcm9wZXJseSBpbiBib3RoIGVudmlyb25tZW50cy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSAzMDAwMCAvKiBEdXJhdGlvbi5SRVRSWV9CQUNLT0ZGX01JTiAqLztcclxuICAgIH1cclxuICAgIF9zdGFydCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc1J1bm5pbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlzUnVubmluZyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5zY2hlZHVsZSgpO1xyXG4gICAgfVxyXG4gICAgX3N0b3AoKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaXNSdW5uaW5nID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRJbnRlcnZhbCh3YXNFcnJvcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAod2FzRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc3QgaW50ZXJ2YWwgPSB0aGlzLmVycm9yQmFja29mZjtcclxuICAgICAgICAgICAgdGhpcy5lcnJvckJhY2tvZmYgPSBNYXRoLm1pbih0aGlzLmVycm9yQmFja29mZiAqIDIsIDk2MDAwMCAvKiBEdXJhdGlvbi5SRVRSWV9CQUNLT0ZGX01BWCAqLyk7XHJcbiAgICAgICAgICAgIHJldHVybiBpbnRlcnZhbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IHRoZSBlcnJvciBiYWNrb2ZmXHJcbiAgICAgICAgICAgIHRoaXMuZXJyb3JCYWNrb2ZmID0gMzAwMDAgLyogRHVyYXRpb24uUkVUUllfQkFDS09GRl9NSU4gKi87XHJcbiAgICAgICAgICAgIGNvbnN0IGV4cFRpbWUgPSAoX2EgPSB0aGlzLnVzZXIuc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAwO1xyXG4gICAgICAgICAgICBjb25zdCBpbnRlcnZhbCA9IGV4cFRpbWUgLSBEYXRlLm5vdygpIC0gMzAwMDAwIC8qIER1cmF0aW9uLk9GRlNFVCAqLztcclxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIGludGVydmFsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzY2hlZHVsZSh3YXNFcnJvciA9IGZhbHNlKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLmlzUnVubmluZykge1xyXG4gICAgICAgICAgICAvLyBKdXN0IGluIGNhc2UuLi5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpbnRlcnZhbCA9IHRoaXMuZ2V0SW50ZXJ2YWwod2FzRXJyb3IpO1xyXG4gICAgICAgIHRoaXMudGltZXJJZCA9IHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLml0ZXJhdGlvbigpO1xyXG4gICAgICAgIH0sIGludGVydmFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGl0ZXJhdGlvbigpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbih0cnVlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gT25seSByZXRyeSBvbiBuZXR3b3JrIGVycm9yc1xyXG4gICAgICAgICAgICBpZiAoKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5jb2RlKSA9PT1cclxuICAgICAgICAgICAgICAgIGBhdXRoLyR7XCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2NoZWR1bGUoLyogd2FzRXJyb3IgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNjaGVkdWxlKCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlck1ldGFkYXRhIHtcclxuICAgIGNvbnN0cnVjdG9yKGNyZWF0ZWRBdCwgbGFzdExvZ2luQXQpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZWRBdCA9IGNyZWF0ZWRBdDtcclxuICAgICAgICB0aGlzLmxhc3RMb2dpbkF0ID0gbGFzdExvZ2luQXQ7XHJcbiAgICAgICAgdGhpcy5faW5pdGlhbGl6ZVRpbWUoKTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplVGltZSgpIHtcclxuICAgICAgICB0aGlzLmxhc3RTaWduSW5UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMubGFzdExvZ2luQXQpO1xyXG4gICAgICAgIHRoaXMuY3JlYXRpb25UaW1lID0gdXRjVGltZXN0YW1wVG9EYXRlU3RyaW5nKHRoaXMuY3JlYXRlZEF0KTtcclxuICAgIH1cclxuICAgIF9jb3B5KG1ldGFkYXRhKSB7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVkQXQgPSBtZXRhZGF0YS5jcmVhdGVkQXQ7XHJcbiAgICAgICAgdGhpcy5sYXN0TG9naW5BdCA9IG1ldGFkYXRhLmxhc3RMb2dpbkF0O1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemVUaW1lKCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgY3JlYXRlZEF0OiB0aGlzLmNyZWF0ZWRBdCxcclxuICAgICAgICAgICAgbGFzdExvZ2luQXQ6IHRoaXMubGFzdExvZ2luQXRcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGggPSB1c2VyLmF1dGg7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIGdldEFjY291bnRJbmZvKGF1dGgsIHsgaWRUb2tlbiB9KSk7XHJcbiAgICBfYXNzZXJ0KHJlc3BvbnNlID09PSBudWxsIHx8IHJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNwb25zZS51c2Vycy5sZW5ndGgsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIGNvbnN0IGNvcmVBY2NvdW50ID0gcmVzcG9uc2UudXNlcnNbMF07XHJcbiAgICB1c2VyLl9ub3RpZnlSZWxvYWRMaXN0ZW5lcihjb3JlQWNjb3VudCk7XHJcbiAgICBjb25zdCBuZXdQcm92aWRlckRhdGEgPSAoKF9hID0gY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aClcclxuICAgICAgICA/IGV4dHJhY3RQcm92aWRlckRhdGEoY29yZUFjY291bnQucHJvdmlkZXJVc2VySW5mbylcclxuICAgICAgICA6IFtdO1xyXG4gICAgY29uc3QgcHJvdmlkZXJEYXRhID0gbWVyZ2VQcm92aWRlckRhdGEodXNlci5wcm92aWRlckRhdGEsIG5ld1Byb3ZpZGVyRGF0YSk7XHJcbiAgICAvLyBQcmVzZXJ2ZXMgdGhlIG5vbi1ub255bW91cyBzdGF0dXMgb2YgdGhlIHN0b3JlZCB1c2VyLCBldmVuIGlmIG5vIG1vcmVcclxuICAgIC8vIGNyZWRlbnRpYWxzIChmZWRlcmF0ZWQgb3IgZW1haWwvcGFzc3dvcmQpIGFyZSBsaW5rZWQgdG8gdGhlIHVzZXIuIElmXHJcbiAgICAvLyB0aGUgdXNlciB3YXMgcHJldmlvdXNseSBhbm9ueW1vdXMsIHRoZW4gdXNlIHByb3ZpZGVyIGRhdGEgdG8gdXBkYXRlLlxyXG4gICAgLy8gT24gdGhlIG90aGVyIGhhbmQsIGlmIGl0IHdhcyBub3QgYW5vbnltb3VzIGJlZm9yZSwgaXQgc2hvdWxkIG5ldmVyIGJlXHJcbiAgICAvLyBjb25zaWRlcmVkIGFub255bW91cyBub3cuXHJcbiAgICBjb25zdCBvbGRJc0Fub255bW91cyA9IHVzZXIuaXNBbm9ueW1vdXM7XHJcbiAgICBjb25zdCBuZXdJc0Fub255bW91cyA9ICEodXNlci5lbWFpbCAmJiBjb3JlQWNjb3VudC5wYXNzd29yZEhhc2gpICYmICEocHJvdmlkZXJEYXRhID09PSBudWxsIHx8IHByb3ZpZGVyRGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvdmlkZXJEYXRhLmxlbmd0aCk7XHJcbiAgICBjb25zdCBpc0Fub255bW91cyA9ICFvbGRJc0Fub255bW91cyA/IGZhbHNlIDogbmV3SXNBbm9ueW1vdXM7XHJcbiAgICBjb25zdCB1cGRhdGVzID0ge1xyXG4gICAgICAgIHVpZDogY29yZUFjY291bnQubG9jYWxJZCxcclxuICAgICAgICBkaXNwbGF5TmFtZTogY29yZUFjY291bnQuZGlzcGxheU5hbWUgfHwgbnVsbCxcclxuICAgICAgICBwaG90b1VSTDogY29yZUFjY291bnQucGhvdG9VcmwgfHwgbnVsbCxcclxuICAgICAgICBlbWFpbDogY29yZUFjY291bnQuZW1haWwgfHwgbnVsbCxcclxuICAgICAgICBlbWFpbFZlcmlmaWVkOiBjb3JlQWNjb3VudC5lbWFpbFZlcmlmaWVkIHx8IGZhbHNlLFxyXG4gICAgICAgIHBob25lTnVtYmVyOiBjb3JlQWNjb3VudC5waG9uZU51bWJlciB8fCBudWxsLFxyXG4gICAgICAgIHRlbmFudElkOiBjb3JlQWNjb3VudC50ZW5hbnRJZCB8fCBudWxsLFxyXG4gICAgICAgIHByb3ZpZGVyRGF0YSxcclxuICAgICAgICBtZXRhZGF0YTogbmV3IFVzZXJNZXRhZGF0YShjb3JlQWNjb3VudC5jcmVhdGVkQXQsIGNvcmVBY2NvdW50Lmxhc3RMb2dpbkF0KSxcclxuICAgICAgICBpc0Fub255bW91c1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5hc3NpZ24odXNlciwgdXBkYXRlcyk7XHJcbn1cclxuLyoqXHJcbiAqIFJlbG9hZHMgdXNlciBhY2NvdW50IGRhdGEsIGlmIHNpZ25lZCBpbi5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVsb2FkKHVzZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXJJbnRlcm5hbCk7XHJcbiAgICAvLyBFdmVuIHRob3VnaCB0aGUgY3VycmVudCB1c2VyIGhhc24ndCBjaGFuZ2VkLCB1cGRhdGVcclxuICAgIC8vIGN1cnJlbnQgdXNlciB3aWxsIHRyaWdnZXIgYSBwZXJzaXN0ZW5jZSB1cGRhdGUgdy8gdGhlXHJcbiAgICAvLyBuZXcgaW5mby5cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9wZXJzaXN0VXNlcklmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG4gICAgdXNlckludGVybmFsLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh1c2VySW50ZXJuYWwpO1xyXG59XHJcbmZ1bmN0aW9uIG1lcmdlUHJvdmlkZXJEYXRhKG9yaWdpbmFsLCBuZXdEYXRhKSB7XHJcbiAgICBjb25zdCBkZWR1cGVkID0gb3JpZ2luYWwuZmlsdGVyKG8gPT4gIW5ld0RhdGEuc29tZShuID0+IG4ucHJvdmlkZXJJZCA9PT0gby5wcm92aWRlcklkKSk7XHJcbiAgICByZXR1cm4gWy4uLmRlZHVwZWQsIC4uLm5ld0RhdGFdO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RQcm92aWRlckRhdGEocHJvdmlkZXJzKSB7XHJcbiAgICByZXR1cm4gcHJvdmlkZXJzLm1hcCgoX2EpID0+IHtcclxuICAgICAgICB2YXIgeyBwcm92aWRlcklkIH0gPSBfYSwgcHJvdmlkZXIgPSBfX3Jlc3QoX2EsIFtcInByb3ZpZGVySWRcIl0pO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHVpZDogcHJvdmlkZXIucmF3SWQgfHwgJycsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBwcm92aWRlci5kaXNwbGF5TmFtZSB8fCBudWxsLFxyXG4gICAgICAgICAgICBlbWFpbDogcHJvdmlkZXIuZW1haWwgfHwgbnVsbCxcclxuICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHByb3ZpZGVyLnBob25lTnVtYmVyIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHBob3RvVVJMOiBwcm92aWRlci5waG90b1VybCB8fCBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH0pO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlcXVlc3RTdHNUb2tlbihhdXRoLCByZWZyZXNoVG9rZW4pIHtcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3BlcmZvcm1GZXRjaFdpdGhFcnJvckhhbmRsaW5nKGF1dGgsIHt9LCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgYm9keSA9IHF1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgJ2dyYW50X3R5cGUnOiAncmVmcmVzaF90b2tlbicsXHJcbiAgICAgICAgICAgICdyZWZyZXNoX3Rva2VuJzogcmVmcmVzaFRva2VuXHJcbiAgICAgICAgfSkuc2xpY2UoMSk7XHJcbiAgICAgICAgY29uc3QgeyB0b2tlbkFwaUhvc3QsIGFwaUtleSB9ID0gYXV0aC5jb25maWc7XHJcbiAgICAgICAgY29uc3QgdXJsID0gX2dldEZpbmFsVGFyZ2V0KGF1dGgsIHRva2VuQXBpSG9zdCwgXCIvdjEvdG9rZW5cIiAvKiBFbmRwb2ludC5UT0tFTiAqLywgYGtleT0ke2FwaUtleX1gKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJzID0gYXdhaXQgYXV0aC5fZ2V0QWRkaXRpb25hbEhlYWRlcnMoKTtcclxuICAgICAgICBoZWFkZXJzW1wiQ29udGVudC1UeXBlXCIgLyogSHR0cEhlYWRlci5DT05URU5UX1RZUEUgKi9dID0gJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZCc7XHJcbiAgICAgICAgcmV0dXJuIEZldGNoUHJvdmlkZXIuZmV0Y2goKSh1cmwsIHtcclxuICAgICAgICAgICAgbWV0aG9kOiBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sXHJcbiAgICAgICAgICAgIGhlYWRlcnMsXHJcbiAgICAgICAgICAgIGJvZHlcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG4gICAgLy8gVGhlIHJlc3BvbnNlIGNvbWVzIGJhY2sgaW4gc25ha2VfY2FzZS4gQ29udmVydCB0byBjYW1lbDpcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgYWNjZXNzVG9rZW46IHJlc3BvbnNlLmFjY2Vzc190b2tlbixcclxuICAgICAgICBleHBpcmVzSW46IHJlc3BvbnNlLmV4cGlyZXNfaW4sXHJcbiAgICAgICAgcmVmcmVzaFRva2VuOiByZXNwb25zZS5yZWZyZXNoX3Rva2VuXHJcbiAgICB9O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBXZSBuZWVkIHRvIG1hcmsgdGhpcyBjbGFzcyBhcyBpbnRlcm5hbCBleHBsaWNpdGx5IHRvIGV4Y2x1ZGUgaXQgaW4gdGhlIHB1YmxpYyB0eXBpbmdzLCBiZWNhdXNlXHJcbiAqIGl0IHJlZmVyZW5jZXMgQXV0aEludGVybmFsIHdoaWNoIGhhcyBhIGNpcmN1bGFyIGRlcGVuZGVuY3kgd2l0aCBVc2VySW50ZXJuYWwuXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY2xhc3MgU3RzVG9rZW5NYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gbnVsbDtcclxuICAgIH1cclxuICAgIGdldCBpc0V4cGlyZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuICghdGhpcy5leHBpcmF0aW9uVGltZSB8fFxyXG4gICAgICAgICAgICBEYXRlLm5vdygpID4gdGhpcy5leHBpcmF0aW9uVGltZSAtIDMwMDAwIC8qIEJ1ZmZlci5UT0tFTl9SRUZSRVNIICovKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSkge1xyXG4gICAgICAgIF9hc3NlcnQocmVzcG9uc2UuaWRUb2tlbiwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHJlc3BvbnNlLmlkVG9rZW4gIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVzcG9uc2UucmVmcmVzaFRva2VuICE9PSAndW5kZWZpbmVkJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGNvbnN0IGV4cGlyZXNJbiA9ICdleHBpcmVzSW4nIGluIHJlc3BvbnNlICYmIHR5cGVvZiByZXNwb25zZS5leHBpcmVzSW4gIT09ICd1bmRlZmluZWQnXHJcbiAgICAgICAgICAgID8gTnVtYmVyKHJlc3BvbnNlLmV4cGlyZXNJbilcclxuICAgICAgICAgICAgOiBfdG9rZW5FeHBpcmVzSW4ocmVzcG9uc2UuaWRUb2tlbik7XHJcbiAgICAgICAgdGhpcy51cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKHJlc3BvbnNlLmlkVG9rZW4sIHJlc3BvbnNlLnJlZnJlc2hUb2tlbiwgZXhwaXJlc0luKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFRva2VuKGF1dGgsIGZvcmNlUmVmcmVzaCA9IGZhbHNlKSB7XHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5hY2Nlc3NUb2tlbiB8fCB0aGlzLnJlZnJlc2hUb2tlbiwgYXV0aCwgXCJ1c2VyLXRva2VuLWV4cGlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLlRPS0VOX0VYUElSRUQgKi8pO1xyXG4gICAgICAgIGlmICghZm9yY2VSZWZyZXNoICYmIHRoaXMuYWNjZXNzVG9rZW4gJiYgIXRoaXMuaXNFeHBpcmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoKGF1dGgsIHRoaXMucmVmcmVzaFRva2VuKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgY2xlYXJSZWZyZXNoVG9rZW4oKSB7XHJcbiAgICAgICAgdGhpcy5yZWZyZXNoVG9rZW4gPSBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVmcmVzaChhdXRoLCBvbGRUb2tlbikge1xyXG4gICAgICAgIGNvbnN0IHsgYWNjZXNzVG9rZW4sIHJlZnJlc2hUb2tlbiwgZXhwaXJlc0luIH0gPSBhd2FpdCByZXF1ZXN0U3RzVG9rZW4oYXV0aCwgb2xkVG9rZW4pO1xyXG4gICAgICAgIHRoaXMudXBkYXRlVG9rZW5zQW5kRXhwaXJhdGlvbihhY2Nlc3NUb2tlbiwgcmVmcmVzaFRva2VuLCBOdW1iZXIoZXhwaXJlc0luKSk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVUb2tlbnNBbmRFeHBpcmF0aW9uKGFjY2Vzc1Rva2VuLCByZWZyZXNoVG9rZW4sIGV4cGlyZXNJblNlYykge1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5leHBpcmF0aW9uVGltZSA9IERhdGUubm93KCkgKyBleHBpcmVzSW5TZWMgKiAxMDAwO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKGFwcE5hbWUsIG9iamVjdCkge1xyXG4gICAgICAgIGNvbnN0IHsgcmVmcmVzaFRva2VuLCBhY2Nlc3NUb2tlbiwgZXhwaXJhdGlvblRpbWUgfSA9IG9iamVjdDtcclxuICAgICAgICBjb25zdCBtYW5hZ2VyID0gbmV3IFN0c1Rva2VuTWFuYWdlcigpO1xyXG4gICAgICAgIGlmIChyZWZyZXNoVG9rZW4pIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgcmVmcmVzaFRva2VuID09PSAnc3RyaW5nJywgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8sIHtcclxuICAgICAgICAgICAgICAgIGFwcE5hbWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIG1hbmFnZXIucmVmcmVzaFRva2VuID0gcmVmcmVzaFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgYWNjZXNzVG9rZW4gPT09ICdzdHJpbmcnLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5hY2Nlc3NUb2tlbiA9IGFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoZXhwaXJhdGlvblRpbWUpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0eXBlb2YgZXhwaXJhdGlvblRpbWUgPT09ICdudW1iZXInLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgYXBwTmFtZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgbWFuYWdlci5leHBpcmF0aW9uVGltZSA9IGV4cGlyYXRpb25UaW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICByZWZyZXNoVG9rZW46IHRoaXMucmVmcmVzaFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlbjogdGhpcy5hY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgZXhwaXJhdGlvblRpbWU6IHRoaXMuZXhwaXJhdGlvblRpbWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgX2Fzc2lnbihzdHNUb2tlbk1hbmFnZXIpIHtcclxuICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuO1xyXG4gICAgICAgIHRoaXMucmVmcmVzaFRva2VuID0gc3RzVG9rZW5NYW5hZ2VyLnJlZnJlc2hUb2tlbjtcclxuICAgICAgICB0aGlzLmV4cGlyYXRpb25UaW1lID0gc3RzVG9rZW5NYW5hZ2VyLmV4cGlyYXRpb25UaW1lO1xyXG4gICAgfVxyXG4gICAgX2Nsb25lKCkge1xyXG4gICAgICAgIHJldHVybiBPYmplY3QuYXNzaWduKG5ldyBTdHNUb2tlbk1hbmFnZXIoKSwgdGhpcy50b0pTT04oKSk7XHJcbiAgICB9XHJcbiAgICBfcGVyZm9ybVJlZnJlc2goKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoYXNzZXJ0aW9uLCBhcHBOYW1lKSB7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhc3NlcnRpb24gPT09ICdzdHJpbmcnIHx8IHR5cGVvZiBhc3NlcnRpb24gPT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLywgeyBhcHBOYW1lIH0pO1xyXG59XHJcbmNsYXNzIFVzZXJJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKF9hKSB7XHJcbiAgICAgICAgdmFyIHsgdWlkLCBhdXRoLCBzdHNUb2tlbk1hbmFnZXIgfSA9IF9hLCBvcHQgPSBfX3Jlc3QoX2EsIFtcInVpZFwiLCBcImF1dGhcIiwgXCJzdHNUb2tlbk1hbmFnZXJcIl0pO1xyXG4gICAgICAgIC8vIEZvciB0aGUgdXNlciBvYmplY3QsIHByb3ZpZGVyIGlzIGFsd2F5cyBGaXJlYmFzZS5cclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBcImZpcmViYXNlXCIgLyogUHJvdmlkZXJJZC5GSVJFQkFTRSAqLztcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2ggPSBuZXcgUHJvYWN0aXZlUmVmcmVzaCh0aGlzKTtcclxuICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnVpZCA9IHVpZDtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyID0gc3RzVG9rZW5NYW5hZ2VyO1xyXG4gICAgICAgIHRoaXMuYWNjZXNzVG9rZW4gPSBzdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5TmFtZSA9IG9wdC5kaXNwbGF5TmFtZSB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuZW1haWwgPSBvcHQuZW1haWwgfHwgbnVsbDtcclxuICAgICAgICB0aGlzLmVtYWlsVmVyaWZpZWQgPSBvcHQuZW1haWxWZXJpZmllZCB8fCBmYWxzZTtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gb3B0LnBob25lTnVtYmVyIHx8IG51bGw7XHJcbiAgICAgICAgdGhpcy5waG90b1VSTCA9IG9wdC5waG90b1VSTCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMuaXNBbm9ueW1vdXMgPSBvcHQuaXNBbm9ueW1vdXMgfHwgZmFsc2U7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IG9wdC50ZW5hbnRJZCB8fCBudWxsO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJEYXRhID0gb3B0LnByb3ZpZGVyRGF0YSA/IFsuLi5vcHQucHJvdmlkZXJEYXRhXSA6IFtdO1xyXG4gICAgICAgIHRoaXMubWV0YWRhdGEgPSBuZXcgVXNlck1ldGFkYXRhKG9wdC5jcmVhdGVkQXQgfHwgdW5kZWZpbmVkLCBvcHQubGFzdExvZ2luQXQgfHwgdW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldElkVG9rZW4oZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLCB0aGlzLnN0c1Rva2VuTWFuYWdlci5nZXRUb2tlbih0aGlzLmF1dGgsIGZvcmNlUmVmcmVzaCkpO1xyXG4gICAgICAgIF9hc3NlcnQoYWNjZXNzVG9rZW4sIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIGlmICh0aGlzLmFjY2Vzc1Rva2VuICE9PSBhY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLmFjY2Vzc1Rva2VuID0gYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHRoaXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYWNjZXNzVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiBnZXRJZFRva2VuUmVzdWx0KHRoaXMsIGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICByZWxvYWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHJlbG9hZCh0aGlzKTtcclxuICAgIH1cclxuICAgIF9hc3NpZ24odXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzID09PSB1c2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnVpZCA9PT0gdXNlci51aWQsIHRoaXMuYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuZGlzcGxheU5hbWUgPSB1c2VyLmRpc3BsYXlOYW1lO1xyXG4gICAgICAgIHRoaXMucGhvdG9VUkwgPSB1c2VyLnBob3RvVVJMO1xyXG4gICAgICAgIHRoaXMuZW1haWwgPSB1c2VyLmVtYWlsO1xyXG4gICAgICAgIHRoaXMuZW1haWxWZXJpZmllZCA9IHVzZXIuZW1haWxWZXJpZmllZDtcclxuICAgICAgICB0aGlzLnBob25lTnVtYmVyID0gdXNlci5waG9uZU51bWJlcjtcclxuICAgICAgICB0aGlzLmlzQW5vbnltb3VzID0gdXNlci5pc0Fub255bW91cztcclxuICAgICAgICB0aGlzLnRlbmFudElkID0gdXNlci50ZW5hbnRJZDtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyRGF0YSA9IHVzZXIucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSk7XHJcbiAgICAgICAgdGhpcy5tZXRhZGF0YS5fY29weSh1c2VyLm1ldGFkYXRhKTtcclxuICAgICAgICB0aGlzLnN0c1Rva2VuTWFuYWdlci5fYXNzaWduKHVzZXIuc3RzVG9rZW5NYW5hZ2VyKTtcclxuICAgIH1cclxuICAgIF9jbG9uZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgbmV3VXNlciA9IG5ldyBVc2VySW1wbChPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIHRoaXMpLCB7IGF1dGgsIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIuX2Nsb25lKCkgfSkpO1xyXG4gICAgICAgIG5ld1VzZXIubWV0YWRhdGEuX2NvcHkodGhpcy5tZXRhZGF0YSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld1VzZXI7XHJcbiAgICB9XHJcbiAgICBfb25SZWxvYWQoY2FsbGJhY2spIHtcclxuICAgICAgICAvLyBUaGVyZSBzaG91bGQgb25seSBldmVyIGJlIG9uZSBsaXN0ZW5lciwgYW5kIHRoYXQgaXMgYSBzaW5nbGUgaW5zdGFuY2Ugb2YgTXVsdGlGYWN0b3JVc2VyXHJcbiAgICAgICAgX2Fzc2VydCghdGhpcy5yZWxvYWRMaXN0ZW5lciwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5yZWxvYWRMaXN0ZW5lciA9IGNhbGxiYWNrO1xyXG4gICAgICAgIGlmICh0aGlzLnJlbG9hZFVzZXJJbmZvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX25vdGlmeVJlbG9hZExpc3RlbmVyKHRoaXMucmVsb2FkVXNlckluZm8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfbm90aWZ5UmVsb2FkTGlzdGVuZXIodXNlckluZm8pIHtcclxuICAgICAgICBpZiAodGhpcy5yZWxvYWRMaXN0ZW5lcikge1xyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZExpc3RlbmVyKHVzZXJJbmZvKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vIGxpc3RlbmVyIGlzIHN1YnNjcmliZWQgeWV0LCBzYXZlIHRoZSByZXN1bHQgc28gaXQncyBhdmFpbGFibGUgd2hlbiB0aGV5IGRvIHN1YnNjcmliZVxyXG4gICAgICAgICAgICB0aGlzLnJlbG9hZFVzZXJJbmZvID0gdXNlckluZm87XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0YXJ0UHJvYWN0aXZlUmVmcmVzaCgpIHtcclxuICAgICAgICB0aGlzLnByb2FjdGl2ZVJlZnJlc2guX3N0YXJ0KCk7XHJcbiAgICB9XHJcbiAgICBfc3RvcFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5wcm9hY3RpdmVSZWZyZXNoLl9zdG9wKCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIHJlbG9hZCA9IGZhbHNlKSB7XHJcbiAgICAgICAgbGV0IHRva2Vuc1JlZnJlc2hlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChyZXNwb25zZS5pZFRva2VuICYmXHJcbiAgICAgICAgICAgIHJlc3BvbnNlLmlkVG9rZW4gIT09IHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIHRva2Vuc1JlZnJlc2hlZCA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZWxvYWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHRoaXMuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodGhpcyk7XHJcbiAgICAgICAgaWYgKHRva2Vuc1JlZnJlc2hlZCkge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX25vdGlmeUxpc3RlbmVyc0lmQ3VycmVudCh0aGlzKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgaWRUb2tlbiA9IGF3YWl0IHRoaXMuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMsIGRlbGV0ZUFjY291bnQodGhpcy5hdXRoLCB7IGlkVG9rZW4gfSkpO1xyXG4gICAgICAgIHRoaXMuc3RzVG9rZW5NYW5hZ2VyLmNsZWFyUmVmcmVzaFRva2VuKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRGV0ZXJtaW5lIGlmIGNhbmNlbGxhYmxlLXByb21pc2VzIGFyZSBuZWNlc3NhcnkgdG8gdXNlIGluIHRoaXMgY2xhc3Mgc28gdGhhdCBkZWxldGUoKVxyXG4gICAgICAgIC8vICAgICAgIGNhbmNlbHMgcGVuZGluZyBhY3Rpb25zLi4uXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXV0aC5zaWduT3V0KCk7XHJcbiAgICB9XHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7IHVpZDogdGhpcy51aWQsIGVtYWlsOiB0aGlzLmVtYWlsIHx8IHVuZGVmaW5lZCwgZW1haWxWZXJpZmllZDogdGhpcy5lbWFpbFZlcmlmaWVkLCBkaXNwbGF5TmFtZTogdGhpcy5kaXNwbGF5TmFtZSB8fCB1bmRlZmluZWQsIGlzQW5vbnltb3VzOiB0aGlzLmlzQW5vbnltb3VzLCBwaG90b1VSTDogdGhpcy5waG90b1VSTCB8fCB1bmRlZmluZWQsIHBob25lTnVtYmVyOiB0aGlzLnBob25lTnVtYmVyIHx8IHVuZGVmaW5lZCwgdGVuYW50SWQ6IHRoaXMudGVuYW50SWQgfHwgdW5kZWZpbmVkLCBwcm92aWRlckRhdGE6IHRoaXMucHJvdmlkZXJEYXRhLm1hcCh1c2VySW5mbyA9PiAoT2JqZWN0LmFzc2lnbih7fSwgdXNlckluZm8pKSksIHN0c1Rva2VuTWFuYWdlcjogdGhpcy5zdHNUb2tlbk1hbmFnZXIudG9KU09OKCksIFxyXG4gICAgICAgICAgICAvLyBSZWRpcmVjdCBldmVudCBJRCBtdXN0IGJlIG1haW50YWluZWQgaW4gY2FzZSB0aGVyZSBpcyBhIHBlbmRpbmdcclxuICAgICAgICAgICAgLy8gcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgICAgIF9yZWRpcmVjdEV2ZW50SWQ6IHRoaXMuX3JlZGlyZWN0RXZlbnRJZCB9LCB0aGlzLm1ldGFkYXRhLnRvSlNPTigpKSwgeyBcclxuICAgICAgICAgICAgLy8gUmVxdWlyZWQgZm9yIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgbGVnYWN5IFNESyAoZ28vZmlyZWJhc2UtYXV0aC1zZGstcGVyc2lzdGVuY2UtcGFyc2luZyk6XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hdXRoLmNvbmZpZy5hcGlLZXksIGFwcE5hbWU6IHRoaXMuYXV0aC5uYW1lIH0pO1xyXG4gICAgfVxyXG4gICAgZ2V0IHJlZnJlc2hUb2tlbigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdHNUb2tlbk1hbmFnZXIucmVmcmVzaFRva2VuIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIF9mcm9tSlNPTihhdXRoLCBvYmplY3QpIHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oO1xyXG4gICAgICAgIGNvbnN0IGRpc3BsYXlOYW1lID0gKF9hID0gb2JqZWN0LmRpc3BsYXlOYW1lKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgZW1haWwgPSAoX2IgPSBvYmplY3QuZW1haWwpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBwaG9uZU51bWJlciA9IChfYyA9IG9iamVjdC5waG9uZU51bWJlcikgIT09IG51bGwgJiYgX2MgIT09IHZvaWQgMCA/IF9jIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIGNvbnN0IHBob3RvVVJMID0gKF9kID0gb2JqZWN0LnBob3RvVVJMKSAhPT0gbnVsbCAmJiBfZCAhPT0gdm9pZCAwID8gX2QgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgdGVuYW50SWQgPSAoX2UgPSBvYmplY3QudGVuYW50SWQpICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBfcmVkaXJlY3RFdmVudElkID0gKF9mID0gb2JqZWN0Ll9yZWRpcmVjdEV2ZW50SWQpICE9PSBudWxsICYmIF9mICE9PSB2b2lkIDAgPyBfZiA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCBjcmVhdGVkQXQgPSAoX2cgPSBvYmplY3QuY3JlYXRlZEF0KSAhPT0gbnVsbCAmJiBfZyAhPT0gdm9pZCAwID8gX2cgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgY29uc3QgbGFzdExvZ2luQXQgPSAoX2ggPSBvYmplY3QubGFzdExvZ2luQXQpICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IHVuZGVmaW5lZDtcclxuICAgICAgICBjb25zdCB7IHVpZCwgZW1haWxWZXJpZmllZCwgaXNBbm9ueW1vdXMsIHByb3ZpZGVyRGF0YSwgc3RzVG9rZW5NYW5hZ2VyOiBwbGFpbk9iamVjdFRva2VuTWFuYWdlciB9ID0gb2JqZWN0O1xyXG4gICAgICAgIF9hc3NlcnQodWlkICYmIHBsYWluT2JqZWN0VG9rZW5NYW5hZ2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3Qgc3RzVG9rZW5NYW5hZ2VyID0gU3RzVG9rZW5NYW5hZ2VyLmZyb21KU09OKHRoaXMubmFtZSwgcGxhaW5PYmplY3RUb2tlbk1hbmFnZXIpO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIHVpZCA9PT0gJ3N0cmluZycsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChkaXNwbGF5TmFtZSwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChlbWFpbCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBlbWFpbFZlcmlmaWVkID09PSAnYm9vbGVhbicsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBpc0Fub255bW91cyA9PT0gJ2Jvb2xlYW4nLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQocGhvbmVOdW1iZXIsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQocGhvdG9VUkwsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQodGVuYW50SWQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQoX3JlZGlyZWN0RXZlbnRJZCwgYXV0aC5uYW1lKTtcclxuICAgICAgICBhc3NlcnRTdHJpbmdPclVuZGVmaW5lZChjcmVhdGVkQXQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgYXNzZXJ0U3RyaW5nT3JVbmRlZmluZWQobGFzdExvZ2luQXQsIGF1dGgubmFtZSk7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IG5ldyBVc2VySW1wbCh7XHJcbiAgICAgICAgICAgIHVpZCxcclxuICAgICAgICAgICAgYXV0aCxcclxuICAgICAgICAgICAgZW1haWwsXHJcbiAgICAgICAgICAgIGVtYWlsVmVyaWZpZWQsXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICBpc0Fub255bW91cyxcclxuICAgICAgICAgICAgcGhvdG9VUkwsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZCxcclxuICAgICAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLFxyXG4gICAgICAgICAgICBjcmVhdGVkQXQsXHJcbiAgICAgICAgICAgIGxhc3RMb2dpbkF0XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyRGF0YSAmJiBBcnJheS5pc0FycmF5KHByb3ZpZGVyRGF0YSkpIHtcclxuICAgICAgICAgICAgdXNlci5wcm92aWRlckRhdGEgPSBwcm92aWRlckRhdGEubWFwKHVzZXJJbmZvID0+IChPYmplY3QuYXNzaWduKHt9LCB1c2VySW5mbykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKF9yZWRpcmVjdEV2ZW50SWQpIHtcclxuICAgICAgICAgICAgdXNlci5fcmVkaXJlY3RFdmVudElkID0gX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYSBVc2VyIGZyb20gYW4gaWRUb2tlbiBzZXJ2ZXIgcmVzcG9uc2VcclxuICAgICAqIEBwYXJhbSBhdXRoXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlblJlc3BvbnNlXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3luYyBfZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBpZFRva2VuUmVzcG9uc2UsIGlzQW5vbnltb3VzID0gZmFsc2UpIHtcclxuICAgICAgICBjb25zdCBzdHNUb2tlbk1hbmFnZXIgPSBuZXcgU3RzVG9rZW5NYW5hZ2VyKCk7XHJcbiAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLnVwZGF0ZUZyb21TZXJ2ZXJSZXNwb25zZShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIEZpcmViYXNlIEF1dGggdXNlci5cclxuICAgICAgICBjb25zdCB1c2VyID0gbmV3IFVzZXJJbXBsKHtcclxuICAgICAgICAgICAgdWlkOiBpZFRva2VuUmVzcG9uc2UubG9jYWxJZCxcclxuICAgICAgICAgICAgYXV0aCxcclxuICAgICAgICAgICAgc3RzVG9rZW5NYW5hZ2VyLFxyXG4gICAgICAgICAgICBpc0Fub255bW91c1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIFVwZGF0ZXMgdGhlIHVzZXIgaW5mbyBhbmQgZGF0YSBhbmQgcmVzb2x2ZXMgd2l0aCBhIHVzZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgYXdhaXQgX3JlbG9hZFdpdGhvdXRTYXZpbmcodXNlcik7XHJcbiAgICAgICAgcmV0dXJuIHVzZXI7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgaW5zdGFuY2VDYWNoZSA9IG5ldyBNYXAoKTtcclxuZnVuY3Rpb24gX2dldEluc3RhbmNlKGNscykge1xyXG4gICAgZGVidWdBc3NlcnQoY2xzIGluc3RhbmNlb2YgRnVuY3Rpb24sICdFeHBlY3RlZCBhIGNsYXNzIGRlZmluaXRpb24nKTtcclxuICAgIGxldCBpbnN0YW5jZSA9IGluc3RhbmNlQ2FjaGUuZ2V0KGNscyk7XHJcbiAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydChpbnN0YW5jZSBpbnN0YW5jZW9mIGNscywgJ0luc3RhbmNlIHN0b3JlZCBpbiBjYWNoZSBtaXNtYXRjaGVkIHdpdGggY2xhc3MnKTtcclxuICAgICAgICByZXR1cm4gaW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICBpbnN0YW5jZSA9IG5ldyBjbHMoKTtcclxuICAgIGluc3RhbmNlQ2FjaGUuc2V0KGNscywgaW5zdGFuY2UpO1xyXG4gICAgcmV0dXJuIGluc3RhbmNlO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEluTWVtb3J5UGVyc2lzdGVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gXCJOT05FXCIgLyogUGVyc2lzdGVuY2VUeXBlLk5PTkUgKi87XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlID0ge307XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaXNBdmFpbGFibGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Vba2V5XSA9IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuc3RvcmFnZVtrZXldO1xyXG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IHZhbHVlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICBkZWxldGUgdGhpcy5zdG9yYWdlW2tleV07XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBpbi1tZW1vcnkgc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzL3dvcmtlcnNcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBpbi1tZW1vcnkgc3RvcmFnZSBzaW5jZSBpdCBjYW5ub3QgYmUgc2hhcmVkIGFjcm9zcyB3aW5kb3dzL3dvcmtlcnNcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbn1cclxuSW5NZW1vcnlQZXJzaXN0ZW5jZS50eXBlID0gJ05PTkUnO1xyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBlcnNpc3RlbmNlfSBvZiB0eXBlICdOT05FJy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgaW5NZW1vcnlQZXJzaXN0ZW5jZSA9IEluTWVtb3J5UGVyc2lzdGVuY2U7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9wZXJzaXN0ZW5jZUtleU5hbWUoa2V5LCBhcGlLZXksIGFwcE5hbWUpIHtcclxuICAgIHJldHVybiBgJHtcImZpcmViYXNlXCIgLyogTmFtZXNwYWNlLlBFUlNJU1RFTkNFICovfToke2tleX06JHthcGlLZXl9OiR7YXBwTmFtZX1gO1xyXG59XHJcbmNsYXNzIFBlcnNpc3RlbmNlVXNlck1hbmFnZXIge1xyXG4gICAgY29uc3RydWN0b3IocGVyc2lzdGVuY2UsIGF1dGgsIHVzZXJLZXkpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnVzZXJLZXkgPSB1c2VyS2V5O1xyXG4gICAgICAgIGNvbnN0IHsgY29uZmlnLCBuYW1lIH0gPSB0aGlzLmF1dGg7XHJcbiAgICAgICAgdGhpcy5mdWxsVXNlcktleSA9IF9wZXJzaXN0ZW5jZUtleU5hbWUodGhpcy51c2VyS2V5LCBjb25maWcuYXBpS2V5LCBuYW1lKTtcclxuICAgICAgICB0aGlzLmZ1bGxQZXJzaXN0ZW5jZUtleSA9IF9wZXJzaXN0ZW5jZUtleU5hbWUoXCJwZXJzaXN0ZW5jZVwiIC8qIEtleU5hbWUuUEVSU0lTVEVOQ0VfVVNFUiAqLywgY29uZmlnLmFwaUtleSwgbmFtZSk7XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IGF1dGguX29uU3RvcmFnZUV2ZW50LmJpbmQoYXV0aCk7XHJcbiAgICAgICAgdGhpcy5wZXJzaXN0ZW5jZS5fYWRkTGlzdGVuZXIodGhpcy5mdWxsVXNlcktleSwgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBzZXRDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuX3NldCh0aGlzLmZ1bGxVc2VyS2V5LCB1c2VyLnRvSlNPTigpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldEN1cnJlbnRVc2VyKCkge1xyXG4gICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB0aGlzLnBlcnNpc3RlbmNlLl9nZXQodGhpcy5mdWxsVXNlcktleSk7XHJcbiAgICAgICAgcmV0dXJuIGJsb2IgPyBVc2VySW1wbC5fZnJvbUpTT04odGhpcy5hdXRoLCBibG9iKSA6IG51bGw7XHJcbiAgICB9XHJcbiAgICByZW1vdmVDdXJyZW50VXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5fcmVtb3ZlKHRoaXMuZnVsbFVzZXJLZXkpO1xyXG4gICAgfVxyXG4gICAgc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVuY2UuX3NldCh0aGlzLmZ1bGxQZXJzaXN0ZW5jZUtleSwgdGhpcy5wZXJzaXN0ZW5jZS50eXBlKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldFBlcnNpc3RlbmNlKG5ld1BlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucGVyc2lzdGVuY2UgPT09IG5ld1BlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY3VycmVudFVzZXIgPSBhd2FpdCB0aGlzLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5yZW1vdmVDdXJyZW50VXNlcigpO1xyXG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSBuZXdQZXJzaXN0ZW5jZTtcclxuICAgICAgICBpZiAoY3VycmVudFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q3VycmVudFVzZXIoY3VycmVudFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRlbGV0ZSgpIHtcclxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlLl9yZW1vdmVMaXN0ZW5lcih0aGlzLmZ1bGxVc2VyS2V5LCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhc3luYyBjcmVhdGUoYXV0aCwgcGVyc2lzdGVuY2VIaWVyYXJjaHksIHVzZXJLZXkgPSBcImF1dGhVc2VyXCIgLyogS2V5TmFtZS5BVVRIX1VTRVIgKi8pIHtcclxuICAgICAgICBpZiAoIXBlcnNpc3RlbmNlSGllcmFyY2h5Lmxlbmd0aCkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIoX2dldEluc3RhbmNlKGluTWVtb3J5UGVyc2lzdGVuY2UpLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRWxpbWluYXRlIGFueSBwZXJzaXN0ZW5jZXMgdGhhdCBhcmUgbm90IGF2YWlsYWJsZVxyXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVBlcnNpc3RlbmNlcyA9IChhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChhd2FpdCBwZXJzaXN0ZW5jZS5faXNBdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgfSkpKS5maWx0ZXIocGVyc2lzdGVuY2UgPT4gcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIC8vIEZhbGwgYmFjayB0byB0aGUgZmlyc3QgcGVyc2lzdGVuY2UgbGlzdGVkLCBvciBpbiBtZW1vcnkgaWYgbm9uZSBhdmFpbGFibGVcclxuICAgICAgICBsZXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IGF2YWlsYWJsZVBlcnNpc3RlbmNlc1swXSB8fFxyXG4gICAgICAgICAgICBfZ2V0SW5zdGFuY2UoaW5NZW1vcnlQZXJzaXN0ZW5jZSk7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gX3BlcnNpc3RlbmNlS2V5TmFtZSh1c2VyS2V5LCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbiAgICAgICAgLy8gUHVsbCBvdXQgdGhlIGV4aXN0aW5nIHVzZXIsIHNldHRpbmcgdGhlIGNob3NlbiBwZXJzaXN0ZW5jZSB0byB0aGF0XHJcbiAgICAgICAgLy8gcGVyc2lzdGVuY2UgaWYgdGhlIHVzZXIgZXhpc3RzLlxyXG4gICAgICAgIGxldCB1c2VyVG9NaWdyYXRlID0gbnVsbDtcclxuICAgICAgICAvLyBOb3RlLCBoZXJlIHdlIGNoZWNrIGZvciBhIHVzZXIgaW4gX2FsbF8gcGVyc2lzdGVuY2VzLCBub3QganVzdCB0aGVcclxuICAgICAgICAvLyBvbmVzIGRlZW1lZCBhdmFpbGFibGUuIElmIHdlIGNhbiBtaWdyYXRlIGEgdXNlciBvdXQgb2YgYSBicm9rZW5cclxuICAgICAgICAvLyBwZXJzaXN0ZW5jZSwgd2Ugd2lsbCAoYnV0IG9ubHkgaWYgdGhhdCBwZXJzaXN0ZW5jZSBzdXBwb3J0cyBtaWdyYXRpb24pLlxyXG4gICAgICAgIGZvciAoY29uc3QgcGVyc2lzdGVuY2Ugb2YgcGVyc2lzdGVuY2VIaWVyYXJjaHkpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBwZXJzaXN0ZW5jZS5fZ2V0KGtleSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxvYikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBVc2VySW1wbC5fZnJvbUpTT04oYXV0aCwgYmxvYik7IC8vIHRocm93cyBmb3IgdW5wYXJzYWJsZSBibG9iICh3cm9uZyBmb3JtYXQpXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlcnNpc3RlbmNlICE9PSBzZWxlY3RlZFBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJUb01pZ3JhdGUgPSB1c2VyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFBlcnNpc3RlbmNlID0gcGVyc2lzdGVuY2U7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKF9hKSB7IH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgd2UgZmluZCB0aGUgdXNlciBpbiBhIHBlcnNpc3RlbmNlIHRoYXQgZG9lcyBzdXBwb3J0IG1pZ3JhdGlvbiwgdXNlXHJcbiAgICAgICAgLy8gdGhhdCBtaWdyYXRpb24gcGF0aCAob2Ygb25seSBwZXJzaXN0ZW5jZXMgdGhhdCBzdXBwb3J0IG1pZ3JhdGlvbilcclxuICAgICAgICBjb25zdCBtaWdyYXRpb25IaWVyYXJjaHkgPSBhdmFpbGFibGVQZXJzaXN0ZW5jZXMuZmlsdGVyKHAgPT4gcC5fc2hvdWxkQWxsb3dNaWdyYXRpb24pO1xyXG4gICAgICAgIC8vIElmIHRoZSBwZXJzaXN0ZW5jZSBkb2VzIF9ub3RfIGFsbG93IG1pZ3JhdGlvbiwganVzdCBmaW5pc2ggb2ZmIGhlcmVcclxuICAgICAgICBpZiAoIXNlbGVjdGVkUGVyc2lzdGVuY2UuX3Nob3VsZEFsbG93TWlncmF0aW9uIHx8XHJcbiAgICAgICAgICAgICFtaWdyYXRpb25IaWVyYXJjaHkubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc2VsZWN0ZWRQZXJzaXN0ZW5jZSA9IG1pZ3JhdGlvbkhpZXJhcmNoeVswXTtcclxuICAgICAgICBpZiAodXNlclRvTWlncmF0ZSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIG5vcm1hbGx5IHNob3VsZG4ndCB0aHJvdyBzaW5jZSBjaG9zZW5QZXJzaXN0ZW5jZS5pc0F2YWlsYWJsZSgpIGlzIHRydWUsIGJ1dCBpZiBpdCBkb2VzXHJcbiAgICAgICAgICAgIC8vIHdlJ2xsIGp1c3QgbGV0IGl0IGJ1YmJsZSB0byBzdXJmYWNlIHRoZSBlcnJvci5cclxuICAgICAgICAgICAgYXdhaXQgc2VsZWN0ZWRQZXJzaXN0ZW5jZS5fc2V0KGtleSwgdXNlclRvTWlncmF0ZS50b0pTT04oKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEF0dGVtcHQgdG8gY2xlYXIgdGhlIGtleSBpbiBvdGhlciBwZXJzaXN0ZW5jZXMgYnV0IGlnbm9yZSBlcnJvcnMuIFRoaXMgaGVscHMgcHJldmVudCBpc3N1ZXNcclxuICAgICAgICAvLyBzdWNoIGFzIHVzZXJzIGdldHRpbmcgc3R1Y2sgd2l0aCBhIHByZXZpb3VzIGFjY291bnQgYWZ0ZXIgc2lnbmluZyBvdXQgYW5kIHJlZnJlc2hpbmcgdGhlIHRhYi5cclxuICAgICAgICBhd2FpdCBQcm9taXNlLmFsbChwZXJzaXN0ZW5jZUhpZXJhcmNoeS5tYXAoYXN5bmMgKHBlcnNpc3RlbmNlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChwZXJzaXN0ZW5jZSAhPT0gc2VsZWN0ZWRQZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBwZXJzaXN0ZW5jZS5fcmVtb3ZlKGtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoX2EpIHsgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIHJldHVybiBuZXcgUGVyc2lzdGVuY2VVc2VyTWFuYWdlcihzZWxlY3RlZFBlcnNpc3RlbmNlLCBhdXRoLCB1c2VyS2V5KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogRGV0ZXJtaW5lIHRoZSBicm93c2VyIGZvciB0aGUgcHVycG9zZXMgb2YgcmVwb3J0aW5nIHVzYWdlIHRvIHRoZSBBUElcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRCcm93c2VyTmFtZSh1c2VyQWdlbnQpIHtcclxuICAgIGNvbnN0IHVhID0gdXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICBpZiAodWEuaW5jbHVkZXMoJ29wZXJhLycpIHx8IHVhLmluY2x1ZGVzKCdvcHIvJykgfHwgdWEuaW5jbHVkZXMoJ29waW9zLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiT3BlcmFcIiAvKiBCcm93c2VyTmFtZS5PUEVSQSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0lFTW9iaWxlKHVhKSkge1xyXG4gICAgICAgIC8vIFdpbmRvd3MgcGhvbmUgSUVNb2JpbGUgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJJRU1vYmlsZVwiIC8qIEJyb3dzZXJOYW1lLklFTU9CSUxFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodWEuaW5jbHVkZXMoJ21zaWUnKSB8fCB1YS5pbmNsdWRlcygndHJpZGVudC8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIklFXCIgLyogQnJvd3Nlck5hbWUuSUUgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmICh1YS5pbmNsdWRlcygnZWRnZS8nKSkge1xyXG4gICAgICAgIHJldHVybiBcIkVkZ2VcIiAvKiBCcm93c2VyTmFtZS5FREdFICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzRmlyZWZveCh1YSkpIHtcclxuICAgICAgICByZXR1cm4gXCJGaXJlZm94XCIgLyogQnJvd3Nlck5hbWUuRklSRUZPWCAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHVhLmluY2x1ZGVzKCdzaWxrLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiU2lsa1wiIC8qIEJyb3dzZXJOYW1lLlNJTEsgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChfaXNCbGFja0JlcnJ5KHVhKSkge1xyXG4gICAgICAgIC8vIEJsYWNrYmVycnkgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJCbGFja2JlcnJ5XCIgLyogQnJvd3Nlck5hbWUuQkxBQ0tCRVJSWSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc1dlYk9TKHVhKSkge1xyXG4gICAgICAgIC8vIFdlYk9TIGRlZmF1bHQgYnJvd3Nlci5cclxuICAgICAgICByZXR1cm4gXCJXZWJvc1wiIC8qIEJyb3dzZXJOYW1lLldFQk9TICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzU2FmYXJpKHVhKSkge1xyXG4gICAgICAgIHJldHVybiBcIlNhZmFyaVwiIC8qIEJyb3dzZXJOYW1lLlNBRkFSSSAqLztcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKCh1YS5pbmNsdWRlcygnY2hyb21lLycpIHx8IF9pc0Nocm9tZUlPUyh1YSkpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdlZGdlLycpKSB7XHJcbiAgICAgICAgcmV0dXJuIFwiQ2hyb21lXCIgLyogQnJvd3Nlck5hbWUuQ0hST01FICovO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCh1YSkpIHtcclxuICAgICAgICAvLyBBbmRyb2lkIHN0b2NrIGJyb3dzZXIuXHJcbiAgICAgICAgcmV0dXJuIFwiQW5kcm9pZFwiIC8qIEJyb3dzZXJOYW1lLkFORFJPSUQgKi87XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICAvLyBNb3N0IG1vZGVybiBicm93c2VycyBoYXZlIG5hbWUvdmVyc2lvbiBhdCBlbmQgb2YgdXNlciBhZ2VudCBzdHJpbmcuXHJcbiAgICAgICAgY29uc3QgcmUgPSAvKFthLXpBLVpcXGRcXC5dKylcXC9bYS16QS1aXFxkXFwuXSokLztcclxuICAgICAgICBjb25zdCBtYXRjaGVzID0gdXNlckFnZW50Lm1hdGNoKHJlKTtcclxuICAgICAgICBpZiAoKG1hdGNoZXMgPT09IG51bGwgfHwgbWF0Y2hlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hlcy5sZW5ndGgpID09PSAyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaGVzWzFdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBcIk90aGVyXCIgLyogQnJvd3Nlck5hbWUuT1RIRVIgKi87XHJcbn1cclxuZnVuY3Rpb24gX2lzRmlyZWZveCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvZmlyZWZveFxcLy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1NhZmFyaSh1c2VyQWdlbnQgPSBnZXRVQSgpKSB7XHJcbiAgICBjb25zdCB1YSA9IHVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgcmV0dXJuICh1YS5pbmNsdWRlcygnc2FmYXJpLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdjaHJvbWUvJykgJiZcclxuICAgICAgICAhdWEuaW5jbHVkZXMoJ2NyaW9zLycpICYmXHJcbiAgICAgICAgIXVhLmluY2x1ZGVzKCdhbmRyb2lkJykpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0Nocm9tZUlPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvY3Jpb3NcXC8vaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNJRU1vYmlsZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvaWVtb2JpbGUvaS50ZXN0KHVhKTtcclxufVxyXG5mdW5jdGlvbiBfaXNBbmRyb2lkKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC9hbmRyb2lkL2kudGVzdCh1YSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzQmxhY2tCZXJyeSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAvYmxhY2tiZXJyeS9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc1dlYk9TKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgcmV0dXJuIC93ZWJvcy9pLnRlc3QodWEpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPUyh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAoL2lwaG9uZXxpcGFkfGlwb2QvaS50ZXN0KHVhKSB8fFxyXG4gICAgICAgICgvbWFjaW50b3NoL2kudGVzdCh1YSkgJiYgL21vYmlsZS9pLnRlc3QodWEpKSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSU9TN09yOCh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAoLyhpUGFkfGlQaG9uZXxpUG9kKS4qT1MgN19cXGQvaS50ZXN0KHVhKSB8fFxyXG4gICAgICAgIC8oaVBhZHxpUGhvbmV8aVBvZCkuKk9TIDhfXFxkL2kudGVzdCh1YSkpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lPU1N0YW5kYWxvbmUodWEgPSBnZXRVQSgpKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gX2lzSU9TKHVhKSAmJiAhISgoX2EgPSB3aW5kb3cubmF2aWdhdG9yKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Euc3RhbmRhbG9uZSk7XHJcbn1cclxuZnVuY3Rpb24gX2lzSUUxMCgpIHtcclxuICAgIHJldHVybiBpc0lFKCkgJiYgZG9jdW1lbnQuZG9jdW1lbnRNb2RlID09PSAxMDtcclxufVxyXG5mdW5jdGlvbiBfaXNNb2JpbGVCcm93c2VyKHVhID0gZ2V0VUEoKSkge1xyXG4gICAgLy8gVE9ETzogaW1wbGVtZW50IGdldEJyb3dzZXJOYW1lIGVxdWl2YWxlbnQgZm9yIE9TLlxyXG4gICAgcmV0dXJuIChfaXNJT1ModWEpIHx8XHJcbiAgICAgICAgX2lzQW5kcm9pZCh1YSkgfHxcclxuICAgICAgICBfaXNXZWJPUyh1YSkgfHxcclxuICAgICAgICBfaXNCbGFja0JlcnJ5KHVhKSB8fFxyXG4gICAgICAgIC93aW5kb3dzIHBob25lL2kudGVzdCh1YSkgfHxcclxuICAgICAgICBfaXNJRU1vYmlsZSh1YSkpO1xyXG59XHJcbmZ1bmN0aW9uIF9pc0lmcmFtZSgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgdGhhdCB0aGUgY3VycmVudCB3aW5kb3cgaXMgbm90IHRoZSB0b3Agd2luZG93LlxyXG4gICAgICAgIC8vIElmIHNvLCByZXR1cm4gdHJ1ZS5cclxuICAgICAgICByZXR1cm4gISEod2luZG93ICYmIHdpbmRvdyAhPT0gd2luZG93LnRvcCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKlxyXG4gKiBEZXRlcm1pbmUgdGhlIFNESyB2ZXJzaW9uIHN0cmluZ1xyXG4gKi9cclxuZnVuY3Rpb24gX2dldENsaWVudFZlcnNpb24oY2xpZW50UGxhdGZvcm0sIGZyYW1ld29ya3MgPSBbXSkge1xyXG4gICAgbGV0IHJlcG9ydGVkUGxhdGZvcm07XHJcbiAgICBzd2l0Y2ggKGNsaWVudFBsYXRmb3JtKSB7XHJcbiAgICAgICAgY2FzZSBcIkJyb3dzZXJcIiAvKiBDbGllbnRQbGF0Zm9ybS5CUk9XU0VSICovOlxyXG4gICAgICAgICAgICAvLyBJbiBhIGJyb3dzZXIgZW52aXJvbm1lbnQsIHJlcG9ydCB0aGUgYnJvd3NlciBuYW1lLlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gX2dldEJyb3dzZXJOYW1lKGdldFVBKCkpO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiV29ya2VyXCIgLyogQ2xpZW50UGxhdGZvcm0uV09SS0VSICovOlxyXG4gICAgICAgICAgICAvLyBUZWNobmljYWxseSBhIHdvcmtlciBydW5zIGZyb20gYSBicm93c2VyIGJ1dCB3ZSBuZWVkIHRvIGRpZmZlcmVudGlhdGUgYVxyXG4gICAgICAgICAgICAvLyB3b3JrZXIgZnJvbSBhIGJyb3dzZXIuXHJcbiAgICAgICAgICAgIC8vIEZvciBleGFtcGxlOiBDaHJvbWUtV29ya2VyL0pzQ29yZS80LjkuMS9GaXJlYmFzZUNvcmUtd2ViLlxyXG4gICAgICAgICAgICByZXBvcnRlZFBsYXRmb3JtID0gYCR7X2dldEJyb3dzZXJOYW1lKGdldFVBKCkpfS0ke2NsaWVudFBsYXRmb3JtfWA7XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJlcG9ydGVkUGxhdGZvcm0gPSBjbGllbnRQbGF0Zm9ybTtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlcG9ydGVkRnJhbWV3b3JrcyA9IGZyYW1ld29ya3MubGVuZ3RoXHJcbiAgICAgICAgPyBmcmFtZXdvcmtzLmpvaW4oJywnKVxyXG4gICAgICAgIDogJ0ZpcmViYXNlQ29yZS13ZWInOyAvKiBkZWZhdWx0IHZhbHVlIGlmIG5vIG90aGVyIGZyYW1ld29yayBpcyB1c2VkICovXHJcbiAgICByZXR1cm4gYCR7cmVwb3J0ZWRQbGF0Zm9ybX0vJHtcIkpzQ29yZVwiIC8qIENsaWVudEltcGxlbWVudGF0aW9uLkNPUkUgKi99LyR7U0RLX1ZFUlNJT059LyR7cmVwb3J0ZWRGcmFtZXdvcmtzfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjYXB0Y2hhUGFyYW1zKGF1dGgpIHtcclxuICAgIHJldHVybiAoKGF3YWl0IF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIkdFVFwiIC8qIEh0dHBNZXRob2QuR0VUICovLCBcIi92MS9yZWNhcHRjaGFQYXJhbXNcIiAvKiBFbmRwb2ludC5HRVRfUkVDQVBUQ0hBX1BBUkFNICovKSkucmVjYXB0Y2hhU2l0ZUtleSB8fCAnJyk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVjYXB0Y2hhQ29uZmlnKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJHRVRcIiAvKiBIdHRwTWV0aG9kLkdFVCAqLywgXCIvdjIvcmVjYXB0Y2hhQ29uZmlnXCIgLyogRW5kcG9pbnQuR0VUX1JFQ0FQVENIQV9DT05GSUcgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gaXNWMihncmVjYXB0Y2hhKSB7XHJcbiAgICByZXR1cm4gKGdyZWNhcHRjaGEgIT09IHVuZGVmaW5lZCAmJlxyXG4gICAgICAgIGdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UgIT09IHVuZGVmaW5lZCk7XHJcbn1cclxuZnVuY3Rpb24gaXNFbnRlcnByaXNlKGdyZWNhcHRjaGEpIHtcclxuICAgIHJldHVybiAoZ3JlY2FwdGNoYSAhPT0gdW5kZWZpbmVkICYmXHJcbiAgICAgICAgZ3JlY2FwdGNoYS5lbnRlcnByaXNlICE9PSB1bmRlZmluZWQpO1xyXG59XHJcbmNsYXNzIFJlY2FwdGNoYUNvbmZpZyB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZSkge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSByZUNBUFRDSEEgc2l0ZSBrZXkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zaXRlS2V5ID0gJyc7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIHJlQ0FQVENIQSBlbmFibGVtZW50IHN0YXR1cyBvZiB0aGUge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSBmb3IgdGhlIGN1cnJlbnQgdGVuYW50LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuZW1haWxQYXNzd29yZEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICBpZiAocmVzcG9uc2UucmVjYXB0Y2hhS2V5ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdyZWNhcHRjaGFLZXkgdW5kZWZpbmVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIEV4YW1wbGUgcmVzcG9uc2UucmVjYXB0Y2hhS2V5OiBcInByb2plY3RzL3Byb2oxMjMva2V5cy9zaXRla2V5MTIzXCJcclxuICAgICAgICB0aGlzLnNpdGVLZXkgPSByZXNwb25zZS5yZWNhcHRjaGFLZXkuc3BsaXQoJy8nKVszXTtcclxuICAgICAgICB0aGlzLmVtYWlsUGFzc3dvcmRFbmFibGVkID0gcmVzcG9uc2UucmVjYXB0Y2hhRW5mb3JjZW1lbnRTdGF0ZS5zb21lKGVuZm9yY2VtZW50U3RhdGUgPT4gZW5mb3JjZW1lbnRTdGF0ZS5wcm92aWRlciA9PT0gJ0VNQUlMX1BBU1NXT1JEX1BST1ZJREVSJyAmJlxyXG4gICAgICAgICAgICBlbmZvcmNlbWVudFN0YXRlLmVuZm9yY2VtZW50U3RhdGUgIT09ICdPRkYnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRTY3JpcHRQYXJlbnRFbGVtZW50KCkge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIHJldHVybiAoX2IgPSAoX2EgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2FbMF0pICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IGRvY3VtZW50O1xyXG59XHJcbmZ1bmN0aW9uIF9sb2FkSlModXJsKSB7XHJcbiAgICAvLyBUT0RPOiBjb25zaWRlciBhZGRpbmcgdGltZW91dCBzdXBwb3J0ICYgY2FuY2VsbGF0aW9uXHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7XHJcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKCdzcmMnLCB1cmwpO1xyXG4gICAgICAgIGVsLm9ubG9hZCA9IHJlc29sdmU7XHJcbiAgICAgICAgZWwub25lcnJvciA9IGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBlcnJvciA9IF9jcmVhdGVFcnJvcihcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgIGVycm9yLmN1c3RvbURhdGEgPSBlO1xyXG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZWwudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xyXG4gICAgICAgIGVsLmNoYXJzZXQgPSAnVVRGLTgnO1xyXG4gICAgICAgIGdldFNjcmlwdFBhcmVudEVsZW1lbnQoKS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBfZ2VuZXJhdGVDYWxsYmFja05hbWUocHJlZml4KSB7XHJcbiAgICByZXR1cm4gYF9fJHtwcmVmaXh9JHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMDAwMDAwKX1gO1xyXG59XG5cbi8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1yZXF1aXJlLWltcG9ydHMgKi9cclxuY29uc3QgUkVDQVBUQ0hBX0VOVEVSUFJJU0VfVVJMID0gJ2h0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhL2VudGVycHJpc2UuanM/cmVuZGVyPSc7XHJcbmNvbnN0IFJFQ0FQVENIQV9FTlRFUlBSSVNFX1ZFUklGSUVSX1RZUEUgPSAncmVjYXB0Y2hhLWVudGVycHJpc2UnO1xyXG5jb25zdCBGQUtFX1RPS0VOID0gJ05PX1JFQ0FQVENIQSc7XHJcbmNsYXNzIFJlY2FwdGNoYUVudGVycHJpc2VWZXJpZmllciB7XHJcbiAgICAvKipcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gYXV0aEV4dGVybiAtIFRoZSBjb3JyZXNwb25kaW5nIEZpcmViYXNlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGF1dGhFeHRlcm4pIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZGVudGlmaWVzIHRoZSB0eXBlIG9mIGFwcGxpY2F0aW9uIHZlcmlmaWVyIChlLmcuIFwicmVjYXB0Y2hhLWVudGVycHJpc2VcIikuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gUkVDQVBUQ0hBX0VOVEVSUFJJU0VfVkVSSUZJRVJfVFlQRTtcclxuICAgICAgICB0aGlzLmF1dGggPSBfY2FzdEF1dGgoYXV0aEV4dGVybik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEV4ZWN1dGVzIHRoZSB2ZXJpZmljYXRpb24gcHJvY2Vzcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIGEgdG9rZW4gdGhhdCBjYW4gYmUgdXNlZCB0byBhc3NlcnQgdGhlIHZhbGlkaXR5IG9mIGEgcmVxdWVzdC5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgdmVyaWZ5KGFjdGlvbiA9ICd2ZXJpZnknLCBmb3JjZVJlZnJlc2ggPSBmYWxzZSkge1xyXG4gICAgICAgIGFzeW5jIGZ1bmN0aW9uIHJldHJpZXZlU2l0ZUtleShhdXRoKSB7XHJcbiAgICAgICAgICAgIGlmICghZm9yY2VSZWZyZXNoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYXV0aC50ZW5hbnRJZCA9PSBudWxsICYmIGF1dGguX2FnZW50UmVjYXB0Y2hhQ29uZmlnICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aC5fYWdlbnRSZWNhcHRjaGFDb25maWcuc2l0ZUtleTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChhdXRoLnRlbmFudElkICE9IG51bGwgJiZcclxuICAgICAgICAgICAgICAgICAgICBhdXRoLl90ZW5hbnRSZWNhcHRjaGFDb25maWdzW2F1dGgudGVuYW50SWRdICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXV0aC5fdGVuYW50UmVjYXB0Y2hhQ29uZmlnc1thdXRoLnRlbmFudElkXS5zaXRlS2V5O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShhc3luYyAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBnZXRSZWNhcHRjaGFDb25maWcoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFR5cGU6IFwiQ0xJRU5UX1RZUEVfV0VCXCIgLyogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIgKi8sXHJcbiAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogXCJSRUNBUFRDSEFfRU5URVJQUklTRVwiIC8qIFJlY2FwdGNoYVZlcnNpb24uRU5URVJQUklTRSAqL1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlLnJlY2FwdGNoYUtleSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ3JlY2FwdGNoYSBFbnRlcnByaXNlIHNpdGUga2V5IHVuZGVmaW5lZCcpKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IG5ldyBSZWNhcHRjaGFDb25maWcocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYXV0aC50ZW5hbnRJZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdXRoLl9hZ2VudFJlY2FwdGNoYUNvbmZpZyA9IGNvbmZpZztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1dGguX3RlbmFudFJlY2FwdGNoYUNvbmZpZ3NbYXV0aC50ZW5hbnRJZF0gPSBjb25maWc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc29sdmUoY29uZmlnLnNpdGVLZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmdW5jdGlvbiByZXRyaWV2ZVJlY2FwdGNoYVRva2VuKHNpdGVLZXksIHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICBjb25zdCBncmVjYXB0Y2hhID0gd2luZG93LmdyZWNhcHRjaGE7XHJcbiAgICAgICAgICAgIGlmIChpc0VudGVycHJpc2UoZ3JlY2FwdGNoYSkpIHtcclxuICAgICAgICAgICAgICAgIGdyZWNhcHRjaGEuZW50ZXJwcmlzZS5yZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ3JlY2FwdGNoYS5lbnRlcnByaXNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5leGVjdXRlKHNpdGVLZXksIHsgYWN0aW9uIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHRva2VuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShGQUtFX1RPS0VOKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KEVycm9yKCdObyByZUNBUFRDSEEgZW50ZXJwcmlzZSBzY3JpcHQgbG9hZGVkLicpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICByZXRyaWV2ZVNpdGVLZXkodGhpcy5hdXRoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2l0ZUtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZvcmNlUmVmcmVzaCAmJiBpc0VudGVycHJpc2Uod2luZG93LmdyZWNhcHRjaGEpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0cmlldmVSZWNhcHRjaGFUb2tlbihzaXRlS2V5LCByZXNvbHZlLCByZWplY3QpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ1JlY2FwdGNoYVZlcmlmaWVyIGlzIG9ubHkgc3VwcG9ydGVkIGluIGJyb3dzZXInKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgX2xvYWRKUyhSRUNBUFRDSEFfRU5URVJQUklTRV9VUkwgKyBzaXRlS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHJpZXZlUmVjYXB0Y2hhVG9rZW4oc2l0ZUtleSwgcmVzb2x2ZSwgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGluamVjdFJlY2FwdGNoYUZpZWxkcyhhdXRoLCByZXF1ZXN0LCBhY3Rpb24sIGNhcHRjaGFSZXNwID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHZlcmlmaWVyID0gbmV3IFJlY2FwdGNoYUVudGVycHJpc2VWZXJpZmllcihhdXRoKTtcclxuICAgIGxldCBjYXB0Y2hhUmVzcG9uc2U7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNhcHRjaGFSZXNwb25zZSA9IGF3YWl0IHZlcmlmaWVyLnZlcmlmeShhY3Rpb24pO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgY2FwdGNoYVJlc3BvbnNlID0gYXdhaXQgdmVyaWZpZXIudmVyaWZ5KGFjdGlvbiwgdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBjb25zdCBuZXdSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbih7fSwgcmVxdWVzdCk7XHJcbiAgICBpZiAoIWNhcHRjaGFSZXNwKSB7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihuZXdSZXF1ZXN0LCB7IGNhcHRjaGFSZXNwb25zZSB9KTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIE9iamVjdC5hc3NpZ24obmV3UmVxdWVzdCwgeyAnY2FwdGNoYVJlc3AnOiBjYXB0Y2hhUmVzcG9uc2UgfSk7XHJcbiAgICB9XHJcbiAgICBPYmplY3QuYXNzaWduKG5ld1JlcXVlc3QsIHsgJ2NsaWVudFR5cGUnOiBcIkNMSUVOVF9UWVBFX1dFQlwiIC8qIFJlY2FwdGNoYUNsaWVudFR5cGUuV0VCICovIH0pO1xyXG4gICAgT2JqZWN0LmFzc2lnbihuZXdSZXF1ZXN0LCB7XHJcbiAgICAgICAgJ3JlY2FwdGNoYVZlcnNpb24nOiBcIlJFQ0FQVENIQV9FTlRFUlBSSVNFXCIgLyogUmVjYXB0Y2hhVmVyc2lvbi5FTlRFUlBSSVNFICovXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBuZXdSZXF1ZXN0O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhNaWRkbGV3YXJlUXVldWUge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCkge1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5xdWV1ZSA9IFtdO1xyXG4gICAgfVxyXG4gICAgcHVzaENhbGxiYWNrKGNhbGxiYWNrLCBvbkFib3J0KSB7XHJcbiAgICAgICAgLy8gVGhlIGNhbGxiYWNrIGNvdWxkIGJlIHN5bmMgb3IgYXN5bmMuIFdyYXAgaXQgaW50byBhXHJcbiAgICAgICAgLy8gZnVuY3Rpb24gdGhhdCBpcyBhbHdheXMgYXN5bmMuXHJcbiAgICAgICAgY29uc3Qgd3JhcHBlZENhbGxiYWNrID0gKHVzZXIpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGNhbGxiYWNrKHVzZXIpO1xyXG4gICAgICAgICAgICAgICAgLy8gRWl0aGVyIHJlc29sdmUgd2l0aCBleGlzdGluZyBwcm9taXNlIG9yIHdyYXAgYSBub24tcHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIHZhbHVlIGludG8gYSBwcm9taXNlLlxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTeW5jIGNhbGxiYWNrIHRocm93cy5cclxuICAgICAgICAgICAgICAgIHJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEF0dGFjaCB0aGUgb25BYm9ydCBpZiBwcmVzZW50XHJcbiAgICAgICAgd3JhcHBlZENhbGxiYWNrLm9uQWJvcnQgPSBvbkFib3J0O1xyXG4gICAgICAgIHRoaXMucXVldWUucHVzaCh3cmFwcGVkQ2FsbGJhY2spO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gdGhpcy5xdWV1ZS5sZW5ndGggLSAxO1xyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFVuc3Vic2NyaWJlLiBSZXBsYWNlIHdpdGggbm8tb3AuIERvIG5vdCByZW1vdmUgZnJvbSBhcnJheSwgb3IgaXQgd2lsbCBkaXN0dXJiXHJcbiAgICAgICAgICAgIC8vIGluZGV4aW5nIG9mIG90aGVyIGVsZW1lbnRzLlxyXG4gICAgICAgICAgICB0aGlzLnF1ZXVlW2luZGV4XSA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBydW5NaWRkbGV3YXJlKG5leHRVc2VyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aC5jdXJyZW50VXNlciA9PT0gbmV4dFVzZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXaGlsZSBydW5uaW5nIHRoZSBtaWRkbGV3YXJlLCBidWlsZCBhIHRlbXBvcmFyeSBzdGFjayBvZiBvbkFib3J0XHJcbiAgICAgICAgLy8gY2FsbGJhY2tzIHRvIGNhbGwgaWYgb25lIG1pZGRsZXdhcmUgY2FsbGJhY2sgcmVqZWN0cy5cclxuICAgICAgICBjb25zdCBvbkFib3J0U3RhY2sgPSBbXTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGJlZm9yZVN0YXRlQ2FsbGJhY2sgb2YgdGhpcy5xdWV1ZSkge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgYmVmb3JlU3RhdGVDYWxsYmFjayhuZXh0VXNlcik7XHJcbiAgICAgICAgICAgICAgICAvLyBPbmx5IHB1c2ggdGhlIG9uQWJvcnQgaWYgdGhlIGNhbGxiYWNrIHN1Y2NlZWRzXHJcbiAgICAgICAgICAgICAgICBpZiAoYmVmb3JlU3RhdGVDYWxsYmFjay5vbkFib3J0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgb25BYm9ydFN0YWNrLnB1c2goYmVmb3JlU3RhdGVDYWxsYmFjay5vbkFib3J0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAvLyBSdW4gYWxsIG9uQWJvcnQsIHdpdGggc2VwYXJhdGUgdHJ5L2NhdGNoIHRvIGlnbm9yZSBhbnkgZXJyb3JzIGFuZFxyXG4gICAgICAgICAgICAvLyBjb250aW51ZVxyXG4gICAgICAgICAgICBvbkFib3J0U3RhY2sucmV2ZXJzZSgpO1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG9uQWJvcnQgb2Ygb25BYm9ydFN0YWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIG9uQWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChfKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogc3dhbGxvdyBlcnJvciAqL1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRocm93IHRoaXMuYXV0aC5fZXJyb3JGYWN0b3J5LmNyZWF0ZShcImxvZ2luLWJsb2NrZWRcIiAvKiBBdXRoRXJyb3JDb2RlLkxPR0lOX0JMT0NLRUQgKi8sIHtcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsTWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcCwgaGVhcnRiZWF0U2VydmljZVByb3ZpZGVyLCBhcHBDaGVja1NlcnZpY2VQcm92aWRlciwgY29uZmlnKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5oZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIgPSBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5hcHBDaGVja1NlcnZpY2VQcm92aWRlciA9IGFwcENoZWNrU2VydmljZVByb3ZpZGVyO1xyXG4gICAgICAgIHRoaXMuY29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZW11bGF0b3JDb25maWcgPSBudWxsO1xyXG4gICAgICAgIHRoaXMub3BlcmF0aW9ucyA9IFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgICAgIHRoaXMuYXV0aFN0YXRlU3Vic2NyaXB0aW9uID0gbmV3IFN1YnNjcmlwdGlvbih0aGlzKTtcclxuICAgICAgICB0aGlzLmlkVG9rZW5TdWJzY3JpcHRpb24gPSBuZXcgU3Vic2NyaXB0aW9uKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuYmVmb3JlU3RhdGVRdWV1ZSA9IG5ldyBBdXRoTWlkZGxld2FyZVF1ZXVlKHRoaXMpO1xyXG4gICAgICAgIHRoaXMucmVkaXJlY3RVc2VyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmlzUHJvYWN0aXZlUmVmcmVzaEVuYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAvLyBBbnkgbmV0d29yayBjYWxscyB3aWxsIHNldCB0aGlzIHRvIHRydWUgYW5kIHByZXZlbnQgc3Vic2VxdWVudCBlbXVsYXRvclxyXG4gICAgICAgIC8vIGluaXRpYWxpemF0aW9uXHJcbiAgICAgICAgdGhpcy5fY2FuSW5pdEVtdWxhdG9yID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9pc0luaXRpYWxpemVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9lcnJvckZhY3RvcnkgPSBfREVGQVVMVF9BVVRIX0VSUk9SX0ZBQ1RPUlk7XHJcbiAgICAgICAgdGhpcy5fYWdlbnRSZWNhcHRjaGFDb25maWcgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3RlbmFudFJlY2FwdGNoYUNvbmZpZ3MgPSB7fTtcclxuICAgICAgICAvLyBUcmFja3MgdGhlIGxhc3Qgbm90aWZpZWQgVUlEIGZvciBzdGF0ZSBjaGFuZ2UgbGlzdGVuZXJzIHRvIHByZXZlbnRcclxuICAgICAgICAvLyByZXBlYXRlZCBjYWxscyB0byB0aGUgY2FsbGJhY2tzLiBVbmRlZmluZWQgbWVhbnMgaXQncyBuZXZlciBiZWVuXHJcbiAgICAgICAgLy8gY2FsbGVkLCB3aGVyZWFzIG51bGwgbWVhbnMgaXQncyBiZWVuIGNhbGxlZCB3aXRoIGEgc2lnbmVkIG91dCB1c2VyXHJcbiAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgdGhpcy5sYW5ndWFnZUNvZGUgPSBudWxsO1xyXG4gICAgICAgIHRoaXMudGVuYW50SWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7IGFwcFZlcmlmaWNhdGlvbkRpc2FibGVkRm9yVGVzdGluZzogZmFsc2UgfTtcclxuICAgICAgICB0aGlzLmZyYW1ld29ya3MgPSBbXTtcclxuICAgICAgICB0aGlzLm5hbWUgPSBhcHAubmFtZTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBjb25maWcuc2RrQ2xpZW50VmVyc2lvbjtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplV2l0aFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlSGllcmFyY2h5LCBwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICBpZiAocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlciA9IF9nZXRJbnN0YW5jZShwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBIYXZlIHRvIGNoZWNrIGZvciBhcHAgZGVsZXRpb24gdGhyb3VnaG91dCBpbml0aWFsaXphdGlvbiAoYWZ0ZXIgZWFjaFxyXG4gICAgICAgIC8vIHByb21pc2UgcmVzb2x1dGlvbilcclxuICAgICAgICB0aGlzLl9pbml0aWFsaXphdGlvblByb21pc2UgPSB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnBlcnNpc3RlbmNlTWFuYWdlciA9IGF3YWl0IFBlcnNpc3RlbmNlVXNlck1hbmFnZXIuY3JlYXRlKHRoaXMsIHBlcnNpc3RlbmNlSGllcmFyY2h5KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSByZXNvbHZlciBlYXJseSBpZiBuZWNlc3NhcnkgKG9ubHkgYXBwbGljYWJsZSB0byB3ZWI6XHJcbiAgICAgICAgICAgIC8vIHRoaXMgd2lsbCBjYXVzZSB0aGUgaWZyYW1lIHRvIGxvYWQgaW1tZWRpYXRlbHkgaW4gY2VydGFpbiBjYXNlcylcclxuICAgICAgICAgICAgaWYgKChfYSA9IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLl9zaG91bGRJbml0UHJvYWN0aXZlbHkpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoaXMgZmFpbHMsIGRvbid0IGhhbHQgYXV0aCBsb2FkaW5nXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlci5faW5pdGlhbGl6ZSh0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLyogSWdub3JlIHRoZSBlcnJvciAqL1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgICAgIHRoaXMubGFzdE5vdGlmaWVkVWlkID0gKChfYiA9IHRoaXMuY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi51aWQpIHx8IG51bGw7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSWYgdGhlIHBlcnNpc3RlbmNlIGlzIGNoYW5nZWQgaW4gYW5vdGhlciB3aW5kb3csIHRoZSB1c2VyIG1hbmFnZXIgd2lsbCBsZXQgdXMga25vd1xyXG4gICAgICovXHJcbiAgICBhc3luYyBfb25TdG9yYWdlRXZlbnQoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLmN1cnJlbnRVc2VyICYmICF1c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIE5vIGNoYW5nZSwgZG8gbm90aGluZyAod2FzIHNpZ25lZCBvdXQgYW5kIHJlbWFpbmVkIHNpZ25lZCBvdXQpLlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHRoZSBzYW1lIHVzZXIgaXMgdG8gYmUgc3luY2hyb25pemVkLlxyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHVzZXIgJiYgdGhpcy5jdXJyZW50VXNlci51aWQgPT09IHVzZXIudWlkKSB7XHJcbiAgICAgICAgICAgIC8vIERhdGEgdXBkYXRlLCBzaW1wbHkgY29weSBkYXRhIGNoYW5nZXMuXHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9hc3NpZ24odXNlcik7XHJcbiAgICAgICAgICAgIC8vIElmIHRva2VucyBjaGFuZ2VkIGZyb20gcHJldmlvdXMgdXNlciB0b2tlbnMsIHRoaXMgd2lsbCB0cmlnZ2VyXHJcbiAgICAgICAgICAgIC8vIG5vdGlmeUF1dGhMaXN0ZW5lcnNfLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmN1cnJlbnRVc2VyLmdldElkVG9rZW4oKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBVcGRhdGUgY3VycmVudCBBdXRoIHN0YXRlLiBFaXRoZXIgYSBuZXcgbG9naW4gb3IgbG9nb3V0LlxyXG4gICAgICAgIC8vIFNraXAgYmxvY2tpbmcgY2FsbGJhY2tzLCB0aGV5IHNob3VsZCBub3QgYXBwbHkgdG8gYSBjaGFuZ2UgaW4gYW5vdGhlciB0YWIuXHJcbiAgICAgICAgYXdhaXQgdGhpcy5fdXBkYXRlQ3VycmVudFVzZXIodXNlciwgLyogc2tpcEJlZm9yZVN0YXRlQ2FsbGJhY2tzICovIHRydWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZUN1cnJlbnRVc2VyKHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBGaXJzdCBjaGVjayB0byBzZWUgaWYgd2UgaGF2ZSBhIHBlbmRpbmcgcmVkaXJlY3QgZXZlbnQuXHJcbiAgICAgICAgY29uc3QgcHJldmlvdXNseVN0b3JlZFVzZXIgPSAoYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLmdldEN1cnJlbnRVc2VyKCkpO1xyXG4gICAgICAgIGxldCBmdXR1cmVDdXJyZW50VXNlciA9IHByZXZpb3VzbHlTdG9yZWRVc2VyO1xyXG4gICAgICAgIGxldCBuZWVkc1RvY2hlY2tNaWRkbGV3YXJlID0gZmFsc2U7XHJcbiAgICAgICAgaWYgKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiB0aGlzLmNvbmZpZy5hdXRoRG9tYWluKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgcmVkaXJlY3RVc2VyRXZlbnRJZCA9IChfYSA9IHRoaXMucmVkaXJlY3RVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVXNlckV2ZW50SWQgPSBmdXR1cmVDdXJyZW50VXNlciA9PT0gbnVsbCB8fCBmdXR1cmVDdXJyZW50VXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZnV0dXJlQ3VycmVudFVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdGhpcy50cnlSZWRpcmVjdFNpZ25Jbihwb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgICAgICAgICAvLyBJZiB0aGUgc3RvcmVkIHVzZXIgKGkuZS4gdGhlIG9sZCBcImN1cnJlbnRVc2VyXCIpIGhhcyBhIHJlZGlyZWN0SWQgdGhhdFxyXG4gICAgICAgICAgICAvLyBtYXRjaGVzIHRoZSByZWRpcmVjdCB1c2VyLCB0aGVuIHdlIHdhbnQgdG8gaW5pdGlhbGx5IHNpZ24gaW4gd2l0aCB0aGVcclxuICAgICAgICAgICAgLy8gbmV3IHVzZXIgb2JqZWN0IGZyb20gcmVzdWx0LlxyXG4gICAgICAgICAgICAvLyBUT0RPKHNhbWdobyk6IE1vcmUgdGhvcm91Z2hseSB0ZXN0IGFsbCBvZiB0aGlzXHJcbiAgICAgICAgICAgIGlmICgoIXJlZGlyZWN0VXNlckV2ZW50SWQgfHwgcmVkaXJlY3RVc2VyRXZlbnRJZCA9PT0gc3RvcmVkVXNlckV2ZW50SWQpICYmXHJcbiAgICAgICAgICAgICAgICAocmVzdWx0ID09PSBudWxsIHx8IHJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzdWx0LnVzZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBmdXR1cmVDdXJyZW50VXNlciA9IHJlc3VsdC51c2VyO1xyXG4gICAgICAgICAgICAgICAgbmVlZHNUb2NoZWNrTWlkZGxld2FyZSA9IHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgbm8gdXNlciBpbiBwZXJzaXN0ZW5jZSwgdGhlcmUgaXMgbm8gY3VycmVudCB1c2VyLiBTZXQgdG8gbnVsbC5cclxuICAgICAgICBpZiAoIWZ1dHVyZUN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghZnV0dXJlQ3VycmVudFVzZXIuX3JlZGlyZWN0RXZlbnRJZCkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzbid0IGEgcmVkaXJlY3QgbGluayBvcGVyYXRpb24sIHdlIGNhbiByZWxvYWQgYW5kIGJhaWwuXHJcbiAgICAgICAgICAgIC8vIEZpcnN0IHRob3VnaCwgZW5zdXJlIHRoYXQgd2UgY2hlY2sgdGhlIG1pZGRsZXdhcmUgaXMgaGFwcHkuXHJcbiAgICAgICAgICAgIGlmIChuZWVkc1RvY2hlY2tNaWRkbGV3YXJlKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYmVmb3JlU3RhdGVRdWV1ZS5ydW5NaWRkbGV3YXJlKGZ1dHVyZUN1cnJlbnRVc2VyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnV0dXJlQ3VycmVudFVzZXIgPSBwcmV2aW91c2x5U3RvcmVkVXNlcjtcclxuICAgICAgICAgICAgICAgICAgICAvLyBXZSBrbm93IHRoaXMgaXMgYXZhaWxhYmxlIHNpbmNlIHRoZSBiaXQgaXMgb25seSBzZXQgd2hlbiB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyByZXNvbHZlciBpcyBhdmFpbGFibGVcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIuX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQodGhpcywgKCkgPT4gUHJvbWlzZS5yZWplY3QoZSkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChmdXR1cmVDdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVsb2FkQW5kU2V0Q3VycmVudFVzZXJPckNsZWFyKGZ1dHVyZUN1cnJlbnRVc2VyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIsIHRoaXMsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmdldE9ySW5pdFJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKCk7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHVzZXIncyBldmVudCBJRCBtYXRjaGVzIHRoZSBjdXJyZW50IHVzZXIncyBldmVudCBJRCxcclxuICAgICAgICAvLyBETyBOT1QgcmVsb2FkIHRoZSBjdXJyZW50IHVzZXIsIG90aGVyd2lzZSB0aGV5J2xsIGJlIGNsZWFyZWQgZnJvbSBzdG9yYWdlLlxyXG4gICAgICAgIC8vIFRoaXMgaXMgaW1wb3J0YW50IGZvciB0aGUgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QoKSBmbG93LlxyXG4gICAgICAgIGlmICh0aGlzLnJlZGlyZWN0VXNlciAmJlxyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0VXNlci5fcmVkaXJlY3RFdmVudElkID09PSBmdXR1cmVDdXJyZW50VXNlci5fcmVkaXJlY3RFdmVudElkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIoZnV0dXJlQ3VycmVudFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5yZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIoZnV0dXJlQ3VycmVudFVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdHJ5UmVkaXJlY3RTaWduSW4ocmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIC8vIFRoZSByZWRpcmVjdCB1c2VyIG5lZWRzIHRvIGJlIGNoZWNrZWQgKGFuZCBzaWduZWQgaW4gaWYgYXZhaWxhYmxlKVxyXG4gICAgICAgIC8vIGR1cmluZyBhdXRoIGluaXRpYWxpemF0aW9uLiBBbGwgb2YgdGhlIG5vcm1hbCBzaWduIGluIGFuZCBsaW5rL3JlYXV0aFxyXG4gICAgICAgIC8vIGZsb3dzIGNhbGwgYmFjayBpbnRvIGF1dGggYW5kIHB1c2ggdGhpbmdzIG9udG8gdGhlIHByb21pc2UgcXVldWUuIFdlXHJcbiAgICAgICAgLy8gbmVlZCB0byBhd2FpdCB0aGUgcmVzdWx0IG9mIHRoZSByZWRpcmVjdCBzaWduIGluICppbnNpZGUgdGhlIHByb21pc2VcclxuICAgICAgICAvLyBxdWV1ZSouIFRoaXMgcHJlc2VudHMgYSBwcm9ibGVtOiB3ZSBydW4gaW50byBkZWFkbG9jay4gU2VlOlxyXG4gICAgICAgIC8vICAgIOKUjD4gW0luaXRpYWxpemF0aW9uXSDilIDilIDilIDilIDilIDilJBcclxuICAgICAgICAvLyAgICDilIw+IFs8b3RoZXIgcXVldWUgdGFza3M+XSDilIJcclxuICAgICAgICAvLyAgICDilJTilIAgW2dldFJlZGlyZWN0UmVzdWx0XSA84pSA4pSYXHJcbiAgICAgICAgLy8gICAgd2hlcmUgW10gYXJlIHRhc2tzIG9uIHRoZSBxdWV1ZSBhbmQgYXJyb3dzIGRlbm90ZSBhd2FpdHNcclxuICAgICAgICAvLyBJbml0aWFsaXphdGlvbiB3aWxsIG5ldmVyIGNvbXBsZXRlIGJlY2F1c2UgaXQncyB3YWl0aW5nIG9uIHNvbWV0aGluZ1xyXG4gICAgICAgIC8vIHRoYXQncyB3YWl0aW5nIGZvciBpbml0aWFsaXphdGlvbiB0byBjb21wbGV0ZSFcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vIEluc3RlYWQsIHRoaXMgbWV0aG9kIGNhbGxzIGdldFJlZGlyZWN0UmVzdWx0KCkgKHN0b3JlZCBpblxyXG4gICAgICAgIC8vIF9jb21wbGV0ZVJlZGlyZWN0Rm4pIHdpdGggYW4gb3B0aW9uYWwgcGFyYW1ldGVyIHRoYXQgaW5zdHJ1Y3RzIGFsbCBvZlxyXG4gICAgICAgIC8vIHRoZSB1bmRlcmx5aW5nIGF1dGggb3BlcmF0aW9ucyB0byBza2lwIGFueXRoaW5nIHRoYXQgbXV0YXRlcyBhdXRoIHN0YXRlLlxyXG4gICAgICAgIGxldCByZXN1bHQgPSBudWxsO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFdlIGtub3cgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyIGlzIHNldCBzaW5jZSByZWRpcmVjdFJlc29sdmVyXHJcbiAgICAgICAgICAgIC8vIGlzIHBhc3NlZCBpbi4gVGhlIF9jb21wbGV0ZVJlZGlyZWN0Rm4gZXhwZWN0cyB0aGUgdW53cmFwcGVkIGV4dGVybi5cclxuICAgICAgICAgICAgcmVzdWx0ID0gYXdhaXQgdGhpcy5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLl9jb21wbGV0ZVJlZGlyZWN0Rm4odGhpcywgcmVkaXJlY3RSZXNvbHZlciwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIFN3YWxsb3cgYW55IGVycm9ycyBoZXJlOyB0aGUgY29kZSBjYW4gcmV0cmlldmUgdGhlbSBpblxyXG4gICAgICAgICAgICAvLyBnZXRSZWRpcmVjdFJlc3VsdCgpLlxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl9zZXRSZWRpcmVjdFVzZXIobnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyByZWxvYWRBbmRTZXRDdXJyZW50VXNlck9yQ2xlYXIodXNlcikge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IF9yZWxvYWRXaXRob3V0U2F2aW5nKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBpZiAoKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5jb2RlKSAhPT1cclxuICAgICAgICAgICAgICAgIGBhdXRoLyR7XCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovfWApIHtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWV0aGluZydzIHdyb25nIHdpdGggdGhlIHVzZXIncyB0b2tlbi4gTG9nIHRoZW0gb3V0IGFuZCByZW1vdmVcclxuICAgICAgICAgICAgICAgIC8vIHRoZW0gZnJvbSBzdG9yYWdlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKG51bGwpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcik7XHJcbiAgICB9XHJcbiAgICB1c2VEZXZpY2VMYW5ndWFnZSgpIHtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IF9nZXRVc2VyTGFuZ3VhZ2UoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9kZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZXRlZCA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1cGRhdGVDdXJyZW50VXNlcih1c2VyRXh0ZXJuKSB7XHJcbiAgICAgICAgLy8gVGhlIHB1YmxpYyB1cGRhdGVDdXJyZW50VXNlciBtZXRob2QgbmVlZHMgdG8gbWFrZSBhIGNvcHkgb2YgdGhlIHVzZXIsXHJcbiAgICAgICAgLy8gYW5kIGFsc28gY2hlY2sgdGhhdCB0aGUgcHJvamVjdCBtYXRjaGVzXHJcbiAgICAgICAgY29uc3QgdXNlciA9IHVzZXJFeHRlcm5cclxuICAgICAgICAgICAgPyBnZXRNb2R1bGFySW5zdGFuY2UodXNlckV4dGVybilcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGlmICh1c2VyKSB7XHJcbiAgICAgICAgICAgIF9hc3NlcnQodXNlci5hdXRoLmNvbmZpZy5hcGlLZXkgPT09IHRoaXMuY29uZmlnLmFwaUtleSwgdGhpcywgXCJpbnZhbGlkLXVzZXItdG9rZW5cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQVVUSCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcih1c2VyICYmIHVzZXIuX2Nsb25lKHRoaXMpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF91cGRhdGVDdXJyZW50VXNlcih1c2VyLCBza2lwQmVmb3JlU3RhdGVDYWxsYmFja3MgPSBmYWxzZSkge1xyXG4gICAgICAgIGlmICh0aGlzLl9kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgX2Fzc2VydCh0aGlzLnRlbmFudElkID09PSB1c2VyLnRlbmFudElkLCB0aGlzLCBcInRlbmFudC1pZC1taXNtYXRjaFwiIC8qIEF1dGhFcnJvckNvZGUuVEVOQU5UX0lEX01JU01BVENIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFza2lwQmVmb3JlU3RhdGVDYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5iZWZvcmVTdGF0ZVF1ZXVlLnJ1bk1pZGRsZXdhcmUodXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5kaXJlY3RseVNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgLy8gUnVuIGZpcnN0LCB0byBibG9jayBfc2V0UmVkaXJlY3RVc2VyKCkgaWYgYW55IGNhbGxiYWNrcyBmYWlsLlxyXG4gICAgICAgIGF3YWl0IHRoaXMuYmVmb3JlU3RhdGVRdWV1ZS5ydW5NaWRkbGV3YXJlKG51bGwpO1xyXG4gICAgICAgIC8vIENsZWFyIHRoZSByZWRpcmVjdCB1c2VyIHdoZW4gc2lnbk91dCBpcyBjYWxsZWRcclxuICAgICAgICBpZiAodGhpcy5yZWRpcmVjdFBlcnNpc3RlbmNlTWFuYWdlciB8fCB0aGlzLl9wb3B1cFJlZGlyZWN0UmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5fc2V0UmVkaXJlY3RVc2VyKG51bGwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBQcmV2ZW50IGNhbGxiYWNrcyBmcm9tIGJlaW5nIGNhbGxlZCBhZ2FpbiBpbiBfdXBkYXRlQ3VycmVudFVzZXIsIGFzXHJcbiAgICAgICAgLy8gdGhleSB3ZXJlIGFscmVhZHkgY2FsbGVkIGluIHRoZSBmaXJzdCBsaW5lLlxyXG4gICAgICAgIHJldHVybiB0aGlzLl91cGRhdGVDdXJyZW50VXNlcihudWxsLCAvKiBza2lwQmVmb3JlU3RhdGVDYWxsYmFja3MgKi8gdHJ1ZSk7XHJcbiAgICB9XHJcbiAgICBzZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnF1ZXVlKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnNldFBlcnNpc3RlbmNlKF9nZXRJbnN0YW5jZShwZXJzaXN0ZW5jZSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVJlY2FwdGNoYUNvbmZpZygpIHtcclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdldFJlY2FwdGNoYUNvbmZpZyh0aGlzLCB7XHJcbiAgICAgICAgICAgIGNsaWVudFR5cGU6IFwiQ0xJRU5UX1RZUEVfV0VCXCIgLyogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIgKi8sXHJcbiAgICAgICAgICAgIHZlcnNpb246IFwiUkVDQVBUQ0hBX0VOVEVSUFJJU0VcIiAvKiBSZWNhcHRjaGFWZXJzaW9uLkVOVEVSUFJJU0UgKi9cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjb25maWcgPSBuZXcgUmVjYXB0Y2hhQ29uZmlnKHJlc3BvbnNlKTtcclxuICAgICAgICBpZiAodGhpcy50ZW5hbnRJZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2FnZW50UmVjYXB0Y2hhQ29uZmlnID0gY29uZmlnO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fdGVuYW50UmVjYXB0Y2hhQ29uZmlnc1t0aGlzLnRlbmFudElkXSA9IGNvbmZpZztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGNvbmZpZy5lbWFpbFBhc3N3b3JkRW5hYmxlZCkge1xyXG4gICAgICAgICAgICBjb25zdCB2ZXJpZmllciA9IG5ldyBSZWNhcHRjaGFFbnRlcnByaXNlVmVyaWZpZXIodGhpcyk7XHJcbiAgICAgICAgICAgIHZvaWQgdmVyaWZpZXIudmVyaWZ5KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX2dldFJlY2FwdGNoYUNvbmZpZygpIHtcclxuICAgICAgICBpZiAodGhpcy50ZW5hbnRJZCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9hZ2VudFJlY2FwdGNoYUNvbmZpZztcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl90ZW5hbnRSZWNhcHRjaGFDb25maWdzW3RoaXMudGVuYW50SWRdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIF9nZXRQZXJzaXN0ZW5jZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnBlcnNpc3RlbmNlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBfdXBkYXRlRXJyb3JNYXAoZXJyb3JNYXApIHtcclxuICAgICAgICB0aGlzLl9lcnJvckZhY3RvcnkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhdXRoJywgJ0ZpcmViYXNlJywgZXJyb3JNYXAoKSk7XHJcbiAgICB9XHJcbiAgICBvbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZWdpc3RlclN0YXRlTGlzdGVuZXIodGhpcy5hdXRoU3RhdGVTdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxuICAgIH1cclxuICAgIGJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQoY2FsbGJhY2ssIG9uQWJvcnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5iZWZvcmVTdGF0ZVF1ZXVlLnB1c2hDYWxsYmFjayhjYWxsYmFjaywgb25BYm9ydCk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVnaXN0ZXJTdGF0ZUxpc3RlbmVyKHRoaXMuaWRUb2tlblN1YnNjcmlwdGlvbiwgbmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuY29uZmlnLmFwaUtleSxcclxuICAgICAgICAgICAgYXV0aERvbWFpbjogdGhpcy5jb25maWcuYXV0aERvbWFpbixcclxuICAgICAgICAgICAgYXBwTmFtZTogdGhpcy5uYW1lLFxyXG4gICAgICAgICAgICBjdXJyZW50VXNlcjogKF9hID0gdGhpcy5fY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS50b0pTT04oKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBhc3luYyBfc2V0UmVkaXJlY3RVc2VyKHVzZXIsIHBvcHVwUmVkaXJlY3RSZXNvbHZlcikge1xyXG4gICAgICAgIGNvbnN0IHJlZGlyZWN0TWFuYWdlciA9IGF3YWl0IHRoaXMuZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICByZXR1cm4gdXNlciA9PT0gbnVsbFxyXG4gICAgICAgICAgICA/IHJlZGlyZWN0TWFuYWdlci5yZW1vdmVDdXJyZW50VXNlcigpXHJcbiAgICAgICAgICAgIDogcmVkaXJlY3RNYW5hZ2VyLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZ2V0T3JJbml0UmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIocG9wdXBSZWRpcmVjdFJlc29sdmVyKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc29sdmVyID0gKHBvcHVwUmVkaXJlY3RSZXNvbHZlciAmJiBfZ2V0SW5zdGFuY2UocG9wdXBSZWRpcmVjdFJlc29sdmVyKSkgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3BvcHVwUmVkaXJlY3RSZXNvbHZlcjtcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNvbHZlciwgdGhpcywgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICB0aGlzLnJlZGlyZWN0UGVyc2lzdGVuY2VNYW5hZ2VyID0gYXdhaXQgUGVyc2lzdGVuY2VVc2VyTWFuYWdlci5jcmVhdGUodGhpcywgW19nZXRJbnN0YW5jZShyZXNvbHZlci5fcmVkaXJlY3RQZXJzaXN0ZW5jZSldLCBcInJlZGlyZWN0VXNlclwiIC8qIEtleU5hbWUuUkVESVJFQ1RfVVNFUiAqLyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkaXJlY3RVc2VyID1cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXIuZ2V0Q3VycmVudFVzZXIoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVkaXJlY3RQZXJzaXN0ZW5jZU1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVkaXJlY3RVc2VyRm9ySWQoaWQpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIC8vIE1ha2Ugc3VyZSB3ZSd2ZSBjbGVhcmVkIGFueSBwZW5kaW5nIHBlcnNpc3RlbmNlIGFjdGlvbnMgaWYgd2UncmUgbm90IGluXHJcbiAgICAgICAgLy8gdGhlIGluaXRpYWxpemVyXHJcbiAgICAgICAgaWYgKHRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB7IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKChfYSA9IHRoaXMuX2N1cnJlbnRVc2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3JlZGlyZWN0RXZlbnRJZCkgPT09IGlkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW50VXNlcjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2IgPSB0aGlzLnJlZGlyZWN0VXNlcikgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLl9yZWRpcmVjdEV2ZW50SWQpID09PSBpZCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZWRpcmVjdFVzZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXIpIHtcclxuICAgICAgICBpZiAodXNlciA9PT0gdGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZShhc3luYyAoKSA9PiB0aGlzLmRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBOb3RpZmllcyBsaXN0ZW5lcnMgb25seSBpZiB0aGUgdXNlciBpcyBjdXJyZW50ICovXHJcbiAgICBfbm90aWZ5TGlzdGVuZXJzSWZDdXJyZW50KHVzZXIpIHtcclxuICAgICAgICBpZiAodXNlciA9PT0gdGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUF1dGhMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfa2V5KCkge1xyXG4gICAgICAgIHJldHVybiBgJHt0aGlzLmNvbmZpZy5hdXRoRG9tYWlufToke3RoaXMuY29uZmlnLmFwaUtleX06JHt0aGlzLm5hbWV9YDtcclxuICAgIH1cclxuICAgIF9zdGFydFByb2FjdGl2ZVJlZnJlc2goKSB7XHJcbiAgICAgICAgdGhpcy5pc1Byb2FjdGl2ZVJlZnJlc2hFbmFibGVkID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICB0aGlzLl9jdXJyZW50VXNlci5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRVc2VyLl9zdG9wUHJvYWN0aXZlUmVmcmVzaCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBSZXR1cm5zIHRoZSBjdXJyZW50IHVzZXIgY2FzdCBhcyB0aGUgaW50ZXJuYWwgdHlwZSAqL1xyXG4gICAgZ2V0IF9jdXJyZW50VXNlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50VXNlcjtcclxuICAgIH1cclxuICAgIG5vdGlmeUF1dGhMaXN0ZW5lcnMoKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYjtcclxuICAgICAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmlkVG9rZW5TdWJzY3JpcHRpb24ubmV4dCh0aGlzLmN1cnJlbnRVc2VyKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50VWlkID0gKF9iID0gKF9hID0gdGhpcy5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcclxuICAgICAgICBpZiAodGhpcy5sYXN0Tm90aWZpZWRVaWQgIT09IGN1cnJlbnRVaWQpIHtcclxuICAgICAgICAgICAgdGhpcy5sYXN0Tm90aWZpZWRVaWQgPSBjdXJyZW50VWlkO1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhTdGF0ZVN1YnNjcmlwdGlvbi5uZXh0KHRoaXMuY3VycmVudFVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJlZ2lzdGVyU3RhdGVMaXN0ZW5lcihzdWJzY3JpcHRpb24sIG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuICgpID0+IHsgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgY2IgPSB0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgPT09ICdmdW5jdGlvbidcclxuICAgICAgICAgICAgPyBuZXh0T3JPYnNlcnZlclxyXG4gICAgICAgICAgICA6IG5leHRPck9ic2VydmVyLm5leHQuYmluZChuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuX2lzSW5pdGlhbGl6ZWRcclxuICAgICAgICAgICAgPyBQcm9taXNlLnJlc29sdmUoKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBfYXNzZXJ0KHByb21pc2UsIHRoaXMsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAvLyBUaGUgY2FsbGJhY2sgbmVlZHMgdG8gYmUgY2FsbGVkIGFzeW5jaHJvbm91c2x5IHBlciB0aGUgc3BlYy5cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXHJcbiAgICAgICAgcHJvbWlzZS50aGVuKCgpID0+IGNiKHRoaXMuY3VycmVudFVzZXIpKTtcclxuICAgICAgICBpZiAodHlwZW9mIG5leHRPck9ic2VydmVyID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdWJzY3JpcHRpb24uYWRkT2JzZXJ2ZXIobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHN1YnNjcmlwdGlvbi5hZGRPYnNlcnZlcihuZXh0T3JPYnNlcnZlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVbnByb3RlY3RlZCAoZnJvbSByYWNlIGNvbmRpdGlvbnMpIG1ldGhvZCB0byBzZXQgdGhlIGN1cnJlbnQgdXNlci4gVGhpc1xyXG4gICAgICogc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gd2l0aGluIGEgcXVldWVkIGNhbGxiYWNrLiBUaGlzIGlzIG5lY2Vzc2FyeVxyXG4gICAgICogYmVjYXVzZSB0aGUgcXVldWUgc2hvdWxkbid0IHJlbHkgb24gYW5vdGhlciBxdWV1ZWQgY2FsbGJhY2suXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGRpcmVjdGx5U2V0Q3VycmVudFVzZXIodXNlcikge1xyXG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRVc2VyICYmIHRoaXMuY3VycmVudFVzZXIgIT09IHVzZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5fY3VycmVudFVzZXIuX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VyICYmIHRoaXMuaXNQcm9hY3RpdmVSZWZyZXNoRW5hYmxlZCkge1xyXG4gICAgICAgICAgICB1c2VyLl9zdGFydFByb2FjdGl2ZVJlZnJlc2goKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IHVzZXI7XHJcbiAgICAgICAgaWYgKHVzZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnNldEN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5hc3NlcnRlZFBlcnNpc3RlbmNlLnJlbW92ZUN1cnJlbnRVc2VyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcXVldWUoYWN0aW9uKSB7XHJcbiAgICAgICAgLy8gSW4gY2FzZSBzb21ldGhpbmcgZXJyb3JzLCB0aGUgY2FsbGJhY2sgc3RpbGwgc2hvdWxkIGJlIGNhbGxlZCBpbiBvcmRlclxyXG4gICAgICAgIC8vIHRvIGtlZXAgdGhlIHByb21pc2UgY2hhaW4gYWxpdmVcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbnMgPSB0aGlzLm9wZXJhdGlvbnMudGhlbihhY3Rpb24sIGFjdGlvbik7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub3BlcmF0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBhc3NlcnRlZFBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXIsIHRoaXMsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZU1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfbG9nRnJhbWV3b3JrKGZyYW1ld29yaykge1xyXG4gICAgICAgIGlmICghZnJhbWV3b3JrIHx8IHRoaXMuZnJhbWV3b3Jrcy5pbmNsdWRlcyhmcmFtZXdvcmspKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5mcmFtZXdvcmtzLnB1c2goZnJhbWV3b3JrKTtcclxuICAgICAgICAvLyBTb3J0IGFscGhhYmV0aWNhbGx5IHNvIHRoYXQgXCJGaXJlYmFzZUNvcmUtd2ViLEZpcmViYXNlVUktd2ViXCIgYW5kXHJcbiAgICAgICAgLy8gXCJGaXJlYmFzZVVJLXdlYixGaXJlYmFzZUNvcmUtd2ViXCIgYXJlbid0IHZpZXdlZCBhcyBkaWZmZXJlbnQuXHJcbiAgICAgICAgdGhpcy5mcmFtZXdvcmtzLnNvcnQoKTtcclxuICAgICAgICB0aGlzLmNsaWVudFZlcnNpb24gPSBfZ2V0Q2xpZW50VmVyc2lvbih0aGlzLmNvbmZpZy5jbGllbnRQbGF0Zm9ybSwgdGhpcy5fZ2V0RnJhbWV3b3JrcygpKTtcclxuICAgIH1cclxuICAgIF9nZXRGcmFtZXdvcmtzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZyYW1ld29ya3M7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfZ2V0QWRkaXRpb25hbEhlYWRlcnMoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIEFkZGl0aW9uYWwgaGVhZGVycyBvbiBldmVyeSByZXF1ZXN0XHJcbiAgICAgICAgY29uc3QgaGVhZGVycyA9IHtcclxuICAgICAgICAgICAgW1wiWC1DbGllbnQtVmVyc2lvblwiIC8qIEh0dHBIZWFkZXIuWF9DTElFTlRfVkVSU0lPTiAqL106IHRoaXMuY2xpZW50VmVyc2lvblxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMuYXBwLm9wdGlvbnMuYXBwSWQpIHtcclxuICAgICAgICAgICAgaGVhZGVyc1tcIlgtRmlyZWJhc2UtZ21waWRcIiAvKiBIdHRwSGVhZGVyLlhfRklSRUJBU0VfR01QSUQgKi9dID0gdGhpcy5hcHAub3B0aW9ucy5hcHBJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgdGhlIGhlYXJ0YmVhdCBzZXJ2aWNlIGV4aXN0cywgYWRkIHRoZSBoZWFydGJlYXQgc3RyaW5nXHJcbiAgICAgICAgY29uc3QgaGVhcnRiZWF0c0hlYWRlciA9IGF3YWl0ICgoX2EgPSB0aGlzLmhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlclxyXG4gICAgICAgICAgICAuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgb3B0aW9uYWw6IHRydWVcclxuICAgICAgICB9KSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldEhlYXJ0YmVhdHNIZWFkZXIoKSk7XHJcbiAgICAgICAgaWYgKGhlYXJ0YmVhdHNIZWFkZXIpIHtcclxuICAgICAgICAgICAgaGVhZGVyc1tcIlgtRmlyZWJhc2UtQ2xpZW50XCIgLyogSHR0cEhlYWRlci5YX0ZJUkVCQVNFX0NMSUVOVCAqL10gPSBoZWFydGJlYXRzSGVhZGVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB0aGUgQXBwIENoZWNrIHNlcnZpY2UgZXhpc3RzLCBhZGQgdGhlIEFwcCBDaGVjayB0b2tlbiBpbiB0aGUgaGVhZGVyc1xyXG4gICAgICAgIGNvbnN0IGFwcENoZWNrVG9rZW4gPSBhd2FpdCB0aGlzLl9nZXRBcHBDaGVja1Rva2VuKCk7XHJcbiAgICAgICAgaWYgKGFwcENoZWNrVG9rZW4pIHtcclxuICAgICAgICAgICAgaGVhZGVyc1tcIlgtRmlyZWJhc2UtQXBwQ2hlY2tcIiAvKiBIdHRwSGVhZGVyLlhfRklSRUJBU0VfQVBQX0NIRUNLICovXSA9IGFwcENoZWNrVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXJzO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldEFwcENoZWNrVG9rZW4oKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGFwcENoZWNrVG9rZW5SZXN1bHQgPSBhd2FpdCAoKF9hID0gdGhpcy5hcHBDaGVja1NlcnZpY2VQcm92aWRlclxyXG4gICAgICAgICAgICAuZ2V0SW1tZWRpYXRlKHsgb3B0aW9uYWw6IHRydWUgfSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5nZXRUb2tlbigpKTtcclxuICAgICAgICBpZiAoYXBwQ2hlY2tUb2tlblJlc3VsdCA9PT0gbnVsbCB8fCBhcHBDaGVja1Rva2VuUmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBhcHBDaGVja1Rva2VuUmVzdWx0LmVycm9yKSB7XHJcbiAgICAgICAgICAgIC8vIENvbnRleHQ6IGFwcENoZWNrLmdldFRva2VuKCkgd2lsbCBuZXZlciB0aHJvdyBldmVuIGlmIGFuIGVycm9yIGhhcHBlbmVkLlxyXG4gICAgICAgICAgICAvLyBJbiB0aGUgZXJyb3IgY2FzZSwgYSBkdW1teSB0b2tlbiB3aWxsIGJlIHJldHVybmVkIGFsb25nIHdpdGggYW4gZXJyb3IgZmllbGQgZGVzY3JpYmluZ1xyXG4gICAgICAgICAgICAvLyB0aGUgZXJyb3IuIEluIGdlbmVyYWwsIHdlIHNob3VsZG4ndCBjYXJlIGFib3V0IHRoZSBlcnJvciBjb25kaXRpb24gYW5kIGp1c3QgdXNlXHJcbiAgICAgICAgICAgIC8vIHRoZSB0b2tlbiAoYWN0dWFsIG9yIGR1bW15KSB0byBzZW5kIHJlcXVlc3RzLlxyXG4gICAgICAgICAgICBfbG9nV2FybihgRXJyb3Igd2hpbGUgcmV0cmlldmluZyBBcHAgQ2hlY2sgdG9rZW46ICR7YXBwQ2hlY2tUb2tlblJlc3VsdC5lcnJvcn1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFwcENoZWNrVG9rZW5SZXN1bHQgPT09IG51bGwgfHwgYXBwQ2hlY2tUb2tlblJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYXBwQ2hlY2tUb2tlblJlc3VsdC50b2tlbjtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogTWV0aG9kIHRvIGJlIHVzZWQgdG8gY2FzdCBkb3duIHRvIG91ciBwcml2YXRlIGltcGxtZW50YXRpb24gb2YgQXV0aC5cclxuICogSXQgd2lsbCBhbHNvIGhhbmRsZSB1bndyYXBwaW5nIGZyb20gdGhlIGNvbXBhdCB0eXBlIGlmIG5lY2Vzc2FyeVxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCBBdXRoIG9iamVjdCBwYXNzZWQgaW4gZnJvbSBkZXZlbG9wZXJcclxuICovXHJcbmZ1bmN0aW9uIF9jYXN0QXV0aChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG59XHJcbi8qKiBIZWxwZXIgY2xhc3MgdG8gd3JhcCBzdWJzY3JpYmVyIGxvZ2ljICovXHJcbmNsYXNzIFN1YnNjcmlwdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLm9ic2VydmVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLmFkZE9ic2VydmVyID0gY3JlYXRlU3Vic2NyaWJlKG9ic2VydmVyID0+ICh0aGlzLm9ic2VydmVyID0gb2JzZXJ2ZXIpKTtcclxuICAgIH1cclxuICAgIGdldCBuZXh0KCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5vYnNlcnZlciwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMub2JzZXJ2ZXIubmV4dC5iaW5kKHRoaXMub2JzZXJ2ZXIpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbml0aWFsaXplcyBhbiB7QGxpbmsgQXV0aH0gaW5zdGFuY2Ugd2l0aCBmaW5lLWdyYWluZWQgY29udHJvbCBvdmVyXHJcbiAqIHtAbGluayBEZXBlbmRlbmNpZXN9LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKlxyXG4gKiBUaGlzIGZ1bmN0aW9uIGFsbG93cyBtb3JlIGNvbnRyb2wgb3ZlciB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRoYW5cclxuICoge0BsaW5rIGdldEF1dGh9LiBgZ2V0QXV0aGAgdXNlcyBwbGF0Zm9ybS1zcGVjaWZpYyBkZWZhdWx0cyB0byBzdXBwbHlcclxuICogdGhlIHtAbGluayBEZXBlbmRlbmNpZXN9LiBJbiBnZW5lcmFsLCBgZ2V0QXV0aGAgaXMgdGhlIGVhc2llc3Qgd2F5IHRvXHJcbiAqIGluaXRpYWxpemUgQXV0aCBhbmQgd29ya3MgZm9yIG1vc3QgdXNlIGNhc2VzLiBVc2UgYGluaXRpYWxpemVBdXRoYCBpZiB5b3VcclxuICogbmVlZCBjb250cm9sIG92ZXIgd2hpY2ggcGVyc2lzdGVuY2UgbGF5ZXIgaXMgdXNlZCwgb3IgdG8gbWluaW1pemUgYnVuZGxlXHJcbiAqIHNpemUgaWYgeW91J3JlIG5vdCB1c2luZyBlaXRoZXIgYHNpZ25JbldpdGhQb3B1cGAgb3IgYHNpZ25JbldpdGhSZWRpcmVjdGAuXHJcbiAqXHJcbiAqIEZvciBleGFtcGxlLCBpZiB5b3VyIGFwcCBvbmx5IHVzZXMgYW5vbnltb3VzIGFjY291bnRzIGFuZCB5b3Ugb25seSB3YW50XHJcbiAqIGFjY291bnRzIHNhdmVkIGZvciB0aGUgY3VycmVudCBzZXNzaW9uLCBpbml0aWFsaXplIGBBdXRoYCB3aXRoOlxyXG4gKlxyXG4gKiBgYGBqc1xyXG4gKiBjb25zdCBhdXRoID0gaW5pdGlhbGl6ZUF1dGgoYXBwLCB7XHJcbiAqICAgcGVyc2lzdGVuY2U6IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2UsXHJcbiAqICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiB1bmRlZmluZWQsXHJcbiAqIH0pO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaW5pdGlhbGl6ZUF1dGgoYXBwLCBkZXBzKSB7XHJcbiAgICBjb25zdCBwcm92aWRlciA9IF9nZXRQcm92aWRlcihhcHAsICdhdXRoJyk7XHJcbiAgICBpZiAocHJvdmlkZXIuaXNJbml0aWFsaXplZCgpKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGluaXRpYWxPcHRpb25zID0gcHJvdmlkZXIuZ2V0T3B0aW9ucygpO1xyXG4gICAgICAgIGlmIChkZWVwRXF1YWwoaW5pdGlhbE9wdGlvbnMsIGRlcHMgIT09IG51bGwgJiYgZGVwcyAhPT0gdm9pZCAwID8gZGVwcyA6IHt9KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXV0aDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiYWxyZWFkeS1pbml0aWFsaXplZFwiIC8qIEF1dGhFcnJvckNvZGUuQUxSRUFEWV9JTklUSUFMSVpFRCAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgYXV0aCA9IHByb3ZpZGVyLmluaXRpYWxpemUoeyBvcHRpb25zOiBkZXBzIH0pO1xyXG4gICAgcmV0dXJuIGF1dGg7XHJcbn1cclxuZnVuY3Rpb24gX2luaXRpYWxpemVBdXRoSW5zdGFuY2UoYXV0aCwgZGVwcykge1xyXG4gICAgY29uc3QgcGVyc2lzdGVuY2UgPSAoZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLnBlcnNpc3RlbmNlKSB8fCBbXTtcclxuICAgIGNvbnN0IGhpZXJhcmNoeSA9IChBcnJheS5pc0FycmF5KHBlcnNpc3RlbmNlKSA/IHBlcnNpc3RlbmNlIDogW3BlcnNpc3RlbmNlXSkubWFwKF9nZXRJbnN0YW5jZSk7XHJcbiAgICBpZiAoZGVwcyA9PT0gbnVsbCB8fCBkZXBzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkZXBzLmVycm9yTWFwKSB7XHJcbiAgICAgICAgYXV0aC5fdXBkYXRlRXJyb3JNYXAoZGVwcy5lcnJvck1hcCk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIHByb21pc2UgaXMgaW50ZW5kZWQgdG8gZmxvYXQ7IGF1dGggaW5pdGlhbGl6YXRpb24gaGFwcGVucyBpbiB0aGVcclxuICAgIC8vIGJhY2tncm91bmQsIG1lYW53aGlsZSB0aGUgYXV0aCBvYmplY3QgbWF5IGJlIHVzZWQgYnkgdGhlIGFwcC5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgIGF1dGguX2luaXRpYWxpemVXaXRoUGVyc2lzdGVuY2UoaGllcmFyY2h5LCBkZXBzID09PSBudWxsIHx8IGRlcHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRlcHMucG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxufVxuXG4vKipcclxuICogQ2hhbmdlcyB0aGUge0BsaW5rIEF1dGh9IGluc3RhbmNlIHRvIGNvbW11bmljYXRlIHdpdGggdGhlIEZpcmViYXNlIEF1dGggRW11bGF0b3IsIGluc3RlYWQgb2YgcHJvZHVjdGlvblxyXG4gKiBGaXJlYmFzZSBBdXRoIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG11c3QgYmUgY2FsbGVkIHN5bmNocm9ub3VzbHkgaW1tZWRpYXRlbHkgZm9sbG93aW5nIHRoZSBmaXJzdCBjYWxsIHRvXHJcbiAqIHtAbGluayBpbml0aWFsaXplQXV0aH0uICBEbyBub3QgdXNlIHdpdGggcHJvZHVjdGlvbiBjcmVkZW50aWFscyBhcyBlbXVsYXRvclxyXG4gKiB0cmFmZmljIGlzIG5vdCBlbmNyeXB0ZWQuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCAnaHR0cDovLzEyNy4wLjAuMTo5MDk5JywgeyBkaXNhYmxlV2FybmluZ3M6IHRydWUgfSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB1cmwgLSBUaGUgVVJMIGF0IHdoaWNoIHRoZSBlbXVsYXRvciBpcyBydW5uaW5nIChlZywgJ2h0dHA6Ly9sb2NhbGhvc3Q6OTA5OScpLlxyXG4gKiBAcGFyYW0gb3B0aW9ucyAtIE9wdGlvbmFsLiBgb3B0aW9ucy5kaXNhYmxlV2FybmluZ3NgIGRlZmF1bHRzIHRvIGBmYWxzZWAuIFNldCBpdCB0b1xyXG4gKiBgdHJ1ZWAgdG8gZGlzYWJsZSB0aGUgd2FybmluZyBiYW5uZXIgYXR0YWNoZWQgdG8gdGhlIERPTS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gY29ubmVjdEF1dGhFbXVsYXRvcihhdXRoLCB1cmwsIG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIF9hc3NlcnQoYXV0aEludGVybmFsLl9jYW5Jbml0RW11bGF0b3IsIGF1dGhJbnRlcm5hbCwgXCJlbXVsYXRvci1jb25maWctZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5FTVVMQVRPUl9DT05GSUdfRkFJTEVEICovKTtcclxuICAgIF9hc3NlcnQoL15odHRwcz86XFwvXFwvLy50ZXN0KHVybCksIGF1dGhJbnRlcm5hbCwgXCJpbnZhbGlkLWVtdWxhdG9yLXNjaGVtZVwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9FTVVMQVRPUl9TQ0hFTUUgKi8pO1xyXG4gICAgY29uc3QgZGlzYWJsZVdhcm5pbmdzID0gISEob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLmRpc2FibGVXYXJuaW5ncyk7XHJcbiAgICBjb25zdCBwcm90b2NvbCA9IGV4dHJhY3RQcm90b2NvbCh1cmwpO1xyXG4gICAgY29uc3QgeyBob3N0LCBwb3J0IH0gPSBleHRyYWN0SG9zdEFuZFBvcnQodXJsKTtcclxuICAgIGNvbnN0IHBvcnRTdHIgPSBwb3J0ID09PSBudWxsID8gJycgOiBgOiR7cG9ydH1gO1xyXG4gICAgLy8gQWx3YXlzIHJlcGxhY2UgcGF0aCB3aXRoIFwiL1wiIChldmVuIGlmIGlucHV0IHVybCBoYWQgbm8gcGF0aCBhdCBhbGwsIG9yIGhhZCBhIGRpZmZlcmVudCBvbmUpLlxyXG4gICAgYXV0aEludGVybmFsLmNvbmZpZy5lbXVsYXRvciA9IHsgdXJsOiBgJHtwcm90b2NvbH0vLyR7aG9zdH0ke3BvcnRTdHJ9L2AgfTtcclxuICAgIGF1dGhJbnRlcm5hbC5zZXR0aW5ncy5hcHBWZXJpZmljYXRpb25EaXNhYmxlZEZvclRlc3RpbmcgPSB0cnVlO1xyXG4gICAgYXV0aEludGVybmFsLmVtdWxhdG9yQ29uZmlnID0gT2JqZWN0LmZyZWV6ZSh7XHJcbiAgICAgICAgaG9zdCxcclxuICAgICAgICBwb3J0LFxyXG4gICAgICAgIHByb3RvY29sOiBwcm90b2NvbC5yZXBsYWNlKCc6JywgJycpLFxyXG4gICAgICAgIG9wdGlvbnM6IE9iamVjdC5mcmVlemUoeyBkaXNhYmxlV2FybmluZ3MgfSlcclxuICAgIH0pO1xyXG4gICAgaWYgKCFkaXNhYmxlV2FybmluZ3MpIHtcclxuICAgICAgICBlbWl0RW11bGF0b3JXYXJuaW5nKCk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdFByb3RvY29sKHVybCkge1xyXG4gICAgY29uc3QgcHJvdG9jb2xFbmQgPSB1cmwuaW5kZXhPZignOicpO1xyXG4gICAgcmV0dXJuIHByb3RvY29sRW5kIDwgMCA/ICcnIDogdXJsLnN1YnN0cigwLCBwcm90b2NvbEVuZCArIDEpO1xyXG59XHJcbmZ1bmN0aW9uIGV4dHJhY3RIb3N0QW5kUG9ydCh1cmwpIHtcclxuICAgIGNvbnN0IHByb3RvY29sID0gZXh0cmFjdFByb3RvY29sKHVybCk7XHJcbiAgICBjb25zdCBhdXRob3JpdHkgPSAvKFxcL1xcLyk/KFtePyMvXSspLy5leGVjKHVybC5zdWJzdHIocHJvdG9jb2wubGVuZ3RoKSk7IC8vIEJldHdlZW4gLy8gYW5kIC8sID8gb3IgIy5cclxuICAgIGlmICghYXV0aG9yaXR5KSB7XHJcbiAgICAgICAgcmV0dXJuIHsgaG9zdDogJycsIHBvcnQ6IG51bGwgfTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhvc3RBbmRQb3J0ID0gYXV0aG9yaXR5WzJdLnNwbGl0KCdAJykucG9wKCkgfHwgJyc7IC8vIFN0cmlwIG91dCBcInVzZXJuYW1lOnBhc3N3b3JkQFwiLlxyXG4gICAgY29uc3QgYnJhY2tldGVkSVB2NiA9IC9eKFxcW1teXFxdXStcXF0pKDp8JCkvLmV4ZWMoaG9zdEFuZFBvcnQpO1xyXG4gICAgaWYgKGJyYWNrZXRlZElQdjYpIHtcclxuICAgICAgICBjb25zdCBob3N0ID0gYnJhY2tldGVkSVB2NlsxXTtcclxuICAgICAgICByZXR1cm4geyBob3N0LCBwb3J0OiBwYXJzZVBvcnQoaG9zdEFuZFBvcnQuc3Vic3RyKGhvc3QubGVuZ3RoICsgMSkpIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBjb25zdCBbaG9zdCwgcG9ydF0gPSBob3N0QW5kUG9ydC5zcGxpdCgnOicpO1xyXG4gICAgICAgIHJldHVybiB7IGhvc3QsIHBvcnQ6IHBhcnNlUG9ydChwb3J0KSB9O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHBhcnNlUG9ydChwb3J0U3RyKSB7XHJcbiAgICBpZiAoIXBvcnRTdHIpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHBvcnQgPSBOdW1iZXIocG9ydFN0cik7XHJcbiAgICBpZiAoaXNOYU4ocG9ydCkpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHJldHVybiBwb3J0O1xyXG59XHJcbmZ1bmN0aW9uIGVtaXRFbXVsYXRvcldhcm5pbmcoKSB7XHJcbiAgICBmdW5jdGlvbiBhdHRhY2hCYW5uZXIoKSB7XHJcbiAgICAgICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJyk7XHJcbiAgICAgICAgY29uc3Qgc3R5ID0gZWwuc3R5bGU7XHJcbiAgICAgICAgZWwuaW5uZXJUZXh0ID1cclxuICAgICAgICAgICAgJ1J1bm5pbmcgaW4gZW11bGF0b3IgbW9kZS4gRG8gbm90IHVzZSB3aXRoIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJztcclxuICAgICAgICBzdHkucG9zaXRpb24gPSAnZml4ZWQnO1xyXG4gICAgICAgIHN0eS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICBzdHkuYmFja2dyb3VuZENvbG9yID0gJyNmZmZmZmYnO1xyXG4gICAgICAgIHN0eS5ib3JkZXIgPSAnLjFlbSBzb2xpZCAjMDAwMDAwJztcclxuICAgICAgICBzdHkuY29sb3IgPSAnI2I1MDAwMCc7XHJcbiAgICAgICAgc3R5LmJvdHRvbSA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS5sZWZ0ID0gJzBweCc7XHJcbiAgICAgICAgc3R5Lm1hcmdpbiA9ICcwcHgnO1xyXG4gICAgICAgIHN0eS56SW5kZXggPSAnMTAwMDAnO1xyXG4gICAgICAgIHN0eS50ZXh0QWxpZ24gPSAnY2VudGVyJztcclxuICAgICAgICBlbC5jbGFzc0xpc3QuYWRkKCdmaXJlYmFzZS1lbXVsYXRvci13YXJuaW5nJyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChlbCk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBjb25zb2xlLmluZm8gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICBjb25zb2xlLmluZm8oJ1dBUk5JTkc6IFlvdSBhcmUgdXNpbmcgdGhlIEF1dGggRW11bGF0b3IsJyArXHJcbiAgICAgICAgICAgICcgd2hpY2ggaXMgaW50ZW5kZWQgZm9yIGxvY2FsIHRlc3Rpbmcgb25seS4gIERvIG5vdCB1c2Ugd2l0aCcgK1xyXG4gICAgICAgICAgICAnIHByb2R1Y3Rpb24gY3JlZGVudGlhbHMuJyk7XHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIGlmIChkb2N1bWVudC5yZWFkeVN0YXRlID09PSAnbG9hZGluZycpIHtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBhdHRhY2hCYW5uZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgYXR0YWNoQmFubmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgdGhhdCByZXByZXNlbnRzIHRoZSBjcmVkZW50aWFscyByZXR1cm5lZCBieSBhbiB7QGxpbmsgQXV0aFByb3ZpZGVyfS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSW1wbGVtZW50YXRpb25zIHNwZWNpZnkgdGhlIGRldGFpbHMgYWJvdXQgZWFjaCBhdXRoIHByb3ZpZGVyJ3MgY3JlZGVudGlhbCByZXF1aXJlbWVudHMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgYXV0aGVudGljYXRpb24gcHJvdmlkZXIgSUQgZm9yIHRoZSBjcmVkZW50aWFsLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3IgZXhhbXBsZSwgJ2ZhY2Vib29rLmNvbScsIG9yICdnb29nbGUuY29tJy5cclxuICAgICAqL1xyXG4gICAgcHJvdmlkZXJJZCwgXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBhdXRoZW50aWNhdGlvbiBzaWduIGluIG1ldGhvZCBmb3IgdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIEZvciBleGFtcGxlLCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCwgb3JcclxuICAgICAqIHtAbGluayBTaWduSW5NZXRob2R9LkVNQUlMX0xJTksuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHNpZ24taW4gbWV0aG9kXHJcbiAgICAgKiBpZGVudGlmaWVyIGFzIHJldHVybmVkIGluIHtAbGluayBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbH0uXHJcbiAgICAgKi9cclxuICAgIHNpZ25Jbk1ldGhvZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgdGhpcy5zaWduSW5NZXRob2QgPSBzaWduSW5NZXRob2Q7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIG9iamVjdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgb2JqZWN0LlxyXG4gICAgICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfZ2V0SWRUb2tlblJlc3BvbnNlKF9hdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlYnVnRmFpbCgnbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihfYXV0aCwgX2lkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoX2F1dGgpIHtcclxuICAgICAgICByZXR1cm4gZGVidWdGYWlsKCdub3QgaW1wbGVtZW50ZWQnKTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZXNldFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpyZXNldFBhc3N3b3JkXCIgLyogRW5kcG9pbnQuUkVTRVRfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlRW1haWxQYXNzd29yZChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogRW5kcG9pbnQuU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gYXBwbHlBY3Rpb25Db2RlJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnVwZGF0ZVwiIC8qIEVuZHBvaW50LlNFVF9BQ0NPVU5UX0lORk8gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aFBhc3N3b3JkKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGFzc3dvcmRcIiAvKiBFbmRwb2ludC5TSUdOX0lOX1dJVEhfUEFTU1dPUkQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRPb2JDb2RlXCIgLyogRW5kcG9pbnQuU0VORF9PT0JfQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kRW1haWxWZXJpZmljYXRpb24kMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBzZW5kT29iQ29kZShhdXRoLCByZXF1ZXN0KTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzZW5kU2lnbkluTGlua1RvRW1haWwkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gc2VuZE9vYkNvZGUoYXV0aCwgcmVxdWVzdCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5QW5kQ2hhbmdlRW1haWwoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIHNlbmRPb2JDb2RlKGF1dGgsIHJlcXVlc3QpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmskMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aEVtYWlsTGlua1wiIC8qIEVuZHBvaW50LlNJR05fSU5fV0lUSF9FTUFJTF9MSU5LICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmtGb3JMaW5raW5nKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoRW1haWxMaW5rXCIgLyogRW5kcG9pbnQuU0lHTl9JTl9XSVRIX0VNQUlMX0xJTksgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEludGVyZmFjZSB0aGF0IHJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gZm9yXHJcbiAqIHtAbGluayBQcm92aWRlcklkfS5QQVNTV09SRFxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDb3ZlcnMgYm90aCB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2VtYWlsLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9wYXNzd29yZCwgc2lnbkluTWV0aG9kLCBcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF90ZW5hbnRJZCA9IG51bGwpIHtcclxuICAgICAgICBzdXBlcihcInBhc3N3b3JkXCIgLyogUHJvdmlkZXJJZC5QQVNTV09SRCAqLywgc2lnbkluTWV0aG9kKTtcclxuICAgICAgICB0aGlzLl9lbWFpbCA9IF9lbWFpbDtcclxuICAgICAgICB0aGlzLl9wYXNzd29yZCA9IF9wYXNzd29yZDtcclxuICAgICAgICB0aGlzLl90ZW5hbnRJZCA9IF90ZW5hbnRJZDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbUVtYWlsQW5kUGFzc3dvcmQoZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBFbWFpbEF1dGhDcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCwgXCJwYXNzd29yZFwiIC8qIFNpZ25Jbk1ldGhvZC5FTUFJTF9QQVNTV09SRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbWFpbEFuZENvZGUoZW1haWwsIG9vYkNvZGUsIHRlbmFudElkID0gbnVsbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgRW1haWxBdXRoQ3JlZGVudGlhbChlbWFpbCwgb29iQ29kZSwgXCJlbWFpbExpbmtcIiAvKiBTaWduSW5NZXRob2QuRU1BSUxfTElOSyAqLywgdGVuYW50SWQpO1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICovXHJcbiAgICB0b0pTT04oKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICBwYXNzd29yZDogdGhpcy5fcGFzc3dvcmQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2QsXHJcbiAgICAgICAgICAgIHRlbmFudElkOiB0aGlzLl90ZW5hbnRJZFxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuIHtAbGluayAgQXV0aENyZWRlbnRpYWx9LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBqc29uIC0gRWl0aGVyIGBvYmplY3RgIG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LiBXaGVuIHN0cmluZyBpc1xyXG4gICAgICogcHJvdmlkZWQsIGBKU09OLnBhcnNlYCB3b3VsZCBiZSBjYWxsZWQgZmlyc3QuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgSWYgdGhlIEpTT04gaW5wdXQgZG9lcyBub3QgcmVwcmVzZW50IGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0sIG51bGwgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgaWYgKChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmouZW1haWwpICYmIChvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvYmoucGFzc3dvcmQpKSB7XHJcbiAgICAgICAgICAgIGlmIChvYmouc2lnbkluTWV0aG9kID09PSBcInBhc3N3b3JkXCIgLyogU2lnbkluTWV0aG9kLkVNQUlMX1BBU1NXT1JEICovKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZnJvbUVtYWlsQW5kUGFzc3dvcmQob2JqLmVtYWlsLCBvYmoucGFzc3dvcmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKG9iai5zaWduSW5NZXRob2QgPT09IFwiZW1haWxMaW5rXCIgLyogU2lnbkluTWV0aG9kLkVNQUlMX0xJTksgKi8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcm9tRW1haWxBbmRDb2RlKG9iai5lbWFpbCwgb2JqLnBhc3N3b3JkLCBvYmoudGVuYW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgY2FzZSBcInBhc3N3b3JkXCIgLyogU2lnbkluTWV0aG9kLkVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMuX3Bhc3N3b3JkLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsaWVudFR5cGU6IFwiQ0xJRU5UX1RZUEVfV0VCXCIgLyogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIgKi9cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoKF9hID0gYXV0aC5fZ2V0UmVjYXB0Y2hhQ29uZmlnKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWFpbFBhc3N3b3JkRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RXaXRoUmVjYXB0Y2hhID0gYXdhaXQgaW5qZWN0UmVjYXB0Y2hhRmllbGRzKGF1dGgsIHJlcXVlc3QsIFwic2lnbkluV2l0aFBhc3N3b3JkXCIgLyogUmVjYXB0Y2hhQWN0aW9uTmFtZS5TSUdOX0lOX1dJVEhfUEFTU1dPUkQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoUGFzc3dvcmQoYXV0aCwgcmVxdWVzdFdpdGhSZWNhcHRjaGEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhQYXNzd29yZChhdXRoLCByZXF1ZXN0KS5jYXRjaChhc3luYyAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IGBhdXRoLyR7XCJtaXNzaW5nLXJlY2FwdGNoYS10b2tlblwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19SRUNBUFRDSEFfVE9LRU4gKi99YCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1NpZ24taW4gd2l0aCBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZCBpcyBwcm90ZWN0ZWQgYnkgcmVDQVBUQ0hBIGZvciB0aGlzIHByb2plY3QuIEF1dG9tYXRpY2FsbHkgdHJpZ2dlcmluZyB0aGUgcmVDQVBUQ0hBIGZsb3cgYW5kIHJlc3RhcnRpbmcgdGhlIHNpZ24taW4gZmxvdy4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RXaXRoUmVjYXB0Y2hhID0gYXdhaXQgaW5qZWN0UmVjYXB0Y2hhRmllbGRzKGF1dGgsIHJlcXVlc3QsIFwic2lnbkluV2l0aFBhc3N3b3JkXCIgLyogUmVjYXB0Y2hhQWN0aW9uTmFtZS5TSUdOX0lOX1dJVEhfUEFTU1dPUkQgKi8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhQYXNzd29yZChhdXRoLCByZXF1ZXN0V2l0aFJlY2FwdGNoYSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBTaWduSW5NZXRob2QuRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rJDEoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGVtYWlsOiB0aGlzLl9lbWFpbCxcclxuICAgICAgICAgICAgICAgICAgICBvb2JDb2RlOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5zaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgY2FzZSBcInBhc3N3b3JkXCIgLyogU2lnbkluTWV0aG9kLkVNQUlMX1BBU1NXT1JEICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZW1haWw6IHRoaXMuX2VtYWlsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhc3N3b3JkOiB0aGlzLl9wYXNzd29yZFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJlbWFpbExpbmtcIiAvKiBTaWduSW5NZXRob2QuRU1BSUxfTElOSyAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBzaWduSW5XaXRoRW1haWxMaW5rRm9yTGlua2luZyhhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICBlbWFpbDogdGhpcy5fZW1haWwsXHJcbiAgICAgICAgICAgICAgICAgICAgb29iQ29kZTogdGhpcy5fcGFzc3dvcmRcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aElkcFwiIC8qIEVuZHBvaW50LlNJR05fSU5fV0lUSF9JRFAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSURQX1JFUVVFU1RfVVJJJDEgPSAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIHRoZSBPQXV0aCBjcmVkZW50aWFscyByZXR1cm5lZCBieSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEltcGxlbWVudGF0aW9ucyBzcGVjaWZ5IHRoZSBkZXRhaWxzIGFib3V0IGVhY2ggYXV0aCBwcm92aWRlcidzIGNyZWRlbnRpYWwgcmVxdWlyZW1lbnRzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBPQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Rva2VuID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVBhcmFtcyhwYXJhbXMpIHtcclxuICAgICAgICBjb25zdCBjcmVkID0gbmV3IE9BdXRoQ3JlZGVudGlhbChwYXJhbXMucHJvdmlkZXJJZCwgcGFyYW1zLnNpZ25Jbk1ldGhvZCk7XHJcbiAgICAgICAgaWYgKHBhcmFtcy5pZFRva2VuIHx8IHBhcmFtcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAvLyBPQXV0aCAyIGFuZCBlaXRoZXIgSUQgdG9rZW4gb3IgYWNjZXNzIHRva2VuLlxyXG4gICAgICAgICAgICBpZiAocGFyYW1zLmlkVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQuaWRUb2tlbiA9IHBhcmFtcy5pZFRva2VuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMuYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQuYWNjZXNzVG9rZW4gPSBwYXJhbXMuYWNjZXNzVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQWRkIG5vbmNlIGlmIGF2YWlsYWJsZSBhbmQgbm8gcGVuZGluZ1Rva2VuIGlzIHByZXNlbnQuXHJcbiAgICAgICAgICAgIGlmIChwYXJhbXMubm9uY2UgJiYgIXBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQubm9uY2UgPSBwYXJhbXMubm9uY2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhcmFtcy5wZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIGNyZWQucGVuZGluZ1Rva2VuID0gcGFyYW1zLnBlbmRpbmdUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChwYXJhbXMub2F1dGhUb2tlbiAmJiBwYXJhbXMub2F1dGhUb2tlblNlY3JldCkge1xyXG4gICAgICAgICAgICAvLyBPQXV0aCAxIGFuZCBPQXV0aCB0b2tlbiB3aXRoIHRva2VuIHNlY3JldFxyXG4gICAgICAgICAgICBjcmVkLmFjY2Vzc1Rva2VuID0gcGFyYW1zLm9hdXRoVG9rZW47XHJcbiAgICAgICAgICAgIGNyZWQuc2VjcmV0ID0gcGFyYW1zLm9hdXRoVG9rZW5TZWNyZXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBfZmFpbChcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjcmVkO1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGlkVG9rZW46IHRoaXMuaWRUb2tlbixcclxuICAgICAgICAgICAgYWNjZXNzVG9rZW46IHRoaXMuYWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgIHNlY3JldDogdGhpcy5zZWNyZXQsXHJcbiAgICAgICAgICAgIG5vbmNlOiB0aGlzLm5vbmNlLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGVuZGluZ1Rva2VuLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiB0aGlzLnByb3ZpZGVySWQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2RcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTdGF0aWMgbWV0aG9kIHRvIGRlc2VyaWFsaXplIGEgSlNPTiByZXByZXNlbnRhdGlvbiBvZiBhbiBvYmplY3QgaW50byBhblxyXG4gICAgICoge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBJbnB1dCBjYW4gYmUgZWl0aGVyIE9iamVjdCBvciB0aGUgc3RyaW5naWZpZWQgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdC5cclxuICAgICAqIFdoZW4gc3RyaW5nIGlzIHByb3ZpZGVkLCBKU09OLnBhcnNlIHdvdWxkIGJlIGNhbGxlZCBmaXJzdC5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBJZiB0aGUgSlNPTiBpbnB1dCBkb2VzIG5vdCByZXByZXNlbnQgYW4ge0BsaW5rICBBdXRoQ3JlZGVudGlhbH0sIG51bGwgaXMgcmV0dXJuZWQuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgY29uc3QgeyBwcm92aWRlcklkLCBzaWduSW5NZXRob2QgfSA9IG9iaiwgcmVzdCA9IF9fcmVzdChvYmosIFtcInByb3ZpZGVySWRcIiwgXCJzaWduSW5NZXRob2RcIl0pO1xyXG4gICAgICAgIGlmICghcHJvdmlkZXJJZCB8fCAhc2lnbkluTWV0aG9kKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjcmVkID0gbmV3IE9BdXRoQ3JlZGVudGlhbChwcm92aWRlcklkLCBzaWduSW5NZXRob2QpO1xyXG4gICAgICAgIGNyZWQuaWRUb2tlbiA9IHJlc3QuaWRUb2tlbiB8fCB1bmRlZmluZWQ7XHJcbiAgICAgICAgY3JlZC5hY2Nlc3NUb2tlbiA9IHJlc3QuYWNjZXNzVG9rZW4gfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIGNyZWQuc2VjcmV0ID0gcmVzdC5zZWNyZXQ7XHJcbiAgICAgICAgY3JlZC5ub25jZSA9IHJlc3Qubm9uY2U7XHJcbiAgICAgICAgY3JlZC5wZW5kaW5nVG9rZW4gPSByZXN0LnBlbmRpbmdUb2tlbiB8fCBudWxsO1xyXG4gICAgICAgIHJldHVybiBjcmVkO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuYXV0b0NyZWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgYnVpbGRSZXF1ZXN0KCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3RVcmk6IElEUF9SRVFVRVNUX1VSSSQxLFxyXG4gICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMucGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QucGVuZGluZ1Rva2VuID0gdGhpcy5wZW5kaW5nVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zdCBwb3N0Qm9keSA9IHt9O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5pZFRva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keVsnaWRfdG9rZW4nXSA9IHRoaXMuaWRUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5hY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ2FjY2Vzc190b2tlbiddID0gdGhpcy5hY2Nlc3NUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5zZWNyZXQpIHtcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5WydvYXV0aF90b2tlbl9zZWNyZXQnXSA9IHRoaXMuc2VjcmV0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBvc3RCb2R5Wydwcm92aWRlcklkJ10gPSB0aGlzLnByb3ZpZGVySWQ7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm5vbmNlICYmICF0aGlzLnBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcG9zdEJvZHlbJ25vbmNlJ10gPSB0aGlzLm5vbmNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlcXVlc3QucG9zdEJvZHkgPSBxdWVyeXN0cmluZyhwb3N0Qm9keSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNlbmRWZXJpZmljYXRpb25Db2RlXCIgLyogRW5kcG9pbnQuU0VORF9WRVJJRklDQVRJT05fQ09ERSAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1TaWduSW5SZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6c2lnbkluV2l0aFBob25lTnVtYmVyXCIgLyogRW5kcG9pbnQuU0lHTl9JTl9XSVRIX1BIT05FX05VTUJFUiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfcGVyZm9ybVNpZ25JblJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpzaWduSW5XaXRoUGhvbmVOdW1iZXJcIiAvKiBFbmRwb2ludC5TSUdOX0lOX1dJVEhfUEhPTkVfTlVNQkVSICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG4gICAgaWYgKHJlc3BvbnNlLnRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgdGhyb3cgX21ha2VUYWdnZWRFcnJvcihhdXRoLCBcImFjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWxcIiAvKiBBdXRoRXJyb3JDb2RlLk5FRURfQ09ORklSTUFUSU9OICovLCByZXNwb25zZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzcG9uc2U7XHJcbn1cclxuY29uc3QgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyA9IHtcclxuICAgIFtcIlVTRVJfTk9UX0ZPVU5EXCIgLyogU2VydmVyRXJyb3IuVVNFUl9OT1RfRk9VTkQgKi9dOiBcInVzZXItbm90LWZvdW5kXCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX0RFTEVURUQgKi9cclxufTtcclxuYXN5bmMgZnVuY3Rpb24gdmVyaWZ5UGhvbmVOdW1iZXJGb3JFeGlzdGluZyhhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICBjb25zdCBhcGlSZXF1ZXN0ID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByZXF1ZXN0KSwgeyBvcGVyYXRpb246ICdSRUFVVEgnIH0pO1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhQaG9uZU51bWJlclwiIC8qIEVuZHBvaW50LlNJR05fSU5fV0lUSF9QSE9ORV9OVU1CRVIgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCBhcGlSZXF1ZXN0KSwgVkVSSUZZX1BIT05FX05VTUJFUl9GT1JfRVhJU1RJTkdfRVJST1JfTUFQXyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgdGhlIGNyZWRlbnRpYWxzIHJldHVybmVkIGJ5IHtAbGluayBQaG9uZUF1dGhQcm92aWRlcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lQXV0aENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogUHJvdmlkZXJJZC5QSE9ORSAqLywgXCJwaG9uZVwiIC8qIFNpZ25Jbk1ldGhvZC5QSE9ORSAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbXMgPSBwYXJhbXM7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21WZXJpZmljYXRpb24odmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lQXV0aENyZWRlbnRpYWwoeyB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVRva2VuUmVzcG9uc2UocGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHsgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhQaG9uZU51bWJlciQxKGF1dGgsIHRoaXMuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2xpbmtUb0lkVG9rZW4oYXV0aCwgaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBsaW5rV2l0aFBob25lTnVtYmVyJDEoYXV0aCwgT2JqZWN0LmFzc2lnbih7IGlkVG9rZW4gfSwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSkpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHZlcmlmeVBob25lTnVtYmVyRm9yRXhpc3RpbmcoYXV0aCwgdGhpcy5fbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbWFrZVZlcmlmaWNhdGlvblJlcXVlc3QoKSB7XHJcbiAgICAgICAgY29uc3QgeyB0ZW1wb3JhcnlQcm9vZiwgcGhvbmVOdW1iZXIsIHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlIH0gPSB0aGlzLnBhcmFtcztcclxuICAgICAgICBpZiAodGVtcG9yYXJ5UHJvb2YgJiYgcGhvbmVOdW1iZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgdGVtcG9yYXJ5UHJvb2YsIHBob25lTnVtYmVyIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNlc3Npb25JbmZvOiB2ZXJpZmljYXRpb25JZCxcclxuICAgICAgICAgICAgY29kZTogdmVyaWZpY2F0aW9uQ29kZVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKioge0Bpbmhlcml0ZG9jIEF1dGhDcmVkZW50aWFsLnRvSlNPTn0gKi9cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICBjb25zdCBvYmogPSB7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZFxyXG4gICAgICAgIH07XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnBob25lTnVtYmVyKSB7XHJcbiAgICAgICAgICAgIG9iai5waG9uZU51bWJlciA9IHRoaXMucGFyYW1zLnBob25lTnVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXJhbXMudGVtcG9yYXJ5UHJvb2YpIHtcclxuICAgICAgICAgICAgb2JqLnRlbXBvcmFyeVByb29mID0gdGhpcy5wYXJhbXMudGVtcG9yYXJ5UHJvb2Y7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnBhcmFtcy52ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgICAgIG9iai52ZXJpZmljYXRpb25Db2RlID0gdGhpcy5wYXJhbXMudmVyaWZpY2F0aW9uQ29kZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbklkKSB7XHJcbiAgICAgICAgICAgIG9iai52ZXJpZmljYXRpb25JZCA9IHRoaXMucGFyYW1zLnZlcmlmaWNhdGlvbklkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgLyoqIEdlbmVyYXRlcyBhIHBob25lIGNyZWRlbnRpYWwgYmFzZWQgb24gYSBwbGFpbiBvYmplY3Qgb3IgYSBKU09OIHN0cmluZy4gKi9cclxuICAgIHN0YXRpYyBmcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBqc29uID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShqc29uKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyB2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSwgcGhvbmVOdW1iZXIsIHRlbXBvcmFyeVByb29mIH0gPSBqc29uO1xyXG4gICAgICAgIGlmICghdmVyaWZpY2F0aW9uQ29kZSAmJlxyXG4gICAgICAgICAgICAhdmVyaWZpY2F0aW9uSWQgJiZcclxuICAgICAgICAgICAgIXBob25lTnVtYmVyICYmXHJcbiAgICAgICAgICAgICF0ZW1wb3JhcnlQcm9vZikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQaG9uZUF1dGhDcmVkZW50aWFsKHtcclxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uSWQsXHJcbiAgICAgICAgICAgIHZlcmlmaWNhdGlvbkNvZGUsXHJcbiAgICAgICAgICAgIHBob25lTnVtYmVyLFxyXG4gICAgICAgICAgICB0ZW1wb3JhcnlQcm9vZlxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBNYXBzIHRoZSBtb2RlIHN0cmluZyBpbiBhY3Rpb24gY29kZSBVUkwgdG8gQWN0aW9uIENvZGUgSW5mbyBvcGVyYXRpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSBtb2RlXHJcbiAqL1xyXG5mdW5jdGlvbiBwYXJzZU1vZGUobW9kZSkge1xyXG4gICAgc3dpdGNoIChtb2RlKSB7XHJcbiAgICAgICAgY2FzZSAncmVjb3ZlckVtYWlsJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUkVDT1ZFUl9FTUFJTFwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uUkVDT1ZFUl9FTUFJTCAqLztcclxuICAgICAgICBjYXNlICdyZXNldFBhc3N3b3JkJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBBY3Rpb25Db2RlT3BlcmF0aW9uLlBBU1NXT1JEX1JFU0VUICovO1xyXG4gICAgICAgIGNhc2UgJ3NpZ25Jbic6XHJcbiAgICAgICAgICAgIHJldHVybiBcIkVNQUlMX1NJR05JTlwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOICovO1xyXG4gICAgICAgIGNhc2UgJ3ZlcmlmeUVtYWlsJzpcclxuICAgICAgICAgICAgcmV0dXJuIFwiVkVSSUZZX0VNQUlMXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAndmVyaWZ5QW5kQ2hhbmdlRW1haWwnOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi87XHJcbiAgICAgICAgY2FzZSAncmV2ZXJ0U2Vjb25kRmFjdG9yQWRkaXRpb24nOlxyXG4gICAgICAgICAgICByZXR1cm4gXCJSRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTlwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT04gKi87XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIEhlbHBlciB0byBwYXJzZSBGREwgbGlua3NcclxuICpcclxuICogQHBhcmFtIHVybFxyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VEZWVwTGluayh1cmwpIHtcclxuICAgIGNvbnN0IGxpbmsgPSBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcodXJsKSlbJ2xpbmsnXTtcclxuICAgIC8vIERvdWJsZSBsaW5rIGNhc2UgKGF1dG9tYXRpYyByZWRpcmVjdCkuXHJcbiAgICBjb25zdCBkb3VibGVEZWVwTGluayA9IGxpbmtcclxuICAgICAgICA/IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyhsaW5rKSlbJ2RlZXBfbGlua19pZCddXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgLy8gaU9TIGN1c3RvbSBzY2hlbWUgbGlua3MuXHJcbiAgICBjb25zdCBpT1NEZWVwTGluayA9IHF1ZXJ5c3RyaW5nRGVjb2RlKGV4dHJhY3RRdWVyeXN0cmluZyh1cmwpKVsnZGVlcF9saW5rX2lkJ107XHJcbiAgICBjb25zdCBpT1NEb3VibGVEZWVwTGluayA9IGlPU0RlZXBMaW5rXHJcbiAgICAgICAgPyBxdWVyeXN0cmluZ0RlY29kZShleHRyYWN0UXVlcnlzdHJpbmcoaU9TRGVlcExpbmspKVsnbGluayddXHJcbiAgICAgICAgOiBudWxsO1xyXG4gICAgcmV0dXJuIGlPU0RvdWJsZURlZXBMaW5rIHx8IGlPU0RlZXBMaW5rIHx8IGRvdWJsZURlZXBMaW5rIHx8IGxpbmsgfHwgdXJsO1xyXG59XHJcbi8qKlxyXG4gKiBBIHV0aWxpdHkgY2xhc3MgdG8gcGFyc2UgZW1haWwgYWN0aW9uIFVSTHMgc3VjaCBhcyBwYXNzd29yZCByZXNldCwgZW1haWwgdmVyaWZpY2F0aW9uLFxyXG4gKiBlbWFpbCBsaW5rIHNpZ24gaW4sIGV0Yy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgQWN0aW9uQ29kZVVSTCB7XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBhY3Rpb25MaW5rIC0gVGhlIGxpbmsgZnJvbSB3aGljaCB0byBleHRyYWN0IHRoZSBVUkwuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBpbnRlcm5hbFxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihhY3Rpb25MaW5rKSB7XHJcbiAgICAgICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7XHJcbiAgICAgICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcXVlcnlzdHJpbmdEZWNvZGUoZXh0cmFjdFF1ZXJ5c3RyaW5nKGFjdGlvbkxpbmspKTtcclxuICAgICAgICBjb25zdCBhcGlLZXkgPSAoX2EgPSBzZWFyY2hQYXJhbXNbXCJhcGlLZXlcIiAvKiBRdWVyeUZpZWxkLkFQSV9LRVkgKi9dKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSBzZWFyY2hQYXJhbXNbXCJvb2JDb2RlXCIgLyogUXVlcnlGaWVsZC5DT0RFICovXSkgIT09IG51bGwgJiYgX2IgIT09IHZvaWQgMCA/IF9iIDogbnVsbDtcclxuICAgICAgICBjb25zdCBvcGVyYXRpb24gPSBwYXJzZU1vZGUoKF9jID0gc2VhcmNoUGFyYW1zW1wibW9kZVwiIC8qIFF1ZXJ5RmllbGQuTU9ERSAqL10pICE9PSBudWxsICYmIF9jICE9PSB2b2lkIDAgPyBfYyA6IG51bGwpO1xyXG4gICAgICAgIC8vIFZhbGlkYXRlIEFQSSBrZXksIGNvZGUgYW5kIG1vZGUuXHJcbiAgICAgICAgX2Fzc2VydChhcGlLZXkgJiYgY29kZSAmJiBvcGVyYXRpb24sIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvbiA9IG9wZXJhdGlvbjtcclxuICAgICAgICB0aGlzLmNvZGUgPSBjb2RlO1xyXG4gICAgICAgIHRoaXMuY29udGludWVVcmwgPSAoX2QgPSBzZWFyY2hQYXJhbXNbXCJjb250aW51ZVVybFwiIC8qIFF1ZXJ5RmllbGQuQ09OVElOVUVfVVJMICovXSkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogbnVsbDtcclxuICAgICAgICB0aGlzLmxhbmd1YWdlQ29kZSA9IChfZSA9IHNlYXJjaFBhcmFtc1tcImxhbmd1YWdlQ29kZVwiIC8qIFF1ZXJ5RmllbGQuTEFOR1VBR0VfQ09ERSAqL10pICE9PSBudWxsICYmIF9lICE9PSB2b2lkIDAgPyBfZSA6IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZW5hbnRJZCA9IChfZiA9IHNlYXJjaFBhcmFtc1tcInRlbmFudElkXCIgLyogUXVlcnlGaWVsZC5URU5BTlRfSUQgKi9dKSAhPT0gbnVsbCAmJiBfZiAhPT0gdm9pZCAwID8gX2YgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWYgdGhlIGxpbmsgaXMgdmFsaWQsXHJcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBsaW5rICAtIFRoZSBlbWFpbCBhY3Rpb24gbGluayBzdHJpbmcuXHJcbiAgICAgKiBAcmV0dXJucyBUaGUge0BsaW5rIEFjdGlvbkNvZGVVUkx9IG9iamVjdCwgb3IgbnVsbCBpZiB0aGUgbGluayBpcyBpbnZhbGlkLlxyXG4gICAgICpcclxuICAgICAqIEBwdWJsaWNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBhcnNlTGluayhsaW5rKSB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uTGluayA9IHBhcnNlRGVlcExpbmsobGluayk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBY3Rpb25Db2RlVVJMKGFjdGlvbkxpbmspO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQYXJzZXMgdGhlIGVtYWlsIGFjdGlvbiBsaW5rIHN0cmluZyBhbmQgcmV0dXJucyBhbiB7QGxpbmsgQWN0aW9uQ29kZVVSTH0gaWZcclxuICogdGhlIGxpbmsgaXMgdmFsaWQsIG90aGVyd2lzZSByZXR1cm5zIG51bGwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlQWN0aW9uQ29kZVVSTChsaW5rKSB7XHJcbiAgICByZXR1cm4gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsobGluayk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIHtAbGluayBFbWFpbEF1dGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgRW1haWxBdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gRW1haWxBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEluaXRpYWxpemUgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSB1c2luZyBhbiBlbWFpbCBhbmQgcGFzc3dvcmQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoLCBhdXRoQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVtYWlsIC0gRW1haWwgYWRkcmVzcy5cclxuICAgICAqIEBwYXJhbSBwYXNzd29yZCAtIFVzZXIgYWNjb3VudCBwYXNzd29yZC5cclxuICAgICAqIEByZXR1cm5zIFRoZSBhdXRoIHByb3ZpZGVyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBFbWFpbEF1dGhDcmVkZW50aWFsLl9mcm9tRW1haWxBbmRQYXNzd29yZChlbWFpbCwgcGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBJbml0aWFsaXplIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gdXNpbmcgYW4gZW1haWwgYW5kIGFuIGVtYWlsIGxpbmsgYWZ0ZXIgYSBzaWduIGluIHdpdGhcclxuICAgICAqIGVtYWlsIGxpbmsgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBhdXRoQ3JlZGVudGlhbCA9IEVtYWlsQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxXaXRoTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCBlbWFpbCk7XHJcbiAgICAgKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbCwgZW1haWxMaW5rKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSB1c2VkIHRvIHZlcmlmeSB0aGUgbGluay5cclxuICAgICAqIEBwYXJhbSBlbWFpbCAtIEVtYWlsIGFkZHJlc3MuXHJcbiAgICAgKiBAcGFyYW0gZW1haWxMaW5rIC0gU2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gICAgICogQHJldHVybnMgLSBUaGUgYXV0aCBwcm92aWRlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmspIHtcclxuICAgICAgICBjb25zdCBhY3Rpb25Db2RlVXJsID0gQWN0aW9uQ29kZVVSTC5wYXJzZUxpbmsoZW1haWxMaW5rKTtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVVcmwsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICByZXR1cm4gRW1haWxBdXRoQ3JlZGVudGlhbC5fZnJvbUVtYWlsQW5kQ29kZShlbWFpbCwgYWN0aW9uQ29kZVVybC5jb2RlLCBhY3Rpb25Db2RlVXJsLnRlbmFudElkKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEFTU1dPUkQsIGV2ZW4gZm9yIGVtYWlsIGxpbmsuXHJcbiAqL1xyXG5FbWFpbEF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IFwicGFzc3dvcmRcIiAvKiBQcm92aWRlcklkLlBBU1NXT1JEICovO1xyXG4vKipcclxuICogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRC5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLkVNQUlMX1BBU1NXT1JEX1NJR05fSU5fTUVUSE9EID0gXCJwYXNzd29yZFwiIC8qIFNpZ25Jbk1ldGhvZC5FTUFJTF9QQVNTV09SRCAqLztcclxuLyoqXHJcbiAqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICovXHJcbkVtYWlsQXV0aFByb3ZpZGVyLkVNQUlMX0xJTktfU0lHTl9JTl9NRVRIT0QgPSBcImVtYWlsTGlua1wiIC8qIFNpZ25Jbk1ldGhvZC5FTUFJTF9MSU5LICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGJhc2UgY2xhc3MgZm9yIGFsbCBGZWRlcmF0ZWQgcHJvdmlkZXJzIChPQXV0aCAoaW5jbHVkaW5nIE9JREMpLCBTQU1MKS5cclxuICpcclxuICogVGhpcyBjbGFzcyBpcyBub3QgbWVhbnQgdG8gYmUgaW5zdGFudGlhdGVkIGRpcmVjdGx5LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3RvciBmb3IgZ2VuZXJpYyBPQXV0aCBwcm92aWRlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBQcm92aWRlciBmb3Igd2hpY2ggY3JlZGVudGlhbHMgc2hvdWxkIGJlIGdlbmVyYXRlZC5cclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHByb3ZpZGVySWQ7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IG51bGw7XHJcbiAgICAgICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgICAgIHRoaXMuY3VzdG9tUGFyYW1ldGVycyA9IHt9O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgdGhlIGxhbmd1YWdlIGdvZGUuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGxhbmd1YWdlQ29kZSAtIGxhbmd1YWdlIGNvZGVcclxuICAgICAqL1xyXG4gICAgc2V0RGVmYXVsdExhbmd1YWdlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuZGVmYXVsdExhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2V0cyB0aGUgT0F1dGggY3VzdG9tIHBhcmFtZXRlcnMgdG8gcGFzcyBpbiBhbiBPQXV0aCByZXF1ZXN0IGZvciBwb3B1cCBhbmQgcmVkaXJlY3Qgc2lnbi1pblxyXG4gICAgICogb3BlcmF0aW9ucy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogRm9yIGEgZGV0YWlsZWQgbGlzdCwgY2hlY2sgdGhlIHJlc2VydmVkIHJlcXVpcmVkIE9BdXRoIDIuMCBwYXJhbWV0ZXJzIHN1Y2ggYXMgYGNsaWVudF9pZGAsXHJcbiAgICAgKiBgcmVkaXJlY3RfdXJpYCwgYHNjb3BlYCwgYHJlc3BvbnNlX3R5cGVgLCBhbmQgYHN0YXRlYCBhcmUgbm90IGFsbG93ZWQgYW5kIHdpbGwgYmUgaWdub3JlZC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzIC0gVGhlIGN1c3RvbSBPQXV0aCBwYXJhbWV0ZXJzIHRvIHBhc3MgaW4gdGhlIE9BdXRoIHJlcXVlc3QuXHJcbiAgICAgKi9cclxuICAgIHNldEN1c3RvbVBhcmFtZXRlcnMoY3VzdG9tT0F1dGhQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgdGhpcy5jdXN0b21QYXJhbWV0ZXJzID0gY3VzdG9tT0F1dGhQYXJhbWV0ZXJzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXRyaWV2ZSB0aGUgY3VycmVudCBsaXN0IG9mIHtAbGluayBDdXN0b21QYXJhbWV0ZXJzfS5cclxuICAgICAqL1xyXG4gICAgZ2V0Q3VzdG9tUGFyYW1ldGVycygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21QYXJhbWV0ZXJzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDb21tb24gY29kZSB0byBhbGwgT0F1dGggcHJvdmlkZXJzLiBUaGlzIGlzIHNlcGFyYXRlIGZyb20gdGhlXHJcbiAqIHtAbGluayBPQXV0aFByb3ZpZGVyfSBzbyB0aGF0IGNoaWxkIHByb3ZpZGVycyAobGlrZVxyXG4gKiB7QGxpbmsgR29vZ2xlQXV0aFByb3ZpZGVyfSkgZG9uJ3QgaW5oZXJpdCB0aGUgYGNyZWRlbnRpYWxgIGluc3RhbmNlIG1ldGhvZC5cclxuICogSW5zdGVhZCwgdGhleSByZWx5IG9uIGEgc3RhdGljIGBjcmVkZW50aWFsYCBtZXRob2QuXHJcbiAqL1xyXG5jbGFzcyBCYXNlT0F1dGhQcm92aWRlciBleHRlbmRzIEZlZGVyYXRlZEF1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgICAgICB0aGlzLnNjb3BlcyA9IFtdO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgYW4gT0F1dGggc2NvcGUgdG8gdGhlIGNyZWRlbnRpYWwuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHNjb3BlIC0gUHJvdmlkZXIgT0F1dGggc2NvcGUgdG8gYWRkLlxyXG4gICAgICovXHJcbiAgICBhZGRTY29wZShzY29wZSkge1xyXG4gICAgICAgIC8vIElmIG5vdCBhbHJlYWR5IGFkZGVkLCBhZGQgc2NvcGUgdG8gbGlzdC5cclxuICAgICAgICBpZiAoIXRoaXMuc2NvcGVzLmluY2x1ZGVzKHNjb3BlKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNjb3Blcy5wdXNoKHNjb3BlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlIHRoZSBjdXJyZW50IGxpc3Qgb2YgT0F1dGggc2NvcGVzLlxyXG4gICAgICovXHJcbiAgICBnZXRTY29wZXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIFsuLi50aGlzLnNjb3Blc107XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGdlbmVyaWMge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ2VtYWlsJyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBPQXV0aCBBY2Nlc3MgVG9rZW4gZm9yIHRoZSBwcm92aWRlci5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIE9BdXRoIEFjY2VzcyBUb2tlbiBmb3IgdGhlIHByb3ZpZGVyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgT0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEgSlNPTiBzdHJpbmcgb3IgYSBwbGFpbiBvYmplY3QuXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIEEgcGxhaW4gb2JqZWN0IG9yIGEgSlNPTiBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tSlNPTihqc29uKSB7XHJcbiAgICAgICAgY29uc3Qgb2JqID0gdHlwZW9mIGpzb24gPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShqc29uKSA6IGpzb247XHJcbiAgICAgICAgX2Fzc2VydCgncHJvdmlkZXJJZCcgaW4gb2JqICYmICdzaWduSW5NZXRob2QnIGluIG9iaiwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMob2JqKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSBnZW5lcmljIE9BdXRoIHByb3ZpZGVyJ3MgYWNjZXNzIHRva2VuIG9yIElEIHRva2VuLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGUgcmF3IG5vbmNlIGlzIHJlcXVpcmVkIHdoZW4gYW4gSUQgdG9rZW4gd2l0aCBhIG5vbmNlIGZpZWxkIGlzIHByb3ZpZGVkLiBUaGUgU0hBLTI1NiBoYXNoIG9mXHJcbiAgICAgKiB0aGUgcmF3IG5vbmNlIG11c3QgbWF0Y2ggdGhlIG5vbmNlIGZpZWxkIGluIHRoZSBJRCB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGdvb2dsZVVzZXJgIGZyb20gdGhlIG9uc3VjY2VzcyBHb29nbGUgU2lnbiBJbiBjYWxsYmFjay5cclxuICAgICAqIC8vIEluaXRpYWxpemUgYSBnZW5lcmF0ZSBPQXV0aCBwcm92aWRlciB3aXRoIGEgYGdvb2dsZS5jb21gIHByb3ZpZGVySWQuXHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBPQXV0aFByb3ZpZGVyKCdnb29nbGUuY29tJyk7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbCh7XHJcbiAgICAgKiAgIGlkVG9rZW46IGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4sXHJcbiAgICAgKiB9KTtcclxuICAgICAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHBhcmFtcyAtIEVpdGhlciB0aGUgb3B0aW9ucyBvYmplY3QgY29udGFpbmluZyB0aGUgSUQgdG9rZW4sIGFjY2VzcyB0b2tlbiBhbmQgcmF3IG5vbmNlXHJcbiAgICAgKiBvciB0aGUgSUQgdG9rZW4gc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBjcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVkZW50aWFsKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgcGFyYW1zKSwgeyBub25jZTogcGFyYW1zLnJhd05vbmNlIH0pKTtcclxuICAgIH1cclxuICAgIC8qKiBBbiBpbnRlcm5hbCBjcmVkZW50aWFsIG1ldGhvZCB0aGF0IGFjY2VwdHMgbW9yZSBwZXJtaXNzaXZlIG9wdGlvbnMgKi9cclxuICAgIF9jcmVkZW50aWFsKHBhcmFtcykge1xyXG4gICAgICAgIF9hc3NlcnQocGFyYW1zLmlkVG9rZW4gfHwgcGFyYW1zLmFjY2Vzc1Rva2VuLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgLy8gRm9yIE9BdXRoQ3JlZGVudGlhbCwgc2lnbiBpbiBtZXRob2QgaXMgc2FtZSBhcyBwcm92aWRlcklkLlxyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBwYXJhbXMpLCB7IHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCwgc2lnbkluTWV0aG9kOiB0aGlzLnByb3ZpZGVySWQgfSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoUHJvdmlkZXIub2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoUHJvdmlkZXIub2F1dGhDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIG9hdXRoQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCwgcGVuZGluZ1Rva2VuLCBub25jZSwgcHJvdmlkZXJJZCB9ID0gdG9rZW5SZXNwb25zZTtcclxuICAgICAgICBpZiAoIW9hdXRoQWNjZXNzVG9rZW4gJiZcclxuICAgICAgICAgICAgIW9hdXRoVG9rZW5TZWNyZXQgJiZcclxuICAgICAgICAgICAgIW9hdXRoSWRUb2tlbiAmJlxyXG4gICAgICAgICAgICAhcGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXByb3ZpZGVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgT0F1dGhQcm92aWRlcihwcm92aWRlcklkKS5fY3JlZGVudGlhbCh7XHJcbiAgICAgICAgICAgICAgICBpZFRva2VuOiBvYXV0aElkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBhY2Nlc3NUb2tlbjogb2F1dGhBY2Nlc3NUb2tlbixcclxuICAgICAgICAgICAgICAgIG5vbmNlLFxyXG4gICAgICAgICAgICAgICAgcGVuZGluZ1Rva2VuXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uRkFDRUJPT0suXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIGF3YWl0IHNpZ25JbldpdGhSZWRpcmVjdChhdXRoLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBpZiAocmVzdWx0KSB7XHJcbiAqICAgLy8gVGhpcyBpcyB0aGUgc2lnbmVkLWluIHVzZXJcclxuICogICBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqICAgLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqICAgY29uc3QgY3JlZGVudGlhbCA9IEZhY2Vib29rQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBGYWNlYm9vayBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBGYWNlYm9va0F1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwiZmFjZWJvb2suY29tXCIgLyogUHJvdmlkZXJJZC5GQUNFQk9PSyAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBGYWNlYm9vay5cclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogYGBgamF2YXNjcmlwdFxyXG4gICAgICogLy8gYGV2ZW50YCBmcm9tIHRoZSBGYWNlYm9vayBhdXRoLmF1dGhSZXNwb25zZUNoYW5nZSBjYWxsYmFjay5cclxuICAgICAqIGNvbnN0IGNyZWRlbnRpYWwgPSBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKGV2ZW50LmF1dGhSZXNwb25zZS5hY2Nlc3NUb2tlbik7XHJcbiAgICAgKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEZhY2Vib29rIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQsXHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogRmFjZWJvb2tBdXRoUHJvdmlkZXIuRkFDRUJPT0tfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gRmFjZWJvb2tBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSB8fCAhKCdvYXV0aEFjY2Vzc1Rva2VuJyBpbiB0b2tlblJlc3BvbnNlKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlLm9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBGYWNlYm9va0F1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRkFDRUJPT0suICovXHJcbkZhY2Vib29rQXV0aFByb3ZpZGVyLkZBQ0VCT09LX1NJR05fSU5fTUVUSE9EID0gXCJmYWNlYm9vay5jb21cIiAvKiBTaWduSW5NZXRob2QuRkFDRUJPT0sgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBQcm92aWRlcklkfS5GQUNFQk9PSy4gKi9cclxuRmFjZWJvb2tBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImZhY2Vib29rLmNvbVwiIC8qIFByb3ZpZGVySWQuRkFDRUJPT0sgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiBhbiB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmb3Ige0BsaW5rIFByb3ZpZGVySWR9LkdPT0dMRS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEdvb2dsZUF1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBTdGFydCBhIHNpZ24gaW4gcHJvY2VzcyBmb3IgYW4gdW5hdXRoZW50aWNhdGVkIHVzZXIuXHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR29vZ2xlIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR29vZ2xlQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdwcm9maWxlJyk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdlbWFpbCcpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEdvb2dsZSBBY2Nlc3MgVG9rZW4uXHJcbiAqIGNvbnN0IGNyZWRlbnRpYWwgPSBHb29nbGVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQocmVzdWx0KTtcclxuICogY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgR29vZ2xlQXV0aFByb3ZpZGVyIGV4dGVuZHMgQmFzZU9BdXRoUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoXCJnb29nbGUuY29tXCIgLyogUHJvdmlkZXJJZC5HT09HTEUgKi8pO1xyXG4gICAgICAgIHRoaXMuYWRkU2NvcGUoJ3Byb2ZpbGUnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGNyZWRlbnRpYWwgZm9yIEdvb2dsZS4gQXQgbGVhc3Qgb25lIG9mIElEIHRva2VuIGFuZCBhY2Nlc3MgdG9rZW4gaXMgcmVxdWlyZWQuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIC8vIFxcYGdvb2dsZVVzZXJcXGAgZnJvbSB0aGUgb25zdWNjZXNzIEdvb2dsZSBTaWduIEluIGNhbGxiYWNrLlxyXG4gICAgICogY29uc3QgY3JlZGVudGlhbCA9IEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKGdvb2dsZVVzZXIuZ2V0QXV0aFJlc3BvbnNlKCkuaWRfdG9rZW4pO1xyXG4gICAgICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gaWRUb2tlbiAtIEdvb2dsZSBJRCB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBhY2Nlc3NUb2tlbiAtIEdvb2dsZSBhY2Nlc3MgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKGlkVG9rZW4sIGFjY2Vzc1Rva2VuKSB7XHJcbiAgICAgICAgcmV0dXJuIE9BdXRoQ3JlZGVudGlhbC5fZnJvbVBhcmFtcyh7XHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IEdvb2dsZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCxcclxuICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBHb29nbGVBdXRoUHJvdmlkZXIuR09PR0xFX1NJR05fSU5fTUVUSE9ELFxyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBhY2Nlc3NUb2tlblxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIEF1dGhFcnJvcn0gd2hpY2ggd2FzXHJcbiAgICAgKiB0aHJvd24gZHVyaW5nIGEgc2lnbi1pbiwgbGluaywgb3IgcmVhdXRoZW50aWNhdGUgb3BlcmF0aW9uLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUVycm9yKGVycm9yKSB7XHJcbiAgICAgICAgcmV0dXJuIEdvb2dsZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBvYXV0aElkVG9rZW4sIG9hdXRoQWNjZXNzVG9rZW4gfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aElkVG9rZW4gJiYgIW9hdXRoQWNjZXNzVG9rZW4pIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSBhbiBvYXV0aCAxIGNyZWRlbnRpYWwgb3IgYSBwaG9uZSBjcmVkZW50aWFsXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gR29vZ2xlQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWwob2F1dGhJZFRva2VuLCBvYXV0aEFjY2Vzc1Rva2VuKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgU2lnbkluTWV0aG9kfS5HT09HTEUuICovXHJcbkdvb2dsZUF1dGhQcm92aWRlci5HT09HTEVfU0lHTl9JTl9NRVRIT0QgPSBcImdvb2dsZS5jb21cIiAvKiBTaWduSW5NZXRob2QuR09PR0xFICovO1xyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uR09PR0xFLiAqL1xyXG5Hb29nbGVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcImdvb2dsZS5jb21cIiAvKiBQcm92aWRlcklkLkdPT0dMRSAqLztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uR0lUSFVCLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBHaXRIdWIgcmVxdWlyZXMgYW4gT0F1dGggMi4wIHJlZGlyZWN0LCBzbyB5b3UgY2FuIGVpdGhlciBoYW5kbGUgdGhlIHJlZGlyZWN0IGRpcmVjdGx5LCBvciB1c2VcclxuICogdGhlIHtAbGluayBzaWduSW5XaXRoUG9wdXB9IGhhbmRsZXI6XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBHaXRodWJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBwcm92aWRlci5hZGRTY29wZSgncmVwbycpO1xyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KHJlc3VsdCk7XHJcbiAqICAgY29uc3QgdG9rZW4gPSBjcmVkZW50aWFsLmFjY2Vzc1Rva2VuO1xyXG4gKiB9XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgR2l0aHViQXV0aFByb3ZpZGVyKCk7XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCdyZXBvJyk7XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQb3B1cChhdXRoLCBwcm92aWRlcik7XHJcbiAqXHJcbiAqIC8vIFRoZSBzaWduZWQtaW4gdXNlciBpbmZvLlxyXG4gKiBjb25zdCB1c2VyID0gcmVzdWx0LnVzZXI7XHJcbiAqIC8vIFRoaXMgZ2l2ZXMgeW91IGEgR2l0aHViIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGBgYFxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBHaXRodWJBdXRoUHJvdmlkZXIgZXh0ZW5kcyBCYXNlT0F1dGhQcm92aWRlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcihcImdpdGh1Yi5jb21cIiAvKiBQcm92aWRlcklkLkdJVEhVQiAqLyk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjcmVkZW50aWFsIGZvciBHaXRodWIuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGFjY2Vzc1Rva2VuIC0gR2l0aHViIGFjY2VzcyB0b2tlbi5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwoYWNjZXNzVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgcHJvdmlkZXJJZDogR2l0aHViQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IEdpdGh1YkF1dGhQcm92aWRlci5HSVRIVUJfU0lHTl9JTl9NRVRIT0QsXHJcbiAgICAgICAgICAgIGFjY2Vzc1Rva2VuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFVzZWQgdG8gZXh0cmFjdCB0aGUgdW5kZXJseWluZyB7QGxpbmsgT0F1dGhDcmVkZW50aWFsfSBmcm9tIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHVzZXJDcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVXNlZCB0byBleHRyYWN0IHRoZSB1bmRlcmx5aW5nIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgQXV0aEVycm9yfSB3aGljaCB3YXNcclxuICAgICAqIHRocm93biBkdXJpbmcgYSBzaWduLWluLCBsaW5rLCBvciByZWF1dGhlbnRpY2F0ZSBvcGVyYXRpb24uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICByZXR1cm4gR2l0aHViQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlIHx8ICEoJ29hdXRoQWNjZXNzVG9rZW4nIGluIHRva2VuUmVzcG9uc2UpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIEdpdGh1YkF1dGhQcm92aWRlci5jcmVkZW50aWFsKHRva2VuUmVzcG9uc2Uub2F1dGhBY2Nlc3NUb2tlbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFNpZ25Jbk1ldGhvZH0uR0lUSFVCLiAqL1xyXG5HaXRodWJBdXRoUHJvdmlkZXIuR0lUSFVCX1NJR05fSU5fTUVUSE9EID0gXCJnaXRodWIuY29tXCIgLyogU2lnbkluTWV0aG9kLkdJVEhVQiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LkdJVEhVQi4gKi9cclxuR2l0aHViQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJnaXRodWIuY29tXCIgLyogUHJvdmlkZXJJZC5HSVRIVUIgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IElEUF9SRVFVRVNUX1VSSSA9ICdodHRwOi8vbG9jYWxob3N0JztcclxuLyoqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFNBTUxBdXRoQ3JlZGVudGlhbCBleHRlbmRzIEF1dGhDcmVkZW50aWFsIHtcclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGNvbnN0cnVjdG9yKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgIHN1cGVyKHByb3ZpZGVySWQsIHByb3ZpZGVySWQpO1xyXG4gICAgICAgIHRoaXMucGVuZGluZ1Rva2VuID0gcGVuZGluZ1Rva2VuO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2dldElkVG9rZW5SZXNwb25zZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgcmVxdWVzdCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBfbGlua1RvSWRUb2tlbihhdXRoLCBpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHRoaXMuYnVpbGRSZXF1ZXN0KCk7XHJcbiAgICAgICAgcmVxdWVzdC5pZFRva2VuID0gaWRUb2tlbjtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCByZXF1ZXN0KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9nZXRSZWF1dGhlbnRpY2F0aW9uUmVzb2x2ZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3QgPSB0aGlzLmJ1aWxkUmVxdWVzdCgpO1xyXG4gICAgICAgIHJlcXVlc3QuYXV0b0NyZWF0ZSA9IGZhbHNlO1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHJlcXVlc3QpO1xyXG4gICAgfVxyXG4gICAgLyoqIHtAaW5oZXJpdGRvYyBBdXRoQ3JlZGVudGlhbC50b0pTT059ICAqL1xyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHNpZ25Jbk1ldGhvZDogdGhpcy5zaWduSW5NZXRob2QsXHJcbiAgICAgICAgICAgIHByb3ZpZGVySWQ6IHRoaXMucHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFN0YXRpYyBtZXRob2QgdG8gZGVzZXJpYWxpemUgYSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIGFuIG9iamVjdCBpbnRvIGFuXHJcbiAgICAgKiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfS5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ganNvbiAtIElucHV0IGNhbiBiZSBlaXRoZXIgT2JqZWN0IG9yIHRoZSBzdHJpbmdpZmllZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgb2JqZWN0LlxyXG4gICAgICogV2hlbiBzdHJpbmcgaXMgcHJvdmlkZWQsIEpTT04ucGFyc2Ugd291bGQgYmUgY2FsbGVkIGZpcnN0LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIElmIHRoZSBKU09OIGlucHV0IGRvZXMgbm90IHJlcHJlc2VudCBhbiB7QGxpbmsgIEF1dGhDcmVkZW50aWFsfSwgbnVsbCBpcyByZXR1cm5lZC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyb21KU09OKGpzb24pIHtcclxuICAgICAgICBjb25zdCBvYmogPSB0eXBlb2YganNvbiA9PT0gJ3N0cmluZycgPyBKU09OLnBhcnNlKGpzb24pIDoganNvbjtcclxuICAgICAgICBjb25zdCB7IHByb3ZpZGVySWQsIHNpZ25Jbk1ldGhvZCwgcGVuZGluZ1Rva2VuIH0gPSBvYmo7XHJcbiAgICAgICAgaWYgKCFwcm92aWRlcklkIHx8XHJcbiAgICAgICAgICAgICFzaWduSW5NZXRob2QgfHxcclxuICAgICAgICAgICAgIXBlbmRpbmdUb2tlbiB8fFxyXG4gICAgICAgICAgICBwcm92aWRlcklkICE9PSBzaWduSW5NZXRob2QpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgU0FNTEF1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBzdGF0aWMgbWV0aG9kIHRvIGF2b2lkIGV4cG9zaW5nIHRoZSBjb25zdHJ1Y3RvciB0byBlbmQgdXNlcnMuXHJcbiAgICAgKlxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBfY3JlYXRlKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbikge1xyXG4gICAgICAgIHJldHVybiBuZXcgU0FNTEF1dGhDcmVkZW50aWFsKHByb3ZpZGVySWQsIHBlbmRpbmdUb2tlbik7XHJcbiAgICB9XHJcbiAgICBidWlsZFJlcXVlc3QoKSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogSURQX1JFUVVFU1RfVVJJLFxyXG4gICAgICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICAgICAgcGVuZGluZ1Rva2VuOiB0aGlzLnBlbmRpbmdUb2tlblxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgU0FNTF9QUk9WSURFUl9QUkVGSVggPSAnc2FtbC4nO1xyXG4vKipcclxuICogQW4ge0BsaW5rIEF1dGhQcm92aWRlcn0gZm9yIFNBTUwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFNBTUxBdXRoUHJvdmlkZXIgZXh0ZW5kcyBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb25zdHJ1Y3Rvci4gVGhlIHByb3ZpZGVySWQgbXVzdCBzdGFydCB3aXRoIFwic2FtbC5cIlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVySWQgLSBTQU1MIHByb3ZpZGVyIElELlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcihwcm92aWRlcklkKSB7XHJcbiAgICAgICAgX2Fzc2VydChwcm92aWRlcklkLnN0YXJ0c1dpdGgoU0FNTF9QUk9WSURFUl9QUkVGSVgpLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgc3VwZXIocHJvdmlkZXJJZCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9IGFmdGVyIGFcclxuICAgICAqIHN1Y2Nlc3NmdWwgU0FNTCBmbG93IGNvbXBsZXRlcy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlLCB0byBnZXQgYW4ge0BsaW5rIEF1dGhDcmVkZW50aWFsfSwgeW91IGNvdWxkIHdyaXRlIHRoZVxyXG4gICAgICogZm9sbG93aW5nIGNvZGU6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHNhbWxQcm92aWRlcik7XHJcbiAgICAgKiBjb25zdCBjcmVkZW50aWFsID0gU0FNTEF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdCh1c2VyQ3JlZGVudGlhbCk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21SZXN1bHQodXNlckNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gU0FNTEF1dGhQcm92aWRlci5zYW1sQ3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBTQU1MQXV0aFByb3ZpZGVyLnNhbWxDcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGFuIHtAbGluayBBdXRoQ3JlZGVudGlhbH0gZnJvbSBhIEpTT04gc3RyaW5nIG9yIGEgcGxhaW4gb2JqZWN0LlxyXG4gICAgICogQHBhcmFtIGpzb24gLSBBIHBsYWluIG9iamVjdCBvciBhIEpTT04gc3RyaW5nXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsRnJvbUpTT04oanNvbikge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBTQU1MQXV0aENyZWRlbnRpYWwuZnJvbUpTT04oanNvbik7XHJcbiAgICAgICAgX2Fzc2VydChjcmVkZW50aWFsLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgc2FtbENyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwZW5kaW5nVG9rZW4sIHByb3ZpZGVySWQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFwZW5kaW5nVG9rZW4gfHwgIXByb3ZpZGVySWQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGFuIHtAbGluayBPQXV0aENyZWRlbnRpYWx9IGZvciB7QGxpbmsgUHJvdmlkZXJJZH0uVFdJVFRFUi5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgVHdpdHRlciBBY2Nlc3MgVG9rZW4gYW5kIFNlY3JldC5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogICBjb25zdCBzZWNyZXQgPSBjcmVkZW50aWFsLnNlY3JldDtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcG9wdXAuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFR3aXR0ZXJBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBvcHVwKGF1dGgsIHByb3ZpZGVyKTtcclxuICpcclxuICogLy8gVGhlIHNpZ25lZC1pbiB1c2VyIGluZm8uXHJcbiAqIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogLy8gVGhpcyBnaXZlcyB5b3UgYSBUd2l0dGVyIEFjY2VzcyBUb2tlbiBhbmQgU2VjcmV0LlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChyZXN1bHQpO1xyXG4gKiBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIGNvbnN0IHNlY3JldCA9IGNyZWRlbnRpYWwuc2VjcmV0O1xyXG4gKiBgYGBcclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgVHdpdHRlckF1dGhQcm92aWRlciBleHRlbmRzIEJhc2VPQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKFwidHdpdHRlci5jb21cIiAvKiBQcm92aWRlcklkLlRXSVRURVIgKi8pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgY3JlZGVudGlhbCBmb3IgVHdpdHRlci5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdG9rZW4gLSBUd2l0dGVyIGFjY2VzcyB0b2tlbi5cclxuICAgICAqIEBwYXJhbSBzZWNyZXQgLSBUd2l0dGVyIHNlY3JldC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodG9rZW4sIHNlY3JldCkge1xyXG4gICAgICAgIHJldHVybiBPQXV0aENyZWRlbnRpYWwuX2Zyb21QYXJhbXMoe1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBUd2l0dGVyQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lELFxyXG4gICAgICAgICAgICBzaWduSW5NZXRob2Q6IFR3aXR0ZXJBdXRoUHJvdmlkZXIuVFdJVFRFUl9TSUdOX0lOX01FVEhPRCxcclxuICAgICAgICAgICAgb2F1dGhUb2tlbjogdG9rZW4sXHJcbiAgICAgICAgICAgIG9hdXRoVG9rZW5TZWNyZXQ6IHNlY3JldFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBVc2VyQ3JlZGVudGlhbH0uXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIFR3aXR0ZXJBdXRoUHJvdmlkZXIuY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QodXNlckNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBVc2VkIHRvIGV4dHJhY3QgdGhlIHVuZGVybHlpbmcge0BsaW5rIE9BdXRoQ3JlZGVudGlhbH0gZnJvbSBhIHtAbGluayBBdXRoRXJyb3J9IHdoaWNoIHdhc1xyXG4gICAgICogdGhyb3duIGR1cmluZyBhIHNpZ24taW4sIGxpbmssIG9yIHJlYXV0aGVudGljYXRlIG9wZXJhdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gdXNlckNyZWRlbnRpYWwgLSBUaGUgdXNlciBjcmVkZW50aWFsLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBUd2l0dGVyQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KChlcnJvci5jdXN0b21EYXRhIHx8IHt9KSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21UYWdnZWRPYmplY3QoeyBfdG9rZW5SZXNwb25zZTogdG9rZW5SZXNwb25zZSB9KSB7XHJcbiAgICAgICAgaWYgKCF0b2tlblJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKCFvYXV0aEFjY2Vzc1Rva2VuIHx8ICFvYXV0aFRva2VuU2VjcmV0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gVHdpdHRlckF1dGhQcm92aWRlci5jcmVkZW50aWFsKG9hdXRoQWNjZXNzVG9rZW4sIG9hdXRoVG9rZW5TZWNyZXQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuVFdJVFRFUl9TSUdOX0lOX01FVEhPRCA9IFwidHdpdHRlci5jb21cIiAvKiBTaWduSW5NZXRob2QuVFdJVFRFUiAqLztcclxuLyoqIEFsd2F5cyBzZXQgdG8ge0BsaW5rIFByb3ZpZGVySWR9LlRXSVRURVIuICovXHJcblR3aXR0ZXJBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQgPSBcInR3aXR0ZXIuY29tXCIgLyogUHJvdmlkZXJJZC5UV0lUVEVSICovO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduVXAoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25VcFwiIC8qIEVuZHBvaW50LlNJR05fVVAgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlckNyZWRlbnRpYWxJbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xyXG4gICAgICAgIHRoaXMudXNlciA9IHBhcmFtcy51c2VyO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9IHBhcmFtcy5wcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMuX3Rva2VuUmVzcG9uc2UgPSBwYXJhbXMuX3Rva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgdGhpcy5vcGVyYXRpb25UeXBlID0gcGFyYW1zLm9wZXJhdGlvblR5cGU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgYXN5bmMgX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgaWRUb2tlblJlc3BvbnNlLCBpc0Fub255bW91cyA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJJbXBsLl9mcm9tSWRUb2tlblJlc3BvbnNlKGF1dGgsIGlkVG9rZW5SZXNwb25zZSwgaXNBbm9ueW1vdXMpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKTtcclxuICAgICAgICBjb25zdCB1c2VyQ3JlZCA9IG5ldyBVc2VyQ3JlZGVudGlhbEltcGwoe1xyXG4gICAgICAgICAgICB1c2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICBfdG9rZW5SZXNwb25zZTogaWRUb2tlblJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIHVzZXJDcmVkO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFzeW5jIF9mb3JPcGVyYXRpb24odXNlciwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpIHtcclxuICAgICAgICBhd2FpdCB1c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShyZXNwb25zZSwgLyogcmVsb2FkICovIHRydWUpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVySWQgPSBwcm92aWRlcklkRm9yUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcixcclxuICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgX3Rva2VuUmVzcG9uc2U6IHJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gcHJvdmlkZXJJZEZvclJlc3BvbnNlKHJlc3BvbnNlKSB7XHJcbiAgICBpZiAocmVzcG9uc2UucHJvdmlkZXJJZCkge1xyXG4gICAgICAgIHJldHVybiByZXNwb25zZS5wcm92aWRlcklkO1xyXG4gICAgfVxyXG4gICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gXCJwaG9uZVwiIC8qIFByb3ZpZGVySWQuUEhPTkUgKi87XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gYXMgYW4gYW5vbnltb3VzIHVzZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHRoZXJlIGlzIGFscmVhZHkgYW4gYW5vbnltb3VzIHVzZXIgc2lnbmVkIGluLCB0aGF0IHVzZXIgd2lsbCBiZSByZXR1cm5lZDsgb3RoZXJ3aXNlLCBhXHJcbiAqIG5ldyBhbm9ueW1vdXMgdXNlciBpZGVudGl0eSB3aWxsIGJlIGNyZWF0ZWQgYW5kIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbkFub255bW91c2x5KGF1dGgpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGF3YWl0IGF1dGhJbnRlcm5hbC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgaWYgKChfYSA9IGF1dGhJbnRlcm5hbC5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlzQW5vbnltb3VzKSB7XHJcbiAgICAgICAgLy8gSWYgYW4gYW5vbnltb3VzIHVzZXIgaXMgYWxyZWFkeSBzaWduZWQgaW4sIG5vIG5lZWQgdG8gc2lnbiB0aGVtIGluIGFnYWluLlxyXG4gICAgICAgIHJldHVybiBuZXcgVXNlckNyZWRlbnRpYWxJbXBsKHtcclxuICAgICAgICAgICAgdXNlcjogYXV0aEludGVybmFsLmN1cnJlbnRVc2VyLFxyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBudWxsLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlOiBcInNpZ25JblwiIC8qIE9wZXJhdGlvblR5cGUuU0lHTl9JTiAqL1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduVXAoYXV0aEludGVybmFsLCB7XHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIE9wZXJhdGlvblR5cGUuU0lHTl9JTiAqLywgcmVzcG9uc2UsIHRydWUpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvckVycm9yIGV4dGVuZHMgRmlyZWJhc2VFcnJvciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCBlcnJvciwgb3BlcmF0aW9uVHlwZSwgdXNlcikge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBzdXBlcihlcnJvci5jb2RlLCBlcnJvci5tZXNzYWdlKTtcclxuICAgICAgICB0aGlzLm9wZXJhdGlvblR5cGUgPSBvcGVyYXRpb25UeXBlO1xyXG4gICAgICAgIHRoaXMudXNlciA9IHVzZXI7XHJcbiAgICAgICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL01pY3Jvc29mdC9UeXBlU2NyaXB0LXdpa2kvYmxvYi9tYXN0ZXIvQnJlYWtpbmctQ2hhbmdlcy5tZCNleHRlbmRpbmctYnVpbHQtaW5zLWxpa2UtZXJyb3ItYXJyYXktYW5kLW1hcC1tYXktbm8tbG9uZ2VyLXdvcmtcclxuICAgICAgICBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgTXVsdGlGYWN0b3JFcnJvci5wcm90b3R5cGUpO1xyXG4gICAgICAgIHRoaXMuY3VzdG9tRGF0YSA9IHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXV0aC5uYW1lLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogKF9hID0gYXV0aC50ZW5hbnRJZCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBfc2VydmVyUmVzcG9uc2U6IGVycm9yLmN1c3RvbURhdGEuX3NlcnZlclJlc3BvbnNlLFxyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbUVycm9yQW5kT3BlcmF0aW9uKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvckVycm9yKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCwgdXNlcikge1xyXG4gICAgY29uc3QgaWRUb2tlblByb3ZpZGVyID0gb3BlcmF0aW9uVHlwZSA9PT0gXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIE9wZXJhdGlvblR5cGUuUkVBVVRIRU5USUNBVEUgKi9cclxuICAgICAgICA/IGNyZWRlbnRpYWwuX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKVxyXG4gICAgICAgIDogY3JlZGVudGlhbC5fZ2V0SWRUb2tlblJlc3BvbnNlKGF1dGgpO1xyXG4gICAgcmV0dXJuIGlkVG9rZW5Qcm92aWRlci5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IGBhdXRoLyR7XCJtdWx0aS1mYWN0b3ItYXV0aC1yZXF1aXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuTUZBX1JFUVVJUkVEICovfWApIHtcclxuICAgICAgICAgICAgdGhyb3cgTXVsdGlGYWN0b3JFcnJvci5fZnJvbUVycm9yQW5kT3BlcmF0aW9uKGF1dGgsIGVycm9yLCBvcGVyYXRpb25UeXBlLCB1c2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICB9KTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGFrZXMgYSBzZXQgb2YgVXNlckluZm8gcHJvdmlkZXIgZGF0YSBhbmQgY29udmVydHMgaXQgdG8gYSBzZXQgb2YgbmFtZXNcclxuICovXHJcbmZ1bmN0aW9uIHByb3ZpZGVyRGF0YUFzTmFtZXMocHJvdmlkZXJEYXRhKSB7XHJcbiAgICByZXR1cm4gbmV3IFNldChwcm92aWRlckRhdGFcclxuICAgICAgICAubWFwKCh7IHByb3ZpZGVySWQgfSkgPT4gcHJvdmlkZXJJZClcclxuICAgICAgICAuZmlsdGVyKHBpZCA9PiAhIXBpZCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBVbmxpbmtzIGEgcHJvdmlkZXIgZnJvbSBhIHVzZXIgYWNjb3VudC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVySWQgLSBUaGUgcHJvdmlkZXIgdG8gdW5saW5rLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiB1bmxpbmsodXNlciwgcHJvdmlkZXJJZCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyh0cnVlLCB1c2VySW50ZXJuYWwsIHByb3ZpZGVySWQpO1xyXG4gICAgY29uc3QgeyBwcm92aWRlclVzZXJJbmZvIH0gPSBhd2FpdCBkZWxldGVMaW5rZWRBY2NvdW50cyh1c2VySW50ZXJuYWwuYXV0aCwge1xyXG4gICAgICAgIGlkVG9rZW46IGF3YWl0IHVzZXJJbnRlcm5hbC5nZXRJZFRva2VuKCksXHJcbiAgICAgICAgZGVsZXRlUHJvdmlkZXI6IFtwcm92aWRlcklkXVxyXG4gICAgfSk7XHJcbiAgICBjb25zdCBwcm92aWRlcnNMZWZ0ID0gcHJvdmlkZXJEYXRhQXNOYW1lcyhwcm92aWRlclVzZXJJbmZvIHx8IFtdKTtcclxuICAgIHVzZXJJbnRlcm5hbC5wcm92aWRlckRhdGEgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbHRlcihwZCA9PiBwcm92aWRlcnNMZWZ0LmhhcyhwZC5wcm92aWRlcklkKSk7XHJcbiAgICBpZiAoIXByb3ZpZGVyc0xlZnQuaGFzKFwicGhvbmVcIiAvKiBQcm92aWRlcklkLlBIT05FICovKSkge1xyXG4gICAgICAgIHVzZXJJbnRlcm5hbC5waG9uZU51bWJlciA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuYXV0aC5fcGVyc2lzdFVzZXJJZkN1cnJlbnQodXNlckludGVybmFsKTtcclxuICAgIHJldHVybiB1c2VySW50ZXJuYWw7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2xpbmskMSh1c2VyLCBjcmVkZW50aWFsLCBieXBhc3NBdXRoU3RhdGUgPSBmYWxzZSkge1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBjcmVkZW50aWFsLl9saW5rVG9JZFRva2VuKHVzZXIuYXV0aCwgYXdhaXQgdXNlci5nZXRJZFRva2VuKCkpLCBieXBhc3NBdXRoU3RhdGUpO1xyXG4gICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKHVzZXIsIFwibGlua1wiIC8qIE9wZXJhdGlvblR5cGUuTElOSyAqLywgcmVzcG9uc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9hc3NlcnRMaW5rZWRTdGF0dXMoZXhwZWN0ZWQsIHVzZXIsIHByb3ZpZGVyKSB7XHJcbiAgICBhd2FpdCBfcmVsb2FkV2l0aG91dFNhdmluZyh1c2VyKTtcclxuICAgIGNvbnN0IHByb3ZpZGVySWRzID0gcHJvdmlkZXJEYXRhQXNOYW1lcyh1c2VyLnByb3ZpZGVyRGF0YSk7XHJcbiAgICBjb25zdCBjb2RlID0gZXhwZWN0ZWQgPT09IGZhbHNlXHJcbiAgICAgICAgPyBcInByb3ZpZGVyLWFscmVhZHktbGlua2VkXCIgLyogQXV0aEVycm9yQ29kZS5QUk9WSURFUl9BTFJFQURZX0xJTktFRCAqL1xyXG4gICAgICAgIDogXCJuby1zdWNoLXByb3ZpZGVyXCIgLyogQXV0aEVycm9yQ29kZS5OT19TVUNIX1BST1ZJREVSICovO1xyXG4gICAgX2Fzc2VydChwcm92aWRlcklkcy5oYXMocHJvdmlkZXIpID09PSBleHBlY3RlZCwgdXNlci5hdXRoLCBjb2RlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfcmVhdXRoZW50aWNhdGUodXNlciwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IHsgYXV0aCB9ID0gdXNlcjtcclxuICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBcInJlYXV0aGVudGljYXRlXCIgLyogT3BlcmF0aW9uVHlwZS5SRUFVVEhFTlRJQ0FURSAqLztcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh1c2VyLCBfcHJvY2Vzc0NyZWRlbnRpYWxTYXZpbmdNZmFDb250ZXh0SWZOZWNlc3NhcnkoYXV0aCwgb3BlcmF0aW9uVHlwZSwgY3JlZGVudGlhbCwgdXNlciksIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgX2Fzc2VydChyZXNwb25zZS5pZFRva2VuLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgcGFyc2VkID0gX3BhcnNlVG9rZW4ocmVzcG9uc2UuaWRUb2tlbik7XHJcbiAgICAgICAgX2Fzc2VydChwYXJzZWQsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBjb25zdCB7IHN1YjogbG9jYWxJZCB9ID0gcGFyc2VkO1xyXG4gICAgICAgIF9hc3NlcnQodXNlci51aWQgPT09IGxvY2FsSWQsIGF1dGgsIFwidXNlci1taXNtYXRjaFwiIC8qIEF1dGhFcnJvckNvZGUuVVNFUl9NSVNNQVRDSCAqLyk7XHJcbiAgICAgICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKHVzZXIsIG9wZXJhdGlvblR5cGUsIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gQ29udmVydCB1c2VyIGRlbGV0ZWQgZXJyb3IgaW50byB1c2VyIG1pc21hdGNoXHJcbiAgICAgICAgaWYgKChlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUuY29kZSkgPT09IGBhdXRoLyR7XCJ1c2VyLW5vdC1mb3VuZFwiIC8qIEF1dGhFcnJvckNvZGUuVVNFUl9ERUxFVEVEICovfWApIHtcclxuICAgICAgICAgICAgX2ZhaWwoYXV0aCwgXCJ1c2VyLW1pc21hdGNoXCIgLyogQXV0aEVycm9yQ29kZS5VU0VSX01JU01BVENIICovKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhyb3cgZTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBfc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbCwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBcInNpZ25JblwiIC8qIE9wZXJhdGlvblR5cGUuU0lHTl9JTiAqLztcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgX3Byb2Nlc3NDcmVkZW50aWFsU2F2aW5nTWZhQ29udGV4dElmTmVjZXNzYXJ5KGF1dGgsIG9wZXJhdGlvblR5cGUsIGNyZWRlbnRpYWwpO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aCwgb3BlcmF0aW9uVHlwZSwgcmVzcG9uc2UpO1xyXG4gICAgaWYgKCFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBhd2FpdCBhdXRoLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIH1cclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gd2l0aCB0aGUgZ2l2ZW4gY3JlZGVudGlhbHMuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEFuIHtAbGluayBBdXRoUHJvdmlkZXJ9IGNhbiBiZSB1c2VkIHRvIGdlbmVyYXRlIHRoZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgY3JlZGVudGlhbCkge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoQ3JlZGVudGlhbChfY2FzdEF1dGgoYXV0aCksIGNyZWRlbnRpYWwpO1xyXG59XHJcbi8qKlxyXG4gKiBMaW5rcyB0aGUgdXNlciBhY2NvdW50IHdpdGggdGhlIGdpdmVuIGNyZWRlbnRpYWxzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBBbiB7QGxpbmsgQXV0aFByb3ZpZGVyfSBjYW4gYmUgdXNlZCB0byBnZW5lcmF0ZSB0aGUgY3JlZGVudGlhbC5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIGNyZWRlbnRpYWwgLSBUaGUgYXV0aCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aENyZWRlbnRpYWwodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBjcmVkZW50aWFsLnByb3ZpZGVySWQpO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlckludGVybmFsLCBjcmVkZW50aWFsKTtcclxufVxyXG4vKipcclxuICogUmUtYXV0aGVudGljYXRlcyBhIHVzZXIgdXNpbmcgYSBmcmVzaCBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBVc2UgYmVmb3JlIG9wZXJhdGlvbnMgc3VjaCBhcyB7QGxpbmsgdXBkYXRlUGFzc3dvcmR9IHRoYXQgcmVxdWlyZSB0b2tlbnMgZnJvbSByZWNlbnQgc2lnbi1pblxyXG4gKiBhdHRlbXB0cy4gVGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gcmVjb3ZlciBmcm9tIGEgYENSRURFTlRJQUxfVE9PX09MRF9MT0dJTl9BR0FJTmAgZXJyb3JcclxuICogb3IgYSBgVE9LRU5fRVhQSVJFRGAgZXJyb3IuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBjcmVkZW50aWFsIC0gVGhlIGF1dGggY3JlZGVudGlhbC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCh1c2VyLCBjcmVkZW50aWFsKSB7XHJcbiAgICByZXR1cm4gX3JlYXV0aGVudGljYXRlKGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKSwgY3JlZGVudGlhbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2lnbkluV2l0aEN1c3RvbVRva2VuJDEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtU2lnbkluUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YxL2FjY291bnRzOnNpZ25JbldpdGhDdXN0b21Ub2tlblwiIC8qIEVuZHBvaW50LlNJR05fSU5fV0lUSF9DVVNUT01fVE9LRU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNpZ25zIGluIHVzaW5nIGEgY3VzdG9tIHRva2VuLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBDdXN0b20gdG9rZW5zIGFyZSB1c2VkIHRvIGludGVncmF0ZSBGaXJlYmFzZSBBdXRoIHdpdGggZXhpc3RpbmcgYXV0aCBzeXN0ZW1zLCBhbmQgbXVzdFxyXG4gKiBiZSBnZW5lcmF0ZWQgYnkgYW4gYXV0aCBiYWNrZW5kIHVzaW5nIHRoZVxyXG4gKiB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvcmVmZXJlbmNlL2FkbWluL25vZGUvYWRtaW4uYXV0aC5BdXRoI2NyZWF0ZWN1c3RvbXRva2VuIHwgY3JlYXRlQ3VzdG9tVG9rZW59XHJcbiAqIG1ldGhvZCBpbiB0aGUge0BsaW5rIGh0dHBzOi8vZmlyZWJhc2UuZ29vZ2xlLmNvbS9kb2NzL2F1dGgvYWRtaW4gfCBBZG1pbiBTREt9IC5cclxuICpcclxuICogRmFpbHMgd2l0aCBhbiBlcnJvciBpZiB0aGUgdG9rZW4gaXMgaW52YWxpZCwgZXhwaXJlZCwgb3Igbm90IGFjY2VwdGVkIGJ5IHRoZSBGaXJlYmFzZSBBdXRoIHNlcnZpY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGN1c3RvbVRva2VuIC0gVGhlIGN1c3RvbSB0b2tlbiB0byBzaWduIGluIHdpdGguXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhDdXN0b21Ub2tlbihhdXRoLCBjdXN0b21Ub2tlbikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduSW5XaXRoQ3VzdG9tVG9rZW4kMShhdXRoSW50ZXJuYWwsIHtcclxuICAgICAgICB0b2tlbjogY3VzdG9tVG9rZW4sXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH0pO1xyXG4gICAgY29uc3QgY3JlZCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoSW50ZXJuYWwsIFwic2lnbkluXCIgLyogT3BlcmF0aW9uVHlwZS5TSUdOX0lOICovLCByZXNwb25zZSk7XHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3VwZGF0ZUN1cnJlbnRVc2VyKGNyZWQudXNlcik7XHJcbiAgICByZXR1cm4gY3JlZDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jbGFzcyBNdWx0aUZhY3RvckluZm9JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkLCByZXNwb25zZSkge1xyXG4gICAgICAgIHRoaXMuZmFjdG9ySWQgPSBmYWN0b3JJZDtcclxuICAgICAgICB0aGlzLnVpZCA9IHJlc3BvbnNlLm1mYUVucm9sbG1lbnRJZDtcclxuICAgICAgICB0aGlzLmVucm9sbG1lbnRUaW1lID0gbmV3IERhdGUocmVzcG9uc2UuZW5yb2xsZWRBdCkudG9VVENTdHJpbmcoKTtcclxuICAgICAgICB0aGlzLmRpc3BsYXlOYW1lID0gcmVzcG9uc2UuZGlzcGxheU5hbWU7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21TZXJ2ZXJSZXNwb25zZShhdXRoLCBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgaWYgKCdwaG9uZUluZm8nIGluIGVucm9sbG1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFBob25lTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICgndG90cEluZm8nIGluIGVucm9sbG1lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFRvdHBNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UoYXV0aCwgZW5yb2xsbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUGhvbmVNdWx0aUZhY3RvckluZm9JbXBsIGV4dGVuZHMgTXVsdGlGYWN0b3JJbmZvSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZSkge1xyXG4gICAgICAgIHN1cGVyKFwicGhvbmVcIiAvKiBGYWN0b3JJZC5QSE9ORSAqLywgcmVzcG9uc2UpO1xyXG4gICAgICAgIHRoaXMucGhvbmVOdW1iZXIgPSByZXNwb25zZS5waG9uZUluZm87XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21TZXJ2ZXJSZXNwb25zZShfYXV0aCwgZW5yb2xsbWVudCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUGhvbmVNdWx0aUZhY3RvckluZm9JbXBsKGVucm9sbG1lbnQpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFRvdHBNdWx0aUZhY3RvckluZm9JbXBsIGV4dGVuZHMgTXVsdGlGYWN0b3JJbmZvSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihyZXNwb25zZSkge1xyXG4gICAgICAgIHN1cGVyKFwidG90cFwiIC8qIEZhY3RvcklkLlRPVFAgKi8sIHJlc3BvbnNlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVNlcnZlclJlc3BvbnNlKF9hdXRoLCBlbnJvbGxtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBUb3RwTXVsdGlGYWN0b3JJbmZvSW1wbChlbnJvbGxtZW50KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGgsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgX2Fzc2VydCgoKF9hID0gYWN0aW9uQ29kZVNldHRpbmdzLnVybCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgPiAwLCBhdXRoLCBcImludmFsaWQtY29udGludWUtdXJpXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPTlRJTlVFX1VSSSAqLyk7XHJcbiAgICBfYXNzZXJ0KHR5cGVvZiBhY3Rpb25Db2RlU2V0dGluZ3MuZHluYW1pY0xpbmtEb21haW4gPT09ICd1bmRlZmluZWQnIHx8XHJcbiAgICAgICAgYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluLmxlbmd0aCA+IDAsIGF1dGgsIFwiaW52YWxpZC1keW5hbWljLWxpbmstZG9tYWluXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0RZTkFNSUNfTElOS19ET01BSU4gKi8pO1xyXG4gICAgcmVxdWVzdC5jb250aW51ZVVybCA9IGFjdGlvbkNvZGVTZXR0aW5ncy51cmw7XHJcbiAgICByZXF1ZXN0LmR5bmFtaWNMaW5rRG9tYWluID0gYWN0aW9uQ29kZVNldHRpbmdzLmR5bmFtaWNMaW5rRG9tYWluO1xyXG4gICAgcmVxdWVzdC5jYW5IYW5kbGVDb2RlSW5BcHAgPSBhY3Rpb25Db2RlU2V0dGluZ3MuaGFuZGxlQ29kZUluQXBwO1xyXG4gICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MpIHtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQubGVuZ3RoID4gMCwgYXV0aCwgXCJtaXNzaW5nLWlvcy1idW5kbGUtaWRcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfSU9TX0JVTkRMRV9JRCAqLyk7XHJcbiAgICAgICAgcmVxdWVzdC5pT1NCdW5kbGVJZCA9IGFjdGlvbkNvZGVTZXR0aW5ncy5pT1MuYnVuZGxlSWQ7XHJcbiAgICB9XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQpIHtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lLmxlbmd0aCA+IDAsIGF1dGgsIFwibWlzc2luZy1hbmRyb2lkLXBrZy1uYW1lXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX0FORFJPSURfUEFDS0FHRV9OQU1FICovKTtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRJbnN0YWxsQXBwID0gYWN0aW9uQ29kZVNldHRpbmdzLmFuZHJvaWQuaW5zdGFsbEFwcDtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRNaW5pbXVtVmVyc2lvbkNvZGUgPVxyXG4gICAgICAgICAgICBhY3Rpb25Db2RlU2V0dGluZ3MuYW5kcm9pZC5taW5pbXVtVmVyc2lvbjtcclxuICAgICAgICByZXF1ZXN0LmFuZHJvaWRQYWNrYWdlTmFtZSA9IGFjdGlvbkNvZGVTZXR0aW5ncy5hbmRyb2lkLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTZW5kcyBhIHBhc3N3b3JkIHJlc2V0IGVtYWlsIHRvIHRoZSBnaXZlbiBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUbyBjb21wbGV0ZSB0aGUgcGFzc3dvcmQgcmVzZXQsIGNhbGwge0BsaW5rIGNvbmZpcm1QYXNzd29yZFJlc2V0fSB3aXRoIHRoZSBjb2RlIHN1cHBsaWVkIGluXHJcbiAqIHRoZSBlbWFpbCBzZW50IHRvIHRoZSB1c2VyLCBhbG9uZyB3aXRoIHRoZSBuZXcgcGFzc3dvcmQgc3BlY2lmaWVkIGJ5IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdXNlci5cclxuICogYXdhaXQgY29uZmlybVBhc3N3b3JkUmVzZXQoJ3VzZXJAZXhhbXBsZS5jb20nLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gYWN0aW9uQ29kZVNldHRpbmdzIC0gVGhlIHtAbGluayBBY3Rpb25Db2RlU2V0dGluZ3N9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGF1dGgsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiUEFTU1dPUkRfUkVTRVRcIiAvKiBBY3Rpb25Db2RlT3BlcmF0aW9uLlBBU1NXT1JEX1JFU0VUICovLFxyXG4gICAgICAgIGVtYWlsLFxyXG4gICAgICAgIGNsaWVudFR5cGU6IFwiQ0xJRU5UX1RZUEVfV0VCXCIgLyogUmVjYXB0Y2hhQ2xpZW50VHlwZS5XRUIgKi9cclxuICAgIH07XHJcbiAgICBpZiAoKF9hID0gYXV0aEludGVybmFsLl9nZXRSZWNhcHRjaGFDb25maWcoKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmVtYWlsUGFzc3dvcmRFbmFibGVkKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdFdpdGhSZWNhcHRjaGEgPSBhd2FpdCBpbmplY3RSZWNhcHRjaGFGaWVsZHMoYXV0aEludGVybmFsLCByZXF1ZXN0LCBcImdldE9vYkNvZGVcIiAvKiBSZWNhcHRjaGFBY3Rpb25OYW1lLkdFVF9PT0JfQ09ERSAqLywgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KGF1dGhJbnRlcm5hbCwgcmVxdWVzdFdpdGhSZWNhcHRjaGEsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoSW50ZXJuYWwsIHJlcXVlc3RXaXRoUmVjYXB0Y2hhKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoSW50ZXJuYWwsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF3YWl0IHNlbmRQYXNzd29yZFJlc2V0RW1haWwkMShhdXRoSW50ZXJuYWwsIHJlcXVlc3QpXHJcbiAgICAgICAgICAgIC5jYXRjaChhc3luYyAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgaWYgKGVycm9yLmNvZGUgPT09IGBhdXRoLyR7XCJtaXNzaW5nLXJlY2FwdGNoYS10b2tlblwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19SRUNBUFRDSEFfVE9LRU4gKi99YCkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Bhc3N3b3JkIHJlc2V0cyBhcmUgcHJvdGVjdGVkIGJ5IHJlQ0FQVENIQSBmb3IgdGhpcyBwcm9qZWN0LiBBdXRvbWF0aWNhbGx5IHRyaWdnZXJpbmcgdGhlIHJlQ0FQVENIQSBmbG93IGFuZCByZXN0YXJ0aW5nIHRoZSBwYXNzd29yZCByZXNldCBmbG93LicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdFdpdGhSZWNhcHRjaGEgPSBhd2FpdCBpbmplY3RSZWNhcHRjaGFGaWVsZHMoYXV0aEludGVybmFsLCByZXF1ZXN0LCBcImdldE9vYkNvZGVcIiAvKiBSZWNhcHRjaGFBY3Rpb25OYW1lLkdFVF9PT0JfQ09ERSAqLywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoSW50ZXJuYWwsIHJlcXVlc3RXaXRoUmVjYXB0Y2hhLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYXdhaXQgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCQxKGF1dGhJbnRlcm5hbCwgcmVxdWVzdFdpdGhSZWNhcHRjaGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDb21wbGV0ZXMgdGhlIHBhc3N3b3JkIHJlc2V0IHByb2Nlc3MsIGdpdmVuIGEgY29uZmlybWF0aW9uIGNvZGUgYW5kIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgY29uZmlybWF0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICogQHBhcmFtIG5ld1Bhc3N3b3JkIC0gVGhlIG5ldyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29uZmlybVBhc3N3b3JkUmVzZXQoYXV0aCwgb29iQ29kZSwgbmV3UGFzc3dvcmQpIHtcclxuICAgIGF3YWl0IHJlc2V0UGFzc3dvcmQoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7XHJcbiAgICAgICAgb29iQ29kZSxcclxuICAgICAgICBuZXdQYXNzd29yZFxyXG4gICAgfSk7XHJcbiAgICAvLyBEbyBub3QgcmV0dXJuIHRoZSBlbWFpbC5cclxufVxyXG4vKipcclxuICogQXBwbGllcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBvb2JDb2RlIC0gQSB2ZXJpZmljYXRpb24gY29kZSBzZW50IHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBhcHBseUFjdGlvbkNvZGUoYXV0aCwgb29iQ29kZSkge1xyXG4gICAgYXdhaXQgYXBwbHlBY3Rpb25Db2RlJDEoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCB7IG9vYkNvZGUgfSk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyBhIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcmV0dXJucyBtZXRhZGF0YSBhYm91dCB0aGUgY29kZS5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gb29iQ29kZSAtIEEgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY2hlY2tBY3Rpb25Db2RlKGF1dGgsIG9vYkNvZGUpIHtcclxuICAgIGNvbnN0IGF1dGhNb2R1bGFyID0gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpO1xyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCByZXNldFBhc3N3b3JkKGF1dGhNb2R1bGFyLCB7IG9vYkNvZGUgfSk7XHJcbiAgICAvLyBFbWFpbCBjb3VsZCBiZSBlbXB0eSBvbmx5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXMgRU1BSUxfU0lHTklOIG9yXHJcbiAgICAvLyBWRVJJRllfQU5EX0NIQU5HRV9FTUFJTC5cclxuICAgIC8vIE5ldyBlbWFpbCBzaG91bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcclxuICAgIC8vIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMLlxyXG4gICAgLy8gTXVsdGktZmFjdG9yIGluZm8gY291bGQgbm90IGJlIGVtcHR5IGlmIHRoZSByZXF1ZXN0IHR5cGUgaXNcclxuICAgIC8vIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OLlxyXG4gICAgY29uc3Qgb3BlcmF0aW9uID0gcmVzcG9uc2UucmVxdWVzdFR5cGU7XHJcbiAgICBfYXNzZXJ0KG9wZXJhdGlvbiwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHN3aXRjaCAob3BlcmF0aW9uKSB7XHJcbiAgICAgICAgY2FzZSBcIkVNQUlMX1NJR05JTlwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOICovOlxyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBBY3Rpb25Db2RlT3BlcmF0aW9uLlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovOlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLm5ld0VtYWlsLCBhdXRoTW9kdWxhciwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIFwiUkVWRVJUX1NFQ09ORF9GQUNUT1JfQURESVRJT05cIiAvKiBBY3Rpb25Db2RlT3BlcmF0aW9uLlJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OICovOlxyXG4gICAgICAgICAgICBfYXNzZXJ0KHJlc3BvbnNlLm1mYUluZm8sIGF1dGhNb2R1bGFyLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgLy8gZmFsbCB0aHJvdWdoXHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgX2Fzc2VydChyZXNwb25zZS5lbWFpbCwgYXV0aE1vZHVsYXIsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIC8vIFRoZSBtdWx0aS1mYWN0b3IgaW5mbyBmb3IgcmV2ZXJ0IHNlY29uZCBmYWN0b3IgYWRkaXRpb25cclxuICAgIGxldCBtdWx0aUZhY3RvckluZm8gPSBudWxsO1xyXG4gICAgaWYgKHJlc3BvbnNlLm1mYUluZm8pIHtcclxuICAgICAgICBtdWx0aUZhY3RvckluZm8gPSBNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UoX2Nhc3RBdXRoKGF1dGhNb2R1bGFyKSwgcmVzcG9uc2UubWZhSW5mbyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgZW1haWw6IChyZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi9cclxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UubmV3RW1haWxcclxuICAgICAgICAgICAgICAgIDogcmVzcG9uc2UuZW1haWwpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIHByZXZpb3VzRW1haWw6IChyZXNwb25zZS5yZXF1ZXN0VHlwZSA9PT0gXCJWRVJJRllfQU5EX0NIQU5HRV9FTUFJTFwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0FORF9DSEFOR0VfRU1BSUwgKi9cclxuICAgICAgICAgICAgICAgID8gcmVzcG9uc2UuZW1haWxcclxuICAgICAgICAgICAgICAgIDogcmVzcG9uc2UubmV3RW1haWwpIHx8IG51bGwsXHJcbiAgICAgICAgICAgIG11bHRpRmFjdG9ySW5mb1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3BlcmF0aW9uXHJcbiAgICB9O1xyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgYSBwYXNzd29yZCByZXNldCBjb2RlIHNlbnQgdG8gdGhlIHVzZXIgYnkgZW1haWwgb3Igb3RoZXIgb3V0LW9mLWJhbmQgbWVjaGFuaXNtLlxyXG4gKlxyXG4gKiBAcmV0dXJucyB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MgaWYgdmFsaWQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGNvZGUgLSBBIHZlcmlmaWNhdGlvbiBjb2RlIHNlbnQgdG8gdGhlIHVzZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlKGF1dGgsIGNvZGUpIHtcclxuICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2hlY2tBY3Rpb25Db2RlKGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKSwgY29kZSk7XHJcbiAgICAvLyBFbWFpbCBzaG91bGQgYWx3YXlzIGJlIHByZXNlbnQgc2luY2UgYSBjb2RlIHdhcyBzZW50IHRvIGl0XHJcbiAgICByZXR1cm4gZGF0YS5lbWFpbDtcclxufVxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyB1c2VyIGFjY291bnQgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgZW1haWwgYWRkcmVzcyBhbmQgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIE9uIHN1Y2Nlc3NmdWwgY3JlYXRpb24gb2YgdGhlIHVzZXIgYWNjb3VudCwgdGhpcyB1c2VyIHdpbGwgYWxzbyBiZSBzaWduZWQgaW4gdG8geW91ciBhcHBsaWNhdGlvbi5cclxuICpcclxuICogVXNlciBhY2NvdW50IGNyZWF0aW9uIGNhbiBmYWlsIGlmIHRoZSBhY2NvdW50IGFscmVhZHkgZXhpc3RzIG9yIHRoZSBwYXNzd29yZCBpcyBpbnZhbGlkLlxyXG4gKlxyXG4gKiBOb3RlOiBUaGUgZW1haWwgYWRkcmVzcyBhY3RzIGFzIGEgdW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyIGFuZCBlbmFibGVzIGFuIGVtYWlsLWJhc2VkXHJcbiAqIHBhc3N3b3JkIHJlc2V0LiBUaGlzIGZ1bmN0aW9uIHdpbGwgY3JlYXRlIGEgbmV3IHVzZXIgYWNjb3VudCBhbmQgc2V0IHRoZSBpbml0aWFsIHVzZXIgcGFzc3dvcmQuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gcGFzc3dvcmQgLSBUaGUgdXNlcidzIGNob3NlbiBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICByZXR1cm5TZWN1cmVUb2tlbjogdHJ1ZSxcclxuICAgICAgICBlbWFpbCxcclxuICAgICAgICBwYXNzd29yZCxcclxuICAgICAgICBjbGllbnRUeXBlOiBcIkNMSUVOVF9UWVBFX1dFQlwiIC8qIFJlY2FwdGNoYUNsaWVudFR5cGUuV0VCICovXHJcbiAgICB9O1xyXG4gICAgbGV0IHNpZ25VcFJlc3BvbnNlO1xyXG4gICAgaWYgKChfYSA9IGF1dGhJbnRlcm5hbC5fZ2V0UmVjYXB0Y2hhQ29uZmlnKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWFpbFBhc3N3b3JkRW5hYmxlZCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RXaXRoUmVjYXB0Y2hhID0gYXdhaXQgaW5qZWN0UmVjYXB0Y2hhRmllbGRzKGF1dGhJbnRlcm5hbCwgcmVxdWVzdCwgXCJzaWduVXBQYXNzd29yZFwiIC8qIFJlY2FwdGNoYUFjdGlvbk5hbWUuU0lHTl9VUF9QQVNTV09SRCAqLyk7XHJcbiAgICAgICAgc2lnblVwUmVzcG9uc2UgPSBzaWduVXAoYXV0aEludGVybmFsLCByZXF1ZXN0V2l0aFJlY2FwdGNoYSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBzaWduVXBSZXNwb25zZSA9IHNpZ25VcChhdXRoSW50ZXJuYWwsIHJlcXVlc3QpLmNhdGNoKGFzeW5jIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtcIm1pc3NpbmctcmVjYXB0Y2hhLXRva2VuXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1JFQ0FQVENIQV9UT0tFTiAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnU2lnbi11cCBpcyBwcm90ZWN0ZWQgYnkgcmVDQVBUQ0hBIGZvciB0aGlzIHByb2plY3QuIEF1dG9tYXRpY2FsbHkgdHJpZ2dlcmluZyB0aGUgcmVDQVBUQ0hBIGZsb3cgYW5kIHJlc3RhcnRpbmcgdGhlIHNpZ24tdXAgZmxvdy4nKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlcXVlc3RXaXRoUmVjYXB0Y2hhID0gYXdhaXQgaW5qZWN0UmVjYXB0Y2hhRmllbGRzKGF1dGhJbnRlcm5hbCwgcmVxdWVzdCwgXCJzaWduVXBQYXNzd29yZFwiIC8qIFJlY2FwdGNoYUFjdGlvbk5hbWUuU0lHTl9VUF9QQVNTV09SRCAqLyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2lnblVwKGF1dGhJbnRlcm5hbCwgcmVxdWVzdFdpdGhSZWNhcHRjaGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzaWduVXBSZXNwb25zZS5jYXRjaChlcnJvciA9PiB7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTtcclxuICAgIH0pO1xyXG4gICAgY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBVc2VyQ3JlZGVudGlhbEltcGwuX2Zyb21JZFRva2VuUmVzcG9uc2UoYXV0aEludGVybmFsLCBcInNpZ25JblwiIC8qIE9wZXJhdGlvblR5cGUuU0lHTl9JTiAqLywgcmVzcG9uc2UpO1xyXG4gICAgYXdhaXQgYXV0aEludGVybmFsLl91cGRhdGVDdXJyZW50VXNlcih1c2VyQ3JlZGVudGlhbC51c2VyKTtcclxuICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYW4gZW1haWwgYW5kIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBGYWlscyB3aXRoIGFuIGVycm9yIGlmIHRoZSBlbWFpbCBhZGRyZXNzIGFuZCBwYXNzd29yZCBkbyBub3QgbWF0Y2guXHJcbiAqXHJcbiAqIE5vdGU6IFRoZSB1c2VyJ3MgcGFzc3dvcmQgaXMgTk9UIHRoZSBwYXNzd29yZCB1c2VkIHRvIGFjY2VzcyB0aGUgdXNlcidzIGVtYWlsIGFjY291bnQuIFRoZVxyXG4gKiBlbWFpbCBhZGRyZXNzIHNlcnZlcyBhcyBhIHVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgdXNlciwgYW5kIHRoZSBwYXNzd29yZCBpcyB1c2VkIHRvIGFjY2Vzc1xyXG4gKiB0aGUgdXNlcidzIGFjY291bnQgaW4geW91ciBGaXJlYmFzZSBwcm9qZWN0LiBTZWUgYWxzbzoge0BsaW5rIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZH0uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXJzIGVtYWlsIGFkZHJlc3MuXHJcbiAqIEBwYXJhbSBwYXNzd29yZCAtIFRoZSB1c2VycyBwYXNzd29yZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aEVtYWlsQW5kUGFzc3dvcmQoYXV0aCwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICByZXR1cm4gc2lnbkluV2l0aENyZWRlbnRpYWwoZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLCBFbWFpbEF1dGhQcm92aWRlci5jcmVkZW50aWFsKGVtYWlsLCBwYXNzd29yZCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBTZW5kcyBhIHNpZ24taW4gZW1haWwgbGluayB0byB0aGUgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQgZW1haWwuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoZSBzaWduLWluIG9wZXJhdGlvbiBoYXMgdG8gYWx3YXlzIGJlIGNvbXBsZXRlZCBpbiB0aGUgYXBwIHVubGlrZSBvdGhlciBvdXQgb2YgYmFuZCBlbWFpbFxyXG4gKiBhY3Rpb25zIChwYXNzd29yZCByZXNldCBhbmQgZW1haWwgdmVyaWZpY2F0aW9ucykuIFRoaXMgaXMgYmVjYXVzZSwgYXQgdGhlIGVuZCBvZiB0aGUgZmxvdyxcclxuICogdGhlIHVzZXIgaXMgZXhwZWN0ZWQgdG8gYmUgc2lnbmVkIGluIGFuZCB0aGVpciBBdXRoIHN0YXRlIHBlcnNpc3RlZCB3aXRoaW4gdGhlIGFwcC5cclxuICpcclxuICogVG8gY29tcGxldGUgc2lnbiBpbiB3aXRoIHRoZSBlbWFpbCBsaW5rLCBjYWxsIHtAbGluayBzaWduSW5XaXRoRW1haWxMaW5rfSB3aXRoIHRoZSBlbWFpbFxyXG4gKiBhZGRyZXNzIGFuZCB0aGUgZW1haWwgbGluayBzdXBwbGllZCBpbiB0aGUgZW1haWwgc2VudCB0byB0aGUgdXNlci5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBjb25zdCBhY3Rpb25Db2RlU2V0dGluZ3MgPSB7XHJcbiAqICAgdXJsOiAnaHR0cHM6Ly93d3cuZXhhbXBsZS5jb20vP2VtYWlsPXVzZXJAZXhhbXBsZS5jb20nLFxyXG4gKiAgIGlPUzoge1xyXG4gKiAgICAgIGJ1bmRsZUlkOiAnY29tLmV4YW1wbGUuaW9zJ1xyXG4gKiAgIH0sXHJcbiAqICAgYW5kcm9pZDoge1xyXG4gKiAgICAgcGFja2FnZU5hbWU6ICdjb20uZXhhbXBsZS5hbmRyb2lkJyxcclxuICogICAgIGluc3RhbGxBcHA6IHRydWUsXHJcbiAqICAgICBtaW5pbXVtVmVyc2lvbjogJzEyJ1xyXG4gKiAgIH0sXHJcbiAqICAgaGFuZGxlQ29kZUluQXBwOiB0cnVlXHJcbiAqIH07XHJcbiAqIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbChhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBlbWFpbExpbmsgZnJvbSB0aGUgdXNlci5cclxuICogaWYoaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykpIHtcclxuICogICBhd2FpdCBzaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsICd1c2VyQGV4YW1wbGUuY29tJywgZW1haWxMaW5rKTtcclxuICogfVxyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGhJbnRlcm5hbCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbCAtIFRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICogQHBhcmFtIGFjdGlvbkNvZGVTZXR0aW5ncyAtIFRoZSB7QGxpbmsgQWN0aW9uQ29kZVNldHRpbmdzfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGF1dGgsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIHZhciBfYTtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiRU1BSUxfU0lHTklOXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5FTUFJTF9TSUdOSU4gKi8sXHJcbiAgICAgICAgZW1haWwsXHJcbiAgICAgICAgY2xpZW50VHlwZTogXCJDTElFTlRfVFlQRV9XRUJcIiAvKiBSZWNhcHRjaGFDbGllbnRUeXBlLldFQiAqL1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIHNldEFjdGlvbkNvZGVTZXR0aW5ncyhyZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfYXNzZXJ0KGFjdGlvbkNvZGVTZXR0aW5ncy5oYW5kbGVDb2RlSW5BcHAsIGF1dGhJbnRlcm5hbCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdChhdXRoSW50ZXJuYWwsIHJlcXVlc3QsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKChfYSA9IGF1dGhJbnRlcm5hbC5fZ2V0UmVjYXB0Y2hhQ29uZmlnKCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWFpbFBhc3N3b3JkRW5hYmxlZCkge1xyXG4gICAgICAgIGNvbnN0IHJlcXVlc3RXaXRoUmVjYXB0Y2hhID0gYXdhaXQgaW5qZWN0UmVjYXB0Y2hhRmllbGRzKGF1dGhJbnRlcm5hbCwgcmVxdWVzdCwgXCJnZXRPb2JDb2RlXCIgLyogUmVjYXB0Y2hhQWN0aW9uTmFtZS5HRVRfT09CX0NPREUgKi8sIHRydWUpO1xyXG4gICAgICAgIHNldEFjdGlvbkNvZGVTZXR0aW5ncyhyZXF1ZXN0V2l0aFJlY2FwdGNoYSwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgICAgICBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwkMShhdXRoSW50ZXJuYWwsIHJlcXVlc3RXaXRoUmVjYXB0Y2hhKTtcclxuICAgIH1cclxuICAgIGVsc2Uge1xyXG4gICAgICAgIHNldEFjdGlvbkNvZGVTZXR0aW5ncyhyZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgICAgIGF3YWl0IHNlbmRTaWduSW5MaW5rVG9FbWFpbCQxKGF1dGhJbnRlcm5hbCwgcmVxdWVzdClcclxuICAgICAgICAgICAgLmNhdGNoKGFzeW5jIChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IuY29kZSA9PT0gYGF1dGgvJHtcIm1pc3NpbmctcmVjYXB0Y2hhLXRva2VuXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX1JFQ0FQVENIQV9UT0tFTiAqL31gKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRW1haWwgbGluayBzaWduLWluIGlzIHByb3RlY3RlZCBieSByZUNBUFRDSEEgZm9yIHRoaXMgcHJvamVjdC4gQXV0b21hdGljYWxseSB0cmlnZ2VyaW5nIHRoZSByZUNBUFRDSEEgZmxvdyBhbmQgcmVzdGFydGluZyB0aGUgc2lnbi1pbiBmbG93LicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVxdWVzdFdpdGhSZWNhcHRjaGEgPSBhd2FpdCBpbmplY3RSZWNhcHRjaGFGaWVsZHMoYXV0aEludGVybmFsLCByZXF1ZXN0LCBcImdldE9vYkNvZGVcIiAvKiBSZWNhcHRjaGFBY3Rpb25OYW1lLkdFVF9PT0JfQ09ERSAqLywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBzZXRBY3Rpb25Db2RlU2V0dGluZ3MocmVxdWVzdFdpdGhSZWNhcHRjaGEsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwkMShhdXRoSW50ZXJuYWwsIHJlcXVlc3RXaXRoUmVjYXB0Y2hhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQ2hlY2tzIGlmIGFuIGluY29taW5nIGxpbmsgaXMgYSBzaWduLWluIHdpdGggZW1haWwgbGluayBzdWl0YWJsZSBmb3Ige0BsaW5rIHNpZ25JbldpdGhFbWFpbExpbmt9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBlbWFpbExpbmsgLSBUaGUgbGluayBzZW50IHRvIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gaXNTaWduSW5XaXRoRW1haWxMaW5rKGF1dGgsIGVtYWlsTGluaykge1xyXG4gICAgY29uc3QgYWN0aW9uQ29kZVVybCA9IEFjdGlvbkNvZGVVUkwucGFyc2VMaW5rKGVtYWlsTGluayk7XHJcbiAgICByZXR1cm4gKGFjdGlvbkNvZGVVcmwgPT09IG51bGwgfHwgYWN0aW9uQ29kZVVybCA9PT0gdm9pZCAwID8gdm9pZCAwIDogYWN0aW9uQ29kZVVybC5vcGVyYXRpb24pID09PSBcIkVNQUlMX1NJR05JTlwiIC8qIEFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOICovO1xyXG59XHJcbi8qKlxyXG4gKiBBc3luY2hyb25vdXNseSBzaWducyBpbiB1c2luZyBhbiBlbWFpbCBhbmQgc2lnbi1pbiBlbWFpbCBsaW5rLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBubyBsaW5rIGlzIHBhc3NlZCwgdGhlIGxpbmsgaXMgaW5mZXJyZWQgZnJvbSB0aGUgY3VycmVudCBVUkwuXHJcbiAqXHJcbiAqIEZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIGVtYWlsIGFkZHJlc3MgaXMgaW52YWxpZCBvciBPVFAgaW4gZW1haWwgbGluayBleHBpcmVzLlxyXG4gKlxyXG4gKiBOb3RlOiBDb25maXJtIHRoZSBsaW5rIGlzIGEgc2lnbi1pbiBlbWFpbCBsaW5rIGJlZm9yZSBjYWxsaW5nIHRoaXMgbWV0aG9kIGZpcmViYXNlLmF1dGguQXV0aC5pc1NpZ25JbldpdGhFbWFpbExpbmsuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogY29uc3QgYWN0aW9uQ29kZVNldHRpbmdzID0ge1xyXG4gKiAgIHVybDogJ2h0dHBzOi8vd3d3LmV4YW1wbGUuY29tLz9lbWFpbD11c2VyQGV4YW1wbGUuY29tJyxcclxuICogICBpT1M6IHtcclxuICogICAgICBidW5kbGVJZDogJ2NvbS5leGFtcGxlLmlvcydcclxuICogICB9LFxyXG4gKiAgIGFuZHJvaWQ6IHtcclxuICogICAgIHBhY2thZ2VOYW1lOiAnY29tLmV4YW1wbGUuYW5kcm9pZCcsXHJcbiAqICAgICBpbnN0YWxsQXBwOiB0cnVlLFxyXG4gKiAgICAgbWluaW11bVZlcnNpb246ICcxMidcclxuICogICB9LFxyXG4gKiAgIGhhbmRsZUNvZGVJbkFwcDogdHJ1ZVxyXG4gKiB9O1xyXG4gKiBhd2FpdCBzZW5kU2lnbkluTGlua1RvRW1haWwoYXV0aCwgJ3VzZXJAZXhhbXBsZS5jb20nLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gKiAvLyBPYnRhaW4gZW1haWxMaW5rIGZyb20gdGhlIHVzZXIuXHJcbiAqIGlmKGlzU2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCBlbWFpbExpbmspKSB7XHJcbiAqICAgYXdhaXQgc2lnbkluV2l0aEVtYWlsTGluayhhdXRoLCAndXNlckBleGFtcGxlLmNvbScsIGVtYWlsTGluayk7XHJcbiAqIH1cclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIGVtYWlsIC0gVGhlIHVzZXIncyBlbWFpbCBhZGRyZXNzLlxyXG4gKiBAcGFyYW0gZW1haWxMaW5rIC0gVGhlIGxpbmsgc2VudCB0byB0aGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNpZ25JbldpdGhFbWFpbExpbmsoYXV0aCwgZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBjcmVkZW50aWFsID0gRW1haWxBdXRoUHJvdmlkZXIuY3JlZGVudGlhbFdpdGhMaW5rKGVtYWlsLCBlbWFpbExpbmsgfHwgX2dldEN1cnJlbnRVcmwoKSk7XHJcbiAgICAvLyBDaGVjayBpZiB0aGUgdGVuYW50IElEIGluIHRoZSBlbWFpbCBsaW5rIG1hdGNoZXMgdGhlIHRlbmFudCBJRCBvbiBBdXRoXHJcbiAgICAvLyBpbnN0YW5jZS5cclxuICAgIF9hc3NlcnQoY3JlZGVudGlhbC5fdGVuYW50SWQgPT09IChhdXRoTW9kdWxhci50ZW5hbnRJZCB8fCBudWxsKSwgYXV0aE1vZHVsYXIsIFwidGVuYW50LWlkLW1pc21hdGNoXCIgLyogQXV0aEVycm9yQ29kZS5URU5BTlRfSURfTUlTTUFUQ0ggKi8pO1xyXG4gICAgcmV0dXJuIHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGhNb2R1bGFyLCBjcmVkZW50aWFsKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVBdXRoVXJpKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92MS9hY2NvdW50czpjcmVhdGVBdXRoVXJpXCIgLyogRW5kcG9pbnQuQ1JFQVRFX0FVVEhfVVJJICovLCBfYWRkVGlkSWZOZWNlc3NhcnkoYXV0aCwgcmVxdWVzdCkpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBHZXRzIHRoZSBsaXN0IG9mIHBvc3NpYmxlIHNpZ24gaW4gbWV0aG9kcyBmb3IgdGhlIGdpdmVuIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGRpZmZlcmVudGlhdGUgbWV0aG9kcyBvZiBzaWduLWluIGZvciB0aGUgc2FtZSBwcm92aWRlciwgZWcuXHJcbiAqIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2hpY2ggaGFzIDIgbWV0aG9kcyBvZiBzaWduLWluLFxyXG4gKiB7QGxpbmsgU2lnbkluTWV0aG9kfS5FTUFJTF9QQVNTV09SRCBhbmRcclxuICoge0BsaW5rIFNpZ25Jbk1ldGhvZH0uRU1BSUxfTElOSy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZW1haWwgLSBUaGUgdXNlcidzIGVtYWlsIGFkZHJlc3MuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKGF1dGgsIGVtYWlsKSB7XHJcbiAgICAvLyBjcmVhdGVBdXRoVXJpIHJldHVybnMgYW4gZXJyb3IgaWYgY29udGludWUgVVJJIGlzIG5vdCBodHRwIG9yIGh0dHBzLlxyXG4gICAgLy8gRm9yIGVudmlyb25tZW50cyBsaWtlIENvcmRvdmEsIENocm9tZSBleHRlbnNpb25zLCBuYXRpdmUgZnJhbWV3b3JrcywgZmlsZVxyXG4gICAgLy8gc3lzdGVtcywgZXRjLCB1c2UgaHR0cDovL2xvY2FsaG9zdCBhcyBjb250aW51ZSBVUkwuXHJcbiAgICBjb25zdCBjb250aW51ZVVyaSA9IF9pc0h0dHBPckh0dHBzKCkgPyBfZ2V0Q3VycmVudFVybCgpIDogJ2h0dHA6Ly9sb2NhbGhvc3QnO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICBpZGVudGlmaWVyOiBlbWFpbCxcclxuICAgICAgICBjb250aW51ZVVyaVxyXG4gICAgfTtcclxuICAgIGNvbnN0IHsgc2lnbmluTWV0aG9kcyB9ID0gYXdhaXQgY3JlYXRlQXV0aFVyaShnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCksIHJlcXVlc3QpO1xyXG4gICAgcmV0dXJuIHNpZ25pbk1ldGhvZHMgfHwgW107XHJcbn1cclxuLyoqXHJcbiAqIFNlbmRzIGEgdmVyaWZpY2F0aW9uIGVtYWlsIHRvIGEgdXNlci5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHZlcmlmaWNhdGlvbiBwcm9jZXNzIGlzIGNvbXBsZXRlZCBieSBjYWxsaW5nIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uKHVzZXIsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAqIC8vIE9idGFpbiBjb2RlIGZyb20gdGhlIHVzZXIuXHJcbiAqIGF3YWl0IGFwcGx5QWN0aW9uQ29kZShhdXRoLCBjb2RlKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHNlbmRFbWFpbFZlcmlmaWNhdGlvbih1c2VyLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0VNQUlMXCIgLyogQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfRU1BSUwgKi8sXHJcbiAgICAgICAgaWRUb2tlblxyXG4gICAgfTtcclxuICAgIGlmIChhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICBfc2V0QWN0aW9uQ29kZVNldHRpbmdzT25SZXF1ZXN0KHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0LCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgeyBlbWFpbCB9ID0gYXdhaXQgc2VuZEVtYWlsVmVyaWZpY2F0aW9uJDEodXNlckludGVybmFsLmF1dGgsIHJlcXVlc3QpO1xyXG4gICAgaWYgKGVtYWlsICE9PSB1c2VyLmVtYWlsKSB7XHJcbiAgICAgICAgYXdhaXQgdXNlci5yZWxvYWQoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogU2VuZHMgYSB2ZXJpZmljYXRpb24gZW1haWwgdG8gYSBuZXcgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVGhlIHVzZXIncyBlbWFpbCB3aWxsIGJlIHVwZGF0ZWQgdG8gdGhlIG5ldyBvbmUgYWZ0ZXIgYmVpbmcgdmVyaWZpZWQuXHJcbiAqXHJcbiAqIElmIHlvdSBoYXZlIGEgY3VzdG9tIGVtYWlsIGFjdGlvbiBoYW5kbGVyLCB5b3UgY2FuIGNvbXBsZXRlIHRoZSB2ZXJpZmljYXRpb24gcHJvY2VzcyBieSBjYWxsaW5nXHJcbiAqIHtAbGluayBhcHBseUFjdGlvbkNvZGV9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGNvbnN0IGFjdGlvbkNvZGVTZXR0aW5ncyA9IHtcclxuICogICB1cmw6ICdodHRwczovL3d3dy5leGFtcGxlLmNvbS8/ZW1haWw9dXNlckBleGFtcGxlLmNvbScsXHJcbiAqICAgaU9TOiB7XHJcbiAqICAgICAgYnVuZGxlSWQ6ICdjb20uZXhhbXBsZS5pb3MnXHJcbiAqICAgfSxcclxuICogICBhbmRyb2lkOiB7XHJcbiAqICAgICBwYWNrYWdlTmFtZTogJ2NvbS5leGFtcGxlLmFuZHJvaWQnLFxyXG4gKiAgICAgaW5zdGFsbEFwcDogdHJ1ZSxcclxuICogICAgIG1pbmltdW1WZXJzaW9uOiAnMTInXHJcbiAqICAgfSxcclxuICogICBoYW5kbGVDb2RlSW5BcHA6IHRydWVcclxuICogfTtcclxuICogYXdhaXQgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodXNlciwgJ25ld2VtYWlsQGV4YW1wbGUuY29tJywgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICogLy8gT2J0YWluIGNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogYXdhaXQgYXBwbHlBY3Rpb25Db2RlKGF1dGgsIGNvZGUpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzIHRvIGJlIHZlcmlmaWVkIGJlZm9yZSB1cGRhdGUuXHJcbiAqIEBwYXJhbSBhY3Rpb25Db2RlU2V0dGluZ3MgLSBUaGUge0BsaW5rIEFjdGlvbkNvZGVTZXR0aW5nc30uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHZlcmlmeUJlZm9yZVVwZGF0ZUVtYWlsKHVzZXIsIG5ld0VtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB1c2VyLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSB7XHJcbiAgICAgICAgcmVxdWVzdFR5cGU6IFwiVkVSSUZZX0FORF9DSEFOR0VfRU1BSUxcIiAvKiBBY3Rpb25Db2RlT3BlcmF0aW9uLlZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMICovLFxyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgbmV3RW1haWxcclxuICAgIH07XHJcbiAgICBpZiAoYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgX3NldEFjdGlvbkNvZGVTZXR0aW5nc09uUmVxdWVzdCh1c2VySW50ZXJuYWwuYXV0aCwgcmVxdWVzdCwgYWN0aW9uQ29kZVNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgZW1haWwgfSA9IGF3YWl0IHZlcmlmeUFuZENoYW5nZUVtYWlsKHVzZXJJbnRlcm5hbC5hdXRoLCByZXF1ZXN0KTtcclxuICAgIGlmIChlbWFpbCAhPT0gdXNlci5lbWFpbCkge1xyXG4gICAgICAgIC8vIElmIHRoZSBsb2NhbCBjb3B5IG9mIHRoZSBlbWFpbCBvbiB1c2VyIGlzIG91dGRhdGVkLCByZWxvYWQgdGhlXHJcbiAgICAgICAgLy8gdXNlci5cclxuICAgICAgICBhd2FpdCB1c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUkMShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjEvYWNjb3VudHM6dXBkYXRlXCIgLyogRW5kcG9pbnQuU0VUX0FDQ09VTlRfSU5GTyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFVwZGF0ZXMgYSB1c2VyJ3MgcHJvZmlsZSBkYXRhLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvZmlsZSAtIFRoZSBwcm9maWxlJ3MgYGRpc3BsYXlOYW1lYCBhbmQgYHBob3RvVVJMYCB0byB1cGRhdGUuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVByb2ZpbGUodXNlciwgeyBkaXNwbGF5TmFtZSwgcGhvdG9VUkw6IHBob3RvVXJsIH0pIHtcclxuICAgIGlmIChkaXNwbGF5TmFtZSA9PT0gdW5kZWZpbmVkICYmIHBob3RvVXJsID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlckludGVybmFsLmdldElkVG9rZW4oKTtcclxuICAgIGNvbnN0IHByb2ZpbGVSZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgZGlzcGxheU5hbWUsXHJcbiAgICAgICAgcGhvdG9VcmwsXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXJJbnRlcm5hbCwgdXBkYXRlUHJvZmlsZSQxKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm9maWxlUmVxdWVzdCkpO1xyXG4gICAgdXNlckludGVybmFsLmRpc3BsYXlOYW1lID0gcmVzcG9uc2UuZGlzcGxheU5hbWUgfHwgbnVsbDtcclxuICAgIHVzZXJJbnRlcm5hbC5waG90b1VSTCA9IHJlc3BvbnNlLnBob3RvVXJsIHx8IG51bGw7XHJcbiAgICAvLyBVcGRhdGUgdGhlIHBhc3N3b3JkIHByb3ZpZGVyIGFzIHdlbGxcclxuICAgIGNvbnN0IHBhc3N3b3JkUHJvdmlkZXIgPSB1c2VySW50ZXJuYWwucHJvdmlkZXJEYXRhLmZpbmQoKHsgcHJvdmlkZXJJZCB9KSA9PiBwcm92aWRlcklkID09PSBcInBhc3N3b3JkXCIgLyogUHJvdmlkZXJJZC5QQVNTV09SRCAqLyk7XHJcbiAgICBpZiAocGFzc3dvcmRQcm92aWRlcikge1xyXG4gICAgICAgIHBhc3N3b3JkUHJvdmlkZXIuZGlzcGxheU5hbWUgPSB1c2VySW50ZXJuYWwuZGlzcGxheU5hbWU7XHJcbiAgICAgICAgcGFzc3dvcmRQcm92aWRlci5waG90b1VSTCA9IHVzZXJJbnRlcm5hbC5waG90b1VSTDtcclxuICAgIH1cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UpO1xyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgZW1haWwgYWRkcmVzcy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogQW4gZW1haWwgd2lsbCBiZSBzZW50IHRvIHRoZSBvcmlnaW5hbCBlbWFpbCBhZGRyZXNzIChpZiBpdCB3YXMgc2V0KSB0aGF0IGFsbG93cyB0byByZXZva2UgdGhlXHJcbiAqIGVtYWlsIGFkZHJlc3MgY2hhbmdlLCBpbiBvcmRlciB0byBwcm90ZWN0IHRoZW0gZnJvbSBhY2NvdW50IGhpamFja2luZy5cclxuICpcclxuICogSW1wb3J0YW50OiB0aGlzIGlzIGEgc2VjdXJpdHkgc2Vuc2l0aXZlIG9wZXJhdGlvbiB0aGF0IHJlcXVpcmVzIHRoZSB1c2VyIHRvIGhhdmUgcmVjZW50bHkgc2lnbmVkXHJcbiAqIGluLiBJZiB0aGlzIHJlcXVpcmVtZW50IGlzbid0IG1ldCwgYXNrIHRoZSB1c2VyIHRvIGF1dGhlbnRpY2F0ZSBhZ2FpbiBhbmQgdGhlbiBjYWxsXHJcbiAqIHtAbGluayByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsfS5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIG5ld0VtYWlsIC0gVGhlIG5ldyBlbWFpbCBhZGRyZXNzLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVFbWFpbCh1c2VyLCBuZXdFbWFpbCkge1xyXG4gICAgcmV0dXJuIHVwZGF0ZUVtYWlsT3JQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIG5ld0VtYWlsLCBudWxsKTtcclxufVxyXG4vKipcclxuICogVXBkYXRlcyB0aGUgdXNlcidzIHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eSBzZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseSBzaWduZWRcclxuICogaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gbmV3UGFzc3dvcmQgLSBUaGUgbmV3IHBhc3N3b3JkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiB1cGRhdGVQYXNzd29yZCh1c2VyLCBuZXdQYXNzd29yZCkge1xyXG4gICAgcmV0dXJuIHVwZGF0ZUVtYWlsT3JQYXNzd29yZChnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIG51bGwsIG5ld1Bhc3N3b3JkKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiB1cGRhdGVFbWFpbE9yUGFzc3dvcmQodXNlciwgZW1haWwsIHBhc3N3b3JkKSB7XHJcbiAgICBjb25zdCB7IGF1dGggfSA9IHVzZXI7XHJcbiAgICBjb25zdCBpZFRva2VuID0gYXdhaXQgdXNlci5nZXRJZFRva2VuKCk7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0ge1xyXG4gICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWVcclxuICAgIH07XHJcbiAgICBpZiAoZW1haWwpIHtcclxuICAgICAgICByZXF1ZXN0LmVtYWlsID0gZW1haWw7XHJcbiAgICB9XHJcbiAgICBpZiAocGFzc3dvcmQpIHtcclxuICAgICAgICByZXF1ZXN0LnBhc3N3b3JkID0gcGFzc3dvcmQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHVzZXIsIHVwZGF0ZUVtYWlsUGFzc3dvcmQoYXV0aCwgcmVxdWVzdCkpO1xyXG4gICAgYXdhaXQgdXNlci5fdXBkYXRlVG9rZW5zSWZOZWNlc3NhcnkocmVzcG9uc2UsIC8qIHJlbG9hZCAqLyB0cnVlKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUGFyc2UgdGhlIGBBZGRpdGlvbmFsVXNlckluZm9gIGZyb20gdGhlIElEIHRva2VuIHJlc3BvbnNlLlxyXG4gKlxyXG4gKi9cclxuZnVuY3Rpb24gX2Zyb21JZFRva2VuUmVzcG9uc2UoaWRUb2tlblJlc3BvbnNlKSB7XHJcbiAgICB2YXIgX2EsIF9iO1xyXG4gICAgaWYgKCFpZFRva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIGNvbnN0IHsgcHJvdmlkZXJJZCB9ID0gaWRUb2tlblJlc3BvbnNlO1xyXG4gICAgY29uc3QgcHJvZmlsZSA9IGlkVG9rZW5SZXNwb25zZS5yYXdVc2VySW5mb1xyXG4gICAgICAgID8gSlNPTi5wYXJzZShpZFRva2VuUmVzcG9uc2UucmF3VXNlckluZm8pXHJcbiAgICAgICAgOiB7fTtcclxuICAgIGNvbnN0IGlzTmV3VXNlciA9IGlkVG9rZW5SZXNwb25zZS5pc05ld1VzZXIgfHxcclxuICAgICAgICBpZFRva2VuUmVzcG9uc2Uua2luZCA9PT0gXCJpZGVudGl0eXRvb2xraXQjU2lnbnVwTmV3VXNlclJlc3BvbnNlXCIgLyogSWRUb2tlblJlc3BvbnNlS2luZC5TaWdudXBOZXdVc2VyICovO1xyXG4gICAgaWYgKCFwcm92aWRlcklkICYmIChpZFRva2VuUmVzcG9uc2UgPT09IG51bGwgfHwgaWRUb2tlblJlc3BvbnNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZFRva2VuUmVzcG9uc2UuaWRUb2tlbikpIHtcclxuICAgICAgICBjb25zdCBzaWduSW5Qcm92aWRlciA9IChfYiA9IChfYSA9IF9wYXJzZVRva2VuKGlkVG9rZW5SZXNwb25zZS5pZFRva2VuKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmZpcmViYXNlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbJ3NpZ25faW5fcHJvdmlkZXInXTtcclxuICAgICAgICBpZiAoc2lnbkluUHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgY29uc3QgZmlsdGVyZWRQcm92aWRlcklkID0gc2lnbkluUHJvdmlkZXIgIT09IFwiYW5vbnltb3VzXCIgLyogUHJvdmlkZXJJZC5BTk9OWU1PVVMgKi8gJiZcclxuICAgICAgICAgICAgICAgIHNpZ25JblByb3ZpZGVyICE9PSBcImN1c3RvbVwiIC8qIFByb3ZpZGVySWQuQ1VTVE9NICovXHJcbiAgICAgICAgICAgICAgICA/IHNpZ25JblByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICA6IG51bGw7XHJcbiAgICAgICAgICAgIC8vIFVzZXMgZ2VuZXJpYyBjbGFzcyBpbiBhY2NvcmRhbmNlIHdpdGggdGhlIGxlZ2FjeSBTREsuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIGZpbHRlcmVkUHJvdmlkZXJJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKCFwcm92aWRlcklkKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBzd2l0Y2ggKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBjYXNlIFwiZmFjZWJvb2suY29tXCIgLyogUHJvdmlkZXJJZC5GQUNFQk9PSyAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBGYWNlYm9va0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUpO1xyXG4gICAgICAgIGNhc2UgXCJnaXRodWIuY29tXCIgLyogUHJvdmlkZXJJZC5HSVRIVUIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2l0aHViQWRkaXRpb25hbFVzZXJJbmZvKGlzTmV3VXNlciwgcHJvZmlsZSk7XHJcbiAgICAgICAgY2FzZSBcImdvb2dsZS5jb21cIiAvKiBQcm92aWRlcklkLkdPT0dMRSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHb29nbGVBZGRpdGlvbmFsVXNlckluZm8oaXNOZXdVc2VyLCBwcm9maWxlKTtcclxuICAgICAgICBjYXNlIFwidHdpdHRlci5jb21cIiAvKiBQcm92aWRlcklkLlRXSVRURVIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb2ZpbGUsIGlkVG9rZW5SZXNwb25zZS5zY3JlZW5OYW1lIHx8IG51bGwpO1xyXG4gICAgICAgIGNhc2UgXCJjdXN0b21cIiAvKiBQcm92aWRlcklkLkNVU1RPTSAqLzpcclxuICAgICAgICBjYXNlIFwiYW5vbnltb3VzXCIgLyogUHJvdmlkZXJJZC5BTk9OWU1PVVMgKi86XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIG51bGwpO1xyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyhpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlID0ge30pIHtcclxuICAgICAgICB0aGlzLmlzTmV3VXNlciA9IGlzTmV3VXNlcjtcclxuICAgICAgICB0aGlzLnByb3ZpZGVySWQgPSBwcm92aWRlcklkO1xyXG4gICAgICAgIHRoaXMucHJvZmlsZSA9IHByb2ZpbGU7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRmVkZXJhdGVkQWRkaXRpb25hbFVzZXJJbmZvV2l0aFVzZXJuYW1lIGV4dGVuZHMgR2VuZXJpY0FkZGl0aW9uYWxVc2VySW5mbyB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb3ZpZGVySWQsIHByb2ZpbGUsIHVzZXJuYW1lKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBwcm92aWRlcklkLCBwcm9maWxlKTtcclxuICAgICAgICB0aGlzLnVzZXJuYW1lID0gdXNlcm5hbWU7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgRmFjZWJvb2tBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBHZW5lcmljQWRkaXRpb25hbFVzZXJJbmZvIHtcclxuICAgIGNvbnN0cnVjdG9yKGlzTmV3VXNlciwgcHJvZmlsZSkge1xyXG4gICAgICAgIHN1cGVyKGlzTmV3VXNlciwgXCJmYWNlYm9vay5jb21cIiAvKiBQcm92aWRlcklkLkZBQ0VCT09LICovLCBwcm9maWxlKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBHaXRodWJBZGRpdGlvbmFsVXNlckluZm8gZXh0ZW5kcyBGZWRlcmF0ZWRBZGRpdGlvbmFsVXNlckluZm9XaXRoVXNlcm5hbWUge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImdpdGh1Yi5jb21cIiAvKiBQcm92aWRlcklkLkdJVEhVQiAqLywgcHJvZmlsZSwgdHlwZW9mIChwcm9maWxlID09PSBudWxsIHx8IHByb2ZpbGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHByb2ZpbGUubG9naW4pID09PSAnc3RyaW5nJyA/IHByb2ZpbGUgPT09IG51bGwgfHwgcHJvZmlsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcHJvZmlsZS5sb2dpbiA6IG51bGwpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIEdvb2dsZUFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEdlbmVyaWNBZGRpdGlvbmFsVXNlckluZm8ge1xyXG4gICAgY29uc3RydWN0b3IoaXNOZXdVc2VyLCBwcm9maWxlKSB7XHJcbiAgICAgICAgc3VwZXIoaXNOZXdVc2VyLCBcImdvb2dsZS5jb21cIiAvKiBQcm92aWRlcklkLkdPT0dMRSAqLywgcHJvZmlsZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVHdpdHRlckFkZGl0aW9uYWxVc2VySW5mbyBleHRlbmRzIEZlZGVyYXRlZEFkZGl0aW9uYWxVc2VySW5mb1dpdGhVc2VybmFtZSB7XHJcbiAgICBjb25zdHJ1Y3Rvcihpc05ld1VzZXIsIHByb2ZpbGUsIHNjcmVlbk5hbWUpIHtcclxuICAgICAgICBzdXBlcihpc05ld1VzZXIsIFwidHdpdHRlci5jb21cIiAvKiBQcm92aWRlcklkLlRXSVRURVIgKi8sIHByb2ZpbGUsIHNjcmVlbk5hbWUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBFeHRyYWN0cyBwcm92aWRlciBzcGVjaWZpYyB7QGxpbmsgQWRkaXRpb25hbFVzZXJJbmZvfSBmb3IgdGhlIGdpdmVuIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyQ3JlZGVudGlhbCAtIFRoZSB1c2VyIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGdldEFkZGl0aW9uYWxVc2VySW5mbyh1c2VyQ3JlZGVudGlhbCkge1xyXG4gICAgY29uc3QgeyB1c2VyLCBfdG9rZW5SZXNwb25zZSB9ID0gdXNlckNyZWRlbnRpYWw7XHJcbiAgICBpZiAodXNlci5pc0Fub255bW91cyAmJiAhX3Rva2VuUmVzcG9uc2UpIHtcclxuICAgICAgICAvLyBIYW5kbGUgdGhlIHNwZWNpYWwgY2FzZSB3aGVyZSBzaWduSW5Bbm9ueW1vdXNseSgpIGdldHMgY2FsbGVkIHR3aWNlLlxyXG4gICAgICAgIC8vIE5vIG5ldHdvcmsgY2FsbCBpcyBtYWRlIHNvIHRoZXJlJ3Mgbm90aGluZyB0byBhY3R1YWxseSBmaWxsIHRoaXMgaW5cclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBwcm92aWRlcklkOiBudWxsLFxyXG4gICAgICAgICAgICBpc05ld1VzZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICBwcm9maWxlOiBudWxsXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIHJldHVybiBfZnJvbUlkVG9rZW5SZXNwb25zZShfdG9rZW5SZXNwb25zZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gTm9uLW9wdGlvbmFsIGF1dGggbWV0aG9kcy5cclxuLyoqXHJcbiAqIENoYW5nZXMgdGhlIHR5cGUgb2YgcGVyc2lzdGVuY2Ugb24gdGhlIHtAbGluayBBdXRofSBpbnN0YW5jZSBmb3IgdGhlIGN1cnJlbnRseSBzYXZlZFxyXG4gKiBgQXV0aGAgc2Vzc2lvbiBhbmQgYXBwbGllcyB0aGlzIHR5cGUgb2YgcGVyc2lzdGVuY2UgZm9yIGZ1dHVyZSBzaWduLWluIHJlcXVlc3RzLCBpbmNsdWRpbmdcclxuICogc2lnbi1pbiB3aXRoIHJlZGlyZWN0IHJlcXVlc3RzLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIG1ha2VzIGl0IGVhc3kgZm9yIGEgdXNlciBzaWduaW5nIGluIHRvIHNwZWNpZnkgd2hldGhlciB0aGVpciBzZXNzaW9uIHNob3VsZCBiZVxyXG4gKiByZW1lbWJlcmVkIG9yIG5vdC4gSXQgYWxzbyBtYWtlcyBpdCBlYXNpZXIgdG8gbmV2ZXIgcGVyc2lzdCB0aGUgYEF1dGhgIHN0YXRlIGZvciBhcHBsaWNhdGlvbnNcclxuICogdGhhdCBhcmUgc2hhcmVkIGJ5IG90aGVyIHVzZXJzIG9yIGhhdmUgc2Vuc2l0aXZlIGRhdGEuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogc2V0UGVyc2lzdGVuY2UoYXV0aCwgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwZXJzaXN0ZW5jZSAtIFRoZSB7QGxpbmsgUGVyc2lzdGVuY2V9IHRvIHVzZS5cclxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCByZXNvbHZlcyBvbmNlIHRoZSBwZXJzaXN0ZW5jZSBjaGFuZ2UgaGFzIGNvbXBsZXRlZFxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRQZXJzaXN0ZW5jZShhdXRoLCBwZXJzaXN0ZW5jZSkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5zZXRQZXJzaXN0ZW5jZShwZXJzaXN0ZW5jZSk7XHJcbn1cclxuLyoqXHJcbiAqIExvYWRzIHRoZSByZUNBUFRDSEEgY29uZmlndXJhdGlvbiBpbnRvIHRoZSBgQXV0aGAgaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgd2lsbCBsb2FkIHRoZSByZUNBUFRDSEEgY29uZmlnLCB3aGljaCBpbmRpY2F0ZXMgd2hldGhlciB0aGUgcmVDQVBUQ0hBXHJcbiAqIHZlcmlmaWNhdGlvbiBmbG93IHNob3VsZCBiZSB0cmlnZ2VyZWQgZm9yIGVhY2ggYXV0aCBwcm92aWRlciwgaW50byB0aGVcclxuICogY3VycmVudCBBdXRoIHNlc3Npb24uXHJcbiAqXHJcbiAqIElmIGluaXRpYWxpemVSZWNhcHRjaGFDb25maWcoKSBpcyBub3QgaW52b2tlZCwgdGhlIGF1dGggZmxvdyB3aWxsIGFsd2F5cyBzdGFydFxyXG4gKiB3aXRob3V0IHJlQ0FQVENIQSB2ZXJpZmljYXRpb24uIElmIHRoZSBwcm92aWRlciBpcyBjb25maWd1cmVkIHRvIHJlcXVpcmUgcmVDQVBUQ0hBXHJcbiAqIHZlcmlmaWNhdGlvbiwgdGhlIFNESyB3aWxsIHRyYW5zcGFyZW50bHkgbG9hZCB0aGUgcmVDQVBUQ0hBIGNvbmZpZyBhbmQgcmVzdGFydCB0aGVcclxuICogYXV0aCBmbG93cy5cclxuICpcclxuICogVGh1cywgYnkgY2FsbGluZyB0aGlzIG9wdGlvbmFsIG1ldGhvZCwgeW91IHdpbGwgcmVkdWNlIHRoZSBsYXRlbmN5IG9mIGZ1dHVyZSBhdXRoIGZsb3dzLlxyXG4gKiBMb2FkaW5nIHRoZSByZUNBUFRDSEEgY29uZmlnIGVhcmx5IHdpbGwgYWxzbyBlbmhhbmNlIHRoZSBzaWduYWwgY29sbGVjdGVkIGJ5IHJlQ0FQVENIQS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiBpbml0aWFsaXplUmVjYXB0Y2hhQ29uZmlnKGF1dGgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBpbml0aWFsaXplUmVjYXB0Y2hhQ29uZmlnKGF1dGgpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIHJldHVybiBhdXRoSW50ZXJuYWwuaW5pdGlhbGl6ZVJlY2FwdGNoYUNvbmZpZygpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSBzaWduZWQtaW4gdXNlcidzIElEIHRva2VuLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIGluY2x1ZGVzIHNpZ24taW4sIHNpZ24tb3V0LCBhbmQgdG9rZW4gcmVmcmVzaCBldmVudHMuXHJcbiAqIFRoaXMgd2lsbCBub3QgYmUgdHJpZ2dlcmVkIGF1dG9tYXRpY2FsbHkgdXBvbiBJRCB0b2tlbiBleHBpcmF0aW9uLiBVc2Uge0BsaW5rIFVzZXIuZ2V0SWRUb2tlbn0gdG8gcmVmcmVzaCB0aGUgSUQgdG9rZW4uXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIG5leHRPck9ic2VydmVyIC0gY2FsbGJhY2sgdHJpZ2dlcmVkIG9uIGNoYW5nZS5cclxuICogQHBhcmFtIGVycm9yIC0gRGVwcmVjYXRlZC4gVGhpcyBjYWxsYmFjayBpcyBuZXZlciB0cmlnZ2VyZWQuIEVycm9yc1xyXG4gKiBvbiBzaWduaW5nIGluL291dCBjYW4gYmUgY2F1Z2h0IGluIHByb21pc2VzIHJldHVybmVkIGZyb21cclxuICogc2lnbi1pbi9zaWduLW91dCBmdW5jdGlvbnMuXHJcbiAqIEBwYXJhbSBjb21wbGV0ZWQgLSBEZXByZWNhdGVkLiBUaGlzIGNhbGxiYWNrIGlzIG5ldmVyIHRyaWdnZXJlZC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gb25JZFRva2VuQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvciwgY29tcGxldGVkKTtcclxufVxyXG4vKipcclxuICogQWRkcyBhIGJsb2NraW5nIGNhbGxiYWNrIHRoYXQgcnVucyBiZWZvcmUgYW4gYXV0aCBzdGF0ZSBjaGFuZ2VcclxuICogc2V0cyBhIG5ldyB1c2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBjYWxsYmFjayAtIGNhbGxiYWNrIHRyaWdnZXJlZCBiZWZvcmUgbmV3IHVzZXIgdmFsdWUgaXMgc2V0LlxyXG4gKiAgIElmIHRoaXMgdGhyb3dzLCBpdCBibG9ja3MgdGhlIHVzZXIgZnJvbSBiZWluZyBzZXQuXHJcbiAqIEBwYXJhbSBvbkFib3J0IC0gY2FsbGJhY2sgdHJpZ2dlcmVkIGlmIGEgbGF0ZXIgYGJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQoKWBcclxuICogICBjYWxsYmFjayB0aHJvd3MsIGFsbG93aW5nIHlvdSB0byB1bmRvIGFueSBzaWRlIGVmZmVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBiZWZvcmVBdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIGNhbGxiYWNrLCBvbkFib3J0KSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLmJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQoY2FsbGJhY2ssIG9uQWJvcnQpO1xyXG59XHJcbi8qKlxyXG4gKiBBZGRzIGFuIG9ic2VydmVyIGZvciBjaGFuZ2VzIHRvIHRoZSB1c2VyJ3Mgc2lnbi1pbiBzdGF0ZS5cclxuICpcclxuICogQHJlbWFya3NcclxuICogVG8ga2VlcCB0aGUgb2xkIGJlaGF2aW9yLCBzZWUge0BsaW5rIG9uSWRUb2tlbkNoYW5nZWR9LlxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBuZXh0T3JPYnNlcnZlciAtIGNhbGxiYWNrIHRyaWdnZXJlZCBvbiBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlcnJvciAtIERlcHJlY2F0ZWQuIFRoaXMgY2FsbGJhY2sgaXMgbmV2ZXIgdHJpZ2dlcmVkLiBFcnJvcnNcclxuICogb24gc2lnbmluZyBpbi9vdXQgY2FuIGJlIGNhdWdodCBpbiBwcm9taXNlcyByZXR1cm5lZCBmcm9tXHJcbiAqIHNpZ24taW4vc2lnbi1vdXQgZnVuY3Rpb25zLlxyXG4gKiBAcGFyYW0gY29tcGxldGVkIC0gRGVwcmVjYXRlZC4gVGhpcyBjYWxsYmFjayBpcyBuZXZlciB0cmlnZ2VyZWQuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIG9uQXV0aFN0YXRlQ2hhbmdlZChhdXRoLCBuZXh0T3JPYnNlcnZlciwgZXJyb3IsIGNvbXBsZXRlZCkge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS5vbkF1dGhTdGF0ZUNoYW5nZWQobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZWQpO1xyXG59XHJcbi8qKlxyXG4gKiBTZXRzIHRoZSBjdXJyZW50IGxhbmd1YWdlIHRvIHRoZSBkZWZhdWx0IGRldmljZS9icm93c2VyIHByZWZlcmVuY2UuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXNlRGV2aWNlTGFuZ3VhZ2UoYXV0aCkge1xyXG4gICAgZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnVzZURldmljZUxhbmd1YWdlKCk7XHJcbn1cclxuLyoqXHJcbiAqIEFzeW5jaHJvbm91c2x5IHNldHMgdGhlIHByb3ZpZGVkIHVzZXIgYXMge0BsaW5rIEF1dGguY3VycmVudFVzZXJ9IG9uIHRoZVxyXG4gKiB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIEEgbmV3IGluc3RhbmNlIGNvcHkgb2YgdGhlIHVzZXIgcHJvdmlkZWQgd2lsbCBiZSBtYWRlIGFuZCBzZXQgYXMgY3VycmVudFVzZXIuXHJcbiAqXHJcbiAqIFRoaXMgd2lsbCB0cmlnZ2VyIHtAbGluayBvbkF1dGhTdGF0ZUNoYW5nZWR9IGFuZCB7QGxpbmsgb25JZFRva2VuQ2hhbmdlZH0gbGlzdGVuZXJzXHJcbiAqIGxpa2Ugb3RoZXIgc2lnbiBpbiBtZXRob2RzLlxyXG4gKlxyXG4gKiBUaGUgb3BlcmF0aW9uIGZhaWxzIHdpdGggYW4gZXJyb3IgaWYgdGhlIHVzZXIgdG8gYmUgdXBkYXRlZCBiZWxvbmdzIHRvIGEgZGlmZmVyZW50IEZpcmViYXNlXHJcbiAqIHByb2plY3QuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHVzZXIgLSBUaGUgbmV3IHtAbGluayBVc2VyfS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gdXBkYXRlQ3VycmVudFVzZXIoYXV0aCwgdXNlcikge1xyXG4gICAgcmV0dXJuIGdldE1vZHVsYXJJbnN0YW5jZShhdXRoKS51cGRhdGVDdXJyZW50VXNlcih1c2VyKTtcclxufVxyXG4vKipcclxuICogU2lnbnMgb3V0IHRoZSBjdXJyZW50IHVzZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbk91dChhdXRoKSB7XHJcbiAgICByZXR1cm4gZ2V0TW9kdWxhckluc3RhbmNlKGF1dGgpLnNpZ25PdXQoKTtcclxufVxyXG4vKipcclxuICogRGVsZXRlcyBhbmQgc2lnbnMgb3V0IHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJbXBvcnRhbnQ6IHRoaXMgaXMgYSBzZWN1cml0eS1zZW5zaXRpdmUgb3BlcmF0aW9uIHRoYXQgcmVxdWlyZXMgdGhlIHVzZXIgdG8gaGF2ZSByZWNlbnRseVxyXG4gKiBzaWduZWQgaW4uIElmIHRoaXMgcmVxdWlyZW1lbnQgaXNuJ3QgbWV0LCBhc2sgdGhlIHVzZXIgdG8gYXV0aGVudGljYXRlIGFnYWluIGFuZCB0aGVuIGNhbGxcclxuICoge0BsaW5rIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWx9LlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBkZWxldGVVc2VyKHVzZXIpIHtcclxuICAgIHJldHVybiBnZXRNb2R1bGFySW5zdGFuY2UodXNlcikuZGVsZXRlKCk7XHJcbn1cblxuY2xhc3MgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlLCBjcmVkZW50aWFsLCBhdXRoKSB7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21JZHRva2VuKGlkVG9rZW4sIGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwoXCJlbnJvbGxcIiAvKiBNdWx0aUZhY3RvclNlc3Npb25UeXBlLkVOUk9MTCAqLywgaWRUb2tlbiwgYXV0aCk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JTZXNzaW9uSW1wbChcInNpZ25pblwiIC8qIE11bHRpRmFjdG9yU2Vzc2lvblR5cGUuU0lHTl9JTiAqLywgbWZhUGVuZGluZ0NyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgdG9KU09OKCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IHRoaXMudHlwZSA9PT0gXCJlbnJvbGxcIiAvKiBNdWx0aUZhY3RvclNlc3Npb25UeXBlLkVOUk9MTCAqL1xyXG4gICAgICAgICAgICA/ICdpZFRva2VuJ1xyXG4gICAgICAgICAgICA6ICdwZW5kaW5nQ3JlZGVudGlhbCc7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgbXVsdGlGYWN0b3JTZXNzaW9uOiB7XHJcbiAgICAgICAgICAgICAgICBba2V5XTogdGhpcy5jcmVkZW50aWFsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21KU09OKG9iaikge1xyXG4gICAgICAgIHZhciBfYSwgX2I7XHJcbiAgICAgICAgaWYgKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5tdWx0aUZhY3RvclNlc3Npb24pIHtcclxuICAgICAgICAgICAgaWYgKChfYSA9IG9iai5tdWx0aUZhY3RvclNlc3Npb24pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChvYmoubXVsdGlGYWN0b3JTZXNzaW9uLnBlbmRpbmdDcmVkZW50aWFsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICgoX2IgPSBvYmoubXVsdGlGYWN0b3JTZXNzaW9uKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuaWRUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKG9iai5tdWx0aUZhY3RvclNlc3Npb24uaWRUb2tlbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlckltcGwge1xyXG4gICAgY29uc3RydWN0b3Ioc2Vzc2lvbiwgaGludHMsIHNpZ25JblJlc29sdmVyKSB7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uID0gc2Vzc2lvbjtcclxuICAgICAgICB0aGlzLmhpbnRzID0gaGludHM7XHJcbiAgICAgICAgdGhpcy5zaWduSW5SZXNvbHZlciA9IHNpZ25JblJlc29sdmVyO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgc3RhdGljIF9mcm9tRXJyb3IoYXV0aEV4dGVybiwgZXJyb3IpIHtcclxuICAgICAgICBjb25zdCBhdXRoID0gX2Nhc3RBdXRoKGF1dGhFeHRlcm4pO1xyXG4gICAgICAgIGNvbnN0IHNlcnZlclJlc3BvbnNlID0gZXJyb3IuY3VzdG9tRGF0YS5fc2VydmVyUmVzcG9uc2U7XHJcbiAgICAgICAgY29uc3QgaGludHMgPSAoc2VydmVyUmVzcG9uc2UubWZhSW5mbyB8fCBbXSkubWFwKGVucm9sbG1lbnQgPT4gTXVsdGlGYWN0b3JJbmZvSW1wbC5fZnJvbVNlcnZlclJlc3BvbnNlKGF1dGgsIGVucm9sbG1lbnQpKTtcclxuICAgICAgICBfYXNzZXJ0KHNlcnZlclJlc3BvbnNlLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21NZmFQZW5kaW5nQ3JlZGVudGlhbChzZXJ2ZXJSZXNwb25zZS5tZmFQZW5kaW5nQ3JlZGVudGlhbCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBNdWx0aUZhY3RvclJlc29sdmVySW1wbChzZXNzaW9uLCBoaW50cywgYXN5bmMgKGFzc2VydGlvbikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZmFSZXNwb25zZSA9IGF3YWl0IGFzc2VydGlvbi5fcHJvY2VzcyhhdXRoLCBzZXNzaW9uKTtcclxuICAgICAgICAgICAgLy8gQ2xlYXIgb3V0IHRoZSB1bm5lZWRlZCBmaWVsZHMgZnJvbSB0aGUgb2xkIGxvZ2luIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGRlbGV0ZSBzZXJ2ZXJSZXNwb25zZS5tZmFJbmZvO1xyXG4gICAgICAgICAgICBkZWxldGUgc2VydmVyUmVzcG9uc2UubWZhUGVuZGluZ0NyZWRlbnRpYWw7XHJcbiAgICAgICAgICAgIC8vIFVzZSBpbiB0aGUgbmV3IHRva2VuICYgcmVmcmVzaCB0b2tlbiBpbiB0aGUgb2xkIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IGlkVG9rZW5SZXNwb25zZSA9IE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgc2VydmVyUmVzcG9uc2UpLCB7IGlkVG9rZW46IG1mYVJlc3BvbnNlLmlkVG9rZW4sIHJlZnJlc2hUb2tlbjogbWZhUmVzcG9uc2UucmVmcmVzaFRva2VuIH0pO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB3ZSBzaG91bGQgY29sbGFwc2UgdGhpcyBzd2l0Y2ggc3RhdGVtZW50IGludG8gVXNlckNyZWRlbnRpYWxJbXBsLl9mb3JPcGVyYXRpb24gYW5kIGhhdmUgaXQgc3VwcG9ydCB0aGUgU0lHTl9JTiBjYXNlXHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3Iub3BlcmF0aW9uVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInNpZ25JblwiIC8qIE9wZXJhdGlvblR5cGUuU0lHTl9JTiAqLzpcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IFVzZXJDcmVkZW50aWFsSW1wbC5fZnJvbUlkVG9rZW5SZXNwb25zZShhdXRoLCBlcnJvci5vcGVyYXRpb25UeXBlLCBpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGF1dGguX3VwZGF0ZUN1cnJlbnRVc2VyKHVzZXJDcmVkZW50aWFsLnVzZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB1c2VyQ3JlZGVudGlhbDtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhlbnRpY2F0ZVwiIC8qIE9wZXJhdGlvblR5cGUuUkVBVVRIRU5USUNBVEUgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgX2Fzc2VydChlcnJvci51c2VyLCBhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFVzZXJDcmVkZW50aWFsSW1wbC5fZm9yT3BlcmF0aW9uKGVycm9yLnVzZXIsIGVycm9yLm9wZXJhdGlvblR5cGUsIGlkVG9rZW5SZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIF9mYWlsKGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcmVzb2x2ZVNpZ25Jbihhc3NlcnRpb25FeHRlcm4pIHtcclxuICAgICAgICBjb25zdCBhc3NlcnRpb24gPSBhc3NlcnRpb25FeHRlcm47XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2lnbkluUmVzb2x2ZXIoYXNzZXJ0aW9uKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogUHJvdmlkZXMgYSB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGNvbXBsZXRpb24gb2YgYVxyXG4gKiBtdWx0aS1mYWN0b3IgZmxvdy5cclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gZXJyb3IgLSBUaGUge0BsaW5rIE11bHRpRmFjdG9yRXJyb3J9IHJhaXNlZCBkdXJpbmcgYSBzaWduLWluLCBvclxyXG4gKiByZWF1dGhlbnRpY2F0aW9uIG9wZXJhdGlvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBlcnJvcikge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgY29uc3QgYXV0aE1vZHVsYXIgPSBnZXRNb2R1bGFySW5zdGFuY2UoYXV0aCk7XHJcbiAgICBjb25zdCBlcnJvckludGVybmFsID0gZXJyb3I7XHJcbiAgICBfYXNzZXJ0KGVycm9yLmN1c3RvbURhdGEub3BlcmF0aW9uVHlwZSwgYXV0aE1vZHVsYXIsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgIF9hc3NlcnQoKF9hID0gZXJyb3JJbnRlcm5hbC5jdXN0b21EYXRhLl9zZXJ2ZXJSZXNwb25zZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1mYVBlbmRpbmdDcmVkZW50aWFsLCBhdXRoTW9kdWxhciwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIE11bHRpRmFjdG9yUmVzb2x2ZXJJbXBsLl9mcm9tRXJyb3IoYXV0aE1vZHVsYXIsIGVycm9ySW50ZXJuYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHN0YXJ0RW5yb2xsUGhvbmVNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6c3RhcnRcIiAvKiBFbmRwb2ludC5TVEFSVF9NRkFfRU5ST0xMTUVOVCAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxyXG5mdW5jdGlvbiBmaW5hbGl6ZUVucm9sbFBob25lTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OmZpbmFsaXplXCIgLyogRW5kcG9pbnQuRklOQUxJWkVfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gc3RhcnRFbnJvbGxUb3RwTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OnN0YXJ0XCIgLyogRW5kcG9pbnQuU1RBUlRfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gZmluYWxpemVFbnJvbGxUb3RwTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFFbnJvbGxtZW50OmZpbmFsaXplXCIgLyogRW5kcG9pbnQuRklOQUxJWkVfTUZBX0VOUk9MTE1FTlQgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gd2l0aGRyYXdNZmEoYXV0aCwgcmVxdWVzdCkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIlBPU1RcIiAvKiBIdHRwTWV0aG9kLlBPU1QgKi8sIFwiL3YyL2FjY291bnRzL21mYUVucm9sbG1lbnQ6d2l0aGRyYXdcIiAvKiBFbmRwb2ludC5XSVRIRFJBV19NRkEgKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cblxuY2xhc3MgTXVsdGlGYWN0b3JVc2VySW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih1c2VyKSB7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmVucm9sbGVkRmFjdG9ycyA9IFtdO1xyXG4gICAgICAgIHVzZXIuX29uUmVsb2FkKHVzZXJJbmZvID0+IHtcclxuICAgICAgICAgICAgaWYgKHVzZXJJbmZvLm1mYUluZm8pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gdXNlckluZm8ubWZhSW5mby5tYXAoZW5yb2xsbWVudCA9PiBNdWx0aUZhY3RvckluZm9JbXBsLl9mcm9tU2VydmVyUmVzcG9uc2UodXNlci5hdXRoLCBlbnJvbGxtZW50KSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBfZnJvbVVzZXIodXNlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgTXVsdGlGYWN0b3JVc2VySW1wbCh1c2VyKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFNlc3Npb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIE11bHRpRmFjdG9yU2Vzc2lvbkltcGwuX2Zyb21JZHRva2VuKGF3YWl0IHRoaXMudXNlci5nZXRJZFRva2VuKCksIHRoaXMudXNlci5hdXRoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGVucm9sbChhc3NlcnRpb25FeHRlcm4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgY29uc3QgYXNzZXJ0aW9uID0gYXNzZXJ0aW9uRXh0ZXJuO1xyXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSAoYXdhaXQgdGhpcy5nZXRTZXNzaW9uKCkpO1xyXG4gICAgICAgIGNvbnN0IGZpbmFsaXplTWZhUmVzcG9uc2UgPSBhd2FpdCBfbG9nb3V0SWZJbnZhbGlkYXRlZCh0aGlzLnVzZXIsIGFzc2VydGlvbi5fcHJvY2Vzcyh0aGlzLnVzZXIuYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpKTtcclxuICAgICAgICAvLyBOZXcgdG9rZW5zIHdpbGwgYmUgaXNzdWVkIGFmdGVyIGVucm9sbG1lbnQgb2YgdGhlIG5ldyBzZWNvbmQgZmFjdG9ycy5cclxuICAgICAgICAvLyBUaGV5IG5lZWQgdG8gYmUgdXBkYXRlZCBvbiB0aGUgdXNlci5cclxuICAgICAgICBhd2FpdCB0aGlzLnVzZXIuX3VwZGF0ZVRva2Vuc0lmTmVjZXNzYXJ5KGZpbmFsaXplTWZhUmVzcG9uc2UpO1xyXG4gICAgICAgIC8vIFRoZSB1c2VyIG5lZWRzIHRvIGJlIHJlbG9hZGVkIHRvIGdldCB0aGUgbmV3IG11bHRpLWZhY3RvciBpbmZvcm1hdGlvblxyXG4gICAgICAgIC8vIGZyb20gc2VydmVyLiBVU0VSX1JFTE9BREVEIGV2ZW50IHdpbGwgYmUgdHJpZ2dlcmVkIGFuZCBgZW5yb2xsZWRGYWN0b3JzYFxyXG4gICAgICAgIC8vIHdpbGwgYmUgdXBkYXRlZC5cclxuICAgICAgICByZXR1cm4gdGhpcy51c2VyLnJlbG9hZCgpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgdW5lbnJvbGwoaW5mb09yVWlkKSB7XHJcbiAgICAgICAgY29uc3QgbWZhRW5yb2xsbWVudElkID0gdHlwZW9mIGluZm9PclVpZCA9PT0gJ3N0cmluZycgPyBpbmZvT3JVaWQgOiBpbmZvT3JVaWQudWlkO1xyXG4gICAgICAgIGNvbnN0IGlkVG9rZW4gPSBhd2FpdCB0aGlzLnVzZXIuZ2V0SWRUb2tlbigpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkVG9rZW5SZXNwb25zZSA9IGF3YWl0IF9sb2dvdXRJZkludmFsaWRhdGVkKHRoaXMudXNlciwgd2l0aGRyYXdNZmEodGhpcy51c2VyLmF1dGgsIHtcclxuICAgICAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgICAgICBtZmFFbnJvbGxtZW50SWRcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHNlY29uZCBmYWN0b3IgZnJvbSB0aGUgdXNlcidzIGxpc3QuXHJcbiAgICAgICAgICAgIHRoaXMuZW5yb2xsZWRGYWN0b3JzID0gdGhpcy5lbnJvbGxlZEZhY3RvcnMuZmlsdGVyKCh7IHVpZCB9KSA9PiB1aWQgIT09IG1mYUVucm9sbG1lbnRJZCk7XHJcbiAgICAgICAgICAgIC8vIERlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBiYWNrZW5kIGRlY2lkZWQgdG8gcmV2b2tlIHRoZSB1c2VyJ3Mgc2Vzc2lvbixcclxuICAgICAgICAgICAgLy8gdGhlIHRva2VuUmVzcG9uc2UgbWF5IGJlIGVtcHR5LiBJZiB0aGUgdG9rZW5zIHdlcmUgbm90IHVwZGF0ZWQgKGFuZCB0aGV5XHJcbiAgICAgICAgICAgIC8vIGFyZSBub3cgaW52YWxpZCksIHJlbG9hZGluZyB0aGUgdXNlciB3aWxsIGRpc2NvdmVyIHRoaXMgYW5kIGludmFsaWRhdGVcclxuICAgICAgICAgICAgLy8gdGhlIHVzZXIncyBzdGF0ZSBhY2NvcmRpbmdseS5cclxuICAgICAgICAgICAgYXdhaXQgdGhpcy51c2VyLl91cGRhdGVUb2tlbnNJZk5lY2Vzc2FyeShpZFRva2VuUmVzcG9uc2UpO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnVzZXIucmVsb2FkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbmNvbnN0IG11bHRpRmFjdG9yVXNlckNhY2hlID0gbmV3IFdlYWtNYXAoKTtcclxuLyoqXHJcbiAqIFRoZSB7QGxpbmsgTXVsdGlGYWN0b3JVc2VyfSBjb3JyZXNwb25kaW5nIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBUaGlzIGlzIHVzZWQgdG8gYWNjZXNzIGFsbCBtdWx0aS1mYWN0b3IgcHJvcGVydGllcyBhbmQgb3BlcmF0aW9ucyByZWxhdGVkIHRvIHRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBtdWx0aUZhY3Rvcih1c2VyKSB7XHJcbiAgICBjb25zdCB1c2VyTW9kdWxhciA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIGlmICghbXVsdGlGYWN0b3JVc2VyQ2FjaGUuaGFzKHVzZXJNb2R1bGFyKSkge1xyXG4gICAgICAgIG11bHRpRmFjdG9yVXNlckNhY2hlLnNldCh1c2VyTW9kdWxhciwgTXVsdGlGYWN0b3JVc2VySW1wbC5fZnJvbVVzZXIodXNlck1vZHVsYXIpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBtdWx0aUZhY3RvclVzZXJDYWNoZS5nZXQodXNlck1vZHVsYXIpO1xyXG59XG5cbmNvbnN0IFNUT1JBR0VfQVZBSUxBQkxFX0tFWSA9ICdfX3Nhayc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIFRoZXJlIGFyZSB0d28gZGlmZmVyZW50IGJyb3dzZXIgcGVyc2lzdGVuY2UgdHlwZXM6IGxvY2FsIGFuZCBzZXNzaW9uLlxyXG4vLyBCb3RoIGhhdmUgdGhlIHNhbWUgaW1wbGVtZW50YXRpb24gYnV0IHVzZSBhIGRpZmZlcmVudCB1bmRlcmx5aW5nIHN0b3JhZ2VcclxuLy8gb2JqZWN0LlxyXG5jbGFzcyBCcm93c2VyUGVyc2lzdGVuY2VDbGFzcyB7XHJcbiAgICBjb25zdHJ1Y3RvcihzdG9yYWdlUmV0cmlldmVyLCB0eXBlKSB7XHJcbiAgICAgICAgdGhpcy5zdG9yYWdlUmV0cmlldmVyID0gc3RvcmFnZVJldHJpZXZlcjtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgfVxyXG4gICAgX2lzQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5zdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShTVE9SQUdFX0FWQUlMQUJMRV9LRVksICcxJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfQVZBSUxBQkxFX0tFWSk7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICB0aGlzLnN0b3JhZ2Uuc2V0SXRlbShrZXksIEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCBqc29uID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGpzb24gPyBKU09OLnBhcnNlKGpzb24pIDogbnVsbCk7XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIHRoaXMuc3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7XHJcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHN0b3JhZ2UoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZVJldHJpZXZlcigpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9pZnJhbWVDYW5ub3RTeW5jV2ViU3RvcmFnZSgpIHtcclxuICAgIGNvbnN0IHVhID0gZ2V0VUEoKTtcclxuICAgIHJldHVybiBfaXNTYWZhcmkodWEpIHx8IF9pc0lPUyh1YSk7XHJcbn1cclxuLy8gVGhlIHBvbGxpbmcgcGVyaW9kIGluIGNhc2UgZXZlbnRzIGFyZSBub3Qgc3VwcG9ydGVkXHJcbmNvbnN0IF9QT0xMSU5HX0lOVEVSVkFMX01TJDEgPSAxMDAwO1xyXG4vLyBUaGUgSUUgMTAgbG9jYWxTdG9yYWdlIGNyb3NzIHRhYiBzeW5jaHJvbml6YXRpb24gZGVsYXkgaW4gbWlsbGlzZWNvbmRzXHJcbmNvbnN0IElFMTBfTE9DQUxfU1RPUkFHRV9TWU5DX0RFTEFZID0gMTA7XHJcbmNsYXNzIEJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlIGV4dGVuZHMgQnJvd3NlclBlcnNpc3RlbmNlQ2xhc3Mge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKCkgPT4gd2luZG93LmxvY2FsU3RvcmFnZSwgXCJMT0NBTFwiIC8qIFBlcnNpc3RlbmNlVHlwZS5MT0NBTCAqLyk7XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IChldmVudCwgcG9sbCkgPT4gdGhpcy5vblN0b3JhZ2VFdmVudChldmVudCwgcG9sbCk7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMgPSB7fTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGUgPSB7fTtcclxuICAgICAgICAvLyBzZXRUaW1lb3V0IHJldHVybiB2YWx1ZSBpcyBwbGF0Zm9ybSBzcGVjaWZpY1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgdGhpcy5wb2xsVGltZXIgPSBudWxsO1xyXG4gICAgICAgIC8vIFNhZmFyaSBvciBpT1MgYnJvd3NlciBhbmQgZW1iZWRkZWQgaW4gYW4gaWZyYW1lLlxyXG4gICAgICAgIHRoaXMuc2FmYXJpTG9jYWxTdG9yYWdlTm90U3luY2VkID0gX2lmcmFtZUNhbm5vdFN5bmNXZWJTdG9yYWdlKCkgJiYgX2lzSWZyYW1lKCk7XHJcbiAgICAgICAgLy8gV2hldGhlciB0byB1c2UgcG9sbGluZyBpbnN0ZWFkIG9mIGRlcGVuZGluZyBvbiB3aW5kb3cgZXZlbnRzXHJcbiAgICAgICAgdGhpcy5mYWxsYmFja1RvUG9sbGluZyA9IF9pc01vYmlsZUJyb3dzZXIoKTtcclxuICAgICAgICB0aGlzLl9zaG91bGRBbGxvd01pZ3JhdGlvbiA9IHRydWU7XHJcbiAgICB9XHJcbiAgICBmb3JBbGxDaGFuZ2VkS2V5cyhjYikge1xyXG4gICAgICAgIC8vIENoZWNrIGFsbCBrZXlzIHdpdGggbGlzdGVuZXJzIG9uIHRoZW0uXHJcbiAgICAgICAgZm9yIChjb25zdCBrZXkgb2YgT2JqZWN0LmtleXModGhpcy5saXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgIC8vIEdldCB2YWx1ZSBmcm9tIGxvY2FsU3RvcmFnZS5cclxuICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBjb25zdCBvbGRWYWx1ZSA9IHRoaXMubG9jYWxDYWNoZVtrZXldO1xyXG4gICAgICAgICAgICAvLyBJZiBsb2NhbCBtYXAgdmFsdWUgZG9lcyBub3QgbWF0Y2gsIHRyaWdnZXIgbGlzdGVuZXIgd2l0aCBzdG9yYWdlIGV2ZW50LlxyXG4gICAgICAgICAgICAvLyBEaWZmZXJlbnRpYXRlIHRoaXMgc2ltdWxhdGVkIGV2ZW50IGZyb20gdGhlIHJlYWwgc3RvcmFnZSBldmVudC5cclxuICAgICAgICAgICAgaWYgKG5ld1ZhbHVlICE9PSBvbGRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgY2Ioa2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25TdG9yYWdlRXZlbnQoZXZlbnQsIHBvbGwgPSBmYWxzZSkge1xyXG4gICAgICAgIC8vIEtleSB3b3VsZCBiZSBudWxsIGluIHNvbWUgc2l0dWF0aW9ucywgbGlrZSB3aGVuIGxvY2FsU3RvcmFnZSBpcyBjbGVhcmVkXHJcbiAgICAgICAgaWYgKCFldmVudC5rZXkpIHtcclxuICAgICAgICAgICAgdGhpcy5mb3JBbGxDaGFuZ2VkS2V5cygoa2V5LCBfb2xkVmFsdWUsIG5ld1ZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIG5ld1ZhbHVlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5ID0gZXZlbnQua2V5O1xyXG4gICAgICAgIC8vIENoZWNrIHRoZSBtZWNoYW5pc20gaG93IHRoaXMgZXZlbnQgd2FzIGRldGVjdGVkLlxyXG4gICAgICAgIC8vIFRoZSBmaXJzdCBldmVudCB3aWxsIGRpY3RhdGUgdGhlIG1lY2hhbmlzbSB0byBiZSB1c2VkLlxyXG4gICAgICAgIGlmIChwb2xsKSB7XHJcbiAgICAgICAgICAgIC8vIEVudmlyb25tZW50IGRldGVjdHMgc3RvcmFnZSBjaGFuZ2VzIHZpYSBwb2xsaW5nLlxyXG4gICAgICAgICAgICAvLyBSZW1vdmUgc3RvcmFnZSBldmVudCBsaXN0ZW5lciB0byBwcmV2ZW50IHBvc3NpYmxlIGV2ZW50IGR1cGxpY2F0aW9uLlxyXG4gICAgICAgICAgICB0aGlzLmRldGFjaExpc3RlbmVyKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBFbnZpcm9ubWVudCBkZXRlY3RzIHN0b3JhZ2UgY2hhbmdlcyB2aWEgc3RvcmFnZSBldmVudCBsaXN0ZW5lci5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIHBvbGxpbmcgbGlzdGVuZXIgdG8gcHJldmVudCBwb3NzaWJsZSBldmVudCBkdXBsaWNhdGlvbi5cclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTYWZhcmkgZW1iZWRkZWQgaWZyYW1lLiBTdG9yYWdlIGV2ZW50IHdpbGwgdHJpZ2dlciB3aXRoIHRoZSBkZWx0YVxyXG4gICAgICAgIC8vIGNoYW5nZXMgYnV0IG5vIGNoYW5nZXMgd2lsbCBiZSBhcHBsaWVkIHRvIHRoZSBpZnJhbWUgbG9jYWxTdG9yYWdlLlxyXG4gICAgICAgIGlmICh0aGlzLnNhZmFyaUxvY2FsU3RvcmFnZU5vdFN5bmNlZCkge1xyXG4gICAgICAgICAgICAvLyBHZXQgY3VycmVudCBpZnJhbWUgcGFnZSB2YWx1ZS5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICAvLyBWYWx1ZSBub3Qgc3luY2hyb25pemVkLCBzeW5jaHJvbml6ZSBtYW51YWxseS5cclxuICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBzdG9yZWRWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50Lm5ld1ZhbHVlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVmFsdWUgY2hhbmdlZCBmcm9tIGN1cnJlbnQgdmFsdWUuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0oa2V5LCBldmVudC5uZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBDdXJyZW50IHZhbHVlIGRlbGV0ZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0oa2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLmxvY2FsQ2FjaGVba2V5XSA9PT0gZXZlbnQubmV3VmFsdWUgJiYgIXBvbGwpIHtcclxuICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgZGV0ZWN0ZWQgYW5kIHByb2Nlc3NlZCwgZG8gbm90IHRyaWdnZXIgbGlzdGVuZXJzIGFnYWluLlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IHRyaWdnZXJMaXN0ZW5lcnMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEtlZXAgbG9jYWwgbWFwIHVwIHRvIGRhdGUgaW4gY2FzZSBzdG9yYWdlIGV2ZW50IGlzIHRyaWdnZXJlZCBiZWZvcmVcclxuICAgICAgICAgICAgLy8gcG9sbC5cclxuICAgICAgICAgICAgY29uc3Qgc3RvcmVkVmFsdWUgPSB0aGlzLnN0b3JhZ2UuZ2V0SXRlbShrZXkpO1xyXG4gICAgICAgICAgICBpZiAoIXBvbGwgJiYgdGhpcy5sb2NhbENhY2hlW2tleV0gPT09IHN0b3JlZFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZWFsIHN0b3JhZ2UgZXZlbnQgd2hpY2ggaGFzIGFscmVhZHkgYmVlbiBkZXRlY3RlZCwgZG8gbm90aGluZy5cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgc2VlbXMgdG8gdHJpZ2dlciBpbiBzb21lIElFIGJyb3dzZXJzIGZvciBzb21lIHJlYXNvbi5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIHN0b3JlZFZhbHVlKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICBpZiAoX2lzSUUxMCgpICYmXHJcbiAgICAgICAgICAgIHN0b3JlZFZhbHVlICE9PSBldmVudC5uZXdWYWx1ZSAmJlxyXG4gICAgICAgICAgICBldmVudC5uZXdWYWx1ZSAhPT0gZXZlbnQub2xkVmFsdWUpIHtcclxuICAgICAgICAgICAgLy8gSUUgMTAgaGFzIHRoaXMgd2VpcmQgYnVnIHdoZXJlIGEgc3RvcmFnZSBldmVudCB3b3VsZCB0cmlnZ2VyIHdpdGggdGhlXHJcbiAgICAgICAgICAgIC8vIGNvcnJlY3Qga2V5LCBvbGRWYWx1ZSBhbmQgbmV3VmFsdWUgYnV0IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGtleSkgZG9lc1xyXG4gICAgICAgICAgICAvLyBub3QgeWllbGQgdGhlIHVwZGF0ZWQgdmFsdWUgdW50aWwgYSBmZXcgbWlsbGlzZWNvbmRzLiBUaGlzIGVuc3VyZXNcclxuICAgICAgICAgICAgLy8gdGhpcyByZWNvdmVycyBmcm9tIHRoYXQgc2l0dWF0aW9uLlxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KHRyaWdnZXJMaXN0ZW5lcnMsIElFMTBfTE9DQUxfU1RPUkFHRV9TWU5DX0RFTEFZKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRyaWdnZXJMaXN0ZW5lcnMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBub3RpZnlMaXN0ZW5lcnMoa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdmFsdWU7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgQXJyYXkuZnJvbShsaXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcih2YWx1ZSA/IEpTT04ucGFyc2UodmFsdWUpIDogdmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRQb2xsaW5nKCkge1xyXG4gICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB0aGlzLnBvbGxUaW1lciA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5mb3JBbGxDaGFuZ2VkS2V5cygoa2V5LCBvbGRWYWx1ZSwgbmV3VmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TdG9yYWdlRXZlbnQobmV3IFN0b3JhZ2VFdmVudCgnc3RvcmFnZScsIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXksXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmV3VmFsdWVcclxuICAgICAgICAgICAgICAgIH0pLCBcclxuICAgICAgICAgICAgICAgIC8qIHBvbGwgKi8gdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sIF9QT0xMSU5HX0lOVEVSVkFMX01TJDEpO1xyXG4gICAgfVxyXG4gICAgc3RvcFBvbGxpbmcoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucG9sbFRpbWVyKSB7XHJcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5wb2xsVGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnBvbGxUaW1lciA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXR0YWNoTGlzdGVuZXIoKSB7XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3N0b3JhZ2UnLCB0aGlzLmJvdW5kRXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIGRldGFjaExpc3RlbmVyKCkge1xyXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzdG9yYWdlJywgdGhpcy5ib3VuZEV2ZW50SGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgYnJvd3NlciBjYW4gZGV0ZWN0IHN0b3JhZ2UgZXZlbnQgd2hlbiBpdCBoYWQgYWxyZWFkeSBiZWVuIHB1c2hlZCB0byB0aGUgYmFja2dyb3VuZC5cclxuICAgICAgICAgICAgLy8gVGhpcyBtYXkgaGFwcGVuIGluIHNvbWUgbW9iaWxlIGJyb3dzZXJzLiBBIGxvY2FsU3RvcmFnZSBjaGFuZ2UgaW4gdGhlIGZvcmVncm91bmQgd2luZG93XHJcbiAgICAgICAgICAgIC8vIHdpbGwgbm90IGJlIGRldGVjdGVkIGluIHRoZSBiYWNrZ3JvdW5kIHdpbmRvdyB2aWEgdGhlIHN0b3JhZ2UgZXZlbnQuXHJcbiAgICAgICAgICAgIC8vIFRoaXMgd2FzIGRldGVjdGVkIGluIGlPUyA3LnggbW9iaWxlIGJyb3dzZXJzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmZhbGxiYWNrVG9Qb2xsaW5nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0YXJ0UG9sbGluZygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdHRhY2hMaXN0ZW5lcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgY2FjaGUgdG8gYXZvaWQgc3B1cmlvdXNseSB0cmlnZ2VyaW5nIG9uIGZpcnN0IHBvbGwuXHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oa2V5KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5hZGQobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoTGlzdGVuZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFVwZGF0ZSBsb2NhbCBjYWNoZSBvbiBiYXNlIG9wZXJhdGlvbnM6XHJcbiAgICBhc3luYyBfc2V0KGtleSwgdmFsdWUpIHtcclxuICAgICAgICBhd2FpdCBzdXBlci5fc2V0KGtleSwgdmFsdWUpO1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gSlNPTi5zdHJpbmdpZnkodmFsdWUpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHN1cGVyLl9nZXQoa2V5KTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfcmVtb3ZlKGtleSkge1xyXG4gICAgICAgIGF3YWl0IHN1cGVyLl9yZW1vdmUoa2V5KTtcclxuICAgICAgICBkZWxldGUgdGhpcy5sb2NhbENhY2hlW2tleV07XHJcbiAgICB9XHJcbn1cclxuQnJvd3NlckxvY2FsUGVyc2lzdGVuY2UudHlwZSA9ICdMT0NBTCc7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIHR5cGUgYExPQ0FMYCB1c2luZyBgbG9jYWxTdG9yYWdlYFxyXG4gKiBmb3IgdGhlIHVuZGVybHlpbmcgc3RvcmFnZS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UgPSBCcm93c2VyTG9jYWxQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSBleHRlbmRzIEJyb3dzZXJQZXJzaXN0ZW5jZUNsYXNzIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCgpID0+IHdpbmRvdy5zZXNzaW9uU3RvcmFnZSwgXCJTRVNTSU9OXCIgLyogUGVyc2lzdGVuY2VUeXBlLlNFU1NJT04gKi8pO1xyXG4gICAgfVxyXG4gICAgX2FkZExpc3RlbmVyKF9rZXksIF9saXN0ZW5lcikge1xyXG4gICAgICAgIC8vIExpc3RlbmVycyBhcmUgbm90IHN1cHBvcnRlZCBmb3Igc2Vzc2lvbiBzdG9yYWdlIHNpbmNlIGl0IGNhbm5vdCBiZSBzaGFyZWQgYWNyb3NzIHdpbmRvd3NcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBfcmVtb3ZlTGlzdGVuZXIoX2tleSwgX2xpc3RlbmVyKSB7XHJcbiAgICAgICAgLy8gTGlzdGVuZXJzIGFyZSBub3Qgc3VwcG9ydGVkIGZvciBzZXNzaW9uIHN0b3JhZ2Ugc2luY2UgaXQgY2Fubm90IGJlIHNoYXJlZCBhY3Jvc3Mgd2luZG93c1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxufVxyXG5Ccm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLnR5cGUgPSAnU0VTU0lPTic7XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUGVyc2lzdGVuY2V9IG9mIGBTRVNTSU9OYCB1c2luZyBgc2Vzc2lvblN0b3JhZ2VgXHJcbiAqIGZvciB0aGUgdW5kZXJseWluZyBzdG9yYWdlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlID0gQnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFNoaW0gZm9yIFByb21pc2UuYWxsU2V0dGxlZCwgbm90ZSB0aGUgc2xpZ2h0bHkgZGlmZmVyZW50IGZvcm1hdCBvZiBgZnVsZmlsbGVkYCB2cyBgc3RhdHVzYC5cclxuICpcclxuICogQHBhcmFtIHByb21pc2VzIC0gQXJyYXkgb2YgcHJvbWlzZXMgdG8gd2FpdCBvbi5cclxuICovXHJcbmZ1bmN0aW9uIF9hbGxTZXR0bGVkKHByb21pc2VzKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMubWFwKGFzeW5jIChwcm9taXNlKSA9PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBhd2FpdCBwcm9taXNlO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZnVsZmlsbGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgdmFsdWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKHJlYXNvbikge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgZnVsZmlsbGVkOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHJlYXNvblxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH0pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIGNsYXNzIGZvciByZWNlaXZpbmcgbWVzc2FnZXMuXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBSZWNlaXZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihldmVudFRhcmdldCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRUYXJnZXQgPSBldmVudFRhcmdldDtcclxuICAgICAgICB0aGlzLmhhbmRsZXJzTWFwID0ge307XHJcbiAgICAgICAgdGhpcy5ib3VuZEV2ZW50SGFuZGxlciA9IHRoaXMuaGFuZGxlRXZlbnQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT2J0YWluIGFuIGluc3RhbmNlIG9mIGEgUmVjZWl2ZXIgZm9yIGEgZ2l2ZW4gZXZlbnQgdGFyZ2V0LCBpZiBub25lIGV4aXN0cyBpdCB3aWxsIGJlIGNyZWF0ZWQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGV2ZW50VGFyZ2V0IC0gQW4gZXZlbnQgdGFyZ2V0IChzdWNoIGFzIHdpbmRvdyBvciBzZWxmKSB0aHJvdWdoIHdoaWNoIHRoZSB1bmRlcmx5aW5nXHJcbiAgICAgKiBtZXNzYWdlcyB3aWxsIGJlIHJlY2VpdmVkLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX2dldEluc3RhbmNlKGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgLy8gVGhlIHJlc3VsdHMgYXJlIHN0b3JlZCBpbiBhbiBhcnJheSBzaW5jZSBvYmplY3RzIGNhbid0IGJlIGtleXMgZm9yIG90aGVyXHJcbiAgICAgICAgLy8gb2JqZWN0cy4gSW4gYWRkaXRpb24sIHNldHRpbmcgYSB1bmlxdWUgcHJvcGVydHkgb24gYW4gZXZlbnQgdGFyZ2V0IGFzIGFcclxuICAgICAgICAvLyBoYXNoIG1hcCBrZXkgbWF5IG5vdCBiZSBhbGxvd2VkIGR1ZSB0byBDT1JTIHJlc3RyaWN0aW9ucy5cclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5yZWNlaXZlcnMuZmluZChyZWNlaXZlciA9PiByZWNlaXZlci5pc0xpc3RlbmluZ3RvKGV2ZW50VGFyZ2V0KSk7XHJcbiAgICAgICAgaWYgKGV4aXN0aW5nSW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGV4aXN0aW5nSW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IG5ld0luc3RhbmNlID0gbmV3IFJlY2VpdmVyKGV2ZW50VGFyZ2V0KTtcclxuICAgICAgICB0aGlzLnJlY2VpdmVycy5wdXNoKG5ld0luc3RhbmNlKTtcclxuICAgICAgICByZXR1cm4gbmV3SW5zdGFuY2U7XHJcbiAgICB9XHJcbiAgICBpc0xpc3RlbmluZ3RvKGV2ZW50VGFyZ2V0KSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZXZlbnRUYXJnZXQgPT09IGV2ZW50VGFyZ2V0O1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBGYW5zIG91dCBhIE1lc3NhZ2VFdmVudCB0byB0aGUgYXBwcm9wcmlhdGUgbGlzdGVuZXJzLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBTZW5kcyBhbiB7QGxpbmsgU3RhdHVzLkFDS30gdXBvbiByZWNlaXB0IGFuZCBhIHtAbGluayBTdGF0dXMuRE9ORX0gb25jZSBhbGwgaGFuZGxlcnMgaGF2ZVxyXG4gICAgICogZmluaXNoZWQgcHJvY2Vzc2luZy5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgTWVzc2FnZUV2ZW50LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgYXN5bmMgaGFuZGxlRXZlbnQoZXZlbnQpIHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlRXZlbnQgPSBldmVudDtcclxuICAgICAgICBjb25zdCB7IGV2ZW50SWQsIGV2ZW50VHlwZSwgZGF0YSB9ID0gbWVzc2FnZUV2ZW50LmRhdGE7XHJcbiAgICAgICAgY29uc3QgaGFuZGxlcnMgPSB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV07XHJcbiAgICAgICAgaWYgKCEoaGFuZGxlcnMgPT09IG51bGwgfHwgaGFuZGxlcnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGhhbmRsZXJzLnNpemUpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgbWVzc2FnZUV2ZW50LnBvcnRzWzBdLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcImFja1wiIC8qIF9TdGF0dXMuQUNLICovLFxyXG4gICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICBldmVudFR5cGVcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBwcm9taXNlcyA9IEFycmF5LmZyb20oaGFuZGxlcnMpLm1hcChhc3luYyAoaGFuZGxlcikgPT4gaGFuZGxlcihtZXNzYWdlRXZlbnQub3JpZ2luLCBkYXRhKSk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBfYWxsU2V0dGxlZChwcm9taXNlcyk7XHJcbiAgICAgICAgbWVzc2FnZUV2ZW50LnBvcnRzWzBdLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgc3RhdHVzOiBcImRvbmVcIiAvKiBfU3RhdHVzLkRPTkUgKi8sXHJcbiAgICAgICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGV2ZW50VHlwZSxcclxuICAgICAgICAgICAgcmVzcG9uc2VcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU3Vic2NyaWJlIGFuIGV2ZW50IGhhbmRsZXIgZm9yIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byBzdWJzY3JpYmUgdG8uXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRIYW5kbGVyIC0gVGhlIGV2ZW50IGhhbmRsZXIgd2hpY2ggc2hvdWxkIHJlY2VpdmUgdGhlIGV2ZW50cy5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIF9zdWJzY3JpYmUoZXZlbnRUeXBlLCBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSkge1xyXG4gICAgICAgICAgICB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0gPSBuZXcgU2V0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXS5hZGQoZXZlbnRIYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgYW4gZXZlbnQgaGFuZGxlciBmcm9tIGEgcGFydGljdWxhciBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gRXZlbnQgbmFtZSB0byB1bnN1YnNjcmliZSBmcm9tLlxyXG4gICAgICogQHBhcmFtIGV2ZW50SGFuZGxlciAtIE9wdGlub2FsIGV2ZW50IGhhbmRsZXIsIGlmIG5vbmUgcHJvdmlkZWQsIHVuc3Vic2NyaWJlIGFsbCBoYW5kbGVycyBvbiB0aGlzIGV2ZW50LlxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgX3Vuc3Vic2NyaWJlKGV2ZW50VHlwZSwgZXZlbnRIYW5kbGVyKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuaGFuZGxlcnNNYXBbZXZlbnRUeXBlXSAmJiBldmVudEhhbmRsZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdLmRlbGV0ZShldmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIWV2ZW50SGFuZGxlciB8fCB0aGlzLmhhbmRsZXJzTWFwW2V2ZW50VHlwZV0uc2l6ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5oYW5kbGVyc01hcFtldmVudFR5cGVdO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoT2JqZWN0LmtleXModGhpcy5oYW5kbGVyc01hcCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMuYm91bmRFdmVudEhhbmRsZXIpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5SZWNlaXZlci5yZWNlaXZlcnMgPSBbXTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2dlbmVyYXRlRXZlbnRJZChwcmVmaXggPSAnJywgZGlnaXRzID0gMTApIHtcclxuICAgIGxldCByYW5kb20gPSAnJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZGlnaXRzOyBpKyspIHtcclxuICAgICAgICByYW5kb20gKz0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByZWZpeCArIHJhbmRvbTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSW50ZXJmYWNlIGZvciBzZW5kaW5nIG1lc3NhZ2VzIGFuZCB3YWl0aW5nIGZvciBhIGNvbXBsZXRpb24gcmVzcG9uc2UuXHJcbiAqXHJcbiAqL1xyXG5jbGFzcyBTZW5kZXIge1xyXG4gICAgY29uc3RydWN0b3IodGFyZ2V0KSB7XHJcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XHJcbiAgICAgICAgdGhpcy5oYW5kbGVycyA9IG5ldyBTZXQoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVW5zdWJzY3JpYmUgdGhlIGhhbmRsZXIgYW5kIHJlbW92ZSBpdCBmcm9tIG91ciB0cmFja2luZyBTZXQuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGhhbmRsZXIgLSBUaGUgaGFuZGxlciB0byB1bnN1YnNjcmliZS5cclxuICAgICAqL1xyXG4gICAgcmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcikge1xyXG4gICAgICAgIGlmIChoYW5kbGVyLm1lc3NhZ2VDaGFubmVsKSB7XHJcbiAgICAgICAgICAgIGhhbmRsZXIubWVzc2FnZUNoYW5uZWwucG9ydDEucmVtb3ZlRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGhhbmRsZXIub25NZXNzYWdlKTtcclxuICAgICAgICAgICAgaGFuZGxlci5tZXNzYWdlQ2hhbm5lbC5wb3J0MS5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhbmRsZXJzLmRlbGV0ZShoYW5kbGVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogU2VuZCBhIG1lc3NhZ2UgdG8gdGhlIFJlY2VpdmVyIGxvY2F0ZWQgYXQge0BsaW5rIHRhcmdldH0uXHJcbiAgICAgKlxyXG4gICAgICogQHJlbWFya3NcclxuICAgICAqIFdlJ2xsIGZpcnN0IHdhaXQgYSBiaXQgZm9yIGFuIEFDSyAsIGlmIHdlIGdldCBvbmUgd2Ugd2lsbCB3YWl0IHNpZ25pZmljYW50bHkgbG9uZ2VyIHVudGlsIHRoZVxyXG4gICAgICogcmVjZWl2ZXIgaGFzIGhhZCBhIGNoYW5jZSB0byBmdWxseSBwcm9jZXNzIHRoZSBldmVudC5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gZXZlbnRUeXBlIC0gVHlwZSBvZiBldmVudCB0byBzZW5kLlxyXG4gICAgICogQHBhcmFtIGRhdGEgLSBUaGUgcGF5bG9hZCBvZiB0aGUgZXZlbnQuXHJcbiAgICAgKiBAcGFyYW0gdGltZW91dCAtIFRpbWVvdXQgZm9yIHdhaXRpbmcgb24gYW4gQUNLIGZyb20gdGhlIHJlY2VpdmVyLlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEFuIGFycmF5IG9mIHNldHRsZWQgcHJvbWlzZXMgZnJvbSBhbGwgdGhlIGhhbmRsZXJzIHRoYXQgd2VyZSBsaXN0ZW5pbmcgb24gdGhlIHJlY2VpdmVyLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBfc2VuZChldmVudFR5cGUsIGRhdGEsIHRpbWVvdXQgPSA1MCAvKiBfVGltZW91dER1cmF0aW9uLkFDSyAqLykge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VDaGFubmVsID0gdHlwZW9mIE1lc3NhZ2VDaGFubmVsICE9PSAndW5kZWZpbmVkJyA/IG5ldyBNZXNzYWdlQ2hhbm5lbCgpIDogbnVsbDtcclxuICAgICAgICBpZiAoIW1lc3NhZ2VDaGFubmVsKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcImNvbm5lY3Rpb25fdW5hdmFpbGFibGVcIiAvKiBfTWVzc2FnZUVycm9yLkNPTk5FQ1RJT05fVU5BVkFJTEFCTEUgKi8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBOb2RlIHRpbWVycyBhbmQgYnJvd3NlciB0aW1lcnMgcmV0dXJuIGZ1bmRhbWVudGFsbHkgZGlmZmVyZW50IHR5cGVzLlxyXG4gICAgICAgIC8vIFdlIGRvbid0IGFjdHVhbGx5IGNhcmUgd2hhdCB0aGUgdmFsdWUgaXMgYnV0IFRTIHdvbid0IGFjY2VwdCB1bmtub3duIGFuZFxyXG4gICAgICAgIC8vIHdlIGNhbid0IGNhc3QgcHJvcGVybHkgaW4gYm90aCBlbnZpcm9ubWVudHMuXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBsZXQgY29tcGxldGlvblRpbWVyO1xyXG4gICAgICAgIGxldCBoYW5kbGVyO1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV2ZW50SWQgPSBfZ2VuZXJhdGVFdmVudElkKCcnLCAyMCk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VDaGFubmVsLnBvcnQxLnN0YXJ0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGFja1RpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKFwidW5zdXBwb3J0ZWRfZXZlbnRcIiAvKiBfTWVzc2FnZUVycm9yLlVOU1VQUE9SVEVEX0VWRU5UICovKSk7XHJcbiAgICAgICAgICAgIH0sIHRpbWVvdXQpO1xyXG4gICAgICAgICAgICBoYW5kbGVyID0ge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUNoYW5uZWwsXHJcbiAgICAgICAgICAgICAgICBvbk1lc3NhZ2UoZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRXZlbnQgPSBldmVudDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobWVzc2FnZUV2ZW50LmRhdGEuZXZlbnRJZCAhPT0gZXZlbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAobWVzc2FnZUV2ZW50LmRhdGEuc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhY2tcIiAvKiBfU3RhdHVzLkFDSyAqLzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoZSByZWNlaXZlciBzaG91bGQgQUNLIGZpcnN0LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGFja1RpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBsZXRpb25UaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJ0aW1lb3V0XCIgLyogX01lc3NhZ2VFcnJvci5USU1FT1VUICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAzMDAwIC8qIF9UaW1lb3V0RHVyYXRpb24uQ09NUExFVElPTiAqLyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImRvbmVcIiAvKiBfU3RhdHVzLkRPTkUgKi86XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmNlIHRoZSByZWNlaXZlcidzIGhhbmRsZXJzIGFyZSBmaW5pc2hlZCB3ZSB3aWxsIGdldCB0aGUgcmVzdWx0cy5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChjb21wbGV0aW9uVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShtZXNzYWdlRXZlbnQuZGF0YS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChhY2tUaW1lcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoY29tcGxldGlvblRpbWVyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoXCJpbnZhbGlkX3Jlc3BvbnNlXCIgLyogX01lc3NhZ2VFcnJvci5JTlZBTElEX1JFU1BPTlNFICovKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlcnMuYWRkKGhhbmRsZXIpO1xyXG4gICAgICAgICAgICBtZXNzYWdlQ2hhbm5lbC5wb3J0MS5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgaGFuZGxlci5vbk1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB0aGlzLnRhcmdldC5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICBldmVudFR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkLFxyXG4gICAgICAgICAgICAgICAgZGF0YVxyXG4gICAgICAgICAgICB9LCBbbWVzc2FnZUNoYW5uZWwucG9ydDJdKTtcclxuICAgICAgICB9KS5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgaWYgKGhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTWVzc2FnZUhhbmRsZXIoaGFuZGxlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogTGF6eSBhY2Nlc3NvciBmb3Igd2luZG93LCBzaW5jZSB0aGUgY29tcGF0IGxheWVyIHdvbid0IHRyZWUgc2hha2UgdGhpcyBvdXQsXHJcbiAqIHdlIG5lZWQgdG8gbWFrZSBzdXJlIG5vdCB0byBtZXNzIHdpdGggd2luZG93IHVubGVzcyB3ZSBoYXZlIHRvXHJcbiAqL1xyXG5mdW5jdGlvbiBfd2luZG93KCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdztcclxufVxyXG5mdW5jdGlvbiBfc2V0V2luZG93TG9jYXRpb24odXJsKSB7XHJcbiAgICBfd2luZG93KCkubG9jYXRpb24uaHJlZiA9IHVybDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzV29ya2VyKCkge1xyXG4gICAgcmV0dXJuICh0eXBlb2YgX3dpbmRvdygpWydXb3JrZXJHbG9iYWxTY29wZSddICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgIHR5cGVvZiBfd2luZG93KClbJ2ltcG9ydFNjcmlwdHMnXSA9PT0gJ2Z1bmN0aW9uJyk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFjdGl2ZVNlcnZpY2VXb3JrZXIoKSB7XHJcbiAgICBpZiAoIShuYXZpZ2F0b3IgPT09IG51bGwgfHwgbmF2aWdhdG9yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlcikpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcmVnaXN0cmF0aW9uID0gYXdhaXQgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVhZHk7XHJcbiAgICAgICAgcmV0dXJuIHJlZ2lzdHJhdGlvbi5hY3RpdmU7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfZ2V0U2VydmljZVdvcmtlckNvbnRyb2xsZXIoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKChfYSA9IG5hdmlnYXRvciA9PT0gbnVsbCB8fCBuYXZpZ2F0b3IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG5hdmlnYXRvci5zZXJ2aWNlV29ya2VyKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuY29udHJvbGxlcikgfHwgbnVsbDtcclxufVxyXG5mdW5jdGlvbiBfZ2V0V29ya2VyR2xvYmFsU2NvcGUoKSB7XHJcbiAgICByZXR1cm4gX2lzV29ya2VyKCkgPyBzZWxmIDogbnVsbDtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBEQl9OQU1FID0gJ2ZpcmViYXNlTG9jYWxTdG9yYWdlRGInO1xyXG5jb25zdCBEQl9WRVJTSU9OID0gMTtcclxuY29uc3QgREJfT0JKRUNUU1RPUkVfTkFNRSA9ICdmaXJlYmFzZUxvY2FsU3RvcmFnZSc7XHJcbmNvbnN0IERCX0RBVEFfS0VZUEFUSCA9ICdmYmFzZV9rZXknO1xyXG4vKipcclxuICogUHJvbWlzZSB3cmFwcGVyIGZvciBJREJSZXF1ZXN0XHJcbiAqXHJcbiAqIFVuZm9ydHVuYXRlbHkgd2UgY2FuJ3QgY2xlYW5seSBleHRlbmQgUHJvbWlzZTxUPiBzaW5jZSBwcm9taXNlcyBhcmUgbm90IGNhbGxhYmxlIGluIEVTNlxyXG4gKlxyXG4gKi9cclxuY2xhc3MgREJQcm9taXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKHJlcXVlc3QpIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xyXG4gICAgfVxyXG4gICAgdG9Qcm9taXNlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlcXVlc3QucmVzdWx0KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdCh0aGlzLnJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRPYmplY3RTdG9yZShkYiwgaXNSZWFkV3JpdGUpIHtcclxuICAgIHJldHVybiBkYlxyXG4gICAgICAgIC50cmFuc2FjdGlvbihbREJfT0JKRUNUU1RPUkVfTkFNRV0sIGlzUmVhZFdyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKVxyXG4gICAgICAgIC5vYmplY3RTdG9yZShEQl9PQkpFQ1RTVE9SRV9OQU1FKTtcclxufVxyXG5mdW5jdGlvbiBfZGVsZXRlRGF0YWJhc2UoKSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLmRlbGV0ZURhdGFiYXNlKERCX05BTUUpO1xyXG4gICAgcmV0dXJuIG5ldyBEQlByb21pc2UocmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbn1cclxuZnVuY3Rpb24gX29wZW5EYXRhYmFzZSgpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIub3BlbihEQl9OQU1FLCBEQl9WRVJTSU9OKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsICgpID0+IHtcclxuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgZGIgPSByZXF1ZXN0LnJlc3VsdDtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKERCX09CSkVDVFNUT1JFX05BTUUsIHsga2V5UGF0aDogREJfREFUQV9LRVlQQVRIIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWplY3QoZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICByZXF1ZXN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRiID0gcmVxdWVzdC5yZXN1bHQ7XHJcbiAgICAgICAgICAgIC8vIFN0cmFuZ2UgYnVnIHRoYXQgb2NjdXJzIGluIEZpcmVmb3ggd2hlbiBtdWx0aXBsZSB0YWJzIGFyZSBvcGVuZWQgYXQgdGhlXHJcbiAgICAgICAgICAgIC8vIHNhbWUgdGltZS4gVGhlIG9ubHkgd2F5IHRvIHJlY292ZXIgc2VlbXMgdG8gYmUgZGVsZXRpbmcgdGhlIGRhdGFiYXNlXHJcbiAgICAgICAgICAgIC8vIGFuZCByZS1pbml0aWFsaXppbmcgaXQuXHJcbiAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzYzNFxyXG4gICAgICAgICAgICBpZiAoIWRiLm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoREJfT0JKRUNUU1RPUkVfTkFNRSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIE5lZWQgdG8gY2xvc2UgdGhlIGRhdGFiYXNlIG9yIGVsc2UgeW91IGdldCBhIGBibG9ja2VkYCBldmVudFxyXG4gICAgICAgICAgICAgICAgZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IF9kZWxldGVEYXRhYmFzZSgpO1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShhd2FpdCBfb3BlbkRhdGFiYXNlKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZShkYik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9wdXRPYmplY3QoZGIsIGtleSwgdmFsdWUpIHtcclxuICAgIGNvbnN0IHJlcXVlc3QgPSBnZXRPYmplY3RTdG9yZShkYiwgdHJ1ZSkucHV0KHtcclxuICAgICAgICBbREJfREFUQV9LRVlQQVRIXToga2V5LFxyXG4gICAgICAgIHZhbHVlXHJcbiAgICB9KTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIGdldE9iamVjdChkYiwga2V5KSB7XHJcbiAgICBjb25zdCByZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIGZhbHNlKS5nZXQoa2V5KTtcclxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG4gICAgcmV0dXJuIGRhdGEgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBkYXRhLnZhbHVlO1xyXG59XHJcbmZ1bmN0aW9uIF9kZWxldGVPYmplY3QoZGIsIGtleSkge1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IGdldE9iamVjdFN0b3JlKGRiLCB0cnVlKS5kZWxldGUoa2V5KTtcclxuICAgIHJldHVybiBuZXcgREJQcm9taXNlKHJlcXVlc3QpLnRvUHJvbWlzZSgpO1xyXG59XHJcbmNvbnN0IF9QT0xMSU5HX0lOVEVSVkFMX01TID0gODAwO1xyXG5jb25zdCBfVFJBTlNBQ1RJT05fUkVUUllfQ09VTlQgPSAzO1xyXG5jbGFzcyBJbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMudHlwZSA9IFwiTE9DQUxcIiAvKiBQZXJzaXN0ZW5jZVR5cGUuTE9DQUwgKi87XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkQWxsb3dNaWdyYXRpb24gPSB0cnVlO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0ge307XHJcbiAgICAgICAgdGhpcy5sb2NhbENhY2hlID0ge307XHJcbiAgICAgICAgLy8gc2V0VGltZW91dCByZXR1cm4gdmFsdWUgaXMgcGxhdGZvcm0gc3BlY2lmaWNcclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXMgPSAwO1xyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuc2VuZGVyID0gbnVsbDtcclxuICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU2VydmljZVdvcmtlciA9IG51bGw7XHJcbiAgICAgICAgLy8gRmlyZSAmIGZvcmdldCB0aGUgc2VydmljZSB3b3JrZXIgcmVnaXN0cmF0aW9uIGFzIGl0IG1heSBuZXZlciByZXNvbHZlXHJcbiAgICAgICAgdGhpcy5fd29ya2VySW5pdGlhbGl6YXRpb25Qcm9taXNlID1cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2VydmljZVdvcmtlck1lc3NhZ2luZygpLnRoZW4oKCkgPT4geyB9LCAoKSA9PiB7IH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX29wZW5EYigpIHtcclxuICAgICAgICBpZiAodGhpcy5kYikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kYjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5kYiA9IGF3YWl0IF9vcGVuRGF0YWJhc2UoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5kYjtcclxuICAgIH1cclxuICAgIGFzeW5jIF93aXRoUmV0cmllcyhvcCkge1xyXG4gICAgICAgIGxldCBudW1BdHRlbXB0cyA9IDA7XHJcbiAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGRiID0gYXdhaXQgdGhpcy5fb3BlbkRiKCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXdhaXQgb3AoZGIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobnVtQXR0ZW1wdHMrKyA+IF9UUkFOU0FDVElPTl9SRVRSWV9DT1VOVCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5kYikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGIuY2xvc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRiID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogY29uc2lkZXIgYWRkaW5nIGV4cG9uZW50aWFsIGJhY2tvZmZcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW5kZXhlZERCIGV2ZW50cyBkbyBub3QgcHJvcGFnYXRlIGZyb20gdGhlIG1haW4gd2luZG93IHRvIHRoZSB3b3JrZXIgY29udGV4dC4gIFdlIHJlbHkgb24gYVxyXG4gICAgICogcG9zdE1lc3NhZ2UgaW50ZXJmYWNlIHRvIHNlbmQgdGhlc2UgZXZlbnRzIHRvIHRoZSB3b3JrZXIgb3Vyc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBpbml0aWFsaXplU2VydmljZVdvcmtlck1lc3NhZ2luZygpIHtcclxuICAgICAgICByZXR1cm4gX2lzV29ya2VyKCkgPyB0aGlzLmluaXRpYWxpemVSZWNlaXZlcigpIDogdGhpcy5pbml0aWFsaXplU2VuZGVyKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEFzIHRoZSB3b3JrZXIgd2Ugc2hvdWxkIGxpc3RlbiB0byBldmVudHMgZnJvbSB0aGUgbWFpbiB3aW5kb3cuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGluaXRpYWxpemVSZWNlaXZlcigpIHtcclxuICAgICAgICB0aGlzLnJlY2VpdmVyID0gUmVjZWl2ZXIuX2dldEluc3RhbmNlKF9nZXRXb3JrZXJHbG9iYWxTY29wZSgpKTtcclxuICAgICAgICAvLyBSZWZyZXNoIGZyb20gcGVyc2lzdGVuY2UgaWYgd2UgcmVjZWl2ZSBhIEtleUNoYW5nZWQgbWVzc2FnZS5cclxuICAgICAgICB0aGlzLnJlY2VpdmVyLl9zdWJzY3JpYmUoXCJrZXlDaGFuZ2VkXCIgLyogX0V2ZW50VHlwZS5LRVlfQ0hBTkdFRCAqLywgYXN5bmMgKF9vcmlnaW4sIGRhdGEpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qga2V5cyA9IGF3YWl0IHRoaXMuX3BvbGwoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGtleVByb2Nlc3NlZDoga2V5cy5pbmNsdWRlcyhkYXRhLmtleSlcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBMZXQgdGhlIHNlbmRlciBrbm93IHRoYXQgd2UgYXJlIGxpc3RlbmluZyBzbyB0aGV5IGdpdmUgdXMgbW9yZSB0aW1lb3V0LlxyXG4gICAgICAgIHRoaXMucmVjZWl2ZXIuX3N1YnNjcmliZShcInBpbmdcIiAvKiBfRXZlbnRUeXBlLlBJTkcgKi8sIGFzeW5jIChfb3JpZ2luLCBfZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gW1wia2V5Q2hhbmdlZFwiIC8qIF9FdmVudFR5cGUuS0VZX0NIQU5HRUQgKi9dO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBBcyB0aGUgbWFpbiB3aW5kb3csIHdlIHNob3VsZCBsZXQgdGhlIHdvcmtlciBrbm93IHdoZW4ga2V5cyBjaGFuZ2UgKHNldCBhbmQgcmVtb3ZlKS5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9TZXJ2aWNlV29ya2VyQ29udGFpbmVyL3JlYWR5IHwgU2VydmljZVdvcmtlckNvbnRhaW5lci5yZWFkeX1cclxuICAgICAqIG1heSBub3QgcmVzb2x2ZS5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgaW5pdGlhbGl6ZVNlbmRlcigpIHtcclxuICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgIC8vIENoZWNrIHRvIHNlZSBpZiB0aGVyZSdzIGFuIGFjdGl2ZSBzZXJ2aWNlIHdvcmtlci5cclxuICAgICAgICB0aGlzLmFjdGl2ZVNlcnZpY2VXb3JrZXIgPSBhd2FpdCBfZ2V0QWN0aXZlU2VydmljZVdvcmtlcigpO1xyXG4gICAgICAgIGlmICghdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5zZW5kZXIgPSBuZXcgU2VuZGVyKHRoaXMuYWN0aXZlU2VydmljZVdvcmtlcik7XHJcbiAgICAgICAgLy8gUGluZyB0aGUgc2VydmljZSB3b3JrZXIgdG8gY2hlY2sgd2hhdCBldmVudHMgdGhleSBjYW4gaGFuZGxlLlxyXG4gICAgICAgIGNvbnN0IHJlc3VsdHMgPSBhd2FpdCB0aGlzLnNlbmRlci5fc2VuZChcInBpbmdcIiAvKiBfRXZlbnRUeXBlLlBJTkcgKi8sIHt9LCA4MDAgLyogX1RpbWVvdXREdXJhdGlvbi5MT05HX0FDSyAqLyk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCgoX2EgPSByZXN1bHRzWzBdKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZnVsZmlsbGVkKSAmJlxyXG4gICAgICAgICAgICAoKF9iID0gcmVzdWx0c1swXSkgPT09IG51bGwgfHwgX2IgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9iLnZhbHVlLmluY2x1ZGVzKFwia2V5Q2hhbmdlZFwiIC8qIF9FdmVudFR5cGUuS0VZX0NIQU5HRUQgKi8pKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBMZXQgdGhlIHdvcmtlciBrbm93IGFib3V0IGEgY2hhbmdlZCBrZXksIHRoZSBleGFjdCBrZXkgZG9lc24ndCB0ZWNobmljYWxseSBtYXR0ZXIgc2luY2UgdGhlXHJcbiAgICAgKiB3b3JrZXIgd2lsbCBqdXN0IHRyaWdnZXIgYSBmdWxsIHN5bmMgYW55d2F5LlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBGb3Igbm93LCB3ZSBvbmx5IHN1cHBvcnQgb25lIHNlcnZpY2Ugd29ya2VyIHBlciBwYWdlLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBrZXkgLSBTdG9yYWdlIGtleSB3aGljaCBjaGFuZ2VkLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBub3RpZnlTZXJ2aWNlV29ya2VyKGtleSkge1xyXG4gICAgICAgIGlmICghdGhpcy5zZW5kZXIgfHxcclxuICAgICAgICAgICAgIXRoaXMuYWN0aXZlU2VydmljZVdvcmtlciB8fFxyXG4gICAgICAgICAgICBfZ2V0U2VydmljZVdvcmtlckNvbnRyb2xsZXIoKSAhPT0gdGhpcy5hY3RpdmVTZXJ2aWNlV29ya2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5zZW5kZXIuX3NlbmQoXCJrZXlDaGFuZ2VkXCIgLyogX0V2ZW50VHlwZS5LRVlfQ0hBTkdFRCAqLywgeyBrZXkgfSwgXHJcbiAgICAgICAgICAgIC8vIFVzZSBsb25nIHRpbWVvdXQgaWYgcmVjZWl2ZXIgaGFzIHByZXZpb3VzbHkgcmVzcG9uZGVkIHRvIGEgcGluZyBmcm9tIHVzLlxyXG4gICAgICAgICAgICB0aGlzLnNlcnZpY2VXb3JrZXJSZWNlaXZlckF2YWlsYWJsZVxyXG4gICAgICAgICAgICAgICAgPyA4MDAgLyogX1RpbWVvdXREdXJhdGlvbi5MT05HX0FDSyAqL1xyXG4gICAgICAgICAgICAgICAgOiA1MCAvKiBfVGltZW91dER1cmF0aW9uLkFDSyAqLyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgYmVzdCBlZmZvcnQgYXBwcm9hY2guIElnbm9yZSBlcnJvcnMuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgX2lzQXZhaWxhYmxlKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmICghaW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc3QgZGIgPSBhd2FpdCBfb3BlbkRhdGFiYXNlKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9wdXRPYmplY3QoZGIsIFNUT1JBR0VfQVZBSUxBQkxFX0tFWSwgJzEnKTtcclxuICAgICAgICAgICAgYXdhaXQgX2RlbGV0ZU9iamVjdChkYiwgU1RPUkFHRV9BVkFJTEFCTEVfS0VZKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChfYSkgeyB9XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3dpdGhQZW5kaW5nV3JpdGUod3JpdGUpIHtcclxuICAgICAgICB0aGlzLnBlbmRpbmdXcml0ZXMrKztcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB3cml0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmaW5hbGx5IHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nV3JpdGVzLS07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYXN5bmMgX3NldChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3dpdGhQZW5kaW5nV3JpdGUoYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLl93aXRoUmV0cmllcygoZGIpID0+IF9wdXRPYmplY3QoZGIsIGtleSwgdmFsdWUpKTtcclxuICAgICAgICAgICAgdGhpcy5sb2NhbENhY2hlW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90aWZ5U2VydmljZVdvcmtlcihrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX2dldChrZXkpIHtcclxuICAgICAgICBjb25zdCBvYmogPSAoYXdhaXQgdGhpcy5fd2l0aFJldHJpZXMoKGRiKSA9PiBnZXRPYmplY3QoZGIsIGtleSkpKTtcclxuICAgICAgICB0aGlzLmxvY2FsQ2FjaGVba2V5XSA9IG9iajtcclxuICAgICAgICByZXR1cm4gb2JqO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3JlbW92ZShrZXkpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fd2l0aFBlbmRpbmdXcml0ZShhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4gX2RlbGV0ZU9iamVjdChkYiwga2V5KSk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxvY2FsQ2FjaGVba2V5XTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubm90aWZ5U2VydmljZVdvcmtlcihrZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgX3BvbGwoKSB7XHJcbiAgICAgICAgLy8gVE9ETzogY2hlY2sgaWYgd2UgbmVlZCB0byBmYWxsYmFjayBpZiBnZXRBbGwgaXMgbm90IHN1cHBvcnRlZFxyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuX3dpdGhSZXRyaWVzKChkYikgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBnZXRBbGxSZXF1ZXN0ID0gZ2V0T2JqZWN0U3RvcmUoZGIsIGZhbHNlKS5nZXRBbGwoKTtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEQlByb21pc2UoZ2V0QWxsUmVxdWVzdCkudG9Qcm9taXNlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKCFyZXN1bHQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBJZiB3ZSBoYXZlIHBlbmRpbmcgd3JpdGVzIGluIHByb2dyZXNzIGFib3J0LCB3ZSdsbCBnZXQgcGlja2VkIHVwIG9uIHRoZSBuZXh0IHBvbGxcclxuICAgICAgICBpZiAodGhpcy5wZW5kaW5nV3JpdGVzICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3Qga2V5cyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGtleXNJblJlc3VsdCA9IG5ldyBTZXQoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IHsgZmJhc2Vfa2V5OiBrZXksIHZhbHVlIH0gb2YgcmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGtleXNJblJlc3VsdC5hZGQoa2V5KTtcclxuICAgICAgICAgICAgaWYgKEpTT04uc3RyaW5naWZ5KHRoaXMubG9jYWxDYWNoZVtrZXldKSAhPT0gSlNPTi5zdHJpbmdpZnkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm5vdGlmeUxpc3RlbmVycyhrZXksIHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvciAoY29uc3QgbG9jYWxLZXkgb2YgT2JqZWN0LmtleXModGhpcy5sb2NhbENhY2hlKSkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5sb2NhbENhY2hlW2xvY2FsS2V5XSAmJiAha2V5c0luUmVzdWx0Lmhhcyhsb2NhbEtleSkpIHtcclxuICAgICAgICAgICAgICAgIC8vIERlbGV0ZWRcclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5TGlzdGVuZXJzKGxvY2FsS2V5LCBudWxsKTtcclxuICAgICAgICAgICAgICAgIGtleXMucHVzaChsb2NhbEtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGtleXM7XHJcbiAgICB9XHJcbiAgICBub3RpZnlMaXN0ZW5lcnMoa2V5LCBuZXdWYWx1ZSkge1xyXG4gICAgICAgIHRoaXMubG9jYWxDYWNoZVtrZXldID0gbmV3VmFsdWU7XHJcbiAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNba2V5XTtcclxuICAgICAgICBpZiAobGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgbGlzdGVuZXIgb2YgQXJyYXkuZnJvbShsaXN0ZW5lcnMpKSB7XHJcbiAgICAgICAgICAgICAgICBsaXN0ZW5lcihuZXdWYWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGFydFBvbGxpbmcoKSB7XHJcbiAgICAgICAgdGhpcy5zdG9wUG9sbGluZygpO1xyXG4gICAgICAgIHRoaXMucG9sbFRpbWVyID0gc2V0SW50ZXJ2YWwoYXN5bmMgKCkgPT4gdGhpcy5fcG9sbCgpLCBfUE9MTElOR19JTlRFUlZBTF9NUyk7XHJcbiAgICB9XHJcbiAgICBzdG9wUG9sbGluZygpIHtcclxuICAgICAgICBpZiAodGhpcy5wb2xsVGltZXIpIHtcclxuICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnBvbGxUaW1lcik7XHJcbiAgICAgICAgICAgIHRoaXMucG9sbFRpbWVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBfYWRkTGlzdGVuZXIoa2V5LCBsaXN0ZW5lcikge1xyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnRQb2xsaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldID0gbmV3IFNldCgpO1xyXG4gICAgICAgICAgICAvLyBQb3B1bGF0ZSB0aGUgY2FjaGUgdG8gYXZvaWQgc3B1cmlvdXNseSB0cmlnZ2VyaW5nIG9uIGZpcnN0IHBvbGwuXHJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fZ2V0KGtleSk7IC8vIFRoaXMgY2FuIGhhcHBlbiBpbiB0aGUgYmFja2dyb3VuZCBhc3luYyBhbmQgd2UgY2FuIHJldHVybiBpbW1lZGlhdGVseS5cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnNba2V5XS5hZGQobGlzdGVuZXIpO1xyXG4gICAgfVxyXG4gICAgX3JlbW92ZUxpc3RlbmVyKGtleSwgbGlzdGVuZXIpIHtcclxuICAgICAgICBpZiAodGhpcy5saXN0ZW5lcnNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVyc1trZXldLmRlbGV0ZShsaXN0ZW5lcik7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmxpc3RlbmVyc1trZXldLnNpemUgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmxpc3RlbmVyc1trZXldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmxpc3RlbmVycykubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RvcFBvbGxpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuSW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZS50eXBlID0gJ0xPQ0FMJztcclxuLyoqXHJcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBQZXJzaXN0ZW5jZX0gb2YgdHlwZSBgTE9DQUxgIHVzaW5nIGBpbmRleGVkREJgXHJcbiAqIGZvciB0aGUgdW5kZXJseWluZyBzdG9yYWdlLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlID0gSW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gc3RhcnRTaWduSW5QaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOnN0YXJ0XCIgLyogRW5kcG9pbnQuU1RBUlRfTUZBX1NJR05fSU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gZmluYWxpemVTaWduSW5QaG9uZU1mYShhdXRoLCByZXF1ZXN0KSB7XHJcbiAgICByZXR1cm4gX3BlcmZvcm1BcGlSZXF1ZXN0KGF1dGgsIFwiUE9TVFwiIC8qIEh0dHBNZXRob2QuUE9TVCAqLywgXCIvdjIvYWNjb3VudHMvbWZhU2lnbkluOmZpbmFsaXplXCIgLyogRW5kcG9pbnQuRklOQUxJWkVfTUZBX1NJR05fSU4gKi8sIF9hZGRUaWRJZk5lY2Vzc2FyeShhdXRoLCByZXF1ZXN0KSk7XHJcbn1cclxuZnVuY3Rpb24gZmluYWxpemVTaWduSW5Ub3RwTWZhKGF1dGgsIHJlcXVlc3QpIHtcclxuICAgIHJldHVybiBfcGVyZm9ybUFwaVJlcXVlc3QoYXV0aCwgXCJQT1NUXCIgLyogSHR0cE1ldGhvZC5QT1NUICovLCBcIi92Mi9hY2NvdW50cy9tZmFTaWduSW46ZmluYWxpemVcIiAvKiBFbmRwb2ludC5GSU5BTElaRV9NRkFfU0lHTl9JTiAqLywgX2FkZFRpZElmTmVjZXNzYXJ5KGF1dGgsIHJlcXVlc3QpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfU09MVkVfVElNRV9NUyA9IDUwMDtcclxuY29uc3QgX0VYUElSQVRJT05fVElNRV9NUyA9IDYwMDAwO1xyXG5jb25zdCBfV0lER0VUX0lEX1NUQVJUID0gMTAwMDAwMDAwMDAwMDtcclxuY2xhc3MgTW9ja1JlQ2FwdGNoYSB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLmNvdW50ZXIgPSBfV0lER0VUX0lEX1NUQVJUO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICByZW5kZXIoY29udGFpbmVyLCBwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgY29uc3QgaWQgPSB0aGlzLmNvdW50ZXI7XHJcbiAgICAgICAgdGhpcy5fd2lkZ2V0cy5zZXQoaWQsIG5ldyBNb2NrV2lkZ2V0KGNvbnRhaW5lciwgdGhpcy5hdXRoLm5hbWUsIHBhcmFtZXRlcnMgfHwge30pKTtcclxuICAgICAgICB0aGlzLmNvdW50ZXIrKztcclxuICAgICAgICByZXR1cm4gaWQ7XHJcbiAgICB9XHJcbiAgICByZXNldChvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdm9pZCAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZGVsZXRlKCkpO1xyXG4gICAgICAgIHRoaXMuX3dpZGdldHMuZGVsZXRlKGlkKTtcclxuICAgIH1cclxuICAgIGdldFJlc3BvbnNlKG9wdFdpZGdldElkKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGlkID0gb3B0V2lkZ2V0SWQgfHwgX1dJREdFVF9JRF9TVEFSVDtcclxuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuX3dpZGdldHMuZ2V0KGlkKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmdldFJlc3BvbnNlKCkpIHx8ICcnO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgZXhlY3V0ZShvcHRXaWRnZXRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBpZCA9IG9wdFdpZGdldElkIHx8IF9XSURHRVRfSURfU1RBUlQ7XHJcbiAgICAgICAgdm9pZCAoKF9hID0gdGhpcy5fd2lkZ2V0cy5nZXQoaWQpKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuZXhlY3V0ZSgpKTtcclxuICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgTW9ja1dpZGdldCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXJPcklkLCBhcHBOYW1lLCBwYXJhbXMpIHtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgICAgICB0aGlzLnRpbWVySWQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5jbGlja0hhbmRsZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdHlwZW9mIGNvbnRhaW5lck9ySWQgPT09ICdzdHJpbmcnXHJcbiAgICAgICAgICAgID8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoY29udGFpbmVyT3JJZClcclxuICAgICAgICAgICAgOiBjb250YWluZXJPcklkO1xyXG4gICAgICAgIF9hc3NlcnQoY29udGFpbmVyLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLywgeyBhcHBOYW1lIH0pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdGhpcy5wYXJhbXMuc2l6ZSAhPT0gJ2ludmlzaWJsZSc7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0UmVzcG9uc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJlc3BvbnNlVG9rZW47XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0lmRGVsZXRlZCgpO1xyXG4gICAgICAgIHRoaXMuZGVsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgaWYgKHRoaXMudGltZXJJZCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcklkKTtcclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmNsaWNrSGFuZGxlcik7XHJcbiAgICB9XHJcbiAgICBleGVjdXRlKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJZkRlbGV0ZWQoKTtcclxuICAgICAgICBpZiAodGhpcy50aW1lcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlVG9rZW4gPSBnZW5lcmF0ZVJhbmRvbUFscGhhTnVtZXJpY1N0cmluZyg1MCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgY2FsbGJhY2ssICdleHBpcmVkLWNhbGxiYWNrJzogZXhwaXJlZENhbGxiYWNrIH0gPSB0aGlzLnBhcmFtcztcclxuICAgICAgICAgICAgaWYgKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMucmVzcG9uc2VUb2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy50aW1lcklkID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy50aW1lcklkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVzcG9uc2VUb2tlbiA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhwaXJlZENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJlZENhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7IH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCBfRVhQSVJBVElPTl9USU1FX01TKTtcclxuICAgICAgICB9LCBfU09MVkVfVElNRV9NUyk7XHJcbiAgICB9XHJcbiAgICBjaGVja0lmRGVsZXRlZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5kZWxldGVkKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncmVDQVBUQ0hBIG1vY2sgd2FzIGFscmVhZHkgZGVsZXRlZCEnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gZ2VuZXJhdGVSYW5kb21BbHBoYU51bWVyaWNTdHJpbmcobGVuKSB7XHJcbiAgICBjb25zdCBjaGFycyA9IFtdO1xyXG4gICAgY29uc3QgYWxsb3dlZENoYXJzID0gJzEyMzQ1Njc4OTBhYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ekFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaJztcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogYWxsb3dlZENoYXJzLmxlbmd0aCkpKTtcclxuICAgIH1cclxuICAgIHJldHVybiBjaGFycy5qb2luKCcnKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBSZUNhcHRjaGEgd2lsbCBsb2FkIHVzaW5nIHRoZSBzYW1lIGNhbGxiYWNrLCBzbyB0aGUgY2FsbGJhY2sgZnVuY3Rpb24gbmVlZHNcclxuLy8gdG8gYmUga2VwdCBhcm91bmRcclxuY29uc3QgX0pTTE9BRF9DQUxMQkFDSyA9IF9nZW5lcmF0ZUNhbGxiYWNrTmFtZSgncmNiJyk7XHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVF9ERUxBWSA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG5jb25zdCBSRUNBUFRDSEFfQkFTRSA9ICdodHRwczovL3d3dy5nb29nbGUuY29tL3JlY2FwdGNoYS9hcGkuanM/JztcclxuLyoqXHJcbiAqIExvYWRlciBmb3IgdGhlIEdSZUNhcHRjaGEgbGlicmFyeS4gVGhlcmUgc2hvdWxkIG9ubHkgZXZlciBiZSBvbmUgb2YgdGhpcy5cclxuICovXHJcbmNsYXNzIFJlQ2FwdGNoYUxvYWRlckltcGwge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gJyc7XHJcbiAgICAgICAgdGhpcy5jb3VudGVyID0gMDtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDaGVjayBmb3IgYHJlbmRlcigpYCBtZXRob2QuIGB3aW5kb3cuZ3JlY2FwdGNoYWAgd2lsbCBleGlzdCBpZiB0aGUgRW50ZXJwcmlzZVxyXG4gICAgICAgICAqIHZlcnNpb24gb2YgdGhlIFJlQ0FQVENIQSBzY3JpcHQgd2FzIGxvYWRlZCBieSBzb21lb25lIGVsc2UgKGUuZy4gQXBwIENoZWNrKSBidXRcclxuICAgICAgICAgKiBgd2luZG93LmdyZWNhcHRjaGEucmVuZGVyKClgIHdpbGwgbm90LiBBbm90aGVyIGxvYWQgd2lsbCBhZGQgaXQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5saWJyYXJ5U2VwYXJhdGVseUxvYWRlZCA9ICEhKChfYSA9IF93aW5kb3coKS5ncmVjYXB0Y2hhKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVuZGVyKTtcclxuICAgIH1cclxuICAgIGxvYWQoYXV0aCwgaGwgPSAnJykge1xyXG4gICAgICAgIF9hc3NlcnQoaXNIb3N0TGFuZ3VhZ2VWYWxpZChobCksIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBpZiAodGhpcy5zaG91bGRSZXNvbHZlSW1tZWRpYXRlbHkoaGwpICYmIGlzVjIoX3dpbmRvdygpLmdyZWNhcHRjaGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoX3dpbmRvdygpLmdyZWNhcHRjaGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBuZXR3b3JrVGltZW91dCA9IF93aW5kb3coKS5zZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgIH0sIE5FVFdPUktfVElNRU9VVF9ERUxBWS5nZXQoKSk7XHJcbiAgICAgICAgICAgIF93aW5kb3coKVtfSlNMT0FEX0NBTExCQUNLXSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIF93aW5kb3coKS5jbGVhclRpbWVvdXQobmV0d29ya1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlIF93aW5kb3coKVtfSlNMT0FEX0NBTExCQUNLXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY2FwdGNoYSA9IF93aW5kb3coKS5ncmVjYXB0Y2hhO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFyZWNhcHRjaGEgfHwgIWlzVjIocmVjYXB0Y2hhKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBXcmFwIHRoZSBncmVwdGNoYSByZW5kZXIgZnVuY3Rpb24gc28gdGhhdCB3ZSBrbm93IGlmIHRoZSBkZXZlbG9wZXIgaGFzXHJcbiAgICAgICAgICAgICAgICAvLyBjYWxsZWQgaXQgc2VwYXJhdGVseVxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVuZGVyID0gcmVjYXB0Y2hhLnJlbmRlcjtcclxuICAgICAgICAgICAgICAgIHJlY2FwdGNoYS5yZW5kZXIgPSAoY29udGFpbmVyLCBwYXJhbXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB3aWRnZXRJZCA9IHJlbmRlcihjb250YWluZXIsIHBhcmFtcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb3VudGVyKys7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpZGdldElkO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaG9zdExhbmd1YWdlID0gaGw7XHJcbiAgICAgICAgICAgICAgICByZXNvbHZlKHJlY2FwdGNoYSk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke1JFQ0FQVENIQV9CQVNFfT8ke3F1ZXJ5c3RyaW5nKHtcclxuICAgICAgICAgICAgICAgIG9ubG9hZDogX0pTTE9BRF9DQUxMQkFDSyxcclxuICAgICAgICAgICAgICAgIHJlbmRlcjogJ2V4cGxpY2l0JyxcclxuICAgICAgICAgICAgICAgIGhsXHJcbiAgICAgICAgICAgIH0pfWA7XHJcbiAgICAgICAgICAgIF9sb2FkSlModXJsKS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQobmV0d29ya1RpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIGNsZWFyZWRPbmVJbnN0YW5jZSgpIHtcclxuICAgICAgICB0aGlzLmNvdW50ZXItLTtcclxuICAgIH1cclxuICAgIHNob3VsZFJlc29sdmVJbW1lZGlhdGVseShobCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAvLyBXZSBjYW4gcmVzb2x2ZSBpbW1lZGlhdGVseSBpZjpcclxuICAgICAgICAvLyAgIOKAoiBncmVjYXB0Y2hhIGlzIGFscmVhZHkgZGVmaW5lZCBBTkQgKFxyXG4gICAgICAgIC8vICAgICAxLiB0aGUgcmVxdWVzdGVkIGxhbmd1YWdlIGNvZGVzIGFyZSB0aGUgc2FtZSBPUlxyXG4gICAgICAgIC8vICAgICAyLiB0aGVyZSBleGlzdHMgYWxyZWFkeSBhIFJlQ2FwdGNoYSBvbiB0aGUgcGFnZVxyXG4gICAgICAgIC8vICAgICAzLiB0aGUgbGlicmFyeSB3YXMgYWxyZWFkeSBsb2FkZWQgYnkgdGhlIGFwcFxyXG4gICAgICAgIC8vIEluIGNhc2VzICgyKSBhbmQgKDMpLCB3ZSBfY2FuJ3RfIHJlbG9hZCBhcyBpdCB3b3VsZCBicmVhayB0aGUgcmVjYXB0Y2hhc1xyXG4gICAgICAgIC8vIHRoYXQgYXJlIGFscmVhZHkgaW4gdGhlIHBhZ2VcclxuICAgICAgICByZXR1cm4gKCEhKChfYSA9IF93aW5kb3coKS5ncmVjYXB0Y2hhKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVuZGVyKSAmJlxyXG4gICAgICAgICAgICAoaGwgPT09IHRoaXMuaG9zdExhbmd1YWdlIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvdW50ZXIgPiAwIHx8XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxpYnJhcnlTZXBhcmF0ZWx5TG9hZGVkKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gaXNIb3N0TGFuZ3VhZ2VWYWxpZChobCkge1xyXG4gICAgcmV0dXJuIGhsLmxlbmd0aCA8PSA2ICYmIC9eXFxzKlthLXpBLVowLTlcXC1dKlxccyokLy50ZXN0KGhsKTtcclxufVxyXG5jbGFzcyBNb2NrUmVDYXB0Y2hhTG9hZGVySW1wbCB7XHJcbiAgICBhc3luYyBsb2FkKGF1dGgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IE1vY2tSZUNhcHRjaGEoYXV0aCk7XHJcbiAgICB9XHJcbiAgICBjbGVhcmVkT25lSW5zdGFuY2UoKSB7IH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBSRUNBUFRDSEFfVkVSSUZJRVJfVFlQRSA9ICdyZWNhcHRjaGEnO1xyXG5jb25zdCBERUZBVUxUX1BBUkFNUyA9IHtcclxuICAgIHRoZW1lOiAnbGlnaHQnLFxyXG4gICAgdHlwZTogJ2ltYWdlJ1xyXG59O1xyXG4vKipcclxuICogQW4ge0BsaW5rIGh0dHBzOi8vd3d3Lmdvb2dsZS5jb20vcmVjYXB0Y2hhLyB8IHJlQ0FQVENIQX0tYmFzZWQgYXBwbGljYXRpb24gdmVyaWZpZXIuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFJlY2FwdGNoYVZlcmlmaWVyIHtcclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb250YWluZXJPcklkIC0gVGhlIHJlQ0FQVENIQSBjb250YWluZXIgcGFyYW1ldGVyLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKiBUaGlzIGhhcyBkaWZmZXJlbnQgbWVhbmluZyBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgcmVDQVBUQ0hBIGlzIGhpZGRlbiBvciB2aXNpYmxlLiBGb3IgYVxyXG4gICAgICogdmlzaWJsZSByZUNBUFRDSEEgdGhlIGNvbnRhaW5lciBtdXN0IGJlIGVtcHR5LiBJZiBhIHN0cmluZyBpcyB1c2VkLCBpdCBoYXMgdG8gY29ycmVzcG9uZCB0b1xyXG4gICAgICogYW4gZWxlbWVudCBJRC4gVGhlIGNvcnJlc3BvbmRpbmcgZWxlbWVudCBtdXN0IGFsc28gbXVzdCBiZSBpbiB0aGUgRE9NIGF0IHRoZSB0aW1lIG9mXHJcbiAgICAgKiBpbml0aWFsaXphdGlvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGFyYW1ldGVycyAtIFRoZSBvcHRpb25hbCByZUNBUFRDSEEgcGFyYW1ldGVycy5cclxuICAgICAqXHJcbiAgICAgKiBAcmVtYXJrc1xyXG4gICAgICogQ2hlY2sgdGhlIHJlQ0FQVENIQSBkb2NzIGZvciBhIGNvbXByZWhlbnNpdmUgbGlzdC4gQWxsIHBhcmFtZXRlcnMgYXJlIGFjY2VwdGVkIGV4Y2VwdCBmb3JcclxuICAgICAqIHRoZSBzaXRla2V5LiBGaXJlYmFzZSBBdXRoIGJhY2tlbmQgcHJvdmlzaW9ucyBhIHJlQ0FQVENIQSBmb3IgZWFjaCBwcm9qZWN0IGFuZCB3aWxsXHJcbiAgICAgKiBjb25maWd1cmUgdGhpcyB1cG9uIHJlbmRlcmluZy4gRm9yIGFuIGludmlzaWJsZSByZUNBUFRDSEEsIGEgc2l6ZSBrZXkgbXVzdCBoYXZlIHRoZSB2YWx1ZVxyXG4gICAgICogJ2ludmlzaWJsZScuXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGF1dGhFeHRlcm4gLSBUaGUgY29ycmVzcG9uZGluZyBGaXJlYmFzZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGNvbnRhaW5lck9ySWQsIHBhcmFtZXRlcnMgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1BBUkFNUyksIGF1dGhFeHRlcm4pIHtcclxuICAgICAgICB0aGlzLnBhcmFtZXRlcnMgPSBwYXJhbWV0ZXJzO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBhcHBsaWNhdGlvbiB2ZXJpZmllciB0eXBlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHJlbWFya3NcclxuICAgICAgICAgKiBGb3IgYSByZUNBUFRDSEEgdmVyaWZpZXIsIHRoaXMgaXMgJ3JlY2FwdGNoYScuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy50eXBlID0gUkVDQVBUQ0hBX1ZFUklGSUVSX1RZUEU7XHJcbiAgICAgICAgdGhpcy5kZXN0cm95ZWQgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLndpZGdldElkID0gbnVsbDtcclxuICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5yZWNhcHRjaGEgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IF9jYXN0QXV0aChhdXRoRXh0ZXJuKTtcclxuICAgICAgICB0aGlzLmlzSW52aXNpYmxlID0gdGhpcy5wYXJhbWV0ZXJzLnNpemUgPT09ICdpbnZpc2libGUnO1xyXG4gICAgICAgIF9hc3NlcnQodHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJywgdGhpcy5hdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBBdXRoRXJyb3JDb2RlLk9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0eXBlb2YgY29udGFpbmVyT3JJZCA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChjb250YWluZXJPcklkKVxyXG4gICAgICAgICAgICA6IGNvbnRhaW5lck9ySWQ7XHJcbiAgICAgICAgX2Fzc2VydChjb250YWluZXIsIHRoaXMuYXV0aCwgXCJhcmd1bWVudC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuQVJHVU1FTlRfRVJST1IgKi8pO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMucGFyYW1ldGVycy5jYWxsYmFjayA9IHRoaXMubWFrZVRva2VuQ2FsbGJhY2sodGhpcy5wYXJhbWV0ZXJzLmNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLl9yZWNhcHRjaGFMb2FkZXIgPSB0aGlzLmF1dGguc2V0dGluZ3MuYXBwVmVyaWZpY2F0aW9uRGlzYWJsZWRGb3JUZXN0aW5nXHJcbiAgICAgICAgICAgID8gbmV3IE1vY2tSZUNhcHRjaGFMb2FkZXJJbXBsKClcclxuICAgICAgICAgICAgOiBuZXcgUmVDYXB0Y2hhTG9hZGVySW1wbCgpO1xyXG4gICAgICAgIHRoaXMudmFsaWRhdGVTdGFydGluZ1N0YXRlKCk7XHJcbiAgICAgICAgLy8gVE9ETzogRmlndXJlIG91dCBpZiBzZGsgdmVyc2lvbiBpcyBuZWVkZWRcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogV2FpdHMgZm9yIHRoZSB1c2VyIHRvIHNvbHZlIHRoZSByZUNBUFRDSEEgYW5kIHJlc29sdmVzIHdpdGggdGhlIHJlQ0FQVENIQSB0b2tlbi5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgZm9yIHRoZSByZUNBUFRDSEEgdG9rZW4uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHZlcmlmeSgpIHtcclxuICAgICAgICB0aGlzLmFzc2VydE5vdERlc3Ryb3llZCgpO1xyXG4gICAgICAgIGNvbnN0IGlkID0gYXdhaXQgdGhpcy5yZW5kZXIoKTtcclxuICAgICAgICBjb25zdCByZWNhcHRjaGEgPSB0aGlzLmdldEFzc2VydGVkUmVjYXB0Y2hhKCk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSByZWNhcHRjaGEuZ2V0UmVzcG9uc2UoaWQpO1xyXG4gICAgICAgIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdG9rZW5DaGFuZ2UgPSAodG9rZW4pID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47IC8vIElnbm9yZSB0b2tlbiBleHBpcmF0aW9ucy5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMudG9rZW5DaGFuZ2VMaXN0ZW5lcnMuZGVsZXRlKHRva2VuQ2hhbmdlKTtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodG9rZW4pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmFkZCh0b2tlbkNoYW5nZSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzSW52aXNpYmxlKSB7XHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGEuZXhlY3V0ZShpZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgcmVDQVBUQ0hBIHdpZGdldCBvbiB0aGUgcGFnZS5cclxuICAgICAqXHJcbiAgICAgKiBAcmV0dXJucyBBIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSByZUNBUFRDSEEgd2lkZ2V0IElELlxyXG4gICAgICovXHJcbiAgICByZW5kZXIoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgLy8gVGhpcyBtZXRob2QgcmV0dXJucyBhIHByb21pc2UuIFNpbmNlIGl0J3Mgbm90IGFzeW5jICh3ZSB3YW50IHRvIHJldHVybiB0aGVcclxuICAgICAgICAgICAgLy8gX3NhbWVfIHByb21pc2UgaWYgcmVuZGVyaW5nIGlzIHN0aWxsIG9jY3VycmluZyksIHRoZSBBUEkgc3VyZmFjZSBzaG91bGRcclxuICAgICAgICAgICAgLy8gcmVqZWN0IHdpdGggdGhlIGVycm9yIHJhdGhlciB0aGFuIGp1c3QgdGhyb3dcclxuICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5yZW5kZXJQcm9taXNlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlclByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvbWlzZSA9IHRoaXMubWFrZVJlbmRlclByb21pc2UoKS5jYXRjaChlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9taXNlID0gbnVsbDtcclxuICAgICAgICAgICAgdGhyb3cgZTtcclxuICAgICAgICB9KTtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJQcm9taXNlO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX3Jlc2V0KCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90RGVzdHJveWVkKCk7XHJcbiAgICAgICAgaWYgKHRoaXMud2lkZ2V0SWQgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlc2V0KHRoaXMud2lkZ2V0SWQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2xlYXJzIHRoZSByZUNBUFRDSEEgd2lkZ2V0IGZyb20gdGhlIHBhZ2UgYW5kIGRlc3Ryb3lzIHRoZSBpbnN0YW5jZS5cclxuICAgICAqL1xyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5hc3NlcnROb3REZXN0cm95ZWQoKTtcclxuICAgICAgICB0aGlzLmRlc3Ryb3llZCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyLmNsZWFyZWRPbmVJbnN0YW5jZSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5jaGlsZE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lci5yZW1vdmVDaGlsZChub2RlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgdmFsaWRhdGVTdGFydGluZ1N0YXRlKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMucGFyYW1ldGVycy5zaXRla2V5LCB0aGlzLmF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuaXNJbnZpc2libGUgfHwgIXRoaXMuY29udGFpbmVyLmhhc0NoaWxkTm9kZXMoKSwgdGhpcy5hdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnLCB0aGlzLmF1dGgsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIEF1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgfVxyXG4gICAgbWFrZVRva2VuQ2FsbGJhY2soZXhpc3RpbmcpIHtcclxuICAgICAgICByZXR1cm4gdG9rZW4gPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnRva2VuQ2hhbmdlTGlzdGVuZXJzLmZvckVhY2gobGlzdGVuZXIgPT4gbGlzdGVuZXIodG9rZW4pKTtcclxuICAgICAgICAgICAgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgZXhpc3RpbmcodG9rZW4pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHR5cGVvZiBleGlzdGluZyA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGdsb2JhbEZ1bmMgPSBfd2luZG93KClbZXhpc3RpbmddO1xyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBnbG9iYWxGdW5jID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZ2xvYmFsRnVuYyh0b2tlbik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgYXNzZXJ0Tm90RGVzdHJveWVkKCkge1xyXG4gICAgICAgIF9hc3NlcnQoIXRoaXMuZGVzdHJveWVkLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG1ha2VSZW5kZXJQcm9taXNlKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuaW5pdCgpO1xyXG4gICAgICAgIGlmICghdGhpcy53aWRnZXRJZCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGFpbmVyID0gdGhpcy5jb250YWluZXI7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc0ludmlzaWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZ3VhcmFudGVlZEVtcHR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZ3VhcmFudGVlZEVtcHR5KTtcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGd1YXJhbnRlZWRFbXB0eTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLndpZGdldElkID0gdGhpcy5nZXRBc3NlcnRlZFJlY2FwdGNoYSgpLnJlbmRlcihjb250YWluZXIsIHRoaXMucGFyYW1ldGVycyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLndpZGdldElkO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdCgpIHtcclxuICAgICAgICBfYXNzZXJ0KF9pc0h0dHBPckh0dHBzKCkgJiYgIV9pc1dvcmtlcigpLCB0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICBhd2FpdCBkb21SZWFkeSgpO1xyXG4gICAgICAgIHRoaXMucmVjYXB0Y2hhID0gYXdhaXQgdGhpcy5fcmVjYXB0Y2hhTG9hZGVyLmxvYWQodGhpcy5hdXRoLCB0aGlzLmF1dGgubGFuZ3VhZ2VDb2RlIHx8IHVuZGVmaW5lZCk7XHJcbiAgICAgICAgY29uc3Qgc2l0ZUtleSA9IGF3YWl0IGdldFJlY2FwdGNoYVBhcmFtcyh0aGlzLmF1dGgpO1xyXG4gICAgICAgIF9hc3NlcnQoc2l0ZUtleSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgdGhpcy5wYXJhbWV0ZXJzLnNpdGVrZXkgPSBzaXRlS2V5O1xyXG4gICAgfVxyXG4gICAgZ2V0QXNzZXJ0ZWRSZWNhcHRjaGEoKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0aGlzLnJlY2FwdGNoYSwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVjYXB0Y2hhO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIGRvbVJlYWR5KCkge1xyXG4gICAgbGV0IHJlc29sdmVyID0gbnVsbDtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gJ2NvbXBsZXRlJykge1xyXG4gICAgICAgICAgICByZXNvbHZlKCk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG9jdW1lbnQgbm90IHJlYWR5LCB3YWl0IGZvciBsb2FkIGJlZm9yZSByZXNvbHZpbmcuXHJcbiAgICAgICAgLy8gU2F2ZSByZXNvbHZlciwgc28gd2UgY2FuIHJlbW92ZSBsaXN0ZW5lciBpbiBjYXNlIGl0IHdhcyBleHRlcm5hbGx5XHJcbiAgICAgICAgLy8gY2FuY2VsbGVkLlxyXG4gICAgICAgIHJlc29sdmVyID0gKCkgPT4gcmVzb2x2ZSgpO1xyXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKHJlc29sdmVyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgcmVzb2x2ZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aHJvdyBlO1xyXG4gICAgfSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih2ZXJpZmljYXRpb25JZCwgb25Db25maXJtYXRpb24pIHtcclxuICAgICAgICB0aGlzLnZlcmlmaWNhdGlvbklkID0gdmVyaWZpY2F0aW9uSWQ7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm1hdGlvbiA9IG9uQ29uZmlybWF0aW9uO1xyXG4gICAgfVxyXG4gICAgY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVmVyaWZpY2F0aW9uKHRoaXMudmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLm9uQ29uZmlybWF0aW9uKGF1dGhDcmVkZW50aWFsKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQXN5bmNocm9ub3VzbHkgc2lnbnMgaW4gdXNpbmcgYSBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRoaXMgbWV0aG9kIHNlbmRzIGEgY29kZSB2aWEgU01TIHRvIHRoZSBnaXZlblxyXG4gKiBwaG9uZSBudW1iZXIsIGFuZCByZXR1cm5zIGEge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdH0uIEFmdGVyIHRoZSB1c2VyXHJcbiAqIHByb3ZpZGVzIHRoZSBjb2RlIHNlbnQgdG8gdGhlaXIgcGhvbmUsIGNhbGwge0BsaW5rIENvbmZpcm1hdGlvblJlc3VsdC5jb25maXJtfVxyXG4gKiB3aXRoIHRoZSBjb2RlIHRvIHNpZ24gdGhlIHVzZXIgaW4uXHJcbiAqXHJcbiAqIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGEge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKiBUaGlzIFNESyBpbmNsdWRlcyBhIHJlQ0FQVENIQS1iYXNlZCBpbXBsZW1lbnRhdGlvbiwge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfS5cclxuICogVGhpcyBmdW5jdGlvbiBjYW4gd29yayBvbiBvdGhlciBwbGF0Zm9ybXMgdGhhdCBkbyBub3Qgc3VwcG9ydCB0aGVcclxuICoge0BsaW5rIFJlY2FwdGNoYVZlcmlmaWVyfSAobGlrZSBSZWFjdCBOYXRpdmUpLCBidXQgeW91IG5lZWQgdG8gdXNlIGFcclxuICogdGhpcmQtcGFydHkge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9IGltcGxlbWVudGF0aW9uLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vICdyZWNhcHRjaGEtY29udGFpbmVyJyBpcyB0aGUgSUQgb2YgYW4gZWxlbWVudCBpbiB0aGUgRE9NLlxyXG4gKiBjb25zdCBhcHBsaWNhdGlvblZlcmlmaWVyID0gbmV3IGZpcmViYXNlLmF1dGguUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgY29uZmlybWF0aW9uUmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFBob25lTnVtYmVyKGF1dGgsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKTtcclxuICogLy8gT2J0YWluIGEgdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gKiBjb25zdCBjcmVkZW50aWFsID0gYXdhaXQgY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcFZlcmlmaWVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcihhdXRoSW50ZXJuYWwsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiBzaWduSW5XaXRoQ3JlZGVudGlhbChhdXRoSW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHVzZXIgYWNjb3VudCB3aXRoIHRoZSBnaXZlbiBwaG9uZSBudW1iZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB1c2VyIC0gVGhlIHVzZXIuXHJcbiAqIEBwYXJhbSBwaG9uZU51bWJlciAtIFRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyIGluIEUuMTY0IGZvcm1hdCAoZS5nLiArMTY1MDU1NTAxMDEpLlxyXG4gKiBAcGFyYW0gYXBwVmVyaWZpZXIgLSBUaGUge0BsaW5rIEFwcGxpY2F0aW9uVmVyaWZpZXJ9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBob25lTnVtYmVyKHVzZXIsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBcInBob25lXCIgLyogUHJvdmlkZXJJZC5QSE9ORSAqLyk7XHJcbiAgICBjb25zdCB2ZXJpZmljYXRpb25JZCA9IGF3YWl0IF92ZXJpZnlQaG9uZU51bWJlcih1c2VySW50ZXJuYWwuYXV0aCwgcGhvbmVOdW1iZXIsIGdldE1vZHVsYXJJbnN0YW5jZShhcHBWZXJpZmllcikpO1xyXG4gICAgcmV0dXJuIG5ldyBDb25maXJtYXRpb25SZXN1bHRJbXBsKHZlcmlmaWNhdGlvbklkLCBjcmVkID0+IGxpbmtXaXRoQ3JlZGVudGlhbCh1c2VySW50ZXJuYWwsIGNyZWQpKTtcclxufVxyXG4vKipcclxuICogUmUtYXV0aGVudGljYXRlcyBhIHVzZXIgdXNpbmcgYSBmcmVzaCBwaG9uZSBjcmVkZW50aWFsLlxyXG4gKlxyXG4gKiBAcmVtYXJrcyBVc2UgYmVmb3JlIG9wZXJhdGlvbnMgc3VjaCBhcyB7QGxpbmsgdXBkYXRlUGFzc3dvcmR9IHRoYXQgcmVxdWlyZSB0b2tlbnMgZnJvbSByZWNlbnQgc2lnbi1pbiBhdHRlbXB0cy5cclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHBob25lTnVtYmVyIC0gVGhlIHVzZXIncyBwaG9uZSBudW1iZXIgaW4gRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAqIEBwYXJhbSBhcHBWZXJpZmllciAtIFRoZSB7QGxpbmsgQXBwbGljYXRpb25WZXJpZmllcn0uXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyKHVzZXIsIHBob25lTnVtYmVyLCBhcHBWZXJpZmllcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBfdmVyaWZ5UGhvbmVOdW1iZXIodXNlckludGVybmFsLmF1dGgsIHBob25lTnVtYmVyLCBnZXRNb2R1bGFySW5zdGFuY2UoYXBwVmVyaWZpZXIpKTtcclxuICAgIHJldHVybiBuZXcgQ29uZmlybWF0aW9uUmVzdWx0SW1wbCh2ZXJpZmljYXRpb25JZCwgY3JlZCA9PiByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHVzZXJJbnRlcm5hbCwgY3JlZCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEgdmVyaWZpY2F0aW9uIElEIHRvIGJlIHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgU01TIGNvZGUgdGhhdCBpcyBzZW50LlxyXG4gKlxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3ZlcmlmeVBob25lTnVtYmVyKGF1dGgsIG9wdGlvbnMsIHZlcmlmaWVyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICBjb25zdCByZWNhcHRjaGFUb2tlbiA9IGF3YWl0IHZlcmlmaWVyLnZlcmlmeSgpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiByZWNhcHRjaGFUb2tlbiA9PT0gJ3N0cmluZycsIGF1dGgsIFwiYXJndW1lbnQtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLkFSR1VNRU5UX0VSUk9SICovKTtcclxuICAgICAgICBfYXNzZXJ0KHZlcmlmaWVyLnR5cGUgPT09IFJFQ0FQVENIQV9WRVJJRklFUl9UWVBFLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgbGV0IHBob25lSW5mb09wdGlvbnM7XHJcbiAgICAgICAgaWYgKHR5cGVvZiBvcHRpb25zID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBwaG9uZUluZm9PcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IG9wdGlvbnNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHBob25lSW5mb09wdGlvbnMgPSBvcHRpb25zO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJ3Nlc3Npb24nIGluIHBob25lSW5mb09wdGlvbnMpIHtcclxuICAgICAgICAgICAgY29uc3Qgc2Vzc2lvbiA9IHBob25lSW5mb09wdGlvbnMuc2Vzc2lvbjtcclxuICAgICAgICAgICAgaWYgKCdwaG9uZU51bWJlcicgaW4gcGhvbmVJbmZvT3B0aW9ucykge1xyXG4gICAgICAgICAgICAgICAgX2Fzc2VydChzZXNzaW9uLnR5cGUgPT09IFwiZW5yb2xsXCIgLyogTXVsdGlGYWN0b3JTZXNzaW9uVHlwZS5FTlJPTEwgKi8sIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRFbnJvbGxQaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWRUb2tlbjogc2Vzc2lvbi5jcmVkZW50aWFsLFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lRW5yb2xsbWVudEluZm86IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVTZXNzaW9uSW5mby5zZXNzaW9uSW5mbztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9hc3NlcnQoc2Vzc2lvbi50eXBlID09PSBcInNpZ25pblwiIC8qIE11bHRpRmFjdG9yU2Vzc2lvblR5cGUuU0lHTl9JTiAqLywgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWZhRW5yb2xsbWVudElkID0gKChfYSA9IHBob25lSW5mb09wdGlvbnMubXVsdGlGYWN0b3JIaW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EudWlkKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHBob25lSW5mb09wdGlvbnMubXVsdGlGYWN0b3JVaWQ7XHJcbiAgICAgICAgICAgICAgICBfYXNzZXJ0KG1mYUVucm9sbG1lbnRJZCwgYXV0aCwgXCJtaXNzaW5nLW11bHRpLWZhY3Rvci1pbmZvXCIgLyogQXV0aEVycm9yQ29kZS5NSVNTSU5HX01GQV9JTkZPICovKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgc3RhcnRTaWduSW5QaG9uZU1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWw6IHNlc3Npb24uY3JlZGVudGlhbCxcclxuICAgICAgICAgICAgICAgICAgICBtZmFFbnJvbGxtZW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcGhvbmVTaWduSW5JbmZvOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY2FwdGNoYVRva2VuXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UucGhvbmVSZXNwb25zZUluZm8uc2Vzc2lvbkluZm87XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHsgc2Vzc2lvbkluZm8gfSA9IGF3YWl0IHNlbmRQaG9uZVZlcmlmaWNhdGlvbkNvZGUoYXV0aCwge1xyXG4gICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHBob25lSW5mb09wdGlvbnMucGhvbmVOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICByZWNhcHRjaGFUb2tlblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25JbmZvO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZpbmFsbHkge1xyXG4gICAgICAgIHZlcmlmaWVyLl9yZXNldCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBVcGRhdGVzIHRoZSB1c2VyJ3MgcGhvbmUgbnVtYmVyLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGF3YWl0IHVwZGF0ZVBob25lTnVtYmVyKHVzZXIsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gY3JlZGVudGlhbCAtIEEgY3JlZGVudGlhbCBhdXRoZW50aWNhdGluZyB0aGUgbmV3IHBob25lIG51bWJlci5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gdXBkYXRlUGhvbmVOdW1iZXIodXNlciwgY3JlZGVudGlhbCkge1xyXG4gICAgYXdhaXQgX2xpbmskMShnZXRNb2R1bGFySW5zdGFuY2UodXNlciksIGNyZWRlbnRpYWwpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhbiB7QGxpbmsgUGhvbmVBdXRoQ3JlZGVudGlhbH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gJ3JlY2FwdGNoYS1jb250YWluZXInIGlzIHRoZSBJRCBvZiBhbiBlbGVtZW50IGluIHRoZSBET00uXHJcbiAqIGNvbnN0IGFwcGxpY2F0aW9uVmVyaWZpZXIgPSBuZXcgUmVjYXB0Y2hhVmVyaWZpZXIoJ3JlY2FwdGNoYS1jb250YWluZXInKTtcclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgUGhvbmVBdXRoUHJvdmlkZXIoYXV0aCk7XHJcbiAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIoJysxNjUwNTU1MDEwMScsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gKiAvLyBPYnRhaW4gdGhlIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICogY29uc3QgcGhvbmVDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gYXdhaXQgc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgcGhvbmVDcmVkZW50aWFsKTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lQXV0aFByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGF1dGggLSBUaGUgRmlyZWJhc2Uge0BsaW5rIEF1dGh9IGluc3RhbmNlIGluIHdoaWNoIHNpZ24taW5zIHNob3VsZCBvY2N1ci5cclxuICAgICAqXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICAvKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcbiAgICAgICAgdGhpcy5wcm92aWRlcklkID0gUGhvbmVBdXRoUHJvdmlkZXIuUFJPVklERVJfSUQ7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogU3RhcnRzIGEgcGhvbmUgbnVtYmVyIGF1dGhlbnRpY2F0aW9uIGZsb3cgYnkgc2VuZGluZyBhIHZlcmlmaWNhdGlvbiBjb2RlIHRvIHRoZSBnaXZlbiBwaG9uZVxyXG4gICAgICogbnVtYmVyLlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBwcm92aWRlciA9IG5ldyBQaG9uZUF1dGhQcm92aWRlcihhdXRoKTtcclxuICAgICAqIGNvbnN0IHZlcmlmaWNhdGlvbklkID0gYXdhaXQgcHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IGF1dGhDcmVkZW50aWFsID0gUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBjb25zdCB1c2VyQ3JlZGVudGlhbCA9IGF3YWl0IHNpZ25JbldpdGhDcmVkZW50aWFsKGF1dGgsIGF1dGhDcmVkZW50aWFsKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSBmbG93IGlzIHByb3ZpZGVkIHVzaW5nIHRoZSBgc2lnbkluV2l0aFBob25lTnVtYmVyYCBtZXRob2QuXHJcbiAgICAgKiBgYGBqYXZhc2NyaXB0XHJcbiAgICAgKiBjb25zdCBjb25maXJtYXRpb25SZXN1bHQgPSBzaWduSW5XaXRoUGhvbmVOdW1iZXIoYXV0aCwgcGhvbmVOdW1iZXIsIGFwcGxpY2F0aW9uVmVyaWZpZXIpO1xyXG4gICAgICogLy8gT2J0YWluIHZlcmlmaWNhdGlvbkNvZGUgZnJvbSB0aGUgdXNlci5cclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gY29uZmlybWF0aW9uUmVzdWx0LmNvbmZpcm0odmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICAgKiBgYGBcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gcGhvbmVJbmZvT3B0aW9ucyAtIFRoZSB1c2VyJ3Mge0BsaW5rIFBob25lSW5mb09wdGlvbnN9LiBUaGUgcGhvbmUgbnVtYmVyIHNob3VsZCBiZSBpblxyXG4gICAgICogRS4xNjQgZm9ybWF0IChlLmcuICsxNjUwNTU1MDEwMSkuXHJcbiAgICAgKiBAcGFyYW0gYXBwbGljYXRpb25WZXJpZmllciAtIEZvciBhYnVzZSBwcmV2ZW50aW9uLCB0aGlzIG1ldGhvZCBhbHNvIHJlcXVpcmVzIGFcclxuICAgICAqIHtAbGluayBBcHBsaWNhdGlvblZlcmlmaWVyfS4gVGhpcyBTREsgaW5jbHVkZXMgYSByZUNBUFRDSEEtYmFzZWQgaW1wbGVtZW50YXRpb24sXHJcbiAgICAgKiB7QGxpbmsgUmVjYXB0Y2hhVmVyaWZpZXJ9LlxyXG4gICAgICpcclxuICAgICAqIEByZXR1cm5zIEEgUHJvbWlzZSBmb3IgYSB2ZXJpZmljYXRpb24gSUQgdGhhdCBjYW4gYmUgcGFzc2VkIHRvXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbH0gdG8gaWRlbnRpZnkgdGhpcyBmbG93Li5cclxuICAgICAqL1xyXG4gICAgdmVyaWZ5UGhvbmVOdW1iZXIocGhvbmVPcHRpb25zLCBhcHBsaWNhdGlvblZlcmlmaWVyKSB7XHJcbiAgICAgICAgcmV0dXJuIF92ZXJpZnlQaG9uZU51bWJlcih0aGlzLmF1dGgsIHBob25lT3B0aW9ucywgZ2V0TW9kdWxhckluc3RhbmNlKGFwcGxpY2F0aW9uVmVyaWZpZXIpKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIHBob25lIGF1dGggY3JlZGVudGlhbCwgZ2l2ZW4gdGhlIHZlcmlmaWNhdGlvbiBJRCBmcm9tXHJcbiAgICAgKiB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9IGFuZCB0aGUgY29kZSB0aGF0IHdhcyBzZW50IHRvIHRoZSB1c2VyJ3NcclxuICAgICAqIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgYXV0aENyZWRlbnRpYWwgPSBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGNvbnN0IHVzZXJDcmVkZW50aWFsID0gc2lnbkluV2l0aENyZWRlbnRpYWwoYXV0aCwgYXV0aENyZWRlbnRpYWwpO1xyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQGV4YW1wbGVcclxuICAgICAqIEFuIGFsdGVybmF0aXZlIGZsb3cgaXMgcHJvdmlkZWQgdXNpbmcgdGhlIGBzaWduSW5XaXRoUGhvbmVOdW1iZXJgIG1ldGhvZC5cclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGNvbnN0IGNvbmZpcm1hdGlvblJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhQaG9uZU51bWJlcihhdXRoLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICAgKiAvLyBPYnRhaW4gdmVyaWZpY2F0aW9uQ29kZSBmcm9tIHRoZSB1c2VyLlxyXG4gICAgICogY29uc3QgdXNlckNyZWRlbnRpYWwgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHQuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB2ZXJpZmljYXRpb25JZCAtIFRoZSB2ZXJpZmljYXRpb24gSUQgcmV0dXJuZWQgZnJvbSB7QGxpbmsgUGhvbmVBdXRoUHJvdmlkZXIudmVyaWZ5UGhvbmVOdW1iZXJ9LlxyXG4gICAgICogQHBhcmFtIHZlcmlmaWNhdGlvbkNvZGUgLSBUaGUgdmVyaWZpY2F0aW9uIGNvZGUgc2VudCB0byB0aGUgdXNlcidzIG1vYmlsZSBkZXZpY2UuXHJcbiAgICAgKlxyXG4gICAgICogQHJldHVybnMgVGhlIGF1dGggcHJvdmlkZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWwodmVyaWZpY2F0aW9uSWQsIHZlcmlmaWNhdGlvbkNvZGUpIHtcclxuICAgICAgICByZXR1cm4gUGhvbmVBdXRoQ3JlZGVudGlhbC5fZnJvbVZlcmlmaWNhdGlvbih2ZXJpZmljYXRpb25JZCwgdmVyaWZpY2F0aW9uQ29kZSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdlbmVyYXRlcyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IGZyb20gYSB7QGxpbmsgVXNlckNyZWRlbnRpYWx9LlxyXG4gICAgICogQHBhcmFtIHVzZXJDcmVkZW50aWFsIC0gVGhlIHVzZXIgY3JlZGVudGlhbC5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tUmVzdWx0KHVzZXJDcmVkZW50aWFsKSB7XHJcbiAgICAgICAgY29uc3QgY3JlZGVudGlhbCA9IHVzZXJDcmVkZW50aWFsO1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhbiB7QGxpbmsgQXV0aENyZWRlbnRpYWx9IHdoZW4gcGFzc2VkIGFuIGVycm9yLlxyXG4gICAgICpcclxuICAgICAqIEByZW1hcmtzXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBtZXRob2Qgd29ya3MgZm9yIGVycm9ycyBsaWtlXHJcbiAgICAgKiBgYXV0aC9hY2NvdW50LWV4aXN0cy13aXRoLWRpZmZlcmVudC1jcmVkZW50aWFsc2AuIFRoaXMgaXMgdXNlZnVsIGZvclxyXG4gICAgICogcmVjb3ZlcmluZyB3aGVuIGF0dGVtcHRpbmcgdG8gc2V0IGEgdXNlcidzIHBob25lIG51bWJlciBidXQgdGhlIG51bWJlclxyXG4gICAgICogaW4gcXVlc3Rpb24gaXMgYWxyZWFkeSB0aWVkIHRvIGFub3RoZXIgYWNjb3VudC4gRm9yIGV4YW1wbGUsIHRoZSBmb2xsb3dpbmdcclxuICAgICAqIGNvZGUgdHJpZXMgdG8gdXBkYXRlIHRoZSBjdXJyZW50IHVzZXIncyBwaG9uZSBudW1iZXIsIGFuZCBpZiB0aGF0XHJcbiAgICAgKiBmYWlscywgbGlua3MgdGhlIHVzZXIgd2l0aCB0aGUgYWNjb3VudCBhc3NvY2lhdGVkIHdpdGggdGhhdCBudW1iZXI6XHJcbiAgICAgKlxyXG4gICAgICogYGBganNcclxuICAgICAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IFBob25lQXV0aFByb3ZpZGVyKGF1dGgpO1xyXG4gICAgICogY29uc3QgdmVyaWZpY2F0aW9uSWQgPSBhd2FpdCBwcm92aWRlci52ZXJpZnlQaG9uZU51bWJlcihudW1iZXIsIHZlcmlmaWVyKTtcclxuICAgICAqIHRyeSB7XHJcbiAgICAgKiAgIGNvbnN0IGNvZGUgPSAnJzsgLy8gUHJvbXB0IHRoZSB1c2VyIGZvciB0aGUgdmVyaWZpY2F0aW9uIGNvZGVcclxuICAgICAqICAgYXdhaXQgdXBkYXRlUGhvbmVOdW1iZXIoXHJcbiAgICAgKiAgICAgICBhdXRoLmN1cnJlbnRVc2VyLFxyXG4gICAgICogICAgICAgUGhvbmVBdXRoUHJvdmlkZXIuY3JlZGVudGlhbCh2ZXJpZmljYXRpb25JZCwgY29kZSkpO1xyXG4gICAgICogfSBjYXRjaCAoZSkge1xyXG4gICAgICogICBpZiAoKGUgYXMgRmlyZWJhc2VFcnJvcik/LmNvZGUgPT09ICdhdXRoL2FjY291bnQtZXhpc3RzLXdpdGgtZGlmZmVyZW50LWNyZWRlbnRpYWwnKSB7XHJcbiAgICAgKiAgICAgY29uc3QgY3JlZCA9IFBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tRXJyb3IoZSk7XHJcbiAgICAgKiAgICAgYXdhaXQgbGlua1dpdGhDcmVkZW50aWFsKGF1dGguY3VycmVudFVzZXIsIGNyZWQpO1xyXG4gICAgICogICB9XHJcbiAgICAgKiB9XHJcbiAgICAgKlxyXG4gICAgICogLy8gQXQgdGhpcyBwb2ludCwgYXV0aC5jdXJyZW50VXNlci5waG9uZU51bWJlciA9PT0gbnVtYmVyLlxyXG4gICAgICogYGBgXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIGVycm9yIC0gVGhlIGVycm9yIHRvIGdlbmVyYXRlIGEgY3JlZGVudGlhbCBmcm9tLlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlZGVudGlhbEZyb21FcnJvcihlcnJvcikge1xyXG4gICAgICAgIHJldHVybiBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsRnJvbVRhZ2dlZE9iamVjdCgoZXJyb3IuY3VzdG9tRGF0YSB8fCB7fSkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGNyZWRlbnRpYWxGcm9tVGFnZ2VkT2JqZWN0KHsgX3Rva2VuUmVzcG9uc2U6IHRva2VuUmVzcG9uc2UgfSkge1xyXG4gICAgICAgIGlmICghdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgeyBwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YgfSA9IHRva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgaWYgKHBob25lTnVtYmVyICYmIHRlbXBvcmFyeVByb29mKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBQaG9uZUF1dGhDcmVkZW50aWFsLl9mcm9tVG9rZW5SZXNwb25zZShwaG9uZU51bWJlciwgdGVtcG9yYXJ5UHJvb2YpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxyXG4vKiogQWx3YXlzIHNldCB0byB7QGxpbmsgUHJvdmlkZXJJZH0uUEhPTkUuICovXHJcblBob25lQXV0aFByb3ZpZGVyLlBST1ZJREVSX0lEID0gXCJwaG9uZVwiIC8qIFByb3ZpZGVySWQuUEhPTkUgKi87XHJcbi8qKiBBbHdheXMgc2V0IHRvIHtAbGluayBTaWduSW5NZXRob2R9LlBIT05FLiAqL1xyXG5QaG9uZUF1dGhQcm92aWRlci5QSE9ORV9TSUdOX0lOX01FVEhPRCA9IFwicGhvbmVcIiAvKiBTaWduSW5NZXRob2QuUEhPTkUgKi87XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBDaG9vc2VzIGEgcG9wdXAvcmVkaXJlY3QgcmVzb2x2ZXIgdG8gdXNlLiBUaGlzIHByZWZlcnMgdGhlIG92ZXJyaWRlICh3aGljaFxyXG4gKiBpcyBkaXJlY3RseSBwYXNzZWQgaW4pLCBhbmQgZmFsbHMgYmFjayB0byB0aGUgcHJvcGVydHkgc2V0IG9uIHRoZSBhdXRoXHJcbiAqIG9iamVjdC4gSWYgbmVpdGhlciBhcmUgYXZhaWxhYmxlLCB0aGlzIGZ1bmN0aW9uIGVycm9ycyB3LyBhbiBhcmd1bWVudCBlcnJvci5cclxuICovXHJcbmZ1bmN0aW9uIF93aXRoRGVmYXVsdFJlc29sdmVyKGF1dGgsIHJlc29sdmVyT3ZlcnJpZGUpIHtcclxuICAgIGlmIChyZXNvbHZlck92ZXJyaWRlKSB7XHJcbiAgICAgICAgcmV0dXJuIF9nZXRJbnN0YW5jZShyZXNvbHZlck92ZXJyaWRlKTtcclxuICAgIH1cclxuICAgIF9hc3NlcnQoYXV0aC5fcG9wdXBSZWRpcmVjdFJlc29sdmVyLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICByZXR1cm4gYXV0aC5fcG9wdXBSZWRpcmVjdFJlc29sdmVyO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIElkcENyZWRlbnRpYWwgZXh0ZW5kcyBBdXRoQ3JlZGVudGlhbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcclxuICAgICAgICBzdXBlcihcImN1c3RvbVwiIC8qIFByb3ZpZGVySWQuQ1VTVE9NICovLCBcImN1c3RvbVwiIC8qIFByb3ZpZGVySWQuQ1VTVE9NICovKTtcclxuICAgICAgICB0aGlzLnBhcmFtcyA9IHBhcmFtcztcclxuICAgIH1cclxuICAgIF9nZXRJZFRva2VuUmVzcG9uc2UoYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBzaWduSW5XaXRoSWRwKGF1dGgsIHRoaXMuX2J1aWxkSWRwUmVxdWVzdCgpKTtcclxuICAgIH1cclxuICAgIF9saW5rVG9JZFRva2VuKGF1dGgsIGlkVG9rZW4pIHtcclxuICAgICAgICByZXR1cm4gc2lnbkluV2l0aElkcChhdXRoLCB0aGlzLl9idWlsZElkcFJlcXVlc3QoaWRUb2tlbikpO1xyXG4gICAgfVxyXG4gICAgX2dldFJlYXV0aGVudGljYXRpb25SZXNvbHZlcihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHNpZ25JbldpdGhJZHAoYXV0aCwgdGhpcy5fYnVpbGRJZHBSZXF1ZXN0KCkpO1xyXG4gICAgfVxyXG4gICAgX2J1aWxkSWRwUmVxdWVzdChpZFRva2VuKSB7XHJcbiAgICAgICAgY29uc3QgcmVxdWVzdCA9IHtcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdGhpcy5wYXJhbXMucmVxdWVzdFVyaSxcclxuICAgICAgICAgICAgc2Vzc2lvbklkOiB0aGlzLnBhcmFtcy5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgIHBvc3RCb2R5OiB0aGlzLnBhcmFtcy5wb3N0Qm9keSxcclxuICAgICAgICAgICAgdGVuYW50SWQ6IHRoaXMucGFyYW1zLnRlbmFudElkLFxyXG4gICAgICAgICAgICBwZW5kaW5nVG9rZW46IHRoaXMucGFyYW1zLnBlbmRpbmdUb2tlbixcclxuICAgICAgICAgICAgcmV0dXJuU2VjdXJlVG9rZW46IHRydWUsXHJcbiAgICAgICAgICAgIHJldHVybklkcENyZWRlbnRpYWw6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmIChpZFRva2VuKSB7XHJcbiAgICAgICAgICAgIHJlcXVlc3QuaWRUb2tlbiA9IGlkVG9rZW47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXF1ZXN0O1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIF9zaWduSW4ocGFyYW1zKSB7XHJcbiAgICByZXR1cm4gX3NpZ25JbldpdGhDcmVkZW50aWFsKHBhcmFtcy5hdXRoLCBuZXcgSWRwQ3JlZGVudGlhbChwYXJhbXMpLCBwYXJhbXMuYnlwYXNzQXV0aFN0YXRlKTtcclxufVxyXG5mdW5jdGlvbiBfcmVhdXRoKHBhcmFtcykge1xyXG4gICAgY29uc3QgeyBhdXRoLCB1c2VyIH0gPSBwYXJhbXM7XHJcbiAgICBfYXNzZXJ0KHVzZXIsIGF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGUodXNlciwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2xpbmsocGFyYW1zKSB7XHJcbiAgICBjb25zdCB7IGF1dGgsIHVzZXIgfSA9IHBhcmFtcztcclxuICAgIF9hc3NlcnQodXNlciwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIF9saW5rJDEodXNlciwgbmV3IElkcENyZWRlbnRpYWwocGFyYW1zKSwgcGFyYW1zLmJ5cGFzc0F1dGhTdGF0ZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKi9cclxuY2xhc3MgQWJzdHJhY3RQb3B1cFJlZGlyZWN0T3BlcmF0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgsIGZpbHRlciwgcmVzb2x2ZXIsIHVzZXIsIGJ5cGFzc0F1dGhTdGF0ZSA9IGZhbHNlKSB7XHJcbiAgICAgICAgdGhpcy5hdXRoID0gYXV0aDtcclxuICAgICAgICB0aGlzLnJlc29sdmVyID0gcmVzb2x2ZXI7XHJcbiAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICB0aGlzLmJ5cGFzc0F1dGhTdGF0ZSA9IGJ5cGFzc0F1dGhTdGF0ZTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlID0gbnVsbDtcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5maWx0ZXIgPSBBcnJheS5pc0FycmF5KGZpbHRlcikgPyBmaWx0ZXIgOiBbZmlsdGVyXTtcclxuICAgIH1cclxuICAgIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGFzeW5jIChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZSA9IHsgcmVzb2x2ZSwgcmVqZWN0IH07XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlciA9IGF3YWl0IHRoaXMucmVzb2x2ZXIuX2luaXRpYWxpemUodGhpcy5hdXRoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMub25FeGVjdXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VyLnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkF1dGhFdmVudChldmVudCkge1xyXG4gICAgICAgIGNvbnN0IHsgdXJsUmVzcG9uc2UsIHNlc3Npb25JZCwgcG9zdEJvZHksIHRlbmFudElkLCBlcnJvciwgdHlwZSB9ID0gZXZlbnQ7XHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgIGF1dGg6IHRoaXMuYXV0aCxcclxuICAgICAgICAgICAgcmVxdWVzdFVyaTogdXJsUmVzcG9uc2UsXHJcbiAgICAgICAgICAgIHNlc3Npb25JZDogc2Vzc2lvbklkLFxyXG4gICAgICAgICAgICB0ZW5hbnRJZDogdGVuYW50SWQgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICBwb3N0Qm9keTogcG9zdEJvZHkgfHwgdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB1c2VyOiB0aGlzLnVzZXIsXHJcbiAgICAgICAgICAgIGJ5cGFzc0F1dGhTdGF0ZTogdGhpcy5ieXBhc3NBdXRoU3RhdGVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZShhd2FpdCB0aGlzLmdldElkcFRhc2sodHlwZSkocGFyYW1zKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uRXJyb3IoZXJyb3IpIHtcclxuICAgICAgICB0aGlzLnJlamVjdChlcnJvcik7XHJcbiAgICB9XHJcbiAgICBnZXRJZHBUYXNrKHR5cGUpIHtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVBvcHVwXCIgLyogQXV0aEV2ZW50VHlwZS5TSUdOX0lOX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogQXV0aEV2ZW50VHlwZS5TSUdOX0lOX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBfc2lnbkluO1xyXG4gICAgICAgICAgICBjYXNlIFwibGlua1ZpYVBvcHVwXCIgLyogQXV0aEV2ZW50VHlwZS5MSU5LX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuTElOS19WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX2xpbms7XHJcbiAgICAgICAgICAgIGNhc2UgXCJyZWF1dGhWaWFQb3B1cFwiIC8qIEF1dGhFdmVudFR5cGUuUkVBVVRIX1ZJQV9QT1BVUCAqLzpcclxuICAgICAgICAgICAgY2FzZSBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogQXV0aEV2ZW50VHlwZS5SRUFVVEhfVklBX1JFRElSRUNUICovOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIF9yZWF1dGg7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBfZmFpbCh0aGlzLmF1dGgsIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXNvbHZlKGNyZWQpIHtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCh0aGlzLnBlbmRpbmdQcm9taXNlLCAnUGVuZGluZyBwcm9taXNlIHdhcyBuZXZlciBzZXQnKTtcclxuICAgICAgICB0aGlzLnBlbmRpbmdQcm9taXNlLnJlc29sdmUoY3JlZCk7XHJcbiAgICAgICAgdGhpcy51bnJlZ2lzdGVyQW5kQ2xlYW5VcCgpO1xyXG4gICAgfVxyXG4gICAgcmVqZWN0KGVycm9yKSB7XHJcbiAgICAgICAgZGVidWdBc3NlcnQodGhpcy5wZW5kaW5nUHJvbWlzZSwgJ1BlbmRpbmcgcHJvbWlzZSB3YXMgbmV2ZXIgc2V0Jyk7XHJcbiAgICAgICAgdGhpcy5wZW5kaW5nUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xyXG4gICAgICAgIHRoaXMudW5yZWdpc3RlckFuZENsZWFuVXAoKTtcclxuICAgIH1cclxuICAgIHVucmVnaXN0ZXJBbmRDbGVhblVwKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmV2ZW50TWFuYWdlcikge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50TWFuYWdlci51bnJlZ2lzdGVyQ29uc3VtZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMucGVuZGluZ1Byb21pc2UgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuY2xlYW5VcCgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IF9QT0xMX1dJTkRPV19DTE9TRV9USU1FT1VUID0gbmV3IERlbGF5KDIwMDAsIDEwMDAwKTtcclxuLyoqXHJcbiAqIEF1dGhlbnRpY2F0ZXMgYSBGaXJlYmFzZSBjbGllbnQgdXNpbmcgYSBwb3B1cC1iYXNlZCBPQXV0aCBhdXRoZW50aWNhdGlvbiBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiBzdWNjZWVkcywgcmV0dXJucyB0aGUgc2lnbmVkIGluIHVzZXIgYWxvbmcgd2l0aCB0aGUgcHJvdmlkZXIncyBjcmVkZW50aWFsLiBJZiBzaWduIGluIHdhc1xyXG4gKiB1bnN1Y2Nlc3NmdWwsIHJldHVybnMgYW4gZXJyb3Igb2JqZWN0IGNvbnRhaW5pbmcgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZXJyb3IuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKlxyXG4gKiAvLyBUaGUgc2lnbmVkLWluIHVzZXIgaW5mby5cclxuICogY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogY29uc3QgY3JlZGVudGlhbCA9IHByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KGF1dGgsIHJlc3VsdCk7XHJcbiAqIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwYXJhbSBhdXRoIC0gVGhlIHtAbGluayBBdXRofSBpbnN0YW5jZS5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCBhdXRoSW50ZXJuYWwgPSBfY2FzdEF1dGgoYXV0aCk7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZihhdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyKTtcclxuICAgIGNvbnN0IGFjdGlvbiA9IG5ldyBQb3B1cE9wZXJhdGlvbihhdXRoSW50ZXJuYWwsIFwic2lnbkluVmlhUG9wdXBcIiAvKiBBdXRoRXZlbnRUeXBlLlNJR05fSU5fVklBX1BPUFVQICovLCBwcm92aWRlciwgcmVzb2x2ZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIFJlYXV0aGVudGljYXRlcyB0aGUgY3VycmVudCB1c2VyIHdpdGggdGhlIHNwZWNpZmllZCB7QGxpbmsgT0F1dGhQcm92aWRlcn0gdXNpbmcgYSBwb3AtdXAgYmFzZWRcclxuICogT0F1dGggZmxvdy5cclxuICpcclxuICogQHJlbWFya3NcclxuICogSWYgdGhlIHJlYXV0aGVudGljYXRpb24gaXMgc3VjY2Vzc2Z1bCwgdGhlIHJldHVybmVkIHJlc3VsdCB3aWxsIGNvbnRhaW4gdGhlIHVzZXIgYW5kIHRoZVxyXG4gKiBwcm92aWRlcidzIGNyZWRlbnRpYWwuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHBvcHVwLlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoUG9wdXAoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBSZWF1dGhlbnRpY2F0ZSB1c2luZyBhIHBvcHVwLlxyXG4gKiBhd2FpdCByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgY29uc3QgYWN0aW9uID0gbmV3IFBvcHVwT3BlcmF0aW9uKHVzZXJJbnRlcm5hbC5hdXRoLCBcInJlYXV0aFZpYVBvcHVwXCIgLyogQXV0aEV2ZW50VHlwZS5SRUFVVEhfVklBX1BPUFVQICovLCBwcm92aWRlciwgcmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsKTtcclxuICAgIHJldHVybiBhY3Rpb24uZXhlY3V0ZU5vdE51bGwoKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIGF1dGhlbnRpY2F0ZWQgcHJvdmlkZXIgdG8gdGhlIHVzZXIgYWNjb3VudCB1c2luZyBhIHBvcC11cCBiYXNlZCBPQXV0aCBmbG93LlxyXG4gKlxyXG4gKiBAcmVtYXJrc1xyXG4gKiBJZiB0aGUgbGlua2luZyBpcyBzdWNjZXNzZnVsLCB0aGUgcmV0dXJuZWQgcmVzdWx0IHdpbGwgY29udGFpbiB0aGUgdXNlciBhbmQgdGhlIHByb3ZpZGVyJ3MgY3JlZGVudGlhbC5cclxuICpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIHNvbWUgb3RoZXIgcHJvdmlkZXIuXHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGF1dGgsIGVtYWlsLCBwYXNzd29yZCk7XHJcbiAqIC8vIExpbmsgdXNpbmcgYSBwb3B1cC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogYXdhaXQgbGlua1dpdGhQb3B1cChyZXN1bHQudXNlciwgcHJvdmlkZXIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBsaW5rV2l0aFBvcHVwKHVzZXIsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgdXNlckludGVybmFsID0gZ2V0TW9kdWxhckluc3RhbmNlKHVzZXIpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpO1xyXG4gICAgY29uc3QgcmVzb2x2ZXJJbnRlcm5hbCA9IF93aXRoRGVmYXVsdFJlc29sdmVyKHVzZXJJbnRlcm5hbC5hdXRoLCByZXNvbHZlcik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUG9wdXBPcGVyYXRpb24odXNlckludGVybmFsLmF1dGgsIFwibGlua1ZpYVBvcHVwXCIgLyogQXV0aEV2ZW50VHlwZS5MSU5LX1ZJQV9QT1BVUCAqLywgcHJvdmlkZXIsIHJlc29sdmVySW50ZXJuYWwsIHVzZXJJbnRlcm5hbCk7XHJcbiAgICByZXR1cm4gYWN0aW9uLmV4ZWN1dGVOb3ROdWxsKCk7XHJcbn1cclxuLyoqXHJcbiAqIFBvcHVwIGV2ZW50IG1hbmFnZXIuIEhhbmRsZXMgdGhlIHBvcHVwJ3MgZW50aXJlIGxpZmVjeWNsZTsgbGlzdGVucyB0byBhdXRoXHJcbiAqIGV2ZW50c1xyXG4gKlxyXG4gKi9cclxuY2xhc3MgUG9wdXBPcGVyYXRpb24gZXh0ZW5kcyBBYnN0cmFjdFBvcHVwUmVkaXJlY3RPcGVyYXRpb24ge1xyXG4gICAgY29uc3RydWN0b3IoYXV0aCwgZmlsdGVyLCBwcm92aWRlciwgcmVzb2x2ZXIsIHVzZXIpIHtcclxuICAgICAgICBzdXBlcihhdXRoLCBmaWx0ZXIsIHJlc29sdmVyLCB1c2VyKTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVyID0gcHJvdmlkZXI7XHJcbiAgICAgICAgdGhpcy5hdXRoV2luZG93ID0gbnVsbDtcclxuICAgICAgICB0aGlzLnBvbGxJZCA9IG51bGw7XHJcbiAgICAgICAgaWYgKFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbikge1xyXG4gICAgICAgICAgICBQb3B1cE9wZXJhdGlvbi5jdXJyZW50UG9wdXBBY3Rpb24uY2FuY2VsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IHRoaXM7XHJcbiAgICB9XHJcbiAgICBhc3luYyBleGVjdXRlTm90TnVsbCgpIHtcclxuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0aGlzLmV4ZWN1dGUoKTtcclxuICAgICAgICBfYXNzZXJ0KHJlc3VsdCwgdGhpcy5hdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uRXhlY3V0aW9uKCkge1xyXG4gICAgICAgIGRlYnVnQXNzZXJ0KHRoaXMuZmlsdGVyLmxlbmd0aCA9PT0gMSwgJ1BvcHVwIG9wZXJhdGlvbnMgb25seSBoYW5kbGUgb25lIGV2ZW50Jyk7XHJcbiAgICAgICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoKTtcclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cgPSBhd2FpdCB0aGlzLnJlc29sdmVyLl9vcGVuUG9wdXAodGhpcy5hdXRoLCB0aGlzLnByb3ZpZGVyLCB0aGlzLmZpbHRlclswXSwgLy8gVGhlcmUncyBhbHdheXMgb25lLCBzZWUgY29uc3RydWN0b3JcclxuICAgICAgICBldmVudElkKTtcclxuICAgICAgICB0aGlzLmF1dGhXaW5kb3cuYXNzb2NpYXRlZEV2ZW50ID0gZXZlbnRJZDtcclxuICAgICAgICAvLyBDaGVjayBmb3Igd2ViIHN0b3JhZ2Ugc3VwcG9ydCBhbmQgb3JpZ2luIHZhbGlkYXRpb24gX2FmdGVyXyB0aGUgcG9wdXAgaXNcclxuICAgICAgICAvLyBsb2FkZWQuIFRoZXNlIG9wZXJhdGlvbnMgYXJlIHNsb3cgKH4xIHNlY29uZCBvciBzbykgUmF0aGVyIHRoYW5cclxuICAgICAgICAvLyB3YWl0aW5nIG9uIHRoZW0gYmVmb3JlIG9wZW5pbmcgdGhlIHdpbmRvdywgb3B0aW1pc3RpY2FsbHkgb3BlbiB0aGUgcG9wdXBcclxuICAgICAgICAvLyBhbmQgY2hlY2sgZm9yIHN0b3JhZ2Ugc3VwcG9ydCBhdCB0aGUgc2FtZSB0aW1lLiBJZiBzdG9yYWdlIHN1cHBvcnQgaXNcclxuICAgICAgICAvLyBub3QgYXZhaWxhYmxlLCB0aGlzIHdpbGwgY2F1c2UgdGhlIHdob2xlIHRoaW5nIHRvIHJlamVjdCBwcm9wZXJseS4gSXRcclxuICAgICAgICAvLyB3aWxsIGFsc28gY2xvc2UgdGhlIHBvcHVwLCBidXQgc2luY2UgdGhlIHByb21pc2UgaGFzIGFscmVhZHkgcmVqZWN0ZWQsXHJcbiAgICAgICAgLy8gdGhlIHBvcHVwIGNsb3NlZCBieSB1c2VyIHBvbGwgd2lsbCByZWplY3QgaW50byB0aGUgdm9pZC5cclxuICAgICAgICB0aGlzLnJlc29sdmVyLl9vcmlnaW5WYWxpZGF0aW9uKHRoaXMuYXV0aCkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVqZWN0KGUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIuX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZCh0aGlzLmF1dGgsIGlzU3VwcG9ydGVkID0+IHtcclxuICAgICAgICAgICAgaWYgKCFpc1N1cHBvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWplY3QoX2NyZWF0ZUVycm9yKHRoaXMuYXV0aCwgXCJ3ZWItc3RvcmFnZS11bnN1cHBvcnRlZFwiIC8qIEF1dGhFcnJvckNvZGUuV0VCX1NUT1JBR0VfVU5TVVBQT1JURUQgKi8pKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIEhhbmRsZSB1c2VyIGNsb3N1cmUuIE5vdGljZSB0aGlzIGRvZXMgKm5vdCogdXNlIGF3YWl0XHJcbiAgICAgICAgdGhpcy5wb2xsVXNlckNhbmNlbGxhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGV2ZW50SWQoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuYXNzb2NpYXRlZEV2ZW50KSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgY2FuY2VsKCkge1xyXG4gICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwiY2FuY2VsbGVkLXBvcHVwLXJlcXVlc3RcIiAvKiBBdXRoRXJyb3JDb2RlLkVYUElSRURfUE9QVVBfUkVRVUVTVCAqLykpO1xyXG4gICAgfVxyXG4gICAgY2xlYW5VcCgpIHtcclxuICAgICAgICBpZiAodGhpcy5hdXRoV2luZG93KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFdpbmRvdy5jbG9zZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wb2xsSWQpIHtcclxuICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnBvbGxJZCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuYXV0aFdpbmRvdyA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgIFBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBwb2xsVXNlckNhbmNlbGxhdGlvbigpIHtcclxuICAgICAgICBjb25zdCBwb2xsID0gKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iO1xyXG4gICAgICAgICAgICBpZiAoKF9iID0gKF9hID0gdGhpcy5hdXRoV2luZG93KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Eud2luZG93KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuY2xvc2VkKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGVyZSBpcyBzdWZmaWNpZW50IHRpbWUgZm9yIHdoYXRldmVyIGFjdGlvbiB0b1xyXG4gICAgICAgICAgICAgICAgLy8gY29tcGxldGUuIFRoZSB3aW5kb3cgY291bGQgaGF2ZSBjbG9zZWQgYnV0IHRoZSBzaWduIGluIG5ldHdvcmtcclxuICAgICAgICAgICAgICAgIC8vIGNhbGwgY291bGQgc3RpbGwgYmUgaW4gZmxpZ2h0LiBUaGlzIGlzIHNwZWNpZmljYWxseSB0cnVlIGZvclxyXG4gICAgICAgICAgICAgICAgLy8gRmlyZWZveCBvciBpZiB0aGUgb3BlbmVyIGlzIGluIGFuIGlmcmFtZSwgaW4gd2hpY2ggY2FzZSB0aGUgb2F1dGhcclxuICAgICAgICAgICAgICAgIC8vIGhlbHBlciBjbG9zZXMgdGhlIHBvcHVwLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wb2xsSWQgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVqZWN0KF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIFwicG9wdXAtY2xvc2VkLWJ5LXVzZXJcIiAvKiBBdXRoRXJyb3JDb2RlLlBPUFVQX0NMT1NFRF9CWV9VU0VSICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LCA4MDAwIC8qIF9UaW1lb3V0LkFVVEhfRVZFTlQgKi8pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMucG9sbElkID0gd2luZG93LnNldFRpbWVvdXQocG9sbCwgX1BPTExfV0lORE9XX0NMT1NFX1RJTUVPVVQuZ2V0KCkpO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgcG9sbCgpO1xyXG4gICAgfVxyXG59XHJcbi8vIE9ubHkgb25lIHBvcHVwIGlzIGV2ZXIgc2hvd24gYXQgb25jZS4gVGhlIGxpZmVjeWNsZSBvZiB0aGUgY3VycmVudCBwb3B1cFxyXG4vLyBjYW4gYmUgbWFuYWdlZCAvIGNhbmNlbGxlZCBieSB0aGUgY29uc3RydWN0b3IuXHJcblBvcHVwT3BlcmF0aW9uLmN1cnJlbnRQb3B1cEFjdGlvbiA9IG51bGw7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBFTkRJTkdfUkVESVJFQ1RfS0VZID0gJ3BlbmRpbmdSZWRpcmVjdCc7XHJcbi8vIFdlIG9ubHkgZ2V0IG9uZSByZWRpcmVjdCBvdXRjb21lIGZvciBhbnkgb25lIGF1dGgsIHNvIGp1c3Qgc3RvcmUgaXRcclxuLy8gaW4gaGVyZS5cclxuY29uc3QgcmVkaXJlY3RPdXRjb21lTWFwID0gbmV3IE1hcCgpO1xyXG5jbGFzcyBSZWRpcmVjdEFjdGlvbiBleHRlbmRzIEFic3RyYWN0UG9wdXBSZWRpcmVjdE9wZXJhdGlvbiB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCByZXNvbHZlciwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgICAgICBzdXBlcihhdXRoLCBbXHJcbiAgICAgICAgICAgIFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBBdXRoRXZlbnRUeXBlLlNJR05fSU5fVklBX1JFRElSRUNUICovLFxyXG4gICAgICAgICAgICBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuTElOS19WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBBdXRoRXZlbnRUeXBlLlJFQVVUSF9WSUFfUkVESVJFQ1QgKi8sXHJcbiAgICAgICAgICAgIFwidW5rbm93blwiIC8qIEF1dGhFdmVudFR5cGUuVU5LTk9XTiAqL1xyXG4gICAgICAgIF0sIHJlc29sdmVyLCB1bmRlZmluZWQsIGJ5cGFzc0F1dGhTdGF0ZSk7XHJcbiAgICAgICAgdGhpcy5ldmVudElkID0gbnVsbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogT3ZlcnJpZGUgdGhlIGV4ZWN1dGUgZnVuY3Rpb247IGlmIHdlIGFscmVhZHkgaGF2ZSBhIHJlZGlyZWN0IHJlc3VsdCwgdGhlblxyXG4gICAgICoganVzdCByZXR1cm4gaXQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGV4ZWN1dGUoKSB7XHJcbiAgICAgICAgbGV0IHJlYWR5T3V0Y29tZSA9IHJlZGlyZWN0T3V0Y29tZU1hcC5nZXQodGhpcy5hdXRoLl9rZXkoKSk7XHJcbiAgICAgICAgaWYgKCFyZWFkeU91dGNvbWUpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhhc1BlbmRpbmdSZWRpcmVjdCA9IGF3YWl0IF9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyh0aGlzLnJlc29sdmVyLCB0aGlzLmF1dGgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaGFzUGVuZGluZ1JlZGlyZWN0ID8gYXdhaXQgc3VwZXIuZXhlY3V0ZSgpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgIHJlYWR5T3V0Y29tZSA9ICgpID0+IFByb21pc2UucmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICByZWFkeU91dGNvbWUgPSAoKSA9PiBQcm9taXNlLnJlamVjdChlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksIHJlYWR5T3V0Y29tZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIHdlJ3JlIG5vdCBieXBhc3NpbmcgYXV0aCBzdGF0ZSwgdGhlIHJlYWR5IG91dGNvbWUgc2hvdWxkIGJlIHNldCB0b1xyXG4gICAgICAgIC8vIG51bGwuXHJcbiAgICAgICAgaWYgKCF0aGlzLmJ5cGFzc0F1dGhTdGF0ZSkge1xyXG4gICAgICAgICAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KHRoaXMuYXV0aC5fa2V5KCksICgpID0+IFByb21pc2UucmVzb2x2ZShudWxsKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZWFkeU91dGNvbWUoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIG9uQXV0aEV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09IFwic2lnbkluVmlhUmVkaXJlY3RcIiAvKiBBdXRoRXZlbnRUeXBlLlNJR05fSU5fVklBX1JFRElSRUNUICovKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdXBlci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGV2ZW50LnR5cGUgPT09IFwidW5rbm93blwiIC8qIEF1dGhFdmVudFR5cGUuVU5LTk9XTiAqLykge1xyXG4gICAgICAgICAgICAvLyBUaGlzIGlzIGEgc2VudGluZWwgdmFsdWUgaW5kaWNhdGluZyB0aGVyZSdzIG5vIHBlbmRpbmcgcmVkaXJlY3RcclxuICAgICAgICAgICAgdGhpcy5yZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChldmVudC5ldmVudElkKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCB0aGlzLmF1dGguX3JlZGlyZWN0VXNlckZvcklkKGV2ZW50LmV2ZW50SWQpO1xyXG4gICAgICAgICAgICBpZiAodXNlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51c2VyID0gdXNlcjtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdXBlci5vbkF1dGhFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBhc3luYyBvbkV4ZWN1dGlvbigpIHsgfVxyXG4gICAgY2xlYW5VcCgpIHsgfVxyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRBbmRDbGVhclBlbmRpbmdSZWRpcmVjdFN0YXR1cyhyZXNvbHZlciwgYXV0aCkge1xyXG4gICAgY29uc3Qga2V5ID0gcGVuZGluZ1JlZGlyZWN0S2V5KGF1dGgpO1xyXG4gICAgY29uc3QgcGVyc2lzdGVuY2UgPSByZXNvbHZlclBlcnNpc3RlbmNlKHJlc29sdmVyKTtcclxuICAgIGlmICghKGF3YWl0IHBlcnNpc3RlbmNlLl9pc0F2YWlsYWJsZSgpKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGNvbnN0IGhhc1BlbmRpbmdSZWRpcmVjdCA9IChhd2FpdCBwZXJzaXN0ZW5jZS5fZ2V0KGtleSkpID09PSAndHJ1ZSc7XHJcbiAgICBhd2FpdCBwZXJzaXN0ZW5jZS5fcmVtb3ZlKGtleSk7XHJcbiAgICByZXR1cm4gaGFzUGVuZGluZ1JlZGlyZWN0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXIsIGF1dGgpIHtcclxuICAgIHJldHVybiByZXNvbHZlclBlcnNpc3RlbmNlKHJlc29sdmVyKS5fc2V0KHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKSwgJ3RydWUnKTtcclxufVxyXG5mdW5jdGlvbiBfY2xlYXJSZWRpcmVjdE91dGNvbWVzKCkge1xyXG4gICAgcmVkaXJlY3RPdXRjb21lTWFwLmNsZWFyKCk7XHJcbn1cclxuZnVuY3Rpb24gX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzdWx0KSB7XHJcbiAgICByZWRpcmVjdE91dGNvbWVNYXAuc2V0KGF1dGguX2tleSgpLCByZXN1bHQpO1xyXG59XHJcbmZ1bmN0aW9uIHJlc29sdmVyUGVyc2lzdGVuY2UocmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UocmVzb2x2ZXIuX3JlZGlyZWN0UGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlbmRpbmdSZWRpcmVjdEtleShhdXRoKSB7XHJcbiAgICByZXR1cm4gX3BlcnNpc3RlbmNlS2V5TmFtZShQRU5ESU5HX1JFRElSRUNUX0tFWSwgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBdXRoZW50aWNhdGVzIGEgRmlyZWJhc2UgY2xpZW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGhhbmRsZSB0aGUgcmVzdWx0cyBhbmQgZXJyb3JzIGZvciB0aGlzIG9wZXJhdGlvbiwgcmVmZXIgdG8ge0BsaW5rIGdldFJlZGlyZWN0UmVzdWx0fS5cclxuICogRm9sbG93IHRoZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYXV0aC93ZWIvcmVkaXJlY3QtYmVzdC1wcmFjdGljZXNcclxuICogfCBiZXN0IHByYWN0aWNlc30gd2hlbiB1c2luZyB7QGxpbmsgc2lnbkluV2l0aFJlZGlyZWN0fS5cclxuICpcclxuICogQGV4YW1wbGVcclxuICogYGBgamF2YXNjcmlwdFxyXG4gKiAvLyBTaWduIGluIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIC8vIFlvdSBjYW4gYWRkIGFkZGl0aW9uYWwgc2NvcGVzIHRvIHRoZSBwcm92aWRlcjpcclxuICogcHJvdmlkZXIuYWRkU2NvcGUoJ3VzZXJfYmlydGhkYXknKTtcclxuICogLy8gU3RhcnQgYSBzaWduIGluIHByb2Nlc3MgZm9yIGFuIHVuYXV0aGVudGljYXRlZCB1c2VyLlxyXG4gKiBhd2FpdCBzaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIpO1xyXG4gKiAvLyBUaGlzIHdpbGwgdHJpZ2dlciBhIGZ1bGwgcGFnZSByZWRpcmVjdCBhd2F5IGZyb20geW91ciBhcHBcclxuICpcclxuICogLy8gQWZ0ZXIgcmV0dXJuaW5nIGZyb20gdGhlIHJlZGlyZWN0IHdoZW4geW91ciBhcHAgaW5pdGlhbGl6ZXMgeW91IGNhbiBvYnRhaW4gdGhlIHJlc3VsdFxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBnZXRSZWRpcmVjdFJlc3VsdChhdXRoKTtcclxuICogaWYgKHJlc3VsdCkge1xyXG4gKiAgIC8vIFRoaXMgaXMgdGhlIHNpZ25lZC1pbiB1c2VyXHJcbiAqICAgY29uc3QgdXNlciA9IHJlc3VsdC51c2VyO1xyXG4gKiAgIC8vIFRoaXMgZ2l2ZXMgeW91IGEgRmFjZWJvb2sgQWNjZXNzIFRva2VuLlxyXG4gKiAgIGNvbnN0IGNyZWRlbnRpYWwgPSBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChhdXRoLCByZXN1bHQpO1xyXG4gKiAgIGNvbnN0IHRva2VuID0gY3JlZGVudGlhbC5hY2Nlc3NUb2tlbjtcclxuICogfVxyXG4gKiAvLyBBcyB0aGlzIEFQSSBjYW4gYmUgdXNlZCBmb3Igc2lnbi1pbiwgbGlua2luZyBhbmQgcmVhdXRoZW50aWNhdGlvbixcclxuICogLy8gY2hlY2sgdGhlIG9wZXJhdGlvblR5cGUgdG8gZGV0ZXJtaW5lIHdoYXQgdHJpZ2dlcmVkIHRoaXMgcmVkaXJlY3RcclxuICogLy8gb3BlcmF0aW9uLlxyXG4gKiBjb25zdCBvcGVyYXRpb25UeXBlID0gcmVzdWx0Lm9wZXJhdGlvblR5cGU7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gYXV0aCAtIFRoZSB7QGxpbmsgQXV0aH0gaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBwcm92aWRlciAtIFRoZSBwcm92aWRlciB0byBhdXRoZW50aWNhdGUuIFRoZSBwcm92aWRlciBoYXMgdG8gYmUgYW4ge0BsaW5rIE9BdXRoUHJvdmlkZXJ9LlxyXG4gKiBOb24tT0F1dGggcHJvdmlkZXJzIGxpa2Uge0BsaW5rIEVtYWlsQXV0aFByb3ZpZGVyfSB3aWxsIHRocm93IGFuIGVycm9yLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgcmV0dXJuIF9zaWduSW5XaXRoUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCByZXNvbHZlcikge1xyXG4gICAgY29uc3QgYXV0aEludGVybmFsID0gX2Nhc3RBdXRoKGF1dGgpO1xyXG4gICAgX2Fzc2VydEluc3RhbmNlT2YoYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICAvLyBXYWl0IGZvciBhdXRoIGluaXRpYWxpemF0aW9uIHRvIGNvbXBsZXRlLCB0aGlzIHdpbGwgcHJvY2VzcyBwZW5kaW5nIHJlZGlyZWN0cyBhbmQgY2xlYXIgdGhlXHJcbiAgICAvLyBQRU5ESU5HX1JFRElSRUNUX0tFWSBpbiBwZXJzaXN0ZW5jZS4gVGhpcyBzaG91bGQgYmUgY29tcGxldGVkIGJlZm9yZSBzdGFydGluZyBhIG5ld1xyXG4gICAgLy8gcmVkaXJlY3QgYW5kIGNyZWF0aW5nIGEgUEVORElOR19SRURJUkVDVF9LRVkgZW50cnkuXHJcbiAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcihhdXRoSW50ZXJuYWwsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXJJbnRlcm5hbCwgYXV0aEludGVybmFsKTtcclxuICAgIHJldHVybiByZXNvbHZlckludGVybmFsLl9vcGVuUmVkaXJlY3QoYXV0aEludGVybmFsLCBwcm92aWRlciwgXCJzaWduSW5WaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuU0lHTl9JTl9WSUFfUkVESVJFQ1QgKi8pO1xyXG59XHJcbi8qKlxyXG4gKiBSZWF1dGhlbnRpY2F0ZXMgdGhlIGN1cnJlbnQgdXNlciB3aXRoIHRoZSBzcGVjaWZpZWQge0BsaW5rIE9BdXRoUHJvdmlkZXJ9IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGhhbmRsZSB0aGUgcmVzdWx0cyBhbmQgZXJyb3JzIGZvciB0aGlzIG9wZXJhdGlvbiwgcmVmZXIgdG8ge0BsaW5rIGdldFJlZGlyZWN0UmVzdWx0fS5cclxuICogRm9sbG93IHRoZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYXV0aC93ZWIvcmVkaXJlY3QtYmVzdC1wcmFjdGljZXNcclxuICogfCBiZXN0IHByYWN0aWNlc30gd2hlbiB1c2luZyB7QGxpbmsgcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3R9LlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFNpZ24gaW4gdXNpbmcgYSByZWRpcmVjdC5cclxuICogY29uc3QgcHJvdmlkZXIgPSBuZXcgRmFjZWJvb2tBdXRoUHJvdmlkZXIoKTtcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIC8vIFJlYXV0aGVudGljYXRlIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGF3YWl0IHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHJlc3VsdC51c2VyLCBwcm92aWRlcik7XHJcbiAqIC8vIFRoaXMgd2lsbCBhZ2FpbiB0cmlnZ2VyIGEgZnVsbCBwYWdlIHJlZGlyZWN0IGF3YXkgZnJvbSB5b3VyIGFwcFxyXG4gKlxyXG4gKiAvLyBBZnRlciByZXR1cm5pbmcgZnJvbSB0aGUgcmVkaXJlY3Qgd2hlbiB5b3VyIGFwcCBpbml0aWFsaXplcyB5b3UgY2FuIG9idGFpbiB0aGUgcmVzdWx0XHJcbiAqIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdldFJlZGlyZWN0UmVzdWx0KGF1dGgpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlci5cclxuICogQHBhcmFtIHByb3ZpZGVyIC0gVGhlIHByb3ZpZGVyIHRvIGF1dGhlbnRpY2F0ZS4gVGhlIHByb3ZpZGVyIGhhcyB0byBiZSBhbiB7QGxpbmsgT0F1dGhQcm92aWRlcn0uXHJcbiAqIE5vbi1PQXV0aCBwcm92aWRlcnMgbGlrZSB7QGxpbmsgRW1haWxBdXRoUHJvdmlkZXJ9IHdpbGwgdGhyb3cgYW4gZXJyb3IuXHJcbiAqIEBwYXJhbSByZXNvbHZlciAtIEFuIGluc3RhbmNlIG9mIHtAbGluayBQb3B1cFJlZGlyZWN0UmVzb2x2ZXJ9LCBvcHRpb25hbFxyXG4gKiBpZiBhbHJlYWR5IHN1cHBsaWVkIHRvIHtAbGluayBpbml0aWFsaXplQXV0aH0gb3IgcHJvdmlkZWQgYnkge0BsaW5rIGdldEF1dGh9LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIHJldHVybiBfcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfcmVhdXRoZW50aWNhdGVXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICBjb25zdCB1c2VySW50ZXJuYWwgPSBnZXRNb2R1bGFySW5zdGFuY2UodXNlcik7XHJcbiAgICBfYXNzZXJ0SW5zdGFuY2VPZih1c2VySW50ZXJuYWwuYXV0aCwgcHJvdmlkZXIsIEZlZGVyYXRlZEF1dGhQcm92aWRlcik7XHJcbiAgICAvLyBXYWl0IGZvciBhdXRoIGluaXRpYWxpemF0aW9uIHRvIGNvbXBsZXRlLCB0aGlzIHdpbGwgcHJvY2VzcyBwZW5kaW5nIHJlZGlyZWN0cyBhbmQgY2xlYXIgdGhlXHJcbiAgICAvLyBQRU5ESU5HX1JFRElSRUNUX0tFWSBpbiBwZXJzaXN0ZW5jZS4gVGhpcyBzaG91bGQgYmUgY29tcGxldGVkIGJlZm9yZSBzdGFydGluZyBhIG5ld1xyXG4gICAgLy8gcmVkaXJlY3QgYW5kIGNyZWF0aW5nIGEgUEVORElOR19SRURJUkVDVF9LRVkgZW50cnkuXHJcbiAgICBhd2FpdCB1c2VySW50ZXJuYWwuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgLy8gQWxsb3cgdGhlIHJlc29sdmVyIHRvIGVycm9yIGJlZm9yZSBwZXJzaXN0aW5nIHRoZSByZWRpcmVjdCB1c2VyXHJcbiAgICBjb25zdCByZXNvbHZlckludGVybmFsID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIodXNlckludGVybmFsLmF1dGgsIHJlc29sdmVyKTtcclxuICAgIGF3YWl0IF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsLmF1dGgpO1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IGF3YWl0IHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlckludGVybmFsKTtcclxuICAgIHJldHVybiByZXNvbHZlckludGVybmFsLl9vcGVuUmVkaXJlY3QodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBcInJlYXV0aFZpYVJlZGlyZWN0XCIgLyogQXV0aEV2ZW50VHlwZS5SRUFVVEhfVklBX1JFRElSRUNUICovLCBldmVudElkKTtcclxufVxyXG4vKipcclxuICogTGlua3MgdGhlIHtAbGluayBPQXV0aFByb3ZpZGVyfSB0byB0aGUgdXNlciBhY2NvdW50IHVzaW5nIGEgZnVsbC1wYWdlIHJlZGlyZWN0IGZsb3cuXHJcbiAqIEByZW1hcmtzXHJcbiAqIFRvIGhhbmRsZSB0aGUgcmVzdWx0cyBhbmQgZXJyb3JzIGZvciB0aGlzIG9wZXJhdGlvbiwgcmVmZXIgdG8ge0BsaW5rIGdldFJlZGlyZWN0UmVzdWx0fS5cclxuICogRm9sbG93IHRoZSB7QGxpbmsgaHR0cHM6Ly9maXJlYmFzZS5nb29nbGUuY29tL2RvY3MvYXV0aC93ZWIvcmVkaXJlY3QtYmVzdC1wcmFjdGljZXNcclxuICogfCBiZXN0IHByYWN0aWNlc30gd2hlbiB1c2luZyB7QGxpbmsgbGlua1dpdGhSZWRpcmVjdH0uXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBzb21lIG90aGVyIHByb3ZpZGVyLlxyXG4gKiBjb25zdCByZXN1bHQgPSBhd2FpdCBzaWduSW5XaXRoRW1haWxBbmRQYXNzd29yZChhdXRoLCBlbWFpbCwgcGFzc3dvcmQpO1xyXG4gKiAvLyBMaW5rIHVzaW5nIGEgcmVkaXJlY3QuXHJcbiAqIGNvbnN0IHByb3ZpZGVyID0gbmV3IEZhY2Vib29rQXV0aFByb3ZpZGVyKCk7XHJcbiAqIGF3YWl0IGxpbmtXaXRoUmVkaXJlY3QocmVzdWx0LnVzZXIsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAcGFyYW0gdXNlciAtIFRoZSB1c2VyLlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgLSBUaGUgcHJvdmlkZXIgdG8gYXV0aGVudGljYXRlLiBUaGUgcHJvdmlkZXIgaGFzIHRvIGJlIGFuIHtAbGluayBPQXV0aFByb3ZpZGVyfS5cclxuICogTm9uLU9BdXRoIHByb3ZpZGVycyBsaWtlIHtAbGluayBFbWFpbEF1dGhQcm92aWRlcn0gd2lsbCB0aHJvdyBhbiBlcnJvci5cclxuICogQHBhcmFtIHJlc29sdmVyIC0gQW4gaW5zdGFuY2Ugb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0sIG9wdGlvbmFsXHJcbiAqIGlmIGFscmVhZHkgc3VwcGxpZWQgdG8ge0BsaW5rIGluaXRpYWxpemVBdXRofSBvciBwcm92aWRlZCBieSB7QGxpbmsgZ2V0QXV0aH0uXHJcbiAqXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmZ1bmN0aW9uIGxpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKSB7XHJcbiAgICByZXR1cm4gX2xpbmtXaXRoUmVkaXJlY3QodXNlciwgcHJvdmlkZXIsIHJlc29sdmVyKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfbGlua1dpdGhSZWRpcmVjdCh1c2VyLCBwcm92aWRlciwgcmVzb2x2ZXIpIHtcclxuICAgIGNvbnN0IHVzZXJJbnRlcm5hbCA9IGdldE1vZHVsYXJJbnN0YW5jZSh1c2VyKTtcclxuICAgIF9hc3NlcnRJbnN0YW5jZU9mKHVzZXJJbnRlcm5hbC5hdXRoLCBwcm92aWRlciwgRmVkZXJhdGVkQXV0aFByb3ZpZGVyKTtcclxuICAgIC8vIFdhaXQgZm9yIGF1dGggaW5pdGlhbGl6YXRpb24gdG8gY29tcGxldGUsIHRoaXMgd2lsbCBwcm9jZXNzIHBlbmRpbmcgcmVkaXJlY3RzIGFuZCBjbGVhciB0aGVcclxuICAgIC8vIFBFTkRJTkdfUkVESVJFQ1RfS0VZIGluIHBlcnNpc3RlbmNlLiBUaGlzIHNob3VsZCBiZSBjb21wbGV0ZWQgYmVmb3JlIHN0YXJ0aW5nIGEgbmV3XHJcbiAgICAvLyByZWRpcmVjdCBhbmQgY3JlYXRpbmcgYSBQRU5ESU5HX1JFRElSRUNUX0tFWSBlbnRyeS5cclxuICAgIGF3YWl0IHVzZXJJbnRlcm5hbC5hdXRoLl9pbml0aWFsaXphdGlvblByb21pc2U7XHJcbiAgICAvLyBBbGxvdyB0aGUgcmVzb2x2ZXIgdG8gZXJyb3IgYmVmb3JlIHBlcnNpc3RpbmcgdGhlIHJlZGlyZWN0IHVzZXJcclxuICAgIGNvbnN0IHJlc29sdmVySW50ZXJuYWwgPSBfd2l0aERlZmF1bHRSZXNvbHZlcih1c2VySW50ZXJuYWwuYXV0aCwgcmVzb2x2ZXIpO1xyXG4gICAgYXdhaXQgX2Fzc2VydExpbmtlZFN0YXR1cyhmYWxzZSwgdXNlckludGVybmFsLCBwcm92aWRlci5wcm92aWRlcklkKTtcclxuICAgIGF3YWl0IF9zZXRQZW5kaW5nUmVkaXJlY3RTdGF0dXMocmVzb2x2ZXJJbnRlcm5hbCwgdXNlckludGVybmFsLmF1dGgpO1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IGF3YWl0IHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlckludGVybmFsKTtcclxuICAgIHJldHVybiByZXNvbHZlckludGVybmFsLl9vcGVuUmVkaXJlY3QodXNlckludGVybmFsLmF1dGgsIHByb3ZpZGVyLCBcImxpbmtWaWFSZWRpcmVjdFwiIC8qIEF1dGhFdmVudFR5cGUuTElOS19WSUFfUkVESVJFQ1QgKi8sIGV2ZW50SWQpO1xyXG59XHJcbi8qKlxyXG4gKiBSZXR1cm5zIGEge0BsaW5rIFVzZXJDcmVkZW50aWFsfSBmcm9tIHRoZSByZWRpcmVjdC1iYXNlZCBzaWduLWluIGZsb3cuXHJcbiAqXHJcbiAqIEByZW1hcmtzXHJcbiAqIElmIHNpZ24taW4gc3VjY2VlZGVkLCByZXR1cm5zIHRoZSBzaWduZWQgaW4gdXNlci4gSWYgc2lnbi1pbiB3YXMgdW5zdWNjZXNzZnVsLCBmYWlscyB3aXRoIGFuXHJcbiAqIGVycm9yLiBJZiBubyByZWRpcmVjdCBvcGVyYXRpb24gd2FzIGNhbGxlZCwgcmV0dXJucyBgbnVsbGAuXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIGBgYGphdmFzY3JpcHRcclxuICogLy8gU2lnbiBpbiB1c2luZyBhIHJlZGlyZWN0LlxyXG4gKiBjb25zdCBwcm92aWRlciA9IG5ldyBGYWNlYm9va0F1dGhQcm92aWRlcigpO1xyXG4gKiAvLyBZb3UgY2FuIGFkZCBhZGRpdGlvbmFsIHNjb3BlcyB0byB0aGUgcHJvdmlkZXI6XHJcbiAqIHByb3ZpZGVyLmFkZFNjb3BlKCd1c2VyX2JpcnRoZGF5Jyk7XHJcbiAqIC8vIFN0YXJ0IGEgc2lnbiBpbiBwcm9jZXNzIGZvciBhbiB1bmF1dGhlbnRpY2F0ZWQgdXNlci5cclxuICogYXdhaXQgc2lnbkluV2l0aFJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyKTtcclxuICogLy8gVGhpcyB3aWxsIHRyaWdnZXIgYSBmdWxsIHBhZ2UgcmVkaXJlY3QgYXdheSBmcm9tIHlvdXIgYXBwXHJcbiAqXHJcbiAqIC8vIEFmdGVyIHJldHVybmluZyBmcm9tIHRoZSByZWRpcmVjdCB3aGVuIHlvdXIgYXBwIGluaXRpYWxpemVzIHlvdSBjYW4gb2J0YWluIHRoZSByZXN1bHRcclxuICogY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCk7XHJcbiAqIGlmIChyZXN1bHQpIHtcclxuICogICAvLyBUaGlzIGlzIHRoZSBzaWduZWQtaW4gdXNlclxyXG4gKiAgIGNvbnN0IHVzZXIgPSByZXN1bHQudXNlcjtcclxuICogICAvLyBUaGlzIGdpdmVzIHlvdSBhIEZhY2Vib29rIEFjY2VzcyBUb2tlbi5cclxuICogICBjb25zdCBjcmVkZW50aWFsID0gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21SZXN1bHQoYXV0aCwgcmVzdWx0KTtcclxuICogICBjb25zdCB0b2tlbiA9IGNyZWRlbnRpYWwuYWNjZXNzVG9rZW47XHJcbiAqIH1cclxuICogLy8gQXMgdGhpcyBBUEkgY2FuIGJlIHVzZWQgZm9yIHNpZ24taW4sIGxpbmtpbmcgYW5kIHJlYXV0aGVudGljYXRpb24sXHJcbiAqIC8vIGNoZWNrIHRoZSBvcGVyYXRpb25UeXBlIHRvIGRldGVybWluZSB3aGF0IHRyaWdnZXJlZCB0aGlzIHJlZGlyZWN0XHJcbiAqIC8vIG9wZXJhdGlvbi5cclxuICogY29uc3Qgb3BlcmF0aW9uVHlwZSA9IHJlc3VsdC5vcGVyYXRpb25UeXBlO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIGF1dGggLSBUaGUge0BsaW5rIEF1dGh9IGluc3RhbmNlLlxyXG4gKiBAcGFyYW0gcmVzb2x2ZXIgLSBBbiBpbnN0YW5jZSBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSwgb3B0aW9uYWxcclxuICogaWYgYWxyZWFkeSBzdXBwbGllZCB0byB7QGxpbmsgaW5pdGlhbGl6ZUF1dGh9IG9yIHByb3ZpZGVkIGJ5IHtAbGluayBnZXRBdXRofS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0UmVkaXJlY3RSZXN1bHQoYXV0aCwgcmVzb2x2ZXIpIHtcclxuICAgIGF3YWl0IF9jYXN0QXV0aChhdXRoKS5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgcmV0dXJuIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlciwgZmFsc2UpO1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRSZWRpcmVjdFJlc3VsdChhdXRoLCByZXNvbHZlckV4dGVybiwgYnlwYXNzQXV0aFN0YXRlID0gZmFsc2UpIHtcclxuICAgIGNvbnN0IGF1dGhJbnRlcm5hbCA9IF9jYXN0QXV0aChhdXRoKTtcclxuICAgIGNvbnN0IHJlc29sdmVyID0gX3dpdGhEZWZhdWx0UmVzb2x2ZXIoYXV0aEludGVybmFsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICBjb25zdCBhY3Rpb24gPSBuZXcgUmVkaXJlY3RBY3Rpb24oYXV0aEludGVybmFsLCByZXNvbHZlciwgYnlwYXNzQXV0aFN0YXRlKTtcclxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFjdGlvbi5leGVjdXRlKCk7XHJcbiAgICBpZiAocmVzdWx0ICYmICFieXBhc3NBdXRoU3RhdGUpIHtcclxuICAgICAgICBkZWxldGUgcmVzdWx0LnVzZXIuX3JlZGlyZWN0RXZlbnRJZDtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3BlcnNpc3RVc2VySWZDdXJyZW50KHJlc3VsdC51c2VyKTtcclxuICAgICAgICBhd2FpdCBhdXRoSW50ZXJuYWwuX3NldFJlZGlyZWN0VXNlcihudWxsLCByZXNvbHZlckV4dGVybik7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0O1xyXG59XHJcbmFzeW5jIGZ1bmN0aW9uIHByZXBhcmVVc2VyRm9yUmVkaXJlY3QodXNlcikge1xyXG4gICAgY29uc3QgZXZlbnRJZCA9IF9nZW5lcmF0ZUV2ZW50SWQoYCR7dXNlci51aWR9Ojo6YCk7XHJcbiAgICB1c2VyLl9yZWRpcmVjdEV2ZW50SWQgPSBldmVudElkO1xyXG4gICAgYXdhaXQgdXNlci5hdXRoLl9zZXRSZWRpcmVjdFVzZXIodXNlcik7XHJcbiAgICBhd2FpdCB1c2VyLmF1dGguX3BlcnNpc3RVc2VySWZDdXJyZW50KHVzZXIpO1xyXG4gICAgcmV0dXJuIGV2ZW50SWQ7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhlIGFtb3VudCBvZiB0aW1lIHRvIHN0b3JlIHRoZSBVSURzIG9mIHNlZW4gZXZlbnRzOyB0aGlzIGlzXHJcbi8vIHNldCB0byAxMCBtaW4gYnkgZGVmYXVsdFxyXG5jb25zdCBFVkVOVF9EVVBMSUNBVElPTl9DQUNIRV9EVVJBVElPTl9NUyA9IDEwICogNjAgKiAxMDAwO1xyXG5jbGFzcyBBdXRoRXZlbnRNYW5hZ2VyIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuY2FjaGVkRXZlbnRVaWRzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzID0gbmV3IFNldCgpO1xyXG4gICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmxhc3RQcm9jZXNzZWRFdmVudFRpbWUgPSBEYXRlLm5vdygpO1xyXG4gICAgfVxyXG4gICAgcmVnaXN0ZXJDb25zdW1lcihhdXRoRXZlbnRDb25zdW1lcikge1xyXG4gICAgICAgIHRoaXMuY29uc3VtZXJzLmFkZChhdXRoRXZlbnRDb25zdW1lcik7XHJcbiAgICAgICAgaWYgKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCAmJlxyXG4gICAgICAgICAgICB0aGlzLmlzRXZlbnRGb3JDb25zdW1lcih0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQsIGF1dGhFdmVudENvbnN1bWVyKSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRUb0NvbnN1bWVyKHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCwgYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnNhdmVFdmVudFRvQ2FjaGUodGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50KTtcclxuICAgICAgICAgICAgdGhpcy5xdWV1ZWRSZWRpcmVjdEV2ZW50ID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1bnJlZ2lzdGVyQ29uc3VtZXIoYXV0aEV2ZW50Q29uc3VtZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnN1bWVycy5kZWxldGUoYXV0aEV2ZW50Q29uc3VtZXIpO1xyXG4gICAgfVxyXG4gICAgb25FdmVudChldmVudCkge1xyXG4gICAgICAgIC8vIENoZWNrIGlmIHRoZSBldmVudCBoYXMgYWxyZWFkeSBiZWVuIGhhbmRsZWRcclxuICAgICAgICBpZiAodGhpcy5oYXNFdmVudEJlZW5IYW5kbGVkKGV2ZW50KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBoYW5kbGVkID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5jb25zdW1lcnMuZm9yRWFjaChjb25zdW1lciA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzRXZlbnRGb3JDb25zdW1lcihldmVudCwgY29uc3VtZXIpKSB7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2VuZFRvQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2F2ZUV2ZW50VG9DYWNoZShldmVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAodGhpcy5oYXNIYW5kbGVkUG90ZW50aWFsUmVkaXJlY3QgfHwgIWlzUmVkaXJlY3RFdmVudChldmVudCkpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UndmUgYWxyZWFkeSBzZWVuIGEgcmVkaXJlY3QgYmVmb3JlLCBvciB0aGlzIGlzIGEgcG9wdXAgZXZlbnQsXHJcbiAgICAgICAgICAgIC8vIGJhaWwgbm93XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGVkO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmhhc0hhbmRsZWRQb3RlbnRpYWxSZWRpcmVjdCA9IHRydWU7XHJcbiAgICAgICAgLy8gSWYgdGhlIHJlZGlyZWN0IHdhc24ndCBoYW5kbGVkLCBoYW5nIG9uIHRvIGl0XHJcbiAgICAgICAgaWYgKCFoYW5kbGVkKSB7XHJcbiAgICAgICAgICAgIHRoaXMucXVldWVkUmVkaXJlY3RFdmVudCA9IGV2ZW50O1xyXG4gICAgICAgICAgICBoYW5kbGVkID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhbmRsZWQ7XHJcbiAgICB9XHJcbiAgICBzZW5kVG9Db25zdW1lcihldmVudCwgY29uc3VtZXIpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgaWYgKGV2ZW50LmVycm9yICYmICFpc051bGxSZWRpcmVjdEV2ZW50KGV2ZW50KSkge1xyXG4gICAgICAgICAgICBjb25zdCBjb2RlID0gKChfYSA9IGV2ZW50LmVycm9yLmNvZGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zcGxpdCgnYXV0aC8nKVsxXSkgfHxcclxuICAgICAgICAgICAgICAgIFwiaW50ZXJuYWwtZXJyb3JcIiAvKiBBdXRoRXJyb3JDb2RlLklOVEVSTkFMX0VSUk9SICovO1xyXG4gICAgICAgICAgICBjb25zdW1lci5vbkVycm9yKF9jcmVhdGVFcnJvcih0aGlzLmF1dGgsIGNvZGUpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN1bWVyLm9uQXV0aEV2ZW50KGV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc0V2ZW50Rm9yQ29uc3VtZXIoZXZlbnQsIGNvbnN1bWVyKSB7XHJcbiAgICAgICAgY29uc3QgZXZlbnRJZE1hdGNoZXMgPSBjb25zdW1lci5ldmVudElkID09PSBudWxsIHx8XHJcbiAgICAgICAgICAgICghIWV2ZW50LmV2ZW50SWQgJiYgZXZlbnQuZXZlbnRJZCA9PT0gY29uc3VtZXIuZXZlbnRJZCk7XHJcbiAgICAgICAgcmV0dXJuIGNvbnN1bWVyLmZpbHRlci5pbmNsdWRlcyhldmVudC50eXBlKSAmJiBldmVudElkTWF0Y2hlcztcclxuICAgIH1cclxuICAgIGhhc0V2ZW50QmVlbkhhbmRsZWQoZXZlbnQpIHtcclxuICAgICAgICBpZiAoRGF0ZS5ub3coKSAtIHRoaXMubGFzdFByb2Nlc3NlZEV2ZW50VGltZSA+PVxyXG4gICAgICAgICAgICBFVkVOVF9EVVBMSUNBVElPTl9DQUNIRV9EVVJBVElPTl9NUykge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlZEV2ZW50VWlkcy5jbGVhcigpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5jYWNoZWRFdmVudFVpZHMuaGFzKGV2ZW50VWlkKGV2ZW50KSk7XHJcbiAgICB9XHJcbiAgICBzYXZlRXZlbnRUb0NhY2hlKGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5jYWNoZWRFdmVudFVpZHMuYWRkKGV2ZW50VWlkKGV2ZW50KSk7XHJcbiAgICAgICAgdGhpcy5sYXN0UHJvY2Vzc2VkRXZlbnRUaW1lID0gRGF0ZS5ub3coKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBldmVudFVpZChlKSB7XHJcbiAgICByZXR1cm4gW2UudHlwZSwgZS5ldmVudElkLCBlLnNlc3Npb25JZCwgZS50ZW5hbnRJZF0uZmlsdGVyKHYgPT4gdikuam9pbignLScpO1xyXG59XHJcbmZ1bmN0aW9uIGlzTnVsbFJlZGlyZWN0RXZlbnQoeyB0eXBlLCBlcnJvciB9KSB7XHJcbiAgICByZXR1cm4gKHR5cGUgPT09IFwidW5rbm93blwiIC8qIEF1dGhFdmVudFR5cGUuVU5LTk9XTiAqLyAmJlxyXG4gICAgICAgIChlcnJvciA9PT0gbnVsbCB8fCBlcnJvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3IuY29kZSkgPT09IGBhdXRoLyR7XCJuby1hdXRoLWV2ZW50XCIgLyogQXV0aEVycm9yQ29kZS5OT19BVVRIX0VWRU5UICovfWApO1xyXG59XHJcbmZ1bmN0aW9uIGlzUmVkaXJlY3RFdmVudChldmVudCkge1xyXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XHJcbiAgICAgICAgY2FzZSBcInNpZ25JblZpYVJlZGlyZWN0XCIgLyogQXV0aEV2ZW50VHlwZS5TSUdOX0lOX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICBjYXNlIFwibGlua1ZpYVJlZGlyZWN0XCIgLyogQXV0aEV2ZW50VHlwZS5MSU5LX1ZJQV9SRURJUkVDVCAqLzpcclxuICAgICAgICBjYXNlIFwicmVhdXRoVmlhUmVkaXJlY3RcIiAvKiBBdXRoRXZlbnRUeXBlLlJFQVVUSF9WSUFfUkVESVJFQ1QgKi86XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIGNhc2UgXCJ1bmtub3duXCIgLyogQXV0aEV2ZW50VHlwZS5VTktOT1dOICovOlxyXG4gICAgICAgICAgICByZXR1cm4gaXNOdWxsUmVkaXJlY3RFdmVudChldmVudCk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9nZXRQcm9qZWN0Q29uZmlnKGF1dGgsIHJlcXVlc3QgPSB7fSkge1xyXG4gICAgcmV0dXJuIF9wZXJmb3JtQXBpUmVxdWVzdChhdXRoLCBcIkdFVFwiIC8qIEh0dHBNZXRob2QuR0VUICovLCBcIi92MS9wcm9qZWN0c1wiIC8qIEVuZHBvaW50LkdFVF9QUk9KRUNUX0NPTkZJRyAqLywgcmVxdWVzdCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgSVBfQUREUkVTU19SRUdFWCA9IC9eXFxkezEsM31cXC5cXGR7MSwzfVxcLlxcZHsxLDN9XFwuXFxkezEsM30kLztcclxuY29uc3QgSFRUUF9SRUdFWCA9IC9eaHR0cHM/LztcclxuYXN5bmMgZnVuY3Rpb24gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpIHtcclxuICAgIC8vIFNraXAgb3JpZ2luIHZhbGlkYXRpb24gaWYgd2UgYXJlIGluIGFuIGVtdWxhdGVkIGVudmlyb25tZW50XHJcbiAgICBpZiAoYXV0aC5jb25maWcuZW11bGF0b3IpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCB7IGF1dGhvcml6ZWREb21haW5zIH0gPSBhd2FpdCBfZ2V0UHJvamVjdENvbmZpZyhhdXRoKTtcclxuICAgIGZvciAoY29uc3QgZG9tYWluIG9mIGF1dGhvcml6ZWREb21haW5zKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKG1hdGNoRG9tYWluKGRvbWFpbikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoX2EpIHtcclxuICAgICAgICAgICAgLy8gRG8gbm90aGluZyBpZiB0aGVyZSdzIGEgVVJMIGVycm9yOyBqdXN0IGNvbnRpbnVlIHNlYXJjaGluZ1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEluIHRoZSBvbGQgU0RLLCB0aGlzIGVycm9yIGFsc28gcHJvdmlkZXMgaGVscGZ1bCBtZXNzYWdlcy5cclxuICAgIF9mYWlsKGF1dGgsIFwidW5hdXRob3JpemVkLWRvbWFpblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9PUklHSU4gKi8pO1xyXG59XHJcbmZ1bmN0aW9uIG1hdGNoRG9tYWluKGV4cGVjdGVkKSB7XHJcbiAgICBjb25zdCBjdXJyZW50VXJsID0gX2dldEN1cnJlbnRVcmwoKTtcclxuICAgIGNvbnN0IHsgcHJvdG9jb2wsIGhvc3RuYW1lIH0gPSBuZXcgVVJMKGN1cnJlbnRVcmwpO1xyXG4gICAgaWYgKGV4cGVjdGVkLnN0YXJ0c1dpdGgoJ2Nocm9tZS1leHRlbnNpb246Ly8nKSkge1xyXG4gICAgICAgIGNvbnN0IGNlVXJsID0gbmV3IFVSTChleHBlY3RlZCk7XHJcbiAgICAgICAgaWYgKGNlVXJsLmhvc3RuYW1lID09PSAnJyAmJiBob3N0bmFtZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgLy8gRm9yIHNvbWUgcmVhc29uIHdlJ3JlIG5vdCBwYXJzaW5nIGNocm9tZSBVUkxzIHByb3Blcmx5XHJcbiAgICAgICAgICAgIHJldHVybiAocHJvdG9jb2wgPT09ICdjaHJvbWUtZXh0ZW5zaW9uOicgJiZcclxuICAgICAgICAgICAgICAgIGV4cGVjdGVkLnJlcGxhY2UoJ2Nocm9tZS1leHRlbnNpb246Ly8nLCAnJykgPT09XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFVybC5yZXBsYWNlKCdjaHJvbWUtZXh0ZW5zaW9uOi8vJywgJycpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHByb3RvY29sID09PSAnY2hyb21lLWV4dGVuc2lvbjonICYmIGNlVXJsLmhvc3RuYW1lID09PSBob3N0bmFtZTtcclxuICAgIH1cclxuICAgIGlmICghSFRUUF9SRUdFWC50ZXN0KHByb3RvY29sKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuICAgIGlmIChJUF9BRERSRVNTX1JFR0VYLnRlc3QoZXhwZWN0ZWQpKSB7XHJcbiAgICAgICAgLy8gVGhlIGRvbWFpbiBoYXMgdG8gYmUgZXhhY3RseSBlcXVhbCB0byB0aGUgcGF0dGVybiwgYXMgYW4gSVAgZG9tYWluIHdpbGxcclxuICAgICAgICAvLyBvbmx5IGNvbnRhaW4gdGhlIElQLCBubyBleHRyYSBjaGFyYWN0ZXIuXHJcbiAgICAgICAgcmV0dXJuIGhvc3RuYW1lID09PSBleHBlY3RlZDtcclxuICAgIH1cclxuICAgIC8vIERvdHMgaW4gcGF0dGVybiBzaG91bGQgYmUgZXNjYXBlZC5cclxuICAgIGNvbnN0IGVzY2FwZWREb21haW5QYXR0ZXJuID0gZXhwZWN0ZWQucmVwbGFjZSgvXFwuL2csICdcXFxcLicpO1xyXG4gICAgLy8gTm9uIGlwIGFkZHJlc3MgZG9tYWlucy5cclxuICAgIC8vIGRvbWFpbi5jb20gPSAqLmRvbWFpbi5jb20gT1IgZG9tYWluLmNvbVxyXG4gICAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKCdeKC4rXFxcXC4nICsgZXNjYXBlZERvbWFpblBhdHRlcm4gKyAnfCcgKyBlc2NhcGVkRG9tYWluUGF0dGVybiArICcpJCcsICdpJyk7XHJcbiAgICByZXR1cm4gcmUudGVzdChob3N0bmFtZSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IE5FVFdPUktfVElNRU9VVCA9IG5ldyBEZWxheSgzMDAwMCwgNjAwMDApO1xyXG4vKipcclxuICogUmVzZXQgdW5sYW9kZWQgR0FwaSBtb2R1bGVzLiBJZiBnYXBpLmxvYWQgZmFpbHMgZHVlIHRvIGEgbmV0d29yayBlcnJvcixcclxuICogaXQgd2lsbCBzdG9wIHdvcmtpbmcgYWZ0ZXIgYSByZXRyaWFsLiBUaGlzIGlzIGEgaGFjayB0byBmaXggdGhpcyBpc3N1ZS5cclxuICovXHJcbmZ1bmN0aW9uIHJlc2V0VW5sb2FkZWRHYXBpTW9kdWxlcygpIHtcclxuICAgIC8vIENsZWFyIGxhc3QgZmFpbGVkIGdhcGkubG9hZCBzdGF0ZSB0byBmb3JjZSBuZXh0IGdhcGkubG9hZCB0byBmaXJzdFxyXG4gICAgLy8gbG9hZCB0aGUgZmFpbGVkIGdhcGkuaWZyYW1lcyBtb2R1bGUuXHJcbiAgICAvLyBHZXQgZ2FwaXguYmVhY29uIGNvbnRleHQuXHJcbiAgICBjb25zdCBiZWFjb24gPSBfd2luZG93KCkuX19fanNsO1xyXG4gICAgLy8gR2V0IGN1cnJlbnQgaGludC5cclxuICAgIGlmIChiZWFjb24gPT09IG51bGwgfHwgYmVhY29uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBiZWFjb24uSCkge1xyXG4gICAgICAgIC8vIEdldCBnYXBpIGhpbnQuXHJcbiAgICAgICAgZm9yIChjb25zdCBoaW50IG9mIE9iamVjdC5rZXlzKGJlYWNvbi5IKSkge1xyXG4gICAgICAgICAgICAvLyBSZXF1ZXN0ZWQgbW9kdWxlcy5cclxuICAgICAgICAgICAgYmVhY29uLkhbaGludF0uciA9IGJlYWNvbi5IW2hpbnRdLnIgfHwgW107XHJcbiAgICAgICAgICAgIC8vIExvYWRlZCBtb2R1bGVzLlxyXG4gICAgICAgICAgICBiZWFjb24uSFtoaW50XS5MID0gYmVhY29uLkhbaGludF0uTCB8fCBbXTtcclxuICAgICAgICAgICAgLy8gU2V0IHJlcXVlc3RlZCBtb2R1bGVzIHRvIGEgY29weSBvZiB0aGUgbG9hZGVkIG1vZHVsZXMuXHJcbiAgICAgICAgICAgIGJlYWNvbi5IW2hpbnRdLnIgPSBbLi4uYmVhY29uLkhbaGludF0uTF07XHJcbiAgICAgICAgICAgIC8vIENsZWFyIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICBpZiAoYmVhY29uLkNQKSB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGJlYWNvbi5DUC5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlbW92ZSBhbGwgZmFpbGVkIHBlbmRpbmcgY2FsbGJhY2tzLlxyXG4gICAgICAgICAgICAgICAgICAgIGJlYWNvbi5DUFtpXSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gbG9hZEdhcGkoYXV0aCkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICB2YXIgX2EsIF9iLCBfYztcclxuICAgICAgICAvLyBGdW5jdGlvbiB0byBydW4gd2hlbiBnYXBpLmxvYWQgaXMgcmVhZHkuXHJcbiAgICAgICAgZnVuY3Rpb24gbG9hZEdhcGlJZnJhbWUoKSB7XHJcbiAgICAgICAgICAgIC8vIFRoZSBkZXZlbG9wZXIgbWF5IGhhdmUgdHJpZWQgdG8gcHJldmlvdXNseSBydW4gZ2FwaS5sb2FkIGFuZCBmYWlsZWQuXHJcbiAgICAgICAgICAgIC8vIFJ1biB0aGlzIHRvIGZpeCB0aGF0LlxyXG4gICAgICAgICAgICByZXNldFVubG9hZGVkR2FwaU1vZHVsZXMoKTtcclxuICAgICAgICAgICAgZ2FwaS5sb2FkKCdnYXBpLmlmcmFtZXMnLCB7XHJcbiAgICAgICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUoZ2FwaS5pZnJhbWVzLmdldENvbnRleHQoKSk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgb250aW1lb3V0OiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGFib3ZlIHJlc2V0IG1heSBiZSBzdWZmaWNpZW50LCBidXQgaGF2aW5nIHRoaXMgcmVzZXQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgICAgICAvLyBmYWlsdXJlIGVuc3VyZXMgdGhhdCBpZiB0aGUgZGV2ZWxvcGVyIGNhbGxzIGdhcGkubG9hZCBhZnRlciB0aGVcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25uZWN0aW9uIGlzIHJlLWVzdGFibGlzaGVkIGFuZCBiZWZvcmUgYW5vdGhlciBhdHRlbXB0IHRvIGVtYmVkXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGlmcmFtZSwgaXQgd291bGQgd29yayBhbmQgd291bGQgbm90IGJlIGJyb2tlbiBiZWNhdXNlIG9mIG91clxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGZhaWxlZCBhdHRlbXB0LlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFRpbWVvdXQgd2hlbiBnYXBpLmlmcmFtZXMuSWZyYW1lIG5vdCBsb2FkZWQuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRVbmxvYWRlZEdhcGlNb2R1bGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KF9jcmVhdGVFcnJvcihhdXRoLCBcIm5ldHdvcmstcmVxdWVzdC1mYWlsZWRcIiAvKiBBdXRoRXJyb3JDb2RlLk5FVFdPUktfUkVRVUVTVF9GQUlMRUQgKi8pKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0aW1lb3V0OiBORVRXT1JLX1RJTUVPVVQuZ2V0KClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgoX2IgPSAoX2EgPSBfd2luZG93KCkuZ2FwaSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmlmcmFtZXMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi5JZnJhbWUpIHtcclxuICAgICAgICAgICAgLy8gSWYgZ2FwaS5pZnJhbWVzLklmcmFtZSBhdmFpbGFibGUsIHJlc29sdmUuXHJcbiAgICAgICAgICAgIHJlc29sdmUoZ2FwaS5pZnJhbWVzLmdldENvbnRleHQoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCEhKChfYyA9IF93aW5kb3coKS5nYXBpKSA9PT0gbnVsbCB8fCBfYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2MubG9hZCkpIHtcclxuICAgICAgICAgICAgLy8gR2FwaSBsb2FkZXIgcmVhZHksIGxvYWQgZ2FwaS5pZnJhbWVzLlxyXG4gICAgICAgICAgICBsb2FkR2FwaUlmcmFtZSgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGEgbmV3IGlmcmFtZSBjYWxsYmFjayB3aGVuIHRoaXMgaXMgY2FsbGVkIHNvIGFzIG5vdCB0byBvdmVyd3JpdGVcclxuICAgICAgICAgICAgLy8gYW55IHByZXZpb3VzIGRlZmluZWQgY2FsbGJhY2suIFRoaXMgaGFwcGVucyBpZiB0aGlzIG1ldGhvZCBpcyBjYWxsZWRcclxuICAgICAgICAgICAgLy8gbXVsdGlwbGUgdGltZXMgaW4gcGFyYWxsZWwgYW5kIGNvdWxkIHJlc3VsdCBpbiB0aGUgbGF0ZXIgY2FsbGJhY2tcclxuICAgICAgICAgICAgLy8gb3ZlcndyaXRpbmcgdGhlIHByZXZpb3VzIG9uZS4gVGhpcyB3b3VsZCBlbmQgdXAgd2l0aCBhIGlmcmFtZVxyXG4gICAgICAgICAgICAvLyB0aW1lb3V0LlxyXG4gICAgICAgICAgICBjb25zdCBjYk5hbWUgPSBfZ2VuZXJhdGVDYWxsYmFja05hbWUoJ2lmcmFtZWZjYicpO1xyXG4gICAgICAgICAgICAvLyBHQXBpIGxvYWRlciBub3QgYXZhaWxhYmxlLCBkeW5hbWljYWxseSBsb2FkIHBsYXRmb3JtLmpzLlxyXG4gICAgICAgICAgICBfd2luZG93KClbY2JOYW1lXSA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEdBcGkgbG9hZGVyIHNob3VsZCBiZSByZWFkeS5cclxuICAgICAgICAgICAgICAgIGlmICghIWdhcGkubG9hZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxvYWRHYXBpSWZyYW1lKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBHYXBpIGxvYWRlciBmYWlsZWQsIHRocm93IGVycm9yLlxyXG4gICAgICAgICAgICAgICAgICAgIHJlamVjdChfY3JlYXRlRXJyb3IoYXV0aCwgXCJuZXR3b3JrLXJlcXVlc3QtZmFpbGVkXCIgLyogQXV0aEVycm9yQ29kZS5ORVRXT1JLX1JFUVVFU1RfRkFJTEVEICovKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIExvYWQgR0FwaSBsb2FkZXIuXHJcbiAgICAgICAgICAgIHJldHVybiBfbG9hZEpTKGBodHRwczovL2FwaXMuZ29vZ2xlLmNvbS9qcy9hcGkuanM/b25sb2FkPSR7Y2JOYW1lfWApXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZSA9PiByZWplY3QoZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH0pLmNhdGNoKGVycm9yID0+IHtcclxuICAgICAgICAvLyBSZXNldCBjYWNoZWQgcHJvbWlzZSB0byBhbGxvdyBmb3IgcmV0cmlhbC5cclxuICAgICAgICBjYWNoZWRHQXBpTG9hZGVyID0gbnVsbDtcclxuICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgIH0pO1xyXG59XHJcbmxldCBjYWNoZWRHQXBpTG9hZGVyID0gbnVsbDtcclxuZnVuY3Rpb24gX2xvYWRHYXBpKGF1dGgpIHtcclxuICAgIGNhY2hlZEdBcGlMb2FkZXIgPSBjYWNoZWRHQXBpTG9hZGVyIHx8IGxvYWRHYXBpKGF1dGgpO1xyXG4gICAgcmV0dXJuIGNhY2hlZEdBcGlMb2FkZXI7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTEMuXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBJTkdfVElNRU9VVCA9IG5ldyBEZWxheSg1MDAwLCAxNTAwMCk7XHJcbmNvbnN0IElGUkFNRV9QQVRIID0gJ19fL2F1dGgvaWZyYW1lJztcclxuY29uc3QgRU1VTEFURURfSUZSQU1FX1BBVEggPSAnZW11bGF0b3IvYXV0aC9pZnJhbWUnO1xyXG5jb25zdCBJRlJBTUVfQVRUUklCVVRFUyA9IHtcclxuICAgIHN0eWxlOiB7XHJcbiAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXHJcbiAgICAgICAgdG9wOiAnLTEwMHB4JyxcclxuICAgICAgICB3aWR0aDogJzFweCcsXHJcbiAgICAgICAgaGVpZ2h0OiAnMXB4J1xyXG4gICAgfSxcclxuICAgICdhcmlhLWhpZGRlbic6ICd0cnVlJyxcclxuICAgIHRhYmluZGV4OiAnLTEnXHJcbn07XHJcbi8vIE1hcCBmcm9tIGFwaUhvc3QgdG8gZW5kcG9pbnQgSUQgZm9yIHBhc3NpbmcgaW50byBpZnJhbWUuIEluIGN1cnJlbnQgU0RLLCBhcGlIb3N0IGNhbiBiZSBzZXQgdG9cclxuLy8gYW55dGhpbmcgKG5vdCBmcm9tIGEgbGlzdCBvZiBlbmRwb2ludHMgd2l0aCBJRHMgYXMgaW4gbGVnYWN5KSwgc28gdGhpcyBpcyB0aGUgY2xvc2VzdCB3ZSBjYW4gZ2V0LlxyXG5jb25zdCBFSURfRlJPTV9BUElIT1NUID0gbmV3IE1hcChbXHJcbiAgICBbXCJpZGVudGl0eXRvb2xraXQuZ29vZ2xlYXBpcy5jb21cIiAvKiBEZWZhdWx0Q29uZmlnLkFQSV9IT1NUICovLCAncCddLFxyXG4gICAgWydzdGFnaW5nLWlkZW50aXR5dG9vbGtpdC5zYW5kYm94Lmdvb2dsZWFwaXMuY29tJywgJ3MnXSxcclxuICAgIFsndGVzdC1pZGVudGl0eXRvb2xraXQuc2FuZGJveC5nb29nbGVhcGlzLmNvbScsICd0J10gLy8gdGVzdFxyXG5dKTtcclxuZnVuY3Rpb24gZ2V0SWZyYW1lVXJsKGF1dGgpIHtcclxuICAgIGNvbnN0IGNvbmZpZyA9IGF1dGguY29uZmlnO1xyXG4gICAgX2Fzc2VydChjb25maWcuYXV0aERvbWFpbiwgYXV0aCwgXCJhdXRoLWRvbWFpbi1jb25maWctcmVxdWlyZWRcIiAvKiBBdXRoRXJyb3JDb2RlLk1JU1NJTkdfQVVUSF9ET01BSU4gKi8pO1xyXG4gICAgY29uc3QgdXJsID0gY29uZmlnLmVtdWxhdG9yXHJcbiAgICAgICAgPyBfZW11bGF0b3JVcmwoY29uZmlnLCBFTVVMQVRFRF9JRlJBTUVfUEFUSClcclxuICAgICAgICA6IGBodHRwczovLyR7YXV0aC5jb25maWcuYXV0aERvbWFpbn0vJHtJRlJBTUVfUEFUSH1gO1xyXG4gICAgY29uc3QgcGFyYW1zID0ge1xyXG4gICAgICAgIGFwaUtleTogY29uZmlnLmFwaUtleSxcclxuICAgICAgICBhcHBOYW1lOiBhdXRoLm5hbWUsXHJcbiAgICAgICAgdjogU0RLX1ZFUlNJT05cclxuICAgIH07XHJcbiAgICBjb25zdCBlaWQgPSBFSURfRlJPTV9BUElIT1NULmdldChhdXRoLmNvbmZpZy5hcGlIb3N0KTtcclxuICAgIGlmIChlaWQpIHtcclxuICAgICAgICBwYXJhbXMuZWlkID0gZWlkO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZnJhbWV3b3JrcyA9IGF1dGguX2dldEZyYW1ld29ya3MoKTtcclxuICAgIGlmIChmcmFtZXdvcmtzLmxlbmd0aCkge1xyXG4gICAgICAgIHBhcmFtcy5mdyA9IGZyYW1ld29ya3Muam9pbignLCcpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIGAke3VybH0/JHtxdWVyeXN0cmluZyhwYXJhbXMpLnNsaWNlKDEpfWA7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX29wZW5JZnJhbWUoYXV0aCkge1xyXG4gICAgY29uc3QgY29udGV4dCA9IGF3YWl0IF9sb2FkR2FwaShhdXRoKTtcclxuICAgIGNvbnN0IGdhcGkgPSBfd2luZG93KCkuZ2FwaTtcclxuICAgIF9hc3NlcnQoZ2FwaSwgYXV0aCwgXCJpbnRlcm5hbC1lcnJvclwiIC8qIEF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgcmV0dXJuIGNvbnRleHQub3Blbih7XHJcbiAgICAgICAgd2hlcmU6IGRvY3VtZW50LmJvZHksXHJcbiAgICAgICAgdXJsOiBnZXRJZnJhbWVVcmwoYXV0aCksXHJcbiAgICAgICAgbWVzc2FnZUhhbmRsZXJzRmlsdGVyOiBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSLFxyXG4gICAgICAgIGF0dHJpYnV0ZXM6IElGUkFNRV9BVFRSSUJVVEVTLFxyXG4gICAgICAgIGRvbnRjbGVhcjogdHJ1ZVxyXG4gICAgfSwgKGlmcmFtZSkgPT4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG4gICAgICAgIGF3YWl0IGlmcmFtZS5yZXN0eWxlKHtcclxuICAgICAgICAgICAgLy8gUHJldmVudCBpZnJhbWUgZnJvbSBjbG9zaW5nIG9uIG1vdXNlIG91dC5cclxuICAgICAgICAgICAgc2V0SGlkZU9uTGVhdmU6IGZhbHNlXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc3QgbmV0d29ya0Vycm9yID0gX2NyZWF0ZUVycm9yKGF1dGgsIFwibmV0d29yay1yZXF1ZXN0LWZhaWxlZFwiIC8qIEF1dGhFcnJvckNvZGUuTkVUV09SS19SRVFVRVNUX0ZBSUxFRCAqLyk7XHJcbiAgICAgICAgLy8gQ29uZmlybSBpZnJhbWUgaXMgY29ycmVjdGx5IGxvYWRlZC5cclxuICAgICAgICAvLyBUbyBmYWxsYmFjayBvbiBmYWlsdXJlLCBzZXQgYSB0aW1lb3V0LlxyXG4gICAgICAgIGNvbnN0IG5ldHdvcmtFcnJvclRpbWVyID0gX3dpbmRvdygpLnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QobmV0d29ya0Vycm9yKTtcclxuICAgICAgICB9LCBQSU5HX1RJTUVPVVQuZ2V0KCkpO1xyXG4gICAgICAgIC8vIENsZWFyIHRpbWVyIGFuZCByZXNvbHZlIHBlbmRpbmcgaWZyYW1lIHJlYWR5IHByb21pc2UuXHJcbiAgICAgICAgZnVuY3Rpb24gY2xlYXJUaW1lckFuZFJlc29sdmUoKSB7XHJcbiAgICAgICAgICAgIF93aW5kb3coKS5jbGVhclRpbWVvdXQobmV0d29ya0Vycm9yVGltZXIpO1xyXG4gICAgICAgICAgICByZXNvbHZlKGlmcmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRoaXMgcmV0dXJucyBhbiBJVGhlbmFibGUuIEhvd2V2ZXIgdGhlIHJlamVjdCBwYXJ0IGRvZXMgbm90IGNhbGxcclxuICAgICAgICAvLyB3aGVuIHRoZSBpZnJhbWUgaXMgbm90IGxvYWRlZC5cclxuICAgICAgICBpZnJhbWUucGluZyhjbGVhclRpbWVyQW5kUmVzb2x2ZSkudGhlbihjbGVhclRpbWVyQW5kUmVzb2x2ZSwgKCkgPT4ge1xyXG4gICAgICAgICAgICByZWplY3QobmV0d29ya0Vycm9yKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQy5cclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgQkFTRV9QT1BVUF9PUFRJT05TID0ge1xyXG4gICAgbG9jYXRpb246ICd5ZXMnLFxyXG4gICAgcmVzaXphYmxlOiAneWVzJyxcclxuICAgIHN0YXR1c2JhcjogJ3llcycsXHJcbiAgICB0b29sYmFyOiAnbm8nXHJcbn07XHJcbmNvbnN0IERFRkFVTFRfV0lEVEggPSA1MDA7XHJcbmNvbnN0IERFRkFVTFRfSEVJR0hUID0gNjAwO1xyXG5jb25zdCBUQVJHRVRfQkxBTksgPSAnX2JsYW5rJztcclxuY29uc3QgRklSRUZPWF9FTVBUWV9VUkwgPSAnaHR0cDovL2xvY2FsaG9zdCc7XHJcbmNsYXNzIEF1dGhQb3B1cCB7XHJcbiAgICBjb25zdHJ1Y3Rvcih3aW5kb3cpIHtcclxuICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcclxuICAgICAgICB0aGlzLmFzc29jaWF0ZWRFdmVudCA9IG51bGw7XHJcbiAgICB9XHJcbiAgICBjbG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy53aW5kb3cpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2luZG93LmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGUpIHsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfb3BlbihhdXRoLCB1cmwsIG5hbWUsIHdpZHRoID0gREVGQVVMVF9XSURUSCwgaGVpZ2h0ID0gREVGQVVMVF9IRUlHSFQpIHtcclxuICAgIGNvbnN0IHRvcCA9IE1hdGgubWF4KCh3aW5kb3cuc2NyZWVuLmF2YWlsSGVpZ2h0IC0gaGVpZ2h0KSAvIDIsIDApLnRvU3RyaW5nKCk7XHJcbiAgICBjb25zdCBsZWZ0ID0gTWF0aC5tYXgoKHdpbmRvdy5zY3JlZW4uYXZhaWxXaWR0aCAtIHdpZHRoKSAvIDIsIDApLnRvU3RyaW5nKCk7XHJcbiAgICBsZXQgdGFyZ2V0ID0gJyc7XHJcbiAgICBjb25zdCBvcHRpb25zID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBCQVNFX1BPUFVQX09QVElPTlMpLCB7IHdpZHRoOiB3aWR0aC50b1N0cmluZygpLCBoZWlnaHQ6IGhlaWdodC50b1N0cmluZygpLCB0b3AsXHJcbiAgICAgICAgbGVmdCB9KTtcclxuICAgIC8vIENocm9tZSBpT1MgNyBhbmQgOCBpcyByZXR1cm5pbmcgYW4gdW5kZWZpbmVkIHBvcHVwIHdpbiB3aGVuIHRhcmdldCBpc1xyXG4gICAgLy8gc3BlY2lmaWVkLCBldmVuIHRob3VnaCB0aGUgcG9wdXAgaXMgbm90IG5lY2Vzc2FyaWx5IGJsb2NrZWQuXHJcbiAgICBjb25zdCB1YSA9IGdldFVBKCkudG9Mb3dlckNhc2UoKTtcclxuICAgIGlmIChuYW1lKSB7XHJcbiAgICAgICAgdGFyZ2V0ID0gX2lzQ2hyb21lSU9TKHVhKSA/IFRBUkdFVF9CTEFOSyA6IG5hbWU7XHJcbiAgICB9XHJcbiAgICBpZiAoX2lzRmlyZWZveCh1YSkpIHtcclxuICAgICAgICAvLyBGaXJlZm94IGNvbXBsYWlucyB3aGVuIGludmFsaWQgVVJMcyBhcmUgcG9wcGVkIG91dC4gSGFja3kgd2F5IHRvIGJ5cGFzcy5cclxuICAgICAgICB1cmwgPSB1cmwgfHwgRklSRUZPWF9FTVBUWV9VUkw7XHJcbiAgICAgICAgLy8gRmlyZWZveCBkaXNhYmxlcyBieSBkZWZhdWx0IHNjcm9sbGluZyBvbiBwb3B1cCB3aW5kb3dzLCB3aGljaCBjYW4gY3JlYXRlXHJcbiAgICAgICAgLy8gaXNzdWVzIHdoZW4gdGhlIHVzZXIgaGFzIG1hbnkgR29vZ2xlIGFjY291bnRzLCBmb3IgaW5zdGFuY2UuXHJcbiAgICAgICAgb3B0aW9ucy5zY3JvbGxiYXJzID0gJ3llcyc7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvcHRpb25zU3RyaW5nID0gT2JqZWN0LmVudHJpZXMob3B0aW9ucykucmVkdWNlKChhY2N1bSwgW2tleSwgdmFsdWVdKSA9PiBgJHthY2N1bX0ke2tleX09JHt2YWx1ZX0sYCwgJycpO1xyXG4gICAgaWYgKF9pc0lPU1N0YW5kYWxvbmUodWEpICYmIHRhcmdldCAhPT0gJ19zZWxmJykge1xyXG4gICAgICAgIG9wZW5Bc05ld1dpbmRvd0lPUyh1cmwgfHwgJycsIHRhcmdldCk7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBBdXRoUG9wdXAobnVsbCk7XHJcbiAgICB9XHJcbiAgICAvLyBhYm91dDpibGFuayBnZXR0aW5nIHNhbml0aXplZCBjYXVzaW5nIGJyb3dzZXJzIGxpa2UgSUUvRWRnZSB0byBkaXNwbGF5XHJcbiAgICAvLyBicmllZiBlcnJvciBtZXNzYWdlIGJlZm9yZSByZWRpcmVjdGluZyB0byBoYW5kbGVyLlxyXG4gICAgY29uc3QgbmV3V2luID0gd2luZG93Lm9wZW4odXJsIHx8ICcnLCB0YXJnZXQsIG9wdGlvbnNTdHJpbmcpO1xyXG4gICAgX2Fzc2VydChuZXdXaW4sIGF1dGgsIFwicG9wdXAtYmxvY2tlZFwiIC8qIEF1dGhFcnJvckNvZGUuUE9QVVBfQkxPQ0tFRCAqLyk7XHJcbiAgICAvLyBGbGFreSBvbiBJRSBlZGdlLCBlbmNhcHN1bGF0ZSB3aXRoIGEgdHJ5IGFuZCBjYXRjaC5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgbmV3V2luLmZvY3VzKCk7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkgeyB9XHJcbiAgICByZXR1cm4gbmV3IEF1dGhQb3B1cChuZXdXaW4pO1xyXG59XHJcbmZ1bmN0aW9uIG9wZW5Bc05ld1dpbmRvd0lPUyh1cmwsIHRhcmdldCkge1xyXG4gICAgY29uc3QgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICBlbC5ocmVmID0gdXJsO1xyXG4gICAgZWwudGFyZ2V0ID0gdGFyZ2V0O1xyXG4gICAgY29uc3QgY2xpY2sgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnTW91c2VFdmVudCcpO1xyXG4gICAgY2xpY2suaW5pdE1vdXNlRXZlbnQoJ2NsaWNrJywgdHJ1ZSwgdHJ1ZSwgd2luZG93LCAxLCAwLCAwLCAwLCAwLCBmYWxzZSwgZmFsc2UsIGZhbHNlLCBmYWxzZSwgMSwgbnVsbCk7XHJcbiAgICBlbC5kaXNwYXRjaEV2ZW50KGNsaWNrKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVVJMIGZvciBBdXRoZW50aWNhdGlvbiB3aWRnZXQgd2hpY2ggd2lsbCBpbml0aWF0ZSB0aGUgT0F1dGggaGFuZHNoYWtlXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuY29uc3QgV0lER0VUX1BBVEggPSAnX18vYXV0aC9oYW5kbGVyJztcclxuLyoqXHJcbiAqIFVSTCBmb3IgZW11bGF0ZWQgZW52aXJvbm1lbnRcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBFTVVMQVRPUl9XSURHRVRfUEFUSCA9ICdlbXVsYXRvci9hdXRoL2hhbmRsZXInO1xyXG4vKipcclxuICogRnJhZ21lbnQgbmFtZSBmb3IgdGhlIEFwcCBDaGVjayB0b2tlbiB0aGF0IGdldHMgcGFzc2VkIHRvIHRoZSB3aWRnZXRcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBGSVJFQkFTRV9BUFBfQ0hFQ0tfRlJBR01FTlRfSUQgPSBlbmNvZGVVUklDb21wb25lbnQoJ2ZhYycpO1xyXG5hc3luYyBmdW5jdGlvbiBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCByZWRpcmVjdFVybCwgZXZlbnRJZCwgYWRkaXRpb25hbFBhcmFtcykge1xyXG4gICAgX2Fzc2VydChhdXRoLmNvbmZpZy5hdXRoRG9tYWluLCBhdXRoLCBcImF1dGgtZG9tYWluLWNvbmZpZy1yZXF1aXJlZFwiIC8qIEF1dGhFcnJvckNvZGUuTUlTU0lOR19BVVRIX0RPTUFJTiAqLyk7XHJcbiAgICBfYXNzZXJ0KGF1dGguY29uZmlnLmFwaUtleSwgYXV0aCwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQVBJX0tFWSAqLyk7XHJcbiAgICBjb25zdCBwYXJhbXMgPSB7XHJcbiAgICAgICAgYXBpS2V5OiBhdXRoLmNvbmZpZy5hcGlLZXksXHJcbiAgICAgICAgYXBwTmFtZTogYXV0aC5uYW1lLFxyXG4gICAgICAgIGF1dGhUeXBlLFxyXG4gICAgICAgIHJlZGlyZWN0VXJsLFxyXG4gICAgICAgIHY6IFNES19WRVJTSU9OLFxyXG4gICAgICAgIGV2ZW50SWRcclxuICAgIH07XHJcbiAgICBpZiAocHJvdmlkZXIgaW5zdGFuY2VvZiBGZWRlcmF0ZWRBdXRoUHJvdmlkZXIpIHtcclxuICAgICAgICBwcm92aWRlci5zZXREZWZhdWx0TGFuZ3VhZ2UoYXV0aC5sYW5ndWFnZUNvZGUpO1xyXG4gICAgICAgIHBhcmFtcy5wcm92aWRlcklkID0gcHJvdmlkZXIucHJvdmlkZXJJZCB8fCAnJztcclxuICAgICAgICBpZiAoIWlzRW1wdHkocHJvdmlkZXIuZ2V0Q3VzdG9tUGFyYW1ldGVycygpKSkge1xyXG4gICAgICAgICAgICBwYXJhbXMuY3VzdG9tUGFyYW1ldGVycyA9IEpTT04uc3RyaW5naWZ5KHByb3ZpZGVyLmdldEN1c3RvbVBhcmFtZXRlcnMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE8gc2V0IGFkZGl0aW9uYWxQYXJhbXMgZnJvbSB0aGUgcHJvdmlkZXIgYXMgd2VsbD9cclxuICAgICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhhZGRpdGlvbmFsUGFyYW1zIHx8IHt9KSkge1xyXG4gICAgICAgICAgICBwYXJhbXNba2V5XSA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChwcm92aWRlciBpbnN0YW5jZW9mIEJhc2VPQXV0aFByb3ZpZGVyKSB7XHJcbiAgICAgICAgY29uc3Qgc2NvcGVzID0gcHJvdmlkZXIuZ2V0U2NvcGVzKCkuZmlsdGVyKHNjb3BlID0+IHNjb3BlICE9PSAnJyk7XHJcbiAgICAgICAgaWYgKHNjb3Blcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHBhcmFtcy5zY29wZXMgPSBzY29wZXMuam9pbignLCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChhdXRoLnRlbmFudElkKSB7XHJcbiAgICAgICAgcGFyYW1zLnRpZCA9IGF1dGgudGVuYW50SWQ7XHJcbiAgICB9XHJcbiAgICAvLyBUT0RPOiBtYXliZSBzZXQgZWlkIGFzIGVuZGlwb2ludElkXHJcbiAgICAvLyBUT0RPOiBtYXliZSBzZXQgZncgYXMgRnJhbWV3b3Jrcy5qb2luKFwiLFwiKVxyXG4gICAgY29uc3QgcGFyYW1zRGljdCA9IHBhcmFtcztcclxuICAgIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHBhcmFtc0RpY3QpKSB7XHJcbiAgICAgICAgaWYgKHBhcmFtc0RpY3Rba2V5XSA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXNEaWN0W2tleV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gU2V0cyB0aGUgQXBwIENoZWNrIHRva2VuIHRvIHBhc3MgdG8gdGhlIHdpZGdldFxyXG4gICAgY29uc3QgYXBwQ2hlY2tUb2tlbiA9IGF3YWl0IGF1dGguX2dldEFwcENoZWNrVG9rZW4oKTtcclxuICAgIGNvbnN0IGFwcENoZWNrVG9rZW5GcmFnbWVudCA9IGFwcENoZWNrVG9rZW5cclxuICAgICAgICA/IGAjJHtGSVJFQkFTRV9BUFBfQ0hFQ0tfRlJBR01FTlRfSUR9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KGFwcENoZWNrVG9rZW4pfWBcclxuICAgICAgICA6ICcnO1xyXG4gICAgLy8gU3RhcnQgYXQgaW5kZXggMSB0byBza2lwIHRoZSBsZWFkaW5nICcmJyBpbiB0aGUgcXVlcnkgc3RyaW5nXHJcbiAgICByZXR1cm4gYCR7Z2V0SGFuZGxlckJhc2UoYXV0aCl9PyR7cXVlcnlzdHJpbmcocGFyYW1zRGljdCkuc2xpY2UoMSl9JHthcHBDaGVja1Rva2VuRnJhZ21lbnR9YDtcclxufVxyXG5mdW5jdGlvbiBnZXRIYW5kbGVyQmFzZSh7IGNvbmZpZyB9KSB7XHJcbiAgICBpZiAoIWNvbmZpZy5lbXVsYXRvcikge1xyXG4gICAgICAgIHJldHVybiBgaHR0cHM6Ly8ke2NvbmZpZy5hdXRoRG9tYWlufS8ke1dJREdFVF9QQVRIfWA7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gX2VtdWxhdG9yVXJsKGNvbmZpZywgRU1VTEFUT1JfV0lER0VUX1BBVEgpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgc3BlY2lhbCB3ZWIgc3RvcmFnZSBldmVudFxyXG4gKlxyXG4gKi9cclxuY29uc3QgV0VCX1NUT1JBR0VfU1VQUE9SVF9LRVkgPSAnd2ViU3RvcmFnZVN1cHBvcnQnO1xyXG5jbGFzcyBCcm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VycyA9IHt9O1xyXG4gICAgICAgIHRoaXMuaWZyYW1lcyA9IHt9O1xyXG4gICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzID0ge307XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RQZXJzaXN0ZW5jZSA9IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fY29tcGxldGVSZWRpcmVjdEZuID0gX2dldFJlZGlyZWN0UmVzdWx0O1xyXG4gICAgICAgIHRoaXMuX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQgPSBfb3ZlcnJpZGVSZWRpcmVjdFJlc3VsdDtcclxuICAgIH1cclxuICAgIC8vIFdyYXBwaW5nIGluIGFzeW5jIGV2ZW4gdGhvdWdoIHdlIGRvbid0IGF3YWl0IGFueXdoZXJlIGluIG9yZGVyXHJcbiAgICAvLyB0byBtYWtlIHN1cmUgZXJyb3JzIGFyZSByYWlzZWQgYXMgcHJvbWlzZSByZWplY3Rpb25zXHJcbiAgICBhc3luYyBfb3BlblBvcHVwKGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBkZWJ1Z0Fzc2VydCgoX2EgPSB0aGlzLmV2ZW50TWFuYWdlcnNbYXV0aC5fa2V5KCldKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWFuYWdlciwgJ19pbml0aWFsaXplKCkgbm90IGNhbGxlZCBiZWZvcmUgX29wZW5Qb3B1cCgpJyk7XHJcbiAgICAgICAgY29uc3QgdXJsID0gYXdhaXQgX2dldFJlZGlyZWN0VXJsKGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgX2dldEN1cnJlbnRVcmwoKSwgZXZlbnRJZCk7XHJcbiAgICAgICAgcmV0dXJuIF9vcGVuKGF1dGgsIHVybCwgX2dlbmVyYXRlRXZlbnRJZCgpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5fb3JpZ2luVmFsaWRhdGlvbihhdXRoKTtcclxuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBfZ2V0UmVkaXJlY3RVcmwoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBfZ2V0Q3VycmVudFVybCgpLCBldmVudElkKTtcclxuICAgICAgICBfc2V0V2luZG93TG9jYXRpb24odXJsKTtcclxuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoKCkgPT4geyB9KTtcclxuICAgIH1cclxuICAgIF9pbml0aWFsaXplKGF1dGgpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSBhdXRoLl9rZXkoKTtcclxuICAgICAgICBpZiAodGhpcy5ldmVudE1hbmFnZXJzW2tleV0pIHtcclxuICAgICAgICAgICAgY29uc3QgeyBtYW5hZ2VyLCBwcm9taXNlIH0gPSB0aGlzLmV2ZW50TWFuYWdlcnNba2V5XTtcclxuICAgICAgICAgICAgaWYgKG1hbmFnZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobWFuYWdlcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1Z0Fzc2VydChwcm9taXNlLCAnSWYgbWFuYWdlciBpcyBub3Qgc2V0LCBwcm9taXNlIHNob3VsZCBiZScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgcHJvbWlzZSA9IHRoaXMuaW5pdEFuZEdldE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXJzW2tleV0gPSB7IHByb21pc2UgfTtcclxuICAgICAgICAvLyBJZiB0aGUgcHJvbWlzZSBpcyByZWplY3RlZCwgdGhlIGtleSBzaG91bGQgYmUgcmVtb3ZlZCBzbyB0aGF0IHRoZVxyXG4gICAgICAgIC8vIG9wZXJhdGlvbiBjYW4gYmUgcmV0cmllZCBsYXRlci5cclxuICAgICAgICBwcm9taXNlLmNhdGNoKCgpID0+IHtcclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZXZlbnRNYW5hZ2Vyc1trZXldO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgaW5pdEFuZEdldE1hbmFnZXIoYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGlmcmFtZSA9IGF3YWl0IF9vcGVuSWZyYW1lKGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IG1hbmFnZXIgPSBuZXcgQXV0aEV2ZW50TWFuYWdlcihhdXRoKTtcclxuICAgICAgICBpZnJhbWUucmVnaXN0ZXIoJ2F1dGhFdmVudCcsIChpZnJhbWVFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBfYXNzZXJ0KGlmcmFtZUV2ZW50ID09PSBudWxsIHx8IGlmcmFtZUV2ZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZnJhbWVFdmVudC5hdXRoRXZlbnQsIGF1dGgsIFwiaW52YWxpZC1hdXRoLWV2ZW50XCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0FVVEhfRVZFTlQgKi8pO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBDb25zaWRlciBzcGxpdHRpbmcgcmVkaXJlY3QgYW5kIHBvcHVwIGV2ZW50cyBlYXJsaWVyIG9uXHJcbiAgICAgICAgICAgIGNvbnN0IGhhbmRsZWQgPSBtYW5hZ2VyLm9uRXZlbnQoaWZyYW1lRXZlbnQuYXV0aEV2ZW50KTtcclxuICAgICAgICAgICAgcmV0dXJuIHsgc3RhdHVzOiBoYW5kbGVkID8gXCJBQ0tcIiAvKiBHYXBpT3V0Y29tZS5BQ0sgKi8gOiBcIkVSUk9SXCIgLyogR2FwaU91dGNvbWUuRVJST1IgKi8gfTtcclxuICAgICAgICB9LCBnYXBpLmlmcmFtZXMuQ1JPU1NfT1JJR0lOX0lGUkFNRVNfRklMVEVSKTtcclxuICAgICAgICB0aGlzLmV2ZW50TWFuYWdlcnNbYXV0aC5fa2V5KCldID0geyBtYW5hZ2VyIH07XHJcbiAgICAgICAgdGhpcy5pZnJhbWVzW2F1dGguX2tleSgpXSA9IGlmcmFtZTtcclxuICAgICAgICByZXR1cm4gbWFuYWdlcjtcclxuICAgIH1cclxuICAgIF9pc0lmcmFtZVdlYlN0b3JhZ2VTdXBwb3J0ZWQoYXV0aCwgY2IpIHtcclxuICAgICAgICBjb25zdCBpZnJhbWUgPSB0aGlzLmlmcmFtZXNbYXV0aC5fa2V5KCldO1xyXG4gICAgICAgIGlmcmFtZS5zZW5kKFdFQl9TVE9SQUdFX1NVUFBPUlRfS0VZLCB7IHR5cGU6IFdFQl9TVE9SQUdFX1NVUFBPUlRfS0VZIH0sIHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgY29uc3QgaXNTdXBwb3J0ZWQgPSAoX2EgPSByZXN1bHQgPT09IG51bGwgfHwgcmVzdWx0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXN1bHRbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYVtXRUJfU1RPUkFHRV9TVVBQT1JUX0tFWV07XHJcbiAgICAgICAgICAgIGlmIChpc1N1cHBvcnRlZCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBjYighIWlzU3VwcG9ydGVkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBfZmFpbChhdXRoLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgfSwgZ2FwaS5pZnJhbWVzLkNST1NTX09SSUdJTl9JRlJBTUVTX0ZJTFRFUik7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgaWYgKCF0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldKSB7XHJcbiAgICAgICAgICAgIHRoaXMub3JpZ2luVmFsaWRhdGlvblByb21pc2VzW2tleV0gPSBfdmFsaWRhdGVPcmlnaW4oYXV0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldO1xyXG4gICAgfVxyXG4gICAgZ2V0IF9zaG91bGRJbml0UHJvYWN0aXZlbHkoKSB7XHJcbiAgICAgICAgLy8gTW9iaWxlIGJyb3dzZXJzIGFuZCBTYWZhcmkgbmVlZCB0byBvcHRpbWlzdGljYWxseSBpbml0aWFsaXplXHJcbiAgICAgICAgcmV0dXJuIF9pc01vYmlsZUJyb3dzZXIoKSB8fCBfaXNTYWZhcmkoKSB8fCBfaXNJT1MoKTtcclxuICAgIH1cclxufVxyXG4vKipcclxuICogQW4gaW1wbGVtZW50YXRpb24gb2Yge0BsaW5rIFBvcHVwUmVkaXJlY3RSZXNvbHZlcn0gc3VpdGFibGUgZm9yIGJyb3dzZXJcclxuICogYmFzZWQgYXBwbGljYXRpb25zLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jb25zdCBicm93c2VyUG9wdXBSZWRpcmVjdFJlc29sdmVyID0gQnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcjtcblxuY2xhc3MgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGZhY3RvcklkKSB7XHJcbiAgICAgICAgdGhpcy5mYWN0b3JJZCA9IGZhY3RvcklkO1xyXG4gICAgfVxyXG4gICAgX3Byb2Nlc3MoYXV0aCwgc2Vzc2lvbiwgZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBzd2l0Y2ggKHNlc3Npb24udHlwZSkge1xyXG4gICAgICAgICAgICBjYXNlIFwiZW5yb2xsXCIgLyogTXVsdGlGYWN0b3JTZXNzaW9uVHlwZS5FTlJPTEwgKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVFbnJvbGwoYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsLCBkaXNwbGF5TmFtZSk7XHJcbiAgICAgICAgICAgIGNhc2UgXCJzaWduaW5cIiAvKiBNdWx0aUZhY3RvclNlc3Npb25UeXBlLlNJR05fSU4gKi86XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZmluYWxpemVTaWduSW4oYXV0aCwgc2Vzc2lvbi5jcmVkZW50aWFsKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWJ1Z0ZhaWwoJ3VuZXhwZWN0ZWQgTXVsdGlGYWN0b3JTZXNzaW9uVHlwZScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxuXG4vKipcclxuICoge0Bpbmhlcml0ZG9jIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259XHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNsYXNzIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIGV4dGVuZHMgTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsIHtcclxuICAgIGNvbnN0cnVjdG9yKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICBzdXBlcihcInBob25lXCIgLyogRmFjdG9ySWQuUEhPTkUgKi8pO1xyXG4gICAgICAgIHRoaXMuY3JlZGVudGlhbCA9IGNyZWRlbnRpYWw7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21DcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsKGNyZWRlbnRpYWwpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX2ZpbmFsaXplRW5yb2xsKGF1dGgsIGlkVG9rZW4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplRW5yb2xsUGhvbmVNZmEoYXV0aCwge1xyXG4gICAgICAgICAgICBpZFRva2VuLFxyXG4gICAgICAgICAgICBkaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgcGhvbmVWZXJpZmljYXRpb25JbmZvOiB0aGlzLmNyZWRlbnRpYWwuX21ha2VWZXJpZmljYXRpb25SZXF1ZXN0KClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIF9maW5hbGl6ZVNpZ25JbihhdXRoLCBtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBmaW5hbGl6ZVNpZ25JblBob25lTWZhKGF1dGgsIHtcclxuICAgICAgICAgICAgbWZhUGVuZGluZ0NyZWRlbnRpYWwsXHJcbiAgICAgICAgICAgIHBob25lVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5jcmVkZW50aWFsLl9tYWtlVmVyaWZpY2F0aW9uUmVxdWVzdCgpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFByb3ZpZGVyIGZvciBnZW5lcmF0aW5nIGEge0BsaW5rIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259LlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5jbGFzcyBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yIHtcclxuICAgIGNvbnN0cnVjdG9yKCkgeyB9XHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVzIGEge0BsaW5rIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259IHRvIGNvbmZpcm0gb3duZXJzaGlwIG9mIHRoZSBwaG9uZSBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBwaG9uZUF1dGhDcmVkZW50aWFsIC0gQSBjcmVkZW50aWFsIHByb3ZpZGVkIGJ5IHtAbGluayBQaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsfS5cclxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFBob25lTXVsdGlGYWN0b3JBc3NlcnRpb259IHdoaWNoIGNhbiBiZSB1c2VkIHdpdGhcclxuICAgICAqIHtAbGluayBNdWx0aUZhY3RvclJlc29sdmVyLnJlc29sdmVTaWduSW59XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBhc3NlcnRpb24oY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBQaG9uZU11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbC5fZnJvbUNyZWRlbnRpYWwoY3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBwaG9uZSBzZWNvbmQgZmFjdG9yOiBgcGhvbmVgLlxyXG4gKi9cclxuUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvci5GQUNUT1JfSUQgPSAncGhvbmUnO1xuXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGdlbmVyYXRpbmcgYSB7QGxpbmsgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9ufS5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgVG90cE11bHRpRmFjdG9yR2VuZXJhdG9yIHtcclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYSB7QGxpbmsgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9ufSB0byBjb25maXJtIG93bmVyc2hpcCBvZlxyXG4gICAgICogdGhlIFRPVFAgKHRpbWUtYmFzZWQgb25lLXRpbWUgcGFzc3dvcmQpIHNlY29uZCBmYWN0b3IuXHJcbiAgICAgKiBUaGlzIGFzc2VydGlvbiBpcyB1c2VkIHRvIGNvbXBsZXRlIGVucm9sbG1lbnQgaW4gVE9UUCBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBzZWNyZXQgQSB7QGxpbmsgVG90cFNlY3JldH0gY29udGFpbmluZyB0aGUgc2hhcmVkIHNlY3JldCBrZXkgYW5kIG90aGVyIFRPVFAgcGFyYW1ldGVycy5cclxuICAgICAqIEBwYXJhbSBvbmVUaW1lUGFzc3dvcmQgT25lLXRpbWUgcGFzc3dvcmQgZnJvbSBUT1RQIEFwcC5cclxuICAgICAqIEByZXR1cm5zIEEge0BsaW5rIFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbn0gd2hpY2ggY2FuIGJlIHVzZWQgd2l0aFxyXG4gICAgICoge0BsaW5rIE11bHRpRmFjdG9yVXNlci5lbnJvbGx9LlxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYXNzZXJ0aW9uRm9yRW5yb2xsbWVudChzZWNyZXQsIG9uZVRpbWVQYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsLl9mcm9tU2VjcmV0KHNlY3JldCwgb25lVGltZVBhc3N3b3JkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYSB7QGxpbmsgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9ufSB0byBjb25maXJtIG93bmVyc2hpcCBvZiB0aGUgVE9UUCBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICogVGhpcyBhc3NlcnRpb24gaXMgdXNlZCB0byBjb21wbGV0ZSBzaWduSW4gd2l0aCBUT1RQIGFzIHRoZSBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBlbnJvbGxtZW50SWQgaWRlbnRpZmllcyB0aGUgZW5yb2xsZWQgVE9UUCBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICogQHBhcmFtIG9uZVRpbWVQYXNzd29yZCBPbmUtdGltZSBwYXNzd29yZCBmcm9tIFRPVFAgQXBwLlxyXG4gICAgICogQHJldHVybnMgQSB7QGxpbmsgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9ufSB3aGljaCBjYW4gYmUgdXNlZCB3aXRoXHJcbiAgICAgKiB7QGxpbmsgTXVsdGlGYWN0b3JSZXNvbHZlci5yZXNvbHZlU2lnbklufS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzc2VydGlvbkZvclNpZ25JbihlbnJvbGxtZW50SWQsIG9uZVRpbWVQYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb25JbXBsLl9mcm9tRW5yb2xsbWVudElkKGVucm9sbG1lbnRJZCwgb25lVGltZVBhc3N3b3JkKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyBhIHByb21pc2UgdG8ge0BsaW5rIFRvdHBTZWNyZXR9IHdoaWNoIGNvbnRhaW5zIHRoZSBUT1RQIHNoYXJlZCBzZWNyZXQga2V5IGFuZCBvdGhlciBwYXJhbWV0ZXJzLlxyXG4gICAgICogQ3JlYXRlcyBhIFRPVFAgc2VjcmV0IGFzIHBhcnQgb2YgZW5yb2xsaW5nIGEgVE9UUCBzZWNvbmQgZmFjdG9yLlxyXG4gICAgICogVXNlZCBmb3IgZ2VuZXJhdGluZyBhIFFSIGNvZGUgVVJMIG9yIGlucHV0dGluZyBpbnRvIGEgVE9UUCBhcHAuXHJcbiAgICAgKiBUaGlzIG1ldGhvZCB1c2VzIHRoZSBhdXRoIGluc3RhbmNlIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHVzZXIgaW4gdGhlIG11bHRpRmFjdG9yU2Vzc2lvbi5cclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0gc2Vzc2lvbiBUaGUge0BsaW5rIE11bHRpRmFjdG9yU2Vzc2lvbn0gdGhhdCB0aGUgdXNlciBpcyBwYXJ0IG9mLlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRvIHtAbGluayBUb3RwU2VjcmV0fS5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGFzeW5jIGdlbmVyYXRlU2VjcmV0KHNlc3Npb24pIHtcclxuICAgICAgICBjb25zdCBtZmFTZXNzaW9uID0gc2Vzc2lvbjtcclxuICAgICAgICBfYXNzZXJ0KHR5cGVvZiBtZmFTZXNzaW9uLmF1dGggIT09ICd1bmRlZmluZWQnLCBcImludGVybmFsLWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5JTlRFUk5BTF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBzdGFydEVucm9sbFRvdHBNZmEobWZhU2Vzc2lvbi5hdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW46IG1mYVNlc3Npb24uY3JlZGVudGlhbCxcclxuICAgICAgICAgICAgdG90cEVucm9sbG1lbnRJbmZvOiB7fVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBUb3RwU2VjcmV0Ll9mcm9tU3RhcnRUb3RwTWZhRW5yb2xsbWVudFJlc3BvbnNlKHJlc3BvbnNlLCBtZmFTZXNzaW9uLmF1dGgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBUaGUgaWRlbnRpZmllciBvZiB0aGUgVE9UUCBzZWNvbmQgZmFjdG9yOiBgdG90cGAuXHJcbiAqL1xyXG5Ub3RwTXVsdGlGYWN0b3JHZW5lcmF0b3IuRkFDVE9SX0lEID0gXCJ0b3RwXCIgLyogRmFjdG9ySWQuVE9UUCAqLztcclxuY2xhc3MgVG90cE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCBleHRlbmRzIE11bHRpRmFjdG9yQXNzZXJ0aW9uSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvdHAsIGVucm9sbG1lbnRJZCwgc2VjcmV0KSB7XHJcbiAgICAgICAgc3VwZXIoXCJ0b3RwXCIgLyogRmFjdG9ySWQuVE9UUCAqLyk7XHJcbiAgICAgICAgdGhpcy5vdHAgPSBvdHA7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxtZW50SWQgPSBlbnJvbGxtZW50SWQ7XHJcbiAgICAgICAgdGhpcy5zZWNyZXQgPSBzZWNyZXQ7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21TZWNyZXQoc2VjcmV0LCBvdHApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwob3RwLCB1bmRlZmluZWQsIHNlY3JldCk7XHJcbiAgICB9XHJcbiAgICAvKiogQGludGVybmFsICovXHJcbiAgICBzdGF0aWMgX2Zyb21FbnJvbGxtZW50SWQoZW5yb2xsbWVudElkLCBvdHApIHtcclxuICAgICAgICByZXR1cm4gbmV3IFRvdHBNdWx0aUZhY3RvckFzc2VydGlvbkltcGwob3RwLCBlbnJvbGxtZW50SWQpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgYXN5bmMgX2ZpbmFsaXplRW5yb2xsKGF1dGgsIGlkVG9rZW4sIGRpc3BsYXlOYW1lKSB7XHJcbiAgICAgICAgX2Fzc2VydCh0eXBlb2YgdGhpcy5zZWNyZXQgIT09ICd1bmRlZmluZWQnLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplRW5yb2xsVG90cE1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIGlkVG9rZW4sXHJcbiAgICAgICAgICAgIGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICB0b3RwVmVyaWZpY2F0aW9uSW5mbzogdGhpcy5zZWNyZXQuX21ha2VUb3RwVmVyaWZpY2F0aW9uSW5mbyh0aGlzLm90cClcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIGFzeW5jIF9maW5hbGl6ZVNpZ25JbihhdXRoLCBtZmFQZW5kaW5nQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIF9hc3NlcnQodGhpcy5lbnJvbGxtZW50SWQgIT09IHVuZGVmaW5lZCAmJiB0aGlzLm90cCAhPT0gdW5kZWZpbmVkLCBhdXRoLCBcImFyZ3VtZW50LWVycm9yXCIgLyogQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLyk7XHJcbiAgICAgICAgY29uc3QgdG90cFZlcmlmaWNhdGlvbkluZm8gPSB7IHZlcmlmaWNhdGlvbkNvZGU6IHRoaXMub3RwIH07XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsaXplU2lnbkluVG90cE1mYShhdXRoLCB7XHJcbiAgICAgICAgICAgIG1mYVBlbmRpbmdDcmVkZW50aWFsLFxyXG4gICAgICAgICAgICBtZmFFbnJvbGxtZW50SWQ6IHRoaXMuZW5yb2xsbWVudElkLFxyXG4gICAgICAgICAgICB0b3RwVmVyaWZpY2F0aW9uSW5mb1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBQcm92aWRlciBmb3IgZ2VuZXJhdGluZyBhIHtAbGluayBUb3RwTXVsdGlGYWN0b3JBc3NlcnRpb259LlxyXG4gKlxyXG4gKiBTdG9yZXMgdGhlIHNoYXJlZCBzZWNyZXQga2V5IGFuZCBvdGhlciBwYXJhbWV0ZXJzIHRvIGdlbmVyYXRlIHRpbWUtYmFzZWQgT1RQcy5cclxuICogSW1wbGVtZW50cyBtZXRob2RzIHRvIHJldHJpZXZlIHRoZSBzaGFyZWQgc2VjcmV0IGtleSBhbmQgZ2VuZXJhdGUgYSBRUiBjb2RlIFVSTC5cclxuICogQHB1YmxpY1xyXG4gKi9cclxuY2xhc3MgVG90cFNlY3JldCB7XHJcbiAgICAvLyBUaGUgcHVibGljIG1lbWJlcnMgYXJlIGRlY2xhcmVkIG91dHNpZGUgdGhlIGNvbnN0cnVjdG9yIHNvIHRoZSBkb2NzIGNhbiBiZSBnZW5lcmF0ZWQuXHJcbiAgICBjb25zdHJ1Y3RvcihzZWNyZXRLZXksIGhhc2hpbmdBbGdvcml0aG0sIGNvZGVMZW5ndGgsIGNvZGVJbnRlcnZhbFNlY29uZHMsIGVucm9sbG1lbnRDb21wbGV0aW9uRGVhZGxpbmUsIHNlc3Npb25JbmZvLCBhdXRoKSB7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uSW5mbyA9IHNlc3Npb25JbmZvO1xyXG4gICAgICAgIHRoaXMuYXV0aCA9IGF1dGg7XHJcbiAgICAgICAgdGhpcy5zZWNyZXRLZXkgPSBzZWNyZXRLZXk7XHJcbiAgICAgICAgdGhpcy5oYXNoaW5nQWxnb3JpdGhtID0gaGFzaGluZ0FsZ29yaXRobTtcclxuICAgICAgICB0aGlzLmNvZGVMZW5ndGggPSBjb2RlTGVuZ3RoO1xyXG4gICAgICAgIHRoaXMuY29kZUludGVydmFsU2Vjb25kcyA9IGNvZGVJbnRlcnZhbFNlY29uZHM7XHJcbiAgICAgICAgdGhpcy5lbnJvbGxtZW50Q29tcGxldGlvbkRlYWRsaW5lID0gZW5yb2xsbWVudENvbXBsZXRpb25EZWFkbGluZTtcclxuICAgIH1cclxuICAgIC8qKiBAaW50ZXJuYWwgKi9cclxuICAgIHN0YXRpYyBfZnJvbVN0YXJ0VG90cE1mYUVucm9sbG1lbnRSZXNwb25zZShyZXNwb25zZSwgYXV0aCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgVG90cFNlY3JldChyZXNwb25zZS50b3RwU2Vzc2lvbkluZm8uc2hhcmVkU2VjcmV0S2V5LCByZXNwb25zZS50b3RwU2Vzc2lvbkluZm8uaGFzaGluZ0FsZ29yaXRobSwgcmVzcG9uc2UudG90cFNlc3Npb25JbmZvLnZlcmlmaWNhdGlvbkNvZGVMZW5ndGgsIHJlc3BvbnNlLnRvdHBTZXNzaW9uSW5mby5wZXJpb2RTZWMsIG5ldyBEYXRlKHJlc3BvbnNlLnRvdHBTZXNzaW9uSW5mby5maW5hbGl6ZUVucm9sbG1lbnRUaW1lKS50b1VUQ1N0cmluZygpLCByZXNwb25zZS50b3RwU2Vzc2lvbkluZm8uc2Vzc2lvbkluZm8sIGF1dGgpO1xyXG4gICAgfVxyXG4gICAgLyoqIEBpbnRlcm5hbCAqL1xyXG4gICAgX21ha2VUb3RwVmVyaWZpY2F0aW9uSW5mbyhvdHApIHtcclxuICAgICAgICByZXR1cm4geyBzZXNzaW9uSW5mbzogdGhpcy5zZXNzaW9uSW5mbywgdmVyaWZpY2F0aW9uQ29kZTogb3RwIH07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJldHVybnMgYSBRUiBjb2RlIFVSTCBhcyBkZXNjcmliZWQgaW5cclxuICAgICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvZ29vZ2xlLWF1dGhlbnRpY2F0b3Ivd2lraS9LZXktVXJpLUZvcm1hdFxyXG4gICAgICogVGhpcyBjYW4gYmUgZGlzcGxheWVkIHRvIHRoZSB1c2VyIGFzIGEgUVIgY29kZSB0byBiZSBzY2FubmVkIGludG8gYSBUT1RQIGFwcCBsaWtlIEdvb2dsZSBBdXRoZW50aWNhdG9yLlxyXG4gICAgICogSWYgdGhlIG9wdGlvbmFsIHBhcmFtZXRlcnMgYXJlIHVuc3BlY2lmaWVkLCBhbiBhY2NvdW50TmFtZSBvZiA8dXNlckVtYWlsPiBhbmQgaXNzdWVyIG9mIDxmaXJlYmFzZUFwcE5hbWU+IGFyZSB1c2VkLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBhY2NvdW50TmFtZSB0aGUgbmFtZSBvZiB0aGUgYWNjb3VudC9hcHAgYWxvbmcgd2l0aCBhIHVzZXIgaWRlbnRpZmllci5cclxuICAgICAqIEBwYXJhbSBpc3N1ZXIgaXNzdWVyIG9mIHRoZSBUT1RQIChsaWtlbHkgdGhlIGFwcCBuYW1lKS5cclxuICAgICAqIEByZXR1cm5zIEEgUVIgY29kZSBVUkwgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBnZW5lcmF0ZVFyQ29kZVVybChhY2NvdW50TmFtZSwgaXNzdWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGxldCB1c2VEZWZhdWx0cyA9IGZhbHNlO1xyXG4gICAgICAgIGlmIChfaXNFbXB0eVN0cmluZyhhY2NvdW50TmFtZSkgfHwgX2lzRW1wdHlTdHJpbmcoaXNzdWVyKSkge1xyXG4gICAgICAgICAgICB1c2VEZWZhdWx0cyA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh1c2VEZWZhdWx0cykge1xyXG4gICAgICAgICAgICBpZiAoX2lzRW1wdHlTdHJpbmcoYWNjb3VudE5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBhY2NvdW50TmFtZSA9ICgoX2EgPSB0aGlzLmF1dGguY3VycmVudFVzZXIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5lbWFpbCkgfHwgJ3Vua25vd251c2VyJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX2lzRW1wdHlTdHJpbmcoaXNzdWVyKSkge1xyXG4gICAgICAgICAgICAgICAgaXNzdWVyID0gdGhpcy5hdXRoLm5hbWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGBvdHBhdXRoOi8vdG90cC8ke2lzc3Vlcn06JHthY2NvdW50TmFtZX0/c2VjcmV0PSR7dGhpcy5zZWNyZXRLZXl9Jmlzc3Vlcj0ke2lzc3Vlcn0mYWxnb3JpdGhtPSR7dGhpcy5oYXNoaW5nQWxnb3JpdGhtfSZkaWdpdHM9JHt0aGlzLmNvZGVMZW5ndGh9YDtcclxuICAgIH1cclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIF9pc0VtcHR5U3RyaW5nKGlucHV0KSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIGlucHV0ID09PSAndW5kZWZpbmVkJyB8fCAoaW5wdXQgPT09IG51bGwgfHwgaW5wdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlucHV0Lmxlbmd0aCkgPT09IDA7XHJcbn1cblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG52YXIgdmVyc2lvbiA9IFwiMC4yMy4yXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEF1dGhJbnRlcm9wIHtcclxuICAgIGNvbnN0cnVjdG9yKGF1dGgpIHtcclxuICAgICAgICB0aGlzLmF1dGggPSBhdXRoO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICBnZXRVaWQoKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICByZXR1cm4gKChfYSA9IHRoaXMuYXV0aC5jdXJyZW50VXNlcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnVpZCkgfHwgbnVsbDtcclxuICAgIH1cclxuICAgIGFzeW5jIGdldFRva2VuKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLmF1dGguX2luaXRpYWxpemF0aW9uUHJvbWlzZTtcclxuICAgICAgICBpZiAoIXRoaXMuYXV0aC5jdXJyZW50VXNlcikge1xyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgYWNjZXNzVG9rZW4gPSBhd2FpdCB0aGlzLmF1dGguY3VycmVudFVzZXIuZ2V0SWRUb2tlbihmb3JjZVJlZnJlc2gpO1xyXG4gICAgICAgIHJldHVybiB7IGFjY2Vzc1Rva2VuIH07XHJcbiAgICB9XHJcbiAgICBhZGRBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBpZiAodGhpcy5pbnRlcm5hbExpc3RlbmVycy5oYXMobGlzdGVuZXIpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgdW5zdWJzY3JpYmUgPSB0aGlzLmF1dGgub25JZFRva2VuQ2hhbmdlZCh1c2VyID0+IHtcclxuICAgICAgICAgICAgbGlzdGVuZXIoKHVzZXIgPT09IG51bGwgfHwgdXNlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXNlci5zdHNUb2tlbk1hbmFnZXIuYWNjZXNzVG9rZW4pIHx8IG51bGwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuc2V0KGxpc3RlbmVyLCB1bnN1YnNjcmliZSk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICByZW1vdmVBdXRoVG9rZW5MaXN0ZW5lcihsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0QXV0aENvbmZpZ3VyZWQoKTtcclxuICAgICAgICBjb25zdCB1bnN1YnNjcmliZSA9IHRoaXMuaW50ZXJuYWxMaXN0ZW5lcnMuZ2V0KGxpc3RlbmVyKTtcclxuICAgICAgICBpZiAoIXVuc3Vic2NyaWJlKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5pbnRlcm5hbExpc3RlbmVycy5kZWxldGUobGlzdGVuZXIpO1xyXG4gICAgICAgIHVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgdGhpcy51cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICB9XHJcbiAgICBhc3NlcnRBdXRoQ29uZmlndXJlZCgpIHtcclxuICAgICAgICBfYXNzZXJ0KHRoaXMuYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlLCBcImRlcGVuZGVudC1zZGstaW5pdGlhbGl6ZWQtYmVmb3JlLWF1dGhcIiAvKiBBdXRoRXJyb3JDb2RlLkRFUEVOREVOVF9TREtfSU5JVF9CRUZPUkVfQVVUSCAqLyk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQcm9hY3RpdmVSZWZyZXNoKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmludGVybmFsTGlzdGVuZXJzLnNpemUgPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aC5fc3RhcnRQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGguX3N0b3BQcm9hY3RpdmVSZWZyZXNoKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGdldFZlcnNpb25Gb3JQbGF0Zm9ybShjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgc3dpdGNoIChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgICAgIGNhc2UgXCJOb2RlXCIgLyogQ2xpZW50UGxhdGZvcm0uTk9ERSAqLzpcclxuICAgICAgICAgICAgcmV0dXJuICdub2RlJztcclxuICAgICAgICBjYXNlIFwiUmVhY3ROYXRpdmVcIiAvKiBDbGllbnRQbGF0Zm9ybS5SRUFDVF9OQVRJVkUgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAncm4nO1xyXG4gICAgICAgIGNhc2UgXCJXb3JrZXJcIiAvKiBDbGllbnRQbGF0Zm9ybS5XT1JLRVIgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnd2Vid29ya2VyJztcclxuICAgICAgICBjYXNlIFwiQ29yZG92YVwiIC8qIENsaWVudFBsYXRmb3JtLkNPUkRPVkEgKi86XHJcbiAgICAgICAgICAgIHJldHVybiAnY29yZG92YSc7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG4vKiogQGludGVybmFsICovXHJcbmZ1bmN0aW9uIHJlZ2lzdGVyQXV0aChjbGllbnRQbGF0Zm9ybSkge1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoXCJhdXRoXCIgLyogX0NvbXBvbmVudE5hbWUuQVVUSCAqLywgKGNvbnRhaW5lciwgeyBvcHRpb25zOiBkZXBzIH0pID0+IHtcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGhlYXJ0YmVhdFNlcnZpY2VQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignaGVhcnRiZWF0Jyk7XHJcbiAgICAgICAgY29uc3QgYXBwQ2hlY2tTZXJ2aWNlUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcC1jaGVjay1pbnRlcm5hbCcpO1xyXG4gICAgICAgIGNvbnN0IHsgYXBpS2V5LCBhdXRoRG9tYWluIH0gPSBhcHAub3B0aW9ucztcclxuICAgICAgICBfYXNzZXJ0KGFwaUtleSAmJiAhYXBpS2V5LmluY2x1ZGVzKCc6JyksIFwiaW52YWxpZC1hcGkta2V5XCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0FQSV9LRVkgKi8sIHsgYXBwTmFtZTogYXBwLm5hbWUgfSk7XHJcbiAgICAgICAgY29uc3QgY29uZmlnID0ge1xyXG4gICAgICAgICAgICBhcGlLZXksXHJcbiAgICAgICAgICAgIGF1dGhEb21haW4sXHJcbiAgICAgICAgICAgIGNsaWVudFBsYXRmb3JtLFxyXG4gICAgICAgICAgICBhcGlIb3N0OiBcImlkZW50aXR5dG9vbGtpdC5nb29nbGVhcGlzLmNvbVwiIC8qIERlZmF1bHRDb25maWcuQVBJX0hPU1QgKi8sXHJcbiAgICAgICAgICAgIHRva2VuQXBpSG9zdDogXCJzZWN1cmV0b2tlbi5nb29nbGVhcGlzLmNvbVwiIC8qIERlZmF1bHRDb25maWcuVE9LRU5fQVBJX0hPU1QgKi8sXHJcbiAgICAgICAgICAgIGFwaVNjaGVtZTogXCJodHRwc1wiIC8qIERlZmF1bHRDb25maWcuQVBJX1NDSEVNRSAqLyxcclxuICAgICAgICAgICAgc2RrQ2xpZW50VmVyc2lvbjogX2dldENsaWVudFZlcnNpb24oY2xpZW50UGxhdGZvcm0pXHJcbiAgICAgICAgfTtcclxuICAgICAgICBjb25zdCBhdXRoSW5zdGFuY2UgPSBuZXcgQXV0aEltcGwoYXBwLCBoZWFydGJlYXRTZXJ2aWNlUHJvdmlkZXIsIGFwcENoZWNrU2VydmljZVByb3ZpZGVyLCBjb25maWcpO1xyXG4gICAgICAgIF9pbml0aWFsaXplQXV0aEluc3RhbmNlKGF1dGhJbnN0YW5jZSwgZGVwcyk7XHJcbiAgICAgICAgcmV0dXJuIGF1dGhJbnN0YW5jZTtcclxuICAgIH0sIFwiUFVCTElDXCIgLyogQ29tcG9uZW50VHlwZS5QVUJMSUMgKi8pXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQXV0aCBjYW4gb25seSBiZSBpbml0aWFsaXplZCBieSBleHBsaWNpdGx5IGNhbGxpbmcgZ2V0QXV0aCgpIG9yIGluaXRpYWxpemVBdXRoKClcclxuICAgICAgICAgKiBGb3Igd2h5IHdlIGRvIHRoaXMsIFNlZSBnby9maXJlYmFzZS1uZXh0LWF1dGgtaW5pdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmVjYXVzZSBhbGwgZmlyZWJhc2UgcHJvZHVjdHMgdGhhdCBkZXBlbmQgb24gYXV0aCBkZXBlbmQgb24gYXV0aC1pbnRlcm5hbCBkaXJlY3RseSxcclxuICAgICAgICAgKiB3ZSBuZWVkIHRvIGluaXRpYWxpemUgYXV0aC1pbnRlcm5hbCBhZnRlciBhdXRoIGlzIGluaXRpYWxpemVkIHRvIG1ha2UgaXQgYXZhaWxhYmxlIHRvIG90aGVyIGZpcmViYXNlIHByb2R1Y3RzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC5zZXRJbnN0YW5jZUNyZWF0ZWRDYWxsYmFjaygoY29udGFpbmVyLCBfaW5zdGFuY2VJZGVudGlmaWVyLCBfaW5zdGFuY2UpID0+IHtcclxuICAgICAgICBjb25zdCBhdXRoSW50ZXJuYWxQcm92aWRlciA9IGNvbnRhaW5lci5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIiAvKiBfQ29tcG9uZW50TmFtZS5BVVRIX0lOVEVSTkFMICovKTtcclxuICAgICAgICBhdXRoSW50ZXJuYWxQcm92aWRlci5pbml0aWFsaXplKCk7XHJcbiAgICB9KSk7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudChcImF1dGgtaW50ZXJuYWxcIiAvKiBfQ29tcG9uZW50TmFtZS5BVVRIX0lOVEVSTkFMICovLCBjb250YWluZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGF1dGggPSBfY2FzdEF1dGgoY29udGFpbmVyLmdldFByb3ZpZGVyKFwiYXV0aFwiIC8qIF9Db21wb25lbnROYW1lLkFVVEggKi8pLmdldEltbWVkaWF0ZSgpKTtcclxuICAgICAgICByZXR1cm4gKGF1dGggPT4gbmV3IEF1dGhJbnRlcm9wKGF1dGgpKShhdXRoKTtcclxuICAgIH0sIFwiUFJJVkFURVwiIC8qIENvbXBvbmVudFR5cGUuUFJJVkFURSAqLykuc2V0SW5zdGFudGlhdGlvbk1vZGUoXCJFWFBMSUNJVFwiIC8qIEluc3RhbnRpYXRpb25Nb2RlLkVYUExJQ0lUICovKSk7XHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSwgdmVyc2lvbiwgZ2V0VmVyc2lvbkZvclBsYXRmb3JtKGNsaWVudFBsYXRmb3JtKSk7XHJcbiAgICAvLyBCVUlMRF9UQVJHRVQgd2lsbCBiZSByZXBsYWNlZCBieSB2YWx1ZXMgbGlrZSBlc201LCBlc20yMDE3LCBjanM1LCBldGMgZHVyaW5nIHRoZSBjb21waWxhdGlvblxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdlc20yMDE3Jyk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREVGQVVMVF9JRF9UT0tFTl9NQVhfQUdFID0gNSAqIDYwO1xyXG5jb25zdCBhdXRoSWRUb2tlbk1heEFnZSA9IGdldEV4cGVyaW1lbnRhbFNldHRpbmcoJ2F1dGhJZFRva2VuTWF4QWdlJykgfHwgREVGQVVMVF9JRF9UT0tFTl9NQVhfQUdFO1xyXG5sZXQgbGFzdFBvc3RlZElkVG9rZW4gPSBudWxsO1xyXG5jb25zdCBtaW50Q29va2llRmFjdG9yeSA9ICh1cmwpID0+IGFzeW5jICh1c2VyKSA9PiB7XHJcbiAgICBjb25zdCBpZFRva2VuUmVzdWx0ID0gdXNlciAmJiAoYXdhaXQgdXNlci5nZXRJZFRva2VuUmVzdWx0KCkpO1xyXG4gICAgY29uc3QgaWRUb2tlbkFnZSA9IGlkVG9rZW5SZXN1bHQgJiZcclxuICAgICAgICAobmV3IERhdGUoKS5nZXRUaW1lKCkgLSBEYXRlLnBhcnNlKGlkVG9rZW5SZXN1bHQuaXNzdWVkQXRUaW1lKSkgLyAxMDAwO1xyXG4gICAgaWYgKGlkVG9rZW5BZ2UgJiYgaWRUb2tlbkFnZSA+IGF1dGhJZFRva2VuTWF4QWdlKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgLy8gU3BlY2lmaWNhbGx5IHRyaXAgbnVsbCA9PiB1bmRlZmluZWQgd2hlbiBsb2dnZWQgb3V0LCB0byBkZWxldGUgYW55IGV4aXN0aW5nIGNvb2tpZVxyXG4gICAgY29uc3QgaWRUb2tlbiA9IGlkVG9rZW5SZXN1bHQgPT09IG51bGwgfHwgaWRUb2tlblJlc3VsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWRUb2tlblJlc3VsdC50b2tlbjtcclxuICAgIGlmIChsYXN0UG9zdGVkSWRUb2tlbiA9PT0gaWRUb2tlbikge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGxhc3RQb3N0ZWRJZFRva2VuID0gaWRUb2tlbjtcclxuICAgIGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgIG1ldGhvZDogaWRUb2tlbiA/ICdQT1NUJyA6ICdERUxFVEUnLFxyXG4gICAgICAgIGhlYWRlcnM6IGlkVG9rZW5cclxuICAgICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtpZFRva2VufWBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICA6IHt9XHJcbiAgICB9KTtcclxufTtcclxuLyoqXHJcbiAqIFJldHVybnMgdGhlIEF1dGggaW5zdGFuY2UgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0uXHJcbiAqIElmIG5vIGluc3RhbmNlIGV4aXN0cywgaW5pdGlhbGl6ZXMgYW4gQXV0aCBpbnN0YW5jZSB3aXRoIHBsYXRmb3JtLXNwZWNpZmljIGRlZmF1bHQgZGVwZW5kZW5jaWVzLlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gVGhlIEZpcmViYXNlIEFwcC5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QXV0aChhcHAgPSBnZXRBcHAoKSkge1xyXG4gICAgY29uc3QgcHJvdmlkZXIgPSBfZ2V0UHJvdmlkZXIoYXBwLCAnYXV0aCcpO1xyXG4gICAgaWYgKHByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSkge1xyXG4gICAgICAgIHJldHVybiBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGggPSBpbml0aWFsaXplQXV0aChhcHAsIHtcclxuICAgICAgICBwb3B1cFJlZGlyZWN0UmVzb2x2ZXI6IGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIsXHJcbiAgICAgICAgcGVyc2lzdGVuY2U6IFtcclxuICAgICAgICAgICAgaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsXHJcbiAgICAgICAgICAgIGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VcclxuICAgICAgICBdXHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGF1dGhUb2tlblN5bmNVcmwgPSBnZXRFeHBlcmltZW50YWxTZXR0aW5nKCdhdXRoVG9rZW5TeW5jVVJMJyk7XHJcbiAgICBpZiAoYXV0aFRva2VuU3luY1VybCkge1xyXG4gICAgICAgIGNvbnN0IG1pbnRDb29raWUgPSBtaW50Q29va2llRmFjdG9yeShhdXRoVG9rZW5TeW5jVXJsKTtcclxuICAgICAgICBiZWZvcmVBdXRoU3RhdGVDaGFuZ2VkKGF1dGgsIG1pbnRDb29raWUsICgpID0+IG1pbnRDb29raWUoYXV0aC5jdXJyZW50VXNlcikpO1xyXG4gICAgICAgIG9uSWRUb2tlbkNoYW5nZWQoYXV0aCwgdXNlciA9PiBtaW50Q29va2llKHVzZXIpKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGF1dGhFbXVsYXRvckhvc3QgPSBnZXREZWZhdWx0RW11bGF0b3JIb3N0KCdhdXRoJyk7XHJcbiAgICBpZiAoYXV0aEVtdWxhdG9ySG9zdCkge1xyXG4gICAgICAgIGNvbm5lY3RBdXRoRW11bGF0b3IoYXV0aCwgYGh0dHA6Ly8ke2F1dGhFbXVsYXRvckhvc3R9YCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXV0aDtcclxufVxyXG5yZWdpc3RlckF1dGgoXCJCcm93c2VyXCIgLyogQ2xpZW50UGxhdGZvcm0uQlJPV1NFUiAqLyk7XG5cbmV4cG9ydCB7IHNpZ25JbldpdGhDcmVkZW50aWFsIGFzICQsIEFjdGlvbkNvZGVPcGVyYXRpb24gYXMgQSwgc2lnbk91dCBhcyBCLCBkZWxldGVVc2VyIGFzIEMsIGRlYnVnRXJyb3JNYXAgYXMgRCwgcHJvZEVycm9yTWFwIGFzIEUsIEZhY3RvcklkIGFzIEYsIEFVVEhfRVJST1JfQ09ERVNfTUFQX0RPX05PVF9VU0VfSU5URVJOQUxMWSBhcyBHLCBpbml0aWFsaXplQXV0aCBhcyBILCBjb25uZWN0QXV0aEVtdWxhdG9yIGFzIEksIEF1dGhDcmVkZW50aWFsIGFzIEosIEVtYWlsQXV0aENyZWRlbnRpYWwgYXMgSywgT0F1dGhDcmVkZW50aWFsIGFzIEwsIFBob25lQXV0aENyZWRlbnRpYWwgYXMgTSwgaW5NZW1vcnlQZXJzaXN0ZW5jZSBhcyBOLCBPcGVyYXRpb25UeXBlIGFzIE8sIFBob25lQXV0aFByb3ZpZGVyIGFzIFAsIEVtYWlsQXV0aFByb3ZpZGVyIGFzIFEsIFJlY2FwdGNoYVZlcmlmaWVyIGFzIFIsIFNpZ25Jbk1ldGhvZCBhcyBTLCBUb3RwTXVsdGlGYWN0b3JHZW5lcmF0b3IgYXMgVCwgRmFjZWJvb2tBdXRoUHJvdmlkZXIgYXMgVSwgR29vZ2xlQXV0aFByb3ZpZGVyIGFzIFYsIEdpdGh1YkF1dGhQcm92aWRlciBhcyBXLCBPQXV0aFByb3ZpZGVyIGFzIFgsIFNBTUxBdXRoUHJvdmlkZXIgYXMgWSwgVHdpdHRlckF1dGhQcm92aWRlciBhcyBaLCBzaWduSW5Bbm9ueW1vdXNseSBhcyBfLCBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlIGFzIGEsIGxpbmtXaXRoQ3JlZGVudGlhbCBhcyBhMCwgcmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbCBhcyBhMSwgc2lnbkluV2l0aEN1c3RvbVRva2VuIGFzIGEyLCBzZW5kUGFzc3dvcmRSZXNldEVtYWlsIGFzIGEzLCBjb25maXJtUGFzc3dvcmRSZXNldCBhcyBhNCwgYXBwbHlBY3Rpb25Db2RlIGFzIGE1LCBjaGVja0FjdGlvbkNvZGUgYXMgYTYsIHZlcmlmeVBhc3N3b3JkUmVzZXRDb2RlIGFzIGE3LCBjcmVhdGVVc2VyV2l0aEVtYWlsQW5kUGFzc3dvcmQgYXMgYTgsIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkIGFzIGE5LCBfYXNzZXJ0IGFzIGFBLCBBdXRoRXZlbnRNYW5hZ2VyIGFzIGFCLCBfZ2V0SW5zdGFuY2UgYXMgYUMsIF9wZXJzaXN0ZW5jZUtleU5hbWUgYXMgYUQsIF9nZXRSZWRpcmVjdFJlc3VsdCBhcyBhRSwgX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQgYXMgYUYsIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMgYXMgYUcsIF9jYXN0QXV0aCBhcyBhSCwgVXNlckltcGwgYXMgYUksIEF1dGhJbXBsIGFzIGFKLCBfZ2V0Q2xpZW50VmVyc2lvbiBhcyBhSywgX2dlbmVyYXRlRXZlbnRJZCBhcyBhTCwgQXV0aFBvcHVwIGFzIGFNLCBGZXRjaFByb3ZpZGVyIGFzIGFOLCBTQU1MQXV0aENyZWRlbnRpYWwgYXMgYU8sIHNlbmRTaWduSW5MaW5rVG9FbWFpbCBhcyBhYSwgaXNTaWduSW5XaXRoRW1haWxMaW5rIGFzIGFiLCBzaWduSW5XaXRoRW1haWxMaW5rIGFzIGFjLCBmZXRjaFNpZ25Jbk1ldGhvZHNGb3JFbWFpbCBhcyBhZCwgc2VuZEVtYWlsVmVyaWZpY2F0aW9uIGFzIGFlLCB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCBhcyBhZiwgQWN0aW9uQ29kZVVSTCBhcyBhZywgcGFyc2VBY3Rpb25Db2RlVVJMIGFzIGFoLCB1cGRhdGVQcm9maWxlIGFzIGFpLCB1cGRhdGVFbWFpbCBhcyBhaiwgdXBkYXRlUGFzc3dvcmQgYXMgYWssIGdldElkVG9rZW4gYXMgYWwsIGdldElkVG9rZW5SZXN1bHQgYXMgYW0sIHVubGluayBhcyBhbiwgZ2V0QWRkaXRpb25hbFVzZXJJbmZvIGFzIGFvLCByZWxvYWQgYXMgYXAsIGdldE11bHRpRmFjdG9yUmVzb2x2ZXIgYXMgYXEsIG11bHRpRmFjdG9yIGFzIGFyLCBkZWJ1Z0Fzc2VydCBhcyBhcywgX2lzSU9TIGFzIGF0LCBfaXNBbmRyb2lkIGFzIGF1LCBfZmFpbCBhcyBhdiwgX2dldFJlZGlyZWN0VXJsIGFzIGF3LCBfZ2V0UHJvamVjdENvbmZpZyBhcyBheCwgX2lzSU9TN09yOCBhcyBheSwgX2NyZWF0ZUVycm9yIGFzIGF6LCBicm93c2VyTG9jYWxQZXJzaXN0ZW5jZSBhcyBiLCBzaWduSW5XaXRoUG9wdXAgYXMgYywgbGlua1dpdGhQb3B1cCBhcyBkLCByZWF1dGhlbnRpY2F0ZVdpdGhQb3B1cCBhcyBlLCBzaWduSW5XaXRoUmVkaXJlY3QgYXMgZiwgbGlua1dpdGhSZWRpcmVjdCBhcyBnLCByZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCBhcyBoLCBpbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlIGFzIGksIGdldFJlZGlyZWN0UmVzdWx0IGFzIGosIGJyb3dzZXJQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgYXMgaywgbGlua1dpdGhQaG9uZU51bWJlciBhcyBsLCBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yIGFzIG0sIFRvdHBTZWNyZXQgYXMgbiwgZ2V0QXV0aCBhcyBvLCBQcm92aWRlcklkIGFzIHAsIHNldFBlcnNpc3RlbmNlIGFzIHEsIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyIGFzIHIsIHNpZ25JbldpdGhQaG9uZU51bWJlciBhcyBzLCBpbml0aWFsaXplUmVjYXB0Y2hhQ29uZmlnIGFzIHQsIHVwZGF0ZVBob25lTnVtYmVyIGFzIHUsIG9uSWRUb2tlbkNoYW5nZWQgYXMgdiwgYmVmb3JlQXV0aFN0YXRlQ2hhbmdlZCBhcyB3LCBvbkF1dGhTdGF0ZUNoYW5nZWQgYXMgeCwgdXNlRGV2aWNlTGFuZ3VhZ2UgYXMgeSwgdXBkYXRlQ3VycmVudFVzZXIgYXMgeiB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXgtZTNkNWQzZjQuanMubWFwXG4iLCJpbXBvcnQgeyBhcyBhcyBkZWJ1Z0Fzc2VydCwgYXQgYXMgX2lzSU9TLCBhdSBhcyBfaXNBbmRyb2lkLCBhdiBhcyBfZmFpbCwgYXcgYXMgX2dldFJlZGlyZWN0VXJsLCBheCBhcyBfZ2V0UHJvamVjdENvbmZpZywgYXkgYXMgX2lzSU9TN09yOCwgYXogYXMgX2NyZWF0ZUVycm9yLCBhQSBhcyBfYXNzZXJ0LCBhQiBhcyBBdXRoRXZlbnRNYW5hZ2VyLCBhQyBhcyBfZ2V0SW5zdGFuY2UsIGIgYXMgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsIGFEIGFzIF9wZXJzaXN0ZW5jZUtleU5hbWUsIGEgYXMgYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZSwgYUUgYXMgX2dldFJlZGlyZWN0UmVzdWx0LCBhRiBhcyBfb3ZlcnJpZGVSZWRpcmVjdFJlc3VsdCwgYUcgYXMgX2NsZWFyUmVkaXJlY3RPdXRjb21lcywgYUggYXMgX2Nhc3RBdXRoIH0gZnJvbSAnLi9pbmRleC1lM2Q1ZDNmNC5qcyc7XG5leHBvcnQgeyBBIGFzIEFjdGlvbkNvZGVPcGVyYXRpb24sIGFnIGFzIEFjdGlvbkNvZGVVUkwsIEogYXMgQXV0aENyZWRlbnRpYWwsIEcgYXMgQXV0aEVycm9yQ29kZXMsIGFKIGFzIEF1dGhJbXBsLCBhTSBhcyBBdXRoUG9wdXAsIEsgYXMgRW1haWxBdXRoQ3JlZGVudGlhbCwgUSBhcyBFbWFpbEF1dGhQcm92aWRlciwgVSBhcyBGYWNlYm9va0F1dGhQcm92aWRlciwgRiBhcyBGYWN0b3JJZCwgYU4gYXMgRmV0Y2hQcm92aWRlciwgVyBhcyBHaXRodWJBdXRoUHJvdmlkZXIsIFYgYXMgR29vZ2xlQXV0aFByb3ZpZGVyLCBMIGFzIE9BdXRoQ3JlZGVudGlhbCwgWCBhcyBPQXV0aFByb3ZpZGVyLCBPIGFzIE9wZXJhdGlvblR5cGUsIE0gYXMgUGhvbmVBdXRoQ3JlZGVudGlhbCwgUCBhcyBQaG9uZUF1dGhQcm92aWRlciwgbSBhcyBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yLCBwIGFzIFByb3ZpZGVySWQsIFIgYXMgUmVjYXB0Y2hhVmVyaWZpZXIsIGFPIGFzIFNBTUxBdXRoQ3JlZGVudGlhbCwgWSBhcyBTQU1MQXV0aFByb3ZpZGVyLCBTIGFzIFNpZ25Jbk1ldGhvZCwgVCBhcyBUb3RwTXVsdGlGYWN0b3JHZW5lcmF0b3IsIG4gYXMgVG90cFNlY3JldCwgWiBhcyBUd2l0dGVyQXV0aFByb3ZpZGVyLCBhSSBhcyBVc2VySW1wbCwgYUEgYXMgX2Fzc2VydCwgYUggYXMgX2Nhc3RBdXRoLCBhdiBhcyBfZmFpbCwgYUwgYXMgX2dlbmVyYXRlRXZlbnRJZCwgYUsgYXMgX2dldENsaWVudFZlcnNpb24sIGFDIGFzIF9nZXRJbnN0YW5jZSwgYUUgYXMgX2dldFJlZGlyZWN0UmVzdWx0LCBhRiBhcyBfb3ZlcnJpZGVSZWRpcmVjdFJlc3VsdCwgYUQgYXMgX3BlcnNpc3RlbmNlS2V5TmFtZSwgYTUgYXMgYXBwbHlBY3Rpb25Db2RlLCB3IGFzIGJlZm9yZUF1dGhTdGF0ZUNoYW5nZWQsIGIgYXMgYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UsIGsgYXMgYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlciwgYSBhcyBicm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlLCBhNiBhcyBjaGVja0FjdGlvbkNvZGUsIGE0IGFzIGNvbmZpcm1QYXNzd29yZFJlc2V0LCBJIGFzIGNvbm5lY3RBdXRoRW11bGF0b3IsIGE4IGFzIGNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCwgRCBhcyBkZWJ1Z0Vycm9yTWFwLCBDIGFzIGRlbGV0ZVVzZXIsIGFkIGFzIGZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsLCBhbyBhcyBnZXRBZGRpdGlvbmFsVXNlckluZm8sIG8gYXMgZ2V0QXV0aCwgYWwgYXMgZ2V0SWRUb2tlbiwgYW0gYXMgZ2V0SWRUb2tlblJlc3VsdCwgYXEgYXMgZ2V0TXVsdGlGYWN0b3JSZXNvbHZlciwgaiBhcyBnZXRSZWRpcmVjdFJlc3VsdCwgTiBhcyBpbk1lbW9yeVBlcnNpc3RlbmNlLCBpIGFzIGluZGV4ZWREQkxvY2FsUGVyc2lzdGVuY2UsIEggYXMgaW5pdGlhbGl6ZUF1dGgsIHQgYXMgaW5pdGlhbGl6ZVJlY2FwdGNoYUNvbmZpZywgYWIgYXMgaXNTaWduSW5XaXRoRW1haWxMaW5rLCBhMCBhcyBsaW5rV2l0aENyZWRlbnRpYWwsIGwgYXMgbGlua1dpdGhQaG9uZU51bWJlciwgZCBhcyBsaW5rV2l0aFBvcHVwLCBnIGFzIGxpbmtXaXRoUmVkaXJlY3QsIGFyIGFzIG11bHRpRmFjdG9yLCB4IGFzIG9uQXV0aFN0YXRlQ2hhbmdlZCwgdiBhcyBvbklkVG9rZW5DaGFuZ2VkLCBhaCBhcyBwYXJzZUFjdGlvbkNvZGVVUkwsIEUgYXMgcHJvZEVycm9yTWFwLCBhMSBhcyByZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsLCByIGFzIHJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyLCBlIGFzIHJlYXV0aGVudGljYXRlV2l0aFBvcHVwLCBoIGFzIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0LCBhcCBhcyByZWxvYWQsIGFlIGFzIHNlbmRFbWFpbFZlcmlmaWNhdGlvbiwgYTMgYXMgc2VuZFBhc3N3b3JkUmVzZXRFbWFpbCwgYWEgYXMgc2VuZFNpZ25JbkxpbmtUb0VtYWlsLCBxIGFzIHNldFBlcnNpc3RlbmNlLCBfIGFzIHNpZ25JbkFub255bW91c2x5LCAkIGFzIHNpZ25JbldpdGhDcmVkZW50aWFsLCBhMiBhcyBzaWduSW5XaXRoQ3VzdG9tVG9rZW4sIGE5IGFzIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkLCBhYyBhcyBzaWduSW5XaXRoRW1haWxMaW5rLCBzIGFzIHNpZ25JbldpdGhQaG9uZU51bWJlciwgYyBhcyBzaWduSW5XaXRoUG9wdXAsIGYgYXMgc2lnbkluV2l0aFJlZGlyZWN0LCBCIGFzIHNpZ25PdXQsIGFuIGFzIHVubGluaywgeiBhcyB1cGRhdGVDdXJyZW50VXNlciwgYWogYXMgdXBkYXRlRW1haWwsIGFrIGFzIHVwZGF0ZVBhc3N3b3JkLCB1IGFzIHVwZGF0ZVBob25lTnVtYmVyLCBhaSBhcyB1cGRhdGVQcm9maWxlLCB5IGFzIHVzZURldmljZUxhbmd1YWdlLCBhZiBhcyB2ZXJpZnlCZWZvcmVVcGRhdGVFbWFpbCwgYTcgYXMgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUgfSBmcm9tICcuL2luZGV4LWUzZDVkM2Y0LmpzJztcbmltcG9ydCB7IHF1ZXJ5c3RyaW5nRGVjb2RlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0ICdAZmlyZWJhc2UvYXBwJztcbmltcG9ydCAndHNsaWInO1xuaW1wb3J0ICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIF9jb3Jkb3ZhV2luZG93KCkge1xyXG4gICAgcmV0dXJuIHdpbmRvdztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSG93IGxvbmcgdG8gd2FpdCBhZnRlciB0aGUgYXBwIGNvbWVzIGJhY2sgaW50byBmb2N1cyBiZWZvcmUgY29uY2x1ZGluZyB0aGF0XHJcbiAqIHRoZSB1c2VyIGNsb3NlZCB0aGUgc2lnbiBpbiB0YWIuXHJcbiAqL1xyXG5jb25zdCBSRURJUkVDVF9USU1FT1VUX01TID0gMjAwMDtcclxuLyoqXHJcbiAqIEdlbmVyYXRlcyB0aGUgVVJMIGZvciB0aGUgT0F1dGggaGFuZGxlci5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF9nZW5lcmF0ZUhhbmRsZXJVcmwoYXV0aCwgZXZlbnQsIHByb3ZpZGVyKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBHZXQgdGhlIGNvcmRvdmEgcGx1Z2luc1xyXG4gICAgY29uc3QgeyBCdWlsZEluZm8gfSA9IF9jb3Jkb3ZhV2luZG93KCk7XHJcbiAgICBkZWJ1Z0Fzc2VydChldmVudC5zZXNzaW9uSWQsICdBdXRoRXZlbnQgZGlkIG5vdCBjb250YWluIGEgc2Vzc2lvbiBJRCcpO1xyXG4gICAgY29uc3Qgc2Vzc2lvbkRpZ2VzdCA9IGF3YWl0IGNvbXB1dGVTaGEyNTYoZXZlbnQuc2Vzc2lvbklkKTtcclxuICAgIGNvbnN0IGFkZGl0aW9uYWxQYXJhbXMgPSB7fTtcclxuICAgIGlmIChfaXNJT1MoKSkge1xyXG4gICAgICAgIC8vIGlPUyBhcHAgaWRlbnRpZmllclxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNbJ2liaSddID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoX2lzQW5kcm9pZCgpKSB7XHJcbiAgICAgICAgLy8gQW5kcm9pZCBhcHAgaWRlbnRpZmllclxyXG4gICAgICAgIGFkZGl0aW9uYWxQYXJhbXNbJ2FwbiddID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogQXV0aEVycm9yQ29kZS5PUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvLyBBZGQgdGhlIGRpc3BsYXkgbmFtZSBpZiBhdmFpbGFibGVcclxuICAgIGlmIChCdWlsZEluZm8uZGlzcGxheU5hbWUpIHtcclxuICAgICAgICBhZGRpdGlvbmFsUGFyYW1zWydhcHBEaXNwbGF5TmFtZSddID0gQnVpbGRJbmZvLmRpc3BsYXlOYW1lO1xyXG4gICAgfVxyXG4gICAgLy8gQXR0YWNoZWQgdGhlIGhhc2hlZCBzZXNzaW9uIElEXHJcbiAgICBhZGRpdGlvbmFsUGFyYW1zWydzZXNzaW9uSWQnXSA9IHNlc3Npb25EaWdlc3Q7XHJcbiAgICByZXR1cm4gX2dldFJlZGlyZWN0VXJsKGF1dGgsIHByb3ZpZGVyLCBldmVudC50eXBlLCB1bmRlZmluZWQsIChfYSA9IGV2ZW50LmV2ZW50SWQpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IHVuZGVmaW5lZCwgYWRkaXRpb25hbFBhcmFtcyk7XHJcbn1cclxuLyoqXHJcbiAqIFZhbGlkYXRlcyB0aGF0IHRoaXMgYXBwIGlzIHZhbGlkIGZvciB0aGlzIHByb2plY3QgY29uZmlndXJhdGlvblxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpIHtcclxuICAgIGNvbnN0IHsgQnVpbGRJbmZvIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgY29uc3QgcmVxdWVzdCA9IHt9O1xyXG4gICAgaWYgKF9pc0lPUygpKSB7XHJcbiAgICAgICAgcmVxdWVzdC5pb3NCdW5kbGVJZCA9IEJ1aWxkSW5mby5wYWNrYWdlTmFtZTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKF9pc0FuZHJvaWQoKSkge1xyXG4gICAgICAgIHJlcXVlc3QuYW5kcm9pZFBhY2thZ2VOYW1lID0gQnVpbGRJbmZvLnBhY2thZ2VOYW1lO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgX2ZhaWwoYXV0aCwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogQXV0aEVycm9yQ29kZS5PUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICB9XHJcbiAgICAvLyBXaWxsIGZhaWwgYXV0b21hdGljYWxseSBpZiBwYWNrYWdlIG5hbWUgaXMgbm90IGF1dGhvcml6ZWRcclxuICAgIGF3YWl0IF9nZXRQcm9qZWN0Q29uZmlnKGF1dGgsIHJlcXVlc3QpO1xyXG59XHJcbmZ1bmN0aW9uIF9wZXJmb3JtUmVkaXJlY3QoaGFuZGxlclVybCkge1xyXG4gICAgLy8gR2V0IHRoZSBjb3Jkb3ZhIHBsdWdpbnNcclxuICAgIGNvbnN0IHsgY29yZG92YSB9ID0gX2NvcmRvdmFXaW5kb3coKTtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICBjb3Jkb3ZhLnBsdWdpbnMuYnJvd3NlcnRhYi5pc0F2YWlsYWJsZShicm93c2VyVGFiSXNBdmFpbGFibGUgPT4ge1xyXG4gICAgICAgICAgICBsZXQgaWFiUmVmID0gbnVsbDtcclxuICAgICAgICAgICAgaWYgKGJyb3dzZXJUYWJJc0F2YWlsYWJsZSkge1xyXG4gICAgICAgICAgICAgICAgY29yZG92YS5wbHVnaW5zLmJyb3dzZXJ0YWIub3BlblVybChoYW5kbGVyVXJsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IFJldHVybiB0aGUgaW5hcHBicm93c2VyIHJlZiB0aGF0J3MgcmV0dXJuZWQgZnJvbSB0aGUgb3BlbiBjYWxsXHJcbiAgICAgICAgICAgICAgICBpYWJSZWYgPSBjb3Jkb3ZhLkluQXBwQnJvd3Nlci5vcGVuKGhhbmRsZXJVcmwsIF9pc0lPUzdPcjgoKSA/ICdfYmxhbmsnIDogJ19zeXN0ZW0nLCAnbG9jYXRpb249eWVzJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmVzb2x2ZShpYWJSZWYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuLyoqXHJcbiAqIFRoaXMgZnVuY3Rpb24gd2FpdHMgZm9yIGFwcCBhY3Rpdml0eSB0byBiZSBzZWVuIGJlZm9yZSByZXNvbHZpbmcuIEl0IGRvZXNcclxuICogdGhpcyBieSBhdHRhY2hpbmcgbGlzdGVuZXJzIHRvIHZhcmlvdXMgZG9tIGV2ZW50cy4gT25jZSB0aGUgYXBwIGlzIGRldGVybWluZWRcclxuICogdG8gYmUgdmlzaWJsZSwgdGhpcyBwcm9taXNlIHJlc29sdmVzLiBBRlRFUiB0aGF0IHJlc29sdXRpb24sIHRoZSBsaXN0ZW5lcnNcclxuICogYXJlIGRldGFjaGVkIGFuZCBhbnkgYnJvd3NlciB0YWJzIGxlZnQgb3BlbiB3aWxsIGJlIGNsb3NlZC5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIF93YWl0Rm9yQXBwUmVzdW1lKGF1dGgsIGV2ZW50TGlzdGVuZXIsIGlhYlJlZikge1xyXG4gICAgLy8gR2V0IHRoZSBjb3Jkb3ZhIHBsdWdpbnNcclxuICAgIGNvbnN0IHsgY29yZG92YSB9ID0gX2NvcmRvdmFXaW5kb3coKTtcclxuICAgIGxldCBjbGVhbnVwID0gKCkgPT4geyB9O1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGxldCBvbkNsb3NlVGltZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAvLyBERUZJTkUgQUxMIFRIRSBDQUxMQkFDS1MgPT09PT1cclxuICAgICAgICAgICAgZnVuY3Rpb24gYXV0aEV2ZW50U2VlbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgICAgIC8vIEF1dGggZXZlbnQgd2FzIGRldGVjdGVkLiBSZXNvbHZlIHRoaXMgcHJvbWlzZSBhbmQgY2xvc2UgdGhlIGV4dHJhXHJcbiAgICAgICAgICAgICAgICAvLyB3aW5kb3cgaWYgaXQncyBzdGlsbCBvcGVuLlxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2xvc2VCcm93c2VyVGFiID0gKF9hID0gY29yZG92YS5wbHVnaW5zLmJyb3dzZXJ0YWIpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5jbG9zZTtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY2xvc2VCcm93c2VyVGFiID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xvc2VCcm93c2VyVGFiKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBDbG9zZSBpbmFwcGJyb3dzZXIgZW1lYmVkZGVkIHdlYnZpZXcgaW4gaU9TNyBhbmQgOCBjYXNlIGlmIHN0aWxsXHJcbiAgICAgICAgICAgICAgICAvLyBvcGVuLlxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAoaWFiUmVmID09PSBudWxsIHx8IGlhYlJlZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogaWFiUmVmLmNsb3NlKSA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlhYlJlZi5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc3VtZWQoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAob25DbG9zZVRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb2RlIGFscmVhZHkgcmFuOyBkbyBub3QgcmVydW4uXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb25DbG9zZVRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFdhaXQgdHdvIHNlZWNvbmRzIGFmdGVyIHJlc3VtZSB0aGVuIHJlamVjdC5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoX2NyZWF0ZUVycm9yKGF1dGgsIFwicmVkaXJlY3QtY2FuY2VsbGVkLWJ5LXVzZXJcIiAvKiBBdXRoRXJyb3JDb2RlLlJFRElSRUNUX0NBTkNFTExFRF9CWV9VU0VSICovKSk7XHJcbiAgICAgICAgICAgICAgICB9LCBSRURJUkVDVF9USU1FT1VUX01TKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmdW5jdGlvbiB2aXNpYmlsaXR5Q2hhbmdlZCgpIHtcclxuICAgICAgICAgICAgICAgIGlmICgoZG9jdW1lbnQgPT09IG51bGwgfHwgZG9jdW1lbnQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSkgPT09ICd2aXNpYmxlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VtZWQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBBVFRBQ0ggQUxMIFRIRSBMSVNURU5FUlMgPT09PT1cclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciB0aGUgYXV0aCBldmVudFxyXG4gICAgICAgICAgICBldmVudExpc3RlbmVyLmFkZFBhc3NpdmVMaXN0ZW5lcihhdXRoRXZlbnRTZWVuKTtcclxuICAgICAgICAgICAgLy8gTGlzdGVuIGZvciByZXN1bWUgYW5kIHZpc2liaWxpdHkgZXZlbnRzXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc3VtZScsIHJlc3VtZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgaWYgKF9pc0FuZHJvaWQoKSkge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU0VUVVAgVEhFIENMRUFOVVAgRlVOQ1RJT04gPT09PT1cclxuICAgICAgICAgICAgY2xlYW51cCA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGV2ZW50TGlzdGVuZXIucmVtb3ZlUGFzc2l2ZUxpc3RlbmVyKGF1dGhFdmVudFNlZW4pO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzdW1lJywgcmVzdW1lZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHZpc2liaWxpdHlDaGFuZ2VkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAob25DbG9zZVRpbWVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dChvbkNsb3NlVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgZmluYWxseSB7XHJcbiAgICAgICAgY2xlYW51cCgpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDaGVja3MgdGhlIGNvbmZpZ3VyYXRpb24gb2YgdGhlIENvcmRvdmEgZW52aXJvbm1lbnQuIFRoaXMgaGFzIG5vIHNpZGUgZWZmZWN0XHJcbiAqIGlmIHRoZSBjb25maWd1cmF0aW9uIGlzIGNvcnJlY3Q7IG90aGVyd2lzZSBpdCB0aHJvd3MgYW4gZXJyb3Igd2l0aCB0aGVcclxuICogbWlzc2luZyBwbHVnaW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBfY2hlY2tDb3Jkb3ZhQ29uZmlndXJhdGlvbihhdXRoKSB7XHJcbiAgICB2YXIgX2EsIF9iLCBfYywgX2QsIF9lLCBfZiwgX2csIF9oLCBfaiwgX2s7XHJcbiAgICBjb25zdCB3aW4gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgLy8gQ2hlY2sgYWxsIGRlcGVuZGVuY2llcyBpbnN0YWxsZWQuXHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9yZG5ldC9jb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW5cclxuICAgIC8vIE5vdGUgdGhhdCBjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4gaGFzIGJlZW4gYWJhbmRvbmVkLlxyXG4gICAgLy8gQSBmb3JrIHdpdGggbGF0ZXN0IGZpeGVzIGlzIGF2YWlsYWJsZSBhdDpcclxuICAgIC8vIGh0dHBzOi8vd3d3Lm5wbWpzLmNvbS9wYWNrYWdlL2NvcmRvdmEtdW5pdmVyc2FsLWxpbmtzLXBsdWdpbi1maXhcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2EgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4udW5pdmVyc2FsTGlua3MpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdWJzY3JpYmUpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqLywge1xyXG4gICAgICAgIG1pc3NpbmdQbHVnaW46ICdjb3Jkb3ZhLXVuaXZlcnNhbC1saW5rcy1wbHVnaW4tZml4J1xyXG4gICAgfSk7XHJcbiAgICAvLyBodHRwczovL3d3dy5ucG1qcy5jb20vcGFja2FnZS9jb3Jkb3ZhLXBsdWdpbi1idWlsZGluZm9cclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2IgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uQnVpbGRJbmZvKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucGFja2FnZU5hbWUpICE9PSAndW5kZWZpbmVkJywgYXV0aCwgXCJpbnZhbGlkLWNvcmRvdmEtY29uZmlndXJhdGlvblwiIC8qIEF1dGhFcnJvckNvZGUuSU5WQUxJRF9DT1JET1ZBX0NPTkZJR1VSQVRJT04gKi8sIHtcclxuICAgICAgICBtaXNzaW5nUGx1Z2luOiAnY29yZG92YS1wbHVnaW4tYnVpbGRJbmZvJ1xyXG4gICAgfSk7XHJcbiAgICAvLyBodHRwczovL2dpdGh1Yi5jb20vZ29vZ2xlL2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWJcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2UgPSAoX2QgPSAoX2MgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uY29yZG92YSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnBsdWdpbnMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5icm93c2VydGFiKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Uub3BlblVybCkgPT09ICdmdW5jdGlvbicsIGF1dGgsIFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovLCB7XHJcbiAgICAgICAgbWlzc2luZ1BsdWdpbjogJ2NvcmRvdmEtcGx1Z2luLWJyb3dzZXJ0YWInXHJcbiAgICB9KTtcclxuICAgIF9hc3NlcnQodHlwZW9mICgoX2ggPSAoX2cgPSAoX2YgPSB3aW4gPT09IG51bGwgfHwgd2luID09PSB2b2lkIDAgPyB2b2lkIDAgOiB3aW4uY29yZG92YSkgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLnBsdWdpbnMpID09PSBudWxsIHx8IF9nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZy5icm93c2VydGFiKSA9PT0gbnVsbCB8fCBfaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2guaXNBdmFpbGFibGUpID09PSAnZnVuY3Rpb24nLCBhdXRoLCBcImludmFsaWQtY29yZG92YS1jb25maWd1cmF0aW9uXCIgLyogQXV0aEVycm9yQ29kZS5JTlZBTElEX0NPUkRPVkFfQ09ORklHVVJBVElPTiAqLywge1xyXG4gICAgICAgIG1pc3NpbmdQbHVnaW46ICdjb3Jkb3ZhLXBsdWdpbi1icm93c2VydGFiJ1xyXG4gICAgfSk7XHJcbiAgICAvLyBodHRwczovL2NvcmRvdmEuYXBhY2hlLm9yZy9kb2NzL2VuL2xhdGVzdC9yZWZlcmVuY2UvY29yZG92YS1wbHVnaW4taW5hcHBicm93c2VyL1xyXG4gICAgX2Fzc2VydCh0eXBlb2YgKChfayA9IChfaiA9IHdpbiA9PT0gbnVsbCB8fCB3aW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHdpbi5jb3Jkb3ZhKSA9PT0gbnVsbCB8fCBfaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2ouSW5BcHBCcm93c2VyKSA9PT0gbnVsbCB8fCBfayA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2sub3BlbikgPT09ICdmdW5jdGlvbicsIGF1dGgsIFwiaW52YWxpZC1jb3Jkb3ZhLWNvbmZpZ3VyYXRpb25cIiAvKiBBdXRoRXJyb3JDb2RlLklOVkFMSURfQ09SRE9WQV9DT05GSUdVUkFUSU9OICovLCB7XHJcbiAgICAgICAgbWlzc2luZ1BsdWdpbjogJ2NvcmRvdmEtcGx1Z2luLWluYXBwYnJvd3NlcidcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBDb21wdXRlcyB0aGUgU0hBLTI1NiBvZiBhIHNlc3Npb24gSUQuIFRoZSBTdWJ0bGVDcnlwdG8gaW50ZXJmYWNlIGlzIG9ubHlcclxuICogYXZhaWxhYmxlIGluIFwic2VjdXJlXCIgY29udGV4dHMsIHdoaWNoIGNvdmVycyBDb3Jkb3ZhICh3aGljaCBpcyBzZXJ2ZWQgb24gYSBmaWxlXHJcbiAqIHByb3RvY29sKS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNvbXB1dGVTaGEyNTYoc2Vzc2lvbklkKSB7XHJcbiAgICBjb25zdCBieXRlcyA9IHN0cmluZ1RvQXJyYXlCdWZmZXIoc2Vzc2lvbklkKTtcclxuICAgIC8vIFRPRE86IEZvciBJRTExIGNyeXB0byBoYXMgYSBkaWZmZXJlbnQgbmFtZSBhbmQgdGhpcyBvcGVyYXRpb24gY29tZXMgYmFja1xyXG4gICAgLy8gICAgICAgYXMgYW4gb2JqZWN0LCBub3QgYSBwcm9taXNlLiBUaGlzIGlzIHRoZSBvbGQgcHJvcG9zZWQgc3RhbmRhcmQgdGhhdFxyXG4gICAgLy8gICAgICAgaXMgdXNlZCBieSBJRTExOlxyXG4gICAgLy8gaHR0cHM6Ly93d3cudzMub3JnL1RSLzIwMTMvV0QtV2ViQ3J5cHRvQVBJLTIwMTMwMTA4LyNjcnlwdG9vcGVyYXRpb24taW50ZXJmYWNlXHJcbiAgICBjb25zdCBidWYgPSBhd2FpdCBjcnlwdG8uc3VidGxlLmRpZ2VzdCgnU0hBLTI1NicsIGJ5dGVzKTtcclxuICAgIGNvbnN0IGFyciA9IEFycmF5LmZyb20obmV3IFVpbnQ4QXJyYXkoYnVmKSk7XHJcbiAgICByZXR1cm4gYXJyLm1hcChudW0gPT4gbnVtLnRvU3RyaW5nKDE2KS5wYWRTdGFydCgyLCAnMCcpKS5qb2luKCcnKTtcclxufVxyXG5mdW5jdGlvbiBzdHJpbmdUb0FycmF5QnVmZmVyKHN0cikge1xyXG4gICAgLy8gVGhpcyBmdW5jdGlvbiBpcyBvbmx5IG1lYW50IHRvIGRlYWwgd2l0aCBhbiBBU0NJSSBjaGFyc2V0IGFuZCBtYWtlc1xyXG4gICAgLy8gY2VydGFpbiBzaW1wbGlmeWluZyBhc3N1bXB0aW9ucy5cclxuICAgIGRlYnVnQXNzZXJ0KC9bMC05YS16QS1aXSsvLnRlc3Qoc3RyKSwgJ0NhbiBvbmx5IGNvbnZlcnQgYWxwaGEtbnVtZXJpYyBzdHJpbmdzJyk7XHJcbiAgICBpZiAodHlwZW9mIFRleHRFbmNvZGVyICE9PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoc3RyKTtcclxuICAgIH1cclxuICAgIGNvbnN0IGJ1ZmYgPSBuZXcgQXJyYXlCdWZmZXIoc3RyLmxlbmd0aCk7XHJcbiAgICBjb25zdCB2aWV3ID0gbmV3IFVpbnQ4QXJyYXkoYnVmZik7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHN0ci5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIHZpZXdbaV0gPSBzdHIuY2hhckNvZGVBdChpKTtcclxuICAgIH1cclxuICAgIHJldHVybiB2aWV3O1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFNFU1NJT05fSURfTEVOR1RIID0gMjA7XHJcbi8qKiBDdXN0b20gQXV0aEV2ZW50TWFuYWdlciB0aGF0IGFkZHMgcGFzc2l2ZSBsaXN0ZW5lcnMgdG8gZXZlbnRzICovXHJcbmNsYXNzIENvcmRvdmFBdXRoRXZlbnRNYW5hZ2VyIGV4dGVuZHMgQXV0aEV2ZW50TWFuYWdlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpO1xyXG4gICAgICAgIHRoaXMucGFzc2l2ZUxpc3RlbmVycyA9IG5ldyBTZXQoKTtcclxuICAgICAgICB0aGlzLmluaXRQcm9taXNlID0gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzb2x2ZUluaWFsaXplZCA9IHJlc29sdmU7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBhZGRQYXNzaXZlTGlzdGVuZXIoY2IpIHtcclxuICAgICAgICB0aGlzLnBhc3NpdmVMaXN0ZW5lcnMuYWRkKGNiKTtcclxuICAgIH1cclxuICAgIHJlbW92ZVBhc3NpdmVMaXN0ZW5lcihjYikge1xyXG4gICAgICAgIHRoaXMucGFzc2l2ZUxpc3RlbmVycy5kZWxldGUoY2IpO1xyXG4gICAgfVxyXG4gICAgLy8gSW4gYSBDb3Jkb3ZhIGVudmlyb25tZW50LCB0aGlzIG1hbmFnZXIgY2FuIGxpdmUgdGhyb3VnaCBtdWx0aXBsZSByZWRpcmVjdFxyXG4gICAgLy8gb3BlcmF0aW9uc1xyXG4gICAgcmVzZXRSZWRpcmVjdCgpIHtcclxuICAgICAgICB0aGlzLnF1ZXVlZFJlZGlyZWN0RXZlbnQgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuaGFzSGFuZGxlZFBvdGVudGlhbFJlZGlyZWN0ID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgICAvKiogT3ZlcnJpZGUgdGhlIG9uRXZlbnQgbWV0aG9kICovXHJcbiAgICBvbkV2ZW50KGV2ZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZXNvbHZlSW5pYWxpemVkKCk7XHJcbiAgICAgICAgdGhpcy5wYXNzaXZlTGlzdGVuZXJzLmZvckVhY2goY2IgPT4gY2IoZXZlbnQpKTtcclxuICAgICAgICByZXR1cm4gc3VwZXIub25FdmVudChldmVudCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBpbml0aWFsaXplZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmluaXRQcm9taXNlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBHZW5lcmF0ZXMgYSAocGFydGlhbCkge0BsaW5rIEF1dGhFdmVudH0uXHJcbiAqL1xyXG5mdW5jdGlvbiBfZ2VuZXJhdGVOZXdFdmVudChhdXRoLCB0eXBlLCBldmVudElkID0gbnVsbCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB0eXBlLFxyXG4gICAgICAgIGV2ZW50SWQsXHJcbiAgICAgICAgdXJsUmVzcG9uc2U6IG51bGwsXHJcbiAgICAgICAgc2Vzc2lvbklkOiBnZW5lcmF0ZVNlc3Npb25JZCgpLFxyXG4gICAgICAgIHBvc3RCb2R5OiBudWxsLFxyXG4gICAgICAgIHRlbmFudElkOiBhdXRoLnRlbmFudElkLFxyXG4gICAgICAgIGVycm9yOiBfY3JlYXRlRXJyb3IoYXV0aCwgXCJuby1hdXRoLWV2ZW50XCIgLyogQXV0aEVycm9yQ29kZS5OT19BVVRIX0VWRU5UICovKVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBfc2F2ZVBhcnRpYWxFdmVudChhdXRoLCBldmVudCkge1xyXG4gICAgcmV0dXJuIHN0b3JhZ2UoKS5fc2V0KHBlcnNpc3RlbmNlS2V5KGF1dGgpLCBldmVudCk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gX2dldEFuZFJlbW92ZUV2ZW50KGF1dGgpIHtcclxuICAgIGNvbnN0IGV2ZW50ID0gKGF3YWl0IHN0b3JhZ2UoKS5fZ2V0KHBlcnNpc3RlbmNlS2V5KGF1dGgpKSk7XHJcbiAgICBpZiAoZXZlbnQpIHtcclxuICAgICAgICBhd2FpdCBzdG9yYWdlKCkuX3JlbW92ZShwZXJzaXN0ZW5jZUtleShhdXRoKSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXZlbnQ7XHJcbn1cclxuZnVuY3Rpb24gX2V2ZW50RnJvbVBhcnRpYWxBbmRVcmwocGFydGlhbEV2ZW50LCB1cmwpIHtcclxuICAgIHZhciBfYSwgX2I7XHJcbiAgICAvLyBQYXJzZSB0aGUgZGVlcCBsaW5rIHdpdGhpbiB0aGUgZHluYW1pYyBsaW5rIFVSTC5cclxuICAgIGNvbnN0IGNhbGxiYWNrVXJsID0gX2dldERlZXBMaW5rRnJvbUNhbGxiYWNrKHVybCk7XHJcbiAgICAvLyBDb25maXJtIGl0IGlzIGFjdHVhbGx5IGEgY2FsbGJhY2sgVVJMLlxyXG4gICAgLy8gQ3VycmVudGx5IHRoZSB1bml2ZXJzYWwgbGluayB3aWxsIGJlIG9mIHRoaXMgZm9ybWF0OlxyXG4gICAgLy8gaHR0cHM6Ly88QVVUSF9ET01BSU4+L19fL2F1dGgvY2FsbGJhY2s8T0FVVEhfUkVTUE9OU0U+XHJcbiAgICAvLyBUaGlzIGlzIGEgZmFrZSBVUkwgYnV0IGlzIG5vdCBpbnRlbmRlZCB0byB0YWtlIHRoZSB1c2VyIGFueXdoZXJlXHJcbiAgICAvLyBhbmQganVzdCByZWRpcmVjdCB0byB0aGUgYXBwLlxyXG4gICAgaWYgKGNhbGxiYWNrVXJsLmluY2x1ZGVzKCcvX18vYXV0aC9jYWxsYmFjaycpKSB7XHJcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgaXMgYW4gZXJyb3IgaW4gdGhlIFVSTC5cclxuICAgICAgICAvLyBUaGlzIG1lY2hhbmlzbSBpcyBhbHNvIHVzZWQgdG8gcGFzcyBlcnJvcnMgYmFjayB0byB0aGUgYXBwOlxyXG4gICAgICAgIC8vIGh0dHBzOi8vPEFVVEhfRE9NQUlOPi9fXy9hdXRoL2NhbGxiYWNrP2ZpcmViYXNlRXJyb3I9PFNUUklOR0lGSUVEX0VSUk9SPlxyXG4gICAgICAgIGNvbnN0IHBhcmFtcyA9IHNlYXJjaFBhcmFtc09yRW1wdHkoY2FsbGJhY2tVcmwpO1xyXG4gICAgICAgIC8vIEdldCB0aGUgZXJyb3Igb2JqZWN0IGNvcnJlc3BvbmRpbmcgdG8gdGhlIHN0cmluZ2lmaWVkIGVycm9yIGlmIGZvdW5kLlxyXG4gICAgICAgIGNvbnN0IGVycm9yT2JqZWN0ID0gcGFyYW1zWydmaXJlYmFzZUVycm9yJ11cclxuICAgICAgICAgICAgPyBwYXJzZUpzb25Pck51bGwoZGVjb2RlVVJJQ29tcG9uZW50KHBhcmFtc1snZmlyZWJhc2VFcnJvciddKSlcclxuICAgICAgICAgICAgOiBudWxsO1xyXG4gICAgICAgIGNvbnN0IGNvZGUgPSAoX2IgPSAoX2EgPSBlcnJvck9iamVjdCA9PT0gbnVsbCB8fCBlcnJvck9iamVjdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZXJyb3JPYmplY3RbJ2NvZGUnXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNwbGl0KCdhdXRoLycpKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2JbMV07XHJcbiAgICAgICAgY29uc3QgZXJyb3IgPSBjb2RlID8gX2NyZWF0ZUVycm9yKGNvZGUpIDogbnVsbDtcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHBhcnRpYWxFdmVudC50eXBlLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRJZDogcGFydGlhbEV2ZW50LmV2ZW50SWQsXHJcbiAgICAgICAgICAgICAgICB0ZW5hbnRJZDogcGFydGlhbEV2ZW50LnRlbmFudElkLFxyXG4gICAgICAgICAgICAgICAgZXJyb3IsXHJcbiAgICAgICAgICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICAgICAgICAgIHNlc3Npb25JZDogbnVsbCxcclxuICAgICAgICAgICAgICAgIHBvc3RCb2R5OiBudWxsXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogcGFydGlhbEV2ZW50LnR5cGUsXHJcbiAgICAgICAgICAgICAgICBldmVudElkOiBwYXJ0aWFsRXZlbnQuZXZlbnRJZCxcclxuICAgICAgICAgICAgICAgIHRlbmFudElkOiBwYXJ0aWFsRXZlbnQudGVuYW50SWQsXHJcbiAgICAgICAgICAgICAgICBzZXNzaW9uSWQ6IHBhcnRpYWxFdmVudC5zZXNzaW9uSWQsXHJcbiAgICAgICAgICAgICAgICB1cmxSZXNwb25zZTogY2FsbGJhY2tVcmwsXHJcbiAgICAgICAgICAgICAgICBwb3N0Qm9keTogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG59XHJcbmZ1bmN0aW9uIGdlbmVyYXRlU2Vzc2lvbklkKCkge1xyXG4gICAgY29uc3QgY2hhcnMgPSBbXTtcclxuICAgIGNvbnN0IGFsbG93ZWRDaGFycyA9ICcxMjM0NTY3ODkwYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXpBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWic7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IFNFU1NJT05fSURfTEVOR1RIOyBpKyspIHtcclxuICAgICAgICBjb25zdCBpZHggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBhbGxvd2VkQ2hhcnMubGVuZ3RoKTtcclxuICAgICAgICBjaGFycy5wdXNoKGFsbG93ZWRDaGFycy5jaGFyQXQoaWR4KSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY2hhcnMuam9pbignJyk7XHJcbn1cclxuZnVuY3Rpb24gc3RvcmFnZSgpIHtcclxuICAgIHJldHVybiBfZ2V0SW5zdGFuY2UoYnJvd3NlckxvY2FsUGVyc2lzdGVuY2UpO1xyXG59XHJcbmZ1bmN0aW9uIHBlcnNpc3RlbmNlS2V5KGF1dGgpIHtcclxuICAgIHJldHVybiBfcGVyc2lzdGVuY2VLZXlOYW1lKFwiYXV0aEV2ZW50XCIgLyogS2V5TmFtZS5BVVRIX0VWRU5UICovLCBhdXRoLmNvbmZpZy5hcGlLZXksIGF1dGgubmFtZSk7XHJcbn1cclxuZnVuY3Rpb24gcGFyc2VKc29uT3JOdWxsKGpzb24pIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoanNvbik7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG59XHJcbi8vIEV4cG9ydGVkIGZvciB0ZXN0aW5nXHJcbmZ1bmN0aW9uIF9nZXREZWVwTGlua0Zyb21DYWxsYmFjayh1cmwpIHtcclxuICAgIGNvbnN0IHBhcmFtcyA9IHNlYXJjaFBhcmFtc09yRW1wdHkodXJsKTtcclxuICAgIGNvbnN0IGxpbmsgPSBwYXJhbXNbJ2xpbmsnXSA/IGRlY29kZVVSSUNvbXBvbmVudChwYXJhbXNbJ2xpbmsnXSkgOiB1bmRlZmluZWQ7XHJcbiAgICAvLyBEb3VibGUgbGluayBjYXNlIChhdXRvbWF0aWMgcmVkaXJlY3QpXHJcbiAgICBjb25zdCBkb3VibGVEZWVwTGluayA9IHNlYXJjaFBhcmFtc09yRW1wdHkobGluaylbJ2xpbmsnXTtcclxuICAgIC8vIGlPUyBjdXN0b20gc2NoZW1lIGxpbmtzLlxyXG4gICAgY29uc3QgaU9TRGVlcExpbmsgPSBwYXJhbXNbJ2RlZXBfbGlua19pZCddXHJcbiAgICAgICAgPyBkZWNvZGVVUklDb21wb25lbnQocGFyYW1zWydkZWVwX2xpbmtfaWQnXSlcclxuICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgIGNvbnN0IGlPU0RvdWJsZURlZXBMaW5rID0gc2VhcmNoUGFyYW1zT3JFbXB0eShpT1NEZWVwTGluaylbJ2xpbmsnXTtcclxuICAgIHJldHVybiBpT1NEb3VibGVEZWVwTGluayB8fCBpT1NEZWVwTGluayB8fCBkb3VibGVEZWVwTGluayB8fCBsaW5rIHx8IHVybDtcclxufVxyXG4vKipcclxuICogT3B0aW1pc3RpY2FsbHkgdHJpZXMgdG8gZ2V0IHNlYXJjaCBwYXJhbXMgZnJvbSBhIHN0cmluZywgb3IgZWxzZSByZXR1cm5zIGFuXHJcbiAqIGVtcHR5IHNlYXJjaCBwYXJhbXMgb2JqZWN0LlxyXG4gKi9cclxuZnVuY3Rpb24gc2VhcmNoUGFyYW1zT3JFbXB0eSh1cmwpIHtcclxuICAgIGlmICghKHVybCA9PT0gbnVsbCB8fCB1cmwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVybC5pbmNsdWRlcygnPycpKSkge1xyXG4gICAgICAgIHJldHVybiB7fTtcclxuICAgIH1cclxuICAgIGNvbnN0IFtfLCAuLi5yZXN0XSA9IHVybC5zcGxpdCgnPycpO1xyXG4gICAgcmV0dXJuIHF1ZXJ5c3RyaW5nRGVjb2RlKHJlc3Quam9pbignPycpKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjEgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogSG93IGxvbmcgdG8gd2FpdCBmb3IgdGhlIGluaXRpYWwgYXV0aCBldmVudCBiZWZvcmUgY29uY2x1ZGluZyBub1xyXG4gKiByZWRpcmVjdCBwZW5kaW5nXHJcbiAqL1xyXG5jb25zdCBJTklUSUFMX0VWRU5UX1RJTUVPVVRfTVMgPSA1MDA7XHJcbmNsYXNzIENvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIge1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5fcmVkaXJlY3RQZXJzaXN0ZW5jZSA9IGJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2U7XHJcbiAgICAgICAgdGhpcy5fc2hvdWxkSW5pdFByb2FjdGl2ZWx5ID0gdHJ1ZTsgLy8gVGhpcyBpcyBsaWdodHdlaWdodCBmb3IgQ29yZG92YVxyXG4gICAgICAgIHRoaXMuZXZlbnRNYW5hZ2VycyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuX2NvbXBsZXRlUmVkaXJlY3RGbiA9IF9nZXRSZWRpcmVjdFJlc3VsdDtcclxuICAgICAgICB0aGlzLl9vdmVycmlkZVJlZGlyZWN0UmVzdWx0ID0gX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaW5pdGlhbGl6ZShhdXRoKSB7XHJcbiAgICAgICAgY29uc3Qga2V5ID0gYXV0aC5fa2V5KCk7XHJcbiAgICAgICAgbGV0IG1hbmFnZXIgPSB0aGlzLmV2ZW50TWFuYWdlcnMuZ2V0KGtleSk7XHJcbiAgICAgICAgaWYgKCFtYW5hZ2VyKSB7XHJcbiAgICAgICAgICAgIG1hbmFnZXIgPSBuZXcgQ29yZG92YUF1dGhFdmVudE1hbmFnZXIoYXV0aCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRNYW5hZ2Vycy5zZXQoa2V5LCBtYW5hZ2VyKTtcclxuICAgICAgICAgICAgdGhpcy5hdHRhY2hDYWxsYmFja0xpc3RlbmVycyhhdXRoLCBtYW5hZ2VyKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG1hbmFnZXI7XHJcbiAgICB9XHJcbiAgICBfb3BlblBvcHVwKGF1dGgpIHtcclxuICAgICAgICBfZmFpbChhdXRoLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBBdXRoRXJyb3JDb2RlLk9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuUmVkaXJlY3QoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgX2NoZWNrQ29yZG92YUNvbmZpZ3VyYXRpb24oYXV0aCk7XHJcbiAgICAgICAgY29uc3QgbWFuYWdlciA9IGF3YWl0IHRoaXMuX2luaXRpYWxpemUoYXV0aCk7XHJcbiAgICAgICAgYXdhaXQgbWFuYWdlci5pbml0aWFsaXplZCgpO1xyXG4gICAgICAgIC8vIFJlc2V0IHRoZSBwZXJzaXN0ZWQgcmVkaXJlY3Qgc3RhdGVzLiBUaGlzIGRvZXMgbm90IG1hdHRlciBvbiBXZWIgd2hlcmVcclxuICAgICAgICAvLyB0aGUgcmVkaXJlY3QgYWx3YXlzIGJsb3dzIGF3YXkgYXBwbGljYXRpb24gc3RhdGUgZW50aXJlbHkuIE9uIENvcmRvdmEsXHJcbiAgICAgICAgLy8gdGhlIGFwcCBtYWludGFpbnMgY29udHJvbCBmbG93IHRocm91Z2ggdGhlIHJlZGlyZWN0LlxyXG4gICAgICAgIG1hbmFnZXIucmVzZXRSZWRpcmVjdCgpO1xyXG4gICAgICAgIF9jbGVhclJlZGlyZWN0T3V0Y29tZXMoKTtcclxuICAgICAgICBhd2FpdCB0aGlzLl9vcmlnaW5WYWxpZGF0aW9uKGF1dGgpO1xyXG4gICAgICAgIGNvbnN0IGV2ZW50ID0gX2dlbmVyYXRlTmV3RXZlbnQoYXV0aCwgYXV0aFR5cGUsIGV2ZW50SWQpO1xyXG4gICAgICAgIGF3YWl0IF9zYXZlUGFydGlhbEV2ZW50KGF1dGgsIGV2ZW50KTtcclxuICAgICAgICBjb25zdCB1cmwgPSBhd2FpdCBfZ2VuZXJhdGVIYW5kbGVyVXJsKGF1dGgsIGV2ZW50LCBwcm92aWRlcik7XHJcbiAgICAgICAgY29uc3QgaWFiUmVmID0gYXdhaXQgX3BlcmZvcm1SZWRpcmVjdCh1cmwpO1xyXG4gICAgICAgIHJldHVybiBfd2FpdEZvckFwcFJlc3VtZShhdXRoLCBtYW5hZ2VyLCBpYWJSZWYpO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChfYXV0aCwgX2NiKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkLicpO1xyXG4gICAgfVxyXG4gICAgX29yaWdpblZhbGlkYXRpb24oYXV0aCkge1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGF1dGguX2tleSgpO1xyXG4gICAgICAgIGlmICghdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XSkge1xyXG4gICAgICAgICAgICB0aGlzLm9yaWdpblZhbGlkYXRpb25Qcm9taXNlc1trZXldID0gX3ZhbGlkYXRlT3JpZ2luKGF1dGgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5vcmlnaW5WYWxpZGF0aW9uUHJvbWlzZXNba2V5XTtcclxuICAgIH1cclxuICAgIGF0dGFjaENhbGxiYWNrTGlzdGVuZXJzKGF1dGgsIG1hbmFnZXIpIHtcclxuICAgICAgICAvLyBHZXQgdGhlIGdsb2JhbCBwbHVnaW5zXHJcbiAgICAgICAgY29uc3QgeyB1bml2ZXJzYWxMaW5rcywgaGFuZGxlT3BlblVSTCwgQnVpbGRJbmZvIH0gPSBfY29yZG92YVdpbmRvdygpO1xyXG4gICAgICAgIGNvbnN0IG5vRXZlbnRUaW1lb3V0ID0gc2V0VGltZW91dChhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdlIGRpZG4ndCBzZWUgdGhhdCBpbml0aWFsIGV2ZW50LiBDbGVhciBhbnkgcGVuZGluZyBvYmplY3QgYW5kXHJcbiAgICAgICAgICAgIC8vIGRpc3BhdGNoIG5vIGV2ZW50XHJcbiAgICAgICAgICAgIGF3YWl0IF9nZXRBbmRSZW1vdmVFdmVudChhdXRoKTtcclxuICAgICAgICAgICAgbWFuYWdlci5vbkV2ZW50KGdlbmVyYXRlTm9FdmVudCgpKTtcclxuICAgICAgICB9LCBJTklUSUFMX0VWRU5UX1RJTUVPVVRfTVMpO1xyXG4gICAgICAgIGNvbnN0IHVuaXZlcnNhbExpbmtzQ2IgPSBhc3luYyAoZXZlbnREYXRhKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdlIGhhdmUgYW4gZXZlbnQgc28gd2UgY2FuIGNsZWFyIHRoZSBubyBldmVudCB0aW1lb3V0XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChub0V2ZW50VGltZW91dCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRpYWxFdmVudCA9IGF3YWl0IF9nZXRBbmRSZW1vdmVFdmVudChhdXRoKTtcclxuICAgICAgICAgICAgbGV0IGZpbmFsRXZlbnQgPSBudWxsO1xyXG4gICAgICAgICAgICBpZiAocGFydGlhbEV2ZW50ICYmIChldmVudERhdGEgPT09IG51bGwgfHwgZXZlbnREYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBldmVudERhdGFbJ3VybCddKSkge1xyXG4gICAgICAgICAgICAgICAgZmluYWxFdmVudCA9IF9ldmVudEZyb21QYXJ0aWFsQW5kVXJsKHBhcnRpYWxFdmVudCwgZXZlbnREYXRhWyd1cmwnXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gSWYgZmluYWxFdmVudCBpcyBuZXZlciBmaWxsZWQsIHRyaWdnZXIgd2l0aCBubyBldmVudFxyXG4gICAgICAgICAgICBtYW5hZ2VyLm9uRXZlbnQoZmluYWxFdmVudCB8fCBnZW5lcmF0ZU5vRXZlbnQoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICAvLyBVbml2ZXJzYWwgbGlua3Mgc3Vic2NyaWJlciBkb2Vzbid0IGV4aXN0IGZvciBpT1MsIHNvIHdlIG5lZWQgdG8gY2hlY2tcclxuICAgICAgICBpZiAodHlwZW9mIHVuaXZlcnNhbExpbmtzICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICAgICB0eXBlb2YgdW5pdmVyc2FsTGlua3Muc3Vic2NyaWJlID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHVuaXZlcnNhbExpbmtzLnN1YnNjcmliZShudWxsLCB1bml2ZXJzYWxMaW5rc0NiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaU9TIDcgb3IgOCBjdXN0b20gVVJMIHNjaGVtZXMuXHJcbiAgICAgICAgLy8gVGhpcyBpcyBhbHNvIHRoZSBjdXJyZW50IGRlZmF1bHQgYmVoYXZpb3IgZm9yIGlPUyA5Ky5cclxuICAgICAgICAvLyBGb3IgdGhpcyB0byB3b3JrLCBjb3Jkb3ZhLXBsdWdpbi1jdXN0b211cmxzY2hlbWUgbmVlZHMgdG8gYmUgaW5zdGFsbGVkLlxyXG4gICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9FZGR5VmVyYnJ1Z2dlbi9DdXN0b20tVVJMLXNjaGVtZVxyXG4gICAgICAgIC8vIERvIG5vdCBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGRldmVsb3BlcidzIFVSTCBoYW5kbGVyLlxyXG4gICAgICAgIGNvbnN0IGV4aXN0aW5nSGFuZGxlT3BlblVSTCA9IGhhbmRsZU9wZW5VUkw7XHJcbiAgICAgICAgY29uc3QgcGFja2FnZVByZWZpeCA9IGAke0J1aWxkSW5mby5wYWNrYWdlTmFtZS50b0xvd2VyQ2FzZSgpfTovL2A7XHJcbiAgICAgICAgX2NvcmRvdmFXaW5kb3coKS5oYW5kbGVPcGVuVVJMID0gYXN5bmMgKHVybCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodXJsLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwYWNrYWdlUHJlZml4KSkge1xyXG4gICAgICAgICAgICAgICAgLy8gV2Ugd2FudCB0aGlzIGludGVudGlvbmFsbHkgdG8gZmxvYXRcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZmxvYXRpbmctcHJvbWlzZXNcclxuICAgICAgICAgICAgICAgIHVuaXZlcnNhbExpbmtzQ2IoeyB1cmwgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gQ2FsbCB0aGUgZGV2ZWxvcGVyJ3MgaGFuZGxlciBpZiBpdCBpcyBwcmVzZW50LlxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIGV4aXN0aW5nSGFuZGxlT3BlblVSTCA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBleGlzdGluZ0hhbmRsZU9wZW5VUkwodXJsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGRldmVsb3BlciBlcnJvci4gRG9uJ3Qgc3RvcCB0aGUgZmxvdyBvZiB0aGUgU0RLLlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBBbiBpbXBsZW1lbnRhdGlvbiBvZiB7QGxpbmsgUG9wdXBSZWRpcmVjdFJlc29sdmVyfSBzdWl0YWJsZSBmb3IgQ29yZG92YVxyXG4gKiBiYXNlZCBhcHBsaWNhdGlvbnMuXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmNvbnN0IGNvcmRvdmFQb3B1cFJlZGlyZWN0UmVzb2x2ZXIgPSBDb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyO1xyXG5mdW5jdGlvbiBnZW5lcmF0ZU5vRXZlbnQoKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHR5cGU6IFwidW5rbm93blwiIC8qIEF1dGhFdmVudFR5cGUuVU5LTk9XTiAqLyxcclxuICAgICAgICBldmVudElkOiBudWxsLFxyXG4gICAgICAgIHNlc3Npb25JZDogbnVsbCxcclxuICAgICAgICB1cmxSZXNwb25zZTogbnVsbCxcclxuICAgICAgICBwb3N0Qm9keTogbnVsbCxcclxuICAgICAgICB0ZW5hbnRJZDogbnVsbCxcclxuICAgICAgICBlcnJvcjogX2NyZWF0ZUVycm9yKFwibm8tYXV0aC1ldmVudFwiIC8qIEF1dGhFcnJvckNvZGUuTk9fQVVUSF9FVkVOVCAqLylcclxuICAgIH07XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLy8gVGhpcyBmdW5jdGlvbiBzaG91bGQgb25seSBiZSBjYWxsZWQgYnkgZnJhbWV3b3JrcyAoZS5nLiBGaXJlYmFzZVVJLXdlYikgdG8gbG9nIHRoZWlyIHVzYWdlLlxyXG4vLyBJdCBpcyBub3QgaW50ZW5kZWQgZm9yIGRpcmVjdCB1c2UgYnkgZGV2ZWxvcGVyIGFwcHMuIE5PIGpzZG9jIGhlcmUgdG8gaW50ZW50aW9uYWxseSBsZWF2ZSBpdCBvdXRcclxuLy8gb2YgYXV0b2dlbmVyYXRlZCBkb2N1bWVudGF0aW9uIHBhZ2VzIHRvIHJlZHVjZSBhY2NpZGVudGFsIG1pc3VzZS5cclxuZnVuY3Rpb24gYWRkRnJhbWV3b3JrRm9yTG9nZ2luZyhhdXRoLCBmcmFtZXdvcmspIHtcclxuICAgIF9jYXN0QXV0aChhdXRoKS5fbG9nRnJhbWV3b3JrKGZyYW1ld29yayk7XHJcbn1cblxuZXhwb3J0IHsgYWRkRnJhbWV3b3JrRm9yTG9nZ2luZywgY29yZG92YVBvcHVwUmVkaXJlY3RSZXNvbHZlciB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW50ZXJuYWwuanMubWFwXG4iLCJpbXBvcnQgeyBfcmVnaXN0ZXJDb21wb25lbnQsIHJlZ2lzdGVyVmVyc2lvbiwgX2dldFByb3ZpZGVyLCBnZXRBcHAsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIFNES19WRVJTSU9OIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgTG9nTGV2ZWwgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEZpcmViYXNlRXJyb3IsIGNyZWF0ZU1vY2tVc2VyVG9rZW4sIGdldE1vZHVsYXJJbnN0YW5jZSwgZGVlcEVxdWFsLCBnZXREZWZhdWx0RW11bGF0b3JIb3N0bmFtZUFuZFBvcnQsIGdldFVBLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNTYWZhcmkgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5pbXBvcnQgeyBJbnRlZ2VyLCBYaHJJbywgRXZlbnRUeXBlLCBFcnJvckNvZGUsIGNyZWF0ZVdlYkNoYW5uZWxUcmFuc3BvcnQsIGdldFN0YXRFdmVudFRhcmdldCwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgV2ViQ2hhbm5lbCwgRXZlbnQsIFN0YXQsIE1kNSB9IGZyb20gJ0BmaXJlYmFzZS93ZWJjaGFubmVsLXdyYXBwZXInO1xuXG5jb25zdCBiID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFNpbXBsZSB3cmFwcGVyIGFyb3VuZCBhIG51bGxhYmxlIFVJRC4gTW9zdGx5IGV4aXN0cyB0byBtYWtlIGNvZGUgbW9yZVxuICogcmVhZGFibGUuXG4gKi9cbmNsYXNzIFYge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy51aWQgPSB0O1xuICAgIH1cbiAgICBpc0F1dGhlbnRpY2F0ZWQoKSB7XG4gICAgICAgIHJldHVybiBudWxsICE9IHRoaXMudWlkO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEga2V5IHJlcHJlc2VudGluZyB0aGlzIHVzZXIsIHN1aXRhYmxlIGZvciBpbmNsdXNpb24gaW4gYVxuICAgICAqIGRpY3Rpb25hcnkuXG4gICAgICovICAgIHRvS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pc0F1dGhlbnRpY2F0ZWQoKSA/IFwidWlkOlwiICsgdGhpcy51aWQgOiBcImFub255bW91cy11c2VyXCI7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdC51aWQgPT09IHRoaXMudWlkO1xuICAgIH1cbn1cblxuLyoqIEEgdXNlciB3aXRoIGEgbnVsbCBVSUQuICovIFYuVU5BVVRIRU5USUNBVEVEID0gbmV3IFYobnVsbCksIFxuLy8gVE9ETyhtaWtlbGVoZW4pOiBMb29rIGludG8gZ2V0dGluZyBhIHByb3BlciB1aWQtZXF1aXZhbGVudCBmb3Jcbi8vIG5vbi1GaXJlYmFzZUF1dGggcHJvdmlkZXJzLlxuVi5HT09HTEVfQ1JFREVOVElBTFMgPSBuZXcgVihcImdvb2dsZS1jcmVkZW50aWFscy11aWRcIiksIFYuRklSU1RfUEFSVFkgPSBuZXcgVihcImZpcnN0LXBhcnR5LXVpZFwiKSwgXG5WLk1PQ0tfVVNFUiA9IG5ldyBWKFwibW9jay11c2VyXCIpO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xubGV0IFMgPSBcIjkuMjMuMFwiO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgRCA9IG5ldyBMb2dnZXIoXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCIpO1xuXG4vLyBIZWxwZXIgbWV0aG9kcyBhcmUgbmVlZGVkIGJlY2F1c2UgdmFyaWFibGVzIGNhbid0IGJlIGV4cG9ydGVkIGFzIHJlYWQvd3JpdGVcbmZ1bmN0aW9uIEMoKSB7XG4gICAgcmV0dXJuIEQubG9nTGV2ZWw7XG59XG5cbi8qKlxuICogU2V0cyB0aGUgdmVyYm9zaXR5IG9mIENsb3VkIEZpcmVzdG9yZSBsb2dzIChkZWJ1ZywgZXJyb3IsIG9yIHNpbGVudCkuXG4gKlxuICogQHBhcmFtIGxvZ0xldmVsIC0gVGhlIHZlcmJvc2l0eSB5b3Ugc2V0IGZvciBhY3Rpdml0eSBhbmQgZXJyb3IgbG9nZ2luZy4gQ2FuXG4gKiAgIGJlIGFueSBvZiB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAqXG4gKiAgIDx1bD5cbiAqICAgICA8bGk+YGRlYnVnYCBmb3IgdGhlIG1vc3QgdmVyYm9zZSBsb2dnaW5nIGxldmVsLCBwcmltYXJpbHkgZm9yXG4gKiAgICAgZGVidWdnaW5nLjwvbGk+XG4gKiAgICAgPGxpPmBlcnJvcmAgdG8gbG9nIGVycm9ycyBvbmx5LjwvbGk+XG4gKiAgICAgPGxpPjxjb2RlPmBzaWxlbnRgIHRvIHR1cm4gb2ZmIGxvZ2dpbmcuPC9saT5cbiAqICAgPC91bD5cbiAqLyBmdW5jdGlvbiB4KHQpIHtcbiAgICBELnNldExvZ0xldmVsKHQpO1xufVxuXG5mdW5jdGlvbiBOKHQsIC4uLmUpIHtcbiAgICBpZiAoRC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5ERUJVRykge1xuICAgICAgICBjb25zdCBuID0gZS5tYXAoJCk7XG4gICAgICAgIEQuZGVidWcoYEZpcmVzdG9yZSAoJHtTfSk6ICR7dH1gLCAuLi5uKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGsodCwgLi4uZSkge1xuICAgIGlmIChELmxvZ0xldmVsIDw9IExvZ0xldmVsLkVSUk9SKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcCgkKTtcbiAgICAgICAgRC5lcnJvcihgRmlyZXN0b3JlICgke1N9KTogJHt0fWAsIC4uLm4pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBNKHQsIC4uLmUpIHtcbiAgICBpZiAoRC5sb2dMZXZlbCA8PSBMb2dMZXZlbC5XQVJOKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcCgkKTtcbiAgICAgICAgRC53YXJuKGBGaXJlc3RvcmUgKCR7U30pOiAke3R9YCwgLi4ubik7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIGFkZGl0aW9uYWwgbG9nIHBhcmFtZXRlciB0byBhIHN0cmluZyByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiAkKHQpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkgcmV0dXJuIHQ7XG4gICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGUgPSB0LCBKU09OLnN0cmluZ2lmeShlKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIENvbnZlcnRpbmcgdG8gSlNPTiBmYWlsZWQsIGp1c3QgbG9nIHRoZSBvYmplY3QgZGlyZWN0bHlcbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4gICAgLyoqIEZvcm1hdHMgYW4gb2JqZWN0IGFzIGEgSlNPTiBzdHJpbmcsIHN1aXRhYmxlIGZvciBsb2dnaW5nLiAqL1xuICAgIHZhciBlO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBVbmNvbmRpdGlvbmFsbHkgZmFpbHMsIHRocm93aW5nIGFuIEVycm9yIHdpdGggdGhlIGdpdmVuIG1lc3NhZ2UuXG4gKiBNZXNzYWdlcyBhcmUgc3RyaXBwZWQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gKlxuICogUmV0dXJucyBgbmV2ZXJgIGFuZCBjYW4gYmUgdXNlZCBpbiBleHByZXNzaW9uczpcbiAqIEBleGFtcGxlXG4gKiBsZXQgZnV0dXJlVmFyID0gZmFpbCgnbm90IGltcGxlbWVudGVkIHlldCcpO1xuICovIGZ1bmN0aW9uIE8odCA9IFwiVW5leHBlY3RlZCBzdGF0ZVwiKSB7XG4gICAgLy8gTG9nIHRoZSBmYWlsdXJlIGluIGFkZGl0aW9uIHRvIHRocm93IGFuIGV4Y2VwdGlvbiwganVzdCBpbiBjYXNlIHRoZVxuICAgIC8vIGV4Y2VwdGlvbiBpcyBzd2FsbG93ZWQuXG4gICAgY29uc3QgZSA9IGBGSVJFU1RPUkUgKCR7U30pIElOVEVSTkFMIEFTU0VSVElPTiBGQUlMRUQ6IGAgKyB0O1xuICAgIC8vIE5PVEU6IFdlIGRvbid0IHVzZSBGaXJlc3RvcmVFcnJvciBoZXJlIGJlY2F1c2UgdGhlc2UgYXJlIGludGVybmFsIGZhaWx1cmVzXG4gICAgLy8gdGhhdCBjYW5ub3QgYmUgaGFuZGxlZCBieSB0aGUgdXNlci4gKEFsc28gaXQgd291bGQgY3JlYXRlIGEgY2lyY3VsYXJcbiAgICAvLyBkZXBlbmRlbmN5IGJldHdlZW4gdGhlIGVycm9yIGFuZCBhc3NlcnQgbW9kdWxlcyB3aGljaCBkb2Vzbid0IHdvcmsuKVxuICAgIHRocm93IGsoZSksIG5ldyBFcnJvcihlKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIE1lc3NhZ2VzIGFyZSBzdHJpcHBlZCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAqLyBmdW5jdGlvbiBGKHQsIGUpIHtcbiAgICB0IHx8IE8oKTtcbn1cblxuLyoqXG4gKiBGYWlscyBpZiB0aGUgZ2l2ZW4gYXNzZXJ0aW9uIGNvbmRpdGlvbiBpcyBmYWxzZSwgdGhyb3dpbmcgYW4gRXJyb3Igd2l0aCB0aGVcbiAqIGdpdmVuIG1lc3NhZ2UgaWYgaXQgZGlkLlxuICpcbiAqIFRoZSBjb2RlIG9mIGNhbGxzaXRlcyBpbnZva2luZyB0aGlzIGZ1bmN0aW9uIGFyZSBzdHJpcHBlZCBvdXQgaW4gcHJvZHVjdGlvblxuICogYnVpbGRzLiBBbnkgc2lkZS1lZmZlY3RzIG9mIGNvZGUgd2l0aGluIHRoZSBkZWJ1Z0Fzc2VydCgpIGludm9jYXRpb24gd2lsbCBub3RcbiAqIGhhcHBlbiBpbiB0aGlzIGNhc2UuXG4gKlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gQih0LCBlKSB7XG4gICAgdCB8fCBPKCk7XG59XG5cbi8qKlxuICogQ2FzdHMgYG9iamAgdG8gYFRgLiBJbiBub24tcHJvZHVjdGlvbiBidWlsZHMsIHZlcmlmaWVzIHRoYXQgYG9iamAgaXMgYW5cbiAqIGluc3RhbmNlIG9mIGBUYCBiZWZvcmUgY2FzdGluZy5cbiAqLyBmdW5jdGlvbiBMKHQsIFxuLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbmUpIHtcbiAgICByZXR1cm4gdDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgcSA9IHtcbiAgICAvLyBDYXVzZXMgYXJlIGNvcGllZCBmcm9tOlxuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9ncnBjL2dycGMvYmxvYi9iY2VlYzk0ZWE0ZmM1ZjAwODVkODEyMzVkOGUxYzA2Nzk4ZGMzNDFhL2luY2x1ZGUvZ3JwYyUyQiUyQi9pbXBsL2NvZGVnZW4vc3RhdHVzX2NvZGVfZW51bS5oXG4gICAgLyoqIE5vdCBhbiBlcnJvcjsgcmV0dXJuZWQgb24gc3VjY2Vzcy4gKi9cbiAgICBPSzogXCJva1wiLFxuICAgIC8qKiBUaGUgb3BlcmF0aW9uIHdhcyBjYW5jZWxsZWQgKHR5cGljYWxseSBieSB0aGUgY2FsbGVyKS4gKi9cbiAgICBDQU5DRUxMRUQ6IFwiY2FuY2VsbGVkXCIsXG4gICAgLyoqIFVua25vd24gZXJyb3Igb3IgYW4gZXJyb3IgZnJvbSBhIGRpZmZlcmVudCBlcnJvciBkb21haW4uICovXG4gICAgVU5LTk9XTjogXCJ1bmtub3duXCIsXG4gICAgLyoqXG4gICAgICogQ2xpZW50IHNwZWNpZmllZCBhbiBpbnZhbGlkIGFyZ3VtZW50LiBOb3RlIHRoYXQgdGhpcyBkaWZmZXJzIGZyb21cbiAgICAgKiBGQUlMRURfUFJFQ09ORElUSU9OLiBJTlZBTElEX0FSR1VNRU5UIGluZGljYXRlcyBhcmd1bWVudHMgdGhhdCBhcmVcbiAgICAgKiBwcm9ibGVtYXRpYyByZWdhcmRsZXNzIG9mIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtIChlLmcuLCBhIG1hbGZvcm1lZCBmaWxlXG4gICAgICogbmFtZSkuXG4gICAgICovXG4gICAgSU5WQUxJRF9BUkdVTUVOVDogXCJpbnZhbGlkLWFyZ3VtZW50XCIsXG4gICAgLyoqXG4gICAgICogRGVhZGxpbmUgZXhwaXJlZCBiZWZvcmUgb3BlcmF0aW9uIGNvdWxkIGNvbXBsZXRlLiBGb3Igb3BlcmF0aW9ucyB0aGF0XG4gICAgICogY2hhbmdlIHRoZSBzdGF0ZSBvZiB0aGUgc3lzdGVtLCB0aGlzIGVycm9yIG1heSBiZSByZXR1cm5lZCBldmVuIGlmIHRoZVxuICAgICAqIG9wZXJhdGlvbiBoYXMgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS4gRm9yIGV4YW1wbGUsIGEgc3VjY2Vzc2Z1bCByZXNwb25zZVxuICAgICAqIGZyb20gYSBzZXJ2ZXIgY291bGQgaGF2ZSBiZWVuIGRlbGF5ZWQgbG9uZyBlbm91Z2ggZm9yIHRoZSBkZWFkbGluZSB0b1xuICAgICAqIGV4cGlyZS5cbiAgICAgKi9cbiAgICBERUFETElORV9FWENFRURFRDogXCJkZWFkbGluZS1leGNlZWRlZFwiLFxuICAgIC8qKiBTb21lIHJlcXVlc3RlZCBlbnRpdHkgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSB3YXMgbm90IGZvdW5kLiAqL1xuICAgIE5PVF9GT1VORDogXCJub3QtZm91bmRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIGVudGl0eSB0aGF0IHdlIGF0dGVtcHRlZCB0byBjcmVhdGUgKGUuZy4sIGZpbGUgb3IgZGlyZWN0b3J5KSBhbHJlYWR5XG4gICAgICogZXhpc3RzLlxuICAgICAqL1xuICAgIEFMUkVBRFlfRVhJU1RTOiBcImFscmVhZHktZXhpc3RzXCIsXG4gICAgLyoqXG4gICAgICogVGhlIGNhbGxlciBkb2VzIG5vdCBoYXZlIHBlcm1pc3Npb24gdG8gZXhlY3V0ZSB0aGUgc3BlY2lmaWVkIG9wZXJhdGlvbi5cbiAgICAgKiBQRVJNSVNTSU9OX0RFTklFRCBtdXN0IG5vdCBiZSB1c2VkIGZvciByZWplY3Rpb25zIGNhdXNlZCBieSBleGhhdXN0aW5nXG4gICAgICogc29tZSByZXNvdXJjZSAodXNlIFJFU09VUkNFX0VYSEFVU1RFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqIFBFUk1JU1NJT05fREVOSUVEIG11c3Qgbm90IGJlIHVzZWQgaWYgdGhlIGNhbGxlciBjYW4gbm90IGJlIGlkZW50aWZpZWRcbiAgICAgKiAodXNlIFVOQVVUSEVOVElDQVRFRCBpbnN0ZWFkIGZvciB0aG9zZSBlcnJvcnMpLlxuICAgICAqL1xuICAgIFBFUk1JU1NJT05fREVOSUVEOiBcInBlcm1pc3Npb24tZGVuaWVkXCIsXG4gICAgLyoqXG4gICAgICogVGhlIHJlcXVlc3QgZG9lcyBub3QgaGF2ZSB2YWxpZCBhdXRoZW50aWNhdGlvbiBjcmVkZW50aWFscyBmb3IgdGhlXG4gICAgICogb3BlcmF0aW9uLlxuICAgICAqL1xuICAgIFVOQVVUSEVOVElDQVRFRDogXCJ1bmF1dGhlbnRpY2F0ZWRcIixcbiAgICAvKipcbiAgICAgKiBTb21lIHJlc291cmNlIGhhcyBiZWVuIGV4aGF1c3RlZCwgcGVyaGFwcyBhIHBlci11c2VyIHF1b3RhLCBvciBwZXJoYXBzIHRoZVxuICAgICAqIGVudGlyZSBmaWxlIHN5c3RlbSBpcyBvdXQgb2Ygc3BhY2UuXG4gICAgICovXG4gICAgUkVTT1VSQ0VfRVhIQVVTVEVEOiBcInJlc291cmNlLWV4aGF1c3RlZFwiLFxuICAgIC8qKlxuICAgICAqIE9wZXJhdGlvbiB3YXMgcmVqZWN0ZWQgYmVjYXVzZSB0aGUgc3lzdGVtIGlzIG5vdCBpbiBhIHN0YXRlIHJlcXVpcmVkIGZvclxuICAgICAqIHRoZSBvcGVyYXRpb24ncyBleGVjdXRpb24uIEZvciBleGFtcGxlLCBkaXJlY3RvcnkgdG8gYmUgZGVsZXRlZCBtYXkgYmVcbiAgICAgKiBub24tZW1wdHksIGFuIHJtZGlyIG9wZXJhdGlvbiBpcyBhcHBsaWVkIHRvIGEgbm9uLWRpcmVjdG9yeSwgZXRjLlxuICAgICAqXG4gICAgICogQSBsaXRtdXMgdGVzdCB0aGF0IG1heSBoZWxwIGEgc2VydmljZSBpbXBsZW1lbnRvciBpbiBkZWNpZGluZ1xuICAgICAqIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiwgQUJPUlRFRCwgYW5kIFVOQVZBSUxBQkxFOlxuICAgICAqICAoYSkgVXNlIFVOQVZBSUxBQkxFIGlmIHRoZSBjbGllbnQgY2FuIHJldHJ5IGp1c3QgdGhlIGZhaWxpbmcgY2FsbC5cbiAgICAgKiAgKGIpIFVzZSBBQk9SVEVEIGlmIHRoZSBjbGllbnQgc2hvdWxkIHJldHJ5IGF0IGEgaGlnaGVyLWxldmVsXG4gICAgICogICAgICAoZS5nLiwgcmVzdGFydGluZyBhIHJlYWQtbW9kaWZ5LXdyaXRlIHNlcXVlbmNlKS5cbiAgICAgKiAgKGMpIFVzZSBGQUlMRURfUFJFQ09ORElUSU9OIGlmIHRoZSBjbGllbnQgc2hvdWxkIG5vdCByZXRyeSB1bnRpbFxuICAgICAqICAgICAgdGhlIHN5c3RlbSBzdGF0ZSBoYXMgYmVlbiBleHBsaWNpdGx5IGZpeGVkLiBFLmcuLCBpZiBhbiBcInJtZGlyXCJcbiAgICAgKiAgICAgIGZhaWxzIGJlY2F1c2UgdGhlIGRpcmVjdG9yeSBpcyBub24tZW1wdHksIEZBSUxFRF9QUkVDT05ESVRJT05cbiAgICAgKiAgICAgIHNob3VsZCBiZSByZXR1cm5lZCBzaW5jZSB0aGUgY2xpZW50IHNob3VsZCBub3QgcmV0cnkgdW5sZXNzXG4gICAgICogICAgICB0aGV5IGhhdmUgZmlyc3QgZml4ZWQgdXAgdGhlIGRpcmVjdG9yeSBieSBkZWxldGluZyBmaWxlcyBmcm9tIGl0LlxuICAgICAqICAoZCkgVXNlIEZBSUxFRF9QUkVDT05ESVRJT04gaWYgdGhlIGNsaWVudCBwZXJmb3JtcyBjb25kaXRpb25hbFxuICAgICAqICAgICAgUkVTVCBHZXQvVXBkYXRlL0RlbGV0ZSBvbiBhIHJlc291cmNlIGFuZCB0aGUgcmVzb3VyY2Ugb24gdGhlXG4gICAgICogICAgICBzZXJ2ZXIgZG9lcyBub3QgbWF0Y2ggdGhlIGNvbmRpdGlvbi4gRS5nLiwgY29uZmxpY3RpbmdcbiAgICAgKiAgICAgIHJlYWQtbW9kaWZ5LXdyaXRlIG9uIHRoZSBzYW1lIHJlc291cmNlLlxuICAgICAqL1xuICAgIEZBSUxFRF9QUkVDT05ESVRJT046IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiLFxuICAgIC8qKlxuICAgICAqIFRoZSBvcGVyYXRpb24gd2FzIGFib3J0ZWQsIHR5cGljYWxseSBkdWUgdG8gYSBjb25jdXJyZW5jeSBpc3N1ZSBsaWtlXG4gICAgICogc2VxdWVuY2VyIGNoZWNrIGZhaWx1cmVzLCB0cmFuc2FjdGlvbiBhYm9ydHMsIGV0Yy5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBBQk9SVEVEOiBcImFib3J0ZWRcIixcbiAgICAvKipcbiAgICAgKiBPcGVyYXRpb24gd2FzIGF0dGVtcHRlZCBwYXN0IHRoZSB2YWxpZCByYW5nZS4gRS5nLiwgc2Vla2luZyBvciByZWFkaW5nXG4gICAgICogcGFzdCBlbmQgb2YgZmlsZS5cbiAgICAgKlxuICAgICAqIFVubGlrZSBJTlZBTElEX0FSR1VNRU5ULCB0aGlzIGVycm9yIGluZGljYXRlcyBhIHByb2JsZW0gdGhhdCBtYXkgYmUgZml4ZWRcbiAgICAgKiBpZiB0aGUgc3lzdGVtIHN0YXRlIGNoYW5nZXMuIEZvciBleGFtcGxlLCBhIDMyLWJpdCBmaWxlIHN5c3RlbSB3aWxsXG4gICAgICogZ2VuZXJhdGUgSU5WQUxJRF9BUkdVTUVOVCBpZiBhc2tlZCB0byByZWFkIGF0IGFuIG9mZnNldCB0aGF0IGlzIG5vdCBpbiB0aGVcbiAgICAgKiByYW5nZSBbMCwyXjMyLTFdLCBidXQgaXQgd2lsbCBnZW5lcmF0ZSBPVVRfT0ZfUkFOR0UgaWYgYXNrZWQgdG8gcmVhZCBmcm9tXG4gICAgICogYW4gb2Zmc2V0IHBhc3QgdGhlIGN1cnJlbnQgZmlsZSBzaXplLlxuICAgICAqXG4gICAgICogVGhlcmUgaXMgYSBmYWlyIGJpdCBvZiBvdmVybGFwIGJldHdlZW4gRkFJTEVEX1BSRUNPTkRJVElPTiBhbmRcbiAgICAgKiBPVVRfT0ZfUkFOR0UuIFdlIHJlY29tbWVuZCB1c2luZyBPVVRfT0ZfUkFOR0UgKHRoZSBtb3JlIHNwZWNpZmljIGVycm9yKVxuICAgICAqIHdoZW4gaXQgYXBwbGllcyBzbyB0aGF0IGNhbGxlcnMgd2hvIGFyZSBpdGVyYXRpbmcgdGhyb3VnaCBhIHNwYWNlIGNhblxuICAgICAqIGVhc2lseSBsb29rIGZvciBhbiBPVVRfT0ZfUkFOR0UgZXJyb3IgdG8gZGV0ZWN0IHdoZW4gdGhleSBhcmUgZG9uZS5cbiAgICAgKi9cbiAgICBPVVRfT0ZfUkFOR0U6IFwib3V0LW9mLXJhbmdlXCIsXG4gICAgLyoqIE9wZXJhdGlvbiBpcyBub3QgaW1wbGVtZW50ZWQgb3Igbm90IHN1cHBvcnRlZC9lbmFibGVkIGluIHRoaXMgc2VydmljZS4gKi9cbiAgICBVTklNUExFTUVOVEVEOiBcInVuaW1wbGVtZW50ZWRcIixcbiAgICAvKipcbiAgICAgKiBJbnRlcm5hbCBlcnJvcnMuIE1lYW5zIHNvbWUgaW52YXJpYW50cyBleHBlY3RlZCBieSB1bmRlcmx5aW5nIFN5c3RlbSBoYXNcbiAgICAgKiBiZWVuIGJyb2tlbi4gSWYgeW91IHNlZSBvbmUgb2YgdGhlc2UgZXJyb3JzLCBTb21ldGhpbmcgaXMgdmVyeSBicm9rZW4uXG4gICAgICovXG4gICAgSU5URVJOQUw6IFwiaW50ZXJuYWxcIixcbiAgICAvKipcbiAgICAgKiBUaGUgc2VydmljZSBpcyBjdXJyZW50bHkgdW5hdmFpbGFibGUuIFRoaXMgaXMgYSBtb3N0IGxpa2VseSBhIHRyYW5zaWVudFxuICAgICAqIGNvbmRpdGlvbiBhbmQgbWF5IGJlIGNvcnJlY3RlZCBieSByZXRyeWluZyB3aXRoIGEgYmFja29mZi5cbiAgICAgKlxuICAgICAqIFNlZSBsaXRtdXMgdGVzdCBhYm92ZSBmb3IgZGVjaWRpbmcgYmV0d2VlbiBGQUlMRURfUFJFQ09ORElUSU9OLCBBQk9SVEVELFxuICAgICAqIGFuZCBVTkFWQUlMQUJMRS5cbiAgICAgKi9cbiAgICBVTkFWQUlMQUJMRTogXCJ1bmF2YWlsYWJsZVwiLFxuICAgIC8qKiBVbnJlY292ZXJhYmxlIGRhdGEgbG9zcyBvciBjb3JydXB0aW9uLiAqL1xuICAgIERBVEFfTE9TUzogXCJkYXRhLWxvc3NcIlxufTtcblxuLyoqIEFuIGVycm9yIHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIG9wZXJhdGlvbi4gKi8gY2xhc3MgVSBleHRlbmRzIEZpcmViYXNlRXJyb3Ige1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIGJhY2tlbmQgZXJyb3IgY29kZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBlcnJvci5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIGN1c3RvbSBlcnJvciBkZXNjcmlwdGlvbi5cbiAgICAgKi9cbiAgICBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUpLCB0aGlzLmNvZGUgPSB0LCB0aGlzLm1lc3NhZ2UgPSBlLCBcbiAgICAgICAgLy8gSEFDSzogV2Ugd3JpdGUgYSB0b1N0cmluZyBwcm9wZXJ0eSBkaXJlY3RseSBiZWNhdXNlIEVycm9yIGlzIG5vdCBhIHJlYWxcbiAgICAgICAgLy8gY2xhc3MgYW5kIHNvIGluaGVyaXRhbmNlIGRvZXMgbm90IHdvcmsgY29ycmVjdGx5LiBXZSBjb3VsZCBhbHRlcm5hdGl2ZWx5XG4gICAgICAgIC8vIGRvIHRoZSBzYW1lIFwiYmFjay1kb29yIGluaGVyaXRhbmNlXCIgdHJpY2sgdGhhdCBGaXJlYmFzZUVycm9yIGRvZXMuXG4gICAgICAgIHRoaXMudG9TdHJpbmcgPSAoKSA9PiBgJHt0aGlzLm5hbWV9OiBbY29kZT0ke3RoaXMuY29kZX1dOiAke3RoaXMubWVzc2FnZX1gO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY2xhc3MgSyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBQcm9taXNlKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdGhpcy5yZXNvbHZlID0gdCwgdGhpcy5yZWplY3QgPSBlO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBHIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IGUsIHRoaXMudHlwZSA9IFwiT0F1dGhcIiwgdGhpcy5oZWFkZXJzID0gbmV3IE1hcCwgdGhpcy5oZWFkZXJzLnNldChcIkF1dGhvcml6YXRpb25cIiwgYEJlYXJlciAke3R9YCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyB5aWVsZHMgYW4gZW1wdHkgdG9rZW4uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBRIHtcbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIC8vIEZpcmUgd2l0aCBpbml0aWFsIHVzZXIuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShWLlVOQVVUSEVOVElDQVRFRCkpKTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxufVxuXG4vKipcbiAqIEEgQ3JlZGVudGlhbHNQcm92aWRlciB0aGF0IGFsd2F5cyByZXR1cm5zIGEgY29uc3RhbnQgdG9rZW4uIFVzZWQgZm9yXG4gKiBlbXVsYXRvciB0b2tlbiBtb2NraW5nLlxuICovIGNsYXNzIGoge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50b2tlbiA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogU3RvcmVzIHRoZSBsaXN0ZW5lciByZWdpc3RlcmVkIHdpdGggc2V0Q2hhbmdlTGlzdGVuZXIoKVxuICAgICAgICAgKiBUaGlzIGlzbid0IGFjdHVhbGx5IG5lY2Vzc2FyeSBzaW5jZSB0aGUgVUlEIG5ldmVyIGNoYW5nZXMsIGJ1dCB3ZSB1c2UgdGhpc1xuICAgICAgICAgKiB0byB2ZXJpZnkgdGhlIGxpc3RlbiBjb250cmFjdCBpcyBhZGhlcmVkIHRvIGluIHRlc3RzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMudG9rZW4pO1xuICAgIH1cbiAgICBpbnZhbGlkYXRlVG9rZW4oKSB7fVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IGUsIFxuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1c2VyLlxuICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKCgpID0+IGUodGhpcy50b2tlbi51c2VyKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgdGhpcy5jaGFuZ2VMaXN0ZW5lciA9IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyB6IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudCA9IHQsIFxuICAgICAgICAvKiogVHJhY2tzIHRoZSBjdXJyZW50IFVzZXIuICovXG4gICAgICAgIHRoaXMuY3VycmVudFVzZXIgPSBWLlVOQVVUSEVOVElDQVRFRCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBDb3VudGVyIHVzZWQgdG8gZGV0ZWN0IGlmIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIGEgZ2V0VG9rZW4gcmVxdWVzdCB3YXNcbiAgICAgICAgICogb3V0c3RhbmRpbmcuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmkgPSAwLCB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy5pO1xuICAgICAgICAvLyBBIGNoYW5nZSBsaXN0ZW5lciB0aGF0IHByZXZlbnRzIGRvdWJsZS1maXJpbmcgZm9yIHRoZSBzYW1lIHRva2VuIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gdCA9PiB0aGlzLmkgIT09IG4gPyAobiA9IHRoaXMuaSwgZSh0KSkgOiBQcm9taXNlLnJlc29sdmUoKTtcbiAgICAgICAgLy8gQSBwcm9taXNlIHRoYXQgY2FuIGJlIHdhaXRlZCBvbiB0byBibG9jayBvbiB0aGUgbmV4dCB0b2tlbiBjaGFuZ2UuXG4gICAgICAgIC8vIFRoaXMgcHJvbWlzZSBpcyByZS1jcmVhdGVkIGFmdGVyIGVhY2ggY2hhbmdlLlxuICAgICAgICAgICAgICAgIGxldCBpID0gbmV3IEs7XG4gICAgICAgIHRoaXMubyA9ICgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuaSsrLCB0aGlzLmN1cnJlbnRVc2VyID0gdGhpcy51KCksIGkucmVzb2x2ZSgpLCBpID0gbmV3IEssIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gcyh0aGlzLmN1cnJlbnRVc2VyKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCByID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGk7XG4gICAgICAgICAgICB0LmVucXVldWVSZXRyeWFibGUoKGFzeW5jICgpID0+IHtcbiAgICAgICAgICAgICAgICBhd2FpdCBlLnByb21pc2UsIGF3YWl0IHModGhpcy5jdXJyZW50VXNlcik7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0sIG8gPSB0ID0+IHtcbiAgICAgICAgICAgIE4oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBkZXRlY3RlZFwiKSwgdGhpcy5hdXRoID0gdCwgdGhpcy5hdXRoLmFkZEF1dGhUb2tlbkxpc3RlbmVyKHRoaXMubyksIFxuICAgICAgICAgICAgcigpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnQub25Jbml0KCh0ID0+IG8odCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBdXRoIHJpZ2h0IGFmdGVyIEZpcmVzdG9yZSwgc28gd2UgZ2l2ZSBpdFxuICAgICAgICAvLyBhIGNoYW5jZSB0byByZWdpc3RlciBpdHNlbGYgd2l0aCB0aGUgY29tcG9uZW50IGZyYW1ld29yayBiZWZvcmUgd2VcbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoZXRoZXIgdG8gc3RhcnQgdXAgaW4gdW5hdXRoZW50aWNhdGVkIG1vZGUuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hdXRoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudC5nZXRJbW1lZGlhdGUoe1xuICAgICAgICAgICAgICAgICAgICBvcHRpb25hbDogITBcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB0ID8gbyh0KSA6IChcbiAgICAgICAgICAgICAgICAvLyBJZiBhdXRoIGlzIHN0aWxsIG5vdCBhdmFpbGFibGUsIHByb2NlZWQgd2l0aCBgbnVsbGAgdXNlclxuICAgICAgICAgICAgICAgIE4oXCJGaXJlYmFzZUF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyXCIsIFwiQXV0aCBub3QgeWV0IGRldGVjdGVkXCIpLCBpLnJlc29sdmUoKSwgaSA9IG5ldyBLKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApLCByKCk7XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICAvLyBUYWtlIG5vdGUgb2YgdGhlIGN1cnJlbnQgdmFsdWUgb2YgdGhlIHRva2VuQ291bnRlciBzbyB0aGF0IHRoaXMgbWV0aG9kXG4gICAgICAgIC8vIGNhbiBmYWlsICh3aXRoIGFuIEFCT1JURUQgZXJyb3IpIGlmIHRoZXJlIGlzIGEgdG9rZW4gY2hhbmdlIHdoaWxlIHRoZVxuICAgICAgICAvLyByZXF1ZXN0IGlzIG91dHN0YW5kaW5nLlxuICAgICAgICBjb25zdCB0ID0gdGhpcy5pLCBlID0gdGhpcy5mb3JjZVJlZnJlc2g7XG4gICAgICAgIHJldHVybiB0aGlzLmZvcmNlUmVmcmVzaCA9ICExLCB0aGlzLmF1dGggPyB0aGlzLmF1dGguZ2V0VG9rZW4oZSkudGhlbigoZSA9PiBcbiAgICAgICAgLy8gQ2FuY2VsIHRoZSByZXF1ZXN0IHNpbmNlIHRoZSB0b2tlbiBjaGFuZ2VkIHdoaWxlIHRoZSByZXF1ZXN0IHdhc1xuICAgICAgICAvLyBvdXRzdGFuZGluZyBzbyB0aGUgcmVzcG9uc2UgaXMgcG90ZW50aWFsbHkgZm9yIGEgcHJldmlvdXMgdXNlciAod2hpY2hcbiAgICAgICAgLy8gdXNlciwgd2UgY2FuJ3QgYmUgc3VyZSkuXG4gICAgICAgIHRoaXMuaSAhPT0gdCA/IChOKFwiRmlyZWJhc2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlclwiLCBcImdldFRva2VuIGFib3J0ZWQgZHVlIHRvIHRva2VuIGNoYW5nZS5cIiksIFxuICAgICAgICB0aGlzLmdldFRva2VuKCkpIDogZSA/IChGKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUuYWNjZXNzVG9rZW4pLCBuZXcgRyhlLmFjY2Vzc1Rva2VuLCB0aGlzLmN1cnJlbnRVc2VyKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXV0aCAmJiB0aGlzLmF1dGgucmVtb3ZlQXV0aFRva2VuTGlzdGVuZXIodGhpcy5vKTtcbiAgICB9XG4gICAgLy8gQXV0aC5nZXRVaWQoKSBjYW4gcmV0dXJuIG51bGwgZXZlbiB3aXRoIGEgdXNlciBsb2dnZWQgaW4uIEl0IGlzIGJlY2F1c2VcbiAgICAvLyBnZXRVaWQoKSBpcyBzeW5jaHJvbm91cywgYnV0IHRoZSBhdXRoIGNvZGUgcG9wdWxhdGluZyBVaWQgaXMgYXN5bmNocm9ub3VzLlxuICAgIC8vIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBpbiB0aGUgQXV0aFRva2VuTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAvLyB0byBndWFyYW50ZWUgdG8gZ2V0IHRoZSBhY3R1YWwgdXNlci5cbiAgICB1KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5hdXRoICYmIHRoaXMuYXV0aC5nZXRVaWQoKTtcbiAgICAgICAgcmV0dXJuIEYobnVsbCA9PT0gdCB8fCBcInN0cmluZ1wiID09IHR5cGVvZiB0KSwgbmV3IFYodCk7XG4gICAgfVxufVxuXG4vKlxuICogRmlyc3RQYXJ0eVRva2VuIHByb3ZpZGVzIGEgZnJlc2ggdG9rZW4gZWFjaCB0aW1lIGl0cyB2YWx1ZVxuICogaXMgcmVxdWVzdGVkLCBiZWNhdXNlIGlmIHRoZSB0b2tlbiBpcyB0b28gb2xkLCByZXF1ZXN0cyB3aWxsIGJlIHJlamVjdGVkLlxuICogVGVjaG5pY2FsbHkgdGhpcyBtYXkgbm8gbG9uZ2VyIGJlIG5lY2Vzc2FyeSBzaW5jZSB0aGUgU0RLIHNob3VsZCBncmFjZWZ1bGx5XG4gKiByZWNvdmVyIGZyb20gdW5hdXRoZW50aWNhdGVkIGVycm9ycyAoc2VlIGIvMzMxNDc4MTggZm9yIGNvbnRleHQpLCBidXQgaXQnc1xuICogc2FmZXIgdG8ga2VlcCB0aGUgaW1wbGVtZW50YXRpb24gYXMtaXMuXG4gKi8gY2xhc3MgVyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmggPSB0LCB0aGlzLmwgPSBlLCB0aGlzLm0gPSBuLCB0aGlzLnR5cGUgPSBcIkZpcnN0UGFydHlcIiwgdGhpcy51c2VyID0gVi5GSVJTVF9QQVJUWSwgXG4gICAgICAgIHRoaXMuZyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgYW4gYXV0aG9yaXphdGlvbiB0b2tlbiwgdXNpbmcgYSBwcm92aWRlZCBmYWN0b3J5IGZ1bmN0aW9uLCBvciByZXR1cm5cbiAgICAgKiBudWxsLlxuICAgICAqLyAgICBwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tID8gdGhpcy5tKCkgOiBudWxsO1xuICAgIH1cbiAgICBnZXQgaGVhZGVycygpIHtcbiAgICAgICAgdGhpcy5nLnNldChcIlgtR29vZy1BdXRoVXNlclwiLCB0aGlzLmgpO1xuICAgICAgICAvLyBVc2UgYXJyYXkgbm90YXRpb24gdG8gcHJldmVudCBtaW5pZmljYXRpb25cbiAgICAgICAgY29uc3QgdCA9IHRoaXMucCgpO1xuICAgICAgICByZXR1cm4gdCAmJiB0aGlzLmcuc2V0KFwiQXV0aG9yaXphdGlvblwiLCB0KSwgdGhpcy5sICYmIHRoaXMuZy5zZXQoXCJYLUdvb2ctSWFtLUF1dGhvcml6YXRpb24tVG9rZW5cIiwgdGhpcy5sKSwgXG4gICAgICAgIHRoaXMuZztcbiAgICB9XG59XG5cbi8qXG4gKiBQcm92aWRlcyB1c2VyIGNyZWRlbnRpYWxzIHJlcXVpcmVkIGZvciB0aGUgRmlyZXN0b3JlIEphdmFTY3JpcHQgU0RLXG4gKiB0byBhdXRoZW50aWNhdGUgdGhlIHVzZXIsIHVzaW5nIHRlY2huaXF1ZSB0aGF0IGlzIG9ubHkgYXZhaWxhYmxlXG4gKiB0byBhcHBsaWNhdGlvbnMgaG9zdGVkIGJ5IEdvb2dsZS5cbiAqLyBjbGFzcyBIIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuaCA9IHQsIHRoaXMubCA9IGUsIHRoaXMubSA9IG47XG4gICAgfVxuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBXKHRoaXMuaCwgdGhpcy5sLCB0aGlzLm0pKTtcbiAgICB9XG4gICAgc3RhcnQodCwgZSkge1xuICAgICAgICAvLyBGaXJlIHdpdGggaW5pdGlhbCB1aWQuXG4gICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gZShWLkZJUlNUX1BBUlRZKSkpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHt9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbn1cblxuY2xhc3MgSiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnZhbHVlID0gdCwgdGhpcy50eXBlID0gXCJBcHBDaGVja1wiLCB0aGlzLmhlYWRlcnMgPSBuZXcgTWFwLCB0ICYmIHQubGVuZ3RoID4gMCAmJiB0aGlzLmhlYWRlcnMuc2V0KFwieC1maXJlYmFzZS1hcHBjaGVja1wiLCB0aGlzLnZhbHVlKTtcbiAgICB9XG59XG5cbmNsYXNzIFkge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5JID0gdCwgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA9IG51bGwsIHRoaXMuVCA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHQgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPSB0LmVycm9yICYmIE4oXCJGaXJlYmFzZUFwcENoZWNrVG9rZW5Qcm92aWRlclwiLCBgRXJyb3IgZ2V0dGluZyBBcHAgQ2hlY2sgdG9rZW47IHVzaW5nIHBsYWNlaG9sZGVyIHRva2VuIGluc3RlYWQuIEVycm9yOiAke3QuZXJyb3IubWVzc2FnZX1gKTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRva2VuICE9PSB0aGlzLlQ7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5UID0gdC50b2tlbiwgTihcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIGBSZWNlaXZlZCAke24gPyBcIm5ld1wiIDogXCJleGlzdGluZ1wifSB0b2tlbi5gKSwgXG4gICAgICAgICAgICBuID8gZSh0LnRva2VuKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLm8gPSBlID0+IHtcbiAgICAgICAgICAgIHQuZW5xdWV1ZVJldHJ5YWJsZSgoKCkgPT4gbihlKSkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBzID0gdCA9PiB7XG4gICAgICAgICAgICBOKFwiRmlyZWJhc2VBcHBDaGVja1Rva2VuUHJvdmlkZXJcIiwgXCJBcHBDaGVjayBkZXRlY3RlZFwiKSwgdGhpcy5hcHBDaGVjayA9IHQsIHRoaXMuYXBwQ2hlY2suYWRkVG9rZW5MaXN0ZW5lcih0aGlzLm8pO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLkkub25Jbml0KCh0ID0+IHModCkpKSwgXG4gICAgICAgIC8vIE91ciB1c2VycyBjYW4gaW5pdGlhbGl6ZSBBcHBDaGVjayBhZnRlciBGaXJlc3RvcmUsIHNvIHdlIGdpdmUgaXRcbiAgICAgICAgLy8gYSBjaGFuY2UgdG8gcmVnaXN0ZXIgaXRzZWxmIHdpdGggdGhlIGNvbXBvbmVudCBmcmFtZXdvcmsuXG4gICAgICAgIHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICghdGhpcy5hcHBDaGVjaykge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkkuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uYWw6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgdCA/IHModCkgOiBcbiAgICAgICAgICAgICAgICAvLyBJZiBBcHBDaGVjayBpcyBzdGlsbCBub3QgYXZhaWxhYmxlLCBwcm9jZWVkIHdpdGhvdXQgaXQuXG4gICAgICAgICAgICAgICAgTihcIkZpcmViYXNlQXBwQ2hlY2tUb2tlblByb3ZpZGVyXCIsIFwiQXBwQ2hlY2sgbm90IHlldCBkZXRlY3RlZFwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIDApO1xuICAgIH1cbiAgICBnZXRUb2tlbigpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuZm9yY2VSZWZyZXNoO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JjZVJlZnJlc2ggPSAhMSwgdGhpcy5hcHBDaGVjayA/IHRoaXMuYXBwQ2hlY2suZ2V0VG9rZW4odCkudGhlbigodCA9PiB0ID8gKEYoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdC50b2tlbiksIFxuICAgICAgICB0aGlzLlQgPSB0LnRva2VuLCBuZXcgSih0LnRva2VuKSkgOiBudWxsKSkgOiBQcm9taXNlLnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGludmFsaWRhdGVUb2tlbigpIHtcbiAgICAgICAgdGhpcy5mb3JjZVJlZnJlc2ggPSAhMDtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHRoaXMuYXBwQ2hlY2sgJiYgdGhpcy5hcHBDaGVjay5yZW1vdmVUb2tlbkxpc3RlbmVyKHRoaXMubyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIEFwcENoZWNrIHRva2VuIHByb3ZpZGVyIHRoYXQgYWx3YXlzIHlpZWxkcyBhbiBlbXB0eSB0b2tlbi5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIFgge1xuICAgIGdldFRva2VuKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBKKFwiXCIpKTtcbiAgICB9XG4gICAgaW52YWxpZGF0ZVRva2VuKCkge31cbiAgICBzdGFydCh0LCBlKSB7fVxuICAgIHNodXRkb3duKCkge31cbn1cblxuLyoqXG4gKiBCdWlsZHMgYSBDcmVkZW50aWFsc1Byb3ZpZGVyIGRlcGVuZGluZyBvbiB0aGUgdHlwZSBvZlxuICogdGhlIGNyZWRlbnRpYWxzIHBhc3NlZCBpbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGBuQnl0ZXNgIG9mIHJhbmRvbSBieXRlcy5cbiAqXG4gKiBJZiBgbkJ5dGVzIDwgMGAgLCBhbiBlcnJvciB3aWxsIGJlIHRocm93bi5cbiAqL1xuZnVuY3Rpb24gWih0KSB7XG4gICAgLy8gUG9seWZpbGxzIGZvciBJRSBhbmQgV2ViV29ya2VyIGJ5IHVzaW5nIGBzZWxmYCBhbmQgYG1zQ3J5cHRvYCB3aGVuIGBjcnlwdG9gIGlzIG5vdCBhdmFpbGFibGUuXG4gICAgY29uc3QgZSA9IFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygc2VsZiAmJiAoc2VsZi5jcnlwdG8gfHwgc2VsZi5tc0NyeXB0byksIG4gPSBuZXcgVWludDhBcnJheSh0KTtcbiAgICBpZiAoZSAmJiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIGUuZ2V0UmFuZG9tVmFsdWVzKSBlLmdldFJhbmRvbVZhbHVlcyhuKTsgZWxzZSBcbiAgICAvLyBGYWxscyBiYWNrIHRvIE1hdGgucmFuZG9tXG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCB0OyBlKyspIG5bZV0gPSBNYXRoLmZsb29yKDI1NiAqIE1hdGgucmFuZG9tKCkpO1xuICAgIHJldHVybiBuO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyB0dCB7XG4gICAgc3RhdGljIEEoKSB7XG4gICAgICAgIC8vIEFscGhhbnVtZXJpYyBjaGFyYWN0ZXJzXG4gICAgICAgIGNvbnN0IHQgPSBcIkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaYWJjZGVmZ2hpamtsbW5vcHFyc3R1dnd4eXowMTIzNDU2Nzg5XCIsIGUgPSBNYXRoLmZsb29yKDI1NiAvIHQubGVuZ3RoKSAqIHQubGVuZ3RoO1xuICAgICAgICAvLyBUaGUgbGFyZ2VzdCBieXRlIHZhbHVlIHRoYXQgaXMgYSBtdWx0aXBsZSBvZiBgY2hhci5sZW5ndGhgLlxuICAgICAgICAgICAgICAgIGxldCBuID0gXCJcIjtcbiAgICAgICAgZm9yICg7bi5sZW5ndGggPCAyMDsgKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gWig0MCk7XG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHMubGVuZ3RoOyArK2kpIFxuICAgICAgICAgICAgLy8gT25seSBhY2NlcHQgdmFsdWVzIHRoYXQgYXJlIFswLCBtYXhNdWx0aXBsZSksIHRoaXMgZW5zdXJlcyB0aGV5IGNhblxuICAgICAgICAgICAgLy8gYmUgZXZlbmx5IG1hcHBlZCB0byBpbmRpY2VzIG9mIGBjaGFyc2AgdmlhIGEgbW9kdWxvIG9wZXJhdGlvbi5cbiAgICAgICAgICAgIG4ubGVuZ3RoIDwgMjAgJiYgc1tpXSA8IGUgJiYgKG4gKz0gdC5jaGFyQXQoc1tpXSAlIHQubGVuZ3RoKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG5mdW5jdGlvbiBldCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPCBlID8gLTEgOiB0ID4gZSA/IDEgOiAwO1xufVxuXG4vKiogSGVscGVyIHRvIGNvbXBhcmUgYXJyYXlzIHVzaW5nIGlzRXF1YWwoKS4gKi8gZnVuY3Rpb24gbnQodCwgZSwgbikge1xuICAgIHJldHVybiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGggJiYgdC5ldmVyeSgoKHQsIHMpID0+IG4odCwgZVtzXSkpKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBpbW1lZGlhdGUgbGV4aWNvZ3JhcGhpY2FsbHktZm9sbG93aW5nIHN0cmluZy4gVGhpcyBpcyB1c2VmdWwgdG9cbiAqIGNvbnN0cnVjdCBhbiBpbmNsdXNpdmUgcmFuZ2UgZm9yIGluZGV4ZWRkYiBpdGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gc3QodCkge1xuICAgIC8vIFJldHVybiB0aGUgaW5wdXQgc3RyaW5nLCB3aXRoIGFuIGFkZGl0aW9uYWwgTlVMIGJ5dGUgYXBwZW5kZWQuXG4gICAgcmV0dXJuIHQgKyBcIlxcMFwiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVGhlIGVhcmxpZXN0IGRhdGUgc3VwcG9ydGVkIGJ5IEZpcmVzdG9yZSB0aW1lc3RhbXBzICgwMDAxLTAxLTAxVDAwOjAwOjAwWikuXG4vKipcbiAqIEEgYFRpbWVzdGFtcGAgcmVwcmVzZW50cyBhIHBvaW50IGluIHRpbWUgaW5kZXBlbmRlbnQgb2YgYW55IHRpbWUgem9uZSBvclxuICogY2FsZW5kYXIsIHJlcHJlc2VudGVkIGFzIHNlY29uZHMgYW5kIGZyYWN0aW9ucyBvZiBzZWNvbmRzIGF0IG5hbm9zZWNvbmRcbiAqIHJlc29sdXRpb24gaW4gVVRDIEVwb2NoIHRpbWUuXG4gKlxuICogSXQgaXMgZW5jb2RlZCB1c2luZyB0aGUgUHJvbGVwdGljIEdyZWdvcmlhbiBDYWxlbmRhciB3aGljaCBleHRlbmRzIHRoZVxuICogR3JlZ29yaWFuIGNhbGVuZGFyIGJhY2t3YXJkcyB0byB5ZWFyIG9uZS4gSXQgaXMgZW5jb2RlZCBhc3N1bWluZyBhbGwgbWludXRlc1xuICogYXJlIDYwIHNlY29uZHMgbG9uZywgaS5lLiBsZWFwIHNlY29uZHMgYXJlIFwic21lYXJlZFwiIHNvIHRoYXQgbm8gbGVhcCBzZWNvbmRcbiAqIHRhYmxlIGlzIG5lZWRlZCBmb3IgaW50ZXJwcmV0YXRpb24uIFJhbmdlIGlzIGZyb20gMDAwMS0wMS0wMVQwMDowMDowMFogdG9cbiAqIDk5OTktMTItMzFUMjM6NTk6NTkuOTk5OTk5OTk5Wi5cbiAqXG4gKiBGb3IgZXhhbXBsZXMgYW5kIGZ1cnRoZXIgc3BlY2lmaWNhdGlvbnMsIHJlZmVyIHRvIHRoZVxuICoge0BsaW5rIGh0dHBzOi8vZ2l0aHViLmNvbS9nb29nbGUvcHJvdG9idWYvYmxvYi9tYXN0ZXIvc3JjL2dvb2dsZS9wcm90b2J1Zi90aW1lc3RhbXAucHJvdG8gfCBUaW1lc3RhbXAgZGVmaW5pdGlvbn0uXG4gKi9cbmNsYXNzIGl0IHtcbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IHRpbWVzdGFtcC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWNvbmRzIC0gVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouIE11c3QgYmUgZnJvbSAwMDAxLTAxLTAxVDAwOjAwOjAwWiB0b1xuICAgICAqICAgICA5OTk5LTEyLTMxVDIzOjU5OjU5WiBpbmNsdXNpdmUuXG4gICAgICogQHBhcmFtIG5hbm9zZWNvbmRzIC0gVGhlIG5vbi1uZWdhdGl2ZSBmcmFjdGlvbnMgb2YgYSBzZWNvbmQgYXQgbmFub3NlY29uZFxuICAgICAqICAgICByZXNvbHV0aW9uLiBOZWdhdGl2ZSBzZWNvbmQgdmFsdWVzIHdpdGggZnJhY3Rpb25zIG11c3Qgc3RpbGwgaGF2ZVxuICAgICAqICAgICBub24tbmVnYXRpdmUgbmFub3NlY29uZHMgdmFsdWVzIHRoYXQgY291bnQgZm9yd2FyZCBpbiB0aW1lLiBNdXN0IGJlXG4gICAgICogICAgIGZyb20gMCB0byA5OTksOTk5LDk5OSBpbmNsdXNpdmUuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG51bWJlciBvZiBzZWNvbmRzIG9mIFVUQyB0aW1lIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIGZyYWN0aW9ucyBvZiBhIHNlY29uZCBhdCBuYW5vc2Vjb25kIHJlc29sdXRpb24uKlxuICAgICAqL1xuICAgIGUpIHtcbiAgICAgICAgaWYgKHRoaXMuc2Vjb25kcyA9IHQsIHRoaXMubmFub3NlY29uZHMgPSBlLCBlIDwgMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmIChlID49IDFlOSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBuYW5vc2Vjb25kcyBvdXQgb2YgcmFuZ2U6IFwiICsgZSk7XG4gICAgICAgIGlmICh0IDwgLTYyMTM1NTk2ODAwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVGltZXN0YW1wIHNlY29uZHMgb3V0IG9mIHJhbmdlOiBcIiArIHQpO1xuICAgICAgICAvLyBUaGlzIHdpbGwgYnJlYWsgaW4gdGhlIHllYXIgMTAsMDAwLlxuICAgICAgICAgICAgICAgIGlmICh0ID49IDI1MzQwMjMwMDgwMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRpbWVzdGFtcCBzZWNvbmRzIG91dCBvZiByYW5nZTogXCIgKyB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgd2l0aCB0aGUgY3VycmVudCBkYXRlLCB3aXRoIG1pbGxpc2Vjb25kIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIGEgbmV3IHRpbWVzdGFtcCByZXByZXNlbnRpbmcgdGhlIGN1cnJlbnQgZGF0ZS5cbiAgICAgKi8gICAgc3RhdGljIG5vdygpIHtcbiAgICAgICAgcmV0dXJuIGl0LmZyb21NaWxsaXMoRGF0ZS5ub3coKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGltZXN0YW1wIGZyb20gdGhlIGdpdmVuIGRhdGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0ZSAtIFRoZSBkYXRlIHRvIGluaXRpYWxpemUgdGhlIGBUaW1lc3RhbXBgIGZyb20uXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIGRhdGUuXG4gICAgICovICAgIHN0YXRpYyBmcm9tRGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBpdC5mcm9tTWlsbGlzKHQuZ2V0VGltZSgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0aW1lc3RhbXAgZnJvbSB0aGUgZ2l2ZW4gbnVtYmVyIG9mIG1pbGxpc2Vjb25kcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBtaWxsaXNlY29uZHMgLSBOdW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2hcbiAgICAgKiAgICAgMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICogQHJldHVybnMgQSBuZXcgYFRpbWVzdGFtcGAgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXMgdGhlIGdpdmVuXG4gICAgICogICAgIG51bWJlciBvZiBtaWxsaXNlY29uZHMuXG4gICAgICovICAgIHN0YXRpYyBmcm9tTWlsbGlzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodCAvIDFlMyksIG4gPSBNYXRoLmZsb29yKDFlNiAqICh0IC0gMWUzICogZSkpO1xuICAgICAgICByZXR1cm4gbmV3IGl0KGUsIG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIGBUaW1lc3RhbXBgIHRvIGEgSmF2YVNjcmlwdCBgRGF0ZWAgb2JqZWN0LiBUaGlzIGNvbnZlcnNpb25cbiAgICAgKiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbiBzaW5jZSBgRGF0ZWAgb2JqZWN0cyBvbmx5IHN1cHBvcnQgbWlsbGlzZWNvbmRcbiAgICAgKiBwcmVjaXNpb24uXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBKYXZhU2NyaXB0IGBEYXRlYCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzYW1lIHBvaW50IGluIHRpbWUgYXNcbiAgICAgKiAgICAgdGhpcyBgVGltZXN0YW1wYCwgd2l0aCBtaWxsaXNlY29uZCBwcmVjaXNpb24uXG4gICAgICovICAgIHRvRGF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKHRoaXMudG9NaWxsaXMoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIGEgYFRpbWVzdGFtcGAgdG8gYSBudW1lcmljIHRpbWVzdGFtcCAoaW4gbWlsbGlzZWNvbmRzIHNpbmNlXG4gICAgICogZXBvY2gpLiBUaGlzIG9wZXJhdGlvbiBjYXVzZXMgYSBsb3NzIG9mIHByZWNpc2lvbi5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBwb2ludCBpbiB0aW1lIGNvcnJlc3BvbmRpbmcgdG8gdGhpcyB0aW1lc3RhbXAsIHJlcHJlc2VudGVkIGFzXG4gICAgICogICAgIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIFVuaXggZXBvY2ggMTk3MC0wMS0wMVQwMDowMDowMFouXG4gICAgICovICAgIHRvTWlsbGlzKCkge1xuICAgICAgICByZXR1cm4gMWUzICogdGhpcy5zZWNvbmRzICsgdGhpcy5uYW5vc2Vjb25kcyAvIDFlNjtcbiAgICB9XG4gICAgX2NvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlY29uZHMgPT09IHQuc2Vjb25kcyA/IGV0KHRoaXMubmFub3NlY29uZHMsIHQubmFub3NlY29uZHMpIDogZXQodGhpcy5zZWNvbmRzLCB0LnNlY29uZHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgVGltZXN0YW1wYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqXG4gICAgICogQHBhcmFtIG90aGVyIC0gVGhlIGBUaW1lc3RhbXBgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYFRpbWVzdGFtcGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0LnNlY29uZHMgPT09IHRoaXMuc2Vjb25kcyAmJiB0Lm5hbm9zZWNvbmRzID09PSB0aGlzLm5hbm9zZWNvbmRzO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHRleHR1YWwgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBgVGltZXN0YW1wYC4gKi8gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlRpbWVzdGFtcChzZWNvbmRzPVwiICsgdGhpcy5zZWNvbmRzICsgXCIsIG5hbm9zZWNvbmRzPVwiICsgdGhpcy5uYW5vc2Vjb25kcyArIFwiKVwiO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIEpTT04tc2VyaWFsaXphYmxlIHJlcHJlc2VudGF0aW9uIG9mIHRoaXMgYFRpbWVzdGFtcGAuICovICAgIHRvSlNPTigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHNlY29uZHM6IHRoaXMuc2Vjb25kcyxcbiAgICAgICAgICAgIG5hbm9zZWNvbmRzOiB0aGlzLm5hbm9zZWNvbmRzXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbnZlcnRzIHRoaXMgb2JqZWN0IHRvIGEgcHJpbWl0aXZlIHN0cmluZywgd2hpY2ggYWxsb3dzIGBUaW1lc3RhbXBgIG9iamVjdHNcbiAgICAgKiB0byBiZSBjb21wYXJlZCB1c2luZyB0aGUgYD5gLCBgPD1gLCBgPj1gIGFuZCBgPmAgb3BlcmF0b3JzLlxuICAgICAqLyAgICB2YWx1ZU9mKCkge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCByZXR1cm5zIGEgc3RyaW5nIG9mIHRoZSBmb3JtIDxzZWNvbmRzPi48bmFub3NlY29uZHM+IHdoZXJlXG4gICAgICAgIC8vIDxzZWNvbmRzPiBpcyB0cmFuc2xhdGVkIHRvIGhhdmUgYSBub24tbmVnYXRpdmUgdmFsdWUgYW5kIGJvdGggPHNlY29uZHM+XG4gICAgICAgIC8vIGFuZCA8bmFub3NlY29uZHM+IGFyZSBsZWZ0LXBhZGRlZCB3aXRoIHplcm9lcyB0byBiZSBhIGNvbnNpc3RlbnQgbGVuZ3RoLlxuICAgICAgICAvLyBTdHJpbmdzIHdpdGggdGhpcyBmb3JtYXQgdGhlbiBoYXZlIGEgbGV4aW9ncmFwaGljYWwgb3JkZXJpbmcgdGhhdCBtYXRjaGVzXG4gICAgICAgIC8vIHRoZSBleHBlY3RlZCBvcmRlcmluZy4gVGhlIDxzZWNvbmRzPiB0cmFuc2xhdGlvbiBpcyBkb25lIHRvIGF2b2lkIGhhdmluZ1xuICAgICAgICAvLyBhIGxlYWRpbmcgbmVnYXRpdmUgc2lnbiAoaS5lLiBhIGxlYWRpbmcgJy0nIGNoYXJhY3RlcikgaW4gaXRzIHN0cmluZ1xuICAgICAgICAvLyByZXByZXNlbnRhdGlvbiwgd2hpY2ggd291bGQgYWZmZWN0IGl0cyBsZXhpb2dyYXBoaWNhbCBvcmRlcmluZy5cbiAgICAgICAgY29uc3QgdCA9IHRoaXMuc2Vjb25kcyAtIC02MjEzNTU5NjgwMDtcbiAgICAgICAgLy8gTm90ZTogVXAgdG8gMTIgZGVjaW1hbCBkaWdpdHMgYXJlIHJlcXVpcmVkIHRvIHJlcHJlc2VudCBhbGwgdmFsaWRcbiAgICAgICAgLy8gJ3NlY29uZHMnIHZhbHVlcy5cbiAgICAgICAgICAgICAgICByZXR1cm4gU3RyaW5nKHQpLnBhZFN0YXJ0KDEyLCBcIjBcIikgKyBcIi5cIiArIFN0cmluZyh0aGlzLm5hbm9zZWNvbmRzKS5wYWRTdGFydCg5LCBcIjBcIik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHZlcnNpb24gb2YgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUuIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIHZlcnNpb25cbiAqIHRpbWVzdGFtcCwgc3VjaCBhcyB1cGRhdGVfdGltZSBvciByZWFkX3RpbWUuXG4gKi8gY2xhc3MgcnQge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVRpbWVzdGFtcCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQodCk7XG4gICAgfVxuICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgcnQobmV3IGl0KDAsIDApKTtcbiAgICB9XG4gICAgc3RhdGljIG1heCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBydChuZXcgaXQoMjUzNDAyMzAwNzk5LCA5OTk5OTk5OTkpKTtcbiAgICB9XG4gICAgY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLl9jb21wYXJlVG8odC50aW1lc3RhbXApO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wLmlzRXF1YWwodC50aW1lc3RhbXApO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG51bWJlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgdmVyc2lvbiBmb3IgdXNlIGluIHNwZWMgdGVzdHMuICovICAgIHRvTWljcm9zZWNvbmRzKCkge1xuICAgICAgICAvLyBDb252ZXJ0IHRvIG1pY3Jvc2Vjb25kcy5cbiAgICAgICAgcmV0dXJuIDFlNiAqIHRoaXMudGltZXN0YW1wLnNlY29uZHMgKyB0aGlzLnRpbWVzdGFtcC5uYW5vc2Vjb25kcyAvIDFlMztcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiBcIlNuYXBzaG90VmVyc2lvbihcIiArIHRoaXMudGltZXN0YW1wLnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgdG9UaW1lc3RhbXAoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBhdGggcmVwcmVzZW50cyBhbiBvcmRlcmVkIHNlcXVlbmNlIG9mIHN0cmluZyBzZWdtZW50cy5cbiAqL1xuY2xhc3Mgb3Qge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdm9pZCAwID09PSBlID8gZSA9IDAgOiBlID4gdC5sZW5ndGggJiYgTygpLCB2b2lkIDAgPT09IG4gPyBuID0gdC5sZW5ndGggLSBlIDogbiA+IHQubGVuZ3RoIC0gZSAmJiBPKCksIFxuICAgICAgICB0aGlzLnNlZ21lbnRzID0gdCwgdGhpcy5vZmZzZXQgPSBlLCB0aGlzLmxlbiA9IG47XG4gICAgfVxuICAgIGdldCBsZW5ndGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlbjtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiAwID09PSBvdC5jb21wYXJhdG9yKHRoaXMsIHQpO1xuICAgIH1cbiAgICBjaGlsZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNlZ21lbnRzLnNsaWNlKHRoaXMub2Zmc2V0LCB0aGlzLmxpbWl0KCkpO1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG90ID8gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUucHVzaCh0KTtcbiAgICAgICAgfSkpIDogZS5wdXNoKHQpLCB0aGlzLmNvbnN0cnVjdChlKTtcbiAgICB9XG4gICAgLyoqIFRoZSBpbmRleCBvZiBvbmUgcGFzdCB0aGUgbGFzdCBzZWdtZW50IG9mIHRoZSBwYXRoLiAqLyAgICBsaW1pdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub2Zmc2V0ICsgdGhpcy5sZW5ndGg7XG4gICAgfVxuICAgIHBvcEZpcnN0KHQpIHtcbiAgICAgICAgcmV0dXJuIHQgPSB2b2lkIDAgPT09IHQgPyAxIDogdCwgdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQgKyB0LCB0aGlzLmxlbmd0aCAtIHQpO1xuICAgIH1cbiAgICBwb3BMYXN0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3QodGhpcy5zZWdtZW50cywgdGhpcy5vZmZzZXQsIHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGZpcnN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VnbWVudHNbdGhpcy5vZmZzZXRdO1xuICAgIH1cbiAgICBsYXN0U2VnbWVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0KHRoaXMubGVuZ3RoIC0gMSk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNlZ21lbnRzW3RoaXMub2Zmc2V0ICsgdF07XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAwID09PSB0aGlzLmxlbmd0aDtcbiAgICB9XG4gICAgaXNQcmVmaXhPZih0KSB7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA8IHRoaXMubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5sZW5ndGg7IGUrKykgaWYgKHRoaXMuZ2V0KGUpICE9PSB0LmdldChlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGlzSW1tZWRpYXRlUGFyZW50T2YodCkge1xuICAgICAgICBpZiAodGhpcy5sZW5ndGggKyAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubGVuZ3RoOyBlKyspIGlmICh0aGlzLmdldChlKSAhPT0gdC5nZXQoZSkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBmb3JFYWNoKHQpIHtcbiAgICAgICAgZm9yIChsZXQgZSA9IHRoaXMub2Zmc2V0LCBuID0gdGhpcy5saW1pdCgpOyBlIDwgbjsgZSsrKSB0KHRoaXMuc2VnbWVudHNbZV0pO1xuICAgIH1cbiAgICB0b0FycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZWdtZW50cy5zbGljZSh0aGlzLm9mZnNldCwgdGhpcy5saW1pdCgpKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTWF0aC5taW4odC5sZW5ndGgsIGUubGVuZ3RoKTtcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBuOyBzKyspIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmdldChzKSwgaSA9IGUuZ2V0KHMpO1xuICAgICAgICAgICAgaWYgKG4gPCBpKSByZXR1cm4gLTE7XG4gICAgICAgICAgICBpZiAobiA+IGkpIHJldHVybiAxO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0Lmxlbmd0aCA8IGUubGVuZ3RoID8gLTEgOiB0Lmxlbmd0aCA+IGUubGVuZ3RoID8gMSA6IDA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgc2xhc2gtc2VwYXJhdGVkIHBhdGggZm9yIG5hdmlnYXRpbmcgcmVzb3VyY2VzIChkb2N1bWVudHMgYW5kIGNvbGxlY3Rpb25zKVxuICogd2l0aGluIEZpcmVzdG9yZS5cbiAqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyB1dCBleHRlbmRzIG90IHtcbiAgICBjb25zdHJ1Y3QodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3IHV0KHQsIGUsIG4pO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIC8vIE5PVEU6IFRoZSBjbGllbnQgaXMgaWdub3JhbnQgb2YgYW55IHBhdGggc2VnbWVudHMgY29udGFpbmluZyBlc2NhcGVcbiAgICAgICAgLy8gc2VxdWVuY2VzIChlLmcuIF9faWQxMjNfXykgYW5kIGp1c3QgcGFzc2VzIHRoZW0gdGhyb3VnaCByYXcgKHRoZXkgZXhpc3RcbiAgICAgICAgLy8gZm9yIGxlZ2FjeSByZWFzb25zIGFuZCBzaG91bGQgbm90IGJlIHVzZWQgZnJlcXVlbnRseSkuXG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5qb2luKFwiL1wiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgcmVzb3VyY2UgcGF0aCBmcm9tIHRoZSBnaXZlbiBzbGFzaC1kZWxpbWl0ZWQgc3RyaW5nLiBJZiBtdWx0aXBsZVxuICAgICAqIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQsIGFsbCBjb21wb25lbnRzIGFyZSBjb21iaW5lZC4gTGVhZGluZyBhbmQgdHJhaWxpbmdcbiAgICAgKiBzbGFzaGVzIGZyb20gYWxsIGNvbXBvbmVudHMgYXJlIGlnbm9yZWQuXG4gICAgICovICAgIHN0YXRpYyBmcm9tU3RyaW5nKC4uLnQpIHtcbiAgICAgICAgLy8gTk9URTogVGhlIGNsaWVudCBpcyBpZ25vcmFudCBvZiBhbnkgcGF0aCBzZWdtZW50cyBjb250YWluaW5nIGVzY2FwZVxuICAgICAgICAvLyBzZXF1ZW5jZXMgKGUuZy4gX19pZDEyM19fKSBhbmQganVzdCBwYXNzZXMgdGhlbSB0aHJvdWdoIHJhdyAodGhleSBleGlzdFxuICAgICAgICAvLyBmb3IgbGVnYWN5IHJlYXNvbnMgYW5kIHNob3VsZCBub3QgYmUgdXNlZCBmcmVxdWVudGx5KS5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkge1xuICAgICAgICAgICAgaWYgKG4uaW5kZXhPZihcIi8vXCIpID49IDApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgc2VnbWVudCAoJHtufSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gLy8gaW4gdGhlbS5gKTtcbiAgICAgICAgICAgIC8vIFN0cmlwIGxlYWRpbmcgYW5kIHRyYWxpbmcgc2xhc2hlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHVzaCguLi5uLnNwbGl0KFwiL1wiKS5maWx0ZXIoKHQgPT4gdC5sZW5ndGggPiAwKSkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgdXQoZSk7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eVBhdGgoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdXQoW10pO1xuICAgIH1cbn1cblxuY29uc3QgY3QgPSAvXltfYS16QS1aXVtfYS16QS1aMC05XSokLztcblxuLyoqXG4gKiBBIGRvdC1zZXBhcmF0ZWQgcGF0aCBmb3IgbmF2aWdhdGluZyBzdWItb2JqZWN0cyB3aXRoaW4gYSBkb2N1bWVudC5cbiAqIEBpbnRlcm5hbFxuICovIGNsYXNzIGF0IGV4dGVuZHMgb3Qge1xuICAgIGNvbnN0cnVjdCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgYXQodCwgZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgc3RyaW5nIGNvdWxkIGJlIHVzZWQgYXMgYSBzZWdtZW50IGluIGEgZmllbGQgcGF0aFxuICAgICAqIHdpdGhvdXQgZXNjYXBpbmcuXG4gICAgICovICAgIHN0YXRpYyBpc1ZhbGlkSWRlbnRpZmllcih0KSB7XG4gICAgICAgIHJldHVybiBjdC50ZXN0KHQpO1xuICAgIH1cbiAgICBjYW5vbmljYWxTdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRvQXJyYXkoKS5tYXAoKHQgPT4gKHQgPSB0LnJlcGxhY2UoL1xcXFwvZywgXCJcXFxcXFxcXFwiKS5yZXBsYWNlKC9gL2csIFwiXFxcXGBcIiksIFxuICAgICAgICBhdC5pc1ZhbGlkSWRlbnRpZmllcih0KSB8fCAodCA9IFwiYFwiICsgdCArIFwiYFwiKSwgdCkpKS5qb2luKFwiLlwiKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWVsZCByZWZlcmVuY2VzIHRoZSBrZXkgb2YgYSBkb2N1bWVudC5cbiAgICAgKi8gICAgaXNLZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIDEgPT09IHRoaXMubGVuZ3RoICYmIFwiX19uYW1lX19cIiA9PT0gdGhpcy5nZXQoMCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBmaWVsZCBkZXNpZ25hdGluZyB0aGUga2V5IG9mIGEgZG9jdW1lbnQuXG4gICAgICovICAgIHN0YXRpYyBrZXlGaWVsZCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChbIFwiX19uYW1lX19cIiBdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgZmllbGQgc3RyaW5nIGZyb20gdGhlIGdpdmVuIHNlcnZlci1mb3JtYXR0ZWQgc3RyaW5nLlxuICAgICAqXG4gICAgICogLSBTcGxpdHRpbmcgdGhlIGVtcHR5IHN0cmluZyBpcyBub3QgYWxsb3dlZCAoZm9yIG5vdyBhdCBsZWFzdCkuXG4gICAgICogLSBFbXB0eSBzZWdtZW50cyB3aXRoaW4gdGhlIHN0cmluZyAoZS5nLiBpZiB0aGVyZSBhcmUgdHdvIGNvbnNlY3V0aXZlXG4gICAgICogICBzZXBhcmF0b3JzKSBhcmUgbm90IGFsbG93ZWQuXG4gICAgICpcbiAgICAgKiBUT0RPKGIvMzcyNDQxNTcpOiB3ZSBzaG91bGQgbWFrZSB0aGlzIG1vcmUgc3RyaWN0LiBSaWdodCBub3csIGl0IGFsbG93c1xuICAgICAqIG5vbi1pZGVudGlmaWVyIHBhdGggY29tcG9uZW50cywgZXZlbiBpZiB0aGV5IGFyZW4ndCBlc2NhcGVkLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlcnZlckZvcm1hdCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgbGV0IG4gPSBcIlwiLCBzID0gMDtcbiAgICAgICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgICAgICAgIGlmICgwID09PSBuLmxlbmd0aCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBmaWVsZCBwYXRoICgke3R9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2ApO1xuICAgICAgICAgICAgZS5wdXNoKG4pLCBuID0gXCJcIjtcbiAgICAgICAgfTtcbiAgICAgICAgbGV0IHIgPSAhMTtcbiAgICAgICAgZm9yICg7cyA8IHQubGVuZ3RoOyApIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0W3NdO1xuICAgICAgICAgICAgaWYgKFwiXFxcXFwiID09PSBlKSB7XG4gICAgICAgICAgICAgICAgaWYgKHMgKyAxID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIHRyYWlsaW5nIGVzY2FwZSBjaGFyYWN0ZXI6IFwiICsgdCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRbcyArIDFdO1xuICAgICAgICAgICAgICAgIGlmIChcIlxcXFxcIiAhPT0gZSAmJiBcIi5cIiAhPT0gZSAmJiBcImBcIiAhPT0gZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlBhdGggaGFzIGludmFsaWQgZXNjYXBlIHNlcXVlbmNlOiBcIiArIHQpO1xuICAgICAgICAgICAgICAgIG4gKz0gZSwgcyArPSAyO1xuICAgICAgICAgICAgfSBlbHNlIFwiYFwiID09PSBlID8gKHIgPSAhciwgcysrKSA6IFwiLlwiICE9PSBlIHx8IHIgPyAobiArPSBlLCBzKyspIDogKGkoKSwgcysrKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaSgpLCByKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiVW50ZXJtaW5hdGVkIGAgaW4gcGF0aDogXCIgKyB0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChlKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5UGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhdChbXSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBodCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbVBhdGgodCkge1xuICAgICAgICByZXR1cm4gbmV3IGh0KHV0LmZyb21TdHJpbmcodCkpO1xuICAgIH1cbiAgICBzdGF0aWMgZnJvbU5hbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IGh0KHV0LmZyb21TdHJpbmcodCkucG9wRmlyc3QoNSkpO1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgaHQodXQuZW1wdHlQYXRoKCkpO1xuICAgIH1cbiAgICBnZXQgY29sbGVjdGlvbkdyb3VwKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wYXRoLnBvcExhc3QoKS5sYXN0U2VnbWVudCgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBpcyBpbiB0aGUgc3BlY2lmaWVkIGNvbGxlY3Rpb25JZC4gKi8gICAgaGFzQ29sbGVjdGlvbklkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5sZW5ndGggPj0gMiAmJiB0aGlzLnBhdGguZ2V0KHRoaXMucGF0aC5sZW5ndGggLSAyKSA9PT0gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdGhlIGNvbGxlY3Rpb24gZ3JvdXAgKGkuZS4gdGhlIG5hbWUgb2YgdGhlIHBhcmVudCBjb2xsZWN0aW9uKSBmb3IgdGhpcyBrZXkuICovICAgIGdldENvbGxlY3Rpb25Hcm91cCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5nZXQodGhpcy5wYXRoLmxlbmd0aCAtIDIpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgZnVsbHkgcXVhbGlmaWVkIHBhdGggdG8gdGhlIHBhcmVudCBjb2xsZWN0aW9uLiAqLyAgICBnZXRDb2xsZWN0aW9uUGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0aC5wb3BMYXN0KCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiAwID09PSB1dC5jb21wYXJhdG9yKHRoaXMucGF0aCwgdC5wYXRoKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBhdGgudG9TdHJpbmcoKTtcbiAgICB9XG4gICAgc3RhdGljIGNvbXBhcmF0b3IodCwgZSkge1xuICAgICAgICByZXR1cm4gdXQuY29tcGFyYXRvcih0LnBhdGgsIGUucGF0aCk7XG4gICAgfVxuICAgIHN0YXRpYyBpc0RvY3VtZW50S2V5KHQpIHtcbiAgICAgICAgcmV0dXJuIHQubGVuZ3RoICUgMiA9PSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGRvY3VtZW50IGtleSB3aXRoIHRoZSBnaXZlbiBzZWdtZW50cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBzZWdtZW50cyAtIFRoZSBzZWdtZW50cyBvZiB0aGUgcGF0aCB0byB0aGUgZG9jdW1lbnRcbiAgICAgKiBAcmV0dXJucyBBIG5ldyBpbnN0YW5jZSBvZiBEb2N1bWVudEtleVxuICAgICAqLyAgICBzdGF0aWMgZnJvbVNlZ21lbnRzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBodChuZXcgdXQodC5zbGljZSgpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgaW5pdGlhbCBtdXRhdGlvbiBiYXRjaCBpZCBmb3IgZWFjaCBpbmRleC4gR2V0cyB1cGRhdGVkIGR1cmluZyBpbmRleFxuICogYmFja2ZpbGwuXG4gKi9cbi8qKlxuICogQW4gaW5kZXggZGVmaW5pdGlvbiBmb3IgZmllbGQgaW5kZXhlcyBpbiBGaXJlc3RvcmUuXG4gKlxuICogRXZlcnkgaW5kZXggaXMgYXNzb2NpYXRlZCB3aXRoIGEgY29sbGVjdGlvbi4gVGhlIGRlZmluaXRpb24gY29udGFpbnMgYSBsaXN0XG4gKiBvZiBmaWVsZHMgYW5kIHRoZWlyIGluZGV4IGtpbmQgKHdoaWNoIGNhbiBiZSBgQVNDRU5ESU5HYCwgYERFU0NFTkRJTkdgIG9yXG4gKiBgQ09OVEFJTlNgIGZvciBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgcXVlcmllcykuXG4gKlxuICogVW5saWtlIHRoZSBiYWNrZW5kLCB0aGUgU0RLIGRvZXMgbm90IGRpZmZlcmVudGlhdGUgYmV0d2VlbiBjb2xsZWN0aW9uIG9yXG4gKiBjb2xsZWN0aW9uIGdyb3VwLXNjb3BlZCBpbmRpY2VzLiBFdmVyeSBpbmRleCBjYW4gYmUgdXNlZCBmb3IgYm90aCBzaW5nbGVcbiAqIGNvbGxlY3Rpb24gYW5kIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcmllcy5cbiAqL1xuY2xhc3MgbHQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBpbmRleCBJRC4gUmV0dXJucyAtMSBpZiB0aGUgaW5kZXggSUQgaXMgbm90IGF2YWlsYWJsZSAoZS5nLiB0aGUgaW5kZXhcbiAgICAgKiBoYXMgbm90IHlldCBiZWVuIHBlcnNpc3RlZCkuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjb2xsZWN0aW9uIElEIHRoaXMgaW5kZXggYXBwbGllcyB0by4gKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIGZpZWxkIHNlZ21lbnRzIGZvciB0aGlzIGluZGV4LiAqL1xuICAgIG4sIFxuICAgIC8qKiBTaG93cyBob3cgdXAtdG8tZGF0ZSB0aGUgaW5kZXggaXMgZm9yIHRoZSBjdXJyZW50IHVzZXIuICovXG4gICAgcykge1xuICAgICAgICB0aGlzLmluZGV4SWQgPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZmllbGRzID0gbiwgdGhpcy5pbmRleFN0YXRlID0gcztcbiAgICB9XG59XG5cbi8qKiBBbiBJRCBmb3IgYW4gaW5kZXggdGhhdCBoYXMgbm90IHlldCBiZWVuIGFkZGVkIHRvIHBlcnNpc3RlbmNlLiAgKi9cbi8qKiBSZXR1cm5zIHRoZSBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnkgc2VnbWVudCBmb3IgdGhpcyBpbmRleC4gKi9cbmZ1bmN0aW9uIGZ0KHQpIHtcbiAgICByZXR1cm4gdC5maWVsZHMuZmluZCgodCA9PiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyA9PT0gdC5raW5kKSk7XG59XG5cbi8qKiBSZXR1cm5zIGFsbCBkaXJlY3Rpb25hbCAoYXNjZW5kaW5nL2Rlc2NlbmRpbmcpIHNlZ21lbnRzIGZvciB0aGlzIGluZGV4LiAqLyBmdW5jdGlvbiBkdCh0KSB7XG4gICAgcmV0dXJuIHQuZmllbGRzLmZpbHRlcigodCA9PiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyAhPT0gdC5raW5kKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgb3JkZXIgb2YgdGhlIGRvY3VtZW50IGtleSBjb21wb25lbnQgZm9yIHRoZSBnaXZlbiBpbmRleC5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uLlxuICovXG4vKipcbiAqIENvbXBhcmVzIGluZGV4ZXMgYnkgY29sbGVjdGlvbiBncm91cCBhbmQgc2VnbWVudHMuIElnbm9yZXMgdXBkYXRlIHRpbWUgYW5kXG4gKiBpbmRleCBJRC5cbiAqL1xuZnVuY3Rpb24gd3QodCwgZSkge1xuICAgIGxldCBuID0gZXQodC5jb2xsZWN0aW9uR3JvdXAsIGUuY29sbGVjdGlvbkdyb3VwKTtcbiAgICBpZiAoMCAhPT0gbikgcmV0dXJuIG47XG4gICAgZm9yIChsZXQgcyA9IDA7IHMgPCBNYXRoLm1pbih0LmZpZWxkcy5sZW5ndGgsIGUuZmllbGRzLmxlbmd0aCk7ICsrcykgaWYgKG4gPSBtdCh0LmZpZWxkc1tzXSwgZS5maWVsZHNbc10pLCBcbiAgICAwICE9PSBuKSByZXR1cm4gbjtcbiAgICByZXR1cm4gZXQodC5maWVsZHMubGVuZ3RoLCBlLmZpZWxkcy5sZW5ndGgpO1xufVxuXG4vKiogUmV0dXJucyBhIGRlYnVnIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBmaWVsZCBpbmRleCAqLyBsdC5VTktOT1dOX0lEID0gLTE7XG5cbi8qKiBBbiBpbmRleCBjb21wb25lbnQgY29uc2lzdGluZyBvZiBmaWVsZCBwYXRoIGFuZCBpbmRleCB0eXBlLiAgKi9cbmNsYXNzIF90IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIGZpZWxkIHBhdGggb2YgdGhlIGNvbXBvbmVudC4gKi9cbiAgICB0LCBcbiAgICAvKiogVGhlIGZpZWxkcyBzb3J0aW5nIG9yZGVyLiAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5maWVsZFBhdGggPSB0LCB0aGlzLmtpbmQgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbXQodCwgZSkge1xuICAgIGNvbnN0IG4gPSBhdC5jb21wYXJhdG9yKHQuZmllbGRQYXRoLCBlLmZpZWxkUGF0aCk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogZXQodC5raW5kLCBlLmtpbmQpO1xufVxuXG4vKipcbiAqIFN0b3JlcyB0aGUgXCJoaWdoIHdhdGVyIG1hcmtcIiB0aGF0IGluZGljYXRlcyBob3cgdXBkYXRlZCB0aGUgSW5kZXggaXMgZm9yIHRoZVxuICogY3VycmVudCB1c2VyLlxuICovIGNsYXNzIGd0IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBJbmRpY2F0ZXMgd2hlbiB0aGUgaW5kZXggd2FzIGxhc3QgdXBkYXRlZCAocmVsYXRpdmUgdG8gb3RoZXIgaW5kZXhlcykuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSB0aGUgbGF0ZXN0IGluZGV4ZWQgcmVhZCB0aW1lLCBkb2N1bWVudCBhbmQgYmF0Y2ggaWQuICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnNlcXVlbmNlTnVtYmVyID0gdCwgdGhpcy5vZmZzZXQgPSBlO1xuICAgIH1cbiAgICAvKiogVGhlIHN0YXRlIG9mIGFuIGluZGV4IHRoYXQgaGFzIG5vdCB5ZXQgYmVlbiBiYWNrZmlsbGVkLiAqLyAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgZ3QoMCwgSXQubWluKCkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIG9mZnNldCB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyB3aXRoIGEgcmVhZCB0aW1lIGhpZ2hlciB0aGFuXG4gKiBgcmVhZFRpbWVgLlxuICovIGZ1bmN0aW9uIHl0KHQsIGUpIHtcbiAgICAvLyBXZSB3YW50IHRvIGNyZWF0ZSBhbiBvZmZzZXQgdGhhdCBtYXRjaGVzIGFsbCBkb2N1bWVudHMgd2l0aCBhIHJlYWQgdGltZVxuICAgIC8vIGdyZWF0ZXIgdGhhbiB0aGUgcHJvdmlkZWQgcmVhZCB0aW1lLiBUbyBkbyBzbywgd2UgdGVjaG5pY2FsbHkgbmVlZCB0b1xuICAgIC8vIGNyZWF0ZSBhbiBvZmZzZXQgZm9yIGAocmVhZFRpbWUsIE1BWF9ET0NVTUVOVF9LRVkpYC4gV2hpbGUgd2UgY291bGQgdXNlXG4gICAgLy8gVW5pY29kZSBjb2RlcG9pbnRzIHRvIGdlbmVyYXRlIE1BWF9ET0NVTUVOVF9LRVksIGl0IGlzIG11Y2ggZWFzaWVyIHRvIHVzZVxuICAgIC8vIGAocmVhZFRpbWUgKyAxLCBEb2N1bWVudEtleS5lbXB0eSgpKWAgc2luY2UgYD4gRG9jdW1lbnRLZXkuZW1wdHkoKWAgbWF0Y2hlc1xuICAgIC8vIGFsbCB2YWxpZCBkb2N1bWVudCBJRHMuXG4gICAgY29uc3QgbiA9IHQudG9UaW1lc3RhbXAoKS5zZWNvbmRzLCBzID0gdC50b1RpbWVzdGFtcCgpLm5hbm9zZWNvbmRzICsgMSwgaSA9IHJ0LmZyb21UaW1lc3RhbXAoMWU5ID09PSBzID8gbmV3IGl0KG4gKyAxLCAwKSA6IG5ldyBpdChuLCBzKSk7XG4gICAgcmV0dXJuIG5ldyBJdChpLCBodC5lbXB0eSgpLCBlKTtcbn1cblxuLyoqIENyZWF0ZXMgYSBuZXcgb2Zmc2V0IGJhc2VkIG9uIHRoZSBwcm92aWRlZCBkb2N1bWVudC4gKi8gZnVuY3Rpb24gcHQodCkge1xuICAgIHJldHVybiBuZXcgSXQodC5yZWFkVGltZSwgdC5rZXksIC0xKTtcbn1cblxuLyoqXG4gKiBTdG9yZXMgdGhlIGxhdGVzdCByZWFkIHRpbWUsIGRvY3VtZW50IGFuZCBiYXRjaCBJRCB0aGF0IHdlcmUgcHJvY2Vzc2VkIGZvciBhblxuICogaW5kZXguXG4gKi8gY2xhc3MgSXQge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBsYXRlc3QgcmVhZCB0aW1lIHZlcnNpb24gdGhhdCBoYXMgYmVlbiBpbmRleGVkIGJ5IEZpcmVzdG9yZSBmb3IgdGhpc1xuICAgICAqIGZpZWxkIGluZGV4LlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBrZXkgb2YgdGhlIGxhc3QgZG9jdW1lbnQgdGhhdCB3YXMgaW5kZXhlZCBmb3IgdGhpcyBxdWVyeS4gVXNlXG4gICAgICogYERvY3VtZW50S2V5LmVtcHR5KClgIGlmIG5vIGRvY3VtZW50IGhhcyBiZWVuIGluZGV4ZWQuXG4gICAgICovXG4gICAgZSwgXG4gICAgLypcbiAgICAgKiBUaGUgbGFyZ2VzdCBtdXRhdGlvbiBiYXRjaCBpZCB0aGF0J3MgYmVlbiBwcm9jZXNzZWQgYnkgRmlyZXN0b3JlLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5yZWFkVGltZSA9IHQsIHRoaXMuZG9jdW1lbnRLZXkgPSBlLCB0aGlzLmxhcmdlc3RCYXRjaElkID0gbjtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYW4gb2Zmc2V0IHRoYXQgc29ydHMgYmVmb3JlIGFsbCByZWd1bGFyIG9mZnNldHMuICovICAgIHN0YXRpYyBtaW4oKSB7XG4gICAgICAgIHJldHVybiBuZXcgSXQocnQubWluKCksIGh0LmVtcHR5KCksIC0xKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYW4gb2Zmc2V0IHRoYXQgc29ydHMgYWZ0ZXIgYWxsIHJlZ3VsYXIgb2Zmc2V0cy4gKi8gICAgc3RhdGljIG1heCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJdChydC5tYXgoKSwgaHQuZW1wdHkoKSwgLTEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVHQodCwgZSkge1xuICAgIGxldCBuID0gdC5yZWFkVGltZS5jb21wYXJlVG8oZS5yZWFkVGltZSk7XG4gICAgcmV0dXJuIDAgIT09IG4gPyBuIDogKG4gPSBodC5jb21wYXJhdG9yKHQuZG9jdW1lbnRLZXksIGUuZG9jdW1lbnRLZXkpLCAwICE9PSBuID8gbiA6IGV0KHQubGFyZ2VzdEJhdGNoSWQsIGUubGFyZ2VzdEJhdGNoSWQpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgRXQgPSBcIlRoZSBjdXJyZW50IHRhYiBpcyBub3QgaW4gdGhlIHJlcXVpcmVkIHN0YXRlIHRvIHBlcmZvcm0gdGhpcyBvcGVyYXRpb24uIEl0IG1pZ2h0IGJlIG5lY2Vzc2FyeSB0byByZWZyZXNoIHRoZSBicm93c2VyIHRhYi5cIjtcblxuLyoqXG4gKiBBIGJhc2UgY2xhc3MgcmVwcmVzZW50aW5nIGEgcGVyc2lzdGVuY2UgdHJhbnNhY3Rpb24sIGVuY2Fwc3VsYXRpbmcgYm90aCB0aGVcbiAqIHRyYW5zYWN0aW9uJ3Mgc2VxdWVuY2UgbnVtYmVycyBhcyB3ZWxsIGFzIGEgbGlzdCBvZiBvbkNvbW1pdHRlZCBsaXN0ZW5lcnMuXG4gKlxuICogV2hlbiB5b3UgY2FsbCBQZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbigpLCBpdCB3aWxsIGNyZWF0ZSBhIHRyYW5zYWN0aW9uIGFuZFxuICogcGFzcyBpdCB0byB5b3VyIGNhbGxiYWNrLiBZb3UgdGhlbiBwYXNzIGl0IHRvIGFueSBtZXRob2QgdGhhdCBvcGVyYXRlc1xuICogb24gcGVyc2lzdGVuY2UuXG4gKi8gY2xhc3MgQXQge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzID0gW107XG4gICAgfVxuICAgIGFkZE9uQ29tbWl0dGVkTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLm9uQ29tbWl0dGVkTGlzdGVuZXJzLnB1c2godCk7XG4gICAgfVxuICAgIHJhaXNlT25Db21taXR0ZWRFdmVudCgpIHtcbiAgICAgICAgdGhpcy5vbkNvbW1pdHRlZExpc3RlbmVycy5mb3JFYWNoKCh0ID0+IHQoKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVmVyaWZpZXMgdGhlIGVycm9yIHRocm93biBieSBhIExvY2FsU3RvcmUgb3BlcmF0aW9uLiBJZiBhIExvY2FsU3RvcmVcbiAqIG9wZXJhdGlvbiBmYWlscyBiZWNhdXNlIHRoZSBwcmltYXJ5IGxlYXNlIGhhcyBiZWVuIHRha2VuIGJ5IGFub3RoZXIgY2xpZW50LFxuICogd2UgaWdub3JlIHRoZSBlcnJvciAodGhlIHBlcnNpc3RlbmNlIGxheWVyIHdpbGwgaW1tZWRpYXRlbHkgY2FsbFxuICogYGFwcGx5UHJpbWFyeUxlYXNlYCB0byBwcm9wYWdhdGUgdGhlIHByaW1hcnkgc3RhdGUgY2hhbmdlKS4gQWxsIG90aGVyIGVycm9yc1xuICogYXJlIHJlLXRocm93bi5cbiAqXG4gKiBAcGFyYW0gZXJyIC0gQW4gZXJyb3IgcmV0dXJuZWQgYnkgYSBMb2NhbFN0b3JlIG9wZXJhdGlvbi5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIHdlIHJlY292ZXJlZCwgb3IgdGhlIG9yaWdpbmFsIGVycm9yLlxuICovIGFzeW5jIGZ1bmN0aW9uIHZ0KHQpIHtcbiAgICBpZiAodC5jb2RlICE9PSBxLkZBSUxFRF9QUkVDT05ESVRJT04gfHwgdC5tZXNzYWdlICE9PSBFdCkgdGhyb3cgdDtcbiAgICBOKFwiTG9jYWxTdG9yZVwiLCBcIlVuZXhwZWN0ZWRseSBsb3N0IHByaW1hcnkgbGVhc2VcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFBlcnNpc3RlbmNlUHJvbWlzZSBpcyBlc3NlbnRpYWxseSBhIHJlLWltcGxlbWVudGF0aW9uIG9mIFByb21pc2UgZXhjZXB0XG4gKiBpdCBoYXMgYSAubmV4dCgpIG1ldGhvZCBpbnN0ZWFkIG9mIC50aGVuKCkgYW5kIC5uZXh0KCkgYW5kIC5jYXRjaCgpIGNhbGxiYWNrc1xuICogYXJlIGV4ZWN1dGVkIHN5bmNocm9ub3VzbHkgd2hlbiBhIFBlcnNpc3RlbmNlUHJvbWlzZSByZXNvbHZlcyByYXRoZXIgdGhhblxuICogYXN5bmNocm9ub3VzbHkgKFByb21pc2UgaW1wbGVtZW50YXRpb25zIHVzZSBzZXRJbW1lZGlhdGUoKSBvciBzaW1pbGFyKS5cbiAqXG4gKiBUaGlzIGlzIG5lY2Vzc2FyeSB0byBpbnRlcm9wZXJhdGUgd2l0aCBJbmRleGVkREIgd2hpY2ggd2lsbCBhdXRvbWF0aWNhbGx5XG4gKiBjb21taXQgdHJhbnNhY3Rpb25zIGlmIGNvbnRyb2wgaXMgcmV0dXJuZWQgdG8gdGhlIGV2ZW50IGxvb3Agd2l0aG91dFxuICogc3luY2hyb25vdXNseSBpbml0aWF0aW5nIGFub3RoZXIgb3BlcmF0aW9uIG9uIHRoZSB0cmFuc2FjdGlvbi5cbiAqXG4gKiBOT1RFOiAudGhlbigpIGFuZCAuY2F0Y2goKSBvbmx5IGFsbG93IGEgc2luZ2xlIGNvbnN1bWVyLCB1bmxpa2Ugbm9ybWFsXG4gKiBQcm9taXNlcy5cbiAqLyBjbGFzcyBSdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBOT1RFOiBuZXh0L2NhdGNoQ2FsbGJhY2sgd2lsbCBhbHdheXMgcG9pbnQgdG8gb3VyIG93biB3cmFwcGVyIGZ1bmN0aW9ucyxcbiAgICAgICAgLy8gbm90IHRoZSB1c2VyJ3MgcmF3IG5leHQoKSBvciBjYXRjaCgpIGNhbGxiYWNrcy5cbiAgICAgICAgdGhpcy5uZXh0Q2FsbGJhY2sgPSBudWxsLCB0aGlzLmNhdGNoQ2FsbGJhY2sgPSBudWxsLCBcbiAgICAgICAgLy8gV2hlbiB0aGUgb3BlcmF0aW9uIHJlc29sdmVzLCB3ZSdsbCBzZXQgcmVzdWx0IG9yIGVycm9yIGFuZCBtYXJrIGlzRG9uZS5cbiAgICAgICAgdGhpcy5yZXN1bHQgPSB2b2lkIDAsIHRoaXMuZXJyb3IgPSB2b2lkIDAsIHRoaXMuaXNEb25lID0gITEsIFxuICAgICAgICAvLyBTZXQgdG8gdHJ1ZSB3aGVuIC50aGVuKCkgb3IgLmNhdGNoKCkgYXJlIGNhbGxlZCBhbmQgcHJldmVudHMgYWRkaXRpb25hbFxuICAgICAgICAvLyBjaGFpbmluZy5cbiAgICAgICAgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITEsIHQoKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5yZXN1bHQgPSB0LCB0aGlzLm5leHRDYWxsYmFjayAmJiBcbiAgICAgICAgICAgIC8vIHZhbHVlIHNob3VsZCBiZSBkZWZpbmVkIHVubGVzcyBUIGlzIFZvaWQsIGJ1dCB3ZSBjYW4ndCBleHByZXNzXG4gICAgICAgICAgICAvLyB0aGF0IGluIHRoZSB0eXBlIHN5c3RlbS5cbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrKHQpO1xuICAgICAgICB9KSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5pc0RvbmUgPSAhMCwgdGhpcy5lcnJvciA9IHQsIHRoaXMuY2F0Y2hDYWxsYmFjayAmJiB0aGlzLmNhdGNoQ2FsbGJhY2sodCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5uZXh0KHZvaWQgMCwgdCk7XG4gICAgfVxuICAgIG5leHQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jYWxsYmFja0F0dGFjaGVkICYmIE8oKSwgdGhpcy5jYWxsYmFja0F0dGFjaGVkID0gITAsIHRoaXMuaXNEb25lID8gdGhpcy5lcnJvciA/IHRoaXMud3JhcEZhaWx1cmUoZSwgdGhpcy5lcnJvcikgOiB0aGlzLndyYXBTdWNjZXNzKHQsIHRoaXMucmVzdWx0KSA6IG5ldyBSdCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dENhbGxiYWNrID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwU3VjY2Vzcyh0LCBlKS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfSwgdGhpcy5jYXRjaENhbGxiYWNrID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy53cmFwRmFpbHVyZShlLCB0KS5uZXh0KG4sIHMpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0b1Byb21pc2UoKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIHRoaXMubmV4dCh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB3cmFwVXNlckZ1bmN0aW9uKHQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0KCk7XG4gICAgICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIFJ0ID8gZSA6IFJ0LnJlc29sdmUoZSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBSdC5yZWplY3QodCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgd3JhcFN1Y2Nlc3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogUnQucmVzb2x2ZShlKTtcbiAgICB9XG4gICAgd3JhcEZhaWx1cmUodCwgZSkge1xuICAgICAgICByZXR1cm4gdCA/IHRoaXMud3JhcFVzZXJGdW5jdGlvbigoKCkgPT4gdChlKSkpIDogUnQucmVqZWN0KGUpO1xuICAgIH1cbiAgICBzdGF0aWMgcmVzb2x2ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUnQoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICBlKHQpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHN0YXRpYyByZWplY3QodCkge1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzdGF0aWMgd2FpdEZvcihcbiAgICAvLyBBY2NlcHQgYWxsIFByb21pc2UgdHlwZXMgaW4gd2FpdEZvcigpLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgdCkge1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAwLCBpID0gMCwgciA9ICExO1xuICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICArK3MsIHQubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICArK2ksIHIgJiYgaSA9PT0gcyAmJiBlKCk7XG4gICAgICAgICAgICAgICAgfSksICh0ID0+IG4odCkpKTtcbiAgICAgICAgICAgIH0pKSwgciA9ICEwLCBpID09PSBzICYmIGUoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBwcmVkaWNhdGUgZnVuY3Rpb25zIHRoYXQgYXN5bmNocm9ub3VzbHkgZXZhbHVhdGUgdG8gYVxuICAgICAqIGJvb2xlYW4sIGltcGxlbWVudHMgYSBzaG9ydC1jaXJjdWl0aW5nIGBvcmAgYmV0d2VlbiB0aGUgcmVzdWx0cy4gUHJlZGljYXRlc1xuICAgICAqIHdpbGwgYmUgZXZhbHVhdGVkIHVudGlsIG9uZSBvZiB0aGVtIHJldHVybnMgYHRydWVgLCB0aGVuIHN0b3AuIFRoZSBmaW5hbFxuICAgICAqIHJlc3VsdCB3aWxsIGJlIHdoZXRoZXIgYW55IG9mIHRoZW0gcmV0dXJuZWQgYHRydWVgLlxuICAgICAqLyAgICBzdGF0aWMgb3IodCkge1xuICAgICAgICBsZXQgZSA9IFJ0LnJlc29sdmUoITEpO1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZSA9IGUubmV4dCgodCA9PiB0ID8gUnQucmVzb2x2ZSh0KSA6IG4oKSkpO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgc3RhdGljIGZvckVhY2godCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuLnB1c2goZS5jYWxsKHRoaXMsIHQsIHMpKTtcbiAgICAgICAgfSkpLCB0aGlzLndhaXRGb3Iobik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbmN1cnJlbnRseSBtYXAgYWxsIGFycmF5IGVsZW1lbnRzIHRocm91Z2ggYXN5bmNocm9ub3VzIGZ1bmN0aW9uLlxuICAgICAqLyAgICBzdGF0aWMgbWFwQXJyYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHQubGVuZ3RoLCByID0gbmV3IEFycmF5KGkpO1xuICAgICAgICAgICAgbGV0IG8gPSAwO1xuICAgICAgICAgICAgZm9yIChsZXQgdSA9IDA7IHUgPCBpOyB1KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBjID0gdTtcbiAgICAgICAgICAgICAgICBlKHRbY10pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICByW2NdID0gdCwgKytvLCBvID09PSBpICYmIG4ocik7XG4gICAgICAgICAgICAgICAgfSksICh0ID0+IHModCkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBbiBhbHRlcm5hdGl2ZSB0byByZWN1cnNpdmUgUGVyc2lzdGVuY2VQcm9taXNlIGNhbGxzLCB0aGF0IGF2b2lkc1xuICAgICAqIHBvdGVudGlhbCBtZW1vcnkgcHJvYmxlbXMgZnJvbSB1bmJvdW5kZWQgY2hhaW5zIG9mIHByb21pc2VzLlxuICAgICAqXG4gICAgICogVGhlIGBhY3Rpb25gIHdpbGwgYmUgY2FsbGVkIHJlcGVhdGVkbHkgd2hpbGUgYGNvbmRpdGlvbmAgaXMgdHJ1ZS5cbiAgICAgKi8gICAgc3RhdGljIGRvV2hpbGUodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFJ0KCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9ICgpID0+IHtcbiAgICAgICAgICAgICAgICAhMCA9PT0gdCgpID8gZSgpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgaSgpO1xuICAgICAgICAgICAgICAgIH0pLCBzKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpKCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBSZWZlcmVuY2VzIHRvIGB3aW5kb3dgIGFyZSBndWFyZGVkIGJ5IFNpbXBsZURiLmlzQXZhaWxhYmxlKClcbi8qIGVzbGludC1kaXNhYmxlIG5vLXJlc3RyaWN0ZWQtZ2xvYmFscyAqL1xuLyoqXG4gKiBXcmFwcyBhbiBJREJUcmFuc2FjdGlvbiBhbmQgZXhwb3NlcyBhIHN0b3JlKCkgbWV0aG9kIHRvIGdldCBhIGhhbmRsZSB0byBhXG4gKiBzcGVjaWZpYyBvYmplY3Qgc3RvcmUuXG4gKi9cbmNsYXNzIFB0IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYWN0aW9uID0gdCwgdGhpcy50cmFuc2FjdGlvbiA9IGUsIHRoaXMuYWJvcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgYFByb21pc2VgIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgcmVzdWx0IG9mIHRoZSBJbmRleGVkRGIgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnYgPSBuZXcgSywgdGhpcy50cmFuc2FjdGlvbi5vbmNvbXBsZXRlID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy52LnJlc29sdmUoKTtcbiAgICAgICAgfSwgdGhpcy50cmFuc2FjdGlvbi5vbmFib3J0ID0gKCkgPT4ge1xuICAgICAgICAgICAgZS5lcnJvciA/IHRoaXMudi5yZWplY3QobmV3IFN0KHQsIGUuZXJyb3IpKSA6IHRoaXMudi5yZXNvbHZlKCk7XG4gICAgICAgIH0sIHRoaXMudHJhbnNhY3Rpb24ub25lcnJvciA9IGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IGt0KGUudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIHRoaXMudi5yZWplY3QobmV3IFN0KHQsIG4pKTtcbiAgICAgICAgfTtcbiAgICB9XG4gICAgc3RhdGljIG9wZW4odCwgZSwgbiwgcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBQdChlLCB0LnRyYW5zYWN0aW9uKHMsIG4pKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFN0KGUsIHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBSKCkge1xuICAgICAgICByZXR1cm4gdGhpcy52LnByb21pc2U7XG4gICAgfVxuICAgIGFib3J0KHQpIHtcbiAgICAgICAgdCAmJiB0aGlzLnYucmVqZWN0KHQpLCB0aGlzLmFib3J0ZWQgfHwgKE4oXCJTaW1wbGVEYlwiLCBcIkFib3J0aW5nIHRyYW5zYWN0aW9uOlwiLCB0ID8gdC5tZXNzYWdlIDogXCJDbGllbnQtaW5pdGlhdGVkIGFib3J0XCIpLCBcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gITAsIHRoaXMudHJhbnNhY3Rpb24uYWJvcnQoKSk7XG4gICAgfVxuICAgIFAoKSB7XG4gICAgICAgIC8vIElmIHRoZSBicm93c2VyIHN1cHBvcnRzIFYzIEluZGV4ZWREQiwgd2UgaW52b2tlIGNvbW1pdCgpIGV4cGxpY2l0bHkgdG9cbiAgICAgICAgLy8gc3BlZWQgdXAgaW5kZXggREIgcHJvY2Vzc2luZyBpZiB0aGUgZXZlbnQgbG9vcCByZW1haW5zIGJsb2Nrcy5cbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgY29uc3QgdCA9IHRoaXMudHJhbnNhY3Rpb247XG4gICAgICAgIHRoaXMuYWJvcnRlZCB8fCBcImZ1bmN0aW9uXCIgIT0gdHlwZW9mIHQuY29tbWl0IHx8IHQuY29tbWl0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYSBTaW1wbGVEYlN0b3JlPEtleVR5cGUsIFZhbHVlVHlwZT4gZm9yIHRoZSBzcGVjaWZpZWQgc3RvcmUuIEFsbFxuICAgICAqIG9wZXJhdGlvbnMgcGVyZm9ybWVkIG9uIHRoZSBTaW1wbGVEYlN0b3JlIGhhcHBlbiB3aXRoaW4gdGhlIGNvbnRleHQgb2YgdGhpc1xuICAgICAqIHRyYW5zYWN0aW9uIGFuZCBpdCBjYW5ub3QgYmUgdXNlZCBhbnltb3JlIG9uY2UgdGhlIHRyYW5zYWN0aW9uIGlzXG4gICAgICogY29tcGxldGVkLlxuICAgICAqXG4gICAgICogTm90ZSB0aGF0IHdlIGNhbid0IGFjdHVhbGx5IGVuZm9yY2UgdGhhdCB0aGUgS2V5VHlwZSBhbmQgVmFsdWVUeXBlIGFyZVxuICAgICAqIGNvcnJlY3QsIGJ1dCB0aGV5IGFsbG93IHR5cGUgc2FmZXR5IHRocm91Z2ggdGhlIHJlc3Qgb2YgdGhlIGNvbnN1bWluZyBjb2RlLlxuICAgICAqLyAgICBzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKHQpO1xuICAgICAgICByZXR1cm4gbmV3IEN0KGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhIHdyYXBwZXIgYXJvdW5kIEluZGV4ZWREYiB3aXRoIGEgc2ltcGxpZmllZCBpbnRlcmZhY2UgdGhhdCB1c2VzXG4gKiBQcm9taXNlLWxpa2UgcmV0dXJuIHZhbHVlcyB0byBjaGFpbiBvcGVyYXRpb25zLiBSZWFsIHByb21pc2VzIGNhbm5vdCBiZSB1c2VkXG4gKiBzaW5jZSAudGhlbigpIGNvbnRpbnVhdGlvbnMgYXJlIGV4ZWN1dGVkIGFzeW5jaHJvbm91c2x5IChlLmcuIHZpYVxuICogLnNldEltbWVkaWF0ZSksIHdoaWNoIHdvdWxkIGNhdXNlIEluZGV4ZWREQiB0byBlbmQgdGhlIHRyYW5zYWN0aW9uLlxuICogU2VlIFBlcnNpc3RlbmNlUHJvbWlzZSBmb3IgbW9yZSBkZXRhaWxzLlxuICovIGNsYXNzIGJ0IHtcbiAgICAvKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgU2ltcGxlRGIgd3JhcHBlciBmb3IgSW5kZXhlZERiIGRhdGFiYXNlIGBuYW1lYC5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBgdmVyc2lvbmAgbXVzdCBub3QgYmUgYSBkb3duZ3JhZGUuIEluZGV4ZWREQiBkb2VzIG5vdCBzdXBwb3J0XG4gICAgICogZG93bmdyYWRpbmcgdGhlIHNjaGVtYSB2ZXJzaW9uLiBXZSBjdXJyZW50bHkgZG8gbm90IHN1cHBvcnQgYW55IHdheSB0byBkb1xuICAgICAqIHZlcnNpb25pbmcgb3V0c2lkZSBvZiBJbmRleGVkREIncyB2ZXJzaW9uaW5nIG1lY2hhbmlzbSwgYXMgb25seVxuICAgICAqIHZlcnNpb24tdXBncmFkZSB0cmFuc2FjdGlvbnMgYXJlIGFsbG93ZWQgdG8gZG8gdGhpbmdzIGxpa2UgY3JlYXRlXG4gICAgICogb2JqZWN0c3RvcmVzLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5uYW1lID0gdCwgdGhpcy52ZXJzaW9uID0gZSwgdGhpcy5WID0gbjtcbiAgICAgICAgLy8gTk9URTogQWNjb3JkaW5nIHRvIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xOTcwNTAsIHRoZVxuICAgICAgICAvLyBidWcgd2UncmUgY2hlY2tpbmcgZm9yIHNob3VsZCBleGlzdCBpbiBpT1MgPj0gMTIuMiBhbmQgPCAxMywgYnV0IGZvclxuICAgICAgICAvLyB3aGF0ZXZlciByZWFzb24gaXQncyBtdWNoIGhhcmRlciB0byBoaXQgYWZ0ZXIgMTIuMiBzbyB3ZSBvbmx5IHByb2FjdGl2ZWx5XG4gICAgICAgIC8vIGxvZyBvbiAxMi4yLlxuICAgICAgICAxMi4yID09PSBidC5TKGdldFVBKCkpICYmIGsoXCJGaXJlc3RvcmUgcGVyc2lzdGVuY2Ugc3VmZmVycyBmcm9tIGEgYnVnIGluIGlPUyAxMi4yIFNhZmFyaSB0aGF0IG1heSBjYXVzZSB5b3VyIGFwcCB0byBzdG9wIHdvcmtpbmcuIFNlZSBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3EvNTY0OTYyOTYvMTEwOTE1IGZvciBkZXRhaWxzIGFuZCBhIHBvdGVudGlhbCB3b3JrYXJvdW5kLlwiKTtcbiAgICB9XG4gICAgLyoqIERlbGV0ZXMgdGhlIHNwZWNpZmllZCBkYXRhYmFzZS4gKi8gICAgc3RhdGljIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiBOKFwiU2ltcGxlRGJcIiwgXCJSZW1vdmluZyBkYXRhYmFzZTpcIiwgdCksIHh0KHdpbmRvdy5pbmRleGVkREIuZGVsZXRlRGF0YWJhc2UodCkpLnRvUHJvbWlzZSgpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIEluZGV4ZWREQiBpcyBhdmFpbGFibGUgaW4gdGhlIGN1cnJlbnQgZW52aXJvbm1lbnQuICovICAgIHN0YXRpYyBEKCkge1xuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKGJ0LkMoKSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBXZSBleHRlbnNpdmVseSB1c2UgaW5kZXhlZCBhcnJheSB2YWx1ZXMgYW5kIGNvbXBvdW5kIGtleXMsXG4gICAgICAgIC8vIHdoaWNoIElFIGFuZCBFZGdlIGRvIG5vdCBzdXBwb3J0LiBIb3dldmVyLCB0aGV5IHN0aWxsIGhhdmUgaW5kZXhlZERCXG4gICAgICAgIC8vIGRlZmluZWQgb24gdGhlIHdpbmRvdywgc28gd2UgbmVlZCB0byBjaGVjayBmb3IgdGhlbSBoZXJlIGFuZCBtYWtlIHN1cmVcbiAgICAgICAgLy8gdG8gcmV0dXJuIHRoYXQgcGVyc2lzdGVuY2UgaXMgbm90IGVuYWJsZWQgZm9yIHRob3NlIGJyb3dzZXJzLlxuICAgICAgICAvLyBGb3IgdHJhY2tpbmcgc3VwcG9ydCBvZiB0aGlzIGZlYXR1cmUsIHNlZSBoZXJlOlxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5taWNyb3NvZnQuY29tL2VuLXVzL21pY3Jvc29mdC1lZGdlL3BsYXRmb3JtL3N0YXR1cy9pbmRleGVkZGJhcnJheXNhbmRtdWx0aWVudHJ5c3VwcG9ydC9cbiAgICAgICAgLy8gQ2hlY2sgdGhlIFVBIHN0cmluZyB0byBmaW5kIG91dCB0aGUgYnJvd3Nlci5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZ2V0VUEoKSwgZSA9IGJ0LlModCksIG4gPSAwIDwgZSAmJiBlIDwgMTAsIHMgPSBidC5OKHQpLCBpID0gMCA8IHMgJiYgcyA8IDQuNTtcbiAgICAgICAgLy8gSUUgMTBcbiAgICAgICAgLy8gdWEgPSAnTW96aWxsYS81LjAgKGNvbXBhdGlibGU7IE1TSUUgMTAuMDsgV2luZG93cyBOVCA2LjI7IFRyaWRlbnQvNi4wKSc7XG4gICAgICAgIC8vIElFIDExXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMzsgVHJpZGVudC83LjA7IHJ2OjExLjApIGxpa2UgR2Vja28nO1xuICAgICAgICAvLyBFZGdlXG4gICAgICAgIC8vIHVhID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDEwLjA7IFdPVzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLFxuICAgICAgICAvLyBsaWtlIEdlY2tvKSBDaHJvbWUvMzkuMC4yMTcxLjcxIFNhZmFyaS81MzcuMzYgRWRnZS8xMi4wJztcbiAgICAgICAgLy8gaU9TIFNhZmFyaTogRGlzYWJsZSBmb3IgdXNlcnMgcnVubmluZyBpT1MgdmVyc2lvbiA8IDEwLlxuICAgICAgICAgICAgICAgIHJldHVybiAhKHQuaW5kZXhPZihcIk1TSUUgXCIpID4gMCB8fCB0LmluZGV4T2YoXCJUcmlkZW50L1wiKSA+IDAgfHwgdC5pbmRleE9mKFwiRWRnZS9cIikgPiAwIHx8IG4gfHwgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgYmFja2luZyBJbmRleGVkREIgc3RvcmUgaXMgdGhlIE5vZGUgSW5kZXhlZERCU2hpbVxuICAgICAqIChzZWUgaHR0cHM6Ly9naXRodWIuY29tL2F4ZW1jbGlvbi9JbmRleGVkREJTaGltKS5cbiAgICAgKi8gICAgc3RhdGljIEMoKSB7XG4gICAgICAgIHZhciB0O1xuICAgICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgcHJvY2VzcyAmJiBcIllFU1wiID09PSAobnVsbCA9PT0gKHQgPSBwcm9jZXNzLmVudikgfHwgdm9pZCAwID09PSB0ID8gdm9pZCAwIDogdC5rKTtcbiAgICB9XG4gICAgLyoqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZyb20gYSB0cmFuc2FjdGlvbi4gKi8gICAgc3RhdGljIE0odCwgZSkge1xuICAgICAgICByZXR1cm4gdC5zdG9yZShlKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBpT1MgdmVyc2lvbi4gUmV0dXJucyAtMSBpZiBub3QgZm91bmQuICovXG4gICAgc3RhdGljIFModCkge1xuICAgICAgICBjb25zdCBlID0gdC5tYXRjaCgvaSg/OnBob25lfHBhZHxwb2QpIG9zIChbXFxkX10rKS9pKSwgbiA9IGUgPyBlWzFdLnNwbGl0KFwiX1wiKS5zbGljZSgwLCAyKS5qb2luKFwiLlwiKSA6IFwiLTFcIjtcbiAgICAgICAgcmV0dXJuIE51bWJlcihuKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIC8qKiBQYXJzZSBVc2VyIEFnZW50IHRvIGRldGVybWluZSBBbmRyb2lkIHZlcnNpb24uIFJldHVybnMgLTEgaWYgbm90IGZvdW5kLiAqL1xuICAgIHN0YXRpYyBOKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWF0Y2goL0FuZHJvaWQgKFtcXGQuXSspL2kpLCBuID0gZSA/IGVbMV0uc3BsaXQoXCIuXCIpLnNsaWNlKDAsIDIpLmpvaW4oXCIuXCIpIDogXCItMVwiO1xuICAgICAgICByZXR1cm4gTnVtYmVyKG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPcGVucyB0aGUgc3BlY2lmaWVkIGRhdGFiYXNlLCBjcmVhdGluZyBvciB1cGdyYWRpbmcgaXQgaWYgbmVjZXNzYXJ5LlxuICAgICAqLyAgICBhc3luYyAkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZGIgfHwgKE4oXCJTaW1wbGVEYlwiLCBcIk9wZW5pbmcgZGF0YWJhc2U6XCIsIHRoaXMubmFtZSksIHRoaXMuZGIgPSBhd2FpdCBuZXcgUHJvbWlzZSgoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8obWlrZWxlaGVuKTogSW52ZXN0aWdhdGUgYnJvd3NlciBjb21wYXRpYmlsaXR5LlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0luZGV4ZWREQl9BUEkvVXNpbmdfSW5kZXhlZERCXG4gICAgICAgICAgICAvLyBzdWdnZXN0cyBJRTkgYW5kIG9sZGVyIFdlYktpdCBicm93c2VycyBoYW5kbGUgdXBncmFkZVxuICAgICAgICAgICAgLy8gZGlmZmVyZW50bHkuIFRoZXkgZXhwZWN0IHNldFZlcnNpb24sIGFzIGRlc2NyaWJlZCBoZXJlOlxuICAgICAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0lEQlZlcnNpb25DaGFuZ2VSZXF1ZXN0L3NldFZlcnNpb25cbiAgICAgICAgICAgIGNvbnN0IHMgPSBpbmRleGVkREIub3Blbih0aGlzLm5hbWUsIHRoaXMudmVyc2lvbik7XG4gICAgICAgICAgICBzLm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgZShuKTtcbiAgICAgICAgICAgIH0sIHMub25ibG9ja2VkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIG4obmV3IFN0KHQsIFwiQ2Fubm90IHVwZ3JhZGUgSW5kZXhlZERCIHNjaGVtYSB3aGlsZSBhbm90aGVyIHRhYiBpcyBvcGVuLiBDbG9zZSBhbGwgdGFicyB0aGF0IGFjY2VzcyBGaXJlc3RvcmUgYW5kIHJlbG9hZCB0aGlzIHBhZ2UgdG8gcHJvY2VlZC5cIikpO1xuICAgICAgICAgICAgfSwgcy5vbmVycm9yID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0LmVycm9yO1xuICAgICAgICAgICAgICAgIFwiVmVyc2lvbkVycm9yXCIgPT09IHMubmFtZSA/IG4obmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkEgbmV3ZXIgdmVyc2lvbiBvZiB0aGUgRmlyZXN0b3JlIFNESyB3YXMgcHJldmlvdXNseSB1c2VkIGFuZCBzbyB0aGUgcGVyc2lzdGVkIGRhdGEgaXMgbm90IGNvbXBhdGlibGUgd2l0aCB0aGUgdmVyc2lvbiBvZiB0aGUgU0RLIHlvdSBhcmUgbm93IHVzaW5nLiBUaGUgU0RLIHdpbGwgb3BlcmF0ZSB3aXRoIHBlcnNpc3RlbmNlIGRpc2FibGVkLiBJZiB5b3UgbmVlZCBwZXJzaXN0ZW5jZSwgcGxlYXNlIHJlLXVwZ3JhZGUgdG8gYSBuZXdlciB2ZXJzaW9uIG9mIHRoZSBTREsgb3IgZWxzZSBjbGVhciB0aGUgcGVyc2lzdGVkIEluZGV4ZWREQiBkYXRhIGZvciB5b3VyIGFwcCB0byBzdGFydCBmcmVzaC5cIikpIDogXCJJbnZhbGlkU3RhdGVFcnJvclwiID09PSBzLm5hbWUgPyBuKG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJVbmFibGUgdG8gb3BlbiBhbiBJbmRleGVkREIgY29ubmVjdGlvbi4gVGhpcyBjb3VsZCBiZSBkdWUgdG8gcnVubmluZyBpbiBhIHByaXZhdGUgYnJvd3Npbmcgc2Vzc2lvbiBvbiBhIGJyb3dzZXIgd2hvc2UgcHJpdmF0ZSBicm93c2luZyBzZXNzaW9ucyBkbyBub3Qgc3VwcG9ydCBJbmRleGVkREI6IFwiICsgcykpIDogbihuZXcgU3QodCwgcykpO1xuICAgICAgICAgICAgfSwgcy5vbnVwZ3JhZGVuZWVkZWQgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBOKFwiU2ltcGxlRGJcIiwgJ0RhdGFiYXNlIFwiJyArIHRoaXMubmFtZSArICdcIiByZXF1aXJlcyB1cGdyYWRlIGZyb20gdmVyc2lvbjonLCB0Lm9sZFZlcnNpb24pO1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldC5yZXN1bHQ7XG4gICAgICAgICAgICAgICAgdGhpcy5WLk8oZSwgcy50cmFuc2FjdGlvbiwgdC5vbGRWZXJzaW9uLCB0aGlzLnZlcnNpb24pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgTihcIlNpbXBsZURiXCIsIFwiRGF0YWJhc2UgdXBncmFkZSB0byB2ZXJzaW9uIFwiICsgdGhpcy52ZXJzaW9uICsgXCIgY29tcGxldGVcIik7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpKSwgdGhpcy5GICYmICh0aGlzLmRiLm9udmVyc2lvbmNoYW5nZSA9IHQgPT4gdGhpcy5GKHQpKSwgdGhpcy5kYjtcbiAgICB9XG4gICAgQih0KSB7XG4gICAgICAgIHRoaXMuRiA9IHQsIHRoaXMuZGIgJiYgKHRoaXMuZGIub252ZXJzaW9uY2hhbmdlID0gZSA9PiB0KGUpKTtcbiAgICB9XG4gICAgYXN5bmMgcnVuVHJhbnNhY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gXCJyZWFkb25seVwiID09PSBlO1xuICAgICAgICBsZXQgciA9IDA7XG4gICAgICAgIGZvciAoOzspIHtcbiAgICAgICAgICAgICsrcjtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgdGhpcy5kYiA9IGF3YWl0IHRoaXMuJCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gUHQub3Blbih0aGlzLmRiLCB0LCBpID8gXCJyZWFkb25seVwiIDogXCJyZWFkd3JpdGVcIiwgbiksIHIgPSBzKGUpLm5leHQoKHQgPT4gKGUuUCgpLCBcbiAgICAgICAgICAgICAgICB0KSkpLmNhdGNoKCh0ID0+IChcbiAgICAgICAgICAgICAgICAvLyBBYm9ydCB0aGUgdHJhbnNhY3Rpb24gaWYgdGhlcmUgd2FzIGFuIGVycm9yLlxuICAgICAgICAgICAgICAgIGUuYWJvcnQodCksIFJ0LnJlamVjdCh0KSkpKS50b1Byb21pc2UoKTtcbiAgICAgICAgICAgICAgICAvLyBBcyBub3RlZCBhYm92ZSwgZXJyb3JzIGFyZSBwcm9wYWdhdGVkIGJ5IGFib3J0aW5nIHRoZSB0cmFuc2FjdGlvbi4gU29cbiAgICAgICAgICAgICAgICAvLyB3ZSBzd2FsbG93IGFueSBlcnJvciBoZXJlIHRvIGF2b2lkIHRoZSBicm93c2VyIGxvZ2dpbmcgaXQgYXMgdW5oYW5kbGVkLlxuICAgICAgICAgICAgICAgIHJldHVybiByLmNhdGNoKCgoKSA9PiB7fSkpLCBcbiAgICAgICAgICAgICAgICAvLyBXYWl0IGZvciB0aGUgdHJhbnNhY3Rpb24gdG8gY29tcGxldGUgKGkuZS4gSW5kZXhlZERiJ3Mgb25zdWNjZXNzIGV2ZW50IHRvXG4gICAgICAgICAgICAgICAgLy8gZmlyZSksIGJ1dCBzdGlsbCByZXR1cm4gdGhlIG9yaWdpbmFsIHRyYW5zYWN0aW9uRm5SZXN1bHQgYmFjayB0byB0aGVcbiAgICAgICAgICAgICAgICAvLyBjYWxsZXIuXG4gICAgICAgICAgICAgICAgYXdhaXQgZS5SLCByO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LCBuID0gXCJGaXJlYmFzZUVycm9yXCIgIT09IGUubmFtZSAmJiByIDwgMztcbiAgICAgICAgICAgICAgICAvLyBUT0RPKHNjaG1pZHQtc2ViYXN0aWFuKTogV2UgY291bGQgcHJvYmFibHkgYmUgc21hcnRlciBhYm91dCB0aGlzIGFuZFxuICAgICAgICAgICAgICAgIC8vIG5vdCByZXRyeSBleGNlcHRpb25zIHRoYXQgYXJlIGxpa2VseSB1bnJlY292ZXJhYmxlIChzdWNoIGFzIHF1b3RhXG4gICAgICAgICAgICAgICAgLy8gZXhjZWVkZWQgZXJyb3JzKS5cbiAgICAgICAgICAgICAgICAvLyBOb3RlOiBXZSBjYW5ub3QgdXNlIGFuIGluc3RhbmNlb2YgY2hlY2sgZm9yIEZpcmVzdG9yZUV4Y2VwdGlvbiwgc2luY2UgdGhlXG4gICAgICAgICAgICAgICAgLy8gZXhjZXB0aW9uIGlzIHdyYXBwZWQgaW4gYSBnZW5lcmljIGVycm9yIGJ5IG91ciBhc3luYy9hd2FpdCBoYW5kbGluZy5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKE4oXCJTaW1wbGVEYlwiLCBcIlRyYW5zYWN0aW9uIGZhaWxlZCB3aXRoIGVycm9yOlwiLCBlLm1lc3NhZ2UsIFwiUmV0cnlpbmc6XCIsIG4pLCBcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCksICFuKSByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZGIgJiYgdGhpcy5kYi5jbG9zZSgpLCB0aGlzLmRiID0gdm9pZCAwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGNvbnRyb2xsZXIgZm9yIGl0ZXJhdGluZyBvdmVyIGEga2V5IHJhbmdlIG9yIGluZGV4LiBJdCBhbGxvd3MgYW4gaXRlcmF0ZVxuICogY2FsbGJhY2sgdG8gZGVsZXRlIHRoZSBjdXJyZW50bHktcmVmZXJlbmNlZCBvYmplY3QsIG9yIGp1bXAgdG8gYSBuZXcga2V5XG4gKiB3aXRoaW4gdGhlIGtleSByYW5nZSBvciBpbmRleC5cbiAqLyBjbGFzcyBWdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLkwgPSB0LCB0aGlzLnEgPSAhMSwgdGhpcy5VID0gbnVsbDtcbiAgICB9XG4gICAgZ2V0IGlzRG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucTtcbiAgICB9XG4gICAgZ2V0IEsoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlU7XG4gICAgfVxuICAgIHNldCBjdXJzb3IodCkge1xuICAgICAgICB0aGlzLkwgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGNhbiBiZSBjYWxsZWQgdG8gc3RvcCBpdGVyYXRpb24gYXQgYW55IHBvaW50LlxuICAgICAqLyAgICBkb25lKCkge1xuICAgICAgICB0aGlzLnEgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhpcyBmdW5jdGlvbiBjYW4gYmUgY2FsbGVkIHRvIHNraXAgdG8gdGhhdCBuZXh0IGtleSwgd2hpY2ggY291bGQgYmVcbiAgICAgKiBhbiBpbmRleCBvciBhIHByaW1hcnkga2V5LlxuICAgICAqLyAgICBHKHQpIHtcbiAgICAgICAgdGhpcy5VID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlIHRoZSBjdXJyZW50IGN1cnNvciB2YWx1ZSBmcm9tIHRoZSBvYmplY3Qgc3RvcmUuXG4gICAgICpcbiAgICAgKiBOT1RFOiBZb3UgQ0FOTk9UIGRvIHRoaXMgd2l0aCBhIGtleXNPbmx5IHF1ZXJ5LlxuICAgICAqLyAgICBkZWxldGUoKSB7XG4gICAgICAgIHJldHVybiB4dCh0aGlzLkwuZGVsZXRlKCkpO1xuICAgIH1cbn1cblxuLyoqIEFuIGVycm9yIHRoYXQgd3JhcHMgZXhjZXB0aW9ucyB0aGF0IHRocm93biBkdXJpbmcgSW5kZXhlZERCIGV4ZWN1dGlvbi4gKi8gY2xhc3MgU3QgZXh0ZW5kcyBVIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHEuVU5BVkFJTEFCTEUsIGBJbmRleGVkREIgdHJhbnNhY3Rpb24gJyR7dH0nIGZhaWxlZDogJHtlfWApLCB0aGlzLm5hbWUgPSBcIkluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKiBWZXJpZmllcyB3aGV0aGVyIGBlYCBpcyBhbiBJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yLiAqLyBmdW5jdGlvbiBEdCh0KSB7XG4gICAgLy8gVXNlIG5hbWUgZXF1YWxpdHksIGFzIGluc3RhbmNlb2YgY2hlY2tzIG9uIGVycm9ycyBkb24ndCB3b3JrIHdpdGggZXJyb3JzXG4gICAgLy8gdGhhdCB3cmFwIG90aGVyIGVycm9ycy5cbiAgICByZXR1cm4gXCJJbmRleGVkRGJUcmFuc2FjdGlvbkVycm9yXCIgPT09IHQubmFtZTtcbn1cblxuLyoqXG4gKiBBIHdyYXBwZXIgYXJvdW5kIGFuIElEQk9iamVjdFN0b3JlIHByb3ZpZGluZyBhbiBBUEkgdGhhdDpcbiAqXG4gKiAxKSBIYXMgZ2VuZXJpYyBLZXlUeXBlIC8gVmFsdWVUeXBlIHBhcmFtZXRlcnMgdG8gcHJvdmlkZSBzdHJvbmdseS10eXBlZFxuICogbWV0aG9kcyBmb3IgYWN0aW5nIGFnYWluc3QgdGhlIG9iamVjdCBzdG9yZS5cbiAqIDIpIERlYWxzIHdpdGggSW5kZXhlZERCJ3Mgb25zdWNjZXNzIC8gb25lcnJvciBldmVudCBjYWxsYmFja3MsIG1ha2luZyBldmVyeVxuICogbWV0aG9kIHJldHVybiBhIFBlcnNpc3RlbmNlUHJvbWlzZSBpbnN0ZWFkLlxuICogMykgUHJvdmlkZXMgYSBoaWdoZXItbGV2ZWwgQVBJIHRvIGF2b2lkIG5lZWRpbmcgdG8gZG8gZXhjZXNzaXZlIHdyYXBwaW5nIG9mXG4gKiBpbnRlcm1lZGlhdGUgSW5kZXhlZERCIHR5cGVzIChJREJDdXJzb3JXaXRoVmFsdWUsIGV0Yy4pXG4gKi8gY2xhc3MgQ3Qge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zdG9yZSA9IHQ7XG4gICAgfVxuICAgIHB1dCh0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlID8gKE4oXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIGUpLCBuID0gdGhpcy5zdG9yZS5wdXQoZSwgdCkpIDogKE4oXCJTaW1wbGVEYlwiLCBcIlBVVFwiLCB0aGlzLnN0b3JlLm5hbWUsIFwiPGF1dG8ta2V5PlwiLCB0KSwgXG4gICAgICAgIG4gPSB0aGlzLnN0b3JlLnB1dCh0KSksIHh0KG4pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGEgbmV3IHZhbHVlIGludG8gYW4gT2JqZWN0IFN0b3JlIGFuZCByZXR1cm5zIHRoZSBuZXcga2V5LiBTaW1pbGFyIHRvXG4gICAgICogSW5kZXhlZERiJ3MgYGFkZCgpYCwgdGhpcyBtZXRob2Qgd2lsbCBmYWlsIG9uIHByaW1hcnkga2V5IGNvbGxpc2lvbnMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgb2JqZWN0IHRvIHdyaXRlLlxuICAgICAqIEByZXR1cm5zIFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGFkZC5cbiAgICAgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgTihcIlNpbXBsZURiXCIsIFwiQUREXCIsIHRoaXMuc3RvcmUubmFtZSwgdCwgdCk7XG4gICAgICAgIHJldHVybiB4dCh0aGlzLnN0b3JlLmFkZCh0KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIG9iamVjdCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IGZyb20gdGhlIHNwZWNpZmllZCBzdG9yZSwgb3IgbnVsbFxuICAgICAqIGlmIG5vIG9iamVjdCBleGlzdHMgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS5cbiAgICAgKlxuICAgICAqIEBrZXkgVGhlIGtleSBvZiB0aGUgb2JqZWN0IHRvIGdldC5cbiAgICAgKiBAcmV0dXJucyBUaGUgb2JqZWN0IHdpdGggdGhlIHNwZWNpZmllZCBrZXkgb3IgbnVsbCBpZiBubyBvYmplY3QgZXhpc3RzLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICAvLyBXZSdyZSBkb2luZyBhbiB1bnNhZmUgY2FzdCB0byBWYWx1ZVR5cGUuXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHJldHVybiB4dCh0aGlzLnN0b3JlLmdldCh0KSkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIE5vcm1hbGl6ZSBub25leGlzdGVuY2UgdG8gbnVsbC5cbiAgICAgICAgdm9pZCAwID09PSBlICYmIChlID0gbnVsbCksIE4oXCJTaW1wbGVEYlwiLCBcIkdFVFwiLCB0aGlzLnN0b3JlLm5hbWUsIHQsIGUpLCBlKSkpO1xuICAgIH1cbiAgICBkZWxldGUodCkge1xuICAgICAgICBOKFwiU2ltcGxlRGJcIiwgXCJERUxFVEVcIiwgdGhpcy5zdG9yZS5uYW1lLCB0KTtcbiAgICAgICAgcmV0dXJuIHh0KHRoaXMuc3RvcmUuZGVsZXRlKHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSWYgd2UgZXZlciBuZWVkIG1vcmUgb2YgdGhlIGNvdW50IHZhcmlhbnRzLCB3ZSBjYW4gYWRkIG92ZXJsb2Fkcy4gRm9yIG5vdyxcbiAgICAgKiBhbGwgd2UgbmVlZCBpcyB0byBjb3VudCBldmVyeXRoaW5nIGluIGEgc3RvcmUuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygcm93cyBpbiB0aGUgc3RvcmUuXG4gICAgICovICAgIGNvdW50KCkge1xuICAgICAgICBOKFwiU2ltcGxlRGJcIiwgXCJDT1VOVFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICByZXR1cm4geHQodGhpcy5zdG9yZS5jb3VudCgpKTtcbiAgICB9XG4gICAgaih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLm9wdGlvbnModCwgZSk7XG4gICAgICAgIC8vIFVzZSBgZ2V0QWxsKClgIGlmIHRoZSBicm93c2VyIHN1cHBvcnRzIEluZGV4ZWREQiB2MywgYXMgaXQgaXMgcm91Z2hseVxuICAgICAgICAvLyAyMCUgZmFzdGVyLiBVbmZvcnR1bmF0ZWx5LCBnZXRBbGwoKSBkb2VzIG5vdCBzdXBwb3J0IGN1c3RvbSBpbmRpY2VzLlxuICAgICAgICAgICAgICAgIGlmIChuLmluZGV4IHx8IFwiZnVuY3Rpb25cIiAhPSB0eXBlb2YgdGhpcy5zdG9yZS5nZXRBbGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmN1cnNvcihuKSwgZSA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuVyh0LCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlLnB1c2gobik7XG4gICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgICAgICB9XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLnN0b3JlLmdldEFsbChuLnJhbmdlKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgUnQoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgdC5vbmVycm9yID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG4odC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgICAgIH0sIHQub25zdWNjZXNzID0gdCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGUodC50YXJnZXQucmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvYWRzIHRoZSBmaXJzdCBgY291bnRgIGVsZW1lbnRzIGZyb20gdGhlIHByb3ZpZGVkIGluZGV4IHJhbmdlLiBMb2FkcyBhbGxcbiAgICAgKiBlbGVtZW50cyBpZiBubyBsaW1pdCBpcyBwcm92aWRlZC5cbiAgICAgKi8gICAgSCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmdldEFsbCh0LCBudWxsID09PSBlID8gdm9pZCAwIDogZSk7XG4gICAgICAgIHJldHVybiBuZXcgUnQoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBuLm9uZXJyb3IgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBlKHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIH0sIG4ub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgdChlLnRhcmdldC5yZXN1bHQpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBKKHQsIGUpIHtcbiAgICAgICAgTihcIlNpbXBsZURiXCIsIFwiREVMRVRFIEFMTFwiLCB0aGlzLnN0b3JlLm5hbWUpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5vcHRpb25zKHQsIGUpO1xuICAgICAgICBuLlkgPSAhMTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5XKHMsICgodCwgZSwgbikgPT4gbi5kZWxldGUoKSkpO1xuICAgIH1cbiAgICBYKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGUgPyBuID0gdCA6IChuID0ge30sIGUgPSB0KTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMuY3Vyc29yKG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5XKHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJdGVyYXRlcyBvdmVyIGEgc3RvcmUsIGJ1dCB3YWl0cyBmb3IgdGhlIGdpdmVuIGNhbGxiYWNrIHRvIGNvbXBsZXRlIGZvclxuICAgICAqIGVhY2ggZW50cnkgYmVmb3JlIGl0ZXJhdGluZyB0aGUgbmV4dCBlbnRyeS4gVGhpcyBhbGxvd3MgdGhlIGNhbGxiYWNrIHRvIGRvXG4gICAgICogYXN5bmNocm9ub3VzIHdvcmsgdG8gZGV0ZXJtaW5lIGlmIHRoaXMgaXRlcmF0aW9uIHNob3VsZCBjb250aW51ZS5cbiAgICAgKlxuICAgICAqIFRoZSBwcm92aWRlZCBjYWxsYmFjayBzaG91bGQgcmV0dXJuIGB0cnVlYCB0byBjb250aW51ZSBpdGVyYXRpb24sIGFuZFxuICAgICAqIGBmYWxzZWAgb3RoZXJ3aXNlLlxuICAgICAqLyAgICBaKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuY3Vyc29yKHt9KTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGUub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBrdCh0LnRhcmdldC5lcnJvcik7XG4gICAgICAgICAgICAgICAgcyhlKTtcbiAgICAgICAgICAgIH0sIGUub25zdWNjZXNzID0gZSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgICAgICBzID8gdChzLnByaW1hcnlLZXksIHMudmFsdWUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0ID8gcy5jb250aW51ZSgpIDogbigpO1xuICAgICAgICAgICAgICAgIH0pKSA6IG4oKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBSdCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgICAgIGkodC50YXJnZXQuZXJyb3IpO1xuICAgICAgICAgICAgfSwgdC5vbnN1Y2Nlc3MgPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdC50YXJnZXQucmVzdWx0O1xuICAgICAgICAgICAgICAgIGlmICghaSkgcmV0dXJuIHZvaWQgcygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuZXcgVnQoaSksIG8gPSBlKGkucHJpbWFyeUtleSwgaS52YWx1ZSwgcik7XG4gICAgICAgICAgICAgICAgaWYgKG8gaW5zdGFuY2VvZiBSdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gby5jYXRjaCgodCA9PiAoci5kb25lKCksIFJ0LnJlamVjdCh0KSkpKTtcbiAgICAgICAgICAgICAgICAgICAgbi5wdXNoKHQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByLmlzRG9uZSA/IHMoKSA6IG51bGwgPT09IHIuSyA/IGkuY29udGludWUoKSA6IGkuY29udGludWUoci5LKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBSdC53YWl0Rm9yKG4pKSk7XG4gICAgfVxuICAgIG9wdGlvbnModCwgZSkge1xuICAgICAgICBsZXQgbjtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdCAmJiAoXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IG4gPSB0IDogZSA9IHQpLCB7XG4gICAgICAgICAgICBpbmRleDogbixcbiAgICAgICAgICAgIHJhbmdlOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIGN1cnNvcih0KSB7XG4gICAgICAgIGxldCBlID0gXCJuZXh0XCI7XG4gICAgICAgIGlmICh0LnJldmVyc2UgJiYgKGUgPSBcInByZXZcIiksIHQuaW5kZXgpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLnN0b3JlLmluZGV4KHQuaW5kZXgpO1xuICAgICAgICAgICAgcmV0dXJuIHQuWSA/IG4ub3BlbktleUN1cnNvcih0LnJhbmdlLCBlKSA6IG4ub3BlbkN1cnNvcih0LnJhbmdlLCBlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5zdG9yZS5vcGVuQ3Vyc29yKHQucmFuZ2UsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBXcmFwcyBhbiBJREJSZXF1ZXN0IGluIGEgUGVyc2lzdGVuY2VQcm9taXNlLCB1c2luZyB0aGUgb25zdWNjZXNzIC8gb25lcnJvclxuICogaGFuZGxlcnMgdG8gcmVzb2x2ZSAvIHJlamVjdCB0aGUgUGVyc2lzdGVuY2VQcm9taXNlIGFzIGFwcHJvcHJpYXRlLlxuICovIGZ1bmN0aW9uIHh0KHQpIHtcbiAgICByZXR1cm4gbmV3IFJ0KCgoZSwgbikgPT4ge1xuICAgICAgICB0Lm9uc3VjY2VzcyA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0LnJlc3VsdDtcbiAgICAgICAgICAgIGUobik7XG4gICAgICAgIH0sIHQub25lcnJvciA9IHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IGt0KHQudGFyZ2V0LmVycm9yKTtcbiAgICAgICAgICAgIG4oZSk7XG4gICAgICAgIH07XG4gICAgfSkpO1xufVxuXG4vLyBHdWFyZCBzbyB3ZSBvbmx5IHJlcG9ydCB0aGUgZXJyb3Igb25jZS5cbmxldCBOdCA9ICExO1xuXG5mdW5jdGlvbiBrdCh0KSB7XG4gICAgY29uc3QgZSA9IGJ0LlMoZ2V0VUEoKSk7XG4gICAgaWYgKGUgPj0gMTIuMiAmJiBlIDwgMTMpIHtcbiAgICAgICAgY29uc3QgZSA9IFwiQW4gaW50ZXJuYWwgZXJyb3Igd2FzIGVuY291bnRlcmVkIGluIHRoZSBJbmRleGVkIERhdGFiYXNlIHNlcnZlclwiO1xuICAgICAgICBpZiAodC5tZXNzYWdlLmluZGV4T2YoZSkgPj0gMCkge1xuICAgICAgICAgICAgLy8gV3JhcCBlcnJvciBpbiBhIG1vcmUgZGVzY3JpcHRpdmUgb25lLlxuICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVKFwiaW50ZXJuYWxcIiwgYElPU19JTkRFWEVEREJfQlVHMTogSW5kZXhlZERiIGhhcyB0aHJvd24gJyR7ZX0nLiBUaGlzIGlzIGxpa2VseSBkdWUgdG8gYW4gdW5hdm9pZGFibGUgYnVnIGluIGlPUy4gU2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcS81NjQ5NjI5Ni8xMTA5MTUgZm9yIGRldGFpbHMgYW5kIGEgcG90ZW50aWFsIHdvcmthcm91bmQuYCk7XG4gICAgICAgICAgICByZXR1cm4gTnQgfHwgKE50ID0gITAsIFxuICAgICAgICAgICAgLy8gVGhyb3cgYSBnbG9iYWwgZXhjZXB0aW9uIG91dHNpZGUgb2YgdGhpcyBwcm9taXNlIGNoYWluLCBmb3IgdGhlIHVzZXIgdG9cbiAgICAgICAgICAgIC8vIHBvdGVudGlhbGx5IGNhdGNoLlxuICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgICAgICB9KSwgMCkpLCB0O1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG4vKiogVGhpcyBjbGFzcyBpcyByZXNwb25zaWJsZSBmb3IgdGhlIHNjaGVkdWxpbmcgb2YgSW5kZXggQmFja2ZpbGxlci4gKi9cbmNsYXNzIE10IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMudHQgPSBlLCB0aGlzLnRhc2sgPSBudWxsO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5ldCgxNWUzKTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy50YXNrICYmICh0aGlzLnRhc2suY2FuY2VsKCksIHRoaXMudGFzayA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMudGFzaztcbiAgICB9XG4gICAgZXQodCkge1xuICAgICAgICBOKFwiSW5kZXhCYWNraWxsZXJcIiwgYFNjaGVkdWxlZCBpbiAke3R9bXNgKSwgdGhpcy50YXNrID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwiaW5kZXhfYmFja2ZpbGxcIiAvKiBUaW1lcklkLkluZGV4QmFja2ZpbGwgKi8gLCB0LCAoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy50YXNrID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgTihcIkluZGV4QmFja2lsbGVyXCIsIGBEb2N1bWVudHMgd3JpdHRlbjogJHthd2FpdCB0aGlzLnR0Lm50KCl9YCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgRHQodCkgPyBOKFwiSW5kZXhCYWNraWxsZXJcIiwgXCJJZ25vcmluZyBJbmRleGVkREIgZXJyb3IgZHVyaW5nIGluZGV4IGJhY2tmaWxsOiBcIiwgdCkgOiBhd2FpdCB2dCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuZXQoNmU0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqIEltcGxlbWVudHMgdGhlIHN0ZXBzIGZvciBiYWNrZmlsbGluZyBpbmRleGVzLiAqLyBjbGFzcyAkdCB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogTG9jYWxTdG9yZSBwcm92aWRlcyBhY2Nlc3MgdG8gSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50Vmlldy5cbiAgICAgKiBUaGVzZSBwcm9wZXJ0aWVzIHdpbGwgdXBkYXRlIHdoZW4gdGhlIHVzZXIgY2hhbmdlcy4gQ29uc2VxdWVudGx5LFxuICAgICAqIG1ha2luZyBhIGxvY2FsIGNvcHkgb2YgSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50VmlldyB3aWxsIHJlcXVpcmVcbiAgICAgKiB1cGRhdGVzIG92ZXIgdGltZS4gVGhlIHNpbXBsZXIgc29sdXRpb24gaXMgdG8gcmVseSBvbiBMb2NhbFN0b3JlIHRvIGhhdmVcbiAgICAgKiBhbiB1cC10by1kYXRlIHJlZmVyZW5jZXMgdG8gSW5kZXhNYW5hZ2VyIGFuZCBMb2NhbERvY3VtZW50U3RvcmUuXG4gICAgICovXG4gICAgdCwgZSkge1xuICAgICAgICB0aGlzLmxvY2FsU3RvcmUgPSB0LCB0aGlzLnBlcnNpc3RlbmNlID0gZTtcbiAgICB9XG4gICAgYXN5bmMgbnQodCA9IDUwKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQmFja2ZpbGwgSW5kZXhlc1wiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHRoaXMuc3QoZSwgdCkpKTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBpbmRleCBlbnRyaWVzIHVudGlsIHRoZSBjYXAgaXMgcmVhY2hlZC4gUmV0dXJucyB0aGUgbnVtYmVyIG9mIGRvY3VtZW50cyBwcm9jZXNzZWQuICovICAgIHN0KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBTZXQ7XG4gICAgICAgIGxldCBzID0gZSwgaSA9ICEwO1xuICAgICAgICByZXR1cm4gUnQuZG9XaGlsZSgoKCkgPT4gITAgPT09IGkgJiYgcyA+IDApLCAoKCkgPT4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci5nZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUodCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gZSAmJiAhbi5oYXMoZSkpIHJldHVybiBOKFwiSW5kZXhCYWNraWxsZXJcIiwgYFByb2Nlc3NpbmcgY29sbGVjdGlvbjogJHtlfWApLCBcbiAgICAgICAgICAgIHRoaXMuaXQodCwgZSwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgcyAtPSB0LCBuLmFkZChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGkgPSAhMTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gZSAtIHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIGVudHJpZXMgZm9yIHRoZSBwcm92aWRlZCBjb2xsZWN0aW9uIGdyb3VwLiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHByb2Nlc3NlZC5cbiAgICAgKi8gICAgaXQodCwgZSwgbikge1xuICAgICAgICAvLyBVc2UgdGhlIGVhcmxpZXN0IG9mZnNldCBvZiBhbGwgZmllbGQgaW5kZXhlcyB0byBxdWVyeSB0aGUgbG9jYWwgY2FjaGUuXG4gICAgICAgIHJldHVybiB0aGlzLmxvY2FsU3RvcmUuaW5kZXhNYW5hZ2VyLmdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSkubmV4dCgocyA9PiB0aGlzLmxvY2FsU3RvcmUubG9jYWxEb2N1bWVudHMuZ2V0TmV4dERvY3VtZW50cyh0LCBlLCBzLCBuKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmNoYW5nZXM7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci51cGRhdGVJbmRleEVudHJpZXModCwgaSkubmV4dCgoKCkgPT4gdGhpcy5ydChzLCBuKSkpLm5leHQoKG4gPT4gKE4oXCJJbmRleEJhY2tpbGxlclwiLCBgVXBkYXRpbmcgb2Zmc2V0OiAke259YCksIFxuICAgICAgICAgICAgdGhpcy5sb2NhbFN0b3JlLmluZGV4TWFuYWdlci51cGRhdGVDb2xsZWN0aW9uR3JvdXAodCwgZSwgbikpKSkubmV4dCgoKCkgPT4gaS5zaXplKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0aGUgbmV4dCBvZmZzZXQgYmFzZWQgb24gdGhlIHByb3ZpZGVkIGRvY3VtZW50cy4gKi8gICAgcnQodCwgZSkge1xuICAgICAgICBsZXQgbiA9IHQ7XG4gICAgICAgIHJldHVybiBlLmNoYW5nZXMuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBwdChlKTtcbiAgICAgICAgICAgIFR0KHMsIG4pID4gMCAmJiAobiA9IHMpO1xuICAgICAgICB9KSksIG5ldyBJdChuLnJlYWRUaW1lLCBuLmRvY3VtZW50S2V5LCBNYXRoLm1heChlLmJhdGNoSWQsIHQubGFyZ2VzdEJhdGNoSWQpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIGBMaXN0ZW5TZXF1ZW5jZWAgaXMgYSBtb25vdG9uaWMgc2VxdWVuY2UuIEl0IGlzIGluaXRpYWxpemVkIHdpdGggYSBtaW5pbXVtIHZhbHVlIHRvXG4gKiBleGNlZWQuIEFsbCBzdWJzZXF1ZW50IGNhbGxzIHRvIG5leHQgd2lsbCByZXR1cm4gaW5jcmVhc2luZyB2YWx1ZXMuIElmIHByb3ZpZGVkIHdpdGggYVxuICogYFNlcXVlbmNlTnVtYmVyU3luY2VyYCwgaXQgd2lsbCBhZGRpdGlvbmFsbHkgYnVtcCBpdHMgbmV4dCB2YWx1ZSB3aGVuIHRvbGQgb2YgYSBuZXcgdmFsdWUsIGFzXG4gKiB3ZWxsIGFzIHdyaXRlIG91dCBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgaXQgcHJvZHVjZXMgdmlhIGBuZXh0KClgLlxuICovIGNsYXNzIE90IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucHJldmlvdXNWYWx1ZSA9IHQsIGUgJiYgKGUuc2VxdWVuY2VOdW1iZXJIYW5kbGVyID0gdCA9PiB0aGlzLm90KHQpLCB0aGlzLnV0ID0gdCA9PiBlLndyaXRlU2VxdWVuY2VOdW1iZXIodCkpO1xuICAgIH1cbiAgICBvdCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnByZXZpb3VzVmFsdWUgPSBNYXRoLm1heCh0LCB0aGlzLnByZXZpb3VzVmFsdWUpLCB0aGlzLnByZXZpb3VzVmFsdWU7XG4gICAgfVxuICAgIG5leHQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSArK3RoaXMucHJldmlvdXNWYWx1ZTtcbiAgICAgICAgcmV0dXJuIHRoaXMudXQgJiYgdGhpcy51dCh0KSwgdDtcbiAgICB9XG59XG5cbk90LmN0ID0gLTE7XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIGEgdmFyaWFibGUgaXMgZWl0aGVyIHVuZGVmaW5lZCBvciBudWxsLlxuICovXG5mdW5jdGlvbiBGdCh0KSB7XG4gICAgcmV0dXJuIG51bGwgPT0gdDtcbn1cblxuLyoqIFJldHVybnMgd2hldGhlciB0aGUgdmFsdWUgcmVwcmVzZW50cyAtMC4gKi8gZnVuY3Rpb24gQnQodCkge1xuICAgIC8vIERldGVjdCBpZiB0aGUgdmFsdWUgaXMgLTAuMC4gQmFzZWQgb24gcG9seWZpbGwgZnJvbVxuICAgIC8vIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL09iamVjdC9pc1xuICAgIHJldHVybiAwID09PSB0ICYmIDEgLyB0ID09IC0xIC8gMDtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHdoZXRoZXIgYSB2YWx1ZSBpcyBhbiBpbnRlZ2VyIGFuZCBpbiB0aGUgc2FmZSBpbnRlZ2VyIHJhbmdlXG4gKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdG8gdGVzdCBmb3IgYmVpbmcgYW4gaW50ZWdlciBhbmQgaW4gdGhlIHNhZmUgcmFuZ2VcbiAqLyBmdW5jdGlvbiBMdCh0KSB7XG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgJiYgTnVtYmVyLmlzSW50ZWdlcih0KSAmJiAhQnQodCkgJiYgdCA8PSBOdW1iZXIuTUFYX1NBRkVfSU5URUdFUiAmJiB0ID49IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFbmNvZGVzIGEgcmVzb3VyY2UgcGF0aCBpbnRvIGEgSW5kZXhlZERiLWNvbXBhdGlibGUgc3RyaW5nIGZvcm0uXG4gKi9cbmZ1bmN0aW9uIHF0KHQpIHtcbiAgICBsZXQgZSA9IFwiXCI7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlLmxlbmd0aCA+IDAgJiYgKGUgPSBLdChlKSksIGUgPSBVdCh0LmdldChuKSwgZSk7XG4gICAgcmV0dXJuIEt0KGUpO1xufVxuXG4vKiogRW5jb2RlcyBhIHNpbmdsZSBzZWdtZW50IG9mIGEgcmVzb3VyY2UgcGF0aCBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gVXQodCwgZSkge1xuICAgIGxldCBuID0gZTtcbiAgICBjb25zdCBzID0gdC5sZW5ndGg7XG4gICAgZm9yIChsZXQgZSA9IDA7IGUgPCBzOyBlKyspIHtcbiAgICAgICAgY29uc3QgcyA9IHQuY2hhckF0KGUpO1xuICAgICAgICBzd2l0Y2ggKHMpIHtcbiAgICAgICAgICBjYXNlIFwiXFwwXCI6XG4gICAgICAgICAgICBuICs9IFwiXHUwMDAxXHUwMDEwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMDFcIjpcbiAgICAgICAgICAgIG4gKz0gXCJcdTAwMDFcdTAwMTFcIjtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIG4gKz0gcztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbjtcbn1cblxuLyoqIEVuY29kZXMgYSBwYXRoIHNlcGFyYXRvciBpbnRvIHRoZSBnaXZlbiByZXN1bHQgKi8gZnVuY3Rpb24gS3QodCkge1xuICAgIHJldHVybiB0ICsgXCJcdTAwMDFcdTAwMDFcIjtcbn1cblxuLyoqXG4gKiBEZWNvZGVzIHRoZSBnaXZlbiBJbmRleGVkRGItY29tcGF0aWJsZSBzdHJpbmcgZm9ybSBvZiBhIHJlc291cmNlIHBhdGggaW50b1xuICogYSBSZXNvdXJjZVBhdGggaW5zdGFuY2UuIE5vdGUgdGhhdCB0aGlzIG1ldGhvZCBpcyBub3Qgc3VpdGFibGUgZm9yIHVzZSB3aXRoXG4gKiBkZWNvZGluZyByZXNvdXJjZSBuYW1lcyBmcm9tIHRoZSBzZXJ2ZXI7IHRob3NlIGFyZSBPbmUgUGxhdGZvcm0gZm9ybWF0XG4gKiBzdHJpbmdzLlxuICovIGZ1bmN0aW9uIEd0KHQpIHtcbiAgICAvLyBFdmVudCB0aGUgZW1wdHkgcGF0aCBtdXN0IGVuY29kZSBhcyBhIHBhdGggb2YgYXQgbGVhc3QgbGVuZ3RoIDIuIEEgcGF0aFxuICAgIC8vIHdpdGggZXhhY3RseSAyIG11c3QgYmUgdGhlIGVtcHR5IHBhdGguXG4gICAgY29uc3QgZSA9IHQubGVuZ3RoO1xuICAgIGlmIChGKGUgPj0gMiksIDIgPT09IGUpIHJldHVybiBGKFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDApICYmIFwiXHUwMDAxXCIgPT09IHQuY2hhckF0KDEpKSwgdXQuZW1wdHlQYXRoKCk7XG4gICAgLy8gRXNjYXBlIGNoYXJhY3RlcnMgY2Fubm90IGV4aXN0IHBhc3QgdGhlIHNlY29uZC10by1sYXN0IHBvc2l0aW9uIGluIHRoZVxuICAgIC8vIHNvdXJjZSB2YWx1ZS5cbiAgICAgICAgY29uc3QgX19QUklWQVRFX2xhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXggPSBlIC0gMiwgbiA9IFtdO1xuICAgIGxldCBzID0gXCJcIjtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGU7ICkge1xuICAgICAgICAvLyBUaGUgbGFzdCB0d28gY2hhcmFjdGVycyBvZiBhIHZhbGlkIGVuY29kZWQgcGF0aCBtdXN0IGJlIGEgc2VwYXJhdG9yLCBzb1xuICAgICAgICAvLyB0aGVyZSBtdXN0IGJlIGFuIGVuZCB0byB0aGlzIHNlZ21lbnQuXG4gICAgICAgIGNvbnN0IGUgPSB0LmluZGV4T2YoXCJcdTAwMDFcIiwgaSk7XG4gICAgICAgIChlIDwgMCB8fCBlID4gX19QUklWQVRFX2xhc3RSZWFzb25hYmxlRXNjYXBlSW5kZXgpICYmIE8oKTtcbiAgICAgICAgc3dpdGNoICh0LmNoYXJBdChlICsgMSkpIHtcbiAgICAgICAgICBjYXNlIFwiXHUwMDAxXCI6XG4gICAgICAgICAgICBjb25zdCByID0gdC5zdWJzdHJpbmcoaSwgZSk7XG4gICAgICAgICAgICBsZXQgbztcbiAgICAgICAgICAgIDAgPT09IHMubGVuZ3RoID8gXG4gICAgICAgICAgICAvLyBBdm9pZCBjb3B5aW5nIGZvciB0aGUgY29tbW9uIGNhc2Ugb2YgYSBzZWdtZW50IHRoYXQgZXhjbHVkZXMgXFwwXG4gICAgICAgICAgICAvLyBhbmQgXFwwMDFcbiAgICAgICAgICAgIG8gPSByIDogKHMgKz0gciwgbyA9IHMsIHMgPSBcIlwiKSwgbi5wdXNoKG8pO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBjYXNlIFwiXHUwMDEwXCI6XG4gICAgICAgICAgICBzICs9IHQuc3Vic3RyaW5nKGksIGUpLCBzICs9IFwiXFwwXCI7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCJcdTAwMTFcIjpcbiAgICAgICAgICAgIC8vIFRoZSBlc2NhcGUgY2hhcmFjdGVyIGNhbiBiZSB1c2VkIGluIHRoZSBvdXRwdXQgdG8gZW5jb2RlIGl0c2VsZi5cbiAgICAgICAgICAgIHMgKz0gdC5zdWJzdHJpbmcoaSwgZSArIDEpO1xuICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgTygpO1xuICAgICAgICB9XG4gICAgICAgIGkgPSBlICsgMjtcbiAgICB9XG4gICAgcmV0dXJuIG5ldyB1dChuKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgUXQgPSBbIFwidXNlcklkXCIsIFwiYmF0Y2hJZFwiIF07XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE5hbWUgb2YgdGhlIEluZGV4ZWREYiBvYmplY3Qgc3RvcmUuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBuYW1lICdvd25lcicgaXMgY2hvc2VuIHRvIGVuc3VyZSBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSB3aXRoXG4gKiBvbGRlciBjbGllbnRzIHRoYXQgb25seSBzdXBwb3J0ZWQgc2luZ2xlIGxvY2tlZCBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlXG4gKiBsYXllci5cbiAqL1xuLyoqXG4gKiBDcmVhdGVzIGEgW3VzZXJJZCwgZW5jb2RlZFBhdGhdIGtleSBmb3IgdXNlIGluIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zXG4gKiBpbmRleCB0byBpdGVyYXRlIG92ZXIgYWxsIGF0IGRvY3VtZW50IG11dGF0aW9ucyBmb3IgYSBnaXZlbiBwYXRoIG9yIGxvd2VyLlxuICovXG5mdW5jdGlvbiBqdCh0LCBlKSB7XG4gICAgcmV0dXJuIFsgdCwgcXQoZSkgXTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVsbCBpbmRleCBrZXkgb2YgW3VzZXJJZCwgZW5jb2RlZFBhdGgsIGJhdGNoSWRdIGZvciBpbnNlcnRpbmdcbiAqIGFuZCBkZWxldGluZyBpbnRvIHRoZSBEYkRvY3VtZW50TXV0YXRpb25zIGluZGV4LlxuICovIGZ1bmN0aW9uIHp0KHQsIGUsIG4pIHtcbiAgICByZXR1cm4gWyB0LCBxdChlKSwgbiBdO1xufVxuXG4vKipcbiAqIEJlY2F1c2Ugd2Ugc3RvcmUgYWxsIHRoZSB1c2VmdWwgaW5mb3JtYXRpb24gZm9yIHRoaXMgc3RvcmUgaW4gdGhlIGtleSxcbiAqIHRoZXJlIGlzIG5vIHVzZWZ1bCBpbmZvcm1hdGlvbiB0byBzdG9yZSBhcyB0aGUgdmFsdWUuIFRoZSByYXcgKHVuZW5jb2RlZClcbiAqIHBhdGggY2Fubm90IGJlIHN0b3JlZCBiZWNhdXNlIEluZGV4ZWREYiBkb2Vzbid0IHN0b3JlIHByb3RvdHlwZVxuICogaW5mb3JtYXRpb24uXG4gKi8gY29uc3QgV3QgPSB7fSwgSHQgPSBbIFwicHJlZml4UGF0aFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCBcInJlYWRUaW1lXCIsIFwiZG9jdW1lbnRJZFwiIF0sIEp0ID0gWyBcInByZWZpeFBhdGhcIiwgXCJjb2xsZWN0aW9uR3JvdXBcIiwgXCJkb2N1bWVudElkXCIgXSwgWXQgPSBbIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwicmVhZFRpbWVcIiwgXCJwcmVmaXhQYXRoXCIsIFwiZG9jdW1lbnRJZFwiIF0sIFh0ID0gWyBcImNhbm9uaWNhbElkXCIsIFwidGFyZ2V0SWRcIiBdLCBadCA9IFsgXCJ0YXJnZXRJZFwiLCBcInBhdGhcIiBdLCB0ZSA9IFsgXCJwYXRoXCIsIFwidGFyZ2V0SWRcIiBdLCBlZSA9IFsgXCJjb2xsZWN0aW9uSWRcIiwgXCJwYXJlbnRcIiBdLCBuZSA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIgXSwgc2UgPSBbIFwidWlkXCIsIFwic2VxdWVuY2VOdW1iZXJcIiBdLCBpZSA9IFsgXCJpbmRleElkXCIsIFwidWlkXCIsIFwiYXJyYXlWYWx1ZVwiLCBcImRpcmVjdGlvbmFsVmFsdWVcIiwgXCJvcmRlcmVkRG9jdW1lbnRLZXlcIiwgXCJkb2N1bWVudEtleVwiIF0sIHJlID0gWyBcImluZGV4SWRcIiwgXCJ1aWRcIiwgXCJvcmRlcmVkRG9jdW1lbnRLZXlcIiBdLCBvZSA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImRvY3VtZW50SWRcIiBdLCB1ZSA9IFsgXCJ1c2VySWRcIiwgXCJjb2xsZWN0aW9uUGF0aFwiLCBcImxhcmdlc3RCYXRjaElkXCIgXSwgY2UgPSBbIFwidXNlcklkXCIsIFwiY29sbGVjdGlvbkdyb3VwXCIsIFwibGFyZ2VzdEJhdGNoSWRcIiBdLCBhZSA9IFsgLi4uWyAuLi5bIC4uLlsgLi4uWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiBdLCBcImNsaWVudE1ldGFkYXRhXCIgXSwgXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiIF0sIFwiY29sbGVjdGlvblBhcmVudHNcIiBdLCBcImJ1bmRsZXNcIiwgXCJuYW1lZFF1ZXJpZXNcIiBdLCBoZSA9IFsgLi4uYWUsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIGxlID0gWyBcIm11dGF0aW9uUXVldWVzXCIsIFwibXV0YXRpb25zXCIsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIiwgXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwgXCJ0YXJnZXRzXCIsIFwib3duZXJcIiwgXCJ0YXJnZXRHbG9iYWxcIiwgXCJ0YXJnZXREb2N1bWVudHNcIiwgXCJjbGllbnRNZXRhZGF0YVwiLCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIsIFwiY29sbGVjdGlvblBhcmVudHNcIiwgXCJidW5kbGVzXCIsIFwibmFtZWRRdWVyaWVzXCIsIFwiZG9jdW1lbnRPdmVybGF5c1wiIF0sIGZlID0gbGUsIGRlID0gWyAuLi5mZSwgXCJpbmRleENvbmZpZ3VyYXRpb25cIiwgXCJpbmRleFN0YXRlXCIsIFwiaW5kZXhFbnRyaWVzXCIgXTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIHdlIGV4dGVuZHMgQXQge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5odCA9IHQsIHRoaXMuY3VycmVudFNlcXVlbmNlTnVtYmVyID0gZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9lKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gYnQuTShuLmh0LCBlKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gbWUodCkge1xuICAgIGxldCBlID0gMDtcbiAgICBmb3IgKGNvbnN0IG4gaW4gdCkgT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIG4pICYmIGUrKztcbiAgICByZXR1cm4gZTtcbn1cblxuZnVuY3Rpb24gZ2UodCwgZSkge1xuICAgIGZvciAoY29uc3QgbiBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgbikgJiYgZShuLCB0W25dKTtcbn1cblxuZnVuY3Rpb24geWUodCkge1xuICAgIGZvciAoY29uc3QgZSBpbiB0KSBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHQsIGUpKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gQW4gaW1tdXRhYmxlIHNvcnRlZCBtYXAgaW1wbGVtZW50YXRpb24sIGJhc2VkIG9uIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFja1xuLy8gdHJlZS5cbmNsYXNzIHBlIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMucm9vdCA9IGUgfHwgVGUuRU1QVFk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkvdmFsdWUgYWRkZWQgb3IgcmVwbGFjZWQuXG4gICAgaW5zZXJ0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBwZSh0aGlzLmNvbXBhcmF0b3IsIHRoaXMucm9vdC5pbnNlcnQodCwgZSwgdGhpcy5jb21wYXJhdG9yKS5jb3B5KG51bGwsIG51bGwsIFRlLkJMQUNLLCBudWxsLCBudWxsKSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSBtYXAsIHdpdGggdGhlIHNwZWNpZmllZCBrZXkgcmVtb3ZlZC5cbiAgICByZW1vdmUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHBlKHRoaXMuY29tcGFyYXRvciwgdGhpcy5yb290LnJlbW92ZSh0LCB0aGlzLmNvbXBhcmF0b3IpLmNvcHkobnVsbCwgbnVsbCwgVGUuQkxBQ0ssIG51bGwsIG51bGwpKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgdmFsdWUgb2YgdGhlIG5vZGUgd2l0aCB0aGUgZ2l2ZW4ga2V5LCBvciBudWxsLlxuICAgIGdldCh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy5yb290O1xuICAgICAgICBmb3IgKDshZS5pc0VtcHR5KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuY29tcGFyYXRvcih0LCBlLmtleSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgcmV0dXJuIGUudmFsdWU7XG4gICAgICAgICAgICBuIDwgMCA/IGUgPSBlLmxlZnQgOiBuID4gMCAmJiAoZSA9IGUucmlnaHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZWxlbWVudCBpbiB0aGlzIHNvcnRlZCBtYXAsIG9yIC0xIGlmIGl0IGRvZXNuJ3RcbiAgICAvLyBleGlzdC5cbiAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgLy8gTnVtYmVyIG9mIG5vZGVzIHRoYXQgd2VyZSBwcnVuZWQgd2hlbiBkZXNjZW5kaW5nIHJpZ2h0XG4gICAgICAgIGxldCBlID0gMCwgbiA9IHRoaXMucm9vdDtcbiAgICAgICAgZm9yICg7IW4uaXNFbXB0eSgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0aGlzLmNvbXBhcmF0b3IodCwgbi5rZXkpO1xuICAgICAgICAgICAgaWYgKDAgPT09IHMpIHJldHVybiBlICsgbi5sZWZ0LnNpemU7XG4gICAgICAgICAgICBzIDwgMCA/IG4gPSBuLmxlZnQgOiAoXG4gICAgICAgICAgICAvLyBDb3VudCBhbGwgbm9kZXMgbGVmdCBvZiB0aGUgbm9kZSBwbHVzIHRoZSBub2RlIGl0c2VsZlxuICAgICAgICAgICAgZSArPSBuLmxlZnQuc2l6ZSArIDEsIG4gPSBuLnJpZ2h0KTtcbiAgICAgICAgfVxuICAgICAgICAvLyBOb2RlIG5vdCBmb3VuZFxuICAgICAgICAgICAgICAgIHJldHVybiAtMTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5pc0VtcHR5KCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIHRvdGFsIG51bWJlciBvZiBub2RlcyBpbiB0aGUgbWFwLlxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290LnNpemU7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0ga2V5IGluIHRoZSBtYXAuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yb290Lm1pbktleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIHRoZSBtYXhpbXVtIGtleSBpbiB0aGUgbWFwLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucm9vdC5tYXhLZXkoKTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSBtYXAgaW4ga2V5IG9yZGVyIGFuZCBjYWxscyB0aGUgc3BlY2lmaWVkIGFjdGlvbiBmdW5jdGlvblxuICAgIC8vIGZvciBlYWNoIGtleS92YWx1ZSBwYWlyLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QuaW5vcmRlclRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUsIG4pLCAhMSkpKTtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0LnB1c2goYCR7ZX06JHtufWApLCAhMSkpKSwgYHske3Quam9pbihcIiwgXCIpfX1gO1xuICAgIH1cbiAgICAvLyBUcmF2ZXJzZXMgdGhlIG1hcCBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBrZXkvdmFsdWUgcGFpci4gSWYgYWN0aW9uIHJldHVybnMgdHJ1ZSwgdHJhdmVyc2FsIGlzXG4gICAgLy8gYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJvb3QucmV2ZXJzZVRyYXZlcnNhbCh0KTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhbiBpdGVyYXRvciBvdmVyIHRoZSBTb3J0ZWRNYXAuXG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSWUodGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICExKTtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3JGcm9tKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBJZSh0aGlzLnJvb3QsIHQsIHRoaXMuY29tcGFyYXRvciwgITEpO1xuICAgIH1cbiAgICBnZXRSZXZlcnNlSXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgSWUodGhpcy5yb290LCBudWxsLCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG4gICAgZ2V0UmV2ZXJzZUl0ZXJhdG9yRnJvbSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgSWUodGhpcy5yb290LCB0LCB0aGlzLmNvbXBhcmF0b3IsICEwKTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwXG4vLyBBbiBpdGVyYXRvciBvdmVyIGFuIExMUkJOb2RlLlxuY2xhc3MgSWUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5pc1JldmVyc2UgPSBzLCB0aGlzLm5vZGVTdGFjayA9IFtdO1xuICAgICAgICBsZXQgaSA9IDE7XG4gICAgICAgIGZvciAoOyF0LmlzRW1wdHkoKTsgKSBpZiAoaSA9IGUgPyBuKHQua2V5LCBlKSA6IDEsIFxuICAgICAgICAvLyBmbGlwIHRoZSBjb21wYXJpc29uIGlmIHdlJ3JlIGdvaW5nIGluIHJldmVyc2VcbiAgICAgICAgZSAmJiBzICYmIChpICo9IC0xKSwgaSA8IDApIFxuICAgICAgICAvLyBUaGlzIG5vZGUgaXMgbGVzcyB0aGFuIG91ciBzdGFydCBrZXkuIGlnbm9yZSBpdFxuICAgICAgICB0ID0gdGhpcy5pc1JldmVyc2UgPyB0LmxlZnQgOiB0LnJpZ2h0OyBlbHNlIHtcbiAgICAgICAgICAgIGlmICgwID09PSBpKSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBub2RlIGlzIGV4YWN0bHkgZXF1YWwgdG8gb3VyIHN0YXJ0IGtleS4gUHVzaCBpdCBvbiB0aGUgc3RhY2ssXG4gICAgICAgICAgICAgICAgLy8gYnV0IHN0b3AgaXRlcmF0aW5nO1xuICAgICAgICAgICAgICAgIHRoaXMubm9kZVN0YWNrLnB1c2godCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBUaGlzIG5vZGUgaXMgZ3JlYXRlciB0aGFuIG91ciBzdGFydCBrZXksIGFkZCBpdCB0byB0aGUgc3RhY2sgYW5kIG1vdmVcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IG9uZVxuICAgICAgICAgICAgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHRoaXMuaXNSZXZlcnNlID8gdC5yaWdodCA6IHQubGVmdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMubm9kZVN0YWNrLnBvcCgpO1xuICAgICAgICBjb25zdCBlID0ge1xuICAgICAgICAgICAga2V5OiB0LmtleSxcbiAgICAgICAgICAgIHZhbHVlOiB0LnZhbHVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0aGlzLmlzUmV2ZXJzZSkgZm9yICh0ID0gdC5sZWZ0OyAhdC5pc0VtcHR5KCk7ICkgdGhpcy5ub2RlU3RhY2sucHVzaCh0KSwgdCA9IHQucmlnaHQ7IGVsc2UgZm9yICh0ID0gdC5yaWdodDsgIXQuaXNFbXB0eSgpOyApIHRoaXMubm9kZVN0YWNrLnB1c2godCksIFxuICAgICAgICB0ID0gdC5sZWZ0O1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgaGFzTmV4dCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubm9kZVN0YWNrLmxlbmd0aCA+IDA7XG4gICAgfVxuICAgIHBlZWsoKSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLm5vZGVTdGFjay5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5ub2RlU3RhY2tbdGhpcy5ub2RlU3RhY2subGVuZ3RoIC0gMV07XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrZXk6IHQua2V5LFxuICAgICAgICAgICAgdmFsdWU6IHQudmFsdWVcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbiAvLyBlbmQgU29ydGVkTWFwSXRlcmF0b3Jcbi8vIFJlcHJlc2VudHMgYSBub2RlIGluIGEgTGVmdC1sZWFuaW5nIFJlZC1CbGFjayB0cmVlLlxuY2xhc3MgVGUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5jb2xvciA9IG51bGwgIT0gbiA/IG4gOiBUZS5SRUQsIHRoaXMubGVmdCA9IG51bGwgIT0gcyA/IHMgOiBUZS5FTVBUWSwgXG4gICAgICAgIHRoaXMucmlnaHQgPSBudWxsICE9IGkgPyBpIDogVGUuRU1QVFksIHRoaXMuc2l6ZSA9IHRoaXMubGVmdC5zaXplICsgMSArIHRoaXMucmlnaHQuc2l6ZTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZSwgb3B0aW9uYWxseSByZXBsYWNpbmcgcGllY2VzIG9mIGl0LlxuICAgIGNvcHkodCwgZSwgbiwgcywgaSkge1xuICAgICAgICByZXR1cm4gbmV3IFRlKG51bGwgIT0gdCA/IHQgOiB0aGlzLmtleSwgbnVsbCAhPSBlID8gZSA6IHRoaXMudmFsdWUsIG51bGwgIT0gbiA/IG4gOiB0aGlzLmNvbG9yLCBudWxsICE9IHMgPyBzIDogdGhpcy5sZWZ0LCBudWxsICE9IGkgPyBpIDogdGhpcy5yaWdodCk7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gVHJhdmVyc2VzIHRoZSB0cmVlIGluIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb24gZnVuY3Rpb25cbiAgICAvLyBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaW5vcmRlclRyYXZlcnNhbCh0KSB8fCB0KHRoaXMua2V5LCB0aGlzLnZhbHVlKSB8fCB0aGlzLnJpZ2h0Lmlub3JkZXJUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFRyYXZlcnNlcyB0aGUgdHJlZSBpbiByZXZlcnNlIGtleSBvcmRlciBhbmQgY2FsbHMgdGhlIHNwZWNpZmllZCBhY3Rpb25cbiAgICAvLyBmdW5jdGlvbiBmb3IgZWFjaCBub2RlLiBJZiBhY3Rpb24gcmV0dXJucyB0cnVlLCB0cmF2ZXJzYWwgaXMgYWJvcnRlZC5cbiAgICAvLyBSZXR1cm5zIHRoZSBmaXJzdCB0cnV0aHkgdmFsdWUgcmV0dXJuZWQgYnkgYWN0aW9uLCBvciB0aGUgbGFzdCBmYWxzZXlcbiAgICAvLyB2YWx1ZSByZXR1cm5lZCBieSBhY3Rpb24uXG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJpZ2h0LnJldmVyc2VUcmF2ZXJzYWwodCkgfHwgdCh0aGlzLmtleSwgdGhpcy52YWx1ZSkgfHwgdGhpcy5sZWZ0LnJldmVyc2VUcmF2ZXJzYWwodCk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1pbmltdW0gbm9kZSBpbiB0aGUgdHJlZS5cbiAgICBtaW4oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuaXNFbXB0eSgpID8gdGhpcyA6IHRoaXMubGVmdC5taW4oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyB0aGUgbWF4aW11bSBrZXkgaW4gdGhlIHRyZWUuXG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5taW4oKS5rZXk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgdGhlIG1heGltdW0ga2V5IGluIHRoZSB0cmVlLlxuICAgIG1heEtleSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmlnaHQuaXNFbXB0eSgpID8gdGhpcy5rZXkgOiB0aGlzLnJpZ2h0Lm1heEtleSgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBrZXkvdmFsdWUgYWRkZWQuXG4gICAgaW5zZXJ0KHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSB0aGlzO1xuICAgICAgICBjb25zdCBpID0gbih0LCBzLmtleSk7XG4gICAgICAgIHJldHVybiBzID0gaSA8IDAgPyBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0Lmluc2VydCh0LCBlLCBuKSwgbnVsbCkgOiAwID09PSBpID8gcy5jb3B5KG51bGwsIGUsIG51bGwsIG51bGwsIG51bGwpIDogcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQuaW5zZXJ0KHQsIGUsIG4pKSwgXG4gICAgICAgIHMuZml4VXAoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWluKCkge1xuICAgICAgICBpZiAodGhpcy5sZWZ0LmlzRW1wdHkoKSkgcmV0dXJuIFRlLkVNUFRZO1xuICAgICAgICBsZXQgdCA9IHRoaXM7XG4gICAgICAgIHJldHVybiB0LmxlZnQuaXNSZWQoKSB8fCB0LmxlZnQubGVmdC5pc1JlZCgpIHx8ICh0ID0gdC5tb3ZlUmVkTGVmdCgpKSwgdCA9IHQuY29weShudWxsLCBudWxsLCBudWxsLCB0LmxlZnQucmVtb3ZlTWluKCksIG51bGwpLCBcbiAgICAgICAgdC5maXhVcCgpO1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIG5ldyB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQgaXRlbSByZW1vdmVkLlxuICAgIHJlbW92ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzID0gdGhpcztcbiAgICAgICAgaWYgKGUodCwgcy5rZXkpIDwgMCkgcy5sZWZ0LmlzRW1wdHkoKSB8fCBzLmxlZnQuaXNSZWQoKSB8fCBzLmxlZnQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkTGVmdCgpKSwgXG4gICAgICAgIHMgPSBzLmNvcHkobnVsbCwgbnVsbCwgbnVsbCwgcy5sZWZ0LnJlbW92ZSh0LCBlKSwgbnVsbCk7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHMubGVmdC5pc1JlZCgpICYmIChzID0gcy5yb3RhdGVSaWdodCgpKSwgcy5yaWdodC5pc0VtcHR5KCkgfHwgcy5yaWdodC5pc1JlZCgpIHx8IHMucmlnaHQubGVmdC5pc1JlZCgpIHx8IChzID0gcy5tb3ZlUmVkUmlnaHQoKSksIFxuICAgICAgICAgICAgMCA9PT0gZSh0LCBzLmtleSkpIHtcbiAgICAgICAgICAgICAgICBpZiAocy5yaWdodC5pc0VtcHR5KCkpIHJldHVybiBUZS5FTVBUWTtcbiAgICAgICAgICAgICAgICBuID0gcy5yaWdodC5taW4oKSwgcyA9IHMuY29weShuLmtleSwgbi52YWx1ZSwgbnVsbCwgbnVsbCwgcy5yaWdodC5yZW1vdmVNaW4oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzID0gcy5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHMucmlnaHQucmVtb3ZlKHQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcy5maXhVcCgpO1xuICAgIH1cbiAgICBpc1JlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XG4gICAgfVxuICAgIC8vIFJldHVybnMgbmV3IHRyZWUgYWZ0ZXIgcGVyZm9ybWluZyBhbnkgbmVlZGVkIHJvdGF0aW9ucy5cbiAgICBmaXhVcCgpIHtcbiAgICAgICAgbGV0IHQgPSB0aGlzO1xuICAgICAgICByZXR1cm4gdC5yaWdodC5pc1JlZCgpICYmICF0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlTGVmdCgpKSwgdC5sZWZ0LmlzUmVkKCkgJiYgdC5sZWZ0LmxlZnQuaXNSZWQoKSAmJiAodCA9IHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0LmxlZnQuaXNSZWQoKSAmJiB0LnJpZ2h0LmlzUmVkKCkgJiYgKHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZExlZnQoKSB7XG4gICAgICAgIGxldCB0ID0gdGhpcy5jb2xvckZsaXAoKTtcbiAgICAgICAgcmV0dXJuIHQucmlnaHQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5jb3B5KG51bGwsIG51bGwsIG51bGwsIG51bGwsIHQucmlnaHQucm90YXRlUmlnaHQoKSksIFxuICAgICAgICB0ID0gdC5yb3RhdGVMZWZ0KCksIHQgPSB0LmNvbG9yRmxpcCgpKSwgdDtcbiAgICB9XG4gICAgbW92ZVJlZFJpZ2h0KCkge1xuICAgICAgICBsZXQgdCA9IHRoaXMuY29sb3JGbGlwKCk7XG4gICAgICAgIHJldHVybiB0LmxlZnQubGVmdC5pc1JlZCgpICYmICh0ID0gdC5yb3RhdGVSaWdodCgpLCB0ID0gdC5jb2xvckZsaXAoKSksIHQ7XG4gICAgfVxuICAgIHJvdGF0ZUxlZnQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmNvcHkobnVsbCwgbnVsbCwgVGUuUkVELCBudWxsLCB0aGlzLnJpZ2h0LmxlZnQpO1xuICAgICAgICByZXR1cm4gdGhpcy5yaWdodC5jb3B5KG51bGwsIG51bGwsIHRoaXMuY29sb3IsIHQsIG51bGwpO1xuICAgIH1cbiAgICByb3RhdGVSaWdodCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY29weShudWxsLCBudWxsLCBUZS5SRUQsIHRoaXMubGVmdC5yaWdodCwgbnVsbCk7XG4gICAgICAgIHJldHVybiB0aGlzLmxlZnQuY29weShudWxsLCBudWxsLCB0aGlzLmNvbG9yLCBudWxsLCB0KTtcbiAgICB9XG4gICAgY29sb3JGbGlwKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMubGVmdC5jb2xvciwgbnVsbCwgbnVsbCksIGUgPSB0aGlzLnJpZ2h0LmNvcHkobnVsbCwgbnVsbCwgIXRoaXMucmlnaHQuY29sb3IsIG51bGwsIG51bGwpO1xuICAgICAgICByZXR1cm4gdGhpcy5jb3B5KG51bGwsIG51bGwsICF0aGlzLmNvbG9yLCB0LCBlKTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuY2hlY2soKTtcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KDIsIHQpIDw9IHRoaXMuc2l6ZSArIDE7XG4gICAgfVxuICAgIC8vIEluIGEgYmFsYW5jZWQgUkIgdHJlZSwgdGhlIGJsYWNrLWRlcHRoIChudW1iZXIgb2YgYmxhY2sgbm9kZXMpIGZyb20gcm9vdCB0b1xuICAgIC8vIGxlYXZlcyBpcyBlcXVhbCBvbiBib3RoIHNpZGVzLiAgVGhpcyBmdW5jdGlvbiB2ZXJpZmllcyB0aGF0IG9yIGFzc2VydHMuXG4gICAgY2hlY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmlzUmVkKCkgJiYgdGhpcy5sZWZ0LmlzUmVkKCkpIHRocm93IE8oKTtcbiAgICAgICAgaWYgKHRoaXMucmlnaHQuaXNSZWQoKSkgdGhyb3cgTygpO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5sZWZ0LmNoZWNrKCk7XG4gICAgICAgIGlmICh0ICE9PSB0aGlzLnJpZ2h0LmNoZWNrKCkpIHRocm93IE8oKTtcbiAgICAgICAgcmV0dXJuIHQgKyAodGhpcy5pc1JlZCgpID8gMCA6IDEpO1xuICAgIH1cbn1cblxuIC8vIGVuZCBMTFJCTm9kZVxuLy8gRW1wdHkgbm9kZSBpcyBzaGFyZWQgYmV0d2VlbiBhbGwgTExSQiB0cmVlcy5cbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG5UZS5FTVBUWSA9IG51bGwsIFRlLlJFRCA9ICEwLCBUZS5CTEFDSyA9ICExO1xuXG4vLyBlbmQgTExSQkVtcHR5Tm9kZVxuVGUuRU1QVFkgPSBuZXcgXG4vLyBSZXByZXNlbnRzIGFuIGVtcHR5IG5vZGUgKGEgbGVhZiBub2RlIGluIHRoZSBSZWQtQmxhY2sgVHJlZSkuXG5jbGFzcyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc2l6ZSA9IDA7XG4gICAgfVxuICAgIGdldCBrZXkoKSB7XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG4gICAgZ2V0IHZhbHVlKCkge1xuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxuICAgIGdldCBjb2xvcigpIHtcbiAgICAgICAgdGhyb3cgTygpO1xuICAgIH1cbiAgICBnZXQgbGVmdCgpIHtcbiAgICAgICAgdGhyb3cgTygpO1xuICAgIH1cbiAgICBnZXQgcmlnaHQoKSB7XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9XG4gICAgLy8gUmV0dXJucyBhIGNvcHkgb2YgdGhlIGN1cnJlbnQgbm9kZS5cbiAgICBjb3B5KHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5L3ZhbHVlIGFkZGVkLlxuICAgIGluc2VydCh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGUodCwgZSk7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBjb3B5IG9mIHRoZSB0cmVlLCB3aXRoIHRoZSBzcGVjaWZpZWQga2V5IHJlbW92ZWQuXG4gICAgcmVtb3ZlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgaW5vcmRlclRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgcmV2ZXJzZVRyYXZlcnNhbCh0KSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbWluS2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgbWF4S2V5KCkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaXNSZWQoKSB7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLy8gRm9yIHRlc3RpbmcuXG4gICAgY2hlY2tNYXhEZXB0aCgpIHtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICBjaGVjaygpIHtcbiAgICAgICAgcmV0dXJuIDA7XG4gICAgfVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU29ydGVkU2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGVsZW1lbnRzXG4gKiBpbiBvcmRlciBzcGVjaWZpZWQgYnkgdGhlIHByb3ZpZGVkIGNvbXBhcmF0b3IuXG4gKlxuICogTk9URTogaWYgcHJvdmlkZWQgY29tcGFyYXRvciByZXR1cm5zIDAgZm9yIHR3byBlbGVtZW50cywgd2UgY29uc2lkZXIgdGhlbSB0b1xuICogYmUgZXF1YWwhXG4gKi9cbmNsYXNzIEVlIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29tcGFyYXRvciA9IHQsIHRoaXMuZGF0YSA9IG5ldyBwZSh0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICBoYXModCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdGhpcy5kYXRhLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWluS2V5KCk7XG4gICAgfVxuICAgIGxhc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEubWF4S2V5KCk7XG4gICAgfVxuICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLnNpemU7XG4gICAgfVxuICAgIGluZGV4T2YodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kYXRhLmluZGV4T2YodCk7XG4gICAgfVxuICAgIC8qKiBJdGVyYXRlcyBlbGVtZW50cyBpbiBvcmRlciBkZWZpbmVkIGJ5IFwiY29tcGFyYXRvclwiICovICAgIGZvckVhY2godCkge1xuICAgICAgICB0aGlzLmRhdGEuaW5vcmRlclRyYXZlcnNhbCgoKGUsIG4pID0+ICh0KGUpLCAhMSkpKTtcbiAgICB9XG4gICAgLyoqIEl0ZXJhdGVzIG92ZXIgYGVsZW1gcyBzdWNoIHRoYXQ6IHJhbmdlWzBdICZsdDs9IGVsZW0gJmx0OyByYW5nZVsxXS4gKi8gICAgZm9yRWFjaEluUmFuZ2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0WzBdKTtcbiAgICAgICAgZm9yICg7bi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4uZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKHRoaXMuY29tcGFyYXRvcihzLmtleSwgdFsxXSkgPj0gMCkgcmV0dXJuO1xuICAgICAgICAgICAgZShzLmtleSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBgZWxlbWBzIHN1Y2ggdGhhdDogc3RhcnQgJmx0Oz0gZWxlbSB1bnRpbCBmYWxzZSBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgZm9yRWFjaFdoaWxlKHQsIGUpIHtcbiAgICAgICAgbGV0IG47XG4gICAgICAgIGZvciAobiA9IHZvaWQgMCAhPT0gZSA/IHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20oZSkgOiB0aGlzLmRhdGEuZ2V0SXRlcmF0b3IoKTsgbi5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgaWYgKCF0KG4uZ2V0TmV4dCgpLmtleSkpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogRmluZHMgdGhlIGxlYXN0IGVsZW1lbnQgZ3JlYXRlciB0aGFuIG9yIGVxdWFsIHRvIGBlbGVtYC4gKi8gICAgZmlyc3RBZnRlck9yRXF1YWwodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yRnJvbSh0KTtcbiAgICAgICAgcmV0dXJuIGUuaGFzTmV4dCgpID8gZS5nZXROZXh0KCkua2V5IDogbnVsbDtcbiAgICB9XG4gICAgZ2V0SXRlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBuZXcgQWUodGhpcy5kYXRhLmdldEl0ZXJhdG9yKCkpO1xuICAgIH1cbiAgICBnZXRJdGVyYXRvckZyb20odCkge1xuICAgICAgICByZXR1cm4gbmV3IEFlKHRoaXMuZGF0YS5nZXRJdGVyYXRvckZyb20odCkpO1xuICAgIH1cbiAgICAvKiogSW5zZXJ0cyBvciB1cGRhdGVzIGFuIGVsZW1lbnQgKi8gICAgYWRkKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpLmluc2VydCh0LCAhMCkpO1xuICAgIH1cbiAgICAvKiogRGVsZXRlcyBhbiBlbGVtZW50ICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhcyh0KSA/IHRoaXMuY29weSh0aGlzLmRhdGEucmVtb3ZlKHQpKSA6IHRoaXM7XG4gICAgfVxuICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRhdGEuaXNFbXB0eSgpO1xuICAgIH1cbiAgICB1bmlvbldpdGgodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXM7XG4gICAgICAgIC8vIE1ha2Ugc3VyZSBgcmVzdWx0YCBhbHdheXMgcmVmZXJzIHRvIHRoZSBsYXJnZXIgb25lIG9mIHRoZSB0d28gc2V0cy5cbiAgICAgICAgICAgICAgICByZXR1cm4gZS5zaXplIDwgdC5zaXplICYmIChlID0gdCwgdCA9IHRoaXMpLCB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgZSA9IGUuYWRkKHQpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgRWUpKSByZXR1cm4gITE7XG4gICAgICAgIGlmICh0aGlzLnNpemUgIT09IHQuc2l6ZSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kYXRhLmdldEl0ZXJhdG9yKCksIG4gPSB0LmRhdGEuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICgwICE9PSB0aGlzLmNvbXBhcmF0b3IodCwgcykpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIHRvQXJyYXkoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LnB1c2goZSk7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG4gICAgdG9TdHJpbmcoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgXCJTb3J0ZWRTZXQoXCIgKyB0LnRvU3RyaW5nKCkgKyBcIilcIjtcbiAgICB9XG4gICAgY29weSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRWUodGhpcy5jb21wYXJhdG9yKTtcbiAgICAgICAgcmV0dXJuIGUuZGF0YSA9IHQsIGU7XG4gICAgfVxufVxuXG5jbGFzcyBBZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLml0ZXIgPSB0O1xuICAgIH1cbiAgICBnZXROZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVyLmdldE5leHQoKS5rZXk7XG4gICAgfVxuICAgIGhhc05leHQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLml0ZXIuaGFzTmV4dCgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0d28gc29ydGVkIHNldHMgZm9yIGVxdWFsaXR5IHVzaW5nIHRoZWlyIG5hdHVyYWwgb3JkZXJpbmcuIFRoZVxuICogbWV0aG9kIGNvbXB1dGVzIHRoZSBpbnRlcnNlY3Rpb24gYW5kIGludm9rZXMgYG9uQWRkYCBmb3IgZXZlcnkgZWxlbWVudCB0aGF0XG4gKiBpcyBpbiBgYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuIGBvblJlbW92ZWAgaXMgaW52b2tlZCBmb3IgZXZlcnkgZWxlbWVudCBpblxuICogYGJlZm9yZWAgYnV0IG1pc3NpbmcgZnJvbSBgYWZ0ZXJgLlxuICpcbiAqIFRoZSBtZXRob2QgY3JlYXRlcyBhIGNvcHkgb2YgYm90aCBgYmVmb3JlYCBhbmQgYGFmdGVyYCBhbmQgcnVucyBpbiBPKG4gbG9nXG4gKiBuKSwgd2hlcmUgbiBpcyB0aGUgc2l6ZSBvZiB0aGUgdHdvIGxpc3RzLlxuICpcbiAqIEBwYXJhbSBiZWZvcmUgLSBUaGUgZWxlbWVudHMgdGhhdCBleGlzdCBpbiB0aGUgb3JpZ2luYWwgc2V0LlxuICogQHBhcmFtIGFmdGVyIC0gVGhlIGVsZW1lbnRzIHRvIGRpZmYgYWdhaW5zdCB0aGUgb3JpZ2luYWwgc2V0LlxuICogQHBhcmFtIGNvbXBhcmF0b3IgLSBUaGUgY29tcGFyYXRvciBmb3IgdGhlIGVsZW1lbnRzIGluIGJlZm9yZSBhbmQgYWZ0ZXIuXG4gKiBAcGFyYW0gb25BZGQgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2YgYFxuICogYWZ0ZXJgIGJ1dCBub3QgYGJlZm9yZWAuXG4gKiBAcGFyYW0gb25SZW1vdmUgLSBBIGZ1bmN0aW9uIHRvIGludm9rZSBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIHBhcnQgb2ZcbiAqIGBiZWZvcmVgIGJ1dCBub3QgYGFmdGVyYC5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBuZXh0IGVsZW1lbnQgZnJvbSB0aGUgaXRlcmF0b3Igb3IgYHVuZGVmaW5lZGAgaWYgbm9uZSBhdmFpbGFibGUuXG4gKi9cbmZ1bmN0aW9uIHZlKHQpIHtcbiAgICByZXR1cm4gdC5oYXNOZXh0KCkgPyB0LmdldE5leHQoKSA6IHZvaWQgMDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUHJvdmlkZXMgYSBzZXQgb2YgZmllbGRzIHRoYXQgY2FuIGJlIHVzZWQgdG8gcGFydGlhbGx5IHBhdGNoIGEgZG9jdW1lbnQuXG4gKiBGaWVsZE1hc2sgaXMgdXNlZCBpbiBjb25qdW5jdGlvbiB3aXRoIE9iamVjdFZhbHVlLlxuICogRXhhbXBsZXM6XG4gKiAgIGZvbyAtIE92ZXJ3cml0ZXMgZm9vIGVudGlyZWx5IHdpdGggdGhlIHByb3ZpZGVkIHZhbHVlLiBJZiBmb28gaXMgbm90XG4gKiAgICAgICAgIHByZXNlbnQgaW4gdGhlIGNvbXBhbmlvbiBPYmplY3RWYWx1ZSwgdGhlIGZpZWxkIGlzIGRlbGV0ZWQuXG4gKiAgIGZvby5iYXIgLSBPdmVyd3JpdGVzIG9ubHkgdGhlIGZpZWxkIGJhciBvZiB0aGUgb2JqZWN0IGZvby5cbiAqICAgICAgICAgICAgIElmIGZvbyBpcyBub3QgYW4gb2JqZWN0LCBmb28gaXMgcmVwbGFjZWQgd2l0aCBhbiBvYmplY3RcbiAqICAgICAgICAgICAgIGNvbnRhaW5pbmcgZm9vXG4gKi8gY2xhc3MgUmUge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5maWVsZHMgPSB0LCBcbiAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0aW9uIG9mIEZpZWxkTWFza1xuICAgICAgICAvLyBTb3J0IHRoZSBmaWVsZCBtYXNrIHRvIHN1cHBvcnQgYEZpZWxkTWFzay5pc0VxdWFsKClgIGFuZCBhc3NlcnQgYmVsb3cuXG4gICAgICAgIHQuc29ydChhdC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgc3RhdGljIGVtcHR5KCkge1xuICAgICAgICByZXR1cm4gbmV3IFJlKFtdKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIG5ldyBGaWVsZE1hc2sgb2JqZWN0IHRoYXQgaXMgdGhlIHJlc3VsdCBvZiBhZGRpbmcgYWxsIHRoZSBnaXZlblxuICAgICAqIGZpZWxkcyBwYXRocyB0byB0aGlzIGZpZWxkIG1hc2suXG4gICAgICovICAgIHVuaW9uV2l0aCh0KSB7XG4gICAgICAgIGxldCBlID0gbmV3IEVlKGF0LmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgdGhpcy5maWVsZHMpIGUgPSBlLmFkZCh0KTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmFkZChuKTtcbiAgICAgICAgcmV0dXJuIG5ldyBSZShlLnRvQXJyYXkoKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFZlcmlmaWVzIHRoYXQgYGZpZWxkUGF0aGAgaXMgaW5jbHVkZWQgYnkgYXQgbGVhc3Qgb25lIGZpZWxkIGluIHRoaXMgZmllbGRcbiAgICAgKiBtYXNrLlxuICAgICAqXG4gICAgICogVGhpcyBpcyBhbiBPKG4pIG9wZXJhdGlvbiwgd2hlcmUgYG5gIGlzIHRoZSBzaXplIG9mIHRoZSBmaWVsZCBtYXNrLlxuICAgICAqLyAgICBjb3ZlcnModCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdGhpcy5maWVsZHMpIGlmIChlLmlzUHJlZml4T2YodCkpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIG50KHRoaXMuZmllbGRzLCB0LmZpZWxkcywgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGVycm9yIGVuY291bnRlcmVkIHdoaWxlIGRlY29kaW5nIGJhc2U2NCBzdHJpbmcuXG4gKi8gY2xhc3MgUGUgZXh0ZW5kcyBFcnJvciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKC4uLmFyZ3VtZW50cyksIHRoaXMubmFtZSA9IFwiQmFzZTY0RGVjb2RlRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQ29udmVydHMgYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcgdG8gYSBiaW5hcnkgc3RyaW5nLiAqL1xuLyoqIFRydWUgaWYgYW5kIG9ubHkgaWYgdGhlIEJhc2U2NCBjb252ZXJzaW9uIGZ1bmN0aW9ucyBhcmUgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gYmUoKSB7XG4gICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGF0b2I7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltbXV0YWJsZSBjbGFzcyB0aGF0IHJlcHJlc2VudHMgYSBcInByb3RvXCIgYnl0ZSBzdHJpbmcuXG4gKlxuICogUHJvdG8gYnl0ZSBzdHJpbmdzIGNhbiBlaXRoZXIgYmUgQmFzZTY0LWVuY29kZWQgc3RyaW5ncyBvciBVaW50OEFycmF5cyB3aGVuXG4gKiBzZW50IG9uIHRoZSB3aXJlLiBUaGlzIGNsYXNzIGFic3RyYWN0cyBhd2F5IHRoaXMgZGlmZmVyZW50aWF0aW9uIGJ5IGhvbGRpbmdcbiAqIHRoZSBwcm90byBieXRlIHN0cmluZyBpbiBhIGNvbW1vbiBjbGFzcyB0aGF0IG11c3QgYmUgY29udmVydGVkIGludG8gYSBzdHJpbmdcbiAqIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgcHJvdG8uXG4gKiBAaW50ZXJuYWxcbiAqLyBjbGFzcyBWZSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmJpbmFyeVN0cmluZyA9IHQ7XG4gICAgfVxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGF0b2IodCk7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdGhhdCBgRE9NRXhjZXB0aW9uYCBpcyBkZWZpbmVkIGJlZm9yZSB1c2luZyBpdCB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIFwiUmVmZXJlbmNlRXJyb3I6IFByb3BlcnR5ICdET01FeGNlcHRpb24nIGRvZXNuJ3QgZXhpc3RcIiBpbiByZWFjdC1uYXRpdmUuXG4gICAgICAgICAgICAgICAgLy8gKGh0dHBzOi8vZ2l0aHViLmNvbS9maXJlYmFzZS9maXJlYmFzZS1qcy1zZGsvaXNzdWVzLzcxMTUpXG4gICAgICAgICAgICAgICAgdGhyb3cgXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2YgRE9NRXhjZXB0aW9uICYmIHQgaW5zdGFuY2VvZiBET01FeGNlcHRpb24gPyBuZXcgUGUoXCJJbnZhbGlkIGJhc2U2NCBzdHJpbmc6IFwiICsgdCkgOiB0O1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIC8qKiBDb252ZXJ0cyBhIGJpbmFyeSBzdHJpbmcgdG8gYSBCYXNlNjQgZW5jb2RlZCBzdHJpbmcuICovICh0KTtcbiAgICAgICAgcmV0dXJuIG5ldyBWZShlKTtcbiAgICB9XG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk7IFJlbW92ZSB0aGUgY29weSBvZiB0aGUgYnl0ZSBzdHJpbmcgaGVyZSBhcyB0aGlzIG1ldGhvZFxuICAgICAgICAvLyBpcyBmcmVxdWVudGx5IGNhbGxlZCBkdXJpbmcgaW5kZXhpbmcuXG4gICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gdG8gY29udmVydCBhbiBVaW50OGFycmF5IHRvIGEgYmluYXJ5IHN0cmluZy5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBsZXQgZSA9IFwiXCI7XG4gICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSh0W25dKTtcbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogSGVscGVyIGZ1bmN0aW9uIHRvIGNvbnZlcnQgYSBiaW5hcnkgc3RyaW5nIHRvIGFuIFVpbnQ4QXJyYXkuXG4gKi8gKHQpO1xuICAgICAgICByZXR1cm4gbmV3IFZlKGUpO1xuICAgIH1cbiAgICBbU3ltYm9sLml0ZXJhdG9yXSgpIHtcbiAgICAgICAgbGV0IHQgPSAwO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbmV4dDogKCkgPT4gdCA8IHRoaXMuYmluYXJ5U3RyaW5nLmxlbmd0aCA/IHtcbiAgICAgICAgICAgICAgICB2YWx1ZTogdGhpcy5iaW5hcnlTdHJpbmcuY2hhckNvZGVBdCh0KyspLFxuICAgICAgICAgICAgICAgIGRvbmU6ICExXG4gICAgICAgICAgICB9IDoge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB2b2lkIDAsXG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG4gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0ID0gdGhpcy5iaW5hcnlTdHJpbmcsIGJ0b2EodCk7XG4gICAgICAgIHZhciB0O1xuICAgIH1cbiAgICB0b1VpbnQ4QXJyYXkoKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodC5sZW5ndGgpO1xuICAgICAgICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lmxlbmd0aDsgbisrKSBlW25dID0gdC5jaGFyQ29kZUF0KG4pO1xuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLy8gQSBSZWdFeHAgbWF0Y2hpbmcgSVNPIDg2MDEgVVRDIHRpbWVzdGFtcHMgd2l0aCBvcHRpb25hbCBmcmFjdGlvbi5cbiAgICAgICAgKHRoaXMuYmluYXJ5U3RyaW5nKTtcbiAgICB9XG4gICAgYXBwcm94aW1hdGVCeXRlU2l6ZSgpIHtcbiAgICAgICAgcmV0dXJuIDIgKiB0aGlzLmJpbmFyeVN0cmluZy5sZW5ndGg7XG4gICAgfVxuICAgIGNvbXBhcmVUbyh0KSB7XG4gICAgICAgIHJldHVybiBldCh0aGlzLmJpbmFyeVN0cmluZywgdC5iaW5hcnlTdHJpbmcpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJ5U3RyaW5nID09PSB0LmJpbmFyeVN0cmluZztcbiAgICB9XG59XG5cblZlLkVNUFRZX0JZVEVfU1RSSU5HID0gbmV3IFZlKFwiXCIpO1xuXG5jb25zdCBTZSA9IG5ldyBSZWdFeHAoL15cXGR7NH0tXFxkXFxkLVxcZFxcZFRcXGRcXGQ6XFxkXFxkOlxcZFxcZCg/OlxcLihcXGQrKSk/WiQvKTtcblxuLyoqXG4gKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdmFsdWVzIGZvciBhIHRpbWVzdGFtcCB2YWx1ZSBpbnRvIGEgXCJzZWNvbmRzIGFuZFxuICogbmFub3NcIiByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBEZSh0KSB7XG4gICAgLy8gVGhlIGpzb24gaW50ZXJmYWNlIChmb3IgdGhlIGJyb3dzZXIpIHdpbGwgcmV0dXJuIGFuIGlzbyB0aW1lc3RhbXAgc3RyaW5nLFxuICAgIC8vIHdoaWxlIHRoZSBwcm90byBqcyBsaWJyYXJ5IChmb3Igbm9kZSkgd2lsbCByZXR1cm4gYVxuICAgIC8vIGdvb2dsZS5wcm90b2J1Zi5UaW1lc3RhbXAgaW5zdGFuY2UuXG4gICAgaWYgKEYoISF0KSwgXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCkge1xuICAgICAgICAvLyBUaGUgZGF0ZSBzdHJpbmcgY2FuIGhhdmUgaGlnaGVyIHByZWNpc2lvbiAobmFub3MpIHRoYW4gdGhlIERhdGUgY2xhc3NcbiAgICAgICAgLy8gKG1pbGxpcyksIHNvIHdlIGRvIHNvbWUgY3VzdG9tIHBhcnNpbmcgaGVyZS5cbiAgICAgICAgLy8gUGFyc2UgdGhlIG5hbm9zIHJpZ2h0IG91dCBvZiB0aGUgc3RyaW5nLlxuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIGNvbnN0IG4gPSBTZS5leGVjKHQpO1xuICAgICAgICBpZiAoRighIW4pLCBuWzFdKSB7XG4gICAgICAgICAgICAvLyBQYWQgdGhlIGZyYWN0aW9uIG91dCB0byA5IGRpZ2l0cyAobmFub3MpLlxuICAgICAgICAgICAgbGV0IHQgPSBuWzFdO1xuICAgICAgICAgICAgdCA9ICh0ICsgXCIwMDAwMDAwMDBcIikuc3Vic3RyKDAsIDkpLCBlID0gTnVtYmVyKHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIFBhcnNlIHRoZSBkYXRlIHRvIGdldCB0aGUgc2Vjb25kcy5cbiAgICAgICAgICAgICAgICBjb25zdCBzID0gbmV3IERhdGUodCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBzZWNvbmRzOiBNYXRoLmZsb29yKHMuZ2V0VGltZSgpIC8gMWUzKSxcbiAgICAgICAgICAgIG5hbm9zOiBlXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIHNlY29uZHM6IENlKHQuc2Vjb25kcyksXG4gICAgICAgIG5hbm9zOiBDZSh0Lm5hbm9zKVxuICAgIH07XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhlIHBvc3NpYmxlIFByb3RvIHR5cGVzIGZvciBudW1iZXJzIGludG8gYSBKYXZhU2NyaXB0IG51bWJlci5cbiAqIFJldHVybnMgMCBpZiB0aGUgdmFsdWUgaXMgbm90IG51bWVyaWMuXG4gKi8gZnVuY3Rpb24gQ2UodCkge1xuICAgIC8vIFRPRE8oYmpvcm5pY2spOiBIYW5kbGUgaW50NjQgZ3JlYXRlciB0aGFuIDUzIGJpdHMuXG4gICAgcmV0dXJuIFwibnVtYmVyXCIgPT0gdHlwZW9mIHQgPyB0IDogXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IE51bWJlcih0KSA6IDA7XG59XG5cbi8qKiBDb252ZXJ0cyB0aGUgcG9zc2libGUgUHJvdG8gdHlwZXMgZm9yIEJsb2JzIGludG8gYSBCeXRlU3RyaW5nLiAqLyBmdW5jdGlvbiB4ZSh0KSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgPyBWZS5mcm9tQmFzZTY0U3RyaW5nKHQpIDogVmUuZnJvbVVpbnQ4QXJyYXkodCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbGx5LWFwcGxpZWQgU2VydmVyVGltZXN0YW1wLlxuICpcbiAqIFNlcnZlciBUaW1lc3RhbXBzIGFyZSBiYWNrZWQgYnkgTWFwVmFsdWVzIHRoYXQgY29udGFpbiBhbiBpbnRlcm5hbCBmaWVsZFxuICogYF9fdHlwZV9fYCB3aXRoIGEgdmFsdWUgb2YgYHNlcnZlcl90aW1lc3RhbXBgLiBUaGUgcHJldmlvdXMgdmFsdWUgYW5kIGxvY2FsXG4gKiB3cml0ZSB0aW1lIGFyZSBzdG9yZWQgaW4gaXRzIGBfX3ByZXZpb3VzX3ZhbHVlX19gIGFuZCBgX19sb2NhbF93cml0ZV90aW1lX19gXG4gKiBmaWVsZHMgcmVzcGVjdGl2ZWx5LlxuICpcbiAqIE5vdGVzOlxuICogLSBTZXJ2ZXJUaW1lc3RhbXBWYWx1ZSBpbnN0YW5jZXMgYXJlIGNyZWF0ZWQgYXMgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhXG4gKiAgIHRyYW5zZm9ybS4gVGhleSBjYW4gb25seSBleGlzdCBpbiB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBUaGVyZWZvcmVcbiAqICAgdGhleSBkbyBub3QgbmVlZCB0byBiZSBwYXJzZWQgb3Igc2VyaWFsaXplZC5cbiAqIC0gV2hlbiBldmFsdWF0ZWQgbG9jYWxseSAoZS5nLiBmb3Igc25hcHNob3QuZGF0YSgpKSwgdGhleSBieSBkZWZhdWx0XG4gKiAgIGV2YWx1YXRlIHRvIGBudWxsYC4gVGhpcyBiZWhhdmlvciBjYW4gYmUgY29uZmlndXJlZCBieSBwYXNzaW5nIGN1c3RvbVxuICogICBGaWVsZFZhbHVlT3B0aW9ucyB0byB2YWx1ZSgpLlxuICogLSBXaXRoIHJlc3BlY3QgdG8gb3RoZXIgU2VydmVyVGltZXN0YW1wVmFsdWVzLCB0aGV5IHNvcnQgYnkgdGhlaXJcbiAqICAgbG9jYWxXcml0ZVRpbWUuXG4gKi8gZnVuY3Rpb24gTmUodCkge1xuICAgIHZhciBlLCBuO1xuICAgIHJldHVybiBcInNlcnZlcl90aW1lc3RhbXBcIiA9PT0gKG51bGwgPT09IChuID0gKChudWxsID09PSAoZSA9IG51bGwgPT0gdCA/IHZvaWQgMCA6IHQubWFwVmFsdWUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZmllbGRzKSB8fCB7fSkuX190eXBlX18pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uc3RyaW5nVmFsdWUpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgU2VydmVyVGltZXN0YW1wIHByb3RvIHZhbHVlICh1c2luZyB0aGUgaW50ZXJuYWwgZm9ybWF0KS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSBvZiB0aGUgZmllbGQgYmVmb3JlIHRoaXMgU2VydmVyVGltZXN0YW1wIHdhcyBzZXQuXG4gKlxuICogUHJlc2VydmluZyB0aGUgcHJldmlvdXMgdmFsdWVzIGFsbG93cyB0aGUgdXNlciB0byBkaXNwbGF5IHRoZSBsYXN0IHJlc29sZWRcbiAqIHZhbHVlIHVudGlsIHRoZSBiYWNrZW5kIHJlc3BvbmRzIHdpdGggdGhlIHRpbWVzdGFtcC5cbiAqL1xuZnVuY3Rpb24ga2UodCkge1xuICAgIGNvbnN0IGUgPSB0Lm1hcFZhbHVlLmZpZWxkcy5fX3ByZXZpb3VzX3ZhbHVlX187XG4gICAgcmV0dXJuIE5lKGUpID8ga2UoZSkgOiBlO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGxvY2FsIHRpbWUgYXQgd2hpY2ggdGhpcyB0aW1lc3RhbXAgd2FzIGZpcnN0IHNldC5cbiAqLyBmdW5jdGlvbiBNZSh0KSB7XG4gICAgY29uc3QgZSA9IERlKHQubWFwVmFsdWUuZmllbGRzLl9fbG9jYWxfd3JpdGVfdGltZV9fLnRpbWVzdGFtcFZhbHVlKTtcbiAgICByZXR1cm4gbmV3IGl0KGUuc2Vjb25kcywgZS5uYW5vcyk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzICRlIHtcbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEgRGF0YWJhc2VJbmZvIHVzaW5nIHRoZSBwcm92aWRlZCBob3N0LCBkYXRhYmFzZUlkIGFuZFxuICAgICAqIHBlcnNpc3RlbmNlS2V5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgdG8gdXNlLlxuICAgICAqIEBwYXJhbSBhcHBJZCAtIFRoZSBGaXJlYmFzZSBBcHAgSWQuXG4gICAgICogQHBhcmFtIHBlcnNpc3RlbmNlS2V5IC0gQSB1bmlxdWUgaWRlbnRpZmllciBmb3IgdGhpcyBGaXJlc3RvcmUncyBsb2NhbFxuICAgICAqIHN0b3JhZ2UgKHVzZWQgaW4gY29uanVuY3Rpb24gd2l0aCB0aGUgZGF0YWJhc2VJZCkuXG4gICAgICogQHBhcmFtIGhvc3QgLSBUaGUgRmlyZXN0b3JlIGJhY2tlbmQgaG9zdCB0byBjb25uZWN0IHRvLlxuICAgICAqIEBwYXJhbSBzc2wgLSBXaGV0aGVyIHRvIHVzZSBTU0wgd2hlbiBjb25uZWN0aW5nLlxuICAgICAqIEBwYXJhbSBmb3JjZUxvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGZvcmNlTG9uZ1BvbGxpbmcgb3B0aW9uXG4gICAgICogd2hlbiB1c2luZyBXZWJDaGFubmVsIGFzIHRoZSBuZXR3b3JrIHRyYW5zcG9ydC5cbiAgICAgKiBAcGFyYW0gYXV0b0RldGVjdExvbmdQb2xsaW5nIC0gV2hldGhlciB0byB1c2UgdGhlIGRldGVjdEJ1ZmZlcmluZ1Byb3h5XG4gICAgICogb3B0aW9uIHdoZW4gdXNpbmcgV2ViQ2hhbm5lbCBhcyB0aGUgbmV0d29yayB0cmFuc3BvcnQuXG4gICAgICogQHBhcmFtIGxvbmdQb2xsaW5nT3B0aW9ucyBPcHRpb25zIHRoYXQgY29uZmlndXJlIGxvbmctcG9sbGluZy5cbiAgICAgKiBAcGFyYW0gdXNlRmV0Y2hTdHJlYW1zIFdoZXRoZXIgdG8gdXNlIHRoZSBGZXRjaCBBUEkgaW5zdGVhZCBvZlxuICAgICAqIFhNTEhUVFBSZXF1ZXN0XG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbywgdSwgYykge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLmFwcElkID0gZSwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IG4sIHRoaXMuaG9zdCA9IHMsIHRoaXMuc3NsID0gaSwgXG4gICAgICAgIHRoaXMuZm9yY2VMb25nUG9sbGluZyA9IHIsIHRoaXMuYXV0b0RldGVjdExvbmdQb2xsaW5nID0gbywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSB1LCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSBjO1xuICAgIH1cbn1cblxuLyoqIFRoZSBkZWZhdWx0IGRhdGFiYXNlIG5hbWUgZm9yIGEgcHJvamVjdC4gKi9cbi8qKlxuICogUmVwcmVzZW50cyB0aGUgZGF0YWJhc2UgSUQgYSBGaXJlc3RvcmUgY2xpZW50IGlzIGFzc29jaWF0ZWQgd2l0aC5cbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBPZSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnByb2plY3RJZCA9IHQsIHRoaXMuZGF0YWJhc2UgPSBlIHx8IFwiKGRlZmF1bHQpXCI7XG4gICAgfVxuICAgIHN0YXRpYyBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBPZShcIlwiLCBcIlwiKTtcbiAgICB9XG4gICAgZ2V0IGlzRGVmYXVsdERhdGFiYXNlKCkge1xuICAgICAgICByZXR1cm4gXCIoZGVmYXVsdClcIiA9PT0gdGhpcy5kYXRhYmFzZTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgT2UgJiYgdC5wcm9qZWN0SWQgPT09IHRoaXMucHJvamVjdElkICYmIHQuZGF0YWJhc2UgPT09IHRoaXMuZGF0YWJhc2U7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuY29uc3QgRmUgPSB7XG4gICAgbWFwVmFsdWU6IHtcbiAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICBfX3R5cGVfXzoge1xuICAgICAgICAgICAgICAgIHN0cmluZ1ZhbHVlOiBcIl9fbWF4X19cIlxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxufSwgQmUgPSB7XG4gICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxufTtcblxuLyoqIEV4dHJhY3RzIHRoZSBiYWNrZW5kJ3MgdHlwZSBvcmRlciBmb3IgdGhlIHByb3ZpZGVkIHZhbHVlLiAqL1xuZnVuY3Rpb24gTGUodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOiBcImludGVnZXJWYWx1ZVwiIGluIHQgfHwgXCJkb3VibGVWYWx1ZVwiIGluIHQgPyAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6IFwidGltZXN0YW1wVmFsdWVcIiBpbiB0ID8gMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOiBcInN0cmluZ1ZhbHVlXCIgaW4gdCA/IDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IDYgLyogVHlwZU9yZGVyLkJsb2JWYWx1ZSAqLyA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8gOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDogXCJtYXBWYWx1ZVwiIGluIHQgPyBOZSh0KSA/IDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDogZW4odCkgPyA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6IDEwIC8qIFR5cGVPcmRlci5PYmplY3RWYWx1ZSAqLyA6IE8oKTtcbn1cblxuLyoqIFRlc3RzIGBsZWZ0YCBhbmQgYHJpZ2h0YCBmb3IgZXF1YWxpdHkgYmFzZWQgb24gdGhlIGJhY2tlbmQgc2VtYW50aWNzLiAqLyBmdW5jdGlvbiBxZSh0LCBlKSB7XG4gICAgaWYgKHQgPT09IGUpIHJldHVybiAhMDtcbiAgICBjb25zdCBuID0gTGUodCk7XG4gICAgaWYgKG4gIT09IExlKGUpKSByZXR1cm4gITE7XG4gICAgc3dpdGNoIChuKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDkwMDcxOTkyNTQ3NDA5OTEgLyogVHlwZU9yZGVyLk1heFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuICEwO1xuXG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiB0LmJvb2xlYW5WYWx1ZSA9PT0gZS5ib29sZWFuVmFsdWU7XG5cbiAgICAgIGNhc2UgNCAvKiBUeXBlT3JkZXIuU2VydmVyVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gTWUodCkuaXNFcXVhbChNZShlKSk7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZS50aW1lc3RhbXBWYWx1ZSAmJiB0LnRpbWVzdGFtcFZhbHVlLmxlbmd0aCA9PT0gZS50aW1lc3RhbXBWYWx1ZS5sZW5ndGgpIFxuICAgICAgICAgICAgLy8gVXNlIHN0cmluZyBlcXVhbGl0eSBmb3IgSVNPIDg2MDEgdGltZXN0YW1wc1xuICAgICAgICAgICAgcmV0dXJuIHQudGltZXN0YW1wVmFsdWUgPT09IGUudGltZXN0YW1wVmFsdWU7XG4gICAgICAgICAgICBjb25zdCBuID0gRGUodC50aW1lc3RhbXBWYWx1ZSksIHMgPSBEZShlLnRpbWVzdGFtcFZhbHVlKTtcbiAgICAgICAgICAgIHJldHVybiBuLnNlY29uZHMgPT09IHMuc2Vjb25kcyAmJiBuLm5hbm9zID09PSBzLm5hbm9zO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIHQuc3RyaW5nVmFsdWUgPT09IGUuc3RyaW5nVmFsdWU7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiB4ZSh0LmJ5dGVzVmFsdWUpLmlzRXF1YWwoeGUoZS5ieXRlc1ZhbHVlKSk7XG4gICAgICAgIH0odCwgZSk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZSA9PT0gZS5yZWZlcmVuY2VWYWx1ZTtcblxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBDZSh0Lmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpID09PSBDZShlLmdlb1BvaW50VmFsdWUubGF0aXR1ZGUpICYmIENlKHQuZ2VvUG9pbnRWYWx1ZS5sb25naXR1ZGUpID09PSBDZShlLmdlb1BvaW50VmFsdWUubG9uZ2l0dWRlKTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBpZiAoXCJpbnRlZ2VyVmFsdWVcIiBpbiB0ICYmIFwiaW50ZWdlclZhbHVlXCIgaW4gZSkgcmV0dXJuIENlKHQuaW50ZWdlclZhbHVlKSA9PT0gQ2UoZS5pbnRlZ2VyVmFsdWUpO1xuICAgICAgICAgICAgaWYgKFwiZG91YmxlVmFsdWVcIiBpbiB0ICYmIFwiZG91YmxlVmFsdWVcIiBpbiBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IENlKHQuZG91YmxlVmFsdWUpLCBzID0gQ2UoZS5kb3VibGVWYWx1ZSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gPT09IHMgPyBCdChuKSA9PT0gQnQocykgOiBpc05hTihuKSAmJiBpc05hTihzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgfSh0LCBlKTtcblxuICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIG50KHQuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIGUuYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10sIHFlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQubWFwVmFsdWUuZmllbGRzIHx8IHt9LCBzID0gZS5tYXBWYWx1ZS5maWVsZHMgfHwge307XG4gICAgICAgICAgICBpZiAobWUobikgIT09IG1lKHMpKSByZXR1cm4gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgaW4gbikgaWYgKG4uaGFzT3duUHJvcGVydHkodCkgJiYgKHZvaWQgMCA9PT0gc1t0XSB8fCAhcWUoblt0XSwgc1t0XSkpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdHJ1ZSBpZiB0aGUgQXJyYXlWYWx1ZSBjb250YWlucyB0aGUgc3BlY2lmaWVkIGVsZW1lbnQuICovICh0LCBlKTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE8oKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIFVlKHQsIGUpIHtcbiAgICByZXR1cm4gdm9pZCAwICE9PSAodC52YWx1ZXMgfHwgW10pLmZpbmQoKHQgPT4gcWUodCwgZSkpKTtcbn1cblxuZnVuY3Rpb24gS2UodCwgZSkge1xuICAgIGlmICh0ID09PSBlKSByZXR1cm4gMDtcbiAgICBjb25zdCBuID0gTGUodCksIHMgPSBMZShlKTtcbiAgICBpZiAobiAhPT0gcykgcmV0dXJuIGV0KG4sIHMpO1xuICAgIHN3aXRjaCAobikge1xuICAgICAgY2FzZSAwIC8qIFR5cGVPcmRlci5OdWxsVmFsdWUgKi8gOlxuICAgICAgY2FzZSA5MDA3MTk5MjU0NzQwOTkxIC8qIFR5cGVPcmRlci5NYXhWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAwO1xuXG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBldCh0LmJvb2xlYW5WYWx1ZSwgZS5ib29sZWFuVmFsdWUpO1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBDZSh0LmludGVnZXJWYWx1ZSB8fCB0LmRvdWJsZVZhbHVlKSwgcyA9IENlKGUuaW50ZWdlclZhbHVlIHx8IGUuZG91YmxlVmFsdWUpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPCBzID8gLTEgOiBuID4gcyA/IDEgOiBuID09PSBzID8gMCA6IFxuICAgICAgICAgICAgLy8gb25lIG9yIGJvdGggYXJlIE5hTi5cbiAgICAgICAgICAgIGlzTmFOKG4pID8gaXNOYU4ocykgPyAwIDogLTEgOiAxO1xuICAgICAgICB9KHQsIGUpO1xuXG4gICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEdlKHQudGltZXN0YW1wVmFsdWUsIGUudGltZXN0YW1wVmFsdWUpO1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIEdlKE1lKHQpLCBNZShlKSk7XG5cbiAgICAgIGNhc2UgNSAvKiBUeXBlT3JkZXIuU3RyaW5nVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZXQodC5zdHJpbmdWYWx1ZSwgZS5zdHJpbmdWYWx1ZSk7XG5cbiAgICAgIGNhc2UgNiAvKiBUeXBlT3JkZXIuQmxvYlZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB4ZSh0KSwgcyA9IHhlKGUpO1xuICAgICAgICAgICAgcmV0dXJuIG4uY29tcGFyZVRvKHMpO1xuICAgICAgICB9KHQuYnl0ZXNWYWx1ZSwgZS5ieXRlc1ZhbHVlKTtcblxuICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5zcGxpdChcIi9cIiksIHMgPSBlLnNwbGl0KFwiL1wiKTtcbiAgICAgICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgbi5sZW5ndGggJiYgdCA8IHMubGVuZ3RoOyB0KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gZXQoblt0XSwgc1t0XSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IGUpIHJldHVybiBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV0KG4ubGVuZ3RoLCBzLmxlbmd0aCk7XG4gICAgICAgIH0odC5yZWZlcmVuY2VWYWx1ZSwgZS5yZWZlcmVuY2VWYWx1ZSk7XG5cbiAgICAgIGNhc2UgOCAvKiBUeXBlT3JkZXIuR2VvUG9pbnRWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZXQoQ2UodC5sYXRpdHVkZSksIENlKGUubGF0aXR1ZGUpKTtcbiAgICAgICAgICAgIGlmICgwICE9PSBuKSByZXR1cm4gbjtcbiAgICAgICAgICAgIHJldHVybiBldChDZSh0LmxvbmdpdHVkZSksIENlKGUubG9uZ2l0dWRlKSk7XG4gICAgICAgIH0odC5nZW9Qb2ludFZhbHVlLCBlLmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICBjYXNlIDkgLyogVHlwZU9yZGVyLkFycmF5VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQudmFsdWVzIHx8IFtdLCBzID0gZS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IG4ubGVuZ3RoICYmIHQgPCBzLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IEtlKG5bdF0sIHNbdF0pO1xuICAgICAgICAgICAgICAgIGlmIChlKSByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBldChuLmxlbmd0aCwgcy5sZW5ndGgpO1xuICAgICAgICB9KHQuYXJyYXlWYWx1ZSwgZS5hcnJheVZhbHVlKTtcblxuICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQgPT09IEZlLm1hcFZhbHVlICYmIGUgPT09IEZlLm1hcFZhbHVlKSByZXR1cm4gMDtcbiAgICAgICAgICAgIGlmICh0ID09PSBGZS5tYXBWYWx1ZSkgcmV0dXJuIDE7XG4gICAgICAgICAgICBpZiAoZSA9PT0gRmUubWFwVmFsdWUpIHJldHVybiAtMTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LmZpZWxkcyB8fCB7fSwgcyA9IE9iamVjdC5rZXlzKG4pLCBpID0gZS5maWVsZHMgfHwge30sIHIgPSBPYmplY3Qua2V5cyhpKTtcbiAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIE1hcFZhbHVlcyBhcmUgbGlrZWx5IHNvcnRlZCBjb3JyZWN0bHkgYmFzZWQgb24gdGhlaXIgaW5zZXJ0aW9uXG4gICAgICAgICAgICAvLyBvcmRlciAoZS5nLiB3aGVuIHJlY2VpdmVkIGZyb20gdGhlIGJhY2tlbmQpLCBsb2NhbCBtb2RpZmljYXRpb25zIGNhbiBicmluZ1xuICAgICAgICAgICAgLy8gZWxlbWVudHMgb3V0IG9mIG9yZGVyLiBXZSBuZWVkIHRvIHJlLXNvcnQgdGhlIGVsZW1lbnRzIHRvIGVuc3VyZSB0aGF0XG4gICAgICAgICAgICAvLyBjYW5vbmljYWwgSURzIGFyZSBpbmRlcGVuZGVudCBvZiBpbnNlcnRpb24gb3JkZXIuXG4gICAgICAgICAgICBzLnNvcnQoKSwgci5zb3J0KCk7XG4gICAgICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHMubGVuZ3RoICYmIHQgPCByLmxlbmd0aDsgKyt0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IGV0KHNbdF0sIHJbdF0pO1xuICAgICAgICAgICAgICAgIGlmICgwICE9PSBlKSByZXR1cm4gZTtcbiAgICAgICAgICAgICAgICBjb25zdCBvID0gS2UobltzW3RdXSwgaVtyW3RdXSk7XG4gICAgICAgICAgICAgICAgaWYgKDAgIT09IG8pIHJldHVybiBvO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGV0KHMubGVuZ3RoLCByLmxlbmd0aCk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqXG4gKiBHZW5lcmF0ZXMgdGhlIGNhbm9uaWNhbCBJRCBmb3IgdGhlIHByb3ZpZGVkIGZpZWxkIHZhbHVlIChhcyB1c2VkIGluIFRhcmdldFxuICogc2VyaWFsaXphdGlvbikuXG4gKi8gKHQubWFwVmFsdWUsIGUubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBHZSh0LCBlKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQgJiYgXCJzdHJpbmdcIiA9PSB0eXBlb2YgZSAmJiB0Lmxlbmd0aCA9PT0gZS5sZW5ndGgpIHJldHVybiBldCh0LCBlKTtcbiAgICBjb25zdCBuID0gRGUodCksIHMgPSBEZShlKSwgaSA9IGV0KG4uc2Vjb25kcywgcy5zZWNvbmRzKTtcbiAgICByZXR1cm4gMCAhPT0gaSA/IGkgOiBldChuLm5hbm9zLCBzLm5hbm9zKTtcbn1cblxuZnVuY3Rpb24gUWUodCkge1xuICAgIHJldHVybiBqZSh0KTtcbn1cblxuZnVuY3Rpb24gamUodCkge1xuICAgIHJldHVybiBcIm51bGxWYWx1ZVwiIGluIHQgPyBcIm51bGxcIiA6IFwiYm9vbGVhblZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmJvb2xlYW5WYWx1ZSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCA/IFwiXCIgKyB0LmludGVnZXJWYWx1ZSA6IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8gXCJcIiArIHQuZG91YmxlVmFsdWUgOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IERlKHQpO1xuICAgICAgICByZXR1cm4gYHRpbWUoJHtlLnNlY29uZHN9LCR7ZS5uYW5vc30pYDtcbiAgICB9KHQudGltZXN0YW1wVmFsdWUpIDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB0LnN0cmluZ1ZhbHVlIDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IHhlKHQuYnl0ZXNWYWx1ZSkudG9CYXNlNjQoKSA6IFwicmVmZXJlbmNlVmFsdWVcIiBpbiB0ID8gKG4gPSB0LnJlZmVyZW5jZVZhbHVlLCBcbiAgICBodC5mcm9tTmFtZShuKS50b1N0cmluZygpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyBgZ2VvKCR7KGUgPSB0Lmdlb1BvaW50VmFsdWUpLmxhdGl0dWRlfSwke2UubG9uZ2l0dWRlfSlgIDogXCJhcnJheVZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIltcIiwgbiA9ICEwO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdC52YWx1ZXMgfHwgW10pIG4gPyBuID0gITEgOiBlICs9IFwiLFwiLCBlICs9IGplKHMpO1xuICAgICAgICByZXR1cm4gZSArIFwiXVwiO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgKGFuZCB3aWxkbHkgaW5hY2N1cmF0ZSkgaW4tbWVtb3J5IHNpemUgZm9yIHRoZSBmaWVsZFxuICogdmFsdWUuXG4gKlxuICogVGhlIG1lbW9yeSBzaXplIHRha2VzIGludG8gYWNjb3VudCBvbmx5IHRoZSBhY3R1YWwgdXNlciBkYXRhIGFzIGl0IHJlc2lkZXNcbiAqIGluIG1lbW9yeSBhbmQgaWdub3JlcyBvYmplY3Qgb3ZlcmhlYWQuXG4gKi8gKHQuYXJyYXlWYWx1ZSkgOiBcIm1hcFZhbHVlXCIgaW4gdCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXRlcmF0aW9uIG9yZGVyIGluIEphdmFTY3JpcHQgaXMgbm90IGd1YXJhbnRlZWQuIFRvIGVuc3VyZSB0aGF0IHdlIGdlbmVyYXRlXG4gICAgICAgIC8vIG1hdGNoaW5nIGNhbm9uaWNhbCBJRHMgZm9yIGlkZW50aWNhbCBtYXBzLCB3ZSBuZWVkIHRvIHNvcnQgdGhlIGtleXMuXG4gICAgICAgIGNvbnN0IGUgPSBPYmplY3Qua2V5cyh0LmZpZWxkcyB8fCB7fSkuc29ydCgpO1xuICAgICAgICBsZXQgbiA9IFwie1wiLCBzID0gITA7XG4gICAgICAgIGZvciAoY29uc3QgaSBvZiBlKSBzID8gcyA9ICExIDogbiArPSBcIixcIiwgbiArPSBgJHtpfToke2plKHQuZmllbGRzW2ldKX1gO1xuICAgICAgICByZXR1cm4gbiArIFwifVwiO1xuICAgIH0odC5tYXBWYWx1ZSkgOiBPKCk7XG4gICAgdmFyIGUsIG47XG59XG5cbmZ1bmN0aW9uIHplKHQpIHtcbiAgICBzd2l0Y2ggKExlKHQpKSB7XG4gICAgICBjYXNlIDAgLyogVHlwZU9yZGVyLk51bGxWYWx1ZSAqLyA6XG4gICAgICBjYXNlIDEgLyogVHlwZU9yZGVyLkJvb2xlYW5WYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiA0O1xuXG4gICAgICBjYXNlIDIgLyogVHlwZU9yZGVyLk51bWJlclZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIDg7XG5cbiAgICAgIGNhc2UgMyAvKiBUeXBlT3JkZXIuVGltZXN0YW1wVmFsdWUgKi8gOlxuICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgLy8gR2VvUG9pbnRzIGFyZSBtYWRlIHVwIG9mIHR3byBkaXN0aW5jdCBudW1iZXJzIChsYXRpdHVkZSArIGxvbmdpdHVkZSlcbiAgICAgICAgcmV0dXJuIDE2O1xuXG4gICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgY29uc3QgZSA9IGtlKHQpO1xuICAgICAgICByZXR1cm4gZSA/IDE2ICsgemUoZSkgOiAxNjtcblxuICAgICAgY2FzZSA1IC8qIFR5cGVPcmRlci5TdHJpbmdWYWx1ZSAqLyA6XG4gICAgICAgIC8vIFNlZSBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L0RhdGFfc3RydWN0dXJlczpcbiAgICAgICAgLy8gXCJKYXZhU2NyaXB0J3MgU3RyaW5nIHR5cGUgaXMgWy4uLl0gYSBzZXQgb2YgZWxlbWVudHMgb2YgMTYtYml0IHVuc2lnbmVkXG4gICAgICAgIC8vIGludGVnZXIgdmFsdWVzXCJcbiAgICAgICAgcmV0dXJuIDIgKiB0LnN0cmluZ1ZhbHVlLmxlbmd0aDtcblxuICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4geGUodC5ieXRlc1ZhbHVlKS5hcHByb3hpbWF0ZUJ5dGVTaXplKCk7XG5cbiAgICAgIGNhc2UgNyAvKiBUeXBlT3JkZXIuUmVmVmFsdWUgKi8gOlxuICAgICAgICByZXR1cm4gdC5yZWZlcmVuY2VWYWx1ZS5sZW5ndGg7XG5cbiAgICAgIGNhc2UgOSAvKiBUeXBlT3JkZXIuQXJyYXlWYWx1ZSAqLyA6XG4gICAgICAgIHJldHVybiAodC5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkucmVkdWNlKCgodCwgZSkgPT4gdCArIHplKGUpKSwgMCk7XG5cbiAgICAgIGNhc2UgMTAgLyogVHlwZU9yZGVyLk9iamVjdFZhbHVlICovIDpcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgICAgIHJldHVybiBnZSh0LmZpZWxkcywgKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZSArPSB0Lmxlbmd0aCArIHplKG4pO1xuICAgICAgICAgICAgfSkpLCBlO1xuICAgICAgICB9KHQubWFwVmFsdWUpO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxufVxuXG4vKiogUmV0dXJucyBhIHJlZmVyZW5jZSB2YWx1ZSBmb3IgdGhlIHByb3ZpZGVkIGRhdGFiYXNlIGFuZCBrZXkuICovXG5mdW5jdGlvbiBXZSh0LCBlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgcmVmZXJlbmNlVmFsdWU6IGBwcm9qZWN0cy8ke3QucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0LmRhdGFiYXNlfS9kb2N1bWVudHMvJHtlLnBhdGguY2Fub25pY2FsU3RyaW5nKCl9YFxuICAgIH07XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhbiBJbnRlZ2VyVmFsdWUgLiAqLyBmdW5jdGlvbiBIZSh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImludGVnZXJWYWx1ZVwiIGluIHQ7XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgYHZhbHVlYCBpcyBhIERvdWJsZVZhbHVlLiAqL1xuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGFuIEFycmF5VmFsdWUuICovXG5mdW5jdGlvbiBKZSh0KSB7XG4gICAgcmV0dXJuICEhdCAmJiBcImFycmF5VmFsdWVcIiBpbiB0O1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGB2YWx1ZWAgaXMgYSBOdWxsVmFsdWUuICovIGZ1bmN0aW9uIFllKHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibnVsbFZhbHVlXCIgaW4gdDtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIE5hTi4gKi8gZnVuY3Rpb24gWGUodCkge1xuICAgIHJldHVybiAhIXQgJiYgXCJkb3VibGVWYWx1ZVwiIGluIHQgJiYgaXNOYU4oTnVtYmVyKHQuZG91YmxlVmFsdWUpKTtcbn1cblxuLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGEgTWFwVmFsdWUuICovIGZ1bmN0aW9uIFplKHQpIHtcbiAgICByZXR1cm4gISF0ICYmIFwibWFwVmFsdWVcIiBpbiB0O1xufVxuXG4vKiogQ3JlYXRlcyBhIGRlZXAgY29weSBvZiBgc291cmNlYC4gKi8gZnVuY3Rpb24gdG4odCkge1xuICAgIGlmICh0Lmdlb1BvaW50VmFsdWUpIHJldHVybiB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IE9iamVjdC5hc3NpZ24oe30sIHQuZ2VvUG9pbnRWYWx1ZSlcbiAgICB9O1xuICAgIGlmICh0LnRpbWVzdGFtcFZhbHVlICYmIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQudGltZXN0YW1wVmFsdWUpIHJldHVybiB7XG4gICAgICAgIHRpbWVzdGFtcFZhbHVlOiBPYmplY3QuYXNzaWduKHt9LCB0LnRpbWVzdGFtcFZhbHVlKVxuICAgIH07XG4gICAgaWYgKHQubWFwVmFsdWUpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiB7fVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZ2UodC5tYXBWYWx1ZS5maWVsZHMsICgodCwgbikgPT4gZS5tYXBWYWx1ZS5maWVsZHNbdF0gPSB0bihuKSkpLCBlO1xuICAgIH1cbiAgICBpZiAodC5hcnJheVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgdmFsdWVzOiBbXVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8ICh0LmFycmF5VmFsdWUudmFsdWVzIHx8IFtdKS5sZW5ndGg7ICsrbikgZS5hcnJheVZhbHVlLnZhbHVlc1tuXSA9IHRuKHQuYXJyYXlWYWx1ZS52YWx1ZXNbbl0pO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIHQpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBWYWx1ZSByZXByZXNlbnRzIHRoZSBjYW5vbmljYWwge0BsaW5rICNNQVhfVkFMVUV9IC4gKi8gZnVuY3Rpb24gZW4odCkge1xuICAgIHJldHVybiBcIl9fbWF4X19cIiA9PT0gKCgodC5tYXBWYWx1ZSB8fCB7fSkuZmllbGRzIHx8IHt9KS5fX3R5cGVfXyB8fCB7fSkuc3RyaW5nVmFsdWU7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBsb3dlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChpbmNsdXNpdmUpLiAqLyBmdW5jdGlvbiBubih0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IEJlIDogXCJib29sZWFuVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBib29sZWFuVmFsdWU6ICExXG4gICAgfSA6IFwiaW50ZWdlclZhbHVlXCIgaW4gdCB8fCBcImRvdWJsZVZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgdGltZXN0YW1wVmFsdWU6IHtcbiAgICAgICAgICAgIHNlY29uZHM6IE51bWJlci5NSU5fU0FGRV9JTlRFR0VSXG4gICAgICAgIH1cbiAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIHN0cmluZ1ZhbHVlOiBcIlwiXG4gICAgfSA6IFwiYnl0ZXNWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICB9IDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyBXZShPZS5lbXB0eSgpLCBodC5lbXB0eSgpKSA6IFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgfVxuICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgIH0gOiBcIm1hcFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgfSA6IE8oKTtcbn1cblxuLyoqIFJldHVybnMgdGhlIGxhcmdlc3QgdmFsdWUgZm9yIHRoZSBnaXZlbiB2YWx1ZSB0eXBlIChleGNsdXNpdmUpLiAqLyBmdW5jdGlvbiBzbih0KSB7XG4gICAgcmV0dXJuIFwibnVsbFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgYm9vbGVhblZhbHVlOiAhMVxuICAgIH0gOiBcImJvb2xlYW5WYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICB9IDogXCJpbnRlZ2VyVmFsdWVcIiBpbiB0IHx8IFwiZG91YmxlVmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgc2Vjb25kczogTnVtYmVyLk1JTl9TQUZFX0lOVEVHRVJcbiAgICAgICAgfVxuICAgIH0gOiBcInRpbWVzdGFtcFZhbHVlXCIgaW4gdCA/IHtcbiAgICAgICAgc3RyaW5nVmFsdWU6IFwiXCJcbiAgICB9IDogXCJzdHJpbmdWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGJ5dGVzVmFsdWU6IFwiXCJcbiAgICB9IDogXCJieXRlc1ZhbHVlXCIgaW4gdCA/IFdlKE9lLmVtcHR5KCksIGh0LmVtcHR5KCkpIDogXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQgPyB7XG4gICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgIGxhdGl0dWRlOiAtOTAsXG4gICAgICAgICAgICBsb25naXR1ZGU6IC0xODBcbiAgICAgICAgfVxuICAgIH0gOiBcImdlb1BvaW50VmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBhcnJheVZhbHVlOiB7fVxuICAgIH0gOiBcImFycmF5VmFsdWVcIiBpbiB0ID8ge1xuICAgICAgICBtYXBWYWx1ZToge31cbiAgICB9IDogXCJtYXBWYWx1ZVwiIGluIHQgPyBGZSA6IE8oKTtcbn1cblxuZnVuY3Rpb24gcm4odCwgZSkge1xuICAgIGNvbnN0IG4gPSBLZSh0LnZhbHVlLCBlLnZhbHVlKTtcbiAgICByZXR1cm4gMCAhPT0gbiA/IG4gOiB0LmluY2x1c2l2ZSAmJiAhZS5pbmNsdXNpdmUgPyAtMSA6ICF0LmluY2x1c2l2ZSAmJiBlLmluY2x1c2l2ZSA/IDEgOiAwO1xufVxuXG5mdW5jdGlvbiBvbih0LCBlKSB7XG4gICAgY29uc3QgbiA9IEtlKHQudmFsdWUsIGUudmFsdWUpO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IHQuaW5jbHVzaXZlICYmICFlLmluY2x1c2l2ZSA/IDEgOiAhdC5pbmNsdXNpdmUgJiYgZS5pbmNsdXNpdmUgPyAtMSA6IDA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIE9iamVjdFZhbHVlIHJlcHJlc2VudHMgYSBNYXBWYWx1ZSBpbiB0aGUgRmlyZXN0b3JlIFByb3RvIGFuZCBvZmZlcnMgdGhlXG4gKiBhYmlsaXR5IHRvIGFkZCBhbmQgcmVtb3ZlIGZpZWxkcyAodmlhIHRoZSBPYmplY3RWYWx1ZUJ1aWxkZXIpLlxuICovIGNsYXNzIHVuIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMudmFsdWUgPSB0O1xuICAgIH1cbiAgICBzdGF0aWMgZW1wdHkoKSB7XG4gICAgICAgIHJldHVybiBuZXcgdW4oe1xuICAgICAgICAgICAgbWFwVmFsdWU6IHt9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2YWx1ZSBhdCB0aGUgZ2l2ZW4gcGF0aCBvciBudWxsLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSB0aGUgcGF0aCB0byBzZWFyY2hcbiAgICAgKiBAcmV0dXJucyBUaGUgdmFsdWUgYXQgdGhlIHBhdGggb3IgbnVsbCBpZiB0aGUgcGF0aCBpcyBub3Qgc2V0LlxuICAgICAqLyAgICBmaWVsZCh0KSB7XG4gICAgICAgIGlmICh0LmlzRW1wdHkoKSkgcmV0dXJuIHRoaXMudmFsdWU7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGxldCBlID0gdGhpcy52YWx1ZTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggLSAxOyArK24pIGlmIChlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0LmdldChuKV0sIFxuICAgICAgICAgICAgIVplKGUpKSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIHJldHVybiBlID0gKGUubWFwVmFsdWUuZmllbGRzIHx8IHt9KVt0Lmxhc3RTZWdtZW50KCldLCBlIHx8IG51bGw7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgZmllbGQgdG8gdGhlIHByb3ZpZGVkIHZhbHVlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHBhdGggLSBUaGUgZmllbGQgcGF0aCB0byBzZXQuXG4gICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHRvIHNldC5cbiAgICAgKi8gICAgc2V0KHQsIGUpIHtcbiAgICAgICAgdGhpcy5nZXRGaWVsZHNNYXAodC5wb3BMYXN0KCkpW3QubGFzdFNlZ21lbnQoKV0gPSB0bihlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2V0cyB0aGUgcHJvdmlkZWQgZmllbGRzIHRvIHRoZSBwcm92aWRlZCB2YWx1ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZGF0YSAtIEEgbWFwIG9mIGZpZWxkcyB0byB2YWx1ZXMgKG9yIG51bGwgZm9yIGRlbGV0ZXMpLlxuICAgICAqLyAgICBzZXRBbGwodCkge1xuICAgICAgICBsZXQgZSA9IGF0LmVtcHR5UGF0aCgpLCBuID0ge30sIHMgPSBbXTtcbiAgICAgICAgdC5mb3JFYWNoKCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgaWYgKCFlLmlzSW1tZWRpYXRlUGFyZW50T2YoaSkpIHtcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgdGhlIGFjY3VtdWxhdGVkIGNoYW5nZXMgYXQgdGhpcyBwYXJlbnQgbG9jYXRpb25cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgICAgICAgICAgdGhpcy5hcHBseUNoYW5nZXModCwgbiwgcyksIG4gPSB7fSwgcyA9IFtdLCBlID0gaS5wb3BMYXN0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0ID8gbltpLmxhc3RTZWdtZW50KCldID0gdG4odCkgOiBzLnB1c2goaS5sYXN0U2VnbWVudCgpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBjb25zdCBpID0gdGhpcy5nZXRGaWVsZHNNYXAoZSk7XG4gICAgICAgIHRoaXMuYXBwbHlDaGFuZ2VzKGksIG4sIHMpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBmaWVsZCBhdCB0aGUgc3BlY2lmaWVkIHBhdGguIElmIHRoZXJlIGlzIG5vIGZpZWxkIGF0IHRoZVxuICAgICAqIHNwZWNpZmllZCBwYXRoLCBub3RoaW5nIGlzIGNoYW5nZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gcGF0aCAtIFRoZSBmaWVsZCBwYXRoIHRvIHJlbW92ZS5cbiAgICAgKi8gICAgZGVsZXRlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZmllbGQodC5wb3BMYXN0KCkpO1xuICAgICAgICBaZShlKSAmJiBlLm1hcFZhbHVlLmZpZWxkcyAmJiBkZWxldGUgZS5tYXBWYWx1ZS5maWVsZHNbdC5sYXN0U2VnbWVudCgpXTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiBxZSh0aGlzLnZhbHVlLCB0LnZhbHVlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgbWFwIHRoYXQgY29udGFpbnMgdGhlIGxlYWYgZWxlbWVudCBvZiBgcGF0aGAuIElmIHRoZSBwYXJlbnRcbiAgICAgKiBlbnRyeSBkb2VzIG5vdCB5ZXQgZXhpc3QsIG9yIGlmIGl0IGlzIG5vdCBhIG1hcCwgYSBuZXcgbWFwIHdpbGwgYmUgY3JlYXRlZC5cbiAgICAgKi8gICAgZ2V0RmllbGRzTWFwKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnZhbHVlO1xuICAgICAgICBlLm1hcFZhbHVlLmZpZWxkcyB8fCAoZS5tYXBWYWx1ZSA9IHtcbiAgICAgICAgICAgIGZpZWxkczoge31cbiAgICAgICAgfSk7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGg7ICsrbikge1xuICAgICAgICAgICAgbGV0IHMgPSBlLm1hcFZhbHVlLmZpZWxkc1t0LmdldChuKV07XG4gICAgICAgICAgICBaZShzKSAmJiBzLm1hcFZhbHVlLmZpZWxkcyB8fCAocyA9IHtcbiAgICAgICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICBmaWVsZHM6IHt9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSwgZS5tYXBWYWx1ZS5maWVsZHNbdC5nZXQobildID0gcyksIGUgPSBzO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBlLm1hcFZhbHVlLmZpZWxkcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogTW9kaWZpZXMgYGZpZWxkc01hcGAgYnkgYWRkaW5nLCByZXBsYWNpbmcgb3IgZGVsZXRpbmcgdGhlIHNwZWNpZmllZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGdlKGUsICgoZSwgbikgPT4gdFtlXSA9IG4pKTtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIG4pIGRlbGV0ZSB0W2VdO1xuICAgIH1cbiAgICBjbG9uZSgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB1bih0bih0aGlzLnZhbHVlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaWVsZE1hc2sgYnVpbHQgZnJvbSBhbGwgZmllbGRzIGluIGEgTWFwVmFsdWUuXG4gKi8gZnVuY3Rpb24gY24odCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gZ2UodC5maWVsZHMsICgodCwgbikgPT4ge1xuICAgICAgICBjb25zdCBzID0gbmV3IGF0KFsgdCBdKTtcbiAgICAgICAgaWYgKFplKG4pKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gY24obi5tYXBWYWx1ZSkuZmllbGRzO1xuICAgICAgICAgICAgaWYgKDAgPT09IHQubGVuZ3RoKSBcbiAgICAgICAgICAgIC8vIFByZXNlcnZlIHRoZSBlbXB0eSBtYXAgYnkgYWRkaW5nIGl0IHRvIHRoZSBGaWVsZE1hc2suXG4gICAgICAgICAgICBlLnB1c2gocyk7IGVsc2UgXG4gICAgICAgICAgICAvLyBGb3IgbmVzdGVkIGFuZCBub24tZW1wdHkgT2JqZWN0VmFsdWVzLCBhZGQgdGhlIEZpZWxkUGF0aCBvZiB0aGVcbiAgICAgICAgICAgIC8vIGxlYWYgbm9kZXMuXG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdCkgZS5wdXNoKHMuY2hpbGQobikpO1xuICAgICAgICB9IGVsc2UgXG4gICAgICAgIC8vIEZvciBuZXN0ZWQgYW5kIG5vbi1lbXB0eSBPYmplY3RWYWx1ZXMsIGFkZCB0aGUgRmllbGRQYXRoIG9mIHRoZSBsZWFmXG4gICAgICAgIC8vIG5vZGVzLlxuICAgICAgICBlLnB1c2gocyk7XG4gICAgfSkpLCBuZXcgUmUoZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBkb2N1bWVudCBpbiBGaXJlc3RvcmUgd2l0aCBhIGtleSwgdmVyc2lvbiwgZGF0YSBhbmQgd2hldGhlciBpdFxuICogaGFzIGxvY2FsIG11dGF0aW9ucyBhcHBsaWVkIHRvIGl0LlxuICpcbiAqIERvY3VtZW50cyBjYW4gdHJhbnNpdGlvbiBiZXR3ZWVuIHN0YXRlcyB2aWEgYGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQoKWAsXG4gKiBgY29udmVydFRvTm9Eb2N1bWVudCgpYCBhbmQgYGNvbnZlcnRUb1Vua25vd25Eb2N1bWVudCgpYC4gSWYgYSBkb2N1bWVudCBkb2VzXG4gKiBub3QgdHJhbnNpdGlvbiB0byBvbmUgb2YgdGhlc2Ugc3RhdGVzIGV2ZW4gYWZ0ZXIgYWxsIG11dGF0aW9ucyBoYXZlIGJlZW5cbiAqIGFwcGxpZWQsIGBpc1ZhbGlkRG9jdW1lbnQoKWAgcmV0dXJucyBmYWxzZSBhbmQgdGhlIGRvY3VtZW50IHNob3VsZCBiZSByZW1vdmVkXG4gKiBmcm9tIGFsbCB2aWV3cy5cbiAqLyBjbGFzcyBhbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgciwgbykge1xuICAgICAgICB0aGlzLmtleSA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gZSwgdGhpcy52ZXJzaW9uID0gbiwgdGhpcy5yZWFkVGltZSA9IHMsIHRoaXMuY3JlYXRlVGltZSA9IGksIFxuICAgICAgICB0aGlzLmRhdGEgPSByLCB0aGlzLmRvY3VtZW50U3RhdGUgPSBvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgZG9jdW1lbnQgd2l0aCBubyBrbm93biB2ZXJzaW9uIG9yIGRhdGEsIGJ1dCB3aGljaCBjYW4gc2VydmUgYXNcbiAgICAgKiBiYXNlIGRvY3VtZW50IGZvciBtdXRhdGlvbnMuXG4gICAgICovICAgIHN0YXRpYyBuZXdJbnZhbGlkRG9jdW1lbnQodCkge1xuICAgICAgICByZXR1cm4gbmV3IGFuKHQsIDAgLyogRG9jdW1lbnRUeXBlLklOVkFMSUQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyBydC5taW4oKSwgXG4gICAgICAgIC8qIHJlYWRUaW1lICovIHJ0Lm1pbigpLCBcbiAgICAgICAgLyogY3JlYXRlVGltZSAqLyBydC5taW4oKSwgdW4uZW1wdHkoKSwgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgZG9jdW1lbnQgdGhhdCBpcyBrbm93biB0byBleGlzdCB3aXRoIHRoZSBnaXZlbiBkYXRhIGF0IHRoZVxuICAgICAqIGdpdmVuIHZlcnNpb24uXG4gICAgICovICAgIHN0YXRpYyBuZXdGb3VuZERvY3VtZW50KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBhbih0LCAxIC8qIERvY3VtZW50VHlwZS5GT1VORF9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIGUsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBydC5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gbiwgcywgMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyk7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IGRvY3VtZW50IHRoYXQgaXMga25vd24gdG8gbm90IGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uLiAqLyAgICBzdGF0aWMgbmV3Tm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odCwgMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgLyogdmVyc2lvbiAqLyBlLCBcbiAgICAgICAgLyogcmVhZFRpbWUgKi8gcnQubWluKCksIFxuICAgICAgICAvKiBjcmVhdGVUaW1lICovIHJ0Lm1pbigpLCB1bi5lbXB0eSgpLCAwIC8qIERvY3VtZW50U3RhdGUuU1lOQ0VEICovKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBkb2N1bWVudCB0aGF0IGlzIGtub3duIHRvIGV4aXN0IGF0IHRoZSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHdob3NlIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgc3RhdGljIG5ld1Vua25vd25Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgYW4odCwgMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICAvKiB2ZXJzaW9uICovIGUsIFxuICAgICAgICAvKiByZWFkVGltZSAqLyBydC5taW4oKSwgXG4gICAgICAgIC8qIGNyZWF0ZVRpbWUgKi8gcnQubWluKCksIHVuLmVtcHR5KCksIDIgLyogRG9jdW1lbnRTdGF0ZS5IQVNfQ09NTUlUVEVEX01VVEFUSU9OUyAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYW5kIHRoYXQgaXRzIHZlcnNpb25cbiAgICAgKiBhbmQgZGF0YSBhcmUga25vd24uXG4gICAgICovICAgIGNvbnZlcnRUb0ZvdW5kRG9jdW1lbnQodCwgZSkge1xuICAgICAgICAvLyBJZiBhIGRvY3VtZW50IGlzIHN3aXRjaGluZyBzdGF0ZSBmcm9tIGJlaW5nIGFuIGludmFsaWQgb3IgZGVsZXRlZFxuICAgICAgICAvLyBkb2N1bWVudCB0byBhIHZhbGlkIChGT1VORF9ET0NVTUVOVCkgZG9jdW1lbnQsIGVpdGhlciBkdWUgdG8gcmVjZWl2aW5nIGFuXG4gICAgICAgIC8vIHVwZGF0ZSBmcm9tIFdhdGNoIG9yIGR1ZSB0byBhcHBseWluZyBhIGxvY2FsIHNldCBtdXRhdGlvbiBvbiB0b3BcbiAgICAgICAgLy8gb2YgYSBkZWxldGVkIGRvY3VtZW50LCBvdXIgYmVzdCBndWVzcyBhYm91dCBpdHMgY3JlYXRlVGltZSB3b3VsZCBiZSB0aGVcbiAgICAgICAgLy8gdmVyc2lvbiBhdCB3aGljaCB0aGUgZG9jdW1lbnQgdHJhbnNpdGlvbmVkIHRvIGEgRk9VTkRfRE9DVU1FTlQuXG4gICAgICAgIHJldHVybiAhdGhpcy5jcmVhdGVUaW1lLmlzRXF1YWwocnQubWluKCkpIHx8IDIgLyogRG9jdW1lbnRUeXBlLk5PX0RPQ1VNRU5UICovICE9PSB0aGlzLmRvY3VtZW50VHlwZSAmJiAwIC8qIERvY3VtZW50VHlwZS5JTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZSB8fCAodGhpcy5jcmVhdGVUaW1lID0gdCksIFxuICAgICAgICB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLmRvY3VtZW50VHlwZSA9IDEgLyogRG9jdW1lbnRUeXBlLkZPVU5EX0RPQ1VNRU5UICovICwgdGhpcy5kYXRhID0gZSwgXG4gICAgICAgIHRoaXMuZG9jdW1lbnRTdGF0ZSA9IDAgLyogRG9jdW1lbnRTdGF0ZS5TWU5DRUQgKi8gLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDaGFuZ2VzIHRoZSBkb2N1bWVudCB0eXBlIHRvIGluZGljYXRlIHRoYXQgaXQgZG9lc24ndCBleGlzdCBhdCB0aGUgZ2l2ZW5cbiAgICAgKiB2ZXJzaW9uLlxuICAgICAqLyAgICBjb252ZXJ0VG9Ob0RvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMiAvKiBEb2N1bWVudFR5cGUuTk9fRE9DVU1FTlQgKi8gLCBcbiAgICAgICAgdGhpcy5kYXRhID0gdW4uZW1wdHkoKSwgdGhpcy5kb2N1bWVudFN0YXRlID0gMCAvKiBEb2N1bWVudFN0YXRlLlNZTkNFRCAqLyAsIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENoYW5nZXMgdGhlIGRvY3VtZW50IHR5cGUgdG8gaW5kaWNhdGUgdGhhdCBpdCBleGlzdHMgYXQgYSBnaXZlbiB2ZXJzaW9uIGJ1dFxuICAgICAqIHRoYXQgaXRzIGRhdGEgaXMgbm90IGtub3duIChlLmcuIGEgZG9jdW1lbnQgdGhhdCB3YXMgdXBkYXRlZCB3aXRob3V0IGEga25vd25cbiAgICAgKiBiYXNlIGRvY3VtZW50KS5cbiAgICAgKi8gICAgY29udmVydFRvVW5rbm93bkRvY3VtZW50KHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudmVyc2lvbiA9IHQsIHRoaXMuZG9jdW1lbnRUeXBlID0gMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyAsIFxuICAgICAgICB0aGlzLmRhdGEgPSB1bi5lbXB0eSgpLCB0aGlzLmRvY3VtZW50U3RhdGUgPSAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzQ29tbWl0dGVkTXV0YXRpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudFN0YXRlID0gMiAvKiBEb2N1bWVudFN0YXRlLkhBU19DT01NSVRURURfTVVUQVRJT05TICovICwgdGhpcztcbiAgICB9XG4gICAgc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRvY3VtZW50U3RhdGUgPSAxIC8qIERvY3VtZW50U3RhdGUuSEFTX0xPQ0FMX01VVEFUSU9OUyAqLyAsIHRoaXMudmVyc2lvbiA9IHJ0Lm1pbigpLCBcbiAgICAgICAgdGhpcztcbiAgICB9XG4gICAgc2V0UmVhZFRpbWUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZWFkVGltZSA9IHQsIHRoaXM7XG4gICAgfVxuICAgIGdldCBoYXNMb2NhbE11dGF0aW9ucygpIHtcbiAgICAgICAgcmV0dXJuIDEgLyogRG9jdW1lbnRTdGF0ZS5IQVNfTE9DQUxfTVVUQVRJT05TICovID09PSB0aGlzLmRvY3VtZW50U3RhdGU7XG4gICAgfVxuICAgIGdldCBoYXNDb21taXR0ZWRNdXRhdGlvbnMoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIERvY3VtZW50U3RhdGUuSEFTX0NPTU1JVFRFRF9NVVRBVElPTlMgKi8gPT09IHRoaXMuZG9jdW1lbnRTdGF0ZTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc0xvY2FsTXV0YXRpb25zIHx8IHRoaXMuaGFzQ29tbWl0dGVkTXV0YXRpb25zO1xuICAgIH1cbiAgICBpc1ZhbGlkRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAwIC8qIERvY3VtZW50VHlwZS5JTlZBTElEICovICE9PSB0aGlzLmRvY3VtZW50VHlwZTtcbiAgICB9XG4gICAgaXNGb3VuZERvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMSAvKiBEb2N1bWVudFR5cGUuRk9VTkRfRE9DVU1FTlQgKi8gPT09IHRoaXMuZG9jdW1lbnRUeXBlO1xuICAgIH1cbiAgICBpc05vRG9jdW1lbnQoKSB7XG4gICAgICAgIHJldHVybiAyIC8qIERvY3VtZW50VHlwZS5OT19ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzVW5rbm93bkRvY3VtZW50KCkge1xuICAgICAgICByZXR1cm4gMyAvKiBEb2N1bWVudFR5cGUuVU5LTk9XTl9ET0NVTUVOVCAqLyA9PT0gdGhpcy5kb2N1bWVudFR5cGU7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGFuICYmIHRoaXMua2V5LmlzRXF1YWwodC5rZXkpICYmIHRoaXMudmVyc2lvbi5pc0VxdWFsKHQudmVyc2lvbikgJiYgdGhpcy5kb2N1bWVudFR5cGUgPT09IHQuZG9jdW1lbnRUeXBlICYmIHRoaXMuZG9jdW1lbnRTdGF0ZSA9PT0gdC5kb2N1bWVudFN0YXRlICYmIHRoaXMuZGF0YS5pc0VxdWFsKHQuZGF0YSk7XG4gICAgfVxuICAgIG11dGFibGVDb3B5KCkge1xuICAgICAgICByZXR1cm4gbmV3IGFuKHRoaXMua2V5LCB0aGlzLmRvY3VtZW50VHlwZSwgdGhpcy52ZXJzaW9uLCB0aGlzLnJlYWRUaW1lLCB0aGlzLmNyZWF0ZVRpbWUsIHRoaXMuZGF0YS5jbG9uZSgpLCB0aGlzLmRvY3VtZW50U3RhdGUpO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBEb2N1bWVudCgke3RoaXMua2V5fSwgJHt0aGlzLnZlcnNpb259LCAke0pTT04uc3RyaW5naWZ5KHRoaXMuZGF0YS52YWx1ZSl9LCB7Y3JlYXRlVGltZTogJHt0aGlzLmNyZWF0ZVRpbWV9fSksIHtkb2N1bWVudFR5cGU6ICR7dGhpcy5kb2N1bWVudFR5cGV9fSksIHtkb2N1bWVudFN0YXRlOiAke3RoaXMuZG9jdW1lbnRTdGF0ZX19KWA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXBhcmVzIHRoZSB2YWx1ZSBmb3IgZmllbGQgYGZpZWxkYCBpbiB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiBUaHJvd3MgaWZcbiAqIHRoZSBmaWVsZCBkb2VzIG5vdCBleGlzdCBpbiBib3RoIGRvY3VtZW50cy5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhIGJvdW5kIG9mIGEgcXVlcnkuXG4gKlxuICogVGhlIGJvdW5kIGlzIHNwZWNpZmllZCB3aXRoIHRoZSBnaXZlbiBjb21wb25lbnRzIHJlcHJlc2VudGluZyBhIHBvc2l0aW9uIGFuZFxuICogd2hldGhlciBpdCdzIGp1c3QgYmVmb3JlIG9yIGp1c3QgYWZ0ZXIgdGhlIHBvc2l0aW9uIChyZWxhdGl2ZSB0byB3aGF0ZXZlciB0aGVcbiAqIHF1ZXJ5IG9yZGVyIGlzKS5cbiAqXG4gKiBUaGUgcG9zaXRpb24gcmVwcmVzZW50cyBhIGxvZ2ljYWwgaW5kZXggcG9zaXRpb24gZm9yIGEgcXVlcnkuIEl0J3MgYSBwcmVmaXhcbiAqIG9mIHZhbHVlcyBmb3IgdGhlIChwb3RlbnRpYWxseSBpbXBsaWNpdCkgb3JkZXIgYnkgY2xhdXNlcyBvZiBhIHF1ZXJ5LlxuICpcbiAqIEJvdW5kIHByb3ZpZGVzIGEgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIHdoZXRoZXIgYSBkb2N1bWVudCBjb21lcyBiZWZvcmUgb3JcbiAqIGFmdGVyIGEgYm91bmQuIFRoaXMgaXMgaW5mbHVlbmNlZCBieSB3aGV0aGVyIHRoZSBwb3NpdGlvbiBpcyBqdXN0IGJlZm9yZSBvclxuICoganVzdCBhZnRlciB0aGUgcHJvdmlkZWQgdmFsdWVzLlxuICovXG5jbGFzcyBobiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdCwgdGhpcy5pbmNsdXNpdmUgPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gbG4odCwgZSwgbikge1xuICAgIGxldCBzID0gMDtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHQucG9zaXRpb24ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29uc3QgciA9IGVbaV0sIG8gPSB0LnBvc2l0aW9uW2ldO1xuICAgICAgICBpZiAoci5maWVsZC5pc0tleUZpZWxkKCkpIHMgPSBodC5jb21wYXJhdG9yKGh0LmZyb21OYW1lKG8ucmVmZXJlbmNlVmFsdWUpLCBuLmtleSk7IGVsc2Uge1xuICAgICAgICAgICAgcyA9IEtlKG8sIG4uZGF0YS5maWVsZChyLmZpZWxkKSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSByLmRpciAmJiAocyAqPSAtMSksIDAgIT09IHMpIGJyZWFrO1xuICAgIH1cbiAgICByZXR1cm4gcztcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBhZnRlciBhIGJvdW5kIHVzaW5nIHRoZSBwcm92aWRlZCBzb3J0XG4gKiBvcmRlci5cbiAqLyBmdW5jdGlvbiBmbih0LCBlKSB7XG4gICAgaWYgKG51bGwgPT09IHQpIHJldHVybiBudWxsID09PSBlO1xuICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gITE7XG4gICAgaWYgKHQuaW5jbHVzaXZlICE9PSBlLmluY2x1c2l2ZSB8fCB0LnBvc2l0aW9uLmxlbmd0aCAhPT0gZS5wb3NpdGlvbi5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQucG9zaXRpb24ubGVuZ3RoOyBuKyspIHtcbiAgICAgICAgaWYgKCFxZSh0LnBvc2l0aW9uW25dLCBlLnBvc2l0aW9uW25dKSkgcmV0dXJuICExO1xuICAgIH1cbiAgICByZXR1cm4gITA7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIG9yZGVyaW5nIG9uIGEgZmllbGQsIGluIHNvbWUgRGlyZWN0aW9uLiBEaXJlY3Rpb24gZGVmYXVsdHMgdG8gQVNDRU5ESU5HLlxuICovIGNsYXNzIGRuIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlID0gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovKSB7XG4gICAgICAgIHRoaXMuZmllbGQgPSB0LCB0aGlzLmRpciA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiB3bih0LCBlKSB7XG4gICAgcmV0dXJuIHQuZGlyID09PSBlLmRpciAmJiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIF9uIHt9XG5cbmNsYXNzIG1uIGV4dGVuZHMgX24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5maWVsZCA9IHQsIHRoaXMub3AgPSBlLCB0aGlzLnZhbHVlID0gbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHQuaXNLZXlGaWVsZCgpID8gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBlIHx8IFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovID09PSBlID8gdGhpcy5jcmVhdGVLZXlGaWVsZEluRmlsdGVyKHQsIGUsIG4pIDogbmV3IFBuKHQsIGUsIG4pIDogXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovID09PSBlID8gbmV3IERuKHQsIG4pIDogXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBlID8gbmV3IENuKHQsIG4pIDogXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IGUgPyBuZXcgeG4odCwgbikgOiBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gZSA/IG5ldyBObih0LCBuKSA6IG5ldyBtbih0LCBlLCBuKTtcbiAgICB9XG4gICAgc3RhdGljIGNyZWF0ZUtleUZpZWxkSW5GaWx0ZXIodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gXCJpblwiIC8qIE9wZXJhdG9yLklOICovID09PSBlID8gbmV3IGJuKHQsIG4pIDogbmV3IFZuKHQsIG4pO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZGF0YS5maWVsZCh0aGlzLmZpZWxkKTtcbiAgICAgICAgLy8gVHlwZXMgZG8gbm90IGhhdmUgdG8gbWF0Y2ggaW4gTk9UX0VRVUFMIGZpbHRlcnMuXG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gPT09IHRoaXMub3AgPyBudWxsICE9PSBlICYmIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oS2UoZSwgdGhpcy52YWx1ZSkpIDogbnVsbCAhPT0gZSAmJiBMZSh0aGlzLnZhbHVlKSA9PT0gTGUoZSkgJiYgdGhpcy5tYXRjaGVzQ29tcGFyaXNvbihLZShlLCB0aGlzLnZhbHVlKSk7XG4gICAgICAgIC8vIE9ubHkgY29tcGFyZSB0eXBlcyB3aXRoIG1hdGNoaW5nIGJhY2tlbmQgb3JkZXIgKHN1Y2ggYXMgZG91YmxlIGFuZCBpbnQpLlxuICAgICAgICB9XG4gICAgbWF0Y2hlc0NvbXBhcmlzb24odCkge1xuICAgICAgICBzd2l0Y2ggKHRoaXMub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdCA8IDA7XG5cbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPD0gMDtcblxuICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwID09PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiAwICE9PSB0O1xuXG4gICAgICAgICAgY2FzZSBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQgPiAwO1xuXG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHJldHVybiB0ID49IDA7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpc0luZXF1YWxpdHkoKSB7XG4gICAgICAgIHJldHVybiBbIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyAsIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gLCBcIj5cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU4gKi8gLCBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovICwgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyAsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF0uaW5kZXhPZih0aGlzLm9wKSA+PSAwO1xuICAgIH1cbiAgICBnZXRGbGF0dGVuZWRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gWyB0aGlzIF07XG4gICAgfVxuICAgIGdldEZpbHRlcnMoKSB7XG4gICAgICAgIHJldHVybiBbIHRoaXMgXTtcbiAgICB9XG4gICAgZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzSW5lcXVhbGl0eSgpID8gdGhpcy5maWVsZCA6IG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyBnbiBleHRlbmRzIF9uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlsdGVycyA9IHQsIHRoaXMub3AgPSBlLCB0aGlzLmx0ID0gbnVsbDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGZpbHRlciBiYXNlZCBvbiB0aGUgcHJvdmlkZWQgYXJndW1lbnRzLlxuICAgICAqLyAgICBzdGF0aWMgY3JlYXRlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBnbih0LCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiB5bih0aGlzKSA/IHZvaWQgMCA9PT0gdGhpcy5maWx0ZXJzLmZpbmQoKGUgPT4gIWUubWF0Y2hlcyh0KSkpIDogdm9pZCAwICE9PSB0aGlzLmZpbHRlcnMuZmluZCgoZSA9PiBlLm1hdGNoZXModCkpKTtcbiAgICB9XG4gICAgZ2V0RmxhdHRlbmVkRmlsdGVycygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMubHQgfHwgKHRoaXMubHQgPSB0aGlzLmZpbHRlcnMucmVkdWNlKCgodCwgZSkgPT4gdC5jb25jYXQoZS5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpKSwgW10pKSwgXG4gICAgICAgIHRoaXMubHQ7XG4gICAgfVxuICAgIC8vIFJldHVybnMgYSBtdXRhYmxlIGNvcHkgb2YgYHRoaXMuZmlsdGVyc2BcbiAgICBnZXRGaWx0ZXJzKCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LmFzc2lnbihbXSwgdGhpcy5maWx0ZXJzKTtcbiAgICB9XG4gICAgZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKSB7XG4gICAgICAgIGNvbnN0IHQgPSB0aGlzLmZ0KCh0ID0+IHQuaXNJbmVxdWFsaXR5KCkpKTtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHQgPyB0LmZpZWxkIDogbnVsbDtcbiAgICB9XG4gICAgLy8gUGVyZm9ybXMgYSBkZXB0aC1maXJzdCBzZWFyY2ggdG8gZmluZCBhbmQgcmV0dXJuIHRoZSBmaXJzdCBGaWVsZEZpbHRlciBpbiB0aGUgY29tcG9zaXRlIGZpbHRlclxuICAgIC8vIHRoYXQgc2F0aXNmaWVzIHRoZSBwcmVkaWNhdGUuIFJldHVybnMgYG51bGxgIGlmIG5vbmUgb2YgdGhlIEZpZWxkRmlsdGVycyBzYXRpc2Z5IHRoZVxuICAgIC8vIHByZWRpY2F0ZS5cbiAgICBmdCh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgaWYgKHQoZSkpIHJldHVybiBlO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHluKHQpIHtcbiAgICByZXR1cm4gXCJhbmRcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5BTkQgKi8gPT09IHQub3A7XG59XG5cbmZ1bmN0aW9uIHBuKHQpIHtcbiAgICByZXR1cm4gXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovID09PSB0Lm9wO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGZpbHRlciBpcyBhIGNvbmp1bmN0aW9uIG9mIGZpZWxkIGZpbHRlcnMgb25seS4gUmV0dXJucyBmYWxzZSBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gSW4odCkge1xuICAgIHJldHVybiBUbih0KSAmJiB5bih0KTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBmaWx0ZXIgZG9lcyBub3QgY29udGFpbiBhbnkgY29tcG9zaXRlIGZpbHRlcnMuIFJldHVybnMgZmFsc2Ugb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIFRuKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSBpZiAoZSBpbnN0YW5jZW9mIGduKSByZXR1cm4gITE7XG4gICAgcmV0dXJuICEwO1xufVxuXG5mdW5jdGlvbiBFbih0KSB7XG4gICAgaWYgKHQgaW5zdGFuY2VvZiBtbikgXG4gICAgLy8gVE9ETyhiLzI5MTgzMTY1KTogVGVjaG5pY2FsbHksIHRoaXMgd29uJ3QgYmUgdW5pcXVlIGlmIHR3byB2YWx1ZXMgaGF2ZVxuICAgIC8vIHRoZSBzYW1lIGRlc2NyaXB0aW9uLCBzdWNoIGFzIHRoZSBpbnQgMyBhbmQgdGhlIHN0cmluZyBcIjNcIi4gU28gd2Ugc2hvdWxkXG4gICAgLy8gYWRkIHRoZSB0eXBlcyBpbiBoZXJlIHNvbWVob3csIHRvby5cbiAgICByZXR1cm4gdC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSArIHQub3AudG9TdHJpbmcoKSArIFFlKHQudmFsdWUpO1xuICAgIGlmIChJbih0KSkgXG4gICAgLy8gT2xkZXIgU0RLIHZlcnNpb25zIHVzZSBhbiBpbXBsaWNpdCBBTkQgb3BlcmF0aW9uIGJldHdlZW4gdGhlaXIgZmlsdGVycy5cbiAgICAvLyBJbiB0aGUgbmV3IFNESyB2ZXJzaW9ucywgdGhlIGRldmVsb3BlciBtYXkgdXNlIGFuIGV4cGxpY2l0IEFORCBmaWx0ZXIuXG4gICAgLy8gVG8gc3RheSBjb25zaXN0ZW50IHdpdGggdGhlIG9sZCB1c2FnZXMsIHdlIGFkZCBhIHNwZWNpYWwgY2FzZSB0byBlbnN1cmVcbiAgICAvLyB0aGUgY2Fub25pY2FsIElEIGZvciB0aGVzZSB0d28gYXJlIHRoZSBzYW1lLiBGb3IgZXhhbXBsZTpcbiAgICAvLyBgY29sLndoZXJlRXF1YWxzKFwiYVwiLCAxKS53aGVyZUVxdWFscyhcImJcIiwgMilgIHNob3VsZCBoYXZlIHRoZSBzYW1lXG4gICAgLy8gY2Fub25pY2FsIElEIGFzIGBjb2wud2hlcmUoYW5kKGVxdWFscyhcImFcIiwxKSwgZXF1YWxzKFwiYlwiLDIpKSlgLlxuICAgIHJldHVybiB0LmZpbHRlcnMubWFwKCh0ID0+IEVuKHQpKSkuam9pbihcIixcIik7XG4gICAge1xuICAgICAgICAvLyBmaWx0ZXIgaW5zdGFuY2VvZiBDb21wb3NpdGVGaWx0ZXJcbiAgICAgICAgY29uc3QgZSA9IHQuZmlsdGVycy5tYXAoKHQgPT4gRW4odCkpKS5qb2luKFwiLFwiKTtcbiAgICAgICAgcmV0dXJuIGAke3Qub3B9KCR7ZX0pYDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIEFuKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIG1uID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIG1uICYmIHQub3AgPT09IGUub3AgJiYgdC5maWVsZC5pc0VxdWFsKGUuZmllbGQpICYmIHFlKHQudmFsdWUsIGUudmFsdWUpO1xuICAgIH0odCwgZSkgOiB0IGluc3RhbmNlb2YgZ24gPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgZ24gJiYgdC5vcCA9PT0gZS5vcCAmJiB0LmZpbHRlcnMubGVuZ3RoID09PSBlLmZpbHRlcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICByZXR1cm4gdC5maWx0ZXJzLnJlZHVjZSgoKHQsIG4sIHMpID0+IHQgJiYgQW4obiwgZS5maWx0ZXJzW3NdKSksICEwKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wb3NpdGUgZmlsdGVyIHRoYXQgY29udGFpbnMgYWxsIGZpbHRlciBmcm9tXG4gKiBgY29tcG9zaXRlRmlsdGVyYCBwbHVzIGFsbCB0aGUgZ2l2ZW4gZmlsdGVycyBpbiBgb3RoZXJGaWx0ZXJzYC5cbiAqLyAodCwgZSkgOiB2b2lkIE8oKTtcbn1cblxuZnVuY3Rpb24gdm4odCwgZSkge1xuICAgIGNvbnN0IG4gPSB0LmZpbHRlcnMuY29uY2F0KGUpO1xuICAgIHJldHVybiBnbi5jcmVhdGUobiwgdC5vcCk7XG59XG5cbi8qKiBSZXR1cm5zIGEgZGVidWcgZGVzY3JpcHRpb24gZm9yIGBmaWx0ZXJgLiAqLyBmdW5jdGlvbiBSbih0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBtbiA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGAke3QuZmllbGQuY2Fub25pY2FsU3RyaW5nKCl9ICR7dC5vcH0gJHtRZSh0LnZhbHVlKX1gO1xuICAgIH1cbiAgICAvKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIChpLmUuICdfX25hbWVfXycpLiAqLyAodCkgOiB0IGluc3RhbmNlb2YgZ24gPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiB0Lm9wLnRvU3RyaW5nKCkgKyBcIiB7XCIgKyB0LmdldEZpbHRlcnMoKS5tYXAoUm4pLmpvaW4oXCIgLFwiKSArIFwifVwiO1xuICAgIH0odCkgOiBcIkZpbHRlclwiO1xufVxuXG5jbGFzcyBQbiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4pLCB0aGlzLmtleSA9IGh0LmZyb21OYW1lKG4ucmVmZXJlbmNlVmFsdWUpO1xuICAgIH1cbiAgICBtYXRjaGVzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IGh0LmNvbXBhcmF0b3IodC5rZXksIHRoaXMua2V5KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubWF0Y2hlc0NvbXBhcmlzb24oZSk7XG4gICAgfVxufVxuXG4vKiogRmlsdGVyIHRoYXQgbWF0Y2hlcyBvbiBrZXkgZmllbGRzIHdpdGhpbiBhbiBhcnJheS4gKi8gY2xhc3MgYm4gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gLCBlKSwgdGhpcy5rZXlzID0gU24oXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICByZXR1cm4gdGhpcy5rZXlzLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQua2V5KSkpO1xuICAgIH1cbn1cblxuLyoqIEZpbHRlciB0aGF0IG1hdGNoZXMgb24ga2V5IGZpZWxkcyBub3QgcHJlc2VudCB3aXRoaW4gYW4gYXJyYXkuICovIGNsYXNzIFZuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBlKSwgdGhpcy5rZXlzID0gU24oXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5rZXlzLnNvbWUoKGUgPT4gZS5pc0VxdWFsKHQua2V5KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gU24odCwgZSkge1xuICAgIHZhciBuO1xuICAgIHJldHVybiAoKG51bGwgPT09IChuID0gZS5hcnJheVZhbHVlKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLnZhbHVlcykgfHwgW10pLm1hcCgodCA9PiBodC5mcm9tTmFtZSh0LnJlZmVyZW5jZVZhbHVlKSkpO1xufVxuXG4vKiogQSBGaWx0ZXIgdGhhdCBpbXBsZW1lbnRzIHRoZSBhcnJheS1jb250YWlucyBvcGVyYXRvci4gKi8gY2xhc3MgRG4gZXh0ZW5kcyBtbiB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0LCBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gLCBlKTtcbiAgICB9XG4gICAgbWF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBKZShlKSAmJiBVZShlLmFycmF5VmFsdWUsIHRoaXMudmFsdWUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgSU4gb3BlcmF0b3IuICovIGNsYXNzIENuIGV4dGVuZHMgbW4ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gZSAmJiBVZSh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgbm90LWluIG9wZXJhdG9yLiAqLyBjbGFzcyB4biBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBpZiAoVWUodGhpcy52YWx1ZS5hcnJheVZhbHVlLCB7XG4gICAgICAgICAgICBudWxsVmFsdWU6IFwiTlVMTF9WQUxVRVwiXG4gICAgICAgIH0pKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0LmRhdGEuZmllbGQodGhpcy5maWVsZCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSBlICYmICFVZSh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIGUpO1xuICAgIH1cbn1cblxuLyoqIEEgRmlsdGVyIHRoYXQgaW1wbGVtZW50cyB0aGUgYXJyYXktY29udGFpbnMtYW55IG9wZXJhdG9yLiAqLyBjbGFzcyBObiBleHRlbmRzIG1uIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgZSk7XG4gICAgfVxuICAgIG1hdGNoZXModCkge1xuICAgICAgICBjb25zdCBlID0gdC5kYXRhLmZpZWxkKHRoaXMuZmllbGQpO1xuICAgICAgICByZXR1cm4gISghSmUoZSkgfHwgIWUuYXJyYXlWYWx1ZS52YWx1ZXMpICYmIGUuYXJyYXlWYWx1ZS52YWx1ZXMuc29tZSgodCA9PiBVZSh0aGlzLnZhbHVlLmFycmF5VmFsdWUsIHQpKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZ1xuY2xhc3Mga24ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUgPSBudWxsLCBuID0gW10sIHMgPSBbXSwgaSA9IG51bGwsIHIgPSBudWxsLCBvID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMub3JkZXJCeSA9IG4sIHRoaXMuZmlsdGVycyA9IHMsIHRoaXMubGltaXQgPSBpLCBcbiAgICAgICAgdGhpcy5zdGFydEF0ID0gciwgdGhpcy5lbmRBdCA9IG8sIHRoaXMuZHQgPSBudWxsO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIFRhcmdldCB3aXRoIGEgcGF0aCBhbmQgb3B0aW9uYWwgYWRkaXRpb25hbCBxdWVyeSBjb25zdHJhaW50cy5cbiAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gKlxuICogTk9URTogeW91IHNob3VsZCBhbHdheXMgY29uc3RydWN0IGBUYXJnZXRgIGZyb20gYFF1ZXJ5LnRvVGFyZ2V0YCBpbnN0ZWFkIG9mXG4gKiB1c2luZyB0aGlzIGZhY3RvcnkgbWV0aG9kLCBiZWNhdXNlIGBRdWVyeWAgcHJvdmlkZXMgYW4gaW1wbGljaXQgYG9yZGVyQnlgXG4gKiBwcm9wZXJ0eS5cbiAqLyBmdW5jdGlvbiBNbih0LCBlID0gbnVsbCwgbiA9IFtdLCBzID0gW10sIGkgPSBudWxsLCByID0gbnVsbCwgbyA9IG51bGwpIHtcbiAgICByZXR1cm4gbmV3IGtuKHQsIGUsIG4sIHMsIGksIHIsIG8pO1xufVxuXG5mdW5jdGlvbiAkbih0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgaWYgKG51bGwgPT09IGUuZHQpIHtcbiAgICAgICAgbGV0IHQgPSBlLnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIG51bGwgIT09IGUuY29sbGVjdGlvbkdyb3VwICYmICh0ICs9IFwifGNnOlwiICsgZS5jb2xsZWN0aW9uR3JvdXApLCB0ICs9IFwifGY6XCIsIHQgKz0gZS5maWx0ZXJzLm1hcCgodCA9PiBFbih0KSkpLmpvaW4oXCIsXCIpLCBcbiAgICAgICAgdCArPSBcInxvYjpcIiwgdCArPSBlLm9yZGVyQnkubWFwKCh0ID0+IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oYi8yOTE4MzE2NSk6IE1ha2UgdGhpcyBjb2xsaXNpb24gcm9idXN0LlxuICAgICAgICAgICAgcmV0dXJuIHQuZmllbGQuY2Fub25pY2FsU3RyaW5nKCkgKyB0LmRpcjtcbiAgICAgICAgfSh0KSkpLmpvaW4oXCIsXCIpLCBGdChlLmxpbWl0KSB8fCAodCArPSBcInxsOlwiLCB0ICs9IGUubGltaXQpLCBlLnN0YXJ0QXQgJiYgKHQgKz0gXCJ8bGI6XCIsIFxuICAgICAgICB0ICs9IGUuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIHQgKz0gZS5zdGFydEF0LnBvc2l0aW9uLm1hcCgodCA9PiBRZSh0KSkpLmpvaW4oXCIsXCIpKSwgXG4gICAgICAgIGUuZW5kQXQgJiYgKHQgKz0gXCJ8dWI6XCIsIHQgKz0gZS5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIHQgKz0gZS5lbmRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gUWUodCkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICBlLmR0ID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIGUuZHQ7XG59XG5cbmZ1bmN0aW9uIE9uKHQsIGUpIHtcbiAgICBpZiAodC5saW1pdCAhPT0gZS5saW1pdCkgcmV0dXJuICExO1xuICAgIGlmICh0Lm9yZGVyQnkubGVuZ3RoICE9PSBlLm9yZGVyQnkubGVuZ3RoKSByZXR1cm4gITE7XG4gICAgZm9yIChsZXQgbiA9IDA7IG4gPCB0Lm9yZGVyQnkubGVuZ3RoOyBuKyspIGlmICghd24odC5vcmRlckJ5W25dLCBlLm9yZGVyQnlbbl0pKSByZXR1cm4gITE7XG4gICAgaWYgKHQuZmlsdGVycy5sZW5ndGggIT09IGUuZmlsdGVycy5sZW5ndGgpIHJldHVybiAhMTtcbiAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQuZmlsdGVycy5sZW5ndGg7IG4rKykgaWYgKCFBbih0LmZpbHRlcnNbbl0sIGUuZmlsdGVyc1tuXSkpIHJldHVybiAhMTtcbiAgICByZXR1cm4gdC5jb2xsZWN0aW9uR3JvdXAgPT09IGUuY29sbGVjdGlvbkdyb3VwICYmICghIXQucGF0aC5pc0VxdWFsKGUucGF0aCkgJiYgKCEhZm4odC5zdGFydEF0LCBlLnN0YXJ0QXQpICYmIGZuKHQuZW5kQXQsIGUuZW5kQXQpKSk7XG59XG5cbmZ1bmN0aW9uIEZuKHQpIHtcbiAgICByZXR1cm4gaHQuaXNEb2N1bWVudEtleSh0LnBhdGgpICYmIG51bGwgPT09IHQuY29sbGVjdGlvbkdyb3VwICYmIDAgPT09IHQuZmlsdGVycy5sZW5ndGg7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBmaWVsZCBmaWx0ZXJzIHRoYXQgdGFyZ2V0IHRoZSBnaXZlbiBmaWVsZCBwYXRoLiAqLyBmdW5jdGlvbiBCbih0LCBlKSB7XG4gICAgcmV0dXJuIHQuZmlsdGVycy5maWx0ZXIoKHQgPT4gdCBpbnN0YW5jZW9mIG1uICYmIHQuZmllbGQuaXNFcXVhbChlKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWVxuICogZmlsdGVycy4gUmV0dXJucyBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIGxvd2VyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgdXBwZXIgYm91bmQgZm9yIGFuIGRlc2NlbmRpbmcgc2VnbWVudCkuXG4gKi9cbmZ1bmN0aW9uIExuKHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IEJlLCBpID0gITA7XG4gICAgLy8gUHJvY2VzcyBhbGwgZmlsdGVycyB0byBmaW5kIGEgdmFsdWUgZm9yIHRoZSBjdXJyZW50IGZpZWxkIHNlZ21lbnRcbiAgICBmb3IgKGNvbnN0IG4gb2YgQm4odCwgZSkpIHtcbiAgICAgICAgbGV0IHQgPSBCZSwgZSA9ICEwO1xuICAgICAgICBzd2l0Y2ggKG4ub3ApIHtcbiAgICAgICAgICBjYXNlIFwiPFwiIC8qIE9wZXJhdG9yLkxFU1NfVEhBTiAqLyA6XG4gICAgICAgICAgY2FzZSBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICAgIHQgPSBubihuLnZhbHVlKTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICBjYXNlIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgdCA9IG4udmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI+XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOICovIDpcbiAgICAgICAgICAgIHQgPSBuLnZhbHVlLCBlID0gITE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICB0ID0gQmU7XG4gLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgbG93ZXIgYm91bmRzLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcm4oe1xuICAgICAgICAgICAgdmFsdWU6IHMsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGVcbiAgICAgICAgfSkgPCAwICYmIChzID0gdCwgaSA9IGUpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCByID0gMDsgciA8IHQub3JkZXJCeS5sZW5ndGg7ICsrcikge1xuICAgICAgICBpZiAodC5vcmRlckJ5W3JdLmZpZWxkLmlzRXF1YWwoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLnBvc2l0aW9uW3JdO1xuICAgICAgICAgICAgcm4oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBzLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0LFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogbi5pbmNsdXNpdmVcbiAgICAgICAgICAgIH0pIDwgMCAmJiAocyA9IHQsIGkgPSBuLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSB2YWx1ZSB0byB1c2UgYXMgdGhlIHVwcGVyIGJvdW5kIGZvciBhc2NlbmRpbmcgaW5kZXggc2VnbWVudCBhdFxuICogdGhlIHByb3ZpZGVkIGBmaWVsZFBhdGhgIChvciB0aGUgbG93ZXIgYm91bmQgZm9yIGEgZGVzY2VuZGluZyBzZWdtZW50KS5cbiAqLyBmdW5jdGlvbiBxbih0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSBGZSwgaSA9ICEwO1xuICAgIC8vIFByb2Nlc3MgYWxsIGZpbHRlcnMgdG8gZmluZCBhIHZhbHVlIGZvciB0aGUgY3VycmVudCBmaWVsZCBzZWdtZW50XG4gICAgZm9yIChjb25zdCBuIG9mIEJuKHQsIGUpKSB7XG4gICAgICAgIGxldCB0ID0gRmUsIGUgPSAhMDtcbiAgICAgICAgc3dpdGNoIChuLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIj49XCIgLyogT3BlcmF0b3IuR1JFQVRFUl9USEFOX09SX0VRVUFMICovIDpcbiAgICAgICAgICBjYXNlIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLyA6XG4gICAgICAgICAgICB0ID0gc24obi52YWx1ZSksIGUgPSAhMTtcbiAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgY2FzZSBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICBjYXNlIFwiPD1cIiAvKiBPcGVyYXRvci5MRVNTX1RIQU5fT1JfRVFVQUwgKi8gOlxuICAgICAgICAgICAgdCA9IG4udmFsdWU7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCI8XCIgLyogT3BlcmF0b3IuTEVTU19USEFOICovIDpcbiAgICAgICAgICAgIHQgPSBuLnZhbHVlLCBlID0gITE7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgY2FzZSBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA6XG4gICAgICAgICAgICB0ID0gRmU7XG4gLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgdXBwZXIgYm91bmRzLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgb24oe1xuICAgICAgICAgICAgdmFsdWU6IHMsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGlcbiAgICAgICAgfSwge1xuICAgICAgICAgICAgdmFsdWU6IHQsXG4gICAgICAgICAgICBpbmNsdXNpdmU6IGVcbiAgICAgICAgfSkgPiAwICYmIChzID0gdCwgaSA9IGUpO1xuICAgIH1cbiAgICAvLyBJZiB0aGVyZSBpcyBhbiBhZGRpdGlvbmFsIGJvdW5kLCBjb21wYXJlIHRoZSB2YWx1ZXMgYWdhaW5zdCB0aGUgZXhpc3RpbmdcbiAgICAvLyByYW5nZSB0byBzZWUgaWYgd2UgY2FuIG5hcnJvdyB0aGUgc2NvcGUuXG4gICAgICAgIGlmIChudWxsICE9PSBuKSBmb3IgKGxldCByID0gMDsgciA8IHQub3JkZXJCeS5sZW5ndGg7ICsrcikge1xuICAgICAgICBpZiAodC5vcmRlckJ5W3JdLmZpZWxkLmlzRXF1YWwoZSkpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBuLnBvc2l0aW9uW3JdO1xuICAgICAgICAgICAgb24oe1xuICAgICAgICAgICAgICAgIHZhbHVlOiBzLFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogaVxuICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiB0LFxuICAgICAgICAgICAgICAgIGluY2x1c2l2ZTogbi5pbmNsdXNpdmVcbiAgICAgICAgICAgIH0pID4gMCAmJiAocyA9IHQsIGkgPSBuLmluY2x1c2l2ZSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ge1xuICAgICAgICB2YWx1ZTogcyxcbiAgICAgICAgaW5jbHVzaXZlOiBpXG4gICAgfTtcbn1cblxuLyoqIFJldHVybnMgdGhlIG51bWJlciBvZiBzZWdtZW50cyBvZiBhIHBlcmZlY3QgaW5kZXggZm9yIHRoaXMgdGFyZ2V0LiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUXVlcnkgZW5jYXBzdWxhdGVzIGFsbCB0aGUgcXVlcnkgYXR0cmlidXRlcyB3ZSBzdXBwb3J0IGluIHRoZSBTREsuIEl0IGNhblxuICogYmUgcnVuIGFnYWluc3QgdGhlIExvY2FsU3RvcmUsIGFzIHdlbGwgYXMgYmUgY29udmVydGVkIHRvIGEgYFRhcmdldGAgdG9cbiAqIHF1ZXJ5IHRoZSBSZW1vdGVTdG9yZSByZXN1bHRzLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmNsYXNzIFVuIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFF1ZXJ5IHdpdGggYSBwYXRoIGFuZCBvcHRpb25hbCBhZGRpdGlvbmFsIHF1ZXJ5IGNvbnN0cmFpbnRzLlxuICAgICAqIFBhdGggbXVzdCBjdXJyZW50bHkgYmUgZW1wdHkgaWYgdGhpcyBpcyBhIGNvbGxlY3Rpb24gZ3JvdXAgcXVlcnkuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSA9IG51bGwsIG4gPSBbXSwgcyA9IFtdLCBpID0gbnVsbCwgciA9IFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIG8gPSBudWxsLCB1ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhdGggPSB0LCB0aGlzLmNvbGxlY3Rpb25Hcm91cCA9IGUsIHRoaXMuZXhwbGljaXRPcmRlckJ5ID0gbiwgdGhpcy5maWx0ZXJzID0gcywgXG4gICAgICAgIHRoaXMubGltaXQgPSBpLCB0aGlzLmxpbWl0VHlwZSA9IHIsIHRoaXMuc3RhcnRBdCA9IG8sIHRoaXMuZW5kQXQgPSB1LCB0aGlzLnd0ID0gbnVsbCwgXG4gICAgICAgIC8vIFRoZSBjb3JyZXNwb25kaW5nIGBUYXJnZXRgIG9mIHRoaXMgYFF1ZXJ5YCBpbnN0YW5jZS5cbiAgICAgICAgdGhpcy5fdCA9IG51bGwsIHRoaXMuc3RhcnRBdCwgdGhpcy5lbmRBdDtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IFF1ZXJ5IGluc3RhbmNlIHdpdGggdGhlIG9wdGlvbnMgcHJvdmlkZWQuICovIGZ1bmN0aW9uIEtuKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUpIHtcbiAgICByZXR1cm4gbmV3IFVuKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUpO1xufVxuXG4vKiogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBxdWVyeSB0aGF0IG1hdGNoZXMgYWxsIGRvY3VtZW50cyBhdCBgcGF0aGAgKi8gZnVuY3Rpb24gR24odCkge1xuICAgIHJldHVybiBuZXcgVW4odCk7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGNvbnZlcnQgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IGludG8gYSBjb2xsZWN0aW9uIHF1ZXJ5IGF0IGFcbiAqIHNwZWNpZmljIHBhdGguIFRoaXMgaXMgdXNlZCB3aGVuIGV4ZWN1dGluZyBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJpZXMsIHNpbmNlXG4gKiB3ZSBoYXZlIHRvIHNwbGl0IHRoZSBxdWVyeSBpbnRvIGEgc2V0IG9mIGNvbGxlY3Rpb24gcXVlcmllcyBhdCBtdWx0aXBsZVxuICogcGF0aHMuXG4gKi9cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoaXMgcXVlcnkgZG9lcyBub3Qgc3BlY2lmeSBhbnkgcXVlcnkgY29uc3RyYWludHMgdGhhdFxuICogY291bGQgcmVtb3ZlIHJlc3VsdHMuXG4gKi9cbmZ1bmN0aW9uIFFuKHQpIHtcbiAgICByZXR1cm4gMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCAmJiBudWxsID09PSB0LmxpbWl0ICYmIG51bGwgPT0gdC5zdGFydEF0ICYmIG51bGwgPT0gdC5lbmRBdCAmJiAoMCA9PT0gdC5leHBsaWNpdE9yZGVyQnkubGVuZ3RoIHx8IDEgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCAmJiB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZC5pc0tleUZpZWxkKCkpO1xufVxuXG5mdW5jdGlvbiBqbih0KSB7XG4gICAgcmV0dXJuIHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyB0LmV4cGxpY2l0T3JkZXJCeVswXS5maWVsZCA6IG51bGw7XG59XG5cbmZ1bmN0aW9uIHpuKHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5maWx0ZXJzKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlLmdldEZpcnN0SW5lcXVhbGl0eUZpZWxkKCk7XG4gICAgICAgIGlmIChudWxsICE9PSB0KSByZXR1cm4gdDtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyBRdWVyeSBmb3IgYSBjb2xsZWN0aW9uIGdyb3VwIHF1ZXJ5IHRoYXQgbWF0Y2hlcyBhbGwgZG9jdW1lbnRzXG4gKiB3aXRoaW4gdGhlIHByb3ZpZGVkIGNvbGxlY3Rpb24gZ3JvdXAuXG4gKi9cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIHRoZSBxdWVyeSBtYXRjaGVzIGEgY29sbGVjdGlvbiBncm91cCByYXRoZXIgdGhhbiBhIHNwZWNpZmljXG4gKiBjb2xsZWN0aW9uLlxuICovXG5mdW5jdGlvbiBXbih0KSB7XG4gICAgcmV0dXJuIG51bGwgIT09IHQuY29sbGVjdGlvbkdyb3VwO1xufVxuXG4vKipcbiAqIFJldHVybnMgdGhlIGltcGxpY2l0IG9yZGVyIGJ5IGNvbnN0cmFpbnQgdGhhdCBpcyB1c2VkIHRvIGV4ZWN1dGUgdGhlIFF1ZXJ5LFxuICogd2hpY2ggY2FuIGJlIGRpZmZlcmVudCBmcm9tIHRoZSBvcmRlciBieSBjb25zdHJhaW50cyB0aGUgdXNlciBwcm92aWRlZCAoZS5nLlxuICogdGhlIFNESyBhbmQgYmFja2VuZCBhbHdheXMgb3JkZXJzIGJ5IGBfX25hbWVfX2ApLlxuICovIGZ1bmN0aW9uIEhuKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KTtcbiAgICBpZiAobnVsbCA9PT0gZS53dCkge1xuICAgICAgICBlLnd0ID0gW107XG4gICAgICAgIGNvbnN0IHQgPSB6bihlKSwgbiA9IGpuKGUpO1xuICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiBudWxsID09PSBuKSBcbiAgICAgICAgLy8gSW4gb3JkZXIgdG8gaW1wbGljaXRseSBhZGQga2V5IG9yZGVyaW5nLCB3ZSBtdXN0IGFsc28gYWRkIHRoZVxuICAgICAgICAvLyBpbmVxdWFsaXR5IGZpbHRlciBmaWVsZCBmb3IgaXQgdG8gYmUgYSB2YWxpZCBxdWVyeS5cbiAgICAgICAgLy8gTm90ZSB0aGF0IHRoZSBkZWZhdWx0IGluZXF1YWxpdHkgZmllbGQgYW5kIGtleSBvcmRlcmluZyBpcyBhc2NlbmRpbmcuXG4gICAgICAgIHQuaXNLZXlGaWVsZCgpIHx8IGUud3QucHVzaChuZXcgZG4odCkpLCBlLnd0LnB1c2gobmV3IGRuKGF0LmtleUZpZWxkKCksIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLykpOyBlbHNlIHtcbiAgICAgICAgICAgIGxldCB0ID0gITE7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IG4gb2YgZS5leHBsaWNpdE9yZGVyQnkpIGUud3QucHVzaChuKSwgbi5maWVsZC5pc0tleUZpZWxkKCkgJiYgKHQgPSAhMCk7XG4gICAgICAgICAgICBpZiAoIXQpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgb3JkZXIgb2YgdGhlIGltcGxpY2l0IGtleSBvcmRlcmluZyBhbHdheXMgbWF0Y2hlcyB0aGUgbGFzdFxuICAgICAgICAgICAgICAgIC8vIGV4cGxpY2l0IG9yZGVyIGJ5XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCA+IDAgPyBlLmV4cGxpY2l0T3JkZXJCeVtlLmV4cGxpY2l0T3JkZXJCeS5sZW5ndGggLSAxXS5kaXIgOiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi87XG4gICAgICAgICAgICAgICAgZS53dC5wdXNoKG5ldyBkbihhdC5rZXlGaWVsZCgpLCB0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUud3Q7XG59XG5cbi8qKlxuICogQ29udmVydHMgdGhpcyBgUXVlcnlgIGluc3RhbmNlIHRvIGl0J3MgY29ycmVzcG9uZGluZyBgVGFyZ2V0YCByZXByZXNlbnRhdGlvbi5cbiAqLyBmdW5jdGlvbiBKbih0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgaWYgKCFlLl90KSBpZiAoXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSBlLmxpbWl0VHlwZSkgZS5fdCA9IE1uKGUucGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIEhuKGUpLCBlLmZpbHRlcnMsIGUubGltaXQsIGUuc3RhcnRBdCwgZS5lbmRBdCk7IGVsc2Uge1xuICAgICAgICAvLyBGbGlwIHRoZSBvcmRlckJ5IGRpcmVjdGlvbnMgc2luY2Ugd2Ugd2FudCB0aGUgbGFzdCByZXN1bHRzXG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCBuIG9mIEhuKGUpKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi8gPT09IG4uZGlyID8gXCJhc2NcIiAvKiBEaXJlY3Rpb24uQVNDRU5ESU5HICovIDogXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG4gICAgICAgICAgICB0LnB1c2gobmV3IGRuKG4uZmllbGQsIGUpKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBXZSBuZWVkIHRvIHN3YXAgdGhlIGN1cnNvcnMgdG8gbWF0Y2ggdGhlIG5vdy1mbGlwcGVkIHF1ZXJ5IG9yZGVyaW5nLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBlLmVuZEF0ID8gbmV3IGhuKGUuZW5kQXQucG9zaXRpb24sIGUuZW5kQXQuaW5jbHVzaXZlKSA6IG51bGwsIHMgPSBlLnN0YXJ0QXQgPyBuZXcgaG4oZS5zdGFydEF0LnBvc2l0aW9uLCBlLnN0YXJ0QXQuaW5jbHVzaXZlKSA6IG51bGw7XG4gICAgICAgIC8vIE5vdyByZXR1cm4gYXMgYSBMaW1pdFR5cGUuRmlyc3QgcXVlcnkuXG4gICAgICAgIGUuX3QgPSBNbihlLnBhdGgsIGUuY29sbGVjdGlvbkdyb3VwLCB0LCBlLmZpbHRlcnMsIGUubGltaXQsIG4sIHMpO1xuICAgIH1cbiAgICByZXR1cm4gZS5fdDtcbn1cblxuZnVuY3Rpb24gWW4odCwgZSkge1xuICAgIGUuZ2V0Rmlyc3RJbmVxdWFsaXR5RmllbGQoKSwgem4odCk7XG4gICAgY29uc3QgbiA9IHQuZmlsdGVycy5jb25jYXQoWyBlIF0pO1xuICAgIHJldHVybiBuZXcgVW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgbiwgdC5saW1pdCwgdC5saW1pdFR5cGUsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbmZ1bmN0aW9uIFhuKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gbmV3IFVuKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCBlLCBuLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xufVxuXG5mdW5jdGlvbiBabih0LCBlKSB7XG4gICAgcmV0dXJuIE9uKEpuKHQpLCBKbihlKSkgJiYgdC5saW1pdFR5cGUgPT09IGUubGltaXRUeXBlO1xufVxuXG4vLyBUT0RPKGIvMjkxODMxNjUpOiBUaGlzIGlzIHVzZWQgdG8gZ2V0IGEgdW5pcXVlIHN0cmluZyBmcm9tIGEgcXVlcnkgdG8sIGZvclxuLy8gZXhhbXBsZSwgdXNlIGFzIGEgZGljdGlvbmFyeSBrZXksIGJ1dCB0aGUgaW1wbGVtZW50YXRpb24gaXMgc3ViamVjdCB0b1xuLy8gY29sbGlzaW9ucy4gTWFrZSBpdCBjb2xsaXNpb24tZnJlZS5cbmZ1bmN0aW9uIHRzKHQpIHtcbiAgICByZXR1cm4gYCR7JG4oSm4odCkpfXxsdDoke3QubGltaXRUeXBlfWA7XG59XG5cbmZ1bmN0aW9uIGVzKHQpIHtcbiAgICByZXR1cm4gYFF1ZXJ5KHRhcmdldD0ke2Z1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0LnBhdGguY2Fub25pY2FsU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiBudWxsICE9PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAoZSArPSBcIiBjb2xsZWN0aW9uR3JvdXA9XCIgKyB0LmNvbGxlY3Rpb25Hcm91cCksIFxuICAgICAgICB0LmZpbHRlcnMubGVuZ3RoID4gMCAmJiAoZSArPSBgLCBmaWx0ZXJzOiBbJHt0LmZpbHRlcnMubWFwKCh0ID0+IFJuKHQpKSkuam9pbihcIiwgXCIpfV1gKSwgXG4gICAgICAgIEZ0KHQubGltaXQpIHx8IChlICs9IFwiLCBsaW1pdDogXCIgKyB0LmxpbWl0KSwgdC5vcmRlckJ5Lmxlbmd0aCA+IDAgJiYgKGUgKz0gYCwgb3JkZXJCeTogWyR7dC5vcmRlckJ5Lm1hcCgodCA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gYCR7dC5maWVsZC5jYW5vbmljYWxTdHJpbmcoKX0gKCR7dC5kaXJ9KWA7XG4gICAgICAgIH0odCkpKS5qb2luKFwiLCBcIil9XWApLCB0LnN0YXJ0QXQgJiYgKGUgKz0gXCIsIHN0YXJ0QXQ6IFwiLCBlICs9IHQuc3RhcnRBdC5pbmNsdXNpdmUgPyBcImI6XCIgOiBcImE6XCIsIFxuICAgICAgICBlICs9IHQuc3RhcnRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gUWUodCkpKS5qb2luKFwiLFwiKSksIHQuZW5kQXQgJiYgKGUgKz0gXCIsIGVuZEF0OiBcIiwgXG4gICAgICAgIGUgKz0gdC5lbmRBdC5pbmNsdXNpdmUgPyBcImE6XCIgOiBcImI6XCIsIGUgKz0gdC5lbmRBdC5wb3NpdGlvbi5tYXAoKHQgPT4gUWUodCkpKS5qb2luKFwiLFwiKSksIFxuICAgICAgICBgVGFyZ2V0KCR7ZX0pYDtcbiAgICB9KEpuKHQpKX07IGxpbWl0VHlwZT0ke3QubGltaXRUeXBlfSlgO1xufVxuXG4vKiogUmV0dXJucyB3aGV0aGVyIGBkb2NgIG1hdGNoZXMgdGhlIGNvbnN0cmFpbnRzIG9mIGBxdWVyeWAuICovIGZ1bmN0aW9uIG5zKHQsIGUpIHtcbiAgICByZXR1cm4gZS5pc0ZvdW5kRG9jdW1lbnQoKSAmJiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLmtleS5wYXRoO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdC5jb2xsZWN0aW9uR3JvdXAgPyBlLmtleS5oYXNDb2xsZWN0aW9uSWQodC5jb2xsZWN0aW9uR3JvdXApICYmIHQucGF0aC5pc1ByZWZpeE9mKG4pIDogaHQuaXNEb2N1bWVudEtleSh0LnBhdGgpID8gdC5wYXRoLmlzRXF1YWwobikgOiB0LnBhdGguaXNJbW1lZGlhdGVQYXJlbnRPZihuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBBIGRvY3VtZW50IG11c3QgaGF2ZSBhIHZhbHVlIGZvciBldmVyeSBvcmRlcmluZyBjbGF1c2UgaW4gb3JkZXIgdG8gc2hvdyB1cFxuICogaW4gdGhlIHJlc3VsdHMuXG4gKi8gKHQsIGUpICYmIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gV2UgbXVzdCB1c2UgYHF1ZXJ5T3JkZXJCeSgpYCB0byBnZXQgdGhlIGxpc3Qgb2YgYWxsIG9yZGVyQnlzIChib3RoIGltcGxpY2l0IGFuZCBleHBsaWNpdCkuXG4gICAgICAgIC8vIE5vdGUgdGhhdCBmb3IgT1IgcXVlcmllcywgb3JkZXJCeSBhcHBsaWVzIHRvIGFsbCBkaXNqdW5jdGlvbiB0ZXJtcyBhbmQgaW1wbGljaXQgb3JkZXJCeXMgbXVzdFxuICAgICAgICAvLyBiZSB0YWtlbiBpbnRvIGFjY291bnQuIEZvciBleGFtcGxlLCB0aGUgcXVlcnkgXCJhID4gMSB8fCBiPT0xXCIgaGFzIGFuIGltcGxpY2l0IFwib3JkZXJCeSBhXCIgZHVlXG4gICAgICAgIC8vIHRvIHRoZSBpbmVxdWFsaXR5LCBhbmQgaXMgZXZhbHVhdGVkIGFzIFwiYSA+IDEgb3JkZXJCeSBhIHx8IGI9PTEgb3JkZXJCeSBhXCIuXG4gICAgICAgIC8vIEEgZG9jdW1lbnQgd2l0aCBjb250ZW50IG9mIHtiOjF9IG1hdGNoZXMgdGhlIGZpbHRlcnMsIGJ1dCBkb2VzIG5vdCBtYXRjaCB0aGUgb3JkZXJCeSBiZWNhdXNlXG4gICAgICAgIC8vIGl0J3MgbWlzc2luZyB0aGUgZmllbGQgJ2EnLlxuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgSG4odCkpIFxuICAgICAgICAvLyBvcmRlciBieSBrZXkgYWx3YXlzIG1hdGNoZXNcbiAgICAgICAgaWYgKCFuLmZpZWxkLmlzS2V5RmllbGQoKSAmJiBudWxsID09PSBlLmRhdGEuZmllbGQobi5maWVsZCkpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH0odCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBmb3IgKGNvbnN0IG4gb2YgdC5maWx0ZXJzKSBpZiAoIW4ubWF0Y2hlcyhlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBzdXJlIGEgZG9jdW1lbnQgaXMgd2l0aGluIHRoZSBib3VuZHMsIGlmIHByb3ZpZGVkLiAqLyAodCwgZSkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBpZiAodC5zdGFydEF0ICYmICFcbiAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgYSBkb2N1bWVudCBzb3J0cyBiZWZvcmUgYSBib3VuZCB1c2luZyB0aGUgcHJvdmlkZWQgc29ydFxuICogb3JkZXIuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IGxuKHQsIGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIHQuaW5jbHVzaXZlID8gcyA8PSAwIDogcyA8IDA7XG4gICAgICAgIH0odC5zdGFydEF0LCBIbih0KSwgZSkpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHQuZW5kQXQgJiYgIWZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBsbih0LCBlLCBuKTtcbiAgICAgICAgICAgIHJldHVybiB0LmluY2x1c2l2ZSA/IHMgPj0gMCA6IHMgPiAwO1xuICAgICAgICB9KHQuZW5kQXQsIEhuKHQpLCBlKSkgcmV0dXJuICExO1xuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIC8qKlxuICogUmV0dXJucyB0aGUgY29sbGVjdGlvbiBncm91cCB0aGF0IHRoaXMgcXVlcnkgdGFyZ2V0cy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGluIHRoZSBXZWIgU0RLIHRvIGZhY2lsaXRhdGUgbXVsdGktdGFiXG4gKiBzeW5jaHJvbml6YXRpb24gZm9yIHF1ZXJ5IHJlc3VsdHMuXG4gKi8gKHQsIGUpO1xufVxuXG5mdW5jdGlvbiBzcyh0KSB7XG4gICAgcmV0dXJuIHQuY29sbGVjdGlvbkdyb3VwIHx8ICh0LnBhdGgubGVuZ3RoICUgMiA9PSAxID8gdC5wYXRoLmxhc3RTZWdtZW50KCkgOiB0LnBhdGguZ2V0KHQucGF0aC5sZW5ndGggLSAyKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIG5ldyBjb21wYXJhdG9yIGZ1bmN0aW9uIHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcGFyZSB0d28gZG9jdW1lbnRzXG4gKiBiYXNlZCBvbiB0aGUgUXVlcnkncyBvcmRlcmluZyBjb25zdHJhaW50LlxuICovIGZ1bmN0aW9uIGlzKHQpIHtcbiAgICByZXR1cm4gKGUsIG4pID0+IHtcbiAgICAgICAgbGV0IHMgPSAhMTtcbiAgICAgICAgZm9yIChjb25zdCBpIG9mIEhuKHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gcnMoaSwgZSwgbik7XG4gICAgICAgICAgICBpZiAoMCAhPT0gdCkgcmV0dXJuIHQ7XG4gICAgICAgICAgICBzID0gcyB8fCBpLmZpZWxkLmlzS2V5RmllbGQoKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gMDtcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBycyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IHQuZmllbGQuaXNLZXlGaWVsZCgpID8gaHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZS5kYXRhLmZpZWxkKHQpLCBpID0gbi5kYXRhLmZpZWxkKHQpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gcyAmJiBudWxsICE9PSBpID8gS2UocywgaSkgOiBPKCk7XG4gICAgfSh0LmZpZWxkLCBlLCBuKTtcbiAgICBzd2l0Y2ggKHQuZGlyKSB7XG4gICAgICBjYXNlIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA6XG4gICAgICAgIHJldHVybiBzO1xuXG4gICAgICBjYXNlIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovIDpcbiAgICAgICAgcmV0dXJuIC0xICogcztcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIE8oKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgbWFwIGltcGxlbWVudGF0aW9uIHRoYXQgdXNlcyBvYmplY3RzIGFzIGtleXMuIE9iamVjdHMgbXVzdCBoYXZlIGFuXG4gKiBhc3NvY2lhdGVkIGVxdWFscyBmdW5jdGlvbiBhbmQgbXVzdCBiZSBpbW11dGFibGUuIEVudHJpZXMgaW4gdGhlIG1hcCBhcmVcbiAqIHN0b3JlZCB0b2dldGhlciB3aXRoIHRoZSBrZXkgYmVpbmcgcHJvZHVjZWQgZnJvbSB0aGUgbWFwS2V5Rm4uIFRoaXMgbWFwXG4gKiBhdXRvbWF0aWNhbGx5IGhhbmRsZXMgY29sbGlzaW9ucyBvZiBrZXlzLlxuICovIGNsYXNzIG9zIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubWFwS2V5Rm4gPSB0LCB0aGlzLmVxdWFsc0ZuID0gZSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUgaW5uZXIgbWFwIGZvciBhIGtleS92YWx1ZSBwYWlyLiBEdWUgdG8gdGhlIHBvc3NpYmlsaXR5IG9mIGNvbGxpc2lvbnMgd2VcbiAgICAgICAgICoga2VlcCBhIGxpc3Qgb2YgZW50cmllcyB0aGF0IHdlIGRvIGEgbGluZWFyIHNlYXJjaCB0aHJvdWdoIHRvIGZpbmQgYW4gYWN0dWFsXG4gICAgICAgICAqIG1hdGNoLiBOb3RlIHRoYXQgY29sbGlzaW9ucyBzaG91bGQgYmUgcmFyZSwgc28gd2Ugc3RpbGwgZXhwZWN0IG5lYXJcbiAgICAgICAgICogY29uc3RhbnQgdGltZSBsb29rdXBzIGluIHByYWN0aWNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5pbm5lciA9IHt9LCBcbiAgICAgICAgLyoqIFRoZSBudW1iZXIgb2YgZW50cmllcyBzdG9yZWQgaW4gdGhlIG1hcCAqL1xuICAgICAgICB0aGlzLmlubmVyU2l6ZSA9IDA7XG4gICAgfVxuICAgIC8qKiBHZXQgYSB2YWx1ZSBmb3IgdGhpcyBrZXksIG9yIHVuZGVmaW5lZCBpZiBpdCBkb2VzIG5vdCBleGlzdC4gKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMubWFwS2V5Rm4odCksIG4gPSB0aGlzLmlubmVyW2VdO1xuICAgICAgICBpZiAodm9pZCAwICE9PSBuKSBmb3IgKGNvbnN0IFtlLCBzXSBvZiBuKSBpZiAodGhpcy5lcXVhbHNGbihlLCB0KSkgcmV0dXJuIHM7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuZ2V0KHQpO1xuICAgIH1cbiAgICAvKiogUHV0IHRoaXMga2V5IGFuZCB2YWx1ZSBpbiB0aGUgbWFwLiAqLyAgICBzZXQodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5tYXBLZXlGbih0KSwgcyA9IHRoaXMuaW5uZXJbbl07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IHMpIHJldHVybiB0aGlzLmlubmVyW25dID0gWyBbIHQsIGUgXSBdLCB2b2lkIHRoaXMuaW5uZXJTaXplKys7XG4gICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgcy5sZW5ndGg7IG4rKykgaWYgKHRoaXMuZXF1YWxzRm4oc1tuXVswXSwgdCkpIFxuICAgICAgICAvLyBUaGlzIGlzIHVwZGF0aW5nIGFuIGV4aXN0aW5nIGVudHJ5IGFuZCBkb2VzIG5vdCBpbmNyZWFzZSBgaW5uZXJTaXplYC5cbiAgICAgICAgcmV0dXJuIHZvaWQgKHNbbl0gPSBbIHQsIGUgXSk7XG4gICAgICAgIHMucHVzaChbIHQsIGUgXSksIHRoaXMuaW5uZXJTaXplKys7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZSB0aGlzIGtleSBmcm9tIHRoZSBtYXAuIFJldHVybnMgYSBib29sZWFuIGlmIGFueXRoaW5nIHdhcyBkZWxldGVkLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5tYXBLZXlGbih0KSwgbiA9IHRoaXMuaW5uZXJbZV07XG4gICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiAhMTtcbiAgICAgICAgZm9yIChsZXQgcyA9IDA7IHMgPCBuLmxlbmd0aDsgcysrKSBpZiAodGhpcy5lcXVhbHNGbihuW3NdWzBdLCB0KSkgcmV0dXJuIDEgPT09IG4ubGVuZ3RoID8gZGVsZXRlIHRoaXMuaW5uZXJbZV0gOiBuLnNwbGljZShzLCAxKSwgXG4gICAgICAgIHRoaXMuaW5uZXJTaXplLS0sICEwO1xuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIGZvckVhY2godCkge1xuICAgICAgICBnZSh0aGlzLmlubmVyLCAoKGUsIG4pID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgW2UsIHNdIG9mIG4pIHQoZSwgcyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgaXNFbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIHllKHRoaXMuaW5uZXIpO1xuICAgIH1cbiAgICBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pbm5lclNpemU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB1cyA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gY3MoKSB7XG4gICAgcmV0dXJuIHVzO1xufVxuXG5jb25zdCBhcyA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gaHMoLi4udCkge1xuICAgIGxldCBlID0gYXM7XG4gICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmluc2VydChuLmtleSwgbik7XG4gICAgcmV0dXJuIGU7XG59XG5cbmZ1bmN0aW9uIGxzKHQpIHtcbiAgICBsZXQgZSA9IGFzO1xuICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiBlID0gZS5pbnNlcnQodCwgbi5vdmVybGF5ZWREb2N1bWVudCkpKSwgZTtcbn1cblxuZnVuY3Rpb24gZnMoKSB7XG4gICAgcmV0dXJuIHdzKCk7XG59XG5cbmZ1bmN0aW9uIGRzKCkge1xuICAgIHJldHVybiB3cygpO1xufVxuXG5mdW5jdGlvbiB3cygpIHtcbiAgICByZXR1cm4gbmV3IG9zKCh0ID0+IHQudG9TdHJpbmcoKSksICgodCwgZSkgPT4gdC5pc0VxdWFsKGUpKSk7XG59XG5cbmNvbnN0IF9zID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuXG5jb25zdCBtcyA9IG5ldyBFZShodC5jb21wYXJhdG9yKTtcblxuZnVuY3Rpb24gZ3MoLi4udCkge1xuICAgIGxldCBlID0gbXM7XG4gICAgZm9yIChjb25zdCBuIG9mIHQpIGUgPSBlLmFkZChuKTtcbiAgICByZXR1cm4gZTtcbn1cblxuY29uc3QgeXMgPSBuZXcgRWUoZXQpO1xuXG5mdW5jdGlvbiBwcygpIHtcbiAgICByZXR1cm4geXM7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJldHVybnMgYW4gRG91YmxlVmFsdWUgZm9yIGB2YWx1ZWAgdGhhdCBpcyBlbmNvZGVkIGJhc2VkIHRoZSBzZXJpYWxpemVyJ3NcbiAqIGB1c2VQcm90bzNKc29uYCBzZXR0aW5nLlxuICovIGZ1bmN0aW9uIElzKHQsIGUpIHtcbiAgICBpZiAodC51c2VQcm90bzNKc29uKSB7XG4gICAgICAgIGlmIChpc05hTihlKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIk5hTlwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChlID09PSAxIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIkluZmluaXR5XCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKGUgPT09IC0xIC8gMCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBcIi1JbmZpbml0eVwiXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiB7XG4gICAgICAgIGRvdWJsZVZhbHVlOiBCdChlKSA/IFwiLTBcIiA6IGVcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gSW50ZWdlclZhbHVlIGZvciBgdmFsdWVgLlxuICovIGZ1bmN0aW9uIFRzKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBpbnRlZ2VyVmFsdWU6IFwiXCIgKyB0XG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgdmFsdWUgZm9yIGEgbnVtYmVyIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICogVGhlIHJldHVybiB2YWx1ZSBpcyBhbiBJbnRlZ2VyVmFsdWUgaWYgaXQgY2FuIHNhZmVseSByZXByZXNlbnQgdGhlIHZhbHVlLFxuICogb3RoZXJ3aXNlIGEgRG91YmxlVmFsdWUgaXMgcmV0dXJuZWQuXG4gKi8gZnVuY3Rpb24gRXModCwgZSkge1xuICAgIHJldHVybiBMdChlKSA/IFRzKGUpIDogSXModCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVXNlZCB0byByZXByZXNlbnQgYSBmaWVsZCB0cmFuc2Zvcm0gb24gYSBtdXRhdGlvbi4gKi8gY2xhc3MgQXMge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBNYWtlIHN1cmUgdGhhdCB0aGUgc3RydWN0dXJhbCB0eXBlIG9mIGBUcmFuc2Zvcm1PcGVyYXRpb25gIGlzIHVuaXF1ZS5cbiAgICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9taWNyb3NvZnQvVHlwZVNjcmlwdC9pc3N1ZXMvNTQ1MVxuICAgICAgICB0aGlzLl8gPSB2b2lkIDA7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbXB1dGVzIHRoZSBsb2NhbCB0cmFuc2Zvcm0gcmVzdWx0IGFnYWluc3QgdGhlIHByb3ZpZGVkIGBwcmV2aW91c1ZhbHVlYCxcbiAqIG9wdGlvbmFsbHkgdXNpbmcgdGhlIHByb3ZpZGVkIGxvY2FsV3JpdGVUaW1lLlxuICovIGZ1bmN0aW9uIHZzKHQsIGUsIG4pIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIGJzID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgZmllbGRzOiB7XG4gICAgICAgICAgICAgICAgX190eXBlX186IHtcbiAgICAgICAgICAgICAgICAgICAgc3RyaW5nVmFsdWU6IFwic2VydmVyX3RpbWVzdGFtcFwiXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBfX2xvY2FsX3dyaXRlX3RpbWVfXzoge1xuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXBWYWx1ZToge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vjb25kczogdC5zZWNvbmRzLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFub3M6IHQubmFub3NlY29uZHNcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgLy8gV2Ugc2hvdWxkIGF2b2lkIHN0b3JpbmcgZGVlcGx5IG5lc3RlZCBzZXJ2ZXIgdGltZXN0YW1wIG1hcCB2YWx1ZXNcbiAgICAgICAgLy8gYmVjYXVzZSB3ZSBuZXZlciB1c2UgdGhlIGludGVybWVkaWF0ZSBcInByZXZpb3VzIHZhbHVlc1wiLlxuICAgICAgICAvLyBGb3IgZXhhbXBsZTpcbiAgICAgICAgLy8gcHJldmlvdXM6IDQyTCwgYWRkOiB0MSwgcmVzdWx0OiB0MSAtPiA0MkxcbiAgICAgICAgLy8gcHJldmlvdXM6IHQxLCAgYWRkOiB0MiwgcmVzdWx0OiB0MiAtPiA0MkwgKE5PVCB0MiAtPiB0MSAtPiA0MkwpXG4gICAgICAgIC8vIHByZXZpb3VzOiB0MiwgIGFkZDogdDMsIHJlc3VsdDogdDMgLT4gNDJMIChOT1QgdDMgLT4gdDIgLT4gdDEgLT4gNDJMKVxuICAgICAgICAvLyBgZ2V0UHJldmlvdXNWYWx1ZWAgcmVjdXJzaXZlbHkgdHJhdmVyc2VzIHNlcnZlciB0aW1lc3RhbXBzIHRvIGZpbmQgdGhlXG4gICAgICAgIC8vIGxlYXN0IHJlY2VudCBWYWx1ZS5cbiAgICAgICAgICAgICAgICByZXR1cm4gZSAmJiBOZShlKSAmJiAoZSA9IGtlKGUpKSwgZSAmJiAobi5maWVsZHMuX19wcmV2aW91c192YWx1ZV9fID0gZSksIFxuICAgICAgICB7XG4gICAgICAgICAgICBtYXBWYWx1ZTogblxuICAgICAgICB9O1xuICAgIH0obiwgZSkgOiB0IGluc3RhbmNlb2YgVnMgPyBTcyh0LCBlKSA6IHQgaW5zdGFuY2VvZiBEcyA/IENzKHQsIGUpIDogZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFNpbmNlIEphdmFTY3JpcHQncyBpbnRlZ2VyIGFyaXRobWV0aWMgaXMgbGltaXRlZCB0byA1MyBiaXRcbiAgICAgICAgLy8gcHJlY2lzaW9uIGFuZCByZXNvbHZlcyBvdmVyZmxvd3MgYnkgcmVkdWNpbmcgcHJlY2lzaW9uLCB3ZSBkbyBub3RcbiAgICAgICAgLy8gbWFudWFsbHkgY2FwIG92ZXJmbG93cyBhdCAyXjYzLlxuICAgICAgICBjb25zdCBuID0gUHModCwgZSksIHMgPSBOcyhuKSArIE5zKHQuZ3QpO1xuICAgICAgICByZXR1cm4gSGUobikgJiYgSGUodC5ndCkgPyBUcyhzKSA6IElzKHQuc2VyaWFsaXplciwgcyk7XG4gICAgfSh0LCBlKTtcbn1cblxuLyoqXG4gKiBDb21wdXRlcyBhIGZpbmFsIHRyYW5zZm9ybSByZXN1bHQgYWZ0ZXIgdGhlIHRyYW5zZm9ybSBoYXMgYmVlbiBhY2tub3dsZWRnZWRcbiAqIGJ5IHRoZSBzZXJ2ZXIsIHBvdGVudGlhbGx5IHVzaW5nIHRoZSBzZXJ2ZXItcHJvdmlkZWQgdHJhbnNmb3JtUmVzdWx0LlxuICovIGZ1bmN0aW9uIFJzKHQsIGUsIG4pIHtcbiAgICAvLyBUaGUgc2VydmVyIGp1c3Qgc2VuZHMgbnVsbCBhcyB0aGUgdHJhbnNmb3JtIHJlc3VsdCBmb3IgYXJyYXkgb3BlcmF0aW9ucyxcbiAgICAvLyBzbyB3ZSBoYXZlIHRvIGNhbGN1bGF0ZSBhIHJlc3VsdCB0aGUgc2FtZSBhcyB3ZSBkbyBmb3IgbG9jYWxcbiAgICAvLyBhcHBsaWNhdGlvbnMuXG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBWcyA/IFNzKHQsIGUpIDogdCBpbnN0YW5jZW9mIERzID8gQ3ModCwgZSkgOiBuO1xufVxuXG4vKipcbiAqIElmIHRoaXMgdHJhbnNmb3JtIG9wZXJhdGlvbiBpcyBub3QgaWRlbXBvdGVudCwgcmV0dXJucyB0aGUgYmFzZSB2YWx1ZSB0b1xuICogcGVyc2lzdCBmb3IgdGhpcyB0cmFuc2Zvcm0uIElmIGEgYmFzZSB2YWx1ZSBpcyByZXR1cm5lZCwgdGhlIHRyYW5zZm9ybVxuICogb3BlcmF0aW9uIGlzIGFsd2F5cyBhcHBsaWVkIHRvIHRoaXMgYmFzZSB2YWx1ZSwgZXZlbiBpZiBkb2N1bWVudCBoYXNcbiAqIGFscmVhZHkgYmVlbiB1cGRhdGVkLlxuICpcbiAqIEJhc2UgdmFsdWVzIHByb3ZpZGUgY29uc2lzdGVudCBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmRcbiAqIGFsbG93IHVzIHRvIHJldHVybiB0aGUgc2FtZSBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmRcbiAqIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlIHRyYW5zZm9ybSBvcGVyYXRpb24uIFRoZSBiYXNlIHZhbHVlIGlzIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IHRyYW5zZm9ybXMsIGFzIHRoZXkgY2FuIGJlIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhc1xuICogYWxyZWFkeSBhcHBsaWVkIHRoZW0uXG4gKlxuICogQHJldHVybnMgYSBiYXNlIHZhbHVlIHRvIHN0b3JlIGFsb25nIHdpdGggdGhlIG11dGF0aW9uLCBvciBudWxsIGZvclxuICogaWRlbXBvdGVudCB0cmFuc2Zvcm1zLlxuICovIGZ1bmN0aW9uIFBzKHQsIGUpIHtcbiAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHhzID8gSGUobiA9IGUpIHx8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiBcImRvdWJsZVZhbHVlXCIgaW4gdDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgdHJ1ZSBpZiBgdmFsdWVgIGlzIGVpdGhlciBhbiBJbnRlZ2VyVmFsdWUgb3IgYSBEb3VibGVWYWx1ZS4gKi8gKG4pID8gZSA6IHtcbiAgICAgICAgaW50ZWdlclZhbHVlOiAwXG4gICAgfSA6IG51bGw7XG4gICAgdmFyIG47XG59XG5cbi8qKiBUcmFuc2Zvcm1zIGEgdmFsdWUgaW50byBhIHNlcnZlci1nZW5lcmF0ZWQgdGltZXN0YW1wLiAqL1xuY2xhc3MgYnMgZXh0ZW5kcyBBcyB7fVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSB1bmlvbiBvcGVyYXRpb24uICovIGNsYXNzIFZzIGV4dGVuZHMgQXMge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5lbGVtZW50cyA9IHQ7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBTcyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGtzKGUpO1xuICAgIGZvciAoY29uc3QgZSBvZiB0LmVsZW1lbnRzKSBuLnNvbWUoKHQgPT4gcWUodCwgZSkpKSB8fCBuLnB1c2goZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgYXJyYXlWYWx1ZToge1xuICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG4vKiogVHJhbnNmb3JtcyBhbiBhcnJheSB2YWx1ZSB2aWEgYSByZW1vdmUgb3BlcmF0aW9uLiAqLyBjbGFzcyBEcyBleHRlbmRzIEFzIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZWxlbWVudHMgPSB0O1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQ3ModCwgZSkge1xuICAgIGxldCBuID0ga3MoZSk7XG4gICAgZm9yIChjb25zdCBlIG9mIHQuZWxlbWVudHMpIG4gPSBuLmZpbHRlcigodCA9PiAhcWUodCwgZSkpKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICB2YWx1ZXM6IG5cbiAgICAgICAgfVxuICAgIH07XG59XG5cbi8qKlxuICogSW1wbGVtZW50cyB0aGUgYmFja2VuZCBzZW1hbnRpY3MgZm9yIGxvY2FsbHkgY29tcHV0ZWQgTlVNRVJJQ19BREQgKGluY3JlbWVudClcbiAqIHRyYW5zZm9ybXMuIENvbnZlcnRzIGFsbCBmaWVsZCB2YWx1ZXMgdG8gaW50ZWdlcnMgb3IgZG91YmxlcywgYnV0IHVubGlrZSB0aGVcbiAqIGJhY2tlbmQgZG9lcyBub3QgY2FwIGludGVnZXIgdmFsdWVzIGF0IDJeNjMuIEluc3RlYWQsIEphdmFTY3JpcHQgbnVtYmVyXG4gKiBhcml0aG1ldGljIGlzIHVzZWQgYW5kIHByZWNpc2lvbiBsb3NzIGNhbiBvY2N1ciBmb3IgdmFsdWVzIGdyZWF0ZXIgdGhhbiAyXjUzLlxuICovIGNsYXNzIHhzIGV4dGVuZHMgQXMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5zZXJpYWxpemVyID0gdCwgdGhpcy5ndCA9IGU7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBOcyh0KSB7XG4gICAgcmV0dXJuIENlKHQuaW50ZWdlclZhbHVlIHx8IHQuZG91YmxlVmFsdWUpO1xufVxuXG5mdW5jdGlvbiBrcyh0KSB7XG4gICAgcmV0dXJuIEplKHQpICYmIHQuYXJyYXlWYWx1ZS52YWx1ZXMgPyB0LmFycmF5VmFsdWUudmFsdWVzLnNsaWNlKCkgOiBbXTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKiBBIGZpZWxkIHBhdGggYW5kIHRoZSBUcmFuc2Zvcm1PcGVyYXRpb24gdG8gcGVyZm9ybSB1cG9uIGl0LiAqLyBjbGFzcyBNcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmZpZWxkID0gdCwgdGhpcy50cmFuc2Zvcm0gPSBlO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gJHModCwgZSkge1xuICAgIHJldHVybiB0LmZpZWxkLmlzRXF1YWwoZS5maWVsZCkgJiYgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIFZzICYmIGUgaW5zdGFuY2VvZiBWcyB8fCB0IGluc3RhbmNlb2YgRHMgJiYgZSBpbnN0YW5jZW9mIERzID8gbnQodC5lbGVtZW50cywgZS5lbGVtZW50cywgcWUpIDogdCBpbnN0YW5jZW9mIHhzICYmIGUgaW5zdGFuY2VvZiB4cyA/IHFlKHQuZ3QsIGUuZ3QpIDogdCBpbnN0YW5jZW9mIGJzICYmIGUgaW5zdGFuY2VvZiBicztcbiAgICB9KHQudHJhbnNmb3JtLCBlLnRyYW5zZm9ybSk7XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHN1Y2Nlc3NmdWxseSBhcHBseWluZyBhIG11dGF0aW9uIHRvIHRoZSBiYWNrZW5kLiAqL1xuY2xhc3MgT3Mge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSB2ZXJzaW9uIGF0IHdoaWNoIHRoZSBtdXRhdGlvbiB3YXMgY29tbWl0dGVkOlxuICAgICAqXG4gICAgICogLSBGb3IgbW9zdCBvcGVyYXRpb25zLCB0aGlzIGlzIHRoZSB1cGRhdGVUaW1lIGluIHRoZSBXcml0ZVJlc3VsdC5cbiAgICAgKiAtIEZvciBkZWxldGVzLCB0aGUgY29tbWl0VGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSAoYmVjYXVzZSBkZWxldGVzIGFyZVxuICAgICAqICAgbm90IHN0b3JlZCBhbmQgaGF2ZSBubyB1cGRhdGVUaW1lKS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGVzZSB2ZXJzaW9ucyBjYW4gYmUgZGlmZmVyZW50OiBOby1vcCB3cml0ZXMgd2lsbCBub3QgY2hhbmdlXG4gICAgICogdGhlIHVwZGF0ZVRpbWUgZXZlbiB0aG91Z2ggdGhlIGNvbW1pdFRpbWUgYWR2YW5jZXMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIHJlc3VsdGluZyBmaWVsZHMgcmV0dXJuZWQgZnJvbSB0aGUgYmFja2VuZCBhZnRlciBhIG11dGF0aW9uXG4gICAgICogY29udGFpbmluZyBmaWVsZCB0cmFuc2Zvcm1zIGhhcyBiZWVuIGNvbW1pdHRlZC4gQ29udGFpbnMgb25lIEZpZWxkVmFsdWVcbiAgICAgKiBmb3IgZWFjaCBGaWVsZFRyYW5zZm9ybSB0aGF0IHdhcyBpbiB0aGUgbXV0YXRpb24uXG4gICAgICpcbiAgICAgKiBXaWxsIGJlIGVtcHR5IGlmIHRoZSBtdXRhdGlvbiBkaWQgbm90IGNvbnRhaW4gYW55IGZpZWxkIHRyYW5zZm9ybXMuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLnZlcnNpb24gPSB0LCB0aGlzLnRyYW5zZm9ybVJlc3VsdHMgPSBlO1xuICAgIH1cbn1cblxuLyoqXG4gKiBFbmNvZGVzIGEgcHJlY29uZGl0aW9uIGZvciBhIG11dGF0aW9uLiBUaGlzIGZvbGxvd3MgdGhlIG1vZGVsIHRoYXQgdGhlXG4gKiBiYWNrZW5kIGFjY2VwdHMgd2l0aCB0aGUgc3BlY2lhbCBjYXNlIG9mIGFuIGV4cGxpY2l0IFwiZW1wdHlcIiBwcmVjb25kaXRpb25cbiAqIChtZWFuaW5nIG5vIHByZWNvbmRpdGlvbikuXG4gKi8gY2xhc3MgRnMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lID0gdCwgdGhpcy5leGlzdHMgPSBlO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBlbXB0eSBQcmVjb25kaXRpb24uICovICAgIHN0YXRpYyBub25lKCkge1xuICAgICAgICByZXR1cm4gbmV3IEZzO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyBQcmVjb25kaXRpb24gd2l0aCBhbiBleGlzdHMgZmxhZy4gKi8gICAgc3RhdGljIGV4aXN0cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgRnModm9pZCAwLCB0KTtcbiAgICB9XG4gICAgLyoqIENyZWF0ZXMgYSBuZXcgUHJlY29uZGl0aW9uIGJhc2VkIG9uIGEgdmVyc2lvbiBhIGRvY3VtZW50IGV4aXN0cyBhdC4gKi8gICAgc3RhdGljIHVwZGF0ZVRpbWUodCkge1xuICAgICAgICByZXR1cm4gbmV3IEZzKHQpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB3aGV0aGVyIHRoaXMgUHJlY29uZGl0aW9uIGlzIGVtcHR5LiAqLyAgICBnZXQgaXNOb25lKCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0aGlzLnVwZGF0ZVRpbWUgJiYgdm9pZCAwID09PSB0aGlzLmV4aXN0cztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmV4aXN0cyA9PT0gdC5leGlzdHMgJiYgKHRoaXMudXBkYXRlVGltZSA/ICEhdC51cGRhdGVUaW1lICYmIHRoaXMudXBkYXRlVGltZS5pc0VxdWFsKHQudXBkYXRlVGltZSkgOiAhdC51cGRhdGVUaW1lKTtcbiAgICB9XG59XG5cbi8qKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByZWNvbmRpdGlvbnMgaXMgdmFsaWQgZm9yIHRoZSBnaXZlbiBkb2N1bWVudC4gKi8gZnVuY3Rpb24gQnModCwgZSkge1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQudXBkYXRlVGltZSA/IGUuaXNGb3VuZERvY3VtZW50KCkgJiYgZS52ZXJzaW9uLmlzRXF1YWwodC51cGRhdGVUaW1lKSA6IHZvaWQgMCA9PT0gdC5leGlzdHMgfHwgdC5leGlzdHMgPT09IGUuaXNGb3VuZERvY3VtZW50KCk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiBkZXNjcmliZXMgYSBzZWxmLWNvbnRhaW5lZCBjaGFuZ2UgdG8gYSBkb2N1bWVudC4gTXV0YXRpb25zIGNhblxuICogY3JlYXRlLCByZXBsYWNlLCBkZWxldGUsIGFuZCB1cGRhdGUgc3Vic2V0cyBvZiBkb2N1bWVudHMuXG4gKlxuICogTXV0YXRpb25zIG5vdCBvbmx5IGFjdCBvbiB0aGUgdmFsdWUgb2YgdGhlIGRvY3VtZW50IGJ1dCBhbHNvIGl0cyB2ZXJzaW9uLlxuICpcbiAqIEZvciBsb2NhbCBtdXRhdGlvbnMgKG11dGF0aW9ucyB0aGF0IGhhdmVuJ3QgYmVlbiBjb21taXR0ZWQgeWV0KSwgd2UgcHJlc2VydmVcbiAqIHRoZSBleGlzdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gRm9yIERlbGV0ZSBtdXRhdGlvbnMsIHdlXG4gKiByZXNldCB0aGUgdmVyc2lvbiB0byAwLlxuICpcbiAqIEhlcmUncyB0aGUgZXhwZWN0ZWQgdHJhbnNpdGlvbiB0YWJsZS5cbiAqXG4gKiBNVVRBVElPTiAgICAgICAgICAgQVBQTElFRCBUTyAgICAgICAgICAgIFJFU1VMVFMgSU5cbiAqXG4gKiBTZXRNdXRhdGlvbiAgICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogU2V0TXV0YXRpb24gICAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBEb2N1bWVudCh2MClcbiAqIFNldE11dGF0aW9uICAgICAgICBJbnZhbGlkRG9jdW1lbnQodjApICAgRG9jdW1lbnQodjApXG4gKiBQYXRjaE11dGF0aW9uICAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIERvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIE5vRG9jdW1lbnQodjMpICAgICAgICBOb0RvY3VtZW50KHYzKVxuICogUGF0Y2hNdXRhdGlvbiAgICAgIEludmFsaWREb2N1bWVudCh2MCkgICBVbmtub3duRG9jdW1lbnQodjMpXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgRG9jdW1lbnQodjMpICAgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgTm9Eb2N1bWVudCh2MykgICAgICAgIE5vRG9jdW1lbnQodjApXG4gKiBEZWxldGVNdXRhdGlvbiAgICAgSW52YWxpZERvY3VtZW50KHYwKSAgIE5vRG9jdW1lbnQodjApXG4gKlxuICogRm9yIGFja25vd2xlZGdlZCBtdXRhdGlvbnMsIHdlIHVzZSB0aGUgdXBkYXRlVGltZSBvZiB0aGUgV3JpdGVSZXNwb25zZSBhc1xuICogdGhlIHJlc3VsdGluZyB2ZXJzaW9uIGZvciBTZXQgYW5kIFBhdGNoIG11dGF0aW9ucy4gQXMgZGVsZXRlcyBoYXZlIG5vXG4gKiBleHBsaWNpdCB1cGRhdGUgdGltZSwgd2UgdXNlIHRoZSBjb21taXRUaW1lIG9mIHRoZSBXcml0ZVJlc3BvbnNlIGZvclxuICogRGVsZXRlIG11dGF0aW9ucy5cbiAqXG4gKiBJZiBhIG11dGF0aW9uIGlzIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZCBidXQgZmFpbHMgdGhlIHByZWNvbmRpdGlvbiBjaGVja1xuICogbG9jYWxseSwgd2UgdHJhbnNpdGlvbiB0byBhbiBgVW5rbm93bkRvY3VtZW50YCBhbmQgcmVseSBvbiBXYXRjaCB0byBzZW5kIHVzXG4gKiB0aGUgdXBkYXRlZCB2ZXJzaW9uLlxuICpcbiAqIEZpZWxkIHRyYW5zZm9ybXMgYXJlIHVzZWQgb25seSB3aXRoIFBhdGNoIGFuZCBTZXQgTXV0YXRpb25zLiBXZSB1c2UgdGhlXG4gKiBgdXBkYXRlVHJhbnNmb3Jtc2AgbWVzc2FnZSB0byBzdG9yZSB0cmFuc2Zvcm1zLCByYXRoZXIgdGhhbiB0aGUgYHRyYW5zZm9ybXNgc1xuICogbWVzc2FnZXMuXG4gKlxuICogIyMgU3ViY2xhc3NpbmcgTm90ZXNcbiAqXG4gKiBFdmVyeSB0eXBlIG9mIG11dGF0aW9uIG5lZWRzIHRvIGltcGxlbWVudCBpdHMgb3duIGFwcGx5VG9SZW1vdGVEb2N1bWVudCgpIGFuZFxuICogYXBwbHlUb0xvY2FsVmlldygpIHRvIGltcGxlbWVudCB0aGUgYWN0dWFsIGJlaGF2aW9yIG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvblxuICogdG8gc29tZSBzb3VyY2UgZG9jdW1lbnQgKHNlZSBgc2V0TXV0YXRpb25BcHBseVRvUmVtb3RlRG9jdW1lbnQoKWAgZm9yIGFuXG4gKiBleGFtcGxlKS5cbiAqLyBjbGFzcyBMcyB7fVxuXG4vKipcbiAqIEEgdXRpbGl0eSBtZXRob2QgdG8gY2FsY3VsYXRlIGEgYE11dGF0aW9uYCByZXByZXNlbnRpbmcgdGhlIG92ZXJsYXkgZnJvbSB0aGVcbiAqIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgYW5kIGEgYEZpZWxkTWFza2AgcmVwcmVzZW50aW5nIHRoZSBmaWVsZHMgdGhhdFxuICogYXJlIG11dGF0ZWQgYnkgdGhlIGxvY2FsIG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBxcyh0LCBlKSB7XG4gICAgaWYgKCF0Lmhhc0xvY2FsTXV0YXRpb25zIHx8IGUgJiYgMCA9PT0gZS5maWVsZHMubGVuZ3RoKSByZXR1cm4gbnVsbDtcbiAgICAvLyBtYXNrIGlzIG51bGwgd2hlbiBzZXRzIG9yIGRlbGV0ZXMgYXJlIGFwcGxpZWQgdG8gdGhlIGN1cnJlbnQgZG9jdW1lbnQuXG4gICAgICAgIGlmIChudWxsID09PSBlKSByZXR1cm4gdC5pc05vRG9jdW1lbnQoKSA/IG5ldyBZcyh0LmtleSwgRnMubm9uZSgpKSA6IG5ldyBqcyh0LmtleSwgdC5kYXRhLCBGcy5ub25lKCkpO1xuICAgIHtcbiAgICAgICAgY29uc3QgbiA9IHQuZGF0YSwgcyA9IHVuLmVtcHR5KCk7XG4gICAgICAgIGxldCBpID0gbmV3IEVlKGF0LmNvbXBhcmF0b3IpO1xuICAgICAgICBmb3IgKGxldCB0IG9mIGUuZmllbGRzKSBpZiAoIWkuaGFzKHQpKSB7XG4gICAgICAgICAgICBsZXQgZSA9IG4uZmllbGQodCk7XG4gICAgICAgICAgICAvLyBJZiB3ZSBhcmUgZGVsZXRpbmcgYSBuZXN0ZWQgZmllbGQsIHdlIHRha2UgdGhlIGltbWVkaWF0ZSBwYXJlbnQgYXNcbiAgICAgICAgICAgIC8vIHRoZSBtYXNrIHVzZWQgdG8gY29uc3RydWN0IHRoZSByZXN1bHRpbmcgbXV0YXRpb24uXG4gICAgICAgICAgICAvLyBKdXN0aWZpY2F0aW9uOiBOZXN0ZWQgZmllbGRzIGNhbiBjcmVhdGUgcGFyZW50IGZpZWxkcyBpbXBsaWNpdGx5LiBJZlxuICAgICAgICAgICAgLy8gb25seSBhIGxlYWYgZW50cnkgaXMgZGVsZXRlZCBpbiBsYXRlciBtdXRhdGlvbnMsIHRoZSBwYXJlbnQgZmllbGRcbiAgICAgICAgICAgIC8vIHNob3VsZCBzdGlsbCByZW1haW4sIGJ1dCB3ZSBtYXkgaGF2ZSBsb3N0IHRoaXMgaW5mb3JtYXRpb24uXG4gICAgICAgICAgICAvLyBDb25zaWRlciBtdXRhdGlvbiAoZm9vLmJhciAxKSwgdGhlbiBtdXRhdGlvbiAoZm9vLmJhciBkZWxldGUoKSkuXG4gICAgICAgICAgICAvLyBUaGlzIGxlYXZlcyB0aGUgZmluYWwgcmVzdWx0IChmb28sIHt9KS4gRGVzcGl0ZSB0aGUgZmFjdCB0aGF0IGBkb2NgXG4gICAgICAgICAgICAvLyBoYXMgdGhlIGNvcnJlY3QgcmVzdWx0LCBgZm9vYCBpcyBub3QgaW4gYG1hc2tgLCBhbmQgdGhlIHJlc3VsdGluZ1xuICAgICAgICAgICAgLy8gbXV0YXRpb24gd291bGQgbWlzcyBgZm9vYC5cbiAgICAgICAgICAgICAgICAgICAgICAgIG51bGwgPT09IGUgJiYgdC5sZW5ndGggPiAxICYmICh0ID0gdC5wb3BMYXN0KCksIGUgPSBuLmZpZWxkKHQpKSwgbnVsbCA9PT0gZSA/IHMuZGVsZXRlKHQpIDogcy5zZXQodCwgZSksIFxuICAgICAgICAgICAgaSA9IGkuYWRkKHQpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgenModC5rZXksIHMsIG5ldyBSZShpLnRvQXJyYXkoKSksIEZzLm5vbmUoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmcgYVxuICogbmV3IHJlbW90ZSBkb2N1bWVudC4gSWYgdGhlIGlucHV0IGRvY3VtZW50IGRvZXNuJ3QgbWF0Y2ggdGhlIGV4cGVjdGVkIHN0YXRlXG4gKiAoZS5nLiBpdCBpcyBpbnZhbGlkIG9yIG91dGRhdGVkKSwgdGhlIGRvY3VtZW50IHR5cGUgbWF5IHRyYW5zaXRpb24gdG9cbiAqIHVua25vd24uXG4gKlxuICogQHBhcmFtIG11dGF0aW9uIC0gVGhlIG11dGF0aW9uIHRvIGFwcGx5LlxuICogQHBhcmFtIGRvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIG11dGF0ZS4gVGhlIGlucHV0IGRvY3VtZW50IGNhbiBiZSBhblxuICogICAgIGludmFsaWQgZG9jdW1lbnQgaWYgdGhlIGNsaWVudCBoYXMgbm8ga25vd2xlZGdlIG9mIHRoZSBwcmUtbXV0YXRpb24gc3RhdGVcbiAqICAgICBvZiB0aGUgZG9jdW1lbnQuXG4gKiBAcGFyYW0gbXV0YXRpb25SZXN1bHQgLSBUaGUgcmVzdWx0IG9mIGFwcGx5aW5nIHRoZSBtdXRhdGlvbiBmcm9tIHRoZSBiYWNrZW5kLlxuICovIGZ1bmN0aW9uIFVzKHQsIGUsIG4pIHtcbiAgICB0IGluc3RhbmNlb2YganMgPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBzZXRNdXRhdGlvbkFwcGx5VG9Mb2NhbFZpZXcsIGlmIHdlJ3JlIGFwcGx5aW5nIGEgbXV0YXRpb24gdG8gYVxuICAgICAgICAvLyByZW1vdGUgZG9jdW1lbnQgdGhlIHNlcnZlciBoYXMgYWNjZXB0ZWQgdGhlIG11dGF0aW9uIHNvIHRoZSBwcmVjb25kaXRpb25cbiAgICAgICAgLy8gbXVzdCBoYXZlIGhlbGQuXG4gICAgICAgIGNvbnN0IHMgPSB0LnZhbHVlLmNsb25lKCksIGkgPSBIcyh0LmZpZWxkVHJhbnNmb3JtcywgZSwgbi50cmFuc2Zvcm1SZXN1bHRzKTtcbiAgICAgICAgcy5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIHMpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiB0IGluc3RhbmNlb2YgenMgPyBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGlmICghQnModC5wcmVjb25kaXRpb24sIGUpKSBcbiAgICAgICAgLy8gU2luY2UgdGhlIG11dGF0aW9uIHdhcyBub3QgcmVqZWN0ZWQsIHdlIGtub3cgdGhhdCB0aGUgcHJlY29uZGl0aW9uXG4gICAgICAgIC8vIG1hdGNoZWQgb24gdGhlIGJhY2tlbmQuIFdlIHRoZXJlZm9yZSBtdXN0IG5vdCBoYXZlIHRoZSBleHBlY3RlZCB2ZXJzaW9uXG4gICAgICAgIC8vIG9mIHRoZSBkb2N1bWVudCBpbiBvdXIgY2FjaGUgYW5kIGNvbnZlcnQgdG8gYW4gVW5rbm93bkRvY3VtZW50IHdpdGggYVxuICAgICAgICAvLyBrbm93biB1cGRhdGVUaW1lLlxuICAgICAgICByZXR1cm4gdm9pZCBlLmNvbnZlcnRUb1Vua25vd25Eb2N1bWVudChuLnZlcnNpb24pO1xuICAgICAgICBjb25zdCBzID0gSHModC5maWVsZFRyYW5zZm9ybXMsIGUsIG4udHJhbnNmb3JtUmVzdWx0cyksIGkgPSBlLmRhdGE7XG4gICAgICAgIGkuc2V0QWxsKFdzKHQpKSwgaS5zZXRBbGwocyksIGUuY29udmVydFRvRm91bmREb2N1bWVudChuLnZlcnNpb24sIGkpLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0odCwgZSwgbikgOiBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIC8vIFVubGlrZSBhcHBseVRvTG9jYWxWaWV3LCBpZiB3ZSdyZSBhcHBseWluZyBhIG11dGF0aW9uIHRvIGEgcmVtb3RlXG4gICAgICAgIC8vIGRvY3VtZW50IHRoZSBzZXJ2ZXIgaGFzIGFjY2VwdGVkIHRoZSBtdXRhdGlvbiBzbyB0aGUgcHJlY29uZGl0aW9uIG11c3RcbiAgICAgICAgLy8gaGF2ZSBoZWxkLlxuICAgICAgICBlLmNvbnZlcnRUb05vRG9jdW1lbnQobi52ZXJzaW9uKS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKTtcbiAgICB9KDAsIGUsIG4pO1xufVxuXG4vKipcbiAqIEFwcGxpZXMgdGhpcyBtdXRhdGlvbiB0byB0aGUgZ2l2ZW4gZG9jdW1lbnQgZm9yIHRoZSBwdXJwb3NlcyBvZiBjb21wdXRpbmdcbiAqIHRoZSBuZXcgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50LiBJZiB0aGUgaW5wdXQgZG9jdW1lbnQgZG9lc24ndCBtYXRjaCB0aGVcbiAqIGV4cGVjdGVkIHN0YXRlLCB0aGUgZG9jdW1lbnQgaXMgbm90IG1vZGlmaWVkLlxuICpcbiAqIEBwYXJhbSBtdXRhdGlvbiAtIFRoZSBtdXRhdGlvbiB0byBhcHBseS5cbiAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBtdXRhdGUuIFRoZSBpbnB1dCBkb2N1bWVudCBjYW4gYmUgYW5cbiAqICAgICBpbnZhbGlkIGRvY3VtZW50IGlmIHRoZSBjbGllbnQgaGFzIG5vIGtub3dsZWRnZSBvZiB0aGUgcHJlLW11dGF0aW9uIHN0YXRlXG4gKiAgICAgb2YgdGhlIGRvY3VtZW50LlxuICogQHBhcmFtIHByZXZpb3VzTWFzayAtIFRoZSBmaWVsZHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBiZWZvcmUgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbi5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIEEgdGltZXN0YW1wIGluZGljYXRpbmcgdGhlIGxvY2FsIHdyaXRlIHRpbWUgb2YgdGhlXG4gKiAgICAgYmF0Y2ggdGhpcyBtdXRhdGlvbiBpcyBhIHBhcnQgb2YuXG4gKiBAcmV0dXJucyBBIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyB0aGUgZmllbGRzIHRoYXQgYXJlIGNoYW5nZWQgYnkgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbi5cbiAqLyBmdW5jdGlvbiBLcyh0LCBlLCBuLCBzKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBqcyA/IGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgaWYgKCFCcyh0LnByZWNvbmRpdGlvbiwgZSkpIFxuICAgICAgICAvLyBUaGUgbXV0YXRpb24gZmFpbGVkIHRvIGFwcGx5IChlLmcuIGEgZG9jdW1lbnQgSUQgY3JlYXRlZCB3aXRoIGFkZCgpXG4gICAgICAgIC8vIGNhdXNlZCBhIG5hbWUgY29sbGlzaW9uKS5cbiAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIGNvbnN0IGkgPSB0LnZhbHVlLmNsb25lKCksIHIgPSBKcyh0LmZpZWxkVHJhbnNmb3JtcywgcywgZSk7XG4gICAgICAgIHJldHVybiBpLnNldEFsbChyKSwgZS5jb252ZXJ0VG9Gb3VuZERvY3VtZW50KGUudmVyc2lvbiwgaSkuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGw7XG4gLy8gU2V0TXV0YXRpb24gb3ZlcndyaXRlcyBhbGwgZmllbGRzLlxuICAgICAgICB9XG4gICAgLyoqXG4gKiBBIG11dGF0aW9uIHRoYXQgbW9kaWZpZXMgZmllbGRzIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGggdGhlXG4gKiBnaXZlbiB2YWx1ZXMuIFRoZSB2YWx1ZXMgYXJlIGFwcGxpZWQgdGhyb3VnaCBhIGZpZWxkIG1hc2s6XG4gKlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIGJvdGggdGhlIG1hc2sgYW5kIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nIGZpZWxkXG4gKiAgICBpcyB1cGRhdGVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIG5laXRoZXIgdGhlIG1hc2sgbm9yIHRoZSB2YWx1ZXMsIHRoZSBjb3JyZXNwb25kaW5nXG4gKiAgICBmaWVsZCBpcyB1bm1vZGlmaWVkLlxuICogICogV2hlbiBhIGZpZWxkIGlzIGluIHRoZSBtYXNrIGJ1dCBub3QgaW4gdGhlIHZhbHVlcywgdGhlIGNvcnJlc3BvbmRpbmcgZmllbGRcbiAqICAgIGlzIGRlbGV0ZWQuXG4gKiAgKiBXaGVuIGEgZmllbGQgaXMgbm90IGluIHRoZSBtYXNrIGJ1dCBpcyBpbiB0aGUgdmFsdWVzLCB0aGUgdmFsdWVzIG1hcCBpc1xuICogICAgaWdub3JlZC5cbiAqLyAodCwgZSwgbiwgcykgOiB0IGluc3RhbmNlb2YgenMgPyBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIGlmICghQnModC5wcmVjb25kaXRpb24sIGUpKSByZXR1cm4gbjtcbiAgICAgICAgY29uc3QgaSA9IEpzKHQuZmllbGRUcmFuc2Zvcm1zLCBzLCBlKSwgciA9IGUuZGF0YTtcbiAgICAgICAgaWYgKHIuc2V0QWxsKFdzKHQpKSwgci5zZXRBbGwoaSksIGUuY29udmVydFRvRm91bmREb2N1bWVudChlLnZlcnNpb24sIHIpLnNldEhhc0xvY2FsTXV0YXRpb25zKCksIFxuICAgICAgICBudWxsID09PSBuKSByZXR1cm4gbnVsbDtcbiAgICAgICAgcmV0dXJuIG4udW5pb25XaXRoKHQuZmllbGRNYXNrLmZpZWxkcykudW5pb25XaXRoKHQuZmllbGRUcmFuc2Zvcm1zLm1hcCgodCA9PiB0LmZpZWxkKSkpO1xuICAgIH1cbiAgICAvKipcbiAqIFJldHVybnMgYSBGaWVsZFBhdGgvVmFsdWUgbWFwIHdpdGggdGhlIGNvbnRlbnQgb2YgdGhlIFBhdGNoTXV0YXRpb24uXG4gKi8gKHQsIGUsIG4sIHMpIDogZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBpZiAoQnModC5wcmVjb25kaXRpb24sIGUpKSByZXR1cm4gZS5jb252ZXJ0VG9Ob0RvY3VtZW50KGUudmVyc2lvbikuc2V0SGFzTG9jYWxNdXRhdGlvbnMoKSwgXG4gICAgICAgIG51bGw7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAqIEEgbXV0YXRpb24gdGhhdCB2ZXJpZmllcyB0aGUgZXhpc3RlbmNlIG9mIHRoZSBkb2N1bWVudCBhdCB0aGUgZ2l2ZW4ga2V5IHdpdGhcbiAqIHRoZSBwcm92aWRlZCBwcmVjb25kaXRpb24uXG4gKlxuICogVGhlIGB2ZXJpZnlgIG9wZXJhdGlvbiBpcyBvbmx5IHVzZWQgaW4gVHJhbnNhY3Rpb25zLCBhbmQgdGhpcyBjbGFzcyBzZXJ2ZXNcbiAqIHByaW1hcmlseSB0byBmYWNpbGl0YXRlIHNlcmlhbGl6YXRpb24gaW50byBwcm90b3MuXG4gKi8gKHQsIGUsIG4pO1xufVxuXG4vKipcbiAqIElmIHRoaXMgbXV0YXRpb24gaXMgbm90IGlkZW1wb3RlbnQsIHJldHVybnMgdGhlIGJhc2UgdmFsdWUgdG8gcGVyc2lzdCB3aXRoXG4gKiB0aGlzIG11dGF0aW9uLiBJZiBhIGJhc2UgdmFsdWUgaXMgcmV0dXJuZWQsIHRoZSBtdXRhdGlvbiBpcyBhbHdheXMgYXBwbGllZFxuICogdG8gdGhpcyBiYXNlIHZhbHVlLCBldmVuIGlmIGRvY3VtZW50IGhhcyBhbHJlYWR5IGJlZW4gdXBkYXRlZC5cbiAqXG4gKiBUaGUgYmFzZSB2YWx1ZSBpcyBhIHNwYXJzZSBvYmplY3QgdGhhdCBjb25zaXN0cyBvZiBvbmx5IHRoZSBkb2N1bWVudFxuICogZmllbGRzIGZvciB3aGljaCB0aGlzIG11dGF0aW9uIGNvbnRhaW5zIGEgbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtYXRpb25cbiAqIChlLmcuIGEgbnVtZXJpYyBpbmNyZW1lbnQpLiBUaGUgcHJvdmlkZWQgdmFsdWUgZ3VhcmFudGVlcyBjb25zaXN0ZW50XG4gKiBiZWhhdmlvciBmb3Igbm9uLWlkZW1wb3RlbnQgdHJhbnNmb3JtcyBhbmQgYWxsb3cgdXMgdG8gcmV0dXJuIHRoZSBzYW1lXG4gKiBsYXRlbmN5LWNvbXBlbnNhdGVkIHZhbHVlIGV2ZW4gaWYgdGhlIGJhY2tlbmQgaGFzIGFscmVhZHkgYXBwbGllZCB0aGVcbiAqIG11dGF0aW9uLiBUaGUgYmFzZSB2YWx1ZSBpcyBudWxsIGZvciBpZGVtcG90ZW50IG11dGF0aW9ucywgYXMgdGhleSBjYW4gYmVcbiAqIHJlLXBsYXllZCBldmVuIGlmIHRoZSBiYWNrZW5kIGhhcyBhbHJlYWR5IGFwcGxpZWQgdGhlbS5cbiAqXG4gKiBAcmV0dXJucyBhIGJhc2UgdmFsdWUgdG8gc3RvcmUgYWxvbmcgd2l0aCB0aGUgbXV0YXRpb24sIG9yIG51bGwgZm9yXG4gKiBpZGVtcG90ZW50IG11dGF0aW9ucy5cbiAqLyBmdW5jdGlvbiBHcyh0LCBlKSB7XG4gICAgbGV0IG4gPSBudWxsO1xuICAgIGZvciAoY29uc3QgcyBvZiB0LmZpZWxkVHJhbnNmb3Jtcykge1xuICAgICAgICBjb25zdCB0ID0gZS5kYXRhLmZpZWxkKHMuZmllbGQpLCBpID0gUHMocy50cmFuc2Zvcm0sIHQgfHwgbnVsbCk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAobnVsbCA9PT0gbiAmJiAobiA9IHVuLmVtcHR5KCkpLCBuLnNldChzLmZpZWxkLCBpKSk7XG4gICAgfVxuICAgIHJldHVybiBuIHx8IG51bGw7XG59XG5cbmZ1bmN0aW9uIFFzKHQsIGUpIHtcbiAgICByZXR1cm4gdC50eXBlID09PSBlLnR5cGUgJiYgKCEhdC5rZXkuaXNFcXVhbChlLmtleSkgJiYgKCEhdC5wcmVjb25kaXRpb24uaXNFcXVhbChlLnByZWNvbmRpdGlvbikgJiYgKCEhZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwID09PSB0ICYmIHZvaWQgMCA9PT0gZSB8fCAhKCF0IHx8ICFlKSAmJiBudCh0LCBlLCAoKHQsIGUpID0+ICRzKHQsIGUpKSk7XG4gICAgfSh0LmZpZWxkVHJhbnNmb3JtcywgZS5maWVsZFRyYW5zZm9ybXMpICYmICgwIC8qIE11dGF0aW9uVHlwZS5TZXQgKi8gPT09IHQudHlwZSA/IHQudmFsdWUuaXNFcXVhbChlLnZhbHVlKSA6IDEgLyogTXV0YXRpb25UeXBlLlBhdGNoICovICE9PSB0LnR5cGUgfHwgdC5kYXRhLmlzRXF1YWwoZS5kYXRhKSAmJiB0LmZpZWxkTWFzay5pc0VxdWFsKGUuZmllbGRNYXNrKSkpKSk7XG59XG5cbi8qKlxuICogQSBtdXRhdGlvbiB0aGF0IGNyZWF0ZXMgb3IgcmVwbGFjZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkgd2l0aCB0aGVcbiAqIG9iamVjdCB2YWx1ZSBjb250ZW50cy5cbiAqLyBjbGFzcyBqcyBleHRlbmRzIExzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnZhbHVlID0gZSwgdGhpcy5wcmVjb25kaXRpb24gPSBuLCB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IHMsIFxuICAgICAgICB0aGlzLnR5cGUgPSAwIC8qIE11dGF0aW9uVHlwZS5TZXQgKi87XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG5jbGFzcyB6cyBleHRlbmRzIExzIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpID0gW10pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLmRhdGEgPSBlLCB0aGlzLmZpZWxkTWFzayA9IG4sIHRoaXMucHJlY29uZGl0aW9uID0gcywgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gaSwgdGhpcy50eXBlID0gMSAvKiBNdXRhdGlvblR5cGUuUGF0Y2ggKi87XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmllbGRNYXNrO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gV3ModCkge1xuICAgIGNvbnN0IGUgPSBuZXcgTWFwO1xuICAgIHJldHVybiB0LmZpZWxkTWFzay5maWVsZHMuZm9yRWFjaCgobiA9PiB7XG4gICAgICAgIGlmICghbi5pc0VtcHR5KCkpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0LmRhdGEuZmllbGQobik7XG4gICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgfVxuICAgIH0pKSwgZTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbGlzdCBvZiBcInRyYW5zZm9ybSByZXN1bHRzXCIgKGEgdHJhbnNmb3JtIHJlc3VsdCBpcyBhIGZpZWxkIHZhbHVlXG4gKiByZXByZXNlbnRpbmcgdGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIHRyYW5zZm9ybSkgZm9yIHVzZSBhZnRlciBhIG11dGF0aW9uXG4gKiBjb250YWluaW5nIHRyYW5zZm9ybXMgaGFzIGJlZW4gYWNrbm93bGVkZ2VkIGJ5IHRoZSBzZXJ2ZXIuXG4gKlxuICogQHBhcmFtIGZpZWxkVHJhbnNmb3JtcyAtIFRoZSBmaWVsZCB0cmFuc2Zvcm1zIHRvIGFwcGx5IHRoZSByZXN1bHQgdG8uXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGN1cnJlbnQgc3RhdGUgb2YgdGhlIGRvY3VtZW50IGFmdGVyIGFwcGx5aW5nIGFsbFxuICogcHJldmlvdXMgbXV0YXRpb25zLlxuICogQHBhcmFtIHNlcnZlclRyYW5zZm9ybVJlc3VsdHMgLSBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgcmVjZWl2ZWQgYnkgdGhlIHNlcnZlci5cbiAqIEByZXR1cm5zIFRoZSB0cmFuc2Zvcm0gcmVzdWx0cyBsaXN0LlxuICovIGZ1bmN0aW9uIEhzKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICBGKHQubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBuLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IHIgPSB0W2ldLCBvID0gci50cmFuc2Zvcm0sIHUgPSBlLmRhdGEuZmllbGQoci5maWVsZCk7XG4gICAgICAgIHMuc2V0KHIuZmllbGQsIFJzKG8sIHUsIG5baV0pKTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIGxpc3Qgb2YgXCJ0cmFuc2Zvcm0gcmVzdWx0c1wiIChhIHRyYW5zZm9ybSByZXN1bHQgaXMgYSBmaWVsZCB2YWx1ZVxuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHQgb2YgYXBwbHlpbmcgYSB0cmFuc2Zvcm0pIGZvciB1c2Ugd2hlbiBhcHBseWluZyBhXG4gKiB0cmFuc2Zvcm0gbG9jYWxseS5cbiAqXG4gKiBAcGFyYW0gZmllbGRUcmFuc2Zvcm1zIC0gVGhlIGZpZWxkIHRyYW5zZm9ybXMgdG8gYXBwbHkgdGhlIHJlc3VsdCB0by5cbiAqIEBwYXJhbSBsb2NhbFdyaXRlVGltZSAtIFRoZSBsb2NhbCB0aW1lIG9mIHRoZSBtdXRhdGlvbiAodXNlZCB0b1xuICogICAgIGdlbmVyYXRlIFNlcnZlclRpbWVzdGFtcFZhbHVlcykuXG4gKiBAcGFyYW0gbXV0YWJsZURvY3VtZW50IC0gVGhlIGRvY3VtZW50IHRvIGFwcGx5IHRyYW5zZm9ybXMgb24uXG4gKiBAcmV0dXJucyBUaGUgdHJhbnNmb3JtIHJlc3VsdHMgbGlzdC5cbiAqLyBmdW5jdGlvbiBKcyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IG5ldyBNYXA7XG4gICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgY29uc3QgdCA9IGkudHJhbnNmb3JtLCByID0gbi5kYXRhLmZpZWxkKGkuZmllbGQpO1xuICAgICAgICBzLnNldChpLmZpZWxkLCB2cyh0LCByLCBlKSk7XG4gICAgfVxuICAgIHJldHVybiBzO1xufVxuXG4vKiogQSBtdXRhdGlvbiB0aGF0IGRlbGV0ZXMgdGhlIGRvY3VtZW50IGF0IHRoZSBnaXZlbiBrZXkuICovIGNsYXNzIFlzIGV4dGVuZHMgTHMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5rZXkgPSB0LCB0aGlzLnByZWNvbmRpdGlvbiA9IGUsIHRoaXMudHlwZSA9IDIgLyogTXV0YXRpb25UeXBlLkRlbGV0ZSAqLyAsIFxuICAgICAgICB0aGlzLmZpZWxkVHJhbnNmb3JtcyA9IFtdO1xuICAgIH1cbiAgICBnZXRGaWVsZE1hc2soKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuY2xhc3MgWHMgZXh0ZW5kcyBMcyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmtleSA9IHQsIHRoaXMucHJlY29uZGl0aW9uID0gZSwgdGhpcy50eXBlID0gMyAvKiBNdXRhdGlvblR5cGUuVmVyaWZ5ICovICwgXG4gICAgICAgIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gW107XG4gICAgfVxuICAgIGdldEZpZWxkTWFzaygpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGJhdGNoIG9mIG11dGF0aW9ucyB0aGF0IHdpbGwgYmUgc2VudCBhcyBvbmUgdW5pdCB0byB0aGUgYmFja2VuZC5cbiAqLyBjbGFzcyBacyB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIGJhdGNoSWQgLSBUaGUgdW5pcXVlIElEIG9mIHRoaXMgbXV0YXRpb24gYmF0Y2guXG4gICAgICogQHBhcmFtIGxvY2FsV3JpdGVUaW1lIC0gVGhlIG9yaWdpbmFsIHdyaXRlIHRpbWUgb2YgdGhpcyBtdXRhdGlvbi5cbiAgICAgKiBAcGFyYW0gYmFzZU11dGF0aW9ucyAtIE11dGF0aW9ucyB0aGF0IGFyZSB1c2VkIHRvIHBvcHVsYXRlIHRoZSBiYXNlXG4gICAgICogdmFsdWVzIHdoZW4gdGhpcyBtdXRhdGlvbiBpcyBhcHBsaWVkIGxvY2FsbHkuIFRoaXMgY2FuIGJlIHVzZWQgdG8gbG9jYWxseVxuICAgICAqIG92ZXJ3cml0ZSB2YWx1ZXMgdGhhdCBhcmUgcGVyc2lzdGVkIGluIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuIEJhc2VcbiAgICAgKiBtdXRhdGlvbnMgYXJlIG5ldmVyIHNlbnQgdG8gdGhlIGJhY2tlbmQuXG4gICAgICogQHBhcmFtIG11dGF0aW9ucyAtIFRoZSB1c2VyLXByb3ZpZGVkIG11dGF0aW9ucyBpbiB0aGlzIG11dGF0aW9uIGJhdGNoLlxuICAgICAqIFVzZXItcHJvdmlkZWQgbXV0YXRpb25zIGFyZSBhcHBsaWVkIGJvdGggbG9jYWxseSBhbmQgcmVtb3RlbHkgb24gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2hJZCA9IHQsIHRoaXMubG9jYWxXcml0ZVRpbWUgPSBlLCB0aGlzLmJhc2VNdXRhdGlvbnMgPSBuLCB0aGlzLm11dGF0aW9ucyA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYWxsIHRoZSBtdXRhdGlvbnMgaW4gdGhpcyBNdXRhdGlvbkJhdGNoIHRvIHRoZSBzcGVjaWZpZWQgZG9jdW1lbnRcbiAgICAgKiB0byBjb21wdXRlIHRoZSBzdGF0ZSBvZiB0aGUgcmVtb3RlIGRvY3VtZW50XG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnQgLSBUaGUgZG9jdW1lbnQgdG8gYXBwbHkgbXV0YXRpb25zIHRvLlxuICAgICAqIEBwYXJhbSBiYXRjaFJlc3VsdCAtIFRoZSByZXN1bHQgb2YgYXBwbHlpbmcgdGhlIE11dGF0aW9uQmF0Y2ggdG8gdGhlXG4gICAgICogYmFja2VuZC5cbiAgICAgKi8gICAgYXBwbHlUb1JlbW90ZURvY3VtZW50KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUubXV0YXRpb25SZXN1bHRzO1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHRoaXMubXV0YXRpb25zLmxlbmd0aDsgZSsrKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gdGhpcy5tdXRhdGlvbnNbZV07XG4gICAgICAgICAgICBpZiAocy5rZXkuaXNFcXVhbCh0LmtleSkpIHtcbiAgICAgICAgICAgICAgICBVcyhzLCB0LCBuW2VdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBvZiBhIGRvY3VtZW50IGdpdmVuIGFsbCB0aGUgbXV0YXRpb25zIGluIHRoaXNcbiAgICAgKiBiYXRjaC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudCAtIFRoZSBkb2N1bWVudCB0byBhcHBseSBtdXRhdGlvbnMgdG8uXG4gICAgICogQHBhcmFtIG11dGF0ZWRGaWVsZHMgLSBGaWVsZHMgdGhhdCBoYXZlIGJlZW4gdXBkYXRlZCBiZWZvcmUgYXBwbHlpbmcgdGhpcyBtdXRhdGlvbiBiYXRjaC5cbiAgICAgKiBAcmV0dXJucyBBIGBGaWVsZE1hc2tgIHJlcHJlc2VudGluZyBhbGwgdGhlIGZpZWxkcyB0aGF0IGFyZSBtdXRhdGVkLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxWaWV3KHQsIGUpIHtcbiAgICAgICAgLy8gRmlyc3QsIGFwcGx5IHRoZSBiYXNlIHN0YXRlLiBUaGlzIGFsbG93cyB1cyB0byBhcHBseSBub24taWRlbXBvdGVudFxuICAgICAgICAvLyB0cmFuc2Zvcm0gYWdhaW5zdCBhIGNvbnNpc3RlbnQgc2V0IG9mIHZhbHVlcy5cbiAgICAgICAgZm9yIChjb25zdCBuIG9mIHRoaXMuYmFzZU11dGF0aW9ucykgbi5rZXkuaXNFcXVhbCh0LmtleSkgJiYgKGUgPSBLcyhuLCB0LCBlLCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIC8vIFNlY29uZCwgYXBwbHkgYWxsIHVzZXItcHJvdmlkZWQgbXV0YXRpb25zLlxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0aGlzLm11dGF0aW9ucykgbi5rZXkuaXNFcXVhbCh0LmtleSkgJiYgKGUgPSBLcyhuLCB0LCBlLCB0aGlzLmxvY2FsV3JpdGVUaW1lKSk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21wdXRlcyB0aGUgbG9jYWwgdmlldyBmb3IgYWxsIHByb3ZpZGVkIGRvY3VtZW50cyBnaXZlbiB0aGUgbXV0YXRpb25zIGluXG4gICAgICogdGhpcyBiYXRjaC4gUmV0dXJucyBhIGBEb2N1bWVudEtleWAgdG8gYE11dGF0aW9uYCBtYXAgd2hpY2ggY2FuIGJlIHVzZWQgdG9cbiAgICAgKiByZXBsYWNlIGFsbCB0aGUgbXV0YXRpb24gYXBwbGljYXRpb25zLlxuICAgICAqLyAgICBhcHBseVRvTG9jYWxEb2N1bWVudFNldCh0LCBlKSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogVGhpcyBpbXBsZW1lbnRhdGlvbiBpcyBPKG5eMikuIElmIHdlIGFwcGx5IHRoZSBtdXRhdGlvbnNcbiAgICAgICAgLy8gZGlyZWN0bHkgKGFzIGRvbmUgaW4gYGFwcGx5VG9Mb2NhbFZpZXcoKWApLCB3ZSBjYW4gcmVkdWNlIHRoZSBjb21wbGV4aXR5XG4gICAgICAgIC8vIHRvIE8obikuXG4gICAgICAgIGNvbnN0IG4gPSBkcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbnMuZm9yRWFjaCgocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdC5nZXQocy5rZXkpLCByID0gaS5vdmVybGF5ZWREb2N1bWVudDtcbiAgICAgICAgICAgIC8vIFRPRE8obXV0YWJsZWRvY3VtZW50cyk6IFRoaXMgbWV0aG9kIHNob3VsZCB0YWtlIGEgTXV0YWJsZURvY3VtZW50TWFwXG4gICAgICAgICAgICAvLyBhbmQgd2Ugc2hvdWxkIHJlbW92ZSB0aGlzIGNhc3QuXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbyA9IHRoaXMuYXBwbHlUb0xvY2FsVmlldyhyLCBpLm11dGF0ZWRGaWVsZHMpO1xuICAgICAgICAgICAgLy8gU2V0IG11dGF0ZWRGaWVsZHMgdG8gbnVsbCBpZiB0aGUgZG9jdW1lbnQgaXMgb25seSBmcm9tIGxvY2FsIG11dGF0aW9ucy5cbiAgICAgICAgICAgIC8vIFRoaXMgY3JlYXRlcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24sIGluc3RlYWQgb2YgdHJ5aW5nIHRvIGNyZWF0ZSBhXG4gICAgICAgICAgICAvLyBwYXRjaCBtdXRhdGlvbiBhcyB0aGUgb3ZlcmxheS5cbiAgICAgICAgICAgICAgICAgICAgICAgIG8gPSBlLmhhcyhzLmtleSkgPyBudWxsIDogbztcbiAgICAgICAgICAgIGNvbnN0IHUgPSBxcyhyLCBvKTtcbiAgICAgICAgICAgIG51bGwgIT09IHUgJiYgbi5zZXQocy5rZXksIHUpLCByLmlzVmFsaWREb2N1bWVudCgpIHx8IHIuY29udmVydFRvTm9Eb2N1bWVudChydC5taW4oKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAga2V5cygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubXV0YXRpb25zLnJlZHVjZSgoKHQsIGUpID0+IHQuYWRkKGUua2V5KSksIGdzKCkpO1xuICAgIH1cbiAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmF0Y2hJZCA9PT0gdC5iYXRjaElkICYmIG50KHRoaXMubXV0YXRpb25zLCB0Lm11dGF0aW9ucywgKCh0LCBlKSA9PiBRcyh0LCBlKSkpICYmIG50KHRoaXMuYmFzZU11dGF0aW9ucywgdC5iYXNlTXV0YXRpb25zLCAoKHQsIGUpID0+IFFzKHQsIGUpKSk7XG4gICAgfVxufVxuXG4vKiogVGhlIHJlc3VsdCBvZiBhcHBseWluZyBhIG11dGF0aW9uIGJhdGNoIHRvIHRoZSBiYWNrZW5kLiAqLyBjbGFzcyB0aSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgXG4gICAgLyoqXG4gICAgICogQSBwcmUtY29tcHV0ZWQgbWFwcGluZyBmcm9tIGVhY2ggbXV0YXRlZCBkb2N1bWVudCB0byB0aGUgcmVzdWx0aW5nXG4gICAgICogdmVyc2lvbi5cbiAgICAgKi9cbiAgICBzKSB7XG4gICAgICAgIHRoaXMuYmF0Y2ggPSB0LCB0aGlzLmNvbW1pdFZlcnNpb24gPSBlLCB0aGlzLm11dGF0aW9uUmVzdWx0cyA9IG4sIHRoaXMuZG9jVmVyc2lvbnMgPSBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IE11dGF0aW9uQmF0Y2hSZXN1bHQgZm9yIHRoZSBnaXZlbiBiYXRjaCBhbmQgcmVzdWx0cy4gVGhlcmVcbiAgICAgKiBtdXN0IGJlIG9uZSByZXN1bHQgZm9yIGVhY2ggbXV0YXRpb24gaW4gdGhlIGJhdGNoLiBUaGlzIHN0YXRpYyBmYWN0b3J5XG4gICAgICogY2FjaGVzIGEgZG9jdW1lbnQ9Jmd0O3ZlcnNpb24gbWFwcGluZyAoZG9jVmVyc2lvbnMpLlxuICAgICAqLyAgICBzdGF0aWMgZnJvbSh0LCBlLCBuKSB7XG4gICAgICAgIEYodC5tdXRhdGlvbnMubGVuZ3RoID09PSBuLmxlbmd0aCk7XG4gICAgICAgIGxldCBzID0gX3M7XG4gICAgICAgIGNvbnN0IGkgPSB0Lm11dGF0aW9ucztcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCBpLmxlbmd0aDsgdCsrKSBzID0gcy5pbnNlcnQoaVt0XS5rZXksIG5bdF0udmVyc2lvbik7XG4gICAgICAgIHJldHVybiBuZXcgdGkodCwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRhdGlvbiBvZiBhbiBvdmVybGF5IGNvbXB1dGVkIGJ5IEZpcmVzdG9yZS5cbiAqXG4gKiBIb2xkcyBpbmZvcm1hdGlvbiBhYm91dCBhIG11dGF0aW9uIGFuZCB0aGUgbGFyZ2VzdCBiYXRjaCBpZCBpbiBGaXJlc3RvcmUgd2hlblxuICogdGhlIG11dGF0aW9uIHdhcyBjcmVhdGVkLlxuICovIGNsYXNzIGVpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMubGFyZ2VzdEJhdGNoSWQgPSB0LCB0aGlzLm11dGF0aW9uID0gZTtcbiAgICB9XG4gICAgZ2V0S2V5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvbi5rZXk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gdCAmJiB0aGlzLm11dGF0aW9uID09PSB0Lm11dGF0aW9uO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgcmV0dXJuIGBPdmVybGF5e1xcbiAgICAgIGxhcmdlc3RCYXRjaElkOiAke3RoaXMubGFyZ2VzdEJhdGNoSWR9LFxcbiAgICAgIG11dGF0aW9uOiAke3RoaXMubXV0YXRpb24udG9TdHJpbmcoKX1cXG4gICAgfWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb25jcmV0ZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQWdncmVnYXRlIHR5cGUuXG4gKi8gY2xhc3Mgbmkge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5hbGlhcyA9IHQsIHRoaXMueXQgPSBlLCB0aGlzLmZpZWxkUGF0aCA9IG47XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBzaSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNvdW50ID0gdCwgdGhpcy51bmNoYW5nZWROYW1lcyA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBFcnJvciBDb2RlcyBkZXNjcmliaW5nIHRoZSBkaWZmZXJlbnQgd2F5cyBHUlBDIGNhbiBmYWlsLiBUaGVzZSBhcmUgY29waWVkXG4gKiBkaXJlY3RseSBmcm9tIEdSUEMncyBzb3VyY2VzIGhlcmU6XG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2dycGMvZ3JwYy9ibG9iL2JjZWVjOTRlYTRmYzVmMDA4NWQ4MTIzNWQ4ZTFjMDY3OThkYzM0MWEvaW5jbHVkZS9ncnBjJTJCJTJCL2ltcGwvY29kZWdlbi9zdGF0dXNfY29kZV9lbnVtLmhcbiAqXG4gKiBJbXBvcnRhbnQhIFRoZSBuYW1lcyBvZiB0aGVzZSBpZGVudGlmaWVycyBtYXR0ZXIgYmVjYXVzZSB0aGUgc3RyaW5nIGZvcm1zXG4gKiBhcmUgdXNlZCBmb3IgcmV2ZXJzZSBsb29rdXBzIGZyb20gdGhlIHdlYmNoYW5uZWwgc3RyZWFtLiBEbyBOT1QgY2hhbmdlIHRoZVxuICogbmFtZXMgb2YgdGhlc2UgaWRlbnRpZmllcnMgb3IgY2hhbmdlIHRoaXMgaW50byBhIGNvbnN0IGVudW0uXG4gKi8gdmFyIGlpLCByaTtcblxuLyoqXG4gKiBEZXRlcm1pbmVzIHdoZXRoZXIgYW4gZXJyb3IgY29kZSByZXByZXNlbnRzIGEgcGVybWFuZW50IGVycm9yIHdoZW4gcmVjZWl2ZWRcbiAqIGluIHJlc3BvbnNlIHRvIGEgbm9uLXdyaXRlIG9wZXJhdGlvbi5cbiAqXG4gKiBTZWUgaXNQZXJtYW5lbnRXcml0ZUVycm9yIGZvciBjbGFzc2lmeWluZyB3cml0ZSBlcnJvcnMuXG4gKi9cbmZ1bmN0aW9uIG9pKHQpIHtcbiAgICBzd2l0Y2ggKHQpIHtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBPKCk7XG5cbiAgICAgIGNhc2UgcS5DQU5DRUxMRUQ6XG4gICAgICBjYXNlIHEuVU5LTk9XTjpcbiAgICAgIGNhc2UgcS5ERUFETElORV9FWENFRURFRDpcbiAgICAgIGNhc2UgcS5SRVNPVVJDRV9FWEhBVVNURUQ6XG4gICAgICBjYXNlIHEuSU5URVJOQUw6XG4gICAgICBjYXNlIHEuVU5BVkFJTEFCTEU6XG4gLy8gVW5hdXRoZW50aWNhdGVkIG1lYW5zIHNvbWV0aGluZyB3ZW50IHdyb25nIHdpdGggb3VyIHRva2VuIGFuZCB3ZSBuZWVkXG4gICAgICAgIC8vIHRvIHJldHJ5IHdpdGggbmV3IGNyZWRlbnRpYWxzIHdoaWNoIHdpbGwgaGFwcGVuIGF1dG9tYXRpY2FsbHkuXG4gICAgICAgICAgICAgIGNhc2UgcS5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgY2FzZSBxLklOVkFMSURfQVJHVU1FTlQ6XG4gICAgICBjYXNlIHEuTk9UX0ZPVU5EOlxuICAgICAgY2FzZSBxLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgY2FzZSBxLlBFUk1JU1NJT05fREVOSUVEOlxuICAgICAgY2FzZSBxLkZBSUxFRF9QUkVDT05ESVRJT046XG4gLy8gQWJvcnRlZCBtaWdodCBiZSByZXRyaWVkIGluIHNvbWUgc2NlbmFyaW9zLCBidXQgdGhhdCBpcyBkZXBlbmRhbnQgb25cbiAgICAgICAgLy8gdGhlIGNvbnRleHQgYW5kIHNob3VsZCBoYW5kbGVkIGluZGl2aWR1YWxseSBieSB0aGUgY2FsbGluZyBjb2RlLlxuICAgICAgICAvLyBTZWUgaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2FwaXMvZGVzaWduL2Vycm9ycy5cbiAgICAgICAgICAgICAgY2FzZSBxLkFCT1JURUQ6XG4gICAgICBjYXNlIHEuT1VUX09GX1JBTkdFOlxuICAgICAgY2FzZSBxLlVOSU1QTEVNRU5URUQ6XG4gICAgICBjYXNlIHEuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIERldGVybWluZXMgd2hldGhlciBhbiBlcnJvciBjb2RlIHJlcHJlc2VudHMgYSBwZXJtYW5lbnQgZXJyb3Igd2hlbiByZWNlaXZlZFxuICogaW4gcmVzcG9uc2UgdG8gYSB3cml0ZSBvcGVyYXRpb24uXG4gKlxuICogV3JpdGUgb3BlcmF0aW9ucyBtdXN0IGJlIGhhbmRsZWQgc3BlY2lhbGx5IGJlY2F1c2UgYXMgb2YgYi8xMTk0Mzc3NjQsIEFCT1JURURcbiAqIGVycm9ycyBvbiB0aGUgd3JpdGUgc3RyZWFtIHNob3VsZCBiZSByZXRyaWVkIHRvbyAoZXZlbiB0aG91Z2ggQUJPUlRFRCBlcnJvcnNcbiAqIGFyZSBub3QgZ2VuZXJhbGx5IHJldHJ5YWJsZSkuXG4gKlxuICogTm90ZSB0aGF0IGR1cmluZyB0aGUgaW5pdGlhbCBoYW5kc2hha2Ugb24gdGhlIHdyaXRlIHN0cmVhbSBhbiBBQk9SVEVEIGVycm9yXG4gKiBzaWduYWxzIHRoYXQgd2Ugc2hvdWxkIGRpc2NhcmQgb3VyIHN0cmVhbSB0b2tlbiAoaS5lLiBpdCBpcyBwZXJtYW5lbnQpLiBUaGlzXG4gKiBtZWFucyBhIGhhbmRzaGFrZSBlcnJvciBzaG91bGQgYmUgY2xhc3NpZmllZCB3aXRoIGlzUGVybWFuZW50RXJyb3IsIGFib3ZlLlxuICovXG4vKipcbiAqIE1hcHMgYW4gZXJyb3IgQ29kZSBmcm9tIEdSUEMgc3RhdHVzIGNvZGUgbnVtYmVyLCBsaWtlIDAsIDEsIG9yIDE0LiBUaGVzZVxuICogYXJlIG5vdCB0aGUgc2FtZSBhcyBIVFRQIHN0YXR1cyBjb2Rlcy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBHUlBDIHN0YXR1cyBjb2RlLiBGYWlscyBpZiB0aGVyZVxuICogICAgIGlzIG5vIG1hdGNoLlxuICovXG5mdW5jdGlvbiB1aSh0KSB7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCkgXG4gICAgLy8gVGhpcyBzaG91bGRuJ3Qgbm9ybWFsbHkgaGFwcGVuLCBidXQgaW4gY2VydGFpbiBlcnJvciBjYXNlcyAobGlrZSB0cnlpbmdcbiAgICAvLyB0byBzZW5kIGludmFsaWQgcHJvdG8gbWVzc2FnZXMpIHdlIG1heSBnZXQgYW4gZXJyb3Igd2l0aCBubyBHUlBDIGNvZGUuXG4gICAgcmV0dXJuIGsoXCJHUlBDIGVycm9yIGhhcyBubyAuY29kZVwiKSwgcS5VTktOT1dOO1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSBpaS5PSzpcbiAgICAgICAgcmV0dXJuIHEuT0s7XG5cbiAgICAgIGNhc2UgaWkuQ0FOQ0VMTEVEOlxuICAgICAgICByZXR1cm4gcS5DQU5DRUxMRUQ7XG5cbiAgICAgIGNhc2UgaWkuVU5LTk9XTjpcbiAgICAgICAgcmV0dXJuIHEuVU5LTk9XTjtcblxuICAgICAgY2FzZSBpaS5ERUFETElORV9FWENFRURFRDpcbiAgICAgICAgcmV0dXJuIHEuREVBRExJTkVfRVhDRUVERUQ7XG5cbiAgICAgIGNhc2UgaWkuUkVTT1VSQ0VfRVhIQVVTVEVEOlxuICAgICAgICByZXR1cm4gcS5SRVNPVVJDRV9FWEhBVVNURUQ7XG5cbiAgICAgIGNhc2UgaWkuSU5URVJOQUw6XG4gICAgICAgIHJldHVybiBxLklOVEVSTkFMO1xuXG4gICAgICBjYXNlIGlpLlVOQVZBSUxBQkxFOlxuICAgICAgICByZXR1cm4gcS5VTkFWQUlMQUJMRTtcblxuICAgICAgY2FzZSBpaS5VTkFVVEhFTlRJQ0FURUQ6XG4gICAgICAgIHJldHVybiBxLlVOQVVUSEVOVElDQVRFRDtcblxuICAgICAgY2FzZSBpaS5JTlZBTElEX0FSR1VNRU5UOlxuICAgICAgICByZXR1cm4gcS5JTlZBTElEX0FSR1VNRU5UO1xuXG4gICAgICBjYXNlIGlpLk5PVF9GT1VORDpcbiAgICAgICAgcmV0dXJuIHEuTk9UX0ZPVU5EO1xuXG4gICAgICBjYXNlIGlpLkFMUkVBRFlfRVhJU1RTOlxuICAgICAgICByZXR1cm4gcS5BTFJFQURZX0VYSVNUUztcblxuICAgICAgY2FzZSBpaS5QRVJNSVNTSU9OX0RFTklFRDpcbiAgICAgICAgcmV0dXJuIHEuUEVSTUlTU0lPTl9ERU5JRUQ7XG5cbiAgICAgIGNhc2UgaWkuRkFJTEVEX1BSRUNPTkRJVElPTjpcbiAgICAgICAgcmV0dXJuIHEuRkFJTEVEX1BSRUNPTkRJVElPTjtcblxuICAgICAgY2FzZSBpaS5BQk9SVEVEOlxuICAgICAgICByZXR1cm4gcS5BQk9SVEVEO1xuXG4gICAgICBjYXNlIGlpLk9VVF9PRl9SQU5HRTpcbiAgICAgICAgcmV0dXJuIHEuT1VUX09GX1JBTkdFO1xuXG4gICAgICBjYXNlIGlpLlVOSU1QTEVNRU5URUQ6XG4gICAgICAgIHJldHVybiBxLlVOSU1QTEVNRU5URUQ7XG5cbiAgICAgIGNhc2UgaWkuREFUQV9MT1NTOlxuICAgICAgICByZXR1cm4gcS5EQVRBX0xPU1M7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBPKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIENvbnZlcnRzIGFuIEhUVFAgcmVzcG9uc2UncyBlcnJvciBzdGF0dXMgdG8gdGhlIGVxdWl2YWxlbnQgZXJyb3IgY29kZS5cbiAqXG4gKiBAcGFyYW0gc3RhdHVzIC0gQW4gSFRUUCBlcnJvciByZXNwb25zZSBzdGF0dXMgKFwiRkFJTEVEX1BSRUNPTkRJVElPTlwiLFxuICogXCJVTktOT1dOXCIsIGV0Yy4pXG4gKiBAcmV0dXJucyBUaGUgZXF1aXZhbGVudCBDb2RlLiBOb24tbWF0Y2hpbmcgcmVzcG9uc2VzIGFyZSBtYXBwZWQgdG9cbiAqICAgICBDb2RlLlVOS05PV04uXG4gKi8gKHJpID0gaWkgfHwgKGlpID0ge30pKVtyaS5PSyA9IDBdID0gXCJPS1wiLCByaVtyaS5DQU5DRUxMRUQgPSAxXSA9IFwiQ0FOQ0VMTEVEXCIsIFxucmlbcmkuVU5LTk9XTiA9IDJdID0gXCJVTktOT1dOXCIsIHJpW3JpLklOVkFMSURfQVJHVU1FTlQgPSAzXSA9IFwiSU5WQUxJRF9BUkdVTUVOVFwiLCBcbnJpW3JpLkRFQURMSU5FX0VYQ0VFREVEID0gNF0gPSBcIkRFQURMSU5FX0VYQ0VFREVEXCIsIHJpW3JpLk5PVF9GT1VORCA9IDVdID0gXCJOT1RfRk9VTkRcIiwgXG5yaVtyaS5BTFJFQURZX0VYSVNUUyA9IDZdID0gXCJBTFJFQURZX0VYSVNUU1wiLCByaVtyaS5QRVJNSVNTSU9OX0RFTklFRCA9IDddID0gXCJQRVJNSVNTSU9OX0RFTklFRFwiLCBcbnJpW3JpLlVOQVVUSEVOVElDQVRFRCA9IDE2XSA9IFwiVU5BVVRIRU5USUNBVEVEXCIsIHJpW3JpLlJFU09VUkNFX0VYSEFVU1RFRCA9IDhdID0gXCJSRVNPVVJDRV9FWEhBVVNURURcIiwgXG5yaVtyaS5GQUlMRURfUFJFQ09ORElUSU9OID0gOV0gPSBcIkZBSUxFRF9QUkVDT05ESVRJT05cIiwgcmlbcmkuQUJPUlRFRCA9IDEwXSA9IFwiQUJPUlRFRFwiLCBcbnJpW3JpLk9VVF9PRl9SQU5HRSA9IDExXSA9IFwiT1VUX09GX1JBTkdFXCIsIHJpW3JpLlVOSU1QTEVNRU5URUQgPSAxMl0gPSBcIlVOSU1QTEVNRU5URURcIiwgXG5yaVtyaS5JTlRFUk5BTCA9IDEzXSA9IFwiSU5URVJOQUxcIiwgcmlbcmkuVU5BVkFJTEFCTEUgPSAxNF0gPSBcIlVOQVZBSUxBQkxFXCIsIHJpW3JpLkRBVEFfTE9TUyA9IDE1XSA9IFwiREFUQV9MT1NTXCI7XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIE1hbmFnZXMgXCJ0ZXN0aW5nIGhvb2tzXCIsIGhvb2tzIGludG8gdGhlIGludGVybmFscyBvZiB0aGUgU0RLIHRvIHZlcmlmeVxuICogaW50ZXJuYWwgc3RhdGUgYW5kIGV2ZW50cyBkdXJpbmcgaW50ZWdyYXRpb24gdGVzdHMuIERvIG5vdCB1c2UgdGhpcyBjbGFzc1xuICogZXhjZXB0IGZvciB0ZXN0aW5nIHB1cnBvc2VzLlxuICpcbiAqIFRoZXJlIGFyZSB0d28gd2F5cyB0byByZXRyaWV2ZSB0aGUgZ2xvYmFsIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzOlxuICogMS4gVGhlIGBpbnN0YW5jZWAgcHJvcGVydHksIHdoaWNoIHJldHVybnMgbnVsbCBpZiB0aGUgZ2xvYmFsIHNpbmdsZXRvblxuICogICAgICBpbnN0YW5jZSBoYXMgbm90IGJlZW4gY3JlYXRlZC4gVXNlIHRoaXMgcHJvcGVydHkgaWYgdGhlIGNhbGxlciBzaG91bGRcbiAqICAgICAgXCJkbyBub3RoaW5nXCIgaWYgdGhlcmUgYXJlIG5vIHRlc3RpbmcgaG9va3MgcmVnaXN0ZXJlZCwgc3VjaCBhcyB3aGVuXG4gKiAgICAgIGRlbGl2ZXJpbmcgYW4gZXZlbnQgdG8gbm90aWZ5IHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICogMi4gVGhlIGBnZXRPckNyZWF0ZUluc3RhbmNlKClgIG1ldGhvZCwgd2hpY2ggY3JlYXRlcyB0aGUgZ2xvYmFsIHNpbmdsZXRvblxuICogICAgICBpbnN0YW5jZSBpZiBpdCBoYXMgbm90IGJlZW4gY3JlYXRlZC4gVXNlIHRoaXMgbWV0aG9kIGlmIHRoZSBpbnN0YW5jZSBpc1xuICogICAgICBuZWVkZWQgdG8sIGZvciBleGFtcGxlLCByZWdpc3RlciBhIGNhbGxiYWNrLlxuICpcbiAqIEBpbnRlcm5hbFxuICovXG5jbGFzcyBjaSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMub25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaENhbGxiYWNrcyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLCBvciBudWxsIGlmIGl0IGhhcyBub3QgYmVlblxuICAgICAqIGluaXRpYWxpemVkLlxuICAgICAqLyAgICBzdGF0aWMgZ2V0IGluc3RhbmNlKCkge1xuICAgICAgICByZXR1cm4gYWk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiB0aGlzIGNsYXNzLCBjcmVhdGluZyBpdCBpZiBpcyBoYXMgbmV2ZXJcbiAgICAgKiBiZWVuIGNyZWF0ZWQgYmVmb3JlLlxuICAgICAqLyAgICBzdGF0aWMgZ2V0T3JDcmVhdGVJbnN0YW5jZSgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgPT09IGFpICYmIChhaSA9IG5ldyBjaSksIGFpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlcnMgYSBjYWxsYmFjayB0byBiZSBub3RpZmllZCB3aGVuIGFuIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2hcbiAgICAgKiBvY2N1cnMgaW4gdGhlIFdhdGNoIGxpc3RlbiBzdHJlYW0uXG4gICAgICpcbiAgICAgKiBUaGUgcmVsYXRpdmUgb3JkZXIgaW4gd2hpY2ggY2FsbGJhY2tzIGFyZSBub3RpZmllZCBpcyB1bnNwZWNpZmllZDsgZG8gbm90XG4gICAgICogcmVseSBvbiBhbnkgcGFydGljdWxhciBvcmRlcmluZy4gSWYgYSBnaXZlbiBjYWxsYmFjayBpcyByZWdpc3RlcmVkIG11bHRpcGxlXG4gICAgICogdGltZXMgdGhlbiBpdCB3aWxsIGJlIG5vdGlmaWVkIG11bHRpcGxlIHRpbWVzLCBvbmNlIHBlciByZWdpc3RyYXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gY2FsbGJhY2sgdGhlIGNhbGxiYWNrIHRvIGludm9rZSB1cG9uIGV4aXN0ZW5jZSBmaWx0ZXIgbWlzbWF0Y2guXG4gICAgICpcbiAgICAgKiBAcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCwgd2hlbiBjYWxsZWQsIHVucmVnaXN0ZXJzIHRoZSBnaXZlbiBjYWxsYmFjazsgb25seVxuICAgICAqIHRoZSBmaXJzdCBpbnZvY2F0aW9uIG9mIHRoZSByZXR1cm5lZCBmdW5jdGlvbiBkb2VzIGFueXRoaW5nOyBhbGwgc3Vic2VxdWVudFxuICAgICAqIGludm9jYXRpb25zIGRvIG5vdGhpbmcuXG4gICAgICovICAgIG9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2godCkge1xuICAgICAgICBjb25zdCBlID0gU3ltYm9sKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3Muc2V0KGUsIHQpLCAoKSA9PiB0aGlzLm9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hDYWxsYmFja3MuZGVsZXRlKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbnZva2VzIGFsbCBjdXJyZW50bHktcmVnaXN0ZXJlZCBgb25FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaGAgY2FsbGJhY2tzLlxuICAgICAqIEBwYXJhbSBpbmZvIEluZm9ybWF0aW9uIGFib3V0IHRoZSBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLlxuICAgICAqLyAgICBub3RpZnlPbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoKHQpIHtcbiAgICAgICAgdGhpcy5vbkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoQ2FsbGJhY2tzLmZvckVhY2goKGUgPT4gZSh0KSkpO1xuICAgIH1cbn1cblxuLyoqIFRoZSBnbG9iYWwgc2luZ2xldG9uIGluc3RhbmNlIG9mIGBUZXN0aW5nSG9va3NgLiAqLyBsZXQgYWkgPSBudWxsO1xuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbnN0YW5jZSBvZiB0aGUgUGxhdGZvcm0ncyAnVGV4dEVuY29kZXInIGltcGxlbWVudGF0aW9uLlxuICovIGZ1bmN0aW9uIGhpKCkge1xuICAgIHJldHVybiBuZXcgVGV4dEVuY29kZXI7XG59XG5cbi8qKlxuICogQW4gaW5zdGFuY2Ugb2YgdGhlIFBsYXRmb3JtJ3MgJ1RleHREZWNvZGVyJyBpbXBsZW1lbnRhdGlvbi5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNvbnN0IGxpID0gbmV3IEludGVnZXIoWyA0Mjk0OTY3Mjk1LCA0Mjk0OTY3Mjk1IF0sIDApO1xuXG4vLyBIYXNoIGEgc3RyaW5nIHVzaW5nIG1kNSBoYXNoaW5nIGFsZ29yaXRobS5cbmZ1bmN0aW9uIGZpKHQpIHtcbiAgICBjb25zdCBlID0gaGkoKS5lbmNvZGUodCksIG4gPSBuZXcgTWQ1O1xuICAgIHJldHVybiBuLnVwZGF0ZShlKSwgbmV3IFVpbnQ4QXJyYXkobi5kaWdlc3QoKSk7XG59XG5cbi8vIEludGVycHJldCB0aGUgMTYgYnl0ZXMgYXJyYXkgYXMgdHdvIDY0LWJpdCB1bnNpZ25lZCBpbnRlZ2VycywgZW5jb2RlZCB1c2luZ1xuLy8gMuKAmXMgY29tcGxlbWVudCB1c2luZyBsaXR0bGUgZW5kaWFuLlxuZnVuY3Rpb24gZGkodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgRGF0YVZpZXcodC5idWZmZXIpLCBuID0gZS5nZXRVaW50MzIoMCwgLyogbGl0dGxlRW5kaWFuPSAqLyAhMCksIHMgPSBlLmdldFVpbnQzMig0LCAvKiBsaXR0bGVFbmRpYW49ICovICEwKSwgaSA9IGUuZ2V0VWludDMyKDgsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApLCByID0gZS5nZXRVaW50MzIoMTIsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITApO1xuICAgIHJldHVybiBbIG5ldyBJbnRlZ2VyKFsgbiwgcyBdLCAwKSwgbmV3IEludGVnZXIoWyBpLCByIF0sIDApIF07XG59XG5cbmNsYXNzIHdpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIGlmICh0aGlzLmJpdG1hcCA9IHQsIHRoaXMucGFkZGluZyA9IGUsIHRoaXMuaGFzaENvdW50ID0gbiwgZSA8IDAgfHwgZSA+PSA4KSB0aHJvdyBuZXcgX2koYEludmFsaWQgcGFkZGluZzogJHtlfWApO1xuICAgICAgICBpZiAobiA8IDApIHRocm93IG5ldyBfaShgSW52YWxpZCBoYXNoIGNvdW50OiAke259YCk7XG4gICAgICAgIGlmICh0Lmxlbmd0aCA+IDAgJiYgMCA9PT0gdGhpcy5oYXNoQ291bnQpIFxuICAgICAgICAvLyBPbmx5IGVtcHR5IGJsb29tIGZpbHRlciBjYW4gaGF2ZSAwIGhhc2ggY291bnQuXG4gICAgICAgIHRocm93IG5ldyBfaShgSW52YWxpZCBoYXNoIGNvdW50OiAke259YCk7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCAmJiAwICE9PSBlKSBcbiAgICAgICAgLy8gRW1wdHkgYmxvb20gZmlsdGVyIHNob3VsZCBoYXZlIDAgcGFkZGluZy5cbiAgICAgICAgdGhyb3cgbmV3IF9pKGBJbnZhbGlkIHBhZGRpbmcgd2hlbiBiaXRtYXAgbGVuZ3RoIGlzIDA6ICR7ZX1gKTtcbiAgICAgICAgdGhpcy5JdCA9IDggKiB0Lmxlbmd0aCAtIGUsIFxuICAgICAgICAvLyBTZXQgdGhlIGJpdCBjb3VudCBpbiBJbnRlZ2VyIHRvIGF2b2lkIHJlcGV0aXRpb24gaW4gbWlnaHRDb250YWluKCkuXG4gICAgICAgIHRoaXMuVHQgPSBJbnRlZ2VyLmZyb21OdW1iZXIodGhpcy5JdCk7XG4gICAgfVxuICAgIC8vIENhbGN1bGF0ZSB0aGUgaXRoIGhhc2ggdmFsdWUgYmFzZWQgb24gdGhlIGhhc2hlZCA2NGJpdCBpbnRlZ2VycyxcbiAgICAvLyBhbmQgY2FsY3VsYXRlIGl0cyBjb3JyZXNwb25kaW5nIGJpdCBpbmRleCBpbiB0aGUgYml0bWFwIHRvIGJlIGNoZWNrZWQuXG4gICAgRXQodCwgZSwgbikge1xuICAgICAgICAvLyBDYWxjdWxhdGUgaGFzaGVkIHZhbHVlIGgoaSkgPSBoMSArIChpICogaDIpLlxuICAgICAgICBsZXQgcyA9IHQuYWRkKGUubXVsdGlwbHkoSW50ZWdlci5mcm9tTnVtYmVyKG4pKSk7XG4gICAgICAgIC8vIFdyYXAgaWYgaGFzaCB2YWx1ZSBvdmVyZmxvdyA2NGJpdC5cbiAgICAgICAgICAgICAgICByZXR1cm4gMSA9PT0gcy5jb21wYXJlKGxpKSAmJiAocyA9IG5ldyBJbnRlZ2VyKFsgcy5nZXRCaXRzKDApLCBzLmdldEJpdHMoMSkgXSwgMCkpLCBcbiAgICAgICAgcy5tb2R1bG8odGhpcy5UdCkudG9OdW1iZXIoKTtcbiAgICB9XG4gICAgLy8gUmV0dXJuIHdoZXRoZXIgdGhlIGJpdCBvbiB0aGUgZ2l2ZW4gaW5kZXggaW4gdGhlIGJpdG1hcCBpcyBzZXQgdG8gMS5cbiAgICBBdCh0KSB7XG4gICAgICAgIHJldHVybiAwICE9ICh0aGlzLmJpdG1hcFtNYXRoLmZsb29yKHQgLyA4KV0gJiAxIDw8IHQgJSA4KTtcbiAgICB9XG4gICAgdnQodCkge1xuICAgICAgICAvLyBFbXB0eSBiaXRtYXAgc2hvdWxkIGFsd2F5cyByZXR1cm4gZmFsc2Ugb24gbWVtYmVyc2hpcCBjaGVjay5cbiAgICAgICAgaWYgKDAgPT09IHRoaXMuSXQpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IGZpKHQpLCBbbiwgc10gPSBkaShlKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHQgPCB0aGlzLmhhc2hDb3VudDsgdCsrKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5FdChuLCBzLCB0KTtcbiAgICAgICAgICAgIGlmICghdGhpcy5BdChlKSkgcmV0dXJuICExO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAhMDtcbiAgICB9XG4gICAgLyoqIENyZWF0ZSBibG9vbSBmaWx0ZXIgZm9yIHRlc3RpbmcgcHVycG9zZXMgb25seS4gKi8gICAgc3RhdGljIGNyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0ICUgOCA9PSAwID8gMCA6IDggLSB0ICUgOCwgaSA9IG5ldyBVaW50OEFycmF5KE1hdGguY2VpbCh0IC8gOCkpLCByID0gbmV3IHdpKGksIHMsIGUpO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHIuaW5zZXJ0KHQpKSksIHI7XG4gICAgfVxuICAgIGluc2VydCh0KSB7XG4gICAgICAgIGlmICgwID09PSB0aGlzLkl0KSByZXR1cm47XG4gICAgICAgIGNvbnN0IGUgPSBmaSh0KSwgW24sIHNdID0gZGkoZSk7XG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgdGhpcy5oYXNoQ291bnQ7IHQrKykge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuRXQobiwgcywgdCk7XG4gICAgICAgICAgICB0aGlzLlJ0KGUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFJ0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IE1hdGguZmxvb3IodCAvIDgpLCBuID0gdCAlIDg7XG4gICAgICAgIHRoaXMuYml0bWFwW2VdIHw9IDEgPDwgbjtcbiAgICB9XG59XG5cbmNsYXNzIF9pIGV4dGVuZHMgRXJyb3Ige1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICBzdXBlciguLi5hcmd1bWVudHMpLCB0aGlzLm5hbWUgPSBcIkJsb29tRmlsdGVyRXJyb3JcIjtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGV2ZW50IGZyb20gdGhlIFJlbW90ZVN0b3JlLiBJdCBpcyBzcGxpdCBpbnRvIHRhcmdldENoYW5nZXMgKGNoYW5nZXMgdG8gdGhlXG4gKiBzdGF0ZSBvciB0aGUgc2V0IG9mIGRvY3VtZW50cyBpbiBvdXIgd2F0Y2hlZCB0YXJnZXRzKSBhbmQgZG9jdW1lbnRVcGRhdGVzXG4gKiAoY2hhbmdlcyB0byB0aGUgYWN0dWFsIGRvY3VtZW50cykuXG4gKi8gY2xhc3MgbWkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBzbmFwc2hvdCB2ZXJzaW9uIHRoaXMgZXZlbnQgYnJpbmdzIHVzIHVwIHRvLCBvciBNSU4gaWYgbm90IHNldC5cbiAgICAgKi9cbiAgICB0LCBcbiAgICAvKipcbiAgICAgKiBBIG1hcCBmcm9tIHRhcmdldCB0byBjaGFuZ2VzIHRvIHRoZSB0YXJnZXQuIFNlZSBUYXJnZXRDaGFuZ2UuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQSBtYXAgb2YgdGFyZ2V0cyB0aGF0IGlzIGtub3duIHRvIGJlIGluY29uc2lzdGVudCwgYW5kIHRoZSBwdXJwb3NlIGZvclxuICAgICAqIHJlLWxpc3RlbmluZy4gTGlzdGVucyBmb3IgdGhlc2UgdGFyZ2V0cyBzaG91bGQgYmUgcmUtZXN0YWJsaXNoZWQgd2l0aG91dFxuICAgICAqIHJlc3VtZSB0b2tlbnMuXG4gICAgICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogQSBzZXQgb2Ygd2hpY2ggZG9jdW1lbnRzIGhhdmUgY2hhbmdlZCBvciBiZWVuIGRlbGV0ZWQsIGFsb25nIHdpdGggdGhlXG4gICAgICogZG9jJ3MgbmV3IHZhbHVlcyAoaWYgbm90IGRlbGV0ZWQpLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIEEgc2V0IG9mIHdoaWNoIGRvY3VtZW50IHVwZGF0ZXMgYXJlIGR1ZSBvbmx5IHRvIGxpbWJvIHJlc29sdXRpb24gdGFyZ2V0cy5cbiAgICAgKi9cbiAgICBpKSB7XG4gICAgICAgIHRoaXMuc25hcHNob3RWZXJzaW9uID0gdCwgdGhpcy50YXJnZXRDaGFuZ2VzID0gZSwgdGhpcy50YXJnZXRNaXNtYXRjaGVzID0gbiwgdGhpcy5kb2N1bWVudFVwZGF0ZXMgPSBzLCBcbiAgICAgICAgdGhpcy5yZXNvbHZlZExpbWJvRG9jdW1lbnRzID0gaTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSEFDSzogVmlld3MgcmVxdWlyZSBSZW1vdGVFdmVudHMgaW4gb3JkZXIgdG8gZGV0ZXJtaW5lIHdoZXRoZXIgdGhlIHZpZXcgaXNcbiAgICAgKiBDVVJSRU5ULCBidXQgc2Vjb25kYXJ5IHRhYnMgZG9uJ3QgcmVjZWl2ZSByZW1vdGUgZXZlbnRzLiBTbyB0aGlzIG1ldGhvZCBpc1xuICAgICAqIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnQgdGhhdCBjYW4gYmUgdXNlZCB0byBhcHBseSBhXG4gICAgICogQ1VSUkVOVCBzdGF0dXMgY2hhbmdlIHRvIGEgVmlldywgZm9yIHF1ZXJpZXMgZXhlY3V0ZWQgaW4gYSBkaWZmZXJlbnQgdGFiLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHlcbiAgICBzdGF0aWMgY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IE1hcDtcbiAgICAgICAgcmV0dXJuIHMuc2V0KHQsIGdpLmNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlLCBuKSksIG5ldyBtaShydC5taW4oKSwgcywgbmV3IHBlKGV0KSwgY3MoKSwgZ3MoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgVGFyZ2V0Q2hhbmdlIHNwZWNpZmllcyB0aGUgc2V0IG9mIGNoYW5nZXMgZm9yIGEgc3BlY2lmaWMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAqIGEgUmVtb3RlRXZlbnQuIFRoZXNlIGNoYW5nZXMgdHJhY2sgd2hpY2ggZG9jdW1lbnRzIGFyZSBhZGRlZCwgbW9kaWZpZWQgb3JcbiAqIHJlbW92ZWQsIGFzIHdlbGwgYXMgdGhlIHRhcmdldCdzIHJlc3VtZSB0b2tlbiBhbmQgd2hldGhlciB0aGUgdGFyZ2V0IGlzXG4gKiBtYXJrZWQgQ1VSUkVOVC5cbiAqIFRoZSBhY3R1YWwgY2hhbmdlcyAqdG8qIGRvY3VtZW50cyBhcmUgbm90IHBhcnQgb2YgdGhlIFRhcmdldENoYW5nZSBzaW5jZVxuICogZG9jdW1lbnRzIG1heSBiZSBwYXJ0IG9mIG11bHRpcGxlIHRhcmdldHMuXG4gKi8gY2xhc3MgZ2kge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIEFuIG9wYXF1ZSwgc2VydmVyLWFzc2lnbmVkIHRva2VuIHRoYXQgYWxsb3dzIHdhdGNoaW5nIGEgcXVlcnkgdG8gYmUgcmVzdW1lZFxuICAgICAqIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdCBtYXRjaGVzIHRoZVxuICAgICAqIHF1ZXJ5LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpbiB0aW1lIGZyb20gd2hpY2hcbiAgICAgKiB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSBcImN1cnJlbnRcIiAoc3luY2VkKSBzdGF0dXMgb2YgdGhpcyB0YXJnZXQuIE5vdGUgdGhhdCBcImN1cnJlbnRcIlxuICAgICAqIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbCB0aGF0IGltcGxpZXMgdGhhdCBhIHRhcmdldCBpc1xuICAgICAqIGJvdGggdXAtdG8tZGF0ZSBhbmQgY29uc2lzdGVudCB3aXRoIHRoZSByZXN0IG9mIHRoZSB3YXRjaCBzdHJlYW0uXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHNldCBvZiBkb2N1bWVudHMgdGhhdCB3ZXJlIG5ld2x5IGFzc2lnbmVkIHRvIHRoaXMgdGFyZ2V0IGFzIHBhcnQgb2ZcbiAgICAgKiB0aGlzIHJlbW90ZSBldmVudC5cbiAgICAgKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IHdlcmUgYWxyZWFkeSBhc3NpZ25lZCB0byB0aGlzIHRhcmdldCBidXQgcmVjZWl2ZWRcbiAgICAgKiBhbiB1cGRhdGUgZHVyaW5nIHRoaXMgcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgZG9jdW1lbnRzIHRoYXQgd2VyZSByZW1vdmVkIGZyb20gdGhpcyB0YXJnZXQgYXMgcGFydCBvZiB0aGlzXG4gICAgICogcmVtb3RlIGV2ZW50LlxuICAgICAqL1xuICAgIGkpIHtcbiAgICAgICAgdGhpcy5yZXN1bWVUb2tlbiA9IHQsIHRoaXMuY3VycmVudCA9IGUsIHRoaXMuYWRkZWREb2N1bWVudHMgPSBuLCB0aGlzLm1vZGlmaWVkRG9jdW1lbnRzID0gcywgXG4gICAgICAgIHRoaXMucmVtb3ZlZERvY3VtZW50cyA9IGk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gY3JlYXRlIGEgc3ludGhlc2l6ZWQgVGFyZ2V0Q2hhbmdlcyB0aGF0IGNhbiBiZSB1c2VkIHRvXG4gICAgICogYXBwbHkgYSBDVVJSRU5UIHN0YXR1cyBjaGFuZ2UgdG8gYSBWaWV3IChmb3IgcXVlcmllcyBleGVjdXRlZCBpbiBhIGRpZmZlcmVudFxuICAgICAqIHRhYikgb3IgZm9yIG5ldyBxdWVyaWVzICh0byByYWlzZSBzbmFwc2hvdHMgd2l0aCBjb3JyZWN0IENVUlJFTlQgc3RhdHVzKS5cbiAgICAgKi8gICAgc3RhdGljIGNyZWF0ZVN5bnRoZXNpemVkVGFyZ2V0Q2hhbmdlRm9yQ3VycmVudENoYW5nZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgZ2kobiwgZSwgZ3MoKSwgZ3MoKSwgZ3MoKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXByZXNlbnRzIGEgY2hhbmdlZCBkb2N1bWVudCBhbmQgYSBsaXN0IG9mIHRhcmdldCBpZHMgdG8gd2hpY2ggdGhpcyBjaGFuZ2VcbiAqIGFwcGxpZXMuXG4gKlxuICogSWYgZG9jdW1lbnQgaGFzIGJlZW4gZGVsZXRlZCBOb0RvY3VtZW50IHdpbGwgYmUgcHJvdmlkZWQuXG4gKi8gY2xhc3MgeWkge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgbmV3IGRvY3VtZW50IGFwcGxpZXMgdG8gYWxsIG9mIHRoZXNlIHRhcmdldHMuICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBuZXcgZG9jdW1lbnQgaXMgcmVtb3ZlZCBmcm9tIGFsbCBvZiB0aGVzZSB0YXJnZXRzLiAqL1xuICAgIGUsIFxuICAgIC8qKiBUaGUga2V5IG9mIHRoZSBkb2N1bWVudCBmb3IgdGhpcyBjaGFuZ2UuICovXG4gICAgbiwgXG4gICAgLyoqXG4gICAgICogVGhlIG5ldyBkb2N1bWVudCBvciBOb0RvY3VtZW50IGlmIGl0IHdhcyBkZWxldGVkLiBJcyBudWxsIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IHdlbnQgb3V0IG9mIHZpZXcgd2l0aG91dCB0aGUgc2VydmVyIHNlbmRpbmcgYSBuZXcgZG9jdW1lbnQuXG4gICAgICovXG4gICAgcykge1xuICAgICAgICB0aGlzLlB0ID0gdCwgdGhpcy5yZW1vdmVkVGFyZ2V0SWRzID0gZSwgdGhpcy5rZXkgPSBuLCB0aGlzLmJ0ID0gcztcbiAgICB9XG59XG5cbmNsYXNzIHBpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudGFyZ2V0SWQgPSB0LCB0aGlzLlZ0ID0gZTtcbiAgICB9XG59XG5cbmNsYXNzIElpIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogV2hhdCBraW5kIG9mIGNoYW5nZSBvY2N1cnJlZCB0byB0aGUgd2F0Y2ggdGFyZ2V0LiAqL1xuICAgIHQsIFxuICAgIC8qKiBUaGUgdGFyZ2V0IElEcyB0aGF0IHdlcmUgYWRkZWQvcmVtb3ZlZC9zZXQuICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogQW4gb3BhcXVlLCBzZXJ2ZXItYXNzaWduZWQgdG9rZW4gdGhhdCBhbGxvd3Mgd2F0Y2hpbmcgYSB0YXJnZXQgdG8gYmVcbiAgICAgKiByZXN1bWVkIGFmdGVyIGRpc2Nvbm5lY3Rpbmcgd2l0aG91dCByZXRyYW5zbWl0dGluZyBhbGwgdGhlIGRhdGEgdGhhdFxuICAgICAqIG1hdGNoZXMgdGhlIHRhcmdldC4gVGhlIHJlc3VtZSB0b2tlbiBlc3NlbnRpYWxseSBpZGVudGlmaWVzIGEgcG9pbnQgaW5cbiAgICAgKiB0aW1lIGZyb20gd2hpY2ggdGhlIHNlcnZlciBzaG91bGQgcmVzdW1lIHNlbmRpbmcgcmVzdWx0cy5cbiAgICAgKi9cbiAgICBuID0gVmUuRU1QVFlfQllURV9TVFJJTkdcbiAgICAvKiogQW4gUlBDIGVycm9yIGluZGljYXRpbmcgd2h5IHRoZSB3YXRjaCBmYWlsZWQuICovICwgcyA9IG51bGwpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHQsIHRoaXMudGFyZ2V0SWRzID0gZSwgdGhpcy5yZXN1bWVUb2tlbiA9IG4sIHRoaXMuY2F1c2UgPSBzO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyB0aGUgaW50ZXJuYWwgc3RhdGUgb2YgYSBXYXRjaCB0YXJnZXQuICovIGNsYXNzIFRpIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgKGFkZHMgb3IgcmVtb3ZlcykgdGhhdCB3ZSBhcmUgd2FpdGluZyBvbi5cbiAgICAgICAgICogV2Ugb25seSBjb25zaWRlciB0YXJnZXRzIGFjdGl2ZSB0aGF0IGhhdmUgbm8gcGVuZGluZyByZXNwb25zZXMuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlN0ID0gMCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnQgY2hhbmdlcyBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuXG4gICAgICAgICAqXG4gICAgICAgICAqIFRoZXNlIGNoYW5nZXMgYXJlIGNvbnRpbnVvdXNseSB1cGRhdGVkIGFzIHdlIHJlY2VpdmUgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgICAgICogYWx3YXlzIHJlZmxlY3QgdGhlIGN1cnJlbnQgc2V0IG9mIGNoYW5nZXMgYWdhaW5zdCB0aGUgbGFzdCBpc3N1ZWQgc25hcHNob3QuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkR0ID0gdmkoKSwgXG4gICAgICAgIC8qKiBTZWUgcHVibGljIGdldHRlcnMgZm9yIGV4cGxhbmF0aW9ucyBvZiB0aGVzZSBmaWVsZHMuICovXG4gICAgICAgIHRoaXMuQ3QgPSBWZS5FTVBUWV9CWVRFX1NUUklORywgdGhpcy54dCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhpcyB0YXJnZXQgc3RhdGUgc2hvdWxkIGJlIGluY2x1ZGVkIGluIHRoZSBuZXh0IHNuYXBzaG90LiBXZVxuICAgICAgICAgKiBpbml0aWFsaXplIHRvIHRydWUgc28gdGhhdCBuZXdseS1hZGRlZCB0YXJnZXRzIGFyZSBpbmNsdWRlZCBpbiB0aGUgbmV4dFxuICAgICAgICAgKiBSZW1vdGVFdmVudC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuTnQgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV2hldGhlciB0aGlzIHRhcmdldCBoYXMgYmVlbiBtYXJrZWQgJ2N1cnJlbnQnLlxuICAgICAqXG4gICAgICogJ0N1cnJlbnQnIGhhcyBzcGVjaWFsIG1lYW5pbmcgaW4gdGhlIFJQQyBwcm90b2NvbDogSXQgaW1wbGllcyB0aGF0IHRoZVxuICAgICAqIFdhdGNoIGJhY2tlbmQgaGFzIHNlbnQgdXMgYWxsIGNoYW5nZXMgdXAgdG8gdGhlIHBvaW50IGF0IHdoaWNoIHRoZSB0YXJnZXRcbiAgICAgKiB3YXMgYWRkZWQgYW5kIHRoYXQgdGhlIHRhcmdldCBpcyBjb25zaXN0ZW50IHdpdGggdGhlIHJlc3Qgb2YgdGhlIHdhdGNoXG4gICAgICogc3RyZWFtLlxuICAgICAqLyAgICBnZXQgY3VycmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHQ7XG4gICAgfVxuICAgIC8qKiBUaGUgbGFzdCByZXN1bWUgdG9rZW4gc2VudCB0byB1cyBmb3IgdGhpcyB0YXJnZXQuICovICAgIGdldCByZXN1bWVUb2tlbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ3Q7XG4gICAgfVxuICAgIC8qKiBXaGV0aGVyIHRoaXMgdGFyZ2V0IGhhcyBwZW5kaW5nIHRhcmdldCBhZGRzIG9yIHRhcmdldCByZW1vdmVzLiAqLyAgICBnZXQga3QoKSB7XG4gICAgICAgIHJldHVybiAwICE9PSB0aGlzLlN0O1xuICAgIH1cbiAgICAvKiogV2hldGhlciB3ZSBoYXZlIG1vZGlmaWVkIGFueSBzdGF0ZSB0aGF0IHNob3VsZCB0cmlnZ2VyIGEgc25hcHNob3QuICovICAgIGdldCBNdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuTnQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgdGhlIHJlc3VtZSB0b2tlbiB0byB0aGUgVGFyZ2V0Q2hhbmdlLCBidXQgb25seSB3aGVuIGl0IGhhcyBhIG5ld1xuICAgICAqIHZhbHVlLiBFbXB0eSByZXN1bWVUb2tlbnMgYXJlIGRpc2NhcmRlZC5cbiAgICAgKi8gICAgJHQodCkge1xuICAgICAgICB0LmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKHRoaXMuTnQgPSAhMCwgdGhpcy5DdCA9IHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgdGFyZ2V0IGNoYW5nZSBmcm9tIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqXG4gICAgICogVG8gcmVzZXQgdGhlIGRvY3VtZW50IGNoYW5nZXMgYWZ0ZXIgcmFpc2luZyB0aGlzIHNuYXBzaG90LCBjYWxsXG4gICAgICogYGNsZWFyUGVuZGluZ0NoYW5nZXMoKWAuXG4gICAgICovICAgIE90KCkge1xuICAgICAgICBsZXQgdCA9IGdzKCksIGUgPSBncygpLCBuID0gZ3MoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuRHQuZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAoaSkge1xuICAgICAgICAgICAgICBjYXNlIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgdCA9IHQuYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICBlID0gZS5hZGQocyk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyA6XG4gICAgICAgICAgICAgICAgbiA9IG4uYWRkKHMpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgTygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIG5ldyBnaSh0aGlzLkN0LCB0aGlzLnh0LCB0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBkb2N1bWVudCBjaGFuZ2VzIGFuZCBzZXRzIGBoYXNQZW5kaW5nQ2hhbmdlc2AgdG8gZmFsc2UuXG4gICAgICovICAgIEZ0KCkge1xuICAgICAgICB0aGlzLk50ID0gITEsIHRoaXMuRHQgPSB2aSgpO1xuICAgIH1cbiAgICBCdCh0LCBlKSB7XG4gICAgICAgIHRoaXMuTnQgPSAhMCwgdGhpcy5EdCA9IHRoaXMuRHQuaW5zZXJ0KHQsIGUpO1xuICAgIH1cbiAgICBMdCh0KSB7XG4gICAgICAgIHRoaXMuTnQgPSAhMCwgdGhpcy5EdCA9IHRoaXMuRHQucmVtb3ZlKHQpO1xuICAgIH1cbiAgICBxdCgpIHtcbiAgICAgICAgdGhpcy5TdCArPSAxO1xuICAgIH1cbiAgICBVdCgpIHtcbiAgICAgICAgdGhpcy5TdCAtPSAxO1xuICAgIH1cbiAgICBLdCgpIHtcbiAgICAgICAgdGhpcy5OdCA9ICEwLCB0aGlzLnh0ID0gITA7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIHRvIGFjY3VtdWxhdGUgd2F0Y2ggY2hhbmdlcyBpbnRvIGEgUmVtb3RlRXZlbnQuXG4gKi9cbmNsYXNzIEVpIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuR3QgPSB0LCBcbiAgICAgICAgLyoqIFRoZSBpbnRlcm5hbCBzdGF0ZSBvZiBhbGwgdHJhY2tlZCB0YXJnZXRzLiAqL1xuICAgICAgICB0aGlzLlF0ID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKiBLZWVwcyB0cmFjayBvZiB0aGUgZG9jdW1lbnRzIHRvIHVwZGF0ZSBzaW5jZSB0aGUgbGFzdCByYWlzZWQgc25hcHNob3QuICovXG4gICAgICAgIHRoaXMuanQgPSBjcygpLCBcbiAgICAgICAgLyoqIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXlzIHRvIHRoZWlyIHNldCBvZiB0YXJnZXQgSURzLiAqL1xuICAgICAgICB0aGlzLnp0ID0gQWkoKSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcCBvZiB0YXJnZXRzIHdpdGggZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLiBUaGVzZSB0YXJnZXRzIGFyZVxuICAgICAgICAgKiBrbm93biB0byBiZSBpbmNvbnNpc3RlbnQgYW5kIHRoZWlyIGxpc3RlbnMgbmVlZHMgdG8gYmUgcmUtZXN0YWJsaXNoZWQgYnlcbiAgICAgICAgICogUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLld0ID0gbmV3IHBlKGV0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBEb2N1bWVudFdhdGNoQ2hhbmdlIHRvIHRoZSBjdXJyZW50IHNldCBvZiBjaGFuZ2VzLlxuICAgICAqLyAgICBIdCh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LlB0KSB0LmJ0ICYmIHQuYnQuaXNGb3VuZERvY3VtZW50KCkgPyB0aGlzLkp0KGUsIHQuYnQpIDogdGhpcy5ZdChlLCB0LmtleSwgdC5idCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LnJlbW92ZWRUYXJnZXRJZHMpIHRoaXMuWXQoZSwgdC5rZXksIHQuYnQpO1xuICAgIH1cbiAgICAvKiogUHJvY2Vzc2VzIGFuZCBhZGRzIHRoZSBXYXRjaFRhcmdldENoYW5nZSB0byB0aGUgY3VycmVudCBzZXQgb2YgY2hhbmdlcy4gKi8gICAgWHQodCkge1xuICAgICAgICB0aGlzLmZvckVhY2hUYXJnZXQodCwgKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHRoaXMuWnQoZSk7XG4gICAgICAgICAgICBzd2l0Y2ggKHQuc3RhdGUpIHtcbiAgICAgICAgICAgICAgY2FzZSAwIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuTm9DaGFuZ2UgKi8gOlxuICAgICAgICAgICAgICAgIHRoaXMudGUoZSkgJiYgbi4kdCh0LnJlc3VtZVRva2VuKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDEgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5BZGRlZCAqLyA6XG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlV0KCksIG4ua3QgfHwgXG4gICAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBhIGZyZXNobHkgYWRkZWQgdGFyZ2V0LCBzbyB3ZSBuZWVkIHRvIHJlc2V0IGFueSBzdGF0ZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgd2UgaGFkIHByZXZpb3VzbHkuIFRoaXMgY2FuIGhhcHBlbiBlLmcuIHdoZW4gcmVtb3ZlIGFuZCBhZGRcbiAgICAgICAgICAgICAgICAvLyBiYWNrIGEgdGFyZ2V0IGZvciBleGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoZXMuXG4gICAgICAgICAgICAgICAgbi5GdCgpLCBuLiR0KHQucmVzdW1lVG9rZW4pO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiByZW1vdmVkIHRhcmdldHMgdG8gd2UgY2FuIHBvc3QtZmlsdGVyIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJlbW92ZSBhbnkgdGFyZ2V0IGNoYW5nZXMuXG4gICAgICAgICAgICAgICAgLy8gV2UgbmVlZCB0byBkZWNyZW1lbnQgdGhlIG51bWJlciBvZiBwZW5kaW5nIGFja3MgbmVlZGVkIGZyb20gd2F0Y2hcbiAgICAgICAgICAgICAgICAvLyBmb3IgdGhpcyB0YXJnZXRJZC5cbiAgICAgICAgICAgICAgICBuLlV0KCksIG4ua3QgfHwgdGhpcy5yZW1vdmVUYXJnZXQoZSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgY2FzZSAzIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQ3VycmVudCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy50ZShlKSAmJiAobi5LdCgpLCBuLiR0KHQucmVzdW1lVG9rZW4pKTtcbiAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICBjYXNlIDQgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5SZXNldCAqLyA6XG4gICAgICAgICAgICAgICAgdGhpcy50ZShlKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgdGhlIHRhcmdldCBhbmQgc3ludGhlc2l6ZXMgcmVtb3ZlcyBmb3IgYWxsIGV4aXN0aW5nXG4gICAgICAgICAgICAgICAgLy8gZG9jdW1lbnRzLiBUaGUgYmFja2VuZCB3aWxsIHJlLWFkZCBhbnkgZG9jdW1lbnRzIHRoYXQgc3RpbGxcbiAgICAgICAgICAgICAgICAvLyBtYXRjaCB0aGUgdGFyZ2V0IGJlZm9yZSBpdCBzZW5kcyB0aGUgbmV4dCBnbG9iYWwgc25hcHNob3QuXG4gICAgICAgICAgICAgICAgdGhpcy5lZShlKSwgbi4kdCh0LnJlc3VtZVRva2VuKSk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICBPKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhbGwgdGFyZ2V0SWRzIHRoYXQgdGhlIHdhdGNoIGNoYW5nZSBhcHBsaWVzIHRvOiBlaXRoZXIgdGhlXG4gICAgICogdGFyZ2V0SWRzIGV4cGxpY2l0bHkgbGlzdGVkIGluIHRoZSBjaGFuZ2Ugb3IgdGhlIHRhcmdldElkcyBvZiBhbGwgY3VycmVudGx5XG4gICAgICogYWN0aXZlIHRhcmdldHMuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICB0LnRhcmdldElkcy5sZW5ndGggPiAwID8gdC50YXJnZXRJZHMuZm9yRWFjaChlKSA6IHRoaXMuUXQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIHRoaXMudGUobikgJiYgZShuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBIYW5kbGVzIGV4aXN0ZW5jZSBmaWx0ZXJzIGFuZCBzeW50aGVzaXplcyBkZWxldGVzIGZvciBmaWx0ZXIgbWlzbWF0Y2hlcy5cbiAgICAgKiBUYXJnZXRzIHRoYXQgYXJlIGludmFsaWRhdGVkIGJ5IGZpbHRlciBtaXNtYXRjaGVzIGFyZSBhZGRlZCB0b1xuICAgICAqIGBwZW5kaW5nVGFyZ2V0UmVzZXRzYC5cbiAgICAgKi8gICAgbmUodCkge1xuICAgICAgICB2YXIgZTtcbiAgICAgICAgY29uc3QgbiA9IHQudGFyZ2V0SWQsIHMgPSB0LlZ0LmNvdW50LCBpID0gdGhpcy5zZShuKTtcbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBpLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChGbihyKSkgaWYgKDAgPT09IHMpIHtcbiAgICAgICAgICAgICAgICAvLyBUaGUgZXhpc3RlbmNlIGZpbHRlciB0b2xkIHVzIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdC4gV2UgZGVkdWNlXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB0aGlzIGRvY3VtZW50IGRvZXMgbm90IGV4aXN0IGFuZCBhcHBseSBhIGRlbGV0ZWQgZG9jdW1lbnQgdG9cbiAgICAgICAgICAgICAgICAvLyBvdXIgdXBkYXRlcy4gV2l0aG91dCBhcHBseWluZyB0aGlzIGRlbGV0ZWQgZG9jdW1lbnQgdGhlcmUgbWlnaHQgYmVcbiAgICAgICAgICAgICAgICAvLyBhbm90aGVyIHF1ZXJ5IHRoYXQgd2lsbCByYWlzZSB0aGlzIGRvY3VtZW50IGFzIHBhcnQgb2YgYSBzbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIHVudGlsIGl0IGlzIHJlc29sdmVkLCBlc3NlbnRpYWxseSBleHBvc2luZyBpbmNvbnNpc3RlbmN5IGJldHdlZW5cbiAgICAgICAgICAgICAgICAvLyBxdWVyaWVzLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgaHQoci5wYXRoKTtcbiAgICAgICAgICAgICAgICB0aGlzLll0KG4sIHQsIGFuLm5ld05vRG9jdW1lbnQodCwgcnQubWluKCkpKTtcbiAgICAgICAgICAgIH0gZWxzZSBGKDEgPT09IHMpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCBpID0gdGhpcy5pZShuKTtcbiAgICAgICAgICAgICAgICAvLyBFeGlzdGVuY2UgZmlsdGVyIG1pc21hdGNoLiBNYXJrIHRoZSBkb2N1bWVudHMgYXMgYmVpbmcgaW4gbGltYm8sIGFuZFxuICAgICAgICAgICAgICAgIC8vIHJhaXNlIGEgc25hcHNob3Qgd2l0aCBgaXNGcm9tQ2FjaGU6dHJ1ZWAuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpICE9PSBzKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEFwcGx5IGJsb29tIGZpbHRlciB0byBpZGVudGlmeSBhbmQgbWFyayByZW1vdmVkIGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMucmUodCwgaSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICgwIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU3VjY2VzcyAqLyAhPT0gcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgYmxvb20gZmlsdGVyIGFwcGxpY2F0aW9uIGZhaWxzLCB3ZSByZXNldCB0aGUgbWFwcGluZyBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRyaWdnZXIgcmUtcnVuIG9mIHRoZSBxdWVyeS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZWUobik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gMiAvKiBCbG9vbUZpbHRlckFwcGxpY2F0aW9uU3RhdHVzLkZhbHNlUG9zaXRpdmUgKi8gPT09IHMgPyBcIlRhcmdldFB1cnBvc2VFeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tXCIgLyogVGFyZ2V0UHVycG9zZS5FeGlzdGVuY2VGaWx0ZXJNaXNtYXRjaEJsb29tICovIDogXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovO1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5XdCA9IHRoaXMuV3QuaW5zZXJ0KG4sIHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG51bGwgPT09IChlID0gY2kuaW5zdGFuY2UpIHx8IHZvaWQgMCA9PT0gZSB8fCBlLm5vdGlmeU9uRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2goZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHMsIGksIHIsIG8sIHUsIGM7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxvY2FsQ2FjaGVDb3VudDogZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleGlzdGVuY2VGaWx0ZXJDb3VudDogbi5jb3VudFxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgaCA9IG4udW5jaGFuZ2VkTmFtZXM7XG4gICAgICAgICAgICAgICAgICAgICAgICBoICYmIChhLmJsb29tRmlsdGVyID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFwcGxpZWQ6IDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovID09PSB0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhhc2hDb3VudDogbnVsbCAhPT0gKHMgPSBudWxsID09IGggPyB2b2lkIDAgOiBoLmhhc2hDb3VudCkgJiYgdm9pZCAwICE9PSBzID8gcyA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYml0bWFwTGVuZ3RoOiBudWxsICE9PSAobyA9IG51bGwgPT09IChyID0gbnVsbCA9PT0gKGkgPSBudWxsID09IGggPyB2b2lkIDAgOiBoLmJpdHMpIHx8IHZvaWQgMCA9PT0gaSA/IHZvaWQgMCA6IGkuYml0bWFwKSB8fCB2b2lkIDAgPT09IHIgPyB2b2lkIDAgOiByLmxlbmd0aCkgJiYgdm9pZCAwICE9PSBvID8gbyA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogbnVsbCAhPT0gKGMgPSBudWxsID09PSAodSA9IG51bGwgPT0gaCA/IHZvaWQgMCA6IGguYml0cykgfHwgdm9pZCAwID09PSB1ID8gdm9pZCAwIDogdS5wYWRkaW5nKSAmJiB2b2lkIDAgIT09IGMgPyBjIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyAocywgaSwgdC5WdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBBcHBseSBibG9vbSBmaWx0ZXIgdG8gcmVtb3ZlIHRoZSBkZWxldGVkIGRvY3VtZW50cywgYW5kIHJldHVybiB0aGVcbiAgICAgKiBhcHBsaWNhdGlvbiBzdGF0dXMuXG4gICAgICovICAgIHJlKHQsIGUpIHtcbiAgICAgICAgY29uc3Qge3VuY2hhbmdlZE5hbWVzOiBuLCBjb3VudDogc30gPSB0LlZ0O1xuICAgICAgICBpZiAoIW4gfHwgIW4uYml0cykgcmV0dXJuIDEgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovO1xuICAgICAgICBjb25zdCB7Yml0czoge2JpdG1hcDogaSA9IFwiXCIsIHBhZGRpbmc6IHIgPSAwfSwgaGFzaENvdW50OiBvID0gMH0gPSBuO1xuICAgICAgICBsZXQgdSwgYztcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIHUgPSB4ZShpKS50b1VpbnQ4QXJyYXkoKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBQZSkgcmV0dXJuIE0oXCJEZWNvZGluZyB0aGUgYmFzZTY0IGJsb29tIGZpbHRlciBpbiBleGlzdGVuY2UgZmlsdGVyIGZhaWxlZCAoXCIgKyB0Lm1lc3NhZ2UgKyBcIik7IGlnbm9yaW5nIHRoZSBibG9vbSBmaWx0ZXIgYW5kIGZhbGxpbmcgYmFjayB0byBmdWxsIHJlLXF1ZXJ5LlwiKSwgXG4gICAgICAgICAgICAxIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLztcbiAgICAgICAgICAgIHRocm93IHQ7XG4gICAgICAgIH1cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIEJsb29tRmlsdGVyIHRocm93cyBlcnJvciBpZiB0aGUgaW5wdXRzIGFyZSBpbnZhbGlkLlxuICAgICAgICAgICAgYyA9IG5ldyB3aSh1LCByLCBvKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgcmV0dXJuIE0odCBpbnN0YW5jZW9mIF9pID8gXCJCbG9vbUZpbHRlciBlcnJvcjogXCIgOiBcIkFwcGx5aW5nIGJsb29tIGZpbHRlciBmYWlsZWQ6IFwiLCB0KSwgXG4gICAgICAgICAgICAxIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuU2tpcHBlZCAqLztcbiAgICAgICAgfVxuICAgICAgICBpZiAoMCA9PT0gYy5JdCkgcmV0dXJuIDEgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5Ta2lwcGVkICovO1xuICAgICAgICByZXR1cm4gcyAhPT0gZSAtIHRoaXMub2UodC50YXJnZXRJZCwgYykgPyAyIC8qIEJsb29tRmlsdGVyQXBwbGljYXRpb25TdGF0dXMuRmFsc2VQb3NpdGl2ZSAqLyA6IDAgLyogQmxvb21GaWx0ZXJBcHBsaWNhdGlvblN0YXR1cy5TdWNjZXNzICovO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaWx0ZXIgb3V0IHJlbW92ZWQgZG9jdW1lbnRzIGJhc2VkIG9uIGJsb29tIGZpbHRlciBtZW1iZXJzaGlwIHJlc3VsdCBhbmRcbiAgICAgKiByZXR1cm4gbnVtYmVyIG9mIGRvY3VtZW50cyByZW1vdmVkLlxuICAgICAqLyAgICBvZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkd0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCk7XG4gICAgICAgIGxldCBzID0gMDtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgobiA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gdGhpcy5HdC51ZSgpLCByID0gYHByb2plY3RzLyR7aS5wcm9qZWN0SWR9L2RhdGFiYXNlcy8ke2kuZGF0YWJhc2V9L2RvY3VtZW50cy8ke24ucGF0aC5jYW5vbmljYWxTdHJpbmcoKX1gO1xuICAgICAgICAgICAgZS52dChyKSB8fCAodGhpcy5ZdCh0LCBuLCAvKnVwZGF0ZWREb2N1bWVudD0qLyBudWxsKSwgcysrKTtcbiAgICAgICAgfSkpLCBzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGUgY3VycmVudGx5IGFjY3VtdWxhdGVkIHN0YXRlIGludG8gYSByZW1vdGUgZXZlbnQgYXQgdGhlXG4gICAgICogcHJvdmlkZWQgc25hcHNob3QgdmVyc2lvbi4gUmVzZXRzIHRoZSBhY2N1bXVsYXRlZCBjaGFuZ2VzIGJlZm9yZSByZXR1cm5pbmcuXG4gICAgICovICAgIGNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyBNYXA7XG4gICAgICAgIHRoaXMuUXQuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnNlKHMpO1xuICAgICAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgICAgICAgICBpZiAobi5jdXJyZW50ICYmIEZuKGkudGFyZ2V0KSkge1xuICAgICAgICAgICAgICAgICAgICAvLyBEb2N1bWVudCBxdWVyaWVzIGZvciBkb2N1bWVudCB0aGF0IGRvbid0IGV4aXN0IGNhbiBwcm9kdWNlIGFuIGVtcHR5XG4gICAgICAgICAgICAgICAgICAgIC8vIHJlc3VsdCBzZXQuIFRvIHVwZGF0ZSBvdXIgbG9jYWwgY2FjaGUsIHdlIHN5bnRoZXNpemUgYSBkb2N1bWVudFxuICAgICAgICAgICAgICAgICAgICAvLyBkZWxldGUgaWYgd2UgaGF2ZSBub3QgcHJldmlvdXNseSByZWNlaXZlZCB0aGUgZG9jdW1lbnQuIFRoaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVzb2x2ZXMgdGhlIGxpbWJvIHN0YXRlIG9mIHRoZSBkb2N1bWVudCwgcmVtb3ZpbmcgaXQgZnJvbVxuICAgICAgICAgICAgICAgICAgICAvLyBsaW1ib0RvY3VtZW50UmVmcy5cbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZGVhbGx5IHdlIHdvdWxkIGhhdmUgYW4gZXhwbGljaXQgbG9va3VwIHRhcmdldFxuICAgICAgICAgICAgICAgICAgICAvLyBpbnN0ZWFkIHJlc3VsdGluZyBpbiBhbiBleHBsaWNpdCBkZWxldGUgbWVzc2FnZSBhbmQgd2UgY291bGRcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoaXMgc3BlY2lhbCBsb2dpYy5cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBodChpLnRhcmdldC5wYXRoKTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gdGhpcy5qdC5nZXQoZSkgfHwgdGhpcy5hZShzLCBlKSB8fCB0aGlzLll0KHMsIGUsIGFuLm5ld05vRG9jdW1lbnQoZSwgdCkpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuLk10ICYmIChlLnNldChzLCBuLk90KCkpLCBuLkZ0KCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSk7XG4gICAgICAgIGxldCBuID0gZ3MoKTtcbiAgICAgICAgLy8gV2UgZXh0cmFjdCB0aGUgc2V0IG9mIGxpbWJvLW9ubHkgZG9jdW1lbnQgdXBkYXRlcyBhcyB0aGUgR0MgbG9naWNcbiAgICAgICAgLy8gc3BlY2lhbC1jYXNlcyBkb2N1bWVudHMgdGhhdCBkbyBub3QgYXBwZWFyIGluIHRoZSB0YXJnZXQgY2FjaGUuXG4gICAgICAgIFxuICAgICAgICAvLyBUT0RPKGdzb2x0aXMpOiBFeHBhbmQgb24gdGhpcyBjb21tZW50IG9uY2UgR0MgaXMgYXZhaWxhYmxlIGluIHRoZSBKU1xuICAgICAgICAvLyBjbGllbnQuXG4gICAgICAgICAgICAgICAgdGhpcy56dC5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgICAgIGUuZm9yRWFjaFdoaWxlKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdGhpcy5zZSh0KTtcbiAgICAgICAgICAgICAgICByZXR1cm4gIWUgfHwgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gPT09IGUucHVycG9zZSB8fCAocyA9ICExLCBcbiAgICAgICAgICAgICAgICAhMSk7XG4gICAgICAgICAgICB9KSksIHMgJiYgKG4gPSBuLmFkZCh0KSk7XG4gICAgICAgIH0pKSwgdGhpcy5qdC5mb3JFYWNoKCgoZSwgbikgPT4gbi5zZXRSZWFkVGltZSh0KSkpO1xuICAgICAgICBjb25zdCBzID0gbmV3IG1pKHQsIGUsIHRoaXMuV3QsIHRoaXMuanQsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5qdCA9IGNzKCksIHRoaXMuenQgPSBBaSgpLCB0aGlzLld0ID0gbmV3IHBlKGV0KSwgcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogQWRkcyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgdG8gdGhlIGludGVybmFsIGxpc3Qgb2YgZG9jdW1lbnQgdXBkYXRlcyBhbmRcbiAgICAgKiBpdHMgZG9jdW1lbnQga2V5IHRvIHRoZSBnaXZlbiB0YXJnZXQncyBtYXBwaW5nLlxuICAgICAqL1xuICAgIC8vIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gICAgSnQodCwgZSkge1xuICAgICAgICBpZiAoIXRoaXMudGUodCkpIHJldHVybjtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuYWUodCwgZS5rZXkpID8gMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovO1xuICAgICAgICB0aGlzLlp0KHQpLkJ0KGUua2V5LCBuKSwgdGhpcy5qdCA9IHRoaXMuanQuaW5zZXJ0KGUua2V5LCBlKSwgdGhpcy56dCA9IHRoaXMuenQuaW5zZXJ0KGUua2V5LCB0aGlzLmhlKGUua2V5KS5hZGQodCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZW1vdmVzIHRoZSBwcm92aWRlZCBkb2N1bWVudCBmcm9tIHRoZSB0YXJnZXQgbWFwcGluZy4gSWYgdGhlXG4gICAgICogZG9jdW1lbnQgbm8gbG9uZ2VyIG1hdGNoZXMgdGhlIHRhcmdldCwgYnV0IHRoZSBkb2N1bWVudCdzIHN0YXRlIGlzIHN0aWxsXG4gICAgICoga25vd24gKGUuZy4gd2Uga25vdyB0aGF0IHRoZSBkb2N1bWVudCB3YXMgZGVsZXRlZCBvciB3ZSByZWNlaXZlZCB0aGUgY2hhbmdlXG4gICAgICogdGhhdCBjYXVzZWQgdGhlIGZpbHRlciBtaXNtYXRjaCksIHRoZSBuZXcgZG9jdW1lbnQgY2FuIGJlIHByb3ZpZGVkXG4gICAgICogdG8gdXBkYXRlIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUuXG4gICAgICovXG4gICAgLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbiAgICBZdCh0LCBlLCBuKSB7XG4gICAgICAgIGlmICghdGhpcy50ZSh0KSkgcmV0dXJuO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5adCh0KTtcbiAgICAgICAgdGhpcy5hZSh0LCBlKSA/IHMuQnQoZSwgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8pIDogXG4gICAgICAgIC8vIFRoZSBkb2N1bWVudCBtYXkgaGF2ZSBlbnRlcmVkIGFuZCBsZWZ0IHRoZSB0YXJnZXQgYmVmb3JlIHdlIHJhaXNlZCBhXG4gICAgICAgIC8vIHNuYXBzaG90LCBzbyB3ZSBjYW4ganVzdCBpZ25vcmUgdGhlIGNoYW5nZS5cbiAgICAgICAgcy5MdChlKSwgdGhpcy56dCA9IHRoaXMuenQuaW5zZXJ0KGUsIHRoaXMuaGUoZSkuZGVsZXRlKHQpKSwgbiAmJiAodGhpcy5qdCA9IHRoaXMuanQuaW5zZXJ0KGUsIG4pKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0KHQpIHtcbiAgICAgICAgdGhpcy5RdC5kZWxldGUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgY291bnQgb2YgZG9jdW1lbnRzIGluIHRoZSB0YXJnZXQuIFRoaXMgaW5jbHVkZXMgYm90aFxuICAgICAqIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgdGhlIExvY2FsU3RvcmUgY29uc2lkZXJzIHRvIGJlIHBhcnQgb2YgdGhlXG4gICAgICogdGFyZ2V0IGFzIHdlbGwgYXMgYW55IGFjY3VtdWxhdGVkIGNoYW5nZXMuXG4gICAgICovICAgIGllKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuWnQodCkuT3QoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuR3QuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5zaXplICsgZS5hZGRlZERvY3VtZW50cy5zaXplIC0gZS5yZW1vdmVkRG9jdW1lbnRzLnNpemU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEluY3JlbWVudCB0aGUgbnVtYmVyIG9mIGFja3MgbmVlZGVkIGZyb20gd2F0Y2ggYmVmb3JlIHdlIGNhbiBjb25zaWRlciB0aGVcbiAgICAgKiBzZXJ2ZXIgdG8gYmUgJ2luLXN5bmMnIHdpdGggdGhlIGNsaWVudCdzIGFjdGl2ZSB0YXJnZXRzLlxuICAgICAqLyAgICBxdCh0KSB7XG4gICAgICAgIHRoaXMuWnQodCkucXQoKTtcbiAgICB9XG4gICAgWnQodCkge1xuICAgICAgICBsZXQgZSA9IHRoaXMuUXQuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSB8fCAoZSA9IG5ldyBUaSwgdGhpcy5RdC5zZXQodCwgZSkpLCBlO1xuICAgIH1cbiAgICBoZSh0KSB7XG4gICAgICAgIGxldCBlID0gdGhpcy56dC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3IEVlKGV0KSwgdGhpcy56dCA9IHRoaXMuenQuaW5zZXJ0KHQsIGUpKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgdXNlciBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0IChieSBjYWxsaW5nXG4gICAgICogYGdldFRhcmdldERhdGFGb3JUYXJnZXQoKWApIGFuZCB0aGF0IHdlIGFyZSBub3Qgd2FpdGluZyBmb3IgcGVuZGluZyBBRERzXG4gICAgICogZnJvbSB3YXRjaC5cbiAgICAgKi8gICAgdGUodCkge1xuICAgICAgICBjb25zdCBlID0gbnVsbCAhPT0gdGhpcy5zZSh0KTtcbiAgICAgICAgcmV0dXJuIGUgfHwgTihcIldhdGNoQ2hhbmdlQWdncmVnYXRvclwiLCBcIkRldGVjdGVkIGluYWN0aXZlIHRhcmdldFwiLCB0KSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgVGFyZ2V0RGF0YSBmb3IgYW4gYWN0aXZlIHRhcmdldCAoaS5lLiBhIHRhcmdldCB0aGF0IHRoZSB1c2VyXG4gICAgICogaXMgc3RpbGwgaW50ZXJlc3RlZCBpbiB0aGF0IGhhcyBubyBvdXRzdGFuZGluZyB0YXJnZXQgY2hhbmdlIHJlcXVlc3RzKS5cbiAgICAgKi8gICAgc2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5RdC5nZXQodCk7XG4gICAgICAgIHJldHVybiBlICYmIGUua3QgPyBudWxsIDogdGhpcy5HdC5sZSh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBzdGF0ZSBvZiBhIFdhdGNoIHRhcmdldCB0byBpdHMgaW5pdGlhbCBzdGF0ZSAoZS5nLiBzZXRzXG4gICAgICogJ2N1cnJlbnQnIHRvIGZhbHNlLCBjbGVhcnMgdGhlIHJlc3VtZSB0b2tlbiBhbmQgcmVtb3ZlcyBpdHMgdGFyZ2V0IG1hcHBpbmdcbiAgICAgKiBmcm9tIGFsbCBkb2N1bWVudHMpLlxuICAgICAqLyAgICBlZSh0KSB7XG4gICAgICAgIHRoaXMuUXQuc2V0KHQsIG5ldyBUaSk7XG4gICAgICAgIHRoaXMuR3QuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCh0KS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHRoaXMuWXQodCwgZSwgLyp1cGRhdGVkRG9jdW1lbnQ9Ki8gbnVsbCk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBMb2NhbFN0b3JlIGNvbnNpZGVycyB0aGUgZG9jdW1lbnQgdG8gYmUgcGFydCBvZiB0aGVcbiAgICAgKiBzcGVjaWZpZWQgdGFyZ2V0LlxuICAgICAqLyAgICBhZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkd0LmdldFJlbW90ZUtleXNGb3JUYXJnZXQodCkuaGFzKGUpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQWkoKSB7XG4gICAgcmV0dXJuIG5ldyBwZShodC5jb21wYXJhdG9yKTtcbn1cblxuZnVuY3Rpb24gdmkoKSB7XG4gICAgcmV0dXJuIG5ldyBwZShodC5jb21wYXJhdG9yKTtcbn1cblxuY29uc3QgUmkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIGFzYzogXCJBU0NFTkRJTkdcIixcbiAgICAgICAgZGVzYzogXCJERVNDRU5ESU5HXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKSwgUGkgPSAoKCkgPT4ge1xuICAgIGNvbnN0IHQgPSB7XG4gICAgICAgIFwiPFwiOiBcIkxFU1NfVEhBTlwiLFxuICAgICAgICBcIjw9XCI6IFwiTEVTU19USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPlwiOiBcIkdSRUFURVJfVEhBTlwiLFxuICAgICAgICBcIj49XCI6IFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCIsXG4gICAgICAgIFwiPT1cIjogXCJFUVVBTFwiLFxuICAgICAgICBcIiE9XCI6IFwiTk9UX0VRVUFMXCIsXG4gICAgICAgIFwiYXJyYXktY29udGFpbnNcIjogXCJBUlJBWV9DT05UQUlOU1wiLFxuICAgICAgICBpbjogXCJJTlwiLFxuICAgICAgICBcIm5vdC1pblwiOiBcIk5PVF9JTlwiLFxuICAgICAgICBcImFycmF5LWNvbnRhaW5zLWFueVwiOiBcIkFSUkFZX0NPTlRBSU5TX0FOWVwiXG4gICAgfTtcbiAgICByZXR1cm4gdDtcbn0pKCksIGJpID0gKCgpID0+IHtcbiAgICBjb25zdCB0ID0ge1xuICAgICAgICBhbmQ6IFwiQU5EXCIsXG4gICAgICAgIG9yOiBcIk9SXCJcbiAgICB9O1xuICAgIHJldHVybiB0O1xufSkoKTtcblxuLyoqXG4gKiBUaGlzIGNsYXNzIGdlbmVyYXRlcyBKc29uT2JqZWN0IHZhbHVlcyBmb3IgdGhlIERhdGFzdG9yZSBBUEkgc3VpdGFibGUgZm9yXG4gKiBzZW5kaW5nIHRvIGVpdGhlciBHUlBDIHN0dWIgbWV0aG9kcyBvciB2aWEgdGhlIEpTT04vSFRUUCBSRVNUIEFQSS5cbiAqXG4gKiBUaGUgc2VyaWFsaXplciBzdXBwb3J0cyBib3RoIFByb3RvYnVmLmpzIGFuZCBQcm90bzMgSlNPTiBmb3JtYXRzLiBCeVxuICogc2V0dGluZyBgdXNlUHJvdG8zSnNvbmAgdG8gdHJ1ZSwgdGhlIHNlcmlhbGl6ZXIgd2lsbCB1c2UgdGhlIFByb3RvMyBKU09OXG4gKiBmb3JtYXQuXG4gKlxuICogRm9yIGEgZGVzY3JpcHRpb24gb2YgdGhlIFByb3RvMyBKU09OIGZvcm1hdCBjaGVja1xuICogaHR0cHM6Ly9kZXZlbG9wZXJzLmdvb2dsZS5jb20vcHJvdG9jb2wtYnVmZmVycy9kb2NzL3Byb3RvMyNqc29uXG4gKlxuICogVE9ETyhrbGltdCk6IFdlIGNhbiByZW1vdmUgdGhlIGRhdGFiYXNlSWQgYXJndW1lbnQgaWYgd2Uga2VlcCB0aGUgZnVsbFxuICogcmVzb3VyY2UgbmFtZSBpbiBkb2N1bWVudHMuXG4gKi9cbmNsYXNzIFZpIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuZGF0YWJhc2VJZCA9IHQsIHRoaXMudXNlUHJvdG8zSnNvbiA9IGU7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBudW1iZXIgKG9yIG51bGwpIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50b1xuICogYSBnb29nbGUucHJvdG9idWYuSW50MzJWYWx1ZSBwcm90by5cbiAqIERPIE5PVCBVU0UgVEhJUyBGT1IgQU5ZVEhJTkcgRUxTRS5cbiAqIFRoaXMgbWV0aG9kIGNoZWF0cy4gSXQncyB0eXBlZCBhcyByZXR1cm5pbmcgXCJudW1iZXJcIiBiZWNhdXNlIHRoYXQncyB3aGF0XG4gKiBvdXIgZ2VuZXJhdGVkIHByb3RvIGludGVyZmFjZXMgc2F5IEludDMyVmFsdWUgbXVzdCBiZS4gQnV0IEdSUEMgYWN0dWFsbHlcbiAqIGV4cGVjdHMgYSB7IHZhbHVlOiA8bnVtYmVyPiB9IHN0cnVjdC5cbiAqL1xuZnVuY3Rpb24gU2kodCwgZSkge1xuICAgIHJldHVybiB0LnVzZVByb3RvM0pzb24gfHwgRnQoZSkgPyBlIDoge1xuICAgICAgICB2YWx1ZTogZVxuICAgIH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIG51bWJlciAob3IgbnVsbCkgZnJvbSBhIGdvb2dsZS5wcm90b2J1Zi5JbnQzMlZhbHVlIHByb3RvLlxuICovXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYSBEYXRlIHRoYXQncyBhcHByb3ByaWF0ZSB0byBwdXQgaW50byBhIHByb3RvLlxuICovXG5mdW5jdGlvbiBEaSh0LCBlKSB7XG4gICAgaWYgKHQudXNlUHJvdG8zSnNvbikge1xuICAgICAgICByZXR1cm4gYCR7bmV3IERhdGUoMWUzICogZS5zZWNvbmRzKS50b0lTT1N0cmluZygpLnJlcGxhY2UoL1xcLlxcZCovLCBcIlwiKS5yZXBsYWNlKFwiWlwiLCBcIlwiKX0uJHsoXCIwMDAwMDAwMDBcIiArIGUubmFub3NlY29uZHMpLnNsaWNlKC05KX1aYDtcbiAgICB9XG4gICAgcmV0dXJuIHtcbiAgICAgICAgc2Vjb25kczogXCJcIiArIGUuc2Vjb25kcyxcbiAgICAgICAgbmFub3M6IGUubmFub3NlY29uZHNcbiAgICB9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSB2YWx1ZSBmb3IgYnl0ZXMgdGhhdCdzIGFwcHJvcHJpYXRlIHRvIHB1dCBpbiBhIHByb3RvLlxuICpcbiAqIFZpc2libGUgZm9yIHRlc3RpbmcuXG4gKi9cbmZ1bmN0aW9uIENpKHQsIGUpIHtcbiAgICByZXR1cm4gdC51c2VQcm90bzNKc29uID8gZS50b0Jhc2U2NCgpIDogZS50b1VpbnQ4QXJyYXkoKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgQnl0ZVN0cmluZyBiYXNlZCBvbiB0aGUgcHJvdG8gc3RyaW5nIHZhbHVlLlxuICovIGZ1bmN0aW9uIHhpKHQsIGUpIHtcbiAgICByZXR1cm4gRGkodCwgZS50b1RpbWVzdGFtcCgpKTtcbn1cblxuZnVuY3Rpb24gTmkodCkge1xuICAgIHJldHVybiBGKCEhdCksIHJ0LmZyb21UaW1lc3RhbXAoZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gRGUodCk7XG4gICAgICAgIHJldHVybiBuZXcgaXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbiAgICB9KHQpKTtcbn1cblxuZnVuY3Rpb24ga2kodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgdXQoWyBcInByb2plY3RzXCIsIHQucHJvamVjdElkLCBcImRhdGFiYXNlc1wiLCB0LmRhdGFiYXNlIF0pO1xuICAgIH0odCkuY2hpbGQoXCJkb2N1bWVudHNcIikuY2hpbGQoZSkuY2Fub25pY2FsU3RyaW5nKCk7XG59XG5cbmZ1bmN0aW9uIE1pKHQpIHtcbiAgICBjb25zdCBlID0gdXQuZnJvbVN0cmluZyh0KTtcbiAgICByZXR1cm4gRih1cihlKSksIGU7XG59XG5cbmZ1bmN0aW9uICRpKHQsIGUpIHtcbiAgICByZXR1cm4ga2kodC5kYXRhYmFzZUlkLCBlLnBhdGgpO1xufVxuXG5mdW5jdGlvbiBPaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IE1pKGUpO1xuICAgIGlmIChuLmdldCgxKSAhPT0gdC5kYXRhYmFzZUlkLnByb2plY3RJZCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBwcm9qZWN0OiBcIiArIG4uZ2V0KDEpICsgXCIgdnMgXCIgKyB0LmRhdGFiYXNlSWQucHJvamVjdElkKTtcbiAgICBpZiAobi5nZXQoMykgIT09IHQuZGF0YWJhc2VJZC5kYXRhYmFzZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlRyaWVkIHRvIGRlc2VyaWFsaXplIGtleSBmcm9tIGRpZmZlcmVudCBkYXRhYmFzZTogXCIgKyBuLmdldCgzKSArIFwiIHZzIFwiICsgdC5kYXRhYmFzZUlkLmRhdGFiYXNlKTtcbiAgICByZXR1cm4gbmV3IGh0KHFpKG4pKTtcbn1cblxuZnVuY3Rpb24gRmkodCwgZSkge1xuICAgIHJldHVybiBraSh0LmRhdGFiYXNlSWQsIGUpO1xufVxuXG5mdW5jdGlvbiBCaSh0KSB7XG4gICAgY29uc3QgZSA9IE1pKHQpO1xuICAgIC8vIEluIHYxYmV0YTEgcXVlcmllcyBmb3IgY29sbGVjdGlvbnMgYXQgdGhlIHJvb3QgZGlkIG5vdCBoYXZlIGEgdHJhaWxpbmdcbiAgICAvLyBcIi9kb2N1bWVudHNcIi4gSW4gdjEgYWxsIHJlc291cmNlIHBhdGhzIGNvbnRhaW4gXCIvZG9jdW1lbnRzXCIuIFByZXNlcnZlIHRoZVxuICAgIC8vIGFiaWxpdHkgdG8gcmVhZCB0aGUgdjFiZXRhMSBmb3JtIGZvciBjb21wYXRpYmlsaXR5IHdpdGggcXVlcmllcyBwZXJzaXN0ZWRcbiAgICAvLyBpbiB0aGUgbG9jYWwgdGFyZ2V0IGNhY2hlLlxuICAgICAgICByZXR1cm4gNCA9PT0gZS5sZW5ndGggPyB1dC5lbXB0eVBhdGgoKSA6IHFpKGUpO1xufVxuXG5mdW5jdGlvbiBMaSh0KSB7XG4gICAgcmV0dXJuIG5ldyB1dChbIFwicHJvamVjdHNcIiwgdC5kYXRhYmFzZUlkLnByb2plY3RJZCwgXCJkYXRhYmFzZXNcIiwgdC5kYXRhYmFzZUlkLmRhdGFiYXNlIF0pLmNhbm9uaWNhbFN0cmluZygpO1xufVxuXG5mdW5jdGlvbiBxaSh0KSB7XG4gICAgcmV0dXJuIEYodC5sZW5ndGggPiA0ICYmIFwiZG9jdW1lbnRzXCIgPT09IHQuZ2V0KDQpKSwgdC5wb3BGaXJzdCg1KTtcbn1cblxuLyoqIENyZWF0ZXMgYSBEb2N1bWVudCBwcm90byBmcm9tIGtleSBhbmQgZmllbGRzIChidXQgbm8gY3JlYXRlL3VwZGF0ZSB0aW1lKSAqLyBmdW5jdGlvbiBVaSh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgbmFtZTogJGkodCwgZSksXG4gICAgICAgIGZpZWxkczogbi52YWx1ZS5tYXBWYWx1ZS5maWVsZHNcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBLaSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IE9pKHQsIGUubmFtZSksIGkgPSBOaShlLnVwZGF0ZVRpbWUpLCByID0gZS5jcmVhdGVUaW1lID8gTmkoZS5jcmVhdGVUaW1lKSA6IHJ0Lm1pbigpLCBvID0gbmV3IHVuKHtcbiAgICAgICAgbWFwVmFsdWU6IHtcbiAgICAgICAgICAgIGZpZWxkczogZS5maWVsZHNcbiAgICAgICAgfVxuICAgIH0pLCB1ID0gYW4ubmV3Rm91bmREb2N1bWVudChzLCBpLCByLCBvKTtcbiAgICByZXR1cm4gbiAmJiB1LnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpLCBuID8gdS5zZXRIYXNDb21taXR0ZWRNdXRhdGlvbnMoKSA6IHU7XG59XG5cbmZ1bmN0aW9uIEdpKHQsIGUpIHtcbiAgICByZXR1cm4gXCJmb3VuZFwiIGluIGUgPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIEYoISFlLmZvdW5kKSwgZS5mb3VuZC5uYW1lLCBlLmZvdW5kLnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IG4gPSBPaSh0LCBlLmZvdW5kLm5hbWUpLCBzID0gTmkoZS5mb3VuZC51cGRhdGVUaW1lKSwgaSA9IGUuZm91bmQuY3JlYXRlVGltZSA/IE5pKGUuZm91bmQuY3JlYXRlVGltZSkgOiBydC5taW4oKSwgciA9IG5ldyB1bih7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogZS5mb3VuZC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBhbi5uZXdGb3VuZERvY3VtZW50KG4sIHMsIGksIHIpO1xuICAgIH0odCwgZSkgOiBcIm1pc3NpbmdcIiBpbiBlID8gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBGKCEhZS5taXNzaW5nKSwgRighIWUucmVhZFRpbWUpO1xuICAgICAgICBjb25zdCBuID0gT2kodCwgZS5taXNzaW5nKSwgcyA9IE5pKGUucmVhZFRpbWUpO1xuICAgICAgICByZXR1cm4gYW4ubmV3Tm9Eb2N1bWVudChuLCBzKTtcbiAgICB9KHQsIGUpIDogTygpO1xufVxuXG5mdW5jdGlvbiBRaSh0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgaWYgKFwidGFyZ2V0Q2hhbmdlXCIgaW4gZSkge1xuICAgICAgICBlLnRhcmdldENoYW5nZTtcbiAgICAgICAgLy8gcHJvdG8zIGRlZmF1bHQgdmFsdWUgaXMgdW5zZXQgaW4gSlNPTiAodW5kZWZpbmVkKSwgc28gdXNlICdOT19DSEFOR0UnXG4gICAgICAgIC8vIGlmIHVuc2V0XG4gICAgICAgIGNvbnN0IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gXCJOT19DSEFOR0VcIiA9PT0gdCA/IDAgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5Ob0NoYW5nZSAqLyA6IFwiQUREXCIgPT09IHQgPyAxIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuQWRkZWQgKi8gOiBcIlJFTU9WRVwiID09PSB0ID8gMiAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlbW92ZWQgKi8gOiBcIkNVUlJFTlRcIiA9PT0gdCA/IDMgLyogV2F0Y2hUYXJnZXRDaGFuZ2VTdGF0ZS5DdXJyZW50ICovIDogXCJSRVNFVFwiID09PSB0ID8gNCAvKiBXYXRjaFRhcmdldENoYW5nZVN0YXRlLlJlc2V0ICovIDogTygpO1xuICAgICAgICB9KGUudGFyZ2V0Q2hhbmdlLnRhcmdldENoYW5nZVR5cGUgfHwgXCJOT19DSEFOR0VcIiksIGkgPSBlLnRhcmdldENoYW5nZS50YXJnZXRJZHMgfHwgW10sIHIgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gdC51c2VQcm90bzNKc29uID8gKEYodm9pZCAwID09PSBlIHx8IFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpLCBWZS5mcm9tQmFzZTY0U3RyaW5nKGUgfHwgXCJcIikpIDogKEYodm9pZCAwID09PSBlIHx8IGUgaW5zdGFuY2VvZiBVaW50OEFycmF5KSwgXG4gICAgICAgICAgICBWZS5mcm9tVWludDhBcnJheShlIHx8IG5ldyBVaW50OEFycmF5KSk7XG4gICAgICAgIH0odCwgZS50YXJnZXRDaGFuZ2UucmVzdW1lVG9rZW4pLCBvID0gZS50YXJnZXRDaGFuZ2UuY2F1c2UsIHUgPSBvICYmIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB2b2lkIDAgPT09IHQuY29kZSA/IHEuVU5LTk9XTiA6IHVpKHQuY29kZSk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFUoZSwgdC5tZXNzYWdlIHx8IFwiXCIpO1xuICAgICAgICB9KG8pO1xuICAgICAgICBuID0gbmV3IElpKHMsIGksIHIsIHUgfHwgbnVsbCk7XG4gICAgfSBlbHNlIGlmIChcImRvY3VtZW50Q2hhbmdlXCIgaW4gZSkge1xuICAgICAgICBlLmRvY3VtZW50Q2hhbmdlO1xuICAgICAgICBjb25zdCBzID0gZS5kb2N1bWVudENoYW5nZTtcbiAgICAgICAgcy5kb2N1bWVudCwgcy5kb2N1bWVudC5uYW1lLCBzLmRvY3VtZW50LnVwZGF0ZVRpbWU7XG4gICAgICAgIGNvbnN0IGkgPSBPaSh0LCBzLmRvY3VtZW50Lm5hbWUpLCByID0gTmkocy5kb2N1bWVudC51cGRhdGVUaW1lKSwgbyA9IHMuZG9jdW1lbnQuY3JlYXRlVGltZSA/IE5pKHMuZG9jdW1lbnQuY3JlYXRlVGltZSkgOiBydC5taW4oKSwgdSA9IG5ldyB1bih7XG4gICAgICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgICAgIGZpZWxkczogcy5kb2N1bWVudC5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSksIGMgPSBhbi5uZXdGb3VuZERvY3VtZW50KGksIHIsIG8sIHUpLCBhID0gcy50YXJnZXRJZHMgfHwgW10sIGggPSBzLnJlbW92ZWRUYXJnZXRJZHMgfHwgW107XG4gICAgICAgIG4gPSBuZXcgeWkoYSwgaCwgYy5rZXksIGMpO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudERlbGV0ZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudERlbGV0ZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnREZWxldGU7XG4gICAgICAgIHMuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBPaSh0LCBzLmRvY3VtZW50KSwgciA9IHMucmVhZFRpbWUgPyBOaShzLnJlYWRUaW1lKSA6IHJ0Lm1pbigpLCBvID0gYW4ubmV3Tm9Eb2N1bWVudChpLCByKSwgdSA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB5aShbXSwgdSwgby5rZXksIG8pO1xuICAgIH0gZWxzZSBpZiAoXCJkb2N1bWVudFJlbW92ZVwiIGluIGUpIHtcbiAgICAgICAgZS5kb2N1bWVudFJlbW92ZTtcbiAgICAgICAgY29uc3QgcyA9IGUuZG9jdW1lbnRSZW1vdmU7XG4gICAgICAgIHMuZG9jdW1lbnQ7XG4gICAgICAgIGNvbnN0IGkgPSBPaSh0LCBzLmRvY3VtZW50KSwgciA9IHMucmVtb3ZlZFRhcmdldElkcyB8fCBbXTtcbiAgICAgICAgbiA9IG5ldyB5aShbXSwgciwgaSwgbnVsbCk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKCEoXCJmaWx0ZXJcIiBpbiBlKSkgcmV0dXJuIE8oKTtcbiAgICAgICAge1xuICAgICAgICAgICAgZS5maWx0ZXI7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5maWx0ZXI7XG4gICAgICAgICAgICB0LnRhcmdldElkO1xuICAgICAgICAgICAgY29uc3Qge2NvdW50OiBzID0gMCwgdW5jaGFuZ2VkTmFtZXM6IGl9ID0gdCwgciA9IG5ldyBzaShzLCBpKSwgbyA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBuID0gbmV3IHBpKG8sIHIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBuO1xufVxuXG5mdW5jdGlvbiBqaSh0LCBlKSB7XG4gICAgbGV0IG47XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBqcykgbiA9IHtcbiAgICAgICAgdXBkYXRlOiBVaSh0LCBlLmtleSwgZS52YWx1ZSlcbiAgICB9OyBlbHNlIGlmIChlIGluc3RhbmNlb2YgWXMpIG4gPSB7XG4gICAgICAgIGRlbGV0ZTogJGkodCwgZS5rZXkpXG4gICAgfTsgZWxzZSBpZiAoZSBpbnN0YW5jZW9mIHpzKSBuID0ge1xuICAgICAgICB1cGRhdGU6IFVpKHQsIGUua2V5LCBlLmRhdGEpLFxuICAgICAgICB1cGRhdGVNYXNrOiBvcihlLmZpZWxkTWFzaylcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCEoZSBpbnN0YW5jZW9mIFhzKSkgcmV0dXJuIE8oKTtcbiAgICAgICAgbiA9IHtcbiAgICAgICAgICAgIHZlcmlmeTogJGkodCwgZS5rZXkpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJldHVybiBlLmZpZWxkVHJhbnNmb3Jtcy5sZW5ndGggPiAwICYmIChuLnVwZGF0ZVRyYW5zZm9ybXMgPSBlLmZpZWxkVHJhbnNmb3Jtcy5tYXAoKHQgPT4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS50cmFuc2Zvcm07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgYnMpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBzZXRUb1NlcnZlclZhbHVlOiBcIlJFUVVFU1RfVElNRVwiXG4gICAgICAgIH07XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgVnMpIHJldHVybiB7XG4gICAgICAgICAgICBmaWVsZFBhdGg6IGUuZmllbGQuY2Fub25pY2FsU3RyaW5nKCksXG4gICAgICAgICAgICBhcHBlbmRNaXNzaW5nRWxlbWVudHM6IHtcbiAgICAgICAgICAgICAgICB2YWx1ZXM6IG4uZWxlbWVudHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgaWYgKG4gaW5zdGFuY2VvZiBEcykgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkUGF0aDogZS5maWVsZC5jYW5vbmljYWxTdHJpbmcoKSxcbiAgICAgICAgICAgIHJlbW92ZUFsbEZyb21BcnJheToge1xuICAgICAgICAgICAgICAgIHZhbHVlczogbi5lbGVtZW50c1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICBpZiAobiBpbnN0YW5jZW9mIHhzKSByZXR1cm4ge1xuICAgICAgICAgICAgZmllbGRQYXRoOiBlLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpLFxuICAgICAgICAgICAgaW5jcmVtZW50OiBuLmd0XG4gICAgICAgIH07XG4gICAgICAgIHRocm93IE8oKTtcbiAgICB9KDAsIHQpKSkpLCBlLnByZWNvbmRpdGlvbi5pc05vbmUgfHwgKG4uY3VycmVudERvY3VtZW50ID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSBlLnVwZGF0ZVRpbWUgPyB7XG4gICAgICAgICAgICB1cGRhdGVUaW1lOiB4aSh0LCBlLnVwZGF0ZVRpbWUpXG4gICAgICAgIH0gOiB2b2lkIDAgIT09IGUuZXhpc3RzID8ge1xuICAgICAgICAgICAgZXhpc3RzOiBlLmV4aXN0c1xuICAgICAgICB9IDogTygpO1xuICAgIH0odCwgZS5wcmVjb25kaXRpb24pKSwgbjtcbn1cblxuZnVuY3Rpb24gemkodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmN1cnJlbnREb2N1bWVudCA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51cGRhdGVUaW1lID8gRnMudXBkYXRlVGltZShOaSh0LnVwZGF0ZVRpbWUpKSA6IHZvaWQgMCAhPT0gdC5leGlzdHMgPyBGcy5leGlzdHModC5leGlzdHMpIDogRnMubm9uZSgpO1xuICAgIH0oZS5jdXJyZW50RG9jdW1lbnQpIDogRnMubm9uZSgpLCBzID0gZS51cGRhdGVUcmFuc2Zvcm1zID8gZS51cGRhdGVUcmFuc2Zvcm1zLm1hcCgoZSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgaWYgKFwic2V0VG9TZXJ2ZXJWYWx1ZVwiIGluIGUpIEYoXCJSRVFVRVNUX1RJTUVcIiA9PT0gZS5zZXRUb1NlcnZlclZhbHVlKSwgbiA9IG5ldyBiczsgZWxzZSBpZiAoXCJhcHBlbmRNaXNzaW5nRWxlbWVudHNcIiBpbiBlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5hcHBlbmRNaXNzaW5nRWxlbWVudHMudmFsdWVzIHx8IFtdO1xuICAgICAgICAgICAgbiA9IG5ldyBWcyh0KTtcbiAgICAgICAgfSBlbHNlIGlmIChcInJlbW92ZUFsbEZyb21BcnJheVwiIGluIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlLnJlbW92ZUFsbEZyb21BcnJheS52YWx1ZXMgfHwgW107XG4gICAgICAgICAgICBuID0gbmV3IERzKHQpO1xuICAgICAgICB9IGVsc2UgXCJpbmNyZW1lbnRcIiBpbiBlID8gbiA9IG5ldyB4cyh0LCBlLmluY3JlbWVudCkgOiBPKCk7XG4gICAgICAgIGNvbnN0IHMgPSBhdC5mcm9tU2VydmVyRm9ybWF0KGUuZmllbGRQYXRoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBNcyhzLCBuKTtcbiAgICB9KHQsIGUpKSkgOiBbXTtcbiAgICBpZiAoZS51cGRhdGUpIHtcbiAgICAgICAgZS51cGRhdGUubmFtZTtcbiAgICAgICAgY29uc3QgaSA9IE9pKHQsIGUudXBkYXRlLm5hbWUpLCByID0gbmV3IHVuKHtcbiAgICAgICAgICAgIG1hcFZhbHVlOiB7XG4gICAgICAgICAgICAgICAgZmllbGRzOiBlLnVwZGF0ZS5maWVsZHNcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGlmIChlLnVwZGF0ZU1hc2spIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQuZmllbGRQYXRocyB8fCBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFJlKGUubWFwKCh0ID0+IGF0LmZyb21TZXJ2ZXJGb3JtYXQodCkpKSk7XG4gICAgICAgICAgICB9KGUudXBkYXRlTWFzayk7XG4gICAgICAgICAgICByZXR1cm4gbmV3IHpzKGksIHIsIHQsIG4sIHMpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcganMoaSwgciwgbiwgcyk7XG4gICAgfVxuICAgIGlmIChlLmRlbGV0ZSkge1xuICAgICAgICBjb25zdCBzID0gT2kodCwgZS5kZWxldGUpO1xuICAgICAgICByZXR1cm4gbmV3IFlzKHMsIG4pO1xuICAgIH1cbiAgICBpZiAoZS52ZXJpZnkpIHtcbiAgICAgICAgY29uc3QgcyA9IE9pKHQsIGUudmVyaWZ5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBYcyhzLCBuKTtcbiAgICB9XG4gICAgcmV0dXJuIE8oKTtcbn1cblxuZnVuY3Rpb24gV2kodCwgZSkge1xuICAgIHJldHVybiB0ICYmIHQubGVuZ3RoID4gMCA/IChGKHZvaWQgMCAhPT0gZSksIHQubWFwKCh0ID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gTk9URTogRGVsZXRlcyBkb24ndCBoYXZlIGFuIHVwZGF0ZVRpbWUuXG4gICAgICAgIGxldCBuID0gdC51cGRhdGVUaW1lID8gTmkodC51cGRhdGVUaW1lKSA6IE5pKGUpO1xuICAgICAgICByZXR1cm4gbi5pc0VxdWFsKHJ0Lm1pbigpKSAmJiAoXG4gICAgICAgIC8vIFRoZSBGaXJlc3RvcmUgRW11bGF0b3IgY3VycmVudGx5IHJldHVybnMgYW4gdXBkYXRlIHRpbWUgb2YgMCBmb3JcbiAgICAgICAgLy8gZGVsZXRlcyBvZiBub24tZXhpc3RpbmcgZG9jdW1lbnRzIChyYXRoZXIgdGhhbiBudWxsKS4gVGhpcyBicmVha3MgdGhlXG4gICAgICAgIC8vIHRlc3QgXCJnZXQgZGVsZXRlZCBkb2Mgd2hpbGUgb2ZmbGluZSB3aXRoIHNvdXJjZT1jYWNoZVwiIGFzIE5vRG9jdW1lbnRzXG4gICAgICAgIC8vIHdpdGggdmVyc2lvbiAwIGFyZSBmaWx0ZXJlZCBieSBJbmRleGVkRGIncyBSZW1vdGVEb2N1bWVudENhY2hlLlxuICAgICAgICAvLyBUT0RPKCMyMTQ5KTogUmVtb3ZlIHRoaXMgd2hlbiBFbXVsYXRvciBpcyBmaXhlZFxuICAgICAgICBuID0gTmkoZSkpLCBuZXcgT3MobiwgdC50cmFuc2Zvcm1SZXN1bHRzIHx8IFtdKTtcbiAgICB9KHQsIGUpKSkpIDogW107XG59XG5cbmZ1bmN0aW9uIEhpKHQsIGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBkb2N1bWVudHM6IFsgRmkodCwgZS5wYXRoKSBdXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gSmkodCwgZSkge1xuICAgIC8vIERpc3NlY3QgdGhlIHBhdGggaW50byBwYXJlbnQsIGNvbGxlY3Rpb25JZCwgYW5kIG9wdGlvbmFsIGtleSBmaWx0ZXIuXG4gICAgY29uc3QgbiA9IHtcbiAgICAgICAgc3RydWN0dXJlZFF1ZXJ5OiB7fVxuICAgIH0sIHMgPSBlLnBhdGg7XG4gICAgbnVsbCAhPT0gZS5jb2xsZWN0aW9uR3JvdXAgPyAobi5wYXJlbnQgPSBGaSh0LCBzKSwgbi5zdHJ1Y3R1cmVkUXVlcnkuZnJvbSA9IFsge1xuICAgICAgICBjb2xsZWN0aW9uSWQ6IGUuY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBhbGxEZXNjZW5kYW50czogITBcbiAgICB9IF0pIDogKG4ucGFyZW50ID0gRmkodCwgcy5wb3BMYXN0KCkpLCBuLnN0cnVjdHVyZWRRdWVyeS5mcm9tID0gWyB7XG4gICAgICAgIGNvbGxlY3Rpb25JZDogcy5sYXN0U2VnbWVudCgpXG4gICAgfSBdKTtcbiAgICBjb25zdCBpID0gZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgcmV0dXJuIHJyKGduLmNyZWF0ZSh0LCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpO1xuICAgIH0oZS5maWx0ZXJzKTtcbiAgICBpICYmIChuLnN0cnVjdHVyZWRRdWVyeS53aGVyZSA9IGkpO1xuICAgIGNvbnN0IHIgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICgwID09PSB0Lmxlbmd0aCkgcmV0dXJuO1xuICAgICAgICByZXR1cm4gdC5tYXAoKHQgPT4gXG4gICAgICAgIC8vIHZpc2libGUgZm9yIHRlc3RpbmdcbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmaWVsZDogc3IodC5maWVsZCksXG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uOiB0cih0LmRpcilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0odCkpKTtcbiAgICB9KGUub3JkZXJCeSk7XG4gICAgciAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkub3JkZXJCeSA9IHIpO1xuICAgIGNvbnN0IG8gPSBTaSh0LCBlLmxpbWl0KTtcbiAgICB2YXIgdTtcbiAgICByZXR1cm4gbnVsbCAhPT0gbyAmJiAobi5zdHJ1Y3R1cmVkUXVlcnkubGltaXQgPSBvKSwgZS5zdGFydEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5zdGFydEF0ID0ge1xuICAgICAgICBiZWZvcmU6ICh1ID0gZS5zdGFydEF0KS5pbmNsdXNpdmUsXG4gICAgICAgIHZhbHVlczogdS5wb3NpdGlvblxuICAgIH0pLCBlLmVuZEF0ICYmIChuLnN0cnVjdHVyZWRRdWVyeS5lbmRBdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGJlZm9yZTogIXQuaW5jbHVzaXZlLFxuICAgICAgICAgICAgdmFsdWVzOiB0LnBvc2l0aW9uXG4gICAgICAgIH07XG4gICAgfShlLmVuZEF0KSksIG47XG59XG5cbmZ1bmN0aW9uIFlpKHQpIHtcbiAgICBsZXQgZSA9IEJpKHQucGFyZW50KTtcbiAgICBjb25zdCBuID0gdC5zdHJ1Y3R1cmVkUXVlcnksIHMgPSBuLmZyb20gPyBuLmZyb20ubGVuZ3RoIDogMDtcbiAgICBsZXQgaSA9IG51bGw7XG4gICAgaWYgKHMgPiAwKSB7XG4gICAgICAgIEYoMSA9PT0gcyk7XG4gICAgICAgIGNvbnN0IHQgPSBuLmZyb21bMF07XG4gICAgICAgIHQuYWxsRGVzY2VuZGFudHMgPyBpID0gdC5jb2xsZWN0aW9uSWQgOiBlID0gZS5jaGlsZCh0LmNvbGxlY3Rpb25JZCk7XG4gICAgfVxuICAgIGxldCByID0gW107XG4gICAgbi53aGVyZSAmJiAociA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFppKHQpO1xuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIGduICYmIEluKGUpKSByZXR1cm4gZS5nZXRGaWx0ZXJzKCk7XG4gICAgICAgIHJldHVybiBbIGUgXTtcbiAgICB9KG4ud2hlcmUpKTtcbiAgICBsZXQgbyA9IFtdO1xuICAgIG4ub3JkZXJCeSAmJiAobyA9IG4ub3JkZXJCeS5tYXAoKHQgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICByZXR1cm4gbmV3IGRuKGlyKHQuZmllbGQpLCBcbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFTQ0VORElOR1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFzY1wiIC8qIERpcmVjdGlvbi5BU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkRFU0NFTkRJTkdcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJkZXNjXCIgLyogRGlyZWN0aW9uLkRFU0NFTkRJTkcgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICAgICAodC5kaXJlY3Rpb24pKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgICh0KSkpKTtcbiAgICBsZXQgdSA9IG51bGw7XG4gICAgbi5saW1pdCAmJiAodSA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIHJldHVybiBlID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgdCA/IHQudmFsdWUgOiB0LCBGdChlKSA/IG51bGwgOiBlO1xuICAgIH0obi5saW1pdCkpO1xuICAgIGxldCBjID0gbnVsbDtcbiAgICBuLnN0YXJ0QXQgJiYgKGMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhIXQuYmVmb3JlLCBuID0gdC52YWx1ZXMgfHwgW107XG4gICAgICAgIHJldHVybiBuZXcgaG4obiwgZSk7XG4gICAgfShuLnN0YXJ0QXQpKTtcbiAgICBsZXQgYSA9IG51bGw7XG4gICAgcmV0dXJuIG4uZW5kQXQgJiYgKGEgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhdC5iZWZvcmUsIG4gPSB0LnZhbHVlcyB8fCBbXTtcbiAgICAgICAgcmV0dXJuIG5ldyBobihuLCBlKTtcbiAgICB9XG4gICAgLy8gdmlzaWJsZSBmb3IgdGVzdGluZ1xuICAgIChuLmVuZEF0KSksIEtuKGUsIGksIG8sIHIsIHUsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIGMsIGEpO1xufVxuXG5mdW5jdGlvbiBYaSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0KSB7XG4gICAgICAgICAgY2FzZSBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyA6XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hcIiAvKiBUYXJnZXRQdXJwb3NlLkV4aXN0ZW5jZUZpbHRlck1pc21hdGNoICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImV4aXN0ZW5jZS1maWx0ZXItbWlzbWF0Y2hcIjtcblxuICAgICAgICAgIGNhc2UgXCJUYXJnZXRQdXJwb3NlRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbVwiIC8qIFRhcmdldFB1cnBvc2UuRXhpc3RlbmNlRmlsdGVyTWlzbWF0Y2hCbG9vbSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gXCJleGlzdGVuY2UtZmlsdGVyLW1pc21hdGNoLWJsb29tXCI7XG5cbiAgICAgICAgICBjYXNlIFwiVGFyZ2V0UHVycG9zZUxpbWJvUmVzb2x1dGlvblwiIC8qIFRhcmdldFB1cnBvc2UuTGltYm9SZXNvbHV0aW9uICovIDpcbiAgICAgICAgICAgIHJldHVybiBcImxpbWJvLWRvY3VtZW50XCI7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgfVxuICAgIH0oZS5wdXJwb3NlKTtcbiAgICByZXR1cm4gbnVsbCA9PSBuID8gbnVsbCA6IHtcbiAgICAgICAgXCJnb29nLWxpc3Rlbi10YWdzXCI6IG5cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBaaSh0KSB7XG4gICAgcmV0dXJuIHZvaWQgMCAhPT0gdC51bmFyeUZpbHRlciA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgc3dpdGNoICh0LnVuYXJ5RmlsdGVyLm9wKSB7XG4gICAgICAgICAgY2FzZSBcIklTX05BTlwiOlxuICAgICAgICAgICAgY29uc3QgZSA9IGlyKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShlLCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgZG91YmxlVmFsdWU6IE5hTlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTlVMTFwiOlxuICAgICAgICAgICAgY29uc3QgbiA9IGlyKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShuLCBcIj09XCIgLyogT3BlcmF0b3IuRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBjYXNlIFwiSVNfTk9UX05BTlwiOlxuICAgICAgICAgICAgY29uc3QgcyA9IGlyKHQudW5hcnlGaWx0ZXIuZmllbGQpO1xuICAgICAgICAgICAgcmV0dXJuIG1uLmNyZWF0ZShzLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwge1xuICAgICAgICAgICAgICAgIGRvdWJsZVZhbHVlOiBOYU5cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgY2FzZSBcIklTX05PVF9OVUxMXCI6XG4gICAgICAgICAgICBjb25zdCBpID0gaXIodC51bmFyeUZpbHRlci5maWVsZCk7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKGksIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gLCB7XG4gICAgICAgICAgICAgICAgbnVsbFZhbHVlOiBcIk5VTExfVkFMVUVcIlxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgfVxuICAgIH0odCkgOiB2b2lkIDAgIT09IHQuZmllbGRGaWx0ZXIgPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBtbi5jcmVhdGUoaXIodC5maWVsZEZpbHRlci5maWVsZCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgICAgICBjYXNlIFwiRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJOT1RfRVFVQUxcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPlwiIC8qIE9wZXJhdG9yLkdSRUFURVJfVEhBTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiR1JFQVRFUl9USEFOX09SX0VRVUFMXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiPj1cIiAvKiBPcGVyYXRvci5HUkVBVEVSX1RIQU5fT1JfRVFVQUwgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTlwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIjxcIiAvKiBPcGVyYXRvci5MRVNTX1RIQU4gKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIkxFU1NfVEhBTl9PUl9FUVVBTFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcIjw9XCIgLyogT3BlcmF0b3IuTEVTU19USEFOX09SX0VRVUFMICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU1wiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi87XG5cbiAgICAgICAgICAgICAgY2FzZSBcIklOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiTk9UX0lOXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovO1xuXG4gICAgICAgICAgICAgIGNhc2UgXCJBUlJBWV9DT05UQUlOU19BTllcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi87XG5cbiAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gTygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuZmllbGRGaWx0ZXIub3ApLCB0LmZpZWxkRmlsdGVyLnZhbHVlKTtcbiAgICB9KHQpIDogdm9pZCAwICE9PSB0LmNvbXBvc2l0ZUZpbHRlciA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIGduLmNyZWF0ZSh0LmNvbXBvc2l0ZUZpbHRlci5maWx0ZXJzLm1hcCgodCA9PiBaaSh0KSkpLCBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgY2FzZSBcIkFORFwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLztcblxuICAgICAgICAgICAgICBjYXNlIFwiT1JcIjpcbiAgICAgICAgICAgICAgICByZXR1cm4gXCJvclwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLk9SICovO1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSh0LmNvbXBvc2l0ZUZpbHRlci5vcCkpO1xuICAgIH0odCkgOiBPKCk7XG59XG5cbmZ1bmN0aW9uIHRyKHQpIHtcbiAgICByZXR1cm4gUmlbdF07XG59XG5cbmZ1bmN0aW9uIGVyKHQpIHtcbiAgICByZXR1cm4gUGlbdF07XG59XG5cbmZ1bmN0aW9uIG5yKHQpIHtcbiAgICByZXR1cm4gYmlbdF07XG59XG5cbmZ1bmN0aW9uIHNyKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBmaWVsZFBhdGg6IHQuY2Fub25pY2FsU3RyaW5nKClcbiAgICB9O1xufVxuXG5mdW5jdGlvbiBpcih0KSB7XG4gICAgcmV0dXJuIGF0LmZyb21TZXJ2ZXJGb3JtYXQodC5maWVsZFBhdGgpO1xufVxuXG5mdW5jdGlvbiBycih0KSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBtbiA/IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgaWYgKFwiPT1cIiAvKiBPcGVyYXRvci5FUVVBTCAqLyA9PT0gdC5vcCkge1xuICAgICAgICAgICAgaWYgKFhlKHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFllKHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTlVMTFwiXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSBlbHNlIGlmIChcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovID09PSB0Lm9wKSB7XG4gICAgICAgICAgICBpZiAoWGUodC52YWx1ZSkpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdW5hcnlGaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgICAgICBvcDogXCJJU19OT1RfTkFOXCJcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaWYgKFllKHQudmFsdWUpKSByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVuYXJ5RmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkKSxcbiAgICAgICAgICAgICAgICAgICAgb3A6IFwiSVNfTk9UX05VTExcIlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZpZWxkRmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGQpLFxuICAgICAgICAgICAgICAgIG9wOiBlcih0Lm9wKSxcbiAgICAgICAgICAgICAgICB2YWx1ZTogdC52YWx1ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH0odCkgOiB0IGluc3RhbmNlb2YgZ24gPyBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LmdldEZpbHRlcnMoKS5tYXAoKHQgPT4gcnIodCkpKTtcbiAgICAgICAgaWYgKDEgPT09IGUubGVuZ3RoKSByZXR1cm4gZVswXTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbXBvc2l0ZUZpbHRlcjoge1xuICAgICAgICAgICAgICAgIG9wOiBucih0Lm9wKSxcbiAgICAgICAgICAgICAgICBmaWx0ZXJzOiBlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfSh0KSA6IE8oKTtcbn1cblxuZnVuY3Rpb24gb3IodCkge1xuICAgIGNvbnN0IGUgPSBbXTtcbiAgICByZXR1cm4gdC5maWVsZHMuZm9yRWFjaCgodCA9PiBlLnB1c2godC5jYW5vbmljYWxTdHJpbmcoKSkpKSwge1xuICAgICAgICBmaWVsZFBhdGhzOiBlXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gdXIodCkge1xuICAgIC8vIFJlc291cmNlIG5hbWVzIGhhdmUgYXQgbGVhc3QgNCBjb21wb25lbnRzIChwcm9qZWN0IElELCBkYXRhYmFzZSBJRClcbiAgICByZXR1cm4gdC5sZW5ndGggPj0gNCAmJiBcInByb2plY3RzXCIgPT09IHQuZ2V0KDApICYmIFwiZGF0YWJhc2VzXCIgPT09IHQuZ2V0KDIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgc2V0IG9mIG1ldGFkYXRhIHRoYXQgdGhlIGxvY2FsIHN0b3JlIHRyYWNrcyBmb3IgZWFjaCB0YXJnZXQuXG4gKi8gY2xhc3MgY3Ige1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdGFyZ2V0IGJlaW5nIGxpc3RlbmVkIHRvLiAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgSUQgdG8gd2hpY2ggdGhlIHRhcmdldCBjb3JyZXNwb25kczsgQXNzaWduZWQgYnkgdGhlXG4gICAgICogTG9jYWxTdG9yZSBmb3IgdXNlciBsaXN0ZW5zIGFuZCBieSB0aGUgU3luY0VuZ2luZSBmb3IgbGltYm8gd2F0Y2hlcy5cbiAgICAgKi9cbiAgICBlLCBcbiAgICAvKiogVGhlIHB1cnBvc2Ugb2YgdGhlIHRhcmdldC4gKi9cbiAgICBuLCBcbiAgICAvKipcbiAgICAgKiBUaGUgc2VxdWVuY2UgbnVtYmVyIG9mIHRoZSBsYXN0IHRyYW5zYWN0aW9uIGR1cmluZyB3aGljaCB0aGlzIHRhcmdldCBkYXRhXG4gICAgICogd2FzIG1vZGlmaWVkLlxuICAgICAqL1xuICAgIHMsIFxuICAgIC8qKiBUaGUgbGF0ZXN0IHNuYXBzaG90IHZlcnNpb24gc2VlbiBmb3IgdGhpcyB0YXJnZXQuICovXG4gICAgaSA9IHJ0Lm1pbigpXG4gICAgLyoqXG4gICAgICogVGhlIG1heGltdW0gc25hcHNob3QgdmVyc2lvbiBhdCB3aGljaCB0aGUgYXNzb2NpYXRlZCB2aWV3XG4gICAgICogY29udGFpbmVkIG5vIGxpbWJvIGRvY3VtZW50cy5cbiAgICAgKi8gLCByID0gcnQubWluKClcbiAgICAvKipcbiAgICAgKiBBbiBvcGFxdWUsIHNlcnZlci1hc3NpZ25lZCB0b2tlbiB0aGF0IGFsbG93cyB3YXRjaGluZyBhIHRhcmdldCB0byBiZVxuICAgICAqIHJlc3VtZWQgYWZ0ZXIgZGlzY29ubmVjdGluZyB3aXRob3V0IHJldHJhbnNtaXR0aW5nIGFsbCB0aGUgZGF0YSB0aGF0XG4gICAgICogbWF0Y2hlcyB0aGUgdGFyZ2V0LiBUaGUgcmVzdW1lIHRva2VuIGVzc2VudGlhbGx5IGlkZW50aWZpZXMgYSBwb2ludCBpblxuICAgICAqIHRpbWUgZnJvbSB3aGljaCB0aGUgc2VydmVyIHNob3VsZCByZXN1bWUgc2VuZGluZyByZXN1bHRzLlxuICAgICAqLyAsIG8gPSBWZS5FTVBUWV9CWVRFX1NUUklOR1xuICAgIC8qKlxuICAgICAqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIHRoYXQgbGFzdCBtYXRjaGVkIHRoZSBxdWVyeSBhdCB0aGUgcmVzdW1lIHRva2VuIG9yXG4gICAgICogcmVhZCB0aW1lLiBEb2N1bWVudHMgYXJlIGNvdW50ZWQgb25seSB3aGVuIG1ha2luZyBhIGxpc3RlbiByZXF1ZXN0IHdpdGhcbiAgICAgKiByZXN1bWUgdG9rZW4gb3IgcmVhZCB0aW1lLCBvdGhlcndpc2UsIGtlZXAgaXQgbnVsbC5cbiAgICAgKi8gLCB1ID0gbnVsbCkge1xuICAgICAgICB0aGlzLnRhcmdldCA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnB1cnBvc2UgPSBuLCB0aGlzLnNlcXVlbmNlTnVtYmVyID0gcywgdGhpcy5zbmFwc2hvdFZlcnNpb24gPSBpLCBcbiAgICAgICAgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID0gciwgdGhpcy5yZXN1bWVUb2tlbiA9IG8sIHRoaXMuZXhwZWN0ZWRDb3VudCA9IHU7XG4gICAgfVxuICAgIC8qKiBDcmVhdGVzIGEgbmV3IHRhcmdldCBkYXRhIGluc3RhbmNlIHdpdGggYW4gdXBkYXRlZCBzZXF1ZW5jZSBudW1iZXIuICovICAgIHdpdGhTZXF1ZW5jZU51bWJlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgY3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdCwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgdGhpcy5leHBlY3RlZENvdW50KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgZGF0YSBpbnN0YW5jZSB3aXRoIGFuIHVwZGF0ZWQgcmVzdW1lIHRva2VuIGFuZFxuICAgICAqIHNuYXBzaG90IHZlcnNpb24uXG4gICAgICovICAgIHdpdGhSZXN1bWVUb2tlbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgY3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgZSwgdGhpcy5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uLCB0LCBcbiAgICAgICAgLyogZXhwZWN0ZWRDb3VudD0gKi8gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGV4cGVjdGVkIGNvdW50LlxuICAgICAqLyAgICB3aXRoRXhwZWN0ZWRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgY3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHRoaXMubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiwgdGhpcy5yZXN1bWVUb2tlbiwgdCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgdGFyZ2V0IGRhdGEgaW5zdGFuY2Ugd2l0aCBhbiB1cGRhdGVkIGxhc3QgbGltYm8gZnJlZVxuICAgICAqIHNuYXBzaG90IHZlcnNpb24gbnVtYmVyLlxuICAgICAqLyAgICB3aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgY3IodGhpcy50YXJnZXQsIHRoaXMudGFyZ2V0SWQsIHRoaXMucHVycG9zZSwgdGhpcy5zZXF1ZW5jZU51bWJlciwgdGhpcy5zbmFwc2hvdFZlcnNpb24sIHQsIHRoaXMucmVzdW1lVG9rZW4sIHRoaXMuZXhwZWN0ZWRDb3VudCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFNlcmlhbGl6ZXIgZm9yIHZhbHVlcyBzdG9yZWQgaW4gdGhlIExvY2FsU3RvcmUuICovIGNsYXNzIGFyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZmUgPSB0O1xuICAgIH1cbn1cblxuLyoqIERlY29kZXMgYSByZW1vdGUgZG9jdW1lbnQgZnJvbSBzdG9yYWdlIGxvY2FsbHkgdG8gYSBEb2N1bWVudC4gKi8gZnVuY3Rpb24gaHIodCwgZSkge1xuICAgIGxldCBuO1xuICAgIGlmIChlLmRvY3VtZW50KSBuID0gS2kodC5mZSwgZS5kb2N1bWVudCwgISFlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyk7IGVsc2UgaWYgKGUubm9Eb2N1bWVudCkge1xuICAgICAgICBjb25zdCB0ID0gaHQuZnJvbVNlZ21lbnRzKGUubm9Eb2N1bWVudC5wYXRoKSwgcyA9IHdyKGUubm9Eb2N1bWVudC5yZWFkVGltZSk7XG4gICAgICAgIG4gPSBhbi5uZXdOb0RvY3VtZW50KHQsIHMpLCBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiBuLnNldEhhc0NvbW1pdHRlZE11dGF0aW9ucygpO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICghZS51bmtub3duRG9jdW1lbnQpIHJldHVybiBPKCk7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBodC5mcm9tU2VnbWVudHMoZS51bmtub3duRG9jdW1lbnQucGF0aCksIHMgPSB3cihlLnVua25vd25Eb2N1bWVudC52ZXJzaW9uKTtcbiAgICAgICAgICAgIG4gPSBhbi5uZXdVbmtub3duRG9jdW1lbnQodCwgcyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGUucmVhZFRpbWUgJiYgbi5zZXRSZWFkVGltZShmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgaXQodFswXSwgdFsxXSk7XG4gICAgICAgIHJldHVybiBydC5mcm9tVGltZXN0YW1wKGUpO1xuICAgIH0oZS5yZWFkVGltZSkpLCBuO1xufVxuXG4vKiogRW5jb2RlcyBhIGRvY3VtZW50IGZvciBzdG9yYWdlIGxvY2FsbHkuICovIGZ1bmN0aW9uIGxyKHQsIGUpIHtcbiAgICBjb25zdCBuID0gZS5rZXksIHMgPSB7XG4gICAgICAgIHByZWZpeFBhdGg6IG4uZ2V0Q29sbGVjdGlvblBhdGgoKS5wb3BMYXN0KCkudG9BcnJheSgpLFxuICAgICAgICBjb2xsZWN0aW9uR3JvdXA6IG4uY29sbGVjdGlvbkdyb3VwLFxuICAgICAgICBkb2N1bWVudElkOiBuLnBhdGgubGFzdFNlZ21lbnQoKSxcbiAgICAgICAgcmVhZFRpbWU6IGZyKGUucmVhZFRpbWUpLFxuICAgICAgICBoYXNDb21taXR0ZWRNdXRhdGlvbnM6IGUuaGFzQ29tbWl0dGVkTXV0YXRpb25zXG4gICAgfTtcbiAgICBpZiAoZS5pc0ZvdW5kRG9jdW1lbnQoKSkgcy5kb2N1bWVudCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIG5hbWU6ICRpKHQsIGUua2V5KSxcbiAgICAgICAgICAgIGZpZWxkczogZS5kYXRhLnZhbHVlLm1hcFZhbHVlLmZpZWxkcyxcbiAgICAgICAgICAgIHVwZGF0ZVRpbWU6IERpKHQsIGUudmVyc2lvbi50b1RpbWVzdGFtcCgpKSxcbiAgICAgICAgICAgIGNyZWF0ZVRpbWU6IERpKHQsIGUuY3JlYXRlVGltZS50b1RpbWVzdGFtcCgpKVxuICAgICAgICB9O1xuICAgIH0odC5mZSwgZSk7IGVsc2UgaWYgKGUuaXNOb0RvY3VtZW50KCkpIHMubm9Eb2N1bWVudCA9IHtcbiAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgcmVhZFRpbWU6IGRyKGUudmVyc2lvbilcbiAgICB9OyBlbHNlIHtcbiAgICAgICAgaWYgKCFlLmlzVW5rbm93bkRvY3VtZW50KCkpIHJldHVybiBPKCk7XG4gICAgICAgIHMudW5rbm93bkRvY3VtZW50ID0ge1xuICAgICAgICAgICAgcGF0aDogbi5wYXRoLnRvQXJyYXkoKSxcbiAgICAgICAgICAgIHZlcnNpb246IGRyKGUudmVyc2lvbilcbiAgICAgICAgfTtcbiAgICB9XG4gICAgcmV0dXJuIHM7XG59XG5cbmZ1bmN0aW9uIGZyKHQpIHtcbiAgICBjb25zdCBlID0gdC50b1RpbWVzdGFtcCgpO1xuICAgIHJldHVybiBbIGUuc2Vjb25kcywgZS5uYW5vc2Vjb25kcyBdO1xufVxuXG5mdW5jdGlvbiBkcih0KSB7XG4gICAgY29uc3QgZSA9IHQudG9UaW1lc3RhbXAoKTtcbiAgICByZXR1cm4ge1xuICAgICAgICBzZWNvbmRzOiBlLnNlY29uZHMsXG4gICAgICAgIG5hbm9zZWNvbmRzOiBlLm5hbm9zZWNvbmRzXG4gICAgfTtcbn1cblxuZnVuY3Rpb24gd3IodCkge1xuICAgIGNvbnN0IGUgPSBuZXcgaXQodC5zZWNvbmRzLCB0Lm5hbm9zZWNvbmRzKTtcbiAgICByZXR1cm4gcnQuZnJvbVRpbWVzdGFtcChlKTtcbn1cblxuLyoqIEVuY29kZXMgYSBiYXRjaCBvZiBtdXRhdGlvbnMgaW50byBhIERiTXV0YXRpb25CYXRjaCBmb3IgbG9jYWwgc3RvcmFnZS4gKi9cbi8qKiBEZWNvZGVzIGEgRGJNdXRhdGlvbkJhdGNoIGludG8gYSBNdXRhdGlvbkJhdGNoICovXG5mdW5jdGlvbiBfcih0LCBlKSB7XG4gICAgY29uc3QgbiA9IChlLmJhc2VNdXRhdGlvbnMgfHwgW10pLm1hcCgoZSA9PiB6aSh0LmZlLCBlKSkpO1xuICAgIC8vIFNxdWFzaCBvbGQgdHJhbnNmb3JtIG11dGF0aW9ucyBpbnRvIGV4aXN0aW5nIHBhdGNoIG9yIHNldCBtdXRhdGlvbnMuXG4gICAgLy8gVGhlIHJlcGxhY2VtZW50IG9mIHJlcHJlc2VudGluZyBgdHJhbnNmb3Jtc2Agd2l0aCBgdXBkYXRlX3RyYW5zZm9ybXNgXG4gICAgLy8gb24gdGhlIFNESyBtZWFucyB0aGF0IG9sZCBgdHJhbnNmb3JtYCBtdXRhdGlvbnMgc3RvcmVkIGluIEluZGV4ZWREQiBuZWVkXG4gICAgLy8gdG8gYmUgdXBkYXRlZCB0byBgdXBkYXRlX3RyYW5zZm9ybXNgLlxuICAgIC8vIFRPRE8oYi8xNzQ2MDgzNzQpOiBSZW1vdmUgdGhpcyBjb2RlIG9uY2Ugd2UgcGVyZm9ybSBhIHNjaGVtYSBtaWdyYXRpb24uXG4gICAgICAgIGZvciAobGV0IHQgPSAwOyB0IDwgZS5tdXRhdGlvbnMubGVuZ3RoIC0gMTsgKyt0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLm11dGF0aW9uc1t0XTtcbiAgICAgICAgaWYgKHQgKyAxIDwgZS5tdXRhdGlvbnMubGVuZ3RoICYmIHZvaWQgMCAhPT0gZS5tdXRhdGlvbnNbdCArIDFdLnRyYW5zZm9ybSkge1xuICAgICAgICAgICAgY29uc3QgcyA9IGUubXV0YXRpb25zW3QgKyAxXTtcbiAgICAgICAgICAgIG4udXBkYXRlVHJhbnNmb3JtcyA9IHMudHJhbnNmb3JtLmZpZWxkVHJhbnNmb3JtcywgZS5tdXRhdGlvbnMuc3BsaWNlKHQgKyAxLCAxKSwgXG4gICAgICAgICAgICArK3Q7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcyA9IGUubXV0YXRpb25zLm1hcCgoZSA9PiB6aSh0LmZlLCBlKSkpLCBpID0gaXQuZnJvbU1pbGxpcyhlLmxvY2FsV3JpdGVUaW1lTXMpO1xuICAgIHJldHVybiBuZXcgWnMoZS5iYXRjaElkLCBpLCBuLCBzKTtcbn1cblxuLyoqIERlY29kZXMgYSBEYlRhcmdldCBpbnRvIFRhcmdldERhdGEgKi8gZnVuY3Rpb24gbXIodCkge1xuICAgIGNvbnN0IGUgPSB3cih0LnJlYWRUaW1lKSwgbiA9IHZvaWQgMCAhPT0gdC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uID8gd3IodC5sYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKSA6IHJ0Lm1pbigpO1xuICAgIGxldCBzO1xuICAgIHZhciBpO1xuICAgIHJldHVybiB2b2lkIDAgIT09IHQucXVlcnkuZG9jdW1lbnRzID8gKEYoMSA9PT0gKGkgPSB0LnF1ZXJ5KS5kb2N1bWVudHMubGVuZ3RoKSwgXG4gICAgcyA9IEpuKEduKEJpKGkuZG9jdW1lbnRzWzBdKSkpKSA6IHMgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBKbihZaSh0KSk7XG4gICAgfSh0LnF1ZXJ5KSwgbmV3IGNyKHMsIHQudGFyZ2V0SWQsIFwiVGFyZ2V0UHVycG9zZUxpc3RlblwiIC8qIFRhcmdldFB1cnBvc2UuTGlzdGVuICovICwgdC5sYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIsIGUsIG4sIFZlLmZyb21CYXNlNjRTdHJpbmcodC5yZXN1bWVUb2tlbikpO1xufVxuXG4vKiogRW5jb2RlcyBUYXJnZXREYXRhIGludG8gYSBEYlRhcmdldCBmb3Igc3RvcmFnZSBsb2NhbGx5LiAqLyBmdW5jdGlvbiBncih0LCBlKSB7XG4gICAgY29uc3QgbiA9IGRyKGUuc25hcHNob3RWZXJzaW9uKSwgcyA9IGRyKGUubGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbik7XG4gICAgbGV0IGk7XG4gICAgaSA9IEZuKGUudGFyZ2V0KSA/IEhpKHQuZmUsIGUudGFyZ2V0KSA6IEppKHQuZmUsIGUudGFyZ2V0KTtcbiAgICAvLyBXZSBjYW4ndCBzdG9yZSB0aGUgcmVzdW1lVG9rZW4gYXMgYSBCeXRlU3RyaW5nIGluIEluZGV4ZWREYiwgc28gd2VcbiAgICAvLyBjb252ZXJ0IGl0IHRvIGEgYmFzZTY0IHN0cmluZyBmb3Igc3RvcmFnZS5cbiAgICAgICAgY29uc3QgciA9IGUucmVzdW1lVG9rZW4udG9CYXNlNjQoKTtcbiAgICAvLyBsYXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgaXMgYWx3YXlzIDAgdW50aWwgd2UgZG8gcmVhbCBHQy5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgdGFyZ2V0SWQ6IGUudGFyZ2V0SWQsXG4gICAgICAgIGNhbm9uaWNhbElkOiAkbihlLnRhcmdldCksXG4gICAgICAgIHJlYWRUaW1lOiBuLFxuICAgICAgICByZXN1bWVUb2tlbjogcixcbiAgICAgICAgbGFzdExpc3RlblNlcXVlbmNlTnVtYmVyOiBlLnNlcXVlbmNlTnVtYmVyLFxuICAgICAgICBsYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uOiBzLFxuICAgICAgICBxdWVyeTogaVxuICAgIH07XG59XG5cbi8qKlxuICogQSBoZWxwZXIgZnVuY3Rpb24gZm9yIGZpZ3VyaW5nIG91dCB3aGF0IGtpbmQgb2YgcXVlcnkgaGFzIGJlZW4gc3RvcmVkLlxuICovXG4vKipcbiAqIEVuY29kZXMgYSBgQnVuZGxlZFF1ZXJ5YCBmcm9tIGJ1bmRsZSBwcm90byB0byBhIFF1ZXJ5IG9iamVjdC5cbiAqXG4gKiBUaGlzIHJlY29uc3RydWN0cyB0aGUgb3JpZ2luYWwgcXVlcnkgdXNlZCB0byBidWlsZCB0aGUgYnVuZGxlIGJlaW5nIGxvYWRlZCxcbiAqIGluY2x1ZGluZyBmZWF0dXJlcyBleGlzdHMgb25seSBpbiBTREtzIChmb3IgZXhhbXBsZTogbGltaXQtdG8tbGFzdCkuXG4gKi9cbmZ1bmN0aW9uIHlyKHQpIHtcbiAgICBjb25zdCBlID0gWWkoe1xuICAgICAgICBwYXJlbnQ6IHQucGFyZW50LFxuICAgICAgICBzdHJ1Y3R1cmVkUXVlcnk6IHQuc3RydWN0dXJlZFF1ZXJ5XG4gICAgfSk7XG4gICAgcmV0dXJuIFwiTEFTVFwiID09PSB0LmxpbWl0VHlwZSA/IFhuKGUsIGUubGltaXQsIFwiTFwiIC8qIExpbWl0VHlwZS5MYXN0ICovKSA6IGU7XG59XG5cbi8qKiBFbmNvZGVzIGEgTmFtZWRRdWVyeSBwcm90byBvYmplY3QgdG8gYSBOYW1lZFF1ZXJ5IG1vZGVsIG9iamVjdC4gKi9cbi8qKiBFbmNvZGVzIGEgRGJEb2N1bWVudE92ZXJsYXkgb2JqZWN0IHRvIGFuIE92ZXJsYXkgbW9kZWwgb2JqZWN0LiAqL1xuZnVuY3Rpb24gcHIodCwgZSkge1xuICAgIHJldHVybiBuZXcgZWkoZS5sYXJnZXN0QmF0Y2hJZCwgemkodC5mZSwgZS5vdmVybGF5TXV0YXRpb24pKTtcbn1cblxuLyoqIERlY29kZXMgYW4gT3ZlcmxheSBtb2RlbCBvYmplY3QgaW50byBhIERiRG9jdW1lbnRPdmVybGF5IG9iamVjdC4gKi9cbi8qKlxuICogUmV0dXJucyB0aGUgRGJEb2N1bWVudE92ZXJsYXlLZXkgY29ycmVzcG9uZGluZyB0byB0aGUgZ2l2ZW4gdXNlciBhbmRcbiAqIGRvY3VtZW50IGtleS5cbiAqL1xuZnVuY3Rpb24gSXIodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICByZXR1cm4gWyB0LCBxdChlLnBhdGgucG9wTGFzdCgpKSwgbiBdO1xufVxuXG5mdW5jdGlvbiBUcih0LCBlLCBuLCBzKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5kZXhJZDogdCxcbiAgICAgICAgdWlkOiBlLnVpZCB8fCBcIlwiLFxuICAgICAgICBzZXF1ZW5jZU51bWJlcjogbixcbiAgICAgICAgcmVhZFRpbWU6IGRyKHMucmVhZFRpbWUpLFxuICAgICAgICBkb2N1bWVudEtleTogcXQocy5kb2N1bWVudEtleS5wYXRoKSxcbiAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IHMubGFyZ2VzdEJhdGNoSWRcbiAgICB9O1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBFciB7XG4gICAgZ2V0QnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gQXIodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaWQ6IChlID0gdCkuYnVuZGxlSWQsXG4gICAgICAgICAgICAgICAgY3JlYXRlVGltZTogd3IoZS5jcmVhdGVUaW1lKSxcbiAgICAgICAgICAgICAgICB2ZXJzaW9uOiBlLnZlcnNpb25cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIERiQnVuZGxlIHRvIGEgQnVuZGxlTWV0YWRhdGEgb2JqZWN0LiAqL1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHRvIGEgRGJCdW5kbGUuICovICAgICAgICB9KSk7XG4gICAgfVxuICAgIHNhdmVCdW5kbGVNZXRhZGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBBcih0KS5wdXQoe1xuICAgICAgICAgICAgYnVuZGxlSWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiBkcihOaShuLmNyZWF0ZVRpbWUpKSxcbiAgICAgICAgICAgIHZlcnNpb246IG4udmVyc2lvblxuICAgICAgICB9KTtcbiAgICAgICAgdmFyIG47XG4gICAgICAgIC8qKiBFbmNvZGVzIGEgRGJOYW1lZFF1ZXJ5IHRvIGEgTmFtZWRRdWVyeS4gKi8gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gdnIodCkuZ2V0KGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgaWYgKHQpIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogKGUgPSB0KS5uYW1lLFxuICAgICAgICAgICAgICAgIHF1ZXJ5OiB5cihlLmJ1bmRsZWRRdWVyeSksXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IHdyKGUucmVhZFRpbWUpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdmFyIGU7XG4gICAgICAgICAgICAvKiogRW5jb2RlcyBhIE5hbWVkUXVlcnkgZnJvbSBhIGJ1bmRsZSBwcm90byB0byBhIERiTmFtZWRRdWVyeS4gKi8gICAgICAgIH0pKTtcbiAgICB9XG4gICAgc2F2ZU5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gdnIodCkucHV0KGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdC5uYW1lLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBkcihOaSh0LnJlYWRUaW1lKSksXG4gICAgICAgICAgICAgICAgYnVuZGxlZFF1ZXJ5OiB0LmJ1bmRsZWRRdWVyeVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgYnVuZGxlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gQXIodCkge1xuICAgIHJldHVybiBfZSh0LCBcImJ1bmRsZXNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBuYW1lZFF1ZXJpZXMgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIHZyKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJuYW1lZFF1ZXJpZXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudGF0aW9uIG9mIERvY3VtZW50T3ZlcmxheUNhY2hlIHVzaW5nIEluZGV4ZWREYi5cbiAqLyBjbGFzcyBSciB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgZG9jdW1lbnQgc2VyaWFsaXplci5cbiAgICAgKiBAcGFyYW0gdXNlcklkIC0gVGhlIHVzZXJJZCBmb3Igd2hpY2ggd2UgYXJlIGFjY2Vzc2luZyBvdmVybGF5cy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuc2VyaWFsaXplciA9IHQsIHRoaXMudXNlcklkID0gZTtcbiAgICB9XG4gICAgc3RhdGljIGRlKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUudWlkIHx8IFwiXCI7XG4gICAgICAgIHJldHVybiBuZXcgUnIodCwgbik7XG4gICAgfVxuICAgIGdldE92ZXJsYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gUHIodCkuZ2V0KElyKHRoaXMudXNlcklkLCBlKSkubmV4dCgodCA9PiB0ID8gcHIodGhpcy5zZXJpYWxpemVyLCB0KSA6IG51bGwpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZnMoKTtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2goZSwgKGUgPT4gdGhpcy5nZXRPdmVybGF5KHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbnVsbCAhPT0gdCAmJiBuLnNldChlLCB0KTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gbikpO1xuICAgIH1cbiAgICBzYXZlT3ZlcmxheXModCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCBpKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbmV3IGVpKGUsIGkpO1xuICAgICAgICAgICAgcy5wdXNoKHRoaXMud2UodCwgcikpO1xuICAgICAgICB9KSksIFJ0LndhaXRGb3Iocyk7XG4gICAgfVxuICAgIHJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgU2V0O1xuICAgICAgICAvLyBHZXQgdGhlIHNldCBvZiB1bmlxdWUgY29sbGVjdGlvbiBwYXRocy5cbiAgICAgICAgICAgICAgICBlLmZvckVhY2goKHQgPT4gcy5hZGQocXQodC5nZXRDb2xsZWN0aW9uUGF0aCgpKSkpKTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICByZXR1cm4gcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBlLCBuIF0sIFsgdGhpcy51c2VySWQsIGUsIG4gKyAxIF0sIFxuICAgICAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICAgICAgaS5wdXNoKFByKHQpLkooXCJjb2xsZWN0aW9uUGF0aE92ZXJsYXlJbmRleFwiLCBzKSk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihpKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGZzKCksIGkgPSBxdChlKSwgciA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGksIG4gXSwgWyB0aGlzLnVzZXJJZCwgaSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBQcih0KS5qKFwiY29sbGVjdGlvblBhdGhPdmVybGF5SW5kZXhcIiwgcikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBwcih0aGlzLnNlcmlhbGl6ZXIsIGUpO1xuICAgICAgICAgICAgICAgIHMuc2V0KHQuZ2V0S2V5KCksIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHM7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gZnMoKTtcbiAgICAgICAgbGV0IHI7XG4gICAgICAgIC8vIFdlIHdhbnQgYmF0Y2ggSURzIGxhcmdlciB0aGFuIGBzaW5jZUJhdGNoSWRgLCBhbmQgc28gdGhlIGxvd2VyIGJvdW5kXG4gICAgICAgIC8vIGlzIG5vdCBpbmNsdXNpdmUuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IElEQktleVJhbmdlLmJvdW5kKFsgdGhpcy51c2VySWQsIGUsIG4gXSwgWyB0aGlzLnVzZXJJZCwgZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMCk7XG4gICAgICAgIHJldHVybiBQcih0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImNvbGxlY3Rpb25Hcm91cE92ZXJsYXlJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IG9cbiAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICAvLyBXZSBkbyBub3Qgd2FudCB0byByZXR1cm4gcGFydGlhbCBiYXRjaCBvdmVybGF5cywgZXZlbiBpZiB0aGUgc2l6ZVxuICAgICAgICAgICAgLy8gb2YgdGhlIHJlc3VsdCBzZXQgZXhjZWVkcyB0aGUgZ2l2ZW4gYGNvdW50YCBhcmd1bWVudC4gVGhlcmVmb3JlLCB3ZVxuICAgICAgICAgICAgLy8gY29udGludWUgdG8gYWdncmVnYXRlIHJlc3VsdHMgZXZlbiBhZnRlciB0aGUgcmVzdWx0IHNpemUgZXhjZWVkc1xuICAgICAgICAgICAgLy8gYGNvdW50YCBpZiB0aGVyZSBhcmUgbW9yZSBvdmVybGF5cyBmcm9tIHRoZSBgY3VycmVudEJhdGNoSWRgLlxuICAgICAgICAgICAgY29uc3QgbyA9IHByKHRoaXMuc2VyaWFsaXplciwgZSk7XG4gICAgICAgICAgICBpLnNpemUoKSA8IHMgfHwgby5sYXJnZXN0QmF0Y2hJZCA9PT0gciA/IChpLnNldChvLmdldEtleSgpLCBvKSwgciA9IG8ubGFyZ2VzdEJhdGNoSWQpIDogbi5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIHdlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFByKHQpLnB1dChmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBjb25zdCBbcywgaSwgcl0gPSBJcihlLCBuLm11dGF0aW9uLmtleSk7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHVzZXJJZDogZSxcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uUGF0aDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudElkOiByLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogbi5tdXRhdGlvbi5rZXkuZ2V0Q29sbGVjdGlvbkdyb3VwKCksXG4gICAgICAgICAgICAgICAgbGFyZ2VzdEJhdGNoSWQ6IG4ubGFyZ2VzdEJhdGNoSWQsXG4gICAgICAgICAgICAgICAgb3ZlcmxheU11dGF0aW9uOiBqaSh0LmZlLCBuLm11dGF0aW9uKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0aGlzLnNlcmlhbGl6ZXIsIHRoaXMudXNlcklkLCBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgZG9jdW1lbnQgb3ZlcmxheSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gUHIodCkge1xuICAgIHJldHVybiBfZSh0LCBcImRvY3VtZW50T3ZlcmxheXNcIik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBOb3RlOiBUaGlzIGNvZGUgaXMgY29waWVkIGZyb20gdGhlIGJhY2tlbmQuIENvZGUgdGhhdCBpcyBub3QgdXNlZCBieVxuLy8gRmlyZXN0b3JlIHdhcyByZW1vdmVkLlxuLyoqIEZpcmVzdG9yZSBpbmRleCB2YWx1ZSB3cml0ZXIuICAqL1xuY2xhc3MgYnIge1xuICAgIGNvbnN0cnVjdG9yKCkge31cbiAgICAvLyBUaGUgd3JpdGUgbWV0aG9kcyBiZWxvdyBzaG9ydC1jaXJjdWl0IHdyaXRpbmcgdGVybWluYXRvcnMgZm9yIHZhbHVlc1xuICAgIC8vIGNvbnRhaW5pbmcgYSAodGVybWluYXRpbmcpIHRydW5jYXRlZCB2YWx1ZS5cbiAgICAvLyBBcyBhbiBleGFtcGxlLCBjb25zaWRlciB0aGUgcmVzdWx0aW5nIGVuY29kaW5nIGZvcjpcbiAgICAvLyBbXCJiYXJcIiwgWzIsIFwiZm9vXCJdXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRFUk0sIFRFUk0sIFRFUk0pXG4gICAgLy8gW1wiYmFyXCIsIFsyLCB0cnVuY2F0ZWQoXCJmb29cIildXSAtPiAoU1RSSU5HLCBcImJhclwiLCBURVJNLCBBUlJBWSwgTlVNQkVSLCAyLCBTVFJJTkcsIFwiZm9vXCIsIFRSVU5DKVxuICAgIC8vIFtcImJhclwiLCB0cnVuY2F0ZWQoW1wiZm9vXCJdKV0gLT4gKFNUUklORywgXCJiYXJcIiwgVEVSTSwgQVJSQVkuIFNUUklORywgXCJmb29cIiwgVEVSTSwgVFJVTkMpXG4gICAgLyoqIFdyaXRlcyBhbiBpbmRleCB2YWx1ZS4gICovXG4gICAgX2UodCwgZSkge1xuICAgICAgICB0aGlzLm1lKHQsIGUpLCBcbiAgICAgICAgLy8gV3JpdGUgc2VwYXJhdG9yIHRvIHNwbGl0IGluZGV4IHZhbHVlc1xuICAgICAgICAvLyAoc2VlIGdvL2ZpcmVzdG9yZS1zdG9yYWdlLWZvcm1hdCNlbmNvZGluZ3MpLlxuICAgICAgICBlLmdlKCk7XG4gICAgfVxuICAgIG1lKHQsIGUpIHtcbiAgICAgICAgaWYgKFwibnVsbFZhbHVlXCIgaW4gdCkgdGhpcy55ZShlLCA1KTsgZWxzZSBpZiAoXCJib29sZWFuVmFsdWVcIiBpbiB0KSB0aGlzLnllKGUsIDEwKSwgXG4gICAgICAgIGUucGUodC5ib29sZWFuVmFsdWUgPyAxIDogMCk7IGVsc2UgaWYgKFwiaW50ZWdlclZhbHVlXCIgaW4gdCkgdGhpcy55ZShlLCAxNSksIGUucGUoQ2UodC5pbnRlZ2VyVmFsdWUpKTsgZWxzZSBpZiAoXCJkb3VibGVWYWx1ZVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBDZSh0LmRvdWJsZVZhbHVlKTtcbiAgICAgICAgICAgIGlzTmFOKG4pID8gdGhpcy55ZShlLCAxMykgOiAodGhpcy55ZShlLCAxNSksIEJ0KG4pID8gXG4gICAgICAgICAgICAvLyAtMC4wLCAwIGFuZCAwLjAgYXJlIGFsbCBjb25zaWRlcmVkIHRoZSBzYW1lXG4gICAgICAgICAgICBlLnBlKDApIDogZS5wZShuKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJ0aW1lc3RhbXBWYWx1ZVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0LnRpbWVzdGFtcFZhbHVlO1xuICAgICAgICAgICAgdGhpcy55ZShlLCAyMCksIFwic3RyaW5nXCIgPT0gdHlwZW9mIG4gPyBlLkllKG4pIDogKGUuSWUoYCR7bi5zZWNvbmRzIHx8IFwiXCJ9YCksIGUucGUobi5uYW5vcyB8fCAwKSk7XG4gICAgICAgIH0gZWxzZSBpZiAoXCJzdHJpbmdWYWx1ZVwiIGluIHQpIHRoaXMuVGUodC5zdHJpbmdWYWx1ZSwgZSksIHRoaXMuRWUoZSk7IGVsc2UgaWYgKFwiYnl0ZXNWYWx1ZVwiIGluIHQpIHRoaXMueWUoZSwgMzApLCBcbiAgICAgICAgZS5BZSh4ZSh0LmJ5dGVzVmFsdWUpKSwgdGhpcy5FZShlKTsgZWxzZSBpZiAoXCJyZWZlcmVuY2VWYWx1ZVwiIGluIHQpIHRoaXMudmUodC5yZWZlcmVuY2VWYWx1ZSwgZSk7IGVsc2UgaWYgKFwiZ2VvUG9pbnRWYWx1ZVwiIGluIHQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0Lmdlb1BvaW50VmFsdWU7XG4gICAgICAgICAgICB0aGlzLnllKGUsIDQ1KSwgZS5wZShuLmxhdGl0dWRlIHx8IDApLCBlLnBlKG4ubG9uZ2l0dWRlIHx8IDApO1xuICAgICAgICB9IGVsc2UgXCJtYXBWYWx1ZVwiIGluIHQgPyBlbih0KSA/IHRoaXMueWUoZSwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpIDogKHRoaXMuUmUodC5tYXBWYWx1ZSwgZSksIFxuICAgICAgICB0aGlzLkVlKGUpKSA6IFwiYXJyYXlWYWx1ZVwiIGluIHQgPyAodGhpcy5QZSh0LmFycmF5VmFsdWUsIGUpLCB0aGlzLkVlKGUpKSA6IE8oKTtcbiAgICB9XG4gICAgVGUodCwgZSkge1xuICAgICAgICB0aGlzLnllKGUsIDI1KSwgdGhpcy5iZSh0LCBlKTtcbiAgICB9XG4gICAgYmUodCwgZSkge1xuICAgICAgICBlLkllKHQpO1xuICAgIH1cbiAgICBSZSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0LmZpZWxkcyB8fCB7fTtcbiAgICAgICAgdGhpcy55ZShlLCA1NSk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBPYmplY3Qua2V5cyhuKSkgdGhpcy5UZSh0LCBlKSwgdGhpcy5tZShuW3RdLCBlKTtcbiAgICB9XG4gICAgUGUodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdC52YWx1ZXMgfHwgW107XG4gICAgICAgIHRoaXMueWUoZSwgNTApO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgbikgdGhpcy5tZSh0LCBlKTtcbiAgICB9XG4gICAgdmUodCwgZSkge1xuICAgICAgICB0aGlzLnllKGUsIDM3KTtcbiAgICAgICAgaHQuZnJvbU5hbWUodCkucGF0aC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMueWUoZSwgNjApLCB0aGlzLmJlKHQsIGUpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHllKHQsIGUpIHtcbiAgICAgICAgdC5wZShlKTtcbiAgICB9XG4gICAgRWUodCkge1xuICAgICAgICAvLyBXaGlsZSB0aGUgU0RLIGRvZXMgbm90IGltcGxlbWVudCB0cnVuY2F0aW9uLCB0aGUgdHJ1bmNhdGlvbiBtYXJrZXIgaXNcbiAgICAgICAgLy8gdXNlZCB0byB0ZXJtaW5hdGUgYWxsIHZhcmlhYmxlIGxlbmd0aCB2YWx1ZXMgKHdoaWNoIGFyZSBzdHJpbmdzLCBieXRlcyxcbiAgICAgICAgLy8gcmVmZXJlbmNlcywgYXJyYXlzIGFuZCBtYXBzKS5cbiAgICAgICAgdC5wZSgyKTtcbiAgICB9XG59XG5cbmJyLlZlID0gbmV3IGJyO1xuXG4vKipcbiAqIENvdW50cyB0aGUgbnVtYmVyIG9mIHplcm9zIGluIGEgYnl0ZS5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovXG5mdW5jdGlvbiBWcih0KSB7XG4gICAgaWYgKDAgPT09IHQpIHJldHVybiA4O1xuICAgIGxldCBlID0gMDtcbiAgICByZXR1cm4gdCA+PiA0ID09IDAgJiYgKFxuICAgIC8vIFRlc3QgaWYgdGhlIGZpcnN0IGZvdXIgYml0cyBhcmUgemVyby5cbiAgICBlICs9IDQsIHQgPDw9IDQpLCB0ID4+IDYgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgZmlyc3QgdHdvIChvciBuZXh0IHR3bykgYml0cyBhcmUgemVyby5cbiAgICBlICs9IDIsIHQgPDw9IDIpLCB0ID4+IDcgPT0gMCAmJiAoXG4gICAgLy8gVGVzdCBpZiB0aGUgcmVtYWluaW5nIGJpdCBpcyB6ZXJvLlxuICAgIGUgKz0gMSksIGU7XG59XG5cbi8qKiBDb3VudHMgdGhlIG51bWJlciBvZiBsZWFkaW5nIHplcm9zIGluIHRoZSBnaXZlbiBieXRlIGFycmF5LiAqL1xuLyoqXG4gKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgYnl0ZXMgcmVxdWlyZWQgdG8gc3RvcmUgXCJ2YWx1ZVwiLiBMZWFkaW5nIHplcm8gYnl0ZXNcbiAqIGFyZSBza2lwcGVkLlxuICovXG5mdW5jdGlvbiBTcih0KSB7XG4gICAgLy8gVGhpcyBpcyBqdXN0IHRoZSBudW1iZXIgb2YgYnl0ZXMgZm9yIHRoZSB1bnNpZ25lZCByZXByZXNlbnRhdGlvbiBvZiB0aGUgbnVtYmVyLlxuICAgIGNvbnN0IGUgPSA2NCAtIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IDg7ICsrbikge1xuICAgICAgICAgICAgY29uc3QgcyA9IFZyKDI1NSAmIHRbbl0pO1xuICAgICAgICAgICAgaWYgKGUgKz0gcywgOCAhPT0gcykgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgfSh0KTtcbiAgICByZXR1cm4gTWF0aC5jZWlsKGUgLyA4KTtcbn1cblxuLyoqXG4gKiBPcmRlcmVkQ29kZVdyaXRlciBpcyBhIG1pbmltYWwtYWxsb2NhdGlvbiBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgd3JpdGluZ1xuICogYmVoYXZpb3IgZGVmaW5lZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgY29kZSBpcyBwb3J0ZWQgZnJvbSBpdHMgSmF2YSBjb3VudGVycGFydC5cbiAqLyBjbGFzcyBEciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gbmV3IFVpbnQ4QXJyYXkoMTAyNCksIHRoaXMucG9zaXRpb24gPSAwO1xuICAgIH1cbiAgICBTZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0W1N5bWJvbC5pdGVyYXRvcl0oKTtcbiAgICAgICAgbGV0IG4gPSBlLm5leHQoKTtcbiAgICAgICAgZm9yICg7IW4uZG9uZTsgKSB0aGlzLkRlKG4udmFsdWUpLCBuID0gZS5uZXh0KCk7XG4gICAgICAgIHRoaXMuQ2UoKTtcbiAgICB9XG4gICAgeGUodCkge1xuICAgICAgICBjb25zdCBlID0gdFtTeW1ib2wuaXRlcmF0b3JdKCk7XG4gICAgICAgIGxldCBuID0gZS5uZXh0KCk7XG4gICAgICAgIGZvciAoOyFuLmRvbmU7ICkgdGhpcy5OZShuLnZhbHVlKSwgbiA9IGUubmV4dCgpO1xuICAgICAgICB0aGlzLmtlKCk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgdXRmOCBieXRlcyBpbnRvIHRoaXMgYnl0ZSBzZXF1ZW5jZSwgYXNjZW5kaW5nLiAqLyAgICBNZSh0KSB7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gZS5jaGFyQ29kZUF0KDApO1xuICAgICAgICAgICAgaWYgKHQgPCAxMjgpIHRoaXMuRGUodCk7IGVsc2UgaWYgKHQgPCAyMDQ4KSB0aGlzLkRlKDk2MCB8IHQgPj4+IDYpLCB0aGlzLkRlKDEyOCB8IDYzICYgdCk7IGVsc2UgaWYgKGUgPCBcIlxcdWQ4MDBcIiB8fCBcIlxcdWRiZmZcIiA8IGUpIHRoaXMuRGUoNDgwIHwgdCA+Pj4gMTIpLCBcbiAgICAgICAgICAgIHRoaXMuRGUoMTI4IHwgNjMgJiB0ID4+PiA2KSwgdGhpcy5EZSgxMjggfCA2MyAmIHQpOyBlbHNlIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gZS5jb2RlUG9pbnRBdCgwKTtcbiAgICAgICAgICAgICAgICB0aGlzLkRlKDI0MCB8IHQgPj4+IDE4KSwgdGhpcy5EZSgxMjggfCA2MyAmIHQgPj4+IDEyKSwgdGhpcy5EZSgxMjggfCA2MyAmIHQgPj4+IDYpLCBcbiAgICAgICAgICAgICAgICB0aGlzLkRlKDEyOCB8IDYzICYgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5DZSgpO1xuICAgIH1cbiAgICAvKiogV3JpdGVzIHV0ZjggYnl0ZXMgaW50byB0aGlzIGJ5dGUgc2VxdWVuY2UsIGRlc2NlbmRpbmcgKi8gICAgJGUodCkge1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdCkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgICAgIGlmICh0IDwgMTI4KSB0aGlzLk5lKHQpOyBlbHNlIGlmICh0IDwgMjA0OCkgdGhpcy5OZSg5NjAgfCB0ID4+PiA2KSwgdGhpcy5OZSgxMjggfCA2MyAmIHQpOyBlbHNlIGlmIChlIDwgXCJcXHVkODAwXCIgfHwgXCJcXHVkYmZmXCIgPCBlKSB0aGlzLk5lKDQ4MCB8IHQgPj4+IDEyKSwgXG4gICAgICAgICAgICB0aGlzLk5lKDEyOCB8IDYzICYgdCA+Pj4gNiksIHRoaXMuTmUoMTI4IHwgNjMgJiB0KTsgZWxzZSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IGUuY29kZVBvaW50QXQoMCk7XG4gICAgICAgICAgICAgICAgdGhpcy5OZSgyNDAgfCB0ID4+PiAxOCksIHRoaXMuTmUoMTI4IHwgNjMgJiB0ID4+PiAxMiksIHRoaXMuTmUoMTI4IHwgNjMgJiB0ID4+PiA2KSwgXG4gICAgICAgICAgICAgICAgdGhpcy5OZSgxMjggfCA2MyAmIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMua2UoKTtcbiAgICB9XG4gICAgT2UodCkge1xuICAgICAgICAvLyBWYWx1ZXMgYXJlIGVuY29kZWQgd2l0aCBhIHNpbmdsZSBieXRlIGxlbmd0aCBwcmVmaXgsIGZvbGxvd2VkIGJ5IHRoZVxuICAgICAgICAvLyBhY3R1YWwgdmFsdWUgaW4gYmlnLWVuZGlhbiBmb3JtYXQgd2l0aCBsZWFkaW5nIDAgYnl0ZXMgZHJvcHBlZC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuRmUodCksIG4gPSBTcihlKTtcbiAgICAgICAgdGhpcy5CZSgxICsgbiksIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSAyNTUgJiBuO1xuICAgICAgICAvLyBXcml0ZSB0aGUgbGVuZ3RoXG4gICAgICAgIGZvciAobGV0IHQgPSBlLmxlbmd0aCAtIG47IHQgPCBlLmxlbmd0aDsgKyt0KSB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gMjU1ICYgZVt0XTtcbiAgICB9XG4gICAgTGUodCkge1xuICAgICAgICAvLyBWYWx1ZXMgYXJlIGVuY29kZWQgd2l0aCBhIHNpbmdsZSBieXRlIGxlbmd0aCBwcmVmaXgsIGZvbGxvd2VkIGJ5IHRoZVxuICAgICAgICAvLyBpbnZlcnRlZCB2YWx1ZSBpbiBiaWctZW5kaWFuIGZvcm1hdCB3aXRoIGxlYWRpbmcgMCBieXRlcyBkcm9wcGVkLlxuICAgICAgICBjb25zdCBlID0gdGhpcy5GZSh0KSwgbiA9IFNyKGUpO1xuICAgICAgICB0aGlzLkJlKDEgKyBuKSwgdGhpcy5idWZmZXJbdGhpcy5wb3NpdGlvbisrXSA9IH4oMjU1ICYgbik7XG4gICAgICAgIC8vIFdyaXRlIHRoZSBsZW5ndGhcbiAgICAgICAgZm9yIChsZXQgdCA9IGUubGVuZ3RoIC0gbjsgdCA8IGUubGVuZ3RoOyArK3QpIHRoaXMuYnVmZmVyW3RoaXMucG9zaXRpb24rK10gPSB+KDI1NSAmIGVbdF0pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBXcml0ZXMgdGhlIFwiaW5maW5pdHlcIiBieXRlIHNlcXVlbmNlIHRoYXQgc29ydHMgYWZ0ZXIgYWxsIG90aGVyIGJ5dGVcbiAgICAgKiBzZXF1ZW5jZXMgd3JpdHRlbiBpbiBhc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIHFlKCkge1xuICAgICAgICB0aGlzLlVlKDI1NSksIHRoaXMuVWUoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogV3JpdGVzIHRoZSBcImluZmluaXR5XCIgYnl0ZSBzZXF1ZW5jZSB0aGF0IHNvcnRzIGJlZm9yZSBhbGwgb3RoZXIgYnl0ZVxuICAgICAqIHNlcXVlbmNlcyB3cml0dGVuIGluIGRlc2NlbmRpbmcgb3JkZXIuXG4gICAgICovICAgIEtlKCkge1xuICAgICAgICB0aGlzLkdlKDI1NSksIHRoaXMuR2UoMjU1KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBidWZmZXIgc3VjaCB0aGF0IGl0IGlzIHRoZSBzYW1lIGFzIHdoZW4gaXQgd2FzIG5ld2x5XG4gICAgICogY29uc3RydWN0ZWQuXG4gICAgICovICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gMDtcbiAgICB9XG4gICAgc2VlZCh0KSB7XG4gICAgICAgIHRoaXMuQmUodC5sZW5ndGgpLCB0aGlzLmJ1ZmZlci5zZXQodCwgdGhpcy5wb3NpdGlvbiksIHRoaXMucG9zaXRpb24gKz0gdC5sZW5ndGg7XG4gICAgfVxuICAgIC8qKiBNYWtlcyBhIGNvcHkgb2YgdGhlIGVuY29kZWQgYnl0ZXMgaW4gdGhpcyBidWZmZXIuICAqLyAgICBRZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMucG9zaXRpb24pO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBFbmNvZGVzIGB2YWxgIGludG8gYW4gZW5jb2Rpbmcgc28gdGhhdCB0aGUgb3JkZXIgbWF0Y2hlcyB0aGUgSUVFRSA3NTRcbiAgICAgKiBmbG9hdGluZy1wb2ludCBjb21wYXJpc29uIHJlc3VsdHMgd2l0aCB0aGUgZm9sbG93aW5nIGV4Y2VwdGlvbnM6XG4gICAgICogICAtMC4wIDwgMC4wXG4gICAgICogICBhbGwgbm9uLU5hTiA8IE5hTlxuICAgICAqICAgTmFOID0gTmFOXG4gICAgICovICAgIEZlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAvKiogQ29udmVydHMgYSBKYXZhU2NyaXB0IG51bWJlciB0byBhIGJ5dGUgYXJyYXkgKHVzaW5nIGJpZyBlbmRpYW4gZW5jb2RpbmcpLiAqL1xuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcig4KSk7XG4gICAgICAgICAgICByZXR1cm4gZS5zZXRGbG9hdDY0KDAsIHQsIC8qIGxpdHRsZUVuZGlhbj0gKi8gITEpLCBuZXcgVWludDhBcnJheShlLmJ1ZmZlcik7XG4gICAgICAgIH0odCksIG4gPSAwICE9ICgxMjggJiBlWzBdKTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGZpcnN0IGJpdCBpcyBzZXQuIFdlIHVzZSBhIGJpdCBtYXNrIHNpbmNlIHZhbHVlWzBdIGlzXG4gICAgICAgIC8vIGVuY29kZWQgYXMgYSBudW1iZXIgZnJvbSAwIHRvIDI1NS5cbiAgICAgICAgICAgICAgICAvLyBSZXZlcnQgdGhlIHR3byBjb21wbGVtZW50IHRvIGdldCBuYXR1cmFsIG9yZGVyaW5nXG4gICAgICAgIGVbMF0gXj0gbiA/IDI1NSA6IDEyODtcbiAgICAgICAgZm9yIChsZXQgdCA9IDE7IHQgPCBlLmxlbmd0aDsgKyt0KSBlW3RdIF49IG4gPyAyNTUgOiAwO1xuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLyoqIFdyaXRlcyBhIHNpbmdsZSBieXRlIGFzY2VuZGluZyB0byB0aGUgYnVmZmVyLiAqLyAgICBEZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAyNTUgJiB0O1xuICAgICAgICAwID09PSBlID8gKHRoaXMuVWUoMCksIHRoaXMuVWUoMjU1KSkgOiAyNTUgPT09IGUgPyAodGhpcy5VZSgyNTUpLCB0aGlzLlVlKDApKSA6IHRoaXMuVWUoZSk7XG4gICAgfVxuICAgIC8qKiBXcml0ZXMgYSBzaW5nbGUgYnl0ZSBkZXNjZW5kaW5nIHRvIHRoZSBidWZmZXIuICAqLyAgICBOZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSAyNTUgJiB0O1xuICAgICAgICAwID09PSBlID8gKHRoaXMuR2UoMCksIHRoaXMuR2UoMjU1KSkgOiAyNTUgPT09IGUgPyAodGhpcy5HZSgyNTUpLCB0aGlzLkdlKDApKSA6IHRoaXMuR2UodCk7XG4gICAgfVxuICAgIENlKCkge1xuICAgICAgICB0aGlzLlVlKDApLCB0aGlzLlVlKDEpO1xuICAgIH1cbiAgICBrZSgpIHtcbiAgICAgICAgdGhpcy5HZSgwKSwgdGhpcy5HZSgxKTtcbiAgICB9XG4gICAgVWUodCkge1xuICAgICAgICB0aGlzLkJlKDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gdDtcbiAgICB9XG4gICAgR2UodCkge1xuICAgICAgICB0aGlzLkJlKDEpLCB0aGlzLmJ1ZmZlclt0aGlzLnBvc2l0aW9uKytdID0gfnQ7XG4gICAgfVxuICAgIEJlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQgKyB0aGlzLnBvc2l0aW9uO1xuICAgICAgICBpZiAoZSA8PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybjtcbiAgICAgICAgLy8gVHJ5IGRvdWJsaW5nLlxuICAgICAgICAgICAgICAgIGxldCBuID0gMiAqIHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgLy8gU3RpbGwgbm90IGJpZyBlbm91Z2g/IEp1c3QgYWxsb2NhdGUgdGhlIHJpZ2h0IHNpemUuXG4gICAgICAgICAgICAgICAgbiA8IGUgJiYgKG4gPSBlKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBuZXcgYnVmZmVyLlxuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgVWludDhBcnJheShuKTtcbiAgICAgICAgcy5zZXQodGhpcy5idWZmZXIpLCAvLyBjb3B5IG9sZCBkYXRhXG4gICAgICAgIHRoaXMuYnVmZmVyID0gcztcbiAgICB9XG59XG5cbmNsYXNzIENyIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuamUgPSB0O1xuICAgIH1cbiAgICBBZSh0KSB7XG4gICAgICAgIHRoaXMuamUuU2UodCk7XG4gICAgfVxuICAgIEllKHQpIHtcbiAgICAgICAgdGhpcy5qZS5NZSh0KTtcbiAgICB9XG4gICAgcGUodCkge1xuICAgICAgICB0aGlzLmplLk9lKHQpO1xuICAgIH1cbiAgICBnZSgpIHtcbiAgICAgICAgdGhpcy5qZS5xZSgpO1xuICAgIH1cbn1cblxuY2xhc3MgeHIge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5qZSA9IHQ7XG4gICAgfVxuICAgIEFlKHQpIHtcbiAgICAgICAgdGhpcy5qZS54ZSh0KTtcbiAgICB9XG4gICAgSWUodCkge1xuICAgICAgICB0aGlzLmplLiRlKHQpO1xuICAgIH1cbiAgICBwZSh0KSB7XG4gICAgICAgIHRoaXMuamUuTGUodCk7XG4gICAgfVxuICAgIGdlKCkge1xuICAgICAgICB0aGlzLmplLktlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEltcGxlbWVudHMgYERpcmVjdGlvbmFsSW5kZXhCeXRlRW5jb2RlcmAgdXNpbmcgYE9yZGVyZWRDb2RlV3JpdGVyYCBmb3IgdGhlXG4gKiBhY3R1YWwgZW5jb2RpbmcuXG4gKi8gY2xhc3MgTnIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmplID0gbmV3IERyLCB0aGlzLnplID0gbmV3IENyKHRoaXMuamUpLCB0aGlzLldlID0gbmV3IHhyKHRoaXMuamUpO1xuICAgIH1cbiAgICBzZWVkKHQpIHtcbiAgICAgICAgdGhpcy5qZS5zZWVkKHQpO1xuICAgIH1cbiAgICBIZSh0KSB7XG4gICAgICAgIHJldHVybiAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IHQgPyB0aGlzLnplIDogdGhpcy5XZTtcbiAgICB9XG4gICAgUWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmplLlFlKCk7XG4gICAgfVxuICAgIHJlc2V0KCkge1xuICAgICAgICB0aGlzLmplLnJlc2V0KCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIFJlcHJlc2VudHMgYW4gaW5kZXggZW50cnkgc2F2ZWQgYnkgdGhlIFNESyBpbiBwZXJzaXN0ZWQgc3RvcmFnZS4gKi8gY2xhc3Mga3Ige1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5pbmRleElkID0gdCwgdGhpcy5kb2N1bWVudEtleSA9IGUsIHRoaXMuYXJyYXlWYWx1ZSA9IG4sIHRoaXMuZGlyZWN0aW9uYWxWYWx1ZSA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgYW4gSW5kZXhFbnRyeSBlbnRyeSB0aGF0IHNvcnRzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBjdXJyZW50XG4gICAgICogZGlyZWN0aW9uYWwgdmFsdWUuXG4gICAgICovICAgIEplKCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5kaXJlY3Rpb25hbFZhbHVlLmxlbmd0aCwgZSA9IDAgPT09IHQgfHwgMjU1ID09PSB0aGlzLmRpcmVjdGlvbmFsVmFsdWVbdCAtIDFdID8gdCArIDEgOiB0LCBuID0gbmV3IFVpbnQ4QXJyYXkoZSk7XG4gICAgICAgIHJldHVybiBuLnNldCh0aGlzLmRpcmVjdGlvbmFsVmFsdWUsIDApLCBlICE9PSB0ID8gbi5zZXQoWyAwIF0sIHRoaXMuZGlyZWN0aW9uYWxWYWx1ZS5sZW5ndGgpIDogKytuW24ubGVuZ3RoIC0gMV0sIFxuICAgICAgICBuZXcga3IodGhpcy5pbmRleElkLCB0aGlzLmRvY3VtZW50S2V5LCB0aGlzLmFycmF5VmFsdWUsIG4pO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTXIodCwgZSkge1xuICAgIGxldCBuID0gdC5pbmRleElkIC0gZS5pbmRleElkO1xuICAgIHJldHVybiAwICE9PSBuID8gbiA6IChuID0gJHIodC5hcnJheVZhbHVlLCBlLmFycmF5VmFsdWUpLCAwICE9PSBuID8gbiA6IChuID0gJHIodC5kaXJlY3Rpb25hbFZhbHVlLCBlLmRpcmVjdGlvbmFsVmFsdWUpLCBcbiAgICAwICE9PSBuID8gbiA6IGh0LmNvbXBhcmF0b3IodC5kb2N1bWVudEtleSwgZS5kb2N1bWVudEtleSkpKTtcbn1cblxuZnVuY3Rpb24gJHIodCwgZSkge1xuICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5sZW5ndGggJiYgbiA8IGUubGVuZ3RoOyArK24pIHtcbiAgICAgICAgY29uc3QgcyA9IHRbbl0gLSBlW25dO1xuICAgICAgICBpZiAoMCAhPT0gcykgcmV0dXJuIHM7XG4gICAgfVxuICAgIHJldHVybiB0Lmxlbmd0aCAtIGUubGVuZ3RoO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGxpZ2h0IHF1ZXJ5IHBsYW5uZXIgZm9yIEZpcmVzdG9yZS5cbiAqXG4gKiBUaGlzIGNsYXNzIG1hdGNoZXMgYSBgRmllbGRJbmRleGAgYWdhaW5zdCBhIEZpcmVzdG9yZSBRdWVyeSBgVGFyZ2V0YC4gSXRcbiAqIGRldGVybWluZXMgd2hldGhlciBhIGdpdmVuIGluZGV4IGNhbiBiZSB1c2VkIHRvIHNlcnZlIHRoZSBzcGVjaWZpZWQgdGFyZ2V0LlxuICpcbiAqIFRoZSBmb2xsb3dpbmcgdGFibGUgc2hvd2Nhc2VzIHNvbWUgcG9zc2libGUgaW5kZXggY29uZmlndXJhdGlvbnM6XG4gKlxuICogUXVlcnkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgSW5kZXhcbiAqIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBhIEFTQywgYiBERVNDXG4gKiB3aGVyZSgnYScsICc9PScsICdhJykud2hlcmUoJ2InLCAnPT0nLCAnYicpICAgICAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnPT0nLCAnYScpLndoZXJlKCdiJywgJz09JywgJ2InKSAgICAgICAgIHwgYiBERVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpICAgICAgICAgICAgICAgICAgfCBhIEFTQ1xuICogd2hlcmUoJ2EnLCAnPj0nLCAnYScpLm9yZGVyQnkoJ2EnLCAnZGVzYycpICAgICAgICAgIHwgYSBERVNDXG4gKiB3aGVyZSgnYScsICc+PScsICdhJykub3JkZXJCeSgnYScpLm9yZGVyQnkoJ2InKSAgICAgfCBhIEFTQywgYiBBU0NcbiAqIHdoZXJlKCdhJywgJz49JywgJ2EnKS5vcmRlckJ5KCdhJykub3JkZXJCeSgnYicpICAgICB8IGEgQVNDXG4gKiB3aGVyZSgnYScsICdhcnJheS1jb250YWlucycsICdhJykub3JkZXJCeSgnYicpICAgICAgfCBhIENPTlRBSU5TLCBiIEFTQ0VORElOR1xuICogd2hlcmUoJ2EnLCAnYXJyYXktY29udGFpbnMnLCAnYScpLm9yZGVyQnkoJ2InKSAgICAgIHwgYSBDT05UQUlOU1xuICovIGNsYXNzIE9yIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuY29sbGVjdGlvbklkID0gbnVsbCAhPSB0LmNvbGxlY3Rpb25Hcm91cCA/IHQuY29sbGVjdGlvbkdyb3VwIDogdC5wYXRoLmxhc3RTZWdtZW50KCksIFxuICAgICAgICB0aGlzLlllID0gdC5vcmRlckJ5LCB0aGlzLlhlID0gW107XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0LmZpbHRlcnMpIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBlO1xuICAgICAgICAgICAgdC5pc0luZXF1YWxpdHkoKSA/IHRoaXMuWmUgPSB0IDogdGhpcy5YZS5wdXNoKHQpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgd2hldGhlciB0aGUgaW5kZXggY2FuIGJlIHVzZWQgdG8gc2VydmUgdGhlIFRhcmdldEluZGV4TWF0Y2hlcidzXG4gICAgICogdGFyZ2V0LlxuICAgICAqXG4gICAgICogQW4gaW5kZXggaXMgY29uc2lkZXJlZCBjYXBhYmxlIG9mIHNlcnZpbmcgdGhlIHRhcmdldCB3aGVuOlxuICAgICAqIC0gVGhlIHRhcmdldCB1c2VzIGFsbCBpbmRleCBzZWdtZW50cyBmb3IgaXRzIGZpbHRlcnMgYW5kIG9yZGVyQnkgY2xhdXNlcy5cbiAgICAgKiAgIFRoZSB0YXJnZXQgY2FuIGhhdmUgYWRkaXRpb25hbCBmaWx0ZXIgYW5kIG9yZGVyQnkgY2xhdXNlcywgYnV0IG5vdFxuICAgICAqICAgZmV3ZXIuXG4gICAgICogLSBJZiBhbiBBcnJheUNvbnRhaW5zL0FycmF5Q29udGFpbnNBbnlmaWx0ZXIgaXMgdXNlZCwgdGhlIGluZGV4IG11c3QgYWxzb1xuICAgICAqICAgaGF2ZSBhIGNvcnJlc3BvbmRpbmcgYENPTlRBSU5TYCBzZWdtZW50LlxuICAgICAqIC0gQWxsIGRpcmVjdGlvbmFsIGluZGV4IHNlZ21lbnRzIGNhbiBiZSBtYXBwZWQgdG8gdGhlIHRhcmdldCBhcyBhIHNlcmllcyBvZlxuICAgICAqICAgZXF1YWxpdHkgZmlsdGVycywgYSBzaW5nbGUgaW5lcXVhbGl0eSBmaWx0ZXIgYW5kIGEgc2VyaWVzIG9mIG9yZGVyQnlcbiAgICAgKiAgIGNsYXVzZXMuXG4gICAgICogLSBUaGUgc2VnbWVudHMgdGhhdCByZXByZXNlbnQgdGhlIGVxdWFsaXR5IGZpbHRlcnMgbWF5IGFwcGVhciBvdXQgb2Ygb3JkZXIuXG4gICAgICogLSBUaGUgb3B0aW9uYWwgc2VnbWVudCBmb3IgdGhlIGluZXF1YWxpdHkgZmlsdGVyIG11c3QgYXBwZWFyIGFmdGVyIGFsbFxuICAgICAqICAgZXF1YWxpdHkgc2VnbWVudHMuXG4gICAgICogLSBUaGUgc2VnbWVudHMgdGhhdCByZXByZXNlbnQgdGhhdCBvcmRlckJ5IGNsYXVzZSBvZiB0aGUgdGFyZ2V0IG11c3QgYXBwZWFyXG4gICAgICogICBpbiBvcmRlciBhZnRlciBhbGwgZXF1YWxpdHkgYW5kIGluZXF1YWxpdHkgc2VnbWVudHMuIFNpbmdsZSBvcmRlckJ5XG4gICAgICogICBjbGF1c2VzIGNhbm5vdCBiZSBza2lwcGVkLCBidXQgYSBjb250aW51b3VzIG9yZGVyQnkgc3VmZml4IG1heSBiZVxuICAgICAqICAgb21pdHRlZC5cbiAgICAgKi8gICAgdG4odCkge1xuICAgICAgICBGKHQuY29sbGVjdGlvbkdyb3VwID09PSB0aGlzLmNvbGxlY3Rpb25JZCk7XG4gICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGFycmF5IGVsZW1lbnQsIGZpbmQgYSBtYXRjaGluZyBmaWx0ZXIuXG4gICAgICAgIGNvbnN0IGUgPSBmdCh0KTtcbiAgICAgICAgaWYgKHZvaWQgMCAhPT0gZSAmJiAhdGhpcy5lbihlKSkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gZHQodCk7XG4gICAgICAgIGxldCBzID0gbmV3IFNldCwgaSA9IDAsIHIgPSAwO1xuICAgICAgICAvLyBQcm9jZXNzIGFsbCBlcXVhbGl0aWVzIGZpcnN0LiBFcXVhbGl0aWVzIGNhbiBhcHBlYXIgb3V0IG9mIG9yZGVyLlxuICAgICAgICBmb3IgKDtpIDwgbi5sZW5ndGggJiYgdGhpcy5lbihuW2ldKTsgKytpKSBzID0gcy5hZGQobltpXS5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCkpO1xuICAgICAgICAvLyBJZiB3ZSBhbHJlYWR5IGhhdmUgcHJvY2Vzc2VkIGFsbCBzZWdtZW50cywgYWxsIHNlZ21lbnRzIGFyZSB1c2VkIHRvIHNlcnZlXG4gICAgICAgIC8vIHRoZSBlcXVhbGl0eSBmaWx0ZXJzIGFuZCB3ZSBkbyBub3QgbmVlZCB0byBtYXAgYW55IHNlZ21lbnRzIHRvIHRoZVxuICAgICAgICAvLyB0YXJnZXQncyBpbmVxdWFsaXR5IGFuZCBvcmRlckJ5IGNsYXVzZXMuXG4gICAgICAgICAgICAgICAgaWYgKGkgPT09IG4ubGVuZ3RoKSByZXR1cm4gITA7XG4gICAgICAgIGlmICh2b2lkIDAgIT09IHRoaXMuWmUpIHtcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIGFuIGluZXF1YWxpdHkgZmlsdGVyIGFuZCB0aGUgZmllbGQgd2FzIG5vdCBpbiBvbmUgb2YgdGhlXG4gICAgICAgICAgICAvLyBlcXVhbGl0eSBmaWx0ZXJzIGFib3ZlLCB0aGUgbmV4dCBzZWdtZW50IG11c3QgbWF0Y2ggYm90aCB0aGUgZmlsdGVyXG4gICAgICAgICAgICAvLyBhbmQgdGhlIGZpcnN0IG9yZGVyQnkgY2xhdXNlLlxuICAgICAgICAgICAgaWYgKCFzLmhhcyh0aGlzLlplLmZpZWxkLmNhbm9uaWNhbFN0cmluZygpKSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuW2ldO1xuICAgICAgICAgICAgICAgIGlmICghdGhpcy5ubih0aGlzLlplLCB0KSB8fCAhdGhpcy5zbih0aGlzLlllW3IrK10sIHQpKSByZXR1cm4gITE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICArK2k7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWxsIHJlbWFpbmluZyBzZWdtZW50cyBuZWVkIHRvIHJlcHJlc2VudCB0aGUgcHJlZml4IG9mIHRoZSB0YXJnZXQnc1xuICAgICAgICAvLyBvcmRlckJ5LlxuICAgICAgICAgICAgICAgIGZvciAoO2kgPCBuLmxlbmd0aDsgKytpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbltpXTtcbiAgICAgICAgICAgIGlmIChyID49IHRoaXMuWWUubGVuZ3RoIHx8ICF0aGlzLnNuKHRoaXMuWWVbcisrXSwgdCkpIHJldHVybiAhMTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gITA7XG4gICAgfVxuICAgIGVuKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuWGUpIGlmICh0aGlzLm5uKGUsIHQpKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgbm4odCwgZSkge1xuICAgICAgICBpZiAodm9pZCAwID09PSB0IHx8ICF0LmZpZWxkLmlzRXF1YWwoZS5maWVsZFBhdGgpKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IG4gPSBcImFycmF5LWNvbnRhaW5zXCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlMgKi8gPT09IHQub3AgfHwgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gPT09IHQub3A7XG4gICAgICAgIHJldHVybiAyIC8qIEluZGV4S2luZC5DT05UQUlOUyAqLyA9PT0gZS5raW5kID09PSBuO1xuICAgIH1cbiAgICBzbih0LCBlKSB7XG4gICAgICAgIHJldHVybiAhIXQuZmllbGQuaXNFcXVhbChlLmZpZWxkUGF0aCkgJiYgKDAgLyogSW5kZXhLaW5kLkFTQ0VORElORyAqLyA9PT0gZS5raW5kICYmIFwiYXNjXCIgLyogRGlyZWN0aW9uLkFTQ0VORElORyAqLyA9PT0gdC5kaXIgfHwgMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLyA9PT0gZS5raW5kICYmIFwiZGVzY1wiIC8qIERpcmVjdGlvbi5ERVNDRU5ESU5HICovID09PSB0LmRpcik7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBQcm92aWRlcyB1dGlsaXR5IGZ1bmN0aW9ucyB0aGF0IGhlbHAgd2l0aCBib29sZWFuIGxvZ2ljIHRyYW5zZm9ybWF0aW9ucyBuZWVkZWQgZm9yIGhhbmRsaW5nXG4gKiBjb21wbGV4IGZpbHRlcnMgdXNlZCBpbiBxdWVyaWVzLlxuICovXG4vKipcbiAqIFRoZSBgaW5gIGZpbHRlciBpcyBvbmx5IGEgc3ludGFjdGljIHN1Z2FyIG92ZXIgYSBkaXNqdW5jdGlvbiBvZiBlcXVhbGl0aWVzLiBGb3IgaW5zdGFuY2U6IGBhIGluXG4gKiBbMSwyLDNdYCBpcyBpbiBmYWN0IGBhPT0xIHx8IGE9PTIgfHwgYT09M2AuIFRoaXMgbWV0aG9kIGV4cGFuZHMgYW55IGBpbmAgZmlsdGVyIGluIHRoZSBnaXZlblxuICogaW5wdXQgaW50byBhIGRpc2p1bmN0aW9uIG9mIGVxdWFsaXR5IGZpbHRlcnMgYW5kIHJldHVybnMgdGhlIGV4cGFuZGVkIGZpbHRlci5cbiAqLyBmdW5jdGlvbiBGcih0KSB7XG4gICAgdmFyIGUsIG47XG4gICAgaWYgKEYodCBpbnN0YW5jZW9mIG1uIHx8IHQgaW5zdGFuY2VvZiBnbiksIHQgaW5zdGFuY2VvZiBtbikge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIENuKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gKG51bGwgPT09IChuID0gbnVsbCA9PT0gKGUgPSB0LnZhbHVlLmFycmF5VmFsdWUpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUudmFsdWVzKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLm1hcCgoZSA9PiBtbi5jcmVhdGUodC5maWVsZCwgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovICwgZSkpKSkgfHwgW107XG4gICAgICAgICAgICByZXR1cm4gZ24uY3JlYXRlKHMsIFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gV2UgaGF2ZSByZWFjaGVkIG90aGVyIGtpbmRzIG9mIGZpZWxkIGZpbHRlcnMuXG4gICAgICAgIHJldHVybiB0O1xuICAgIH1cbiAgICAvLyBXZSBoYXZlIGEgY29tcG9zaXRlIGZpbHRlci5cbiAgICAgICAgY29uc3QgcyA9IHQuZmlsdGVycy5tYXAoKHQgPT4gRnIodCkpKTtcbiAgICByZXR1cm4gZ24uY3JlYXRlKHMsIHQub3ApO1xufVxuXG4vKipcbiAqIEdpdmVuIGEgY29tcG9zaXRlIGZpbHRlciwgcmV0dXJucyB0aGUgbGlzdCBvZiB0ZXJtcyBpbiBpdHMgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0uXG4gKlxuICogPHA+RWFjaCBlbGVtZW50IGluIHRoZSByZXR1cm4gdmFsdWUgaXMgb25lIHRlcm0gb2YgdGhlIHJlc3VsdGluZyBETkYuIEZvciBpbnN0YW5jZTogRm9yIHRoZVxuICogaW5wdXQ6IChBIHx8IEIpICYmIEMsIHRoZSBETkYgZm9ybSBpczogKEEgJiYgQykgfHwgKEIgJiYgQyksIGFuZCB0aGUgcmV0dXJuIHZhbHVlIGlzIGEgbGlzdFxuICogd2l0aCB0d28gZWxlbWVudHM6IGEgY29tcG9zaXRlIGZpbHRlciB0aGF0IHBlcmZvcm1zIChBICYmIEMpLCBhbmQgYSBjb21wb3NpdGUgZmlsdGVyIHRoYXRcbiAqIHBlcmZvcm1zIChCICYmIEMpLlxuICpcbiAqIEBwYXJhbSBmaWx0ZXIgdGhlIGNvbXBvc2l0ZSBmaWx0ZXIgdG8gY2FsY3VsYXRlIERORiB0cmFuc2Zvcm0gZm9yLlxuICogQHJldHVybiB0aGUgdGVybXMgaW4gdGhlIERORiB0cmFuc2Zvcm0uXG4gKi8gZnVuY3Rpb24gQnIodCkge1xuICAgIGlmICgwID09PSB0LmdldEZpbHRlcnMoKS5sZW5ndGgpIHJldHVybiBbXTtcbiAgICBjb25zdCBlID0gS3IoRnIodCkpO1xuICAgIHJldHVybiBGKFVyKGUpKSwgTHIoZSkgfHwgcXIoZSkgPyBbIGUgXSA6IGUuZ2V0RmlsdGVycygpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgYSBzaW5nbGUgZmllbGQgZmlsdGVyLiBlLmcuIChhID09IDEwKS4gKi8gZnVuY3Rpb24gTHIodCkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgbW47XG59XG5cbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBmaWx0ZXIgaXMgdGhlIGNvbmp1bmN0aW9uIG9mIG9uZSBvciBtb3JlIGZpZWxkIGZpbHRlcnMuIGUuZy4gKGEgPT0gMTBcbiAqICYmIGIgPT0gMjApXG4gKi8gZnVuY3Rpb24gcXIodCkge1xuICAgIHJldHVybiB0IGluc3RhbmNlb2YgZ24gJiYgSW4odCk7XG59XG5cbi8qKlxuICogUmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgZ2l2ZW4gZmlsdGVyIGlzIGluIGRpc2p1bmN0aXZlIG5vcm1hbCBmb3JtIChETkYpLlxuICpcbiAqIDxwPkluIGJvb2xlYW4gbG9naWMsIGEgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikgaXMgYSBjYW5vbmljYWwgbm9ybWFsIGZvcm0gb2YgYSBsb2dpY2FsXG4gKiBmb3JtdWxhIGNvbnNpc3Rpbmcgb2YgYSBkaXNqdW5jdGlvbiBvZiBjb25qdW5jdGlvbnM7IGl0IGNhbiBhbHNvIGJlIGRlc2NyaWJlZCBhcyBhbiBPUiBvZiBBTkRzLlxuICpcbiAqIDxwPkZvciBtb3JlIGluZm8sIHZpc2l0OiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EaXNqdW5jdGl2ZV9ub3JtYWxfZm9ybVxuICovIGZ1bmN0aW9uIFVyKHQpIHtcbiAgICByZXR1cm4gTHIodCkgfHwgcXIodCkgfHwgXG4gICAgLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGZpbHRlciBpcyB0aGUgZGlzanVuY3Rpb24gb2Ygb25lIG9yIG1vcmUgXCJmbGF0IGNvbmp1bmN0aW9uc1wiIGFuZFxuICogZmllbGQgZmlsdGVycy4gZS5nLiAoYSA9PSAxMCkgfHwgKGI9PTIwICYmIGM9PTMwKVxuICovXG4gICAgZnVuY3Rpb24odCkge1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIGduICYmIHBuKHQpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5nZXRGaWx0ZXJzKCkpIGlmICghTHIoZSkgJiYgIXFyKGUpKSByZXR1cm4gITE7XG4gICAgICAgICAgICByZXR1cm4gITA7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH0odCk7XG59XG5cbmZ1bmN0aW9uIEtyKHQpIHtcbiAgICBpZiAoRih0IGluc3RhbmNlb2YgbW4gfHwgdCBpbnN0YW5jZW9mIGduKSwgdCBpbnN0YW5jZW9mIG1uKSByZXR1cm4gdDtcbiAgICBpZiAoMSA9PT0gdC5maWx0ZXJzLmxlbmd0aCkgcmV0dXJuIEtyKHQuZmlsdGVyc1swXSk7XG4gICAgLy8gQ29tcHV0ZSBETkYgZm9yIGVhY2ggb2YgdGhlIHN1YmZpbHRlcnMgZmlyc3RcbiAgICAgICAgY29uc3QgZSA9IHQuZmlsdGVycy5tYXAoKHQgPT4gS3IodCkpKTtcbiAgICBsZXQgbiA9IGduLmNyZWF0ZShlLCB0Lm9wKTtcbiAgICByZXR1cm4gbiA9IGpyKG4pLCBVcihuKSA/IG4gOiAoRihuIGluc3RhbmNlb2YgZ24pLCBGKHluKG4pKSwgRihuLmZpbHRlcnMubGVuZ3RoID4gMSksIFxuICAgIG4uZmlsdGVycy5yZWR1Y2UoKCh0LCBlKSA9PiBHcih0LCBlKSkpKTtcbn1cblxuZnVuY3Rpb24gR3IodCwgZSkge1xuICAgIGxldCBuO1xuICAgIHJldHVybiBGKHQgaW5zdGFuY2VvZiBtbiB8fCB0IGluc3RhbmNlb2YgZ24pLCBGKGUgaW5zdGFuY2VvZiBtbiB8fCBlIGluc3RhbmNlb2YgZ24pLCBcbiAgICAvLyBGaWVsZEZpbHRlciBGaWVsZEZpbHRlclxuICAgIG4gPSB0IGluc3RhbmNlb2YgbW4gPyBlIGluc3RhbmNlb2YgbW4gPyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIENvbmp1bmN0aW9uIGRpc3RyaWJ1dGlvbiBmb3IgdHdvIGZpZWxkIGZpbHRlcnMgaXMgdGhlIGNvbmp1bmN0aW9uIG9mIHRoZW0uXG4gICAgICAgIHJldHVybiBnbi5jcmVhdGUoWyB0LCBlIF0sIFwiYW5kXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuQU5EICovKTtcbiAgICB9KHQsIGUpIDogUXIodCwgZSkgOiBlIGluc3RhbmNlb2YgbW4gPyBRcihlLCB0KSA6IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgLy8gVGhlcmUgYXJlIGZvdXIgY2FzZXM6XG4gICAgICAgIC8vIChBICYgQikgJiAoQyAmIEQpIC0tPiAoQSAmIEIgJiBDICYgRClcbiAgICAgICAgLy8gKEEgJiBCKSAmIChDIHwgRCkgLS0+IChBICYgQiAmIEMpIHwgKEEgJiBCICYgRClcbiAgICAgICAgLy8gKEEgfCBCKSAmIChDICYgRCkgLS0+IChDICYgRCAmIEEpIHwgKEMgJiBEICYgQilcbiAgICAgICAgLy8gKEEgfCBCKSAmIChDIHwgRCkgLS0+IChBICYgQykgfCAoQSAmIEQpIHwgKEIgJiBDKSB8IChCICYgRClcbiAgICAgICAgLy8gQ2FzZSAxIGlzIGEgbWVyZ2UuXG4gICAgICAgIGlmIChGKHQuZmlsdGVycy5sZW5ndGggPiAwICYmIGUuZmlsdGVycy5sZW5ndGggPiAwKSwgeW4odCkgJiYgeW4oZSkpIHJldHVybiB2bih0LCBlLmdldEZpbHRlcnMoKSk7XG4gICAgICAgIC8vIENhc2UgMiwzLDQgYWxsIGhhdmUgYXQgbGVhc3Qgb25lIHNpZGUgKGxocyBvciByaHMpIHRoYXQgaXMgYSBkaXNqdW5jdGlvbi4gSW4gYWxsIHRocmVlIGNhc2VzXG4gICAgICAgIC8vIHdlIHNob3VsZCB0YWtlIGVhY2ggZWxlbWVudCBvZiB0aGUgZGlzanVuY3Rpb24gYW5kIGRpc3RyaWJ1dGUgaXQgb3ZlciB0aGUgb3RoZXIgc2lkZSwgYW5kXG4gICAgICAgIC8vIHJldHVybiB0aGUgZGlzanVuY3Rpb24gb2YgdGhlIGRpc3RyaWJ1dGlvbiByZXN1bHRzLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBwbih0KSA/IHQgOiBlLCBzID0gcG4odCkgPyBlIDogdCwgaSA9IG4uZmlsdGVycy5tYXAoKHQgPT4gR3IodCwgcykpKTtcbiAgICAgICAgcmV0dXJuIGduLmNyZWF0ZShpLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgIH0odCwgZSksIGpyKG4pO1xufVxuXG5mdW5jdGlvbiBRcih0LCBlKSB7XG4gICAgLy8gVGhlcmUgYXJlIHR3byBjYXNlczpcbiAgICAvLyBBICYgKEIgJiBDKSAtLT4gKEEgJiBCICYgQylcbiAgICAvLyBBICYgKEIgfCBDKSAtLT4gKEEgJiBCKSB8IChBICYgQylcbiAgICBpZiAoeW4oZSkpIFxuICAgIC8vIENhc2UgMVxuICAgIHJldHVybiB2bihlLCB0LmdldEZpbHRlcnMoKSk7XG4gICAge1xuICAgICAgICAvLyBDYXNlIDJcbiAgICAgICAgY29uc3QgbiA9IGUuZmlsdGVycy5tYXAoKGUgPT4gR3IodCwgZSkpKTtcbiAgICAgICAgcmV0dXJuIGduLmNyZWF0ZShuLCBcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBcHBsaWVzIHRoZSBhc3NvY2lhdGl2aXR5IHByb3BlcnR5IHRvIHRoZSBnaXZlbiBmaWx0ZXIgYW5kIHJldHVybnMgdGhlIHJlc3VsdGluZyBmaWx0ZXIuXG4gKlxuICogPHVsPlxuICogICA8bGk+QSB8IChCIHwgQykgPT0gKEEgfCBCKSB8IEMgPT0gKEEgfCBCIHwgQylcbiAqICAgPGxpPkEgJiAoQiAmIEMpID09IChBICYgQikgJiBDID09IChBICYgQiAmIEMpXG4gKiA8L3VsPlxuICpcbiAqIDxwPkZvciBtb3JlIGluZm8sIHZpc2l0OiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9Bc3NvY2lhdGl2ZV9wcm9wZXJ0eSNQcm9wb3NpdGlvbmFsX2xvZ2ljXG4gKi8gZnVuY3Rpb24ganIodCkge1xuICAgIGlmIChGKHQgaW5zdGFuY2VvZiBtbiB8fCB0IGluc3RhbmNlb2YgZ24pLCB0IGluc3RhbmNlb2YgbW4pIHJldHVybiB0O1xuICAgIGNvbnN0IGUgPSB0LmdldEZpbHRlcnMoKTtcbiAgICAvLyBJZiB0aGUgY29tcG9zaXRlIGZpbHRlciBvbmx5IGNvbnRhaW5zIDEgZmlsdGVyLCBhcHBseSBhc3NvY2lhdGl2aXR5IHRvIGl0LlxuICAgICAgICBpZiAoMSA9PT0gZS5sZW5ndGgpIHJldHVybiBqcihlWzBdKTtcbiAgICAvLyBBc3NvY2lhdGl2aXR5IGFwcGxpZWQgdG8gYSBmbGF0IGNvbXBvc2l0ZSBmaWx0ZXIgcmVzdWx0cyBpcyBpdHNlbGYuXG4gICAgICAgIGlmIChUbih0KSkgcmV0dXJuIHQ7XG4gICAgLy8gRmlyc3QgYXBwbHkgYXNzb2NpYXRpdml0eSB0byBhbGwgc3ViZmlsdGVycy4gVGhpcyB3aWxsIGluIHR1cm4gcmVjdXJzaXZlbHkgYXBwbHlcbiAgICAvLyBhc3NvY2lhdGl2aXR5IHRvIGFsbCBuZXN0ZWQgY29tcG9zaXRlIGZpbHRlcnMgYW5kIGZpZWxkIGZpbHRlcnMuXG4gICAgICAgIGNvbnN0IG4gPSBlLm1hcCgodCA9PiBqcih0KSkpLCBzID0gW107XG4gICAgLy8gRm9yIGNvbXBvc2l0ZSBzdWJmaWx0ZXJzIHRoYXQgcGVyZm9ybSB0aGUgc2FtZSBraW5kIG9mIGxvZ2ljYWwgb3BlcmF0aW9uIGFzIGBjb21wb3NpdGVGaWx0ZXJgXG4gICAgLy8gdGFrZSBvdXQgdGhlaXIgZmlsdGVycyBhbmQgYWRkIHRoZW0gdG8gYGNvbXBvc2l0ZUZpbHRlcmAuIEZvciBleGFtcGxlOlxuICAgIC8vIGNvbXBvc2l0ZUZpbHRlciA9IChBIHwgKEIgfCBDIHwgRCkpXG4gICAgLy8gY29tcG9zaXRlU3ViZmlsdGVyID0gKEIgfCBDIHwgRClcbiAgICAvLyBSZXN1bHQ6IChBIHwgQiB8IEMgfCBEKVxuICAgIC8vIE5vdGUgdGhhdCB0aGUgYGNvbXBvc2l0ZVN1YmZpbHRlcmAgaGFzIGJlZW4gZWxpbWluYXRlZCwgYW5kIGl0cyBmaWx0ZXJzIChCLCBDLCBEKSBoYXZlIGJlZW5cbiAgICAvLyBhZGRlZCB0byB0aGUgdG9wLWxldmVsIFwiY29tcG9zaXRlRmlsdGVyXCIuXG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKGUgPT4ge1xuICAgICAgICBlIGluc3RhbmNlb2YgbW4gPyBzLnB1c2goZSkgOiBlIGluc3RhbmNlb2YgZ24gJiYgKGUub3AgPT09IHQub3AgPyBcbiAgICAgICAgLy8gY29tcG9zaXRlRmlsdGVyOiAoQSB8IChCIHwgQykpXG4gICAgICAgIC8vIGNvbXBvc2l0ZVN1YmZpbHRlcjogKEIgfCBDKVxuICAgICAgICAvLyBSZXN1bHQ6IChBIHwgQiB8IEMpXG4gICAgICAgIHMucHVzaCguLi5lLmZpbHRlcnMpIDogXG4gICAgICAgIC8vIGNvbXBvc2l0ZUZpbHRlcjogKEEgfCAoQiAmIEMpKVxuICAgICAgICAvLyBjb21wb3NpdGVTdWJmaWx0ZXI6IChCICYgQylcbiAgICAgICAgLy8gUmVzdWx0OiAoQSB8IChCICYgQykpXG4gICAgICAgIHMucHVzaChlKSk7XG4gICAgfSkpLCAxID09PSBzLmxlbmd0aCA/IHNbMF0gOiBnbi5jcmVhdGUocywgdC5vcCk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKi8gY2xhc3MgenIge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLnJuID0gbmV3IFdyO1xuICAgIH1cbiAgICBhZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJuLmFkZChlKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMucm4uZ2V0RW50cmllcyhlKSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdUYXJnZXQodCwgZSkge1xuICAgICAgICAvLyBGaWVsZCBpbmRpY2VzIGFyZSBub3Qgc3VwcG9ydGVkIHdpdGggbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShudWxsKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoMCAvKiBJbmRleFR5cGUuTk9ORSAqLyk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyh0LCBlKSB7XG4gICAgICAgIC8vIEZpZWxkIGluZGljZXMgYXJlIG5vdCBzdXBwb3J0ZWQgd2l0aCBtZW1vcnkgcGVyc2lzdGVuY2UuXG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKFtdKTtcbiAgICB9XG4gICAgZ2V0TmV4dENvbGxlY3Rpb25Hcm91cFRvVXBkYXRlKHQpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobnVsbCk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKEl0Lm1pbigpKTtcbiAgICB9XG4gICAgZ2V0TWluT2Zmc2V0RnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKEl0Lm1pbigpKTtcbiAgICB9XG4gICAgdXBkYXRlQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgLy8gRmllbGQgaW5kaWNlcyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoIG1lbW9yeSBwZXJzaXN0ZW5jZS5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoKTtcbiAgICB9XG59XG5cbi8qKlxuICogSW50ZXJuYWwgaW1wbGVtZW50YXRpb24gb2YgdGhlIGNvbGxlY3Rpb24tcGFyZW50IGluZGV4IGV4cG9zZWQgYnkgTWVtb3J5SW5kZXhNYW5hZ2VyLlxuICogQWxzbyB1c2VkIGZvciBpbi1tZW1vcnkgY2FjaGluZyBieSBJbmRleGVkRGJJbmRleE1hbmFnZXIgYW5kIGluaXRpYWwgaW5kZXggcG9wdWxhdGlvblxuICogaW4gaW5kZXhlZGRiX3NjaGVtYS50c1xuICovIGNsYXNzIFdyIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5pbmRleCA9IHt9O1xuICAgIH1cbiAgICAvLyBSZXR1cm5zIGZhbHNlIGlmIHRoZSBlbnRyeSBhbHJlYWR5IGV4aXN0ZWQuXG4gICAgYWRkKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgbiA9IHQucG9wTGFzdCgpLCBzID0gdGhpcy5pbmRleFtlXSB8fCBuZXcgRWUodXQuY29tcGFyYXRvciksIGkgPSAhcy5oYXMobik7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4W2VdID0gcy5hZGQobiksIGk7XG4gICAgfVxuICAgIGhhcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0Lmxhc3RTZWdtZW50KCksIG4gPSB0LnBvcExhc3QoKSwgcyA9IHRoaXMuaW5kZXhbZV07XG4gICAgICAgIHJldHVybiBzICYmIHMuaGFzKG4pO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQpIHtcbiAgICAgICAgcmV0dXJuICh0aGlzLmluZGV4W3RdIHx8IG5ldyBFZSh1dC5jb21wYXJhdG9yKSkudG9BcnJheSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gY29uc3QgSHIgPSBuZXcgVWludDhBcnJheSgwKTtcblxuLyoqXG4gKiBBIHBlcnNpc3RlZCBpbXBsZW1lbnRhdGlvbiBvZiBJbmRleE1hbmFnZXIuXG4gKlxuICogUE9SVElORyBOT1RFOiBVbmxpa2UgaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2ViIFNESyBkb2VzIG5vdCBtZW1vaXplIGluZGV4XG4gKiBkYXRhIGFzIGl0IHN1cHBvcnRzIG11bHRpLXRhYiBhY2Nlc3MuXG4gKi9cbmNsYXNzIEpyIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMudXNlciA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQW4gaW4tbWVtb3J5IGNvcHkgb2YgdGhlIGluZGV4IGVudHJpZXMgd2UndmUgYWxyZWFkeSB3cml0dGVuIHNpbmNlIHRoZSBTREtcbiAgICAgICAgICogbGF1bmNoZWQuIFVzZWQgdG8gYXZvaWQgcmUtd3JpdGluZyB0aGUgc2FtZSBlbnRyeSByZXBlYXRlZGx5LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGlzIGlzICpOT1QqIGEgY29tcGxldGUgY2FjaGUgb2Ygd2hhdCdzIGluIHBlcnNpc3RlbmNlIGFuZCBzbyBjYW4gbmV2ZXIgYmVcbiAgICAgICAgICogdXNlZCB0byBzYXRpc2Z5IHJlYWRzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5vbiA9IG5ldyBXciwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGZyb20gYSB0YXJnZXQgdG8gaXRzIGVxdWl2YWxlbnQgbGlzdCBvZiBzdWItdGFyZ2V0cy4gRWFjaCBzdWItdGFyZ2V0XG4gICAgICAgICAqIGNvbnRhaW5zIG9ubHkgb25lIHRlcm0gZnJvbSB0aGUgdGFyZ2V0J3MgZGlzanVuY3RpdmUgbm9ybWFsIGZvcm0gKERORikuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnVuID0gbmV3IG9zKCh0ID0+ICRuKHQpKSwgKCh0LCBlKSA9PiBPbih0LCBlKSkpLCB0aGlzLnVpZCA9IHQudWlkIHx8IFwiXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgZW50cnkgdG8gdGhlIGNvbGxlY3Rpb24gcGFyZW50IGluZGV4LlxuICAgICAqXG4gICAgICogUmVwZWF0ZWQgY2FsbHMgZm9yIHRoZSBzYW1lIGNvbGxlY3Rpb25QYXRoIHNob3VsZCBiZSBhdm9pZGVkIHdpdGhpbiBhXG4gICAgICogdHJhbnNhY3Rpb24gYXMgSW5kZXhlZERiSW5kZXhNYW5hZ2VyIG9ubHkgY2FjaGVzIHdyaXRlcyBvbmNlIGEgdHJhbnNhY3Rpb25cbiAgICAgKiBoYXMgYmVlbiBjb21taXR0ZWQuXG4gICAgICovICAgIGFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLm9uLmhhcyhlKSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGUubGFzdFNlZ21lbnQoKSwgcyA9IGUucG9wTGFzdCgpO1xuICAgICAgICAgICAgdC5hZGRPbkNvbW1pdHRlZExpc3RlbmVyKCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gQWRkIHRoZSBjb2xsZWN0aW9uIHRvIHRoZSBpbiBtZW1vcnkgY2FjaGUgb25seSBpZiB0aGUgdHJhbnNhY3Rpb24gd2FzXG4gICAgICAgICAgICAgICAgLy8gc3VjY2Vzc2Z1bGx5IGNvbW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0aGlzLm9uLmFkZChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB7XG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbklkOiBuLFxuICAgICAgICAgICAgICAgIHBhcmVudDogcXQocylcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICByZXR1cm4gWXIodCkucHV0KGkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldENvbGxlY3Rpb25QYXJlbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gSURCS2V5UmFuZ2UuYm91bmQoWyBlLCBcIlwiIF0sIFsgc3QoZSksIFwiXCIgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApO1xuICAgICAgICByZXR1cm4gWXIodCkuaihzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBjb2xsZWN0aW9uSWQgZ3VhcmQgc2hvdWxkbid0IGJlIG5lY2Vzc2FyeSAoYW5kIGlzbid0IGFzIGxvbmdcbiAgICAgICAgICAgICAgICAvLyBhcyB3ZSdyZSBydW5uaW5nIGluIGEgcmVhbCBicm93c2VyKSwgYnV0IHRoZXJlJ3MgYSBidWcgaW5cbiAgICAgICAgICAgICAgICAvLyBpbmRleGVkZGJzaGltIHRoYXQgYnJlYWtzIG91ciByYW5nZSBpbiBvdXIgdGVzdHMgcnVubmluZyBpbiBub2RlOlxuICAgICAgICAgICAgICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9heGVtY2xpb24vSW5kZXhlZERCU2hpbS9pc3N1ZXMvMzM0XG4gICAgICAgICAgICAgICAgaWYgKHMuY29sbGVjdGlvbklkICE9PSBlKSBicmVhaztcbiAgICAgICAgICAgICAgICBuLnB1c2goR3Qocy5wYXJlbnQpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBuO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGFkZEZpZWxkSW5kZXgodCwgZSkge1xuICAgICAgICAvLyBUT0RPKGluZGV4aW5nKTogVmVyaWZ5IHRoYXQgdGhlIGF1dG8taW5jcmVtZW50aW5nIGluZGV4IElEIHdvcmtzIGluXG4gICAgICAgIC8vIFNhZmFyaSAmIEZpcmVmb3guXG4gICAgICAgIGNvbnN0IG4gPSBacih0KSwgcyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgaW5kZXhJZDogdC5pbmRleElkLFxuICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25Hcm91cDogdC5jb2xsZWN0aW9uR3JvdXAsXG4gICAgICAgICAgICAgICAgZmllbGRzOiB0LmZpZWxkcy5tYXAoKHQgPT4gWyB0LmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgdC5raW5kIF0pKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfShlKTtcbiAgICAgICAgZGVsZXRlIHMuaW5kZXhJZDtcbiAgICAgICAgLy8gYGluZGV4SWRgIGlzIGF1dG8tcG9wdWxhdGVkIGJ5IEluZGV4ZWREYlxuICAgICAgICBjb25zdCBpID0gbi5hZGQocyk7XG4gICAgICAgIGlmIChlLmluZGV4U3RhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0byh0KTtcbiAgICAgICAgICAgIHJldHVybiBpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIG4ucHV0KFRyKHQsIHRoaXMudXNlciwgZS5pbmRleFN0YXRlLnNlcXVlbmNlTnVtYmVyLCBlLmluZGV4U3RhdGUub2Zmc2V0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGkubmV4dCgpO1xuICAgIH1cbiAgICBkZWxldGVGaWVsZEluZGV4KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFpyKHQpLCBzID0gdG8odCksIGkgPSBYcih0KTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKGUuaW5kZXhJZCkubmV4dCgoKCkgPT4gcy5kZWxldGUoSURCS2V5UmFuZ2UuYm91bmQoWyBlLmluZGV4SWQgXSwgWyBlLmluZGV4SWQgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKSkpKS5uZXh0KCgoKSA9PiBpLmRlbGV0ZShJREJLZXlSYW5nZS5ib3VuZChbIGUuaW5kZXhJZCBdLCBbIGUuaW5kZXhJZCArIDEgXSwgXG4gICAgICAgIC8qbG93ZXJPcGVuPSovICExLCBcbiAgICAgICAgLyp1cHBlck9wZW49Ki8gITApKSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBYcih0KTtcbiAgICAgICAgbGV0IHMgPSAhMDtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBNYXA7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKHRoaXMuY24oZSksIChlID0+IHRoaXMuYW4odCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBzICYmIChzID0gISF0KSwgaS5zZXQoZSwgdCk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmIChzKSB7XG4gICAgICAgICAgICAgICAgbGV0IHQgPSBncygpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChpLCAoKGksIHIpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG87XG4gICAgICAgICAgICAgICAgICAgIE4oXCJJbmRleGVkRGJJbmRleE1hbmFnZXJcIiwgYFVzaW5nIGluZGV4ICR7byA9IGksIGBpZD0ke28uaW5kZXhJZH18Y2c9JHtvLmNvbGxlY3Rpb25Hcm91cH18Zj0ke28uZmllbGRzLm1hcCgodCA9PiBgJHt0LmZpZWxkUGF0aH06JHt0LmtpbmR9YCkpLmpvaW4oXCIsXCIpfWB9IHRvIGV4ZWN1dGUgJHskbihlKX1gKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdSA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBmdChlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2b2lkIDAgPT09IG4pIHJldHVybiBudWxsO1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIEJuKHQsIG4uZmllbGRQYXRoKSkgc3dpdGNoIChlLm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlLnZhbHVlLmFycmF5VmFsdWUudmFsdWVzIHx8IFtdO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWluc1wiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gWyBlLnZhbHVlIF07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgYXJlIG5vdCBhcnJheSBmaWx0ZXJzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHZhbHVlcyB0aGF0IGFyZSB1c2VkIGluICE9IG9yIE5PVF9JTiBmaWx0ZXJzLiBSZXR1cm5zXG4gKiBgbnVsbGAgaWYgdGhlcmUgYXJlIG5vIHN1Y2ggZmlsdGVycy5cbiAqLyAociwgaSksIGMgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBkdChlKSkgZm9yIChjb25zdCBlIG9mIEJuKHQsIHMuZmllbGRQYXRoKSkgc3dpdGNoIChlLm9wKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCI9PVwiIC8qIE9wZXJhdG9yLkVRVUFMICovIDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVuY29kZSBlcXVhbGl0eSBwcmVmaXgsIHdoaWNoIGlzIGVuY29kZWQgaW4gdGhlIGluZGV4IHZhbHVlIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZSBpbmVxdWFsaXR5IChlLmcuIGBhID09ICdhJyAmJiBiICE9ICdiJ2AgaXMgZW5jb2RlZCB0b1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGB2YWx1ZSAhPSAnYWInYCkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5zZXQocy5maWVsZFBhdGguY2Fub25pY2FsU3RyaW5nKCksIGUudmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiIT1cIiAvKiBPcGVyYXRvci5OT1RfRVFVQUwgKi8gOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vdEluL05vdEVxdWFsIGlzIGFsd2F5cyBhIHN1ZmZpeC4gVGhlcmUgY2Fubm90IGJlIGFueSByZW1haW5pbmdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWdtZW50cyBhbmQgaGVuY2Ugd2UgY2FuIHJldHVybiBlYXJseSBoZXJlLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBuLnNldChzLmZpZWxkUGF0aC5jYW5vbmljYWxTdHJpbmcoKSwgZS52YWx1ZSksIEFycmF5LmZyb20obi52YWx1ZXMoKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVtYWluaW5nIGZpbHRlcnMgY2Fubm90IGJlIHVzZWQgYXMgbm90SW4gYm91bmRzLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBSZXR1cm5zIGEgbG93ZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBzdGFydGluZyBwb2ludCB0b1xuICogc2NhbiB0aGUgaW5kZXggZGVmaW5lZCBieSBgZmllbGRJbmRleGAuIFJldHVybnMgYE1JTl9WQUxVRWAgaWYgbm8gbG93ZXIgYm91bmRcbiAqIGV4aXN0cy5cbiAqLyAociwgaSksIGEgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgcyA9ICEwO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRm9yIGVhY2ggc2VnbWVudCwgcmV0cmlldmUgYSBsb3dlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gc3RhcnRBdC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiBkdChlKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gPT09IGkua2luZCA/IExuKHQsIGkuZmllbGRQYXRoLCB0LnN0YXJ0QXQpIDogcW4odCwgaS5maWVsZFBhdGgsIHQuc3RhcnRBdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKGUudmFsdWUpLCBzICYmIChzID0gZS5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBobihuLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvKipcbiAqIFJldHVybnMgYW4gdXBwZXIgYm91bmQgb2YgZmllbGQgdmFsdWVzIHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gZW5kaW5nIHBvaW50XG4gKiB3aGVuIHNjYW5uaW5nIHRoZSBpbmRleCBkZWZpbmVkIGJ5IGBmaWVsZEluZGV4YC4gUmV0dXJucyBgTUFYX1ZBTFVFYCBpZiBub1xuICogdXBwZXIgYm91bmQgZXhpc3RzLlxuICovIChyLCBpKSwgaCA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBzID0gITA7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCBzZWdtZW50LCByZXRyaWV2ZSBhbiB1cHBlciBib3VuZCBpZiB0aGVyZSBpcyBhIHN1aXRhYmxlIGZpbHRlciBvclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gZW5kQXQuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGkgb2YgZHQoZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gMCAvKiBJbmRleEtpbmQuQVNDRU5ESU5HICovID09PSBpLmtpbmQgPyBxbih0LCBpLmZpZWxkUGF0aCwgdC5lbmRBdCkgOiBMbih0LCBpLmZpZWxkUGF0aCwgdC5lbmRBdCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbi5wdXNoKGUudmFsdWUpLCBzICYmIChzID0gZS5pbmNsdXNpdmUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBobihuLCBzKTtcbiAgICAgICAgICAgICAgICAgICAgfShyLCBpKSwgbCA9IHRoaXMuaG4oaSwgciwgYSksIGYgPSB0aGlzLmhuKGksIHIsIGgpLCBkID0gdGhpcy5sbihpLCByLCBjKSwgdyA9IHRoaXMuZm4oaS5pbmRleElkLCB1LCBsLCBhLmluY2x1c2l2ZSwgZiwgaC5pbmNsdXNpdmUsIGQpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gUnQuZm9yRWFjaCh3LCAoaSA9PiBuLkgoaSwgZS5saW1pdCkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBodC5mcm9tU2VnbWVudHMoZS5kb2N1bWVudEtleSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdC5oYXMobikgfHwgKHQgPSB0LmFkZChuKSwgcy5wdXNoKG4pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBSdC5yZXNvbHZlKG51bGwpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGNuKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLnVuLmdldCh0KTtcbiAgICAgICAgaWYgKGUpIHJldHVybiBlO1xuICAgICAgICBpZiAoMCA9PT0gdC5maWx0ZXJzLmxlbmd0aCkgZSA9IFsgdCBdOyBlbHNlIHtcbiAgICAgICAgICAgIGUgPSBCcihnbi5jcmVhdGUodC5maWx0ZXJzLCBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLykpLm1hcCgoZSA9PiBNbih0LnBhdGgsIHQuY29sbGVjdGlvbkdyb3VwLCB0Lm9yZGVyQnksIGUuZ2V0RmlsdGVycygpLCB0LmxpbWl0LCB0LnN0YXJ0QXQsIHQuZW5kQXQpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMudW4uc2V0KHQsIGUpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3RzIGEga2V5IHJhbmdlIHF1ZXJ5IG9uIGBEYkluZGV4RW50cnlTdG9yZWAgdGhhdCB1bmlvbnMgYWxsXG4gICAgICogYm91bmRzLlxuICAgICAqLyAgICBmbih0LCBlLCBuLCBzLCBpLCByLCBvKSB7XG4gICAgICAgIC8vIFRoZSBudW1iZXIgb2YgdG90YWwgaW5kZXggc2NhbnMgd2UgdW5pb24gdG9nZXRoZXIuIFRoaXMgaXMgc2ltaWxhciB0byBhXG4gICAgICAgIC8vIGRpc3RyaWJ1dGVkIG5vcm1hbCBmb3JtLCBidXQgYWRhcHRlZCBmb3IgYXJyYXkgdmFsdWVzLiBXZSBjcmVhdGUgYSBzaW5nbGVcbiAgICAgICAgLy8gaW5kZXggcmFuZ2UgcGVyIHZhbHVlIGluIGFuIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWSBmaWx0ZXJcbiAgICAgICAgLy8gY29tYmluZWQgd2l0aCB0aGUgdmFsdWVzIGZyb20gdGhlIHF1ZXJ5IGJvdW5kcy5cbiAgICAgICAgY29uc3QgdSA9IChudWxsICE9IGUgPyBlLmxlbmd0aCA6IDEpICogTWF0aC5tYXgobi5sZW5ndGgsIGkubGVuZ3RoKSwgYyA9IHUgLyAobnVsbCAhPSBlID8gZS5sZW5ndGggOiAxKSwgYSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBoID0gMDsgaCA8IHU7ICsraCkge1xuICAgICAgICAgICAgY29uc3QgdSA9IGUgPyB0aGlzLmRuKGVbaCAvIGNdKSA6IEhyLCBsID0gdGhpcy53bih0LCB1LCBuW2ggJSBjXSwgcyksIGYgPSB0aGlzLl9uKHQsIHUsIGlbaCAlIGNdLCByKSwgZCA9IG8ubWFwKChlID0+IHRoaXMud24odCwgdSwgZSwgXG4gICAgICAgICAgICAvKiBpbmNsdXNpdmU9ICovICEwKSkpO1xuICAgICAgICAgICAgYS5wdXNoKC4uLnRoaXMuY3JlYXRlUmFuZ2UobCwgZiwgZCkpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhO1xuICAgIH1cbiAgICAvKiogR2VuZXJhdGVzIHRoZSBsb3dlciBib3VuZCBmb3IgYGFycmF5VmFsdWVgIGFuZCBgZGlyZWN0aW9uYWxWYWx1ZWAuICovICAgIHduKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBrcih0LCBodC5lbXB0eSgpLCBlLCBuKTtcbiAgICAgICAgcmV0dXJuIHMgPyBpIDogaS5KZSgpO1xuICAgIH1cbiAgICAvKiogR2VuZXJhdGVzIHRoZSB1cHBlciBib3VuZCBmb3IgYGFycmF5VmFsdWVgIGFuZCBgZGlyZWN0aW9uYWxWYWx1ZWAuICovICAgIF9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBrcih0LCBodC5lbXB0eSgpLCBlLCBuKTtcbiAgICAgICAgcmV0dXJuIHMgPyBpLkplKCkgOiBpO1xuICAgIH1cbiAgICBhbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgT3IoZSksIHMgPSBudWxsICE9IGUuY29sbGVjdGlvbkdyb3VwID8gZS5jb2xsZWN0aW9uR3JvdXAgOiBlLnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RmllbGRJbmRleGVzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBpbmRleCB3aXRoIHRoZSBtb3N0IG51bWJlciBvZiBzZWdtZW50cy5cbiAgICAgICAgICAgIGxldCBlID0gbnVsbDtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0KSB7XG4gICAgICAgICAgICAgICAgbi50bihzKSAmJiAoIWUgfHwgcy5maWVsZHMubGVuZ3RoID4gZS5maWVsZHMubGVuZ3RoKSAmJiAoZSA9IHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0SW5kZXhUeXBlKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSAyIC8qIEluZGV4VHlwZS5GVUxMICovO1xuICAgICAgICBjb25zdCBzID0gdGhpcy5jbihlKTtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2gocywgKGUgPT4gdGhpcy5hbih0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQgPyAwIC8qIEluZGV4VHlwZS5OT05FICovICE9PSBuICYmIHQuZmllbGRzLmxlbmd0aCA8IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgZSA9IG5ldyBFZShhdC5jb21wYXJhdG9yKSwgbiA9ICExO1xuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiB0LmZpbHRlcnMpIGZvciAoY29uc3QgdCBvZiBzLmdldEZsYXR0ZW5lZEZpbHRlcnMoKSkgXG4gICAgICAgICAgICAgICAgLy8gX19uYW1lX18gaXMgbm90IGFuIGV4cGxpY2l0IHNlZ21lbnQgb2YgYW55IGluZGV4LCBzbyB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gY291bnQgaXQuXG4gICAgICAgICAgICAgICAgdC5maWVsZC5pc0tleUZpZWxkKCkgfHwgKFxuICAgICAgICAgICAgICAgIC8vIEFSUkFZX0NPTlRBSU5TIG9yIEFSUkFZX0NPTlRBSU5TX0FOWSBmaWx0ZXJzIG11c3QgYmUgY291bnRlZCBzZXBhcmF0ZWx5LlxuICAgICAgICAgICAgICAgIC8vIEZvciBpbnN0YW5jZSwgaXQgaXMgcG9zc2libGUgdG8gaGF2ZSBhbiBpbmRleCBmb3IgXCJhIEFSUkFZIGEgQVNDXCIuIEV2ZW5cbiAgICAgICAgICAgICAgICAvLyB0aG91Z2ggdGhlc2UgYXJlIG9uIHRoZSBzYW1lIGZpZWxkLCB0aGV5IHNob3VsZCBiZSBjb3VudGVkIGFzIHR3b1xuICAgICAgICAgICAgICAgIC8vIHNlcGFyYXRlIHNlZ21lbnRzIGluIGFuIGluZGV4LlxuICAgICAgICAgICAgICAgIFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gdC5vcCB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gdC5vcCA/IG4gPSAhMCA6IGUgPSBlLmFkZCh0LmZpZWxkKSk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHQub3JkZXJCeSkgXG4gICAgICAgICAgICAgICAgLy8gX19uYW1lX18gaXMgbm90IGFuIGV4cGxpY2l0IHNlZ21lbnQgb2YgYW55IGluZGV4LCBzbyB3ZSBkb24ndCBuZWVkIHRvXG4gICAgICAgICAgICAgICAgLy8gY291bnQgaXQuXG4gICAgICAgICAgICAgICAgbi5maWVsZC5pc0tleUZpZWxkKCkgfHwgKGUgPSBlLmFkZChuLmZpZWxkKSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuc2l6ZSArIChuID8gMSA6IDApO1xuICAgICAgICAgICAgfShlKSAmJiAobiA9IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8pIDogbiA9IDAgLyogSW5kZXhUeXBlLk5PTkUgKi87XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IFxuICAgICAgICAvLyBPUiBxdWVyaWVzIGhhdmUgbW9yZSB0aGFuIG9uZSBzdWItdGFyZ2V0IChvbmUgc3ViLXRhcmdldCBwZXIgRE5GIHRlcm0pLiBXZSBjdXJyZW50bHkgY29uc2lkZXJcbiAgICAgICAgLy8gT1IgcXVlcmllcyB0aGF0IGhhdmUgYSBgbGltaXRgIHRvIGhhdmUgYSBwYXJ0aWFsIGluZGV4LiBGb3Igc3VjaCBxdWVyaWVzIHdlIHBlcmZvcm0gc29ydGluZ1xuICAgICAgICAvLyBhbmQgYXBwbHkgdGhlIGxpbWl0IGluIG1lbW9yeSBhcyBhIHBvc3QtcHJvY2Vzc2luZyBzdGVwLlxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICByZXR1cm4gbnVsbCAhPT0gdC5saW1pdDtcbiAgICAgICAgfShlKSAmJiBzLmxlbmd0aCA+IDEgJiYgMiAvKiBJbmRleFR5cGUuRlVMTCAqLyA9PT0gbiA/IDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gOiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIGJ5dGUgZW5jb2RlZCBmb3JtIG9mIHRoZSBkaXJlY3Rpb25hbCB2YWx1ZXMgaW4gdGhlIGZpZWxkIGluZGV4LlxuICAgICAqIFJldHVybnMgYG51bGxgIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBoYXZlIGFsbCBmaWVsZHMgc3BlY2lmaWVkIGluIHRoZVxuICAgICAqIGluZGV4LlxuICAgICAqLyAgICBtbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTnI7XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiBkdCh0KSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZGF0YS5maWVsZChzLmZpZWxkUGF0aCk7XG4gICAgICAgICAgICBpZiAobnVsbCA9PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLkhlKHMua2luZCk7XG4gICAgICAgICAgICBici5WZS5fZSh0LCBpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbi5RZSgpO1xuICAgIH1cbiAgICAvKiogRW5jb2RlcyBhIHNpbmdsZSB2YWx1ZSB0byB0aGUgYXNjZW5kaW5nIGluZGV4IGZvcm1hdC4gKi8gICAgZG4odCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE5yO1xuICAgICAgICByZXR1cm4gYnIuVmUuX2UodCwgZS5IZSgwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8pKSwgZS5RZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVuY29kZWQgZm9ybSBvZiB0aGUgZG9jdW1lbnQga2V5IHRoYXQgc29ydHMgYmFzZWQgb24gdGhlIGtleVxuICAgICAqIG9yZGVyaW5nIG9mIHRoZSBmaWVsZCBpbmRleC5cbiAgICAgKi8gICAgZ24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IE5yO1xuICAgICAgICByZXR1cm4gYnIuVmUuX2UoV2UodGhpcy5kYXRhYmFzZUlkLCBlKSwgbi5IZShmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gZHQodCk7XG4gICAgICAgICAgICByZXR1cm4gMCA9PT0gZS5sZW5ndGggPyAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8gOiBlW2UubGVuZ3RoIC0gMV0ua2luZDtcbiAgICAgICAgfSh0KSkpLCBuLlFlKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGZpZWxkIHZhbHVlcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuXG4gICAgICogRm9yIElOIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGxuKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKG51bGwgPT09IG4pIHJldHVybiBbXTtcbiAgICAgICAgbGV0IHMgPSBbXTtcbiAgICAgICAgcy5wdXNoKG5ldyBOcik7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgZm9yIChjb25zdCByIG9mIGR0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbltpKytdO1xuICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIHMpIGlmICh0aGlzLnluKGUsIHIuZmllbGRQYXRoKSAmJiBKZSh0KSkgcyA9IHRoaXMucG4ocywgciwgdCk7IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBuLkhlKHIua2luZCk7XG4gICAgICAgICAgICAgICAgYnIuVmUuX2UodCwgZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXMuSW4ocyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuY29kZXMgdGhlIGdpdmVuIGJvdW5kcyBhY2NvcmRpbmcgdG8gdGhlIHNwZWNpZmljYXRpb24gaW4gYHRhcmdldGAuIEZvciBJTlxuICAgICAqIHF1ZXJpZXMsIGEgbGlzdCBvZiBwb3NzaWJsZSB2YWx1ZXMgaXMgcmV0dXJuZWQuXG4gICAgICovICAgIGhuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMubG4odCwgZSwgbi5wb3NpdGlvbik7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIHRoZSBieXRlIHJlcHJlc2VudGF0aW9uIGZvciB0aGUgcHJvdmlkZWQgZW5jb2RlcnMuICovICAgIEluKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IHQubGVuZ3RoOyArK24pIGVbbl0gPSB0W25dLlFlKCk7XG4gICAgICAgIHJldHVybiBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgc2VwYXJhdGUgZW5jb2RlciBmb3IgZWFjaCBlbGVtZW50IG9mIGFuIGFycmF5LlxuICAgICAqXG4gICAgICogVGhlIG1ldGhvZCBhcHBlbmRzIGVhY2ggdmFsdWUgdG8gYWxsIGV4aXN0aW5nIGVuY29kZXJzIChlLmcuIGZpbHRlcihcImFcIixcbiAgICAgKiBcIj09XCIsIFwiYTFcIikuZmlsdGVyKFwiYlwiLCBcImluXCIsIFtcImIxXCIsIFwiYjJcIl0pIGJlY29tZXMgW1wiYTEsYjFcIiwgXCJhMSxiMlwiXSkuIEFcbiAgICAgKiBsaXN0IG9mIG5ldyBlbmNvZGVycyBpcyByZXR1cm5lZC5cbiAgICAgKi8gICAgcG4odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gWyAuLi50IF0sIGkgPSBbXTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4uYXJyYXlWYWx1ZS52YWx1ZXMgfHwgW10pIGZvciAoY29uc3QgbiBvZiBzKSB7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IE5yO1xuICAgICAgICAgICAgcy5zZWVkKG4uUWUoKSksIGJyLlZlLl9lKHQsIHMuSGUoZS5raW5kKSksIGkucHVzaChzKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgeW4odCwgZSkge1xuICAgICAgICByZXR1cm4gISF0LmZpbHRlcnMuZmluZCgodCA9PiB0IGluc3RhbmNlb2YgbW4gJiYgdC5maWVsZC5pc0VxdWFsKGUpICYmIChcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHQub3AgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHQub3ApKSk7XG4gICAgfVxuICAgIGdldEZpZWxkSW5kZXhlcyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBacih0KSwgcyA9IHRvKHQpO1xuICAgICAgICByZXR1cm4gKGUgPyBuLmooXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBJREJLZXlSYW5nZS5ib3VuZChlLCBlKSkgOiBuLmooKSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gW107XG4gICAgICAgICAgICByZXR1cm4gUnQuZm9yRWFjaCh0LCAodCA9PiBzLmdldChbIHQuaW5kZXhJZCwgdGhpcy51aWQgXSkubmV4dCgobiA9PiB7XG4gICAgICAgICAgICAgICAgZS5wdXNoKGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IGUgPyBuZXcgZ3QoZS5zZXF1ZW5jZU51bWJlciwgbmV3IEl0KHdyKGUucmVhZFRpbWUpLCBuZXcgaHQoR3QoZS5kb2N1bWVudEtleSkpLCBlLmxhcmdlc3RCYXRjaElkKSkgOiBndC5lbXB0eSgpLCBzID0gdC5maWVsZHMubWFwKCgoW3QsIGVdKSA9PiBuZXcgX3QoYXQuZnJvbVNlcnZlckZvcm1hdCh0KSwgZSkpKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBsdCh0LmluZGV4SWQsIHQuY29sbGVjdGlvbkdyb3VwLCBzLCBuKTtcbiAgICAgICAgICAgICAgICB9KHQsIG4pKTtcbiAgICAgICAgICAgIH0pKSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0Q29sbGVjdGlvbkdyb3VwVG9VcGRhdGUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXModCkubmV4dCgodCA9PiAwID09PSB0Lmxlbmd0aCA/IG51bGwgOiAodC5zb3J0KCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlciAtIGUuaW5kZXhTdGF0ZS5zZXF1ZW5jZU51bWJlcjtcbiAgICAgICAgICAgIHJldHVybiAwICE9PSBuID8gbiA6IGV0KHQuY29sbGVjdGlvbkdyb3VwLCBlLmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgICAgIH0pKSwgdFswXS5jb2xsZWN0aW9uR3JvdXApKSk7XG4gICAgfVxuICAgIHVwZGF0ZUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBacih0KSwgaSA9IHRvKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5Ubih0KS5uZXh0KCh0ID0+IHMuaihcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIElEQktleVJhbmdlLmJvdW5kKGUsIGUpKS5uZXh0KChlID0+IFJ0LmZvckVhY2goZSwgKGUgPT4gaS5wdXQoVHIoZS5pbmRleElkLCB0aGlzLnVzZXIsIHQsIG4pKSkpKSkpKTtcbiAgICB9XG4gICAgdXBkYXRlSW5kZXhFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgLy8gUG9ydGluZyBOb3RlOiBgZ2V0RmllbGRJbmRleGVzKClgIG9uIFdlYiBkb2VzIG5vdCBjYWNoZSBpbmRleCBsb29rdXBzIGFzXG4gICAgICAgIC8vIGl0IGNvdWxkIGJlIHVzZWQgYWNyb3NzIGRpZmZlcmVudCBJbmRleGVkREIgdHJhbnNhY3Rpb25zLiBBcyBhbnkgY2FjaGVkXG4gICAgICAgIC8vIGRhdGEgbWlnaHQgYmUgaW52YWxpZGF0ZWQgYnkgb3RoZXIgbXVsdGktdGFiIGNsaWVudHMsIHdlIGNhbiBvbmx5IHRydXN0XG4gICAgICAgIC8vIGRhdGEgd2l0aGluIGEgc2luZ2xlIEluZGV4ZWREQiB0cmFuc2FjdGlvbi4gV2UgdGhlcmVmb3JlIGFkZCBhIGNhY2hlXG4gICAgICAgIC8vIGhlcmUuXG4gICAgICAgIGNvbnN0IG4gPSBuZXcgTWFwO1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChlLCAoKGUsIHMpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmdldChlLmNvbGxlY3Rpb25Hcm91cCk7XG4gICAgICAgICAgICByZXR1cm4gKGkgPyBSdC5yZXNvbHZlKGkpIDogdGhpcy5nZXRGaWVsZEluZGV4ZXModCwgZS5jb2xsZWN0aW9uR3JvdXApKS5uZXh0KChpID0+IChuLnNldChlLmNvbGxlY3Rpb25Hcm91cCwgaSksIFxuICAgICAgICAgICAgUnQuZm9yRWFjaChpLCAobiA9PiB0aGlzLkVuKHQsIGUsIG4pLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLkFuKHMsIG4pO1xuICAgICAgICAgICAgICAgIHJldHVybiBlLmlzRXF1YWwoaSkgPyBSdC5yZXNvbHZlKCkgOiB0aGlzLnZuKHQsIHMsIG4sIGUsIGkpO1xuICAgICAgICAgICAgfSkpKSkpKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgUm4odCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gWHIodCkucHV0KHtcbiAgICAgICAgICAgIGluZGV4SWQ6IHMuaW5kZXhJZCxcbiAgICAgICAgICAgIHVpZDogdGhpcy51aWQsXG4gICAgICAgICAgICBhcnJheVZhbHVlOiBzLmFycmF5VmFsdWUsXG4gICAgICAgICAgICBkaXJlY3Rpb25hbFZhbHVlOiBzLmRpcmVjdGlvbmFsVmFsdWUsXG4gICAgICAgICAgICBvcmRlcmVkRG9jdW1lbnRLZXk6IHRoaXMuZ24obiwgZS5rZXkpLFxuICAgICAgICAgICAgZG9jdW1lbnRLZXk6IGUua2V5LnBhdGgudG9BcnJheSgpXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBQbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBYcih0KS5kZWxldGUoWyBzLmluZGV4SWQsIHRoaXMudWlkLCBzLmFycmF5VmFsdWUsIHMuZGlyZWN0aW9uYWxWYWx1ZSwgdGhpcy5nbihuLCBlLmtleSksIGUua2V5LnBhdGgudG9BcnJheSgpIF0pO1xuICAgIH1cbiAgICBFbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBYcih0KTtcbiAgICAgICAgbGV0IGkgPSBuZXcgRWUoTXIpO1xuICAgICAgICByZXR1cm4gcy5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KFsgbi5pbmRleElkLCB0aGlzLnVpZCwgdGhpcy5nbihuLCBlKSBdKVxuICAgICAgICB9LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIGkgPSBpLmFkZChuZXcga3Iobi5pbmRleElkLCBlLCBzLmFycmF5VmFsdWUsIHMuZGlyZWN0aW9uYWxWYWx1ZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyB0aGUgaW5kZXggZW50cmllcyBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LiAqLyAgICBBbih0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbmV3IEVlKE1yKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMubW4oZSwgdCk7XG4gICAgICAgIGlmIChudWxsID09IHMpIHJldHVybiBuO1xuICAgICAgICBjb25zdCBpID0gZnQoZSk7XG4gICAgICAgIGlmIChudWxsICE9IGkpIHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0LmRhdGEuZmllbGQoaS5maWVsZFBhdGgpO1xuICAgICAgICAgICAgaWYgKEplKHIpKSBmb3IgKGNvbnN0IGkgb2Ygci5hcnJheVZhbHVlLnZhbHVlcyB8fCBbXSkgbiA9IG4uYWRkKG5ldyBrcihlLmluZGV4SWQsIHQua2V5LCB0aGlzLmRuKGkpLCBzKSk7XG4gICAgICAgIH0gZWxzZSBuID0gbi5hZGQobmV3IGtyKGUuaW5kZXhJZCwgdC5rZXksIEhyLCBzKSk7XG4gICAgICAgIHJldHVybiBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBVcGRhdGVzIHRoZSBpbmRleCBlbnRyaWVzIGZvciB0aGUgcHJvdmlkZWQgZG9jdW1lbnQgYnkgZGVsZXRpbmcgZW50cmllc1xuICAgICAqIHRoYXQgYXJlIG5vIGxvbmdlciByZWZlcmVuY2VkIGluIGBuZXdFbnRyaWVzYCBhbmQgYWRkaW5nIGFsbCBuZXdseSBhZGRlZFxuICAgICAqIGVudHJpZXMuXG4gICAgICovICAgIHZuKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgTihcIkluZGV4ZWREYkluZGV4TWFuYWdlclwiLCBcIlVwZGF0aW5nIGluZGV4IGVudHJpZXMgZm9yIGRvY3VtZW50ICclcydcIiwgZS5rZXkpO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgICAgICBjb25zdCByID0gdC5nZXRJdGVyYXRvcigpLCBvID0gZS5nZXRJdGVyYXRvcigpO1xuICAgICAgICAgICAgbGV0IHUgPSB2ZShyKSwgYyA9IHZlKG8pO1xuICAgICAgICAgICAgLy8gV2FsayB0aHJvdWdoIHRoZSB0d28gc2V0cyBhdCB0aGUgc2FtZSB0aW1lLCB1c2luZyB0aGUgb3JkZXJpbmcgZGVmaW5lZCBieVxuICAgICAgICAgICAgLy8gYGNvbXBhcmF0b3JgLlxuICAgICAgICAgICAgZm9yICg7dSB8fCBjOyApIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9ICExLCBlID0gITE7XG4gICAgICAgICAgICAgICAgaWYgKHUgJiYgYykge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gbih1LCBjKTtcbiAgICAgICAgICAgICAgICAgICAgcyA8IDAgPyBcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZFxuICAgICAgICAgICAgICAgICAgICAvLyB3YWxrdGhyb3VnaCBpcyBvbmx5IGluIGBiZWZvcmVgLlxuICAgICAgICAgICAgICAgICAgICBlID0gITAgOiBzID4gMCAmJiAoXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZSBlbGVtZW50IHdhcyBhZGRlZCBpZiB0aGUgbmV4dCBlbGVtZW50IGluIG91ciBvcmRlcmVkIHdhbGt0aHJvdWdoXG4gICAgICAgICAgICAgICAgICAgIC8vIGlzIG9ubHkgaW4gYGFmdGVyYC5cbiAgICAgICAgICAgICAgICAgICAgdCA9ICEwKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgbnVsbCAhPSB1ID8gZSA9ICEwIDogdCA9ICEwO1xuICAgICAgICAgICAgICAgIHQgPyAocyhjKSwgYyA9IHZlKG8pKSA6IGUgPyAoaSh1KSwgdSA9IHZlKHIpKSA6ICh1ID0gdmUociksIGMgPSB2ZShvKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0ocywgaSwgTXIsIChcbiAgICAgICAgLyogb25BZGQ9ICovIHMgPT4ge1xuICAgICAgICAgICAgci5wdXNoKHRoaXMuUm4odCwgZSwgbiwgcykpO1xuICAgICAgICB9KSwgKFxuICAgICAgICAvKiBvblJlbW92ZT0gKi8gcyA9PiB7XG4gICAgICAgICAgICByLnB1c2godGhpcy5Qbih0LCBlLCBuLCBzKSk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihyKTtcbiAgICB9XG4gICAgVG4odCkge1xuICAgICAgICBsZXQgZSA9IDE7XG4gICAgICAgIHJldHVybiB0byh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcInNlcXVlbmNlTnVtYmVySW5kZXhcIixcbiAgICAgICAgICAgIHJldmVyc2U6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLnVwcGVyQm91bmQoWyB0aGlzLnVpZCwgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIgXSlcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBzLmRvbmUoKSwgZSA9IG4uc2VxdWVuY2VOdW1iZXIgKyAxO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHNldCBvZiBJREIgcmFuZ2VzIHRoYXQgc3BsaXRzIHRoZSBleGlzdGluZyByYW5nZSBhbmQgZXhjbHVkZXNcbiAgICAgKiBhbnkgdmFsdWVzIHRoYXQgbWF0Y2ggdGhlIGBub3RJblZhbHVlYCBmcm9tIHRoZXNlIHJhbmdlcy4gQXMgYW4gZXhhbXBsZSxcbiAgICAgKiAnW2ZvbyA+IDIgJiYgZm9vICE9IDNdYCBiZWNvbWVzICBgW2ZvbyA+IDIgJiYgPCAzLCBmb28gPiAzXWAuXG4gICAgICovICAgIGNyZWF0ZVJhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gVGhlIG5vdEluIHZhbHVlcyBuZWVkIHRvIGJlIHNvcnRlZCBhbmQgdW5pcXVlIHNvIHRoYXQgd2UgY2FuIHJldHVybiBhXG4gICAgICAgIC8vIHNvcnRlZCBzZXQgb2Ygbm9uLW92ZXJsYXBwaW5nIHJhbmdlcy5cbiAgICAgICAgbiA9IG4uc29ydCgoKHQsIGUpID0+IE1yKHQsIGUpKSkuZmlsdGVyKCgodCwgZSwgbikgPT4gIWUgfHwgMCAhPT0gTXIodCwgbltlIC0gMV0pKSk7XG4gICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgcy5wdXNoKHQpO1xuICAgICAgICBmb3IgKGNvbnN0IGkgb2Ygbikge1xuICAgICAgICAgICAgY29uc3QgbiA9IE1yKGksIHQpLCByID0gTXIoaSwgZSk7XG4gICAgICAgICAgICBpZiAoMCA9PT0gbikgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgaXMgdGhlIGxvd2VyIGJvdW5kLiBXZSB0aGVyZWZvcmUgbmVlZCB0byByYWlzZSB0aGUgYm91bmRcbiAgICAgICAgICAgIC8vIHRvIHRoZSBuZXh0IHZhbHVlLlxuICAgICAgICAgICAgc1swXSA9IHQuSmUoKTsgZWxzZSBpZiAobiA+IDAgJiYgciA8IDApIFxuICAgICAgICAgICAgLy8gYG5vdEluVmFsdWVgIGlzIGluIHRoZSBtaWRkbGUgb2YgdGhlIHJhbmdlXG4gICAgICAgICAgICBzLnB1c2goaSksIHMucHVzaChpLkplKCkpOyBlbHNlIGlmIChyID4gMCkgXG4gICAgICAgICAgICAvLyBgbm90SW5WYWx1ZWAgKGFuZCBhbGwgZm9sbG93aW5nIHZhbHVlcykgYXJlIG91dCBvZiB0aGUgcmFuZ2VcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMucHVzaChlKTtcbiAgICAgICAgY29uc3QgaSA9IFtdO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IHMubGVuZ3RoOyB0ICs9IDIpIHtcbiAgICAgICAgICAgIC8vIElmIHdlIGVuY291bnRlciB0d28gYm91bmRzIHRoYXQgd2lsbCBjcmVhdGUgYW4gdW5tYXRjaGFibGUga2V5IHJhbmdlLFxuICAgICAgICAgICAgLy8gdGhlbiB3ZSByZXR1cm4gYW4gZW1wdHkgc2V0IG9mIGtleSByYW5nZXMuXG4gICAgICAgICAgICBpZiAodGhpcy5ibihzW3RdLCBzW3QgKyAxXSkpIHJldHVybiBbXTtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBbIHNbdF0uaW5kZXhJZCwgdGhpcy51aWQsIHNbdF0uYXJyYXlWYWx1ZSwgc1t0XS5kaXJlY3Rpb25hbFZhbHVlLCBIciwgW10gXSwgbiA9IFsgc1t0ICsgMV0uaW5kZXhJZCwgdGhpcy51aWQsIHNbdCArIDFdLmFycmF5VmFsdWUsIHNbdCArIDFdLmRpcmVjdGlvbmFsVmFsdWUsIEhyLCBbXSBdO1xuICAgICAgICAgICAgaS5wdXNoKElEQktleVJhbmdlLmJvdW5kKGUsIG4pKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaTtcbiAgICB9XG4gICAgYm4odCwgZSkge1xuICAgICAgICAvLyBJZiBsb3dlciBib3VuZCBpcyBncmVhdGVyIHRoYW4gdGhlIHVwcGVyIGJvdW5kLCB0aGVuIHRoZSBrZXlcbiAgICAgICAgLy8gcmFuZ2UgY2FuIG5ldmVyIGJlIG1hdGNoZWQuXG4gICAgICAgIHJldHVybiBNcih0LCBlKSA+IDA7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRGaWVsZEluZGV4ZXModCwgZSkubmV4dChlbyk7XG4gICAgfVxuICAgIGdldE1pbk9mZnNldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5tYXBBcnJheSh0aGlzLmNuKGUpLCAoZSA9PiB0aGlzLmFuKHQsIGUpLm5leHQoKHQgPT4gdCB8fCBPKCkpKSkpLm5leHQoZW8pO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNvbGxlY3Rpb25QYXJlbnRzXG4gKiBkb2N1bWVudCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBZcih0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiY29sbGVjdGlvblBhcmVudHNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBlbnRyeSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWHIodCkge1xuICAgIHJldHVybiBfZSh0LCBcImluZGV4RW50cmllc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGluZGV4IGNvbmZpZ3VyYXRpb24gb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFpyKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJpbmRleENvbmZpZ3VyYXRpb25cIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBpbmRleCBzdGF0ZSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gdG8odCkge1xuICAgIHJldHVybiBfZSh0LCBcImluZGV4U3RhdGVcIik7XG59XG5cbmZ1bmN0aW9uIGVvKHQpIHtcbiAgICBGKDAgIT09IHQubGVuZ3RoKTtcbiAgICBsZXQgZSA9IHRbMF0uaW5kZXhTdGF0ZS5vZmZzZXQsIG4gPSBlLmxhcmdlc3RCYXRjaElkO1xuICAgIGZvciAobGV0IHMgPSAxOyBzIDwgdC5sZW5ndGg7IHMrKykge1xuICAgICAgICBjb25zdCBpID0gdFtzXS5pbmRleFN0YXRlLm9mZnNldDtcbiAgICAgICAgVHQoaSwgZSkgPCAwICYmIChlID0gaSksIG4gPCBpLmxhcmdlc3RCYXRjaElkICYmIChuID0gaS5sYXJnZXN0QmF0Y2hJZCk7XG4gICAgfVxuICAgIHJldHVybiBuZXcgSXQoZS5yZWFkVGltZSwgZS5kb2N1bWVudEtleSwgbik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IG5vID0ge1xuICAgIGRpZFJ1bjogITEsXG4gICAgc2VxdWVuY2VOdW1iZXJzQ29sbGVjdGVkOiAwLFxuICAgIHRhcmdldHNSZW1vdmVkOiAwLFxuICAgIGRvY3VtZW50c1JlbW92ZWQ6IDBcbn07XG5cbmNsYXNzIHNvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvLyBXaGVuIHdlIGF0dGVtcHQgdG8gY29sbGVjdCwgd2Ugd2lsbCBvbmx5IGRvIHNvIGlmIHRoZSBjYWNoZSBzaXplIGlzIGdyZWF0ZXIgdGhhbiB0aGlzXG4gICAgLy8gdGhyZXNob2xkLiBQYXNzaW5nIGBDT0xMRUNUSU9OX0RJU0FCTEVEYCBoZXJlIHdpbGwgY2F1c2UgY29sbGVjdGlvbiB0byBhbHdheXMgYmUgc2tpcHBlZC5cbiAgICB0LCBcbiAgICAvLyBUaGUgcGVyY2VudGFnZSBvZiBzZXF1ZW5jZSBudW1iZXJzIHRoYXQgd2Ugd2lsbCBhdHRlbXB0IHRvIGNvbGxlY3RcbiAgICBlLCBcbiAgICAvLyBBIGNhcCBvbiB0aGUgdG90YWwgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgdGhhdCB3aWxsIGJlIGNvbGxlY3RlZC4gVGhpcyBwcmV2ZW50c1xuICAgIC8vIHVzIGZyb20gY29sbGVjdGluZyBhIGh1Z2UgbnVtYmVyIG9mIHNlcXVlbmNlIG51bWJlcnMgaWYgdGhlIGNhY2hlIGhhcyBncm93biB2ZXJ5IGxhcmdlLlxuICAgIG4pIHtcbiAgICAgICAgdGhpcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID0gdCwgdGhpcy5wZXJjZW50aWxlVG9Db2xsZWN0ID0gZSwgdGhpcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0ID0gbjtcbiAgICB9XG4gICAgc3RhdGljIHdpdGhDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gbmV3IHNvKHQsIHNvLkRFRkFVTFRfQ09MTEVDVElPTl9QRVJDRU5USUxFLCBzby5ERUZBVUxUX01BWF9TRVFVRU5DRV9OVU1CRVJTX1RPX0NPTExFQ1QpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGVsZXRlIGEgbXV0YXRpb24gYmF0Y2ggYW5kIHRoZSBhc3NvY2lhdGVkIGRvY3VtZW50IG11dGF0aW9ucy5cbiAqIEByZXR1cm5zIEEgUGVyc2lzdGVuY2VQcm9taXNlIG9mIHRoZSBkb2N1bWVudCBtdXRhdGlvbnMgdGhhdCB3ZXJlIHJlbW92ZWQuXG4gKi9cbmZ1bmN0aW9uIGlvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gdC5zdG9yZShcIm11dGF0aW9uc1wiKSwgaSA9IHQuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKSwgciA9IFtdLCBvID0gSURCS2V5UmFuZ2Uub25seShuLmJhdGNoSWQpO1xuICAgIGxldCB1ID0gMDtcbiAgICBjb25zdCBjID0gcy5YKHtcbiAgICAgICAgcmFuZ2U6IG9cbiAgICB9LCAoKHQsIGUsIG4pID0+ICh1KyssIG4uZGVsZXRlKCkpKSk7XG4gICAgci5wdXNoKGMubmV4dCgoKCkgPT4ge1xuICAgICAgICBGKDEgPT09IHUpO1xuICAgIH0pKSk7XG4gICAgY29uc3QgYSA9IFtdO1xuICAgIGZvciAoY29uc3QgdCBvZiBuLm11dGF0aW9ucykge1xuICAgICAgICBjb25zdCBzID0genQoZSwgdC5rZXkucGF0aCwgbi5iYXRjaElkKTtcbiAgICAgICAgci5wdXNoKGkuZGVsZXRlKHMpKSwgYS5wdXNoKHQua2V5KTtcbiAgICB9XG4gICAgcmV0dXJuIFJ0LndhaXRGb3IocikubmV4dCgoKCkgPT4gYSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYW4gYXBwcm94aW1hdGUgc2l6ZSBmb3IgdGhlIGdpdmVuIGRvY3VtZW50LlxuICovIGZ1bmN0aW9uIHJvKHQpIHtcbiAgICBpZiAoIXQpIHJldHVybiAwO1xuICAgIGxldCBlO1xuICAgIGlmICh0LmRvY3VtZW50KSBlID0gdC5kb2N1bWVudDsgZWxzZSBpZiAodC51bmtub3duRG9jdW1lbnQpIGUgPSB0LnVua25vd25Eb2N1bWVudDsgZWxzZSB7XG4gICAgICAgIGlmICghdC5ub0RvY3VtZW50KSB0aHJvdyBPKCk7XG4gICAgICAgIGUgPSB0Lm5vRG9jdW1lbnQ7XG4gICAgfVxuICAgIHJldHVybiBKU09OLnN0cmluZ2lmeShlKS5sZW5ndGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogQSBtdXRhdGlvbiBxdWV1ZSBmb3IgYSBzcGVjaWZpYyB1c2VyLCBiYWNrZWQgYnkgSW5kZXhlZERCLiAqLyBzby5ERUZBVUxUX0NPTExFQ1RJT05fUEVSQ0VOVElMRSA9IDEwLCBcbnNvLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCA9IDFlMywgc28uREVGQVVMVCA9IG5ldyBzbyg0MTk0MzA0MCwgc28uREVGQVVMVF9DT0xMRUNUSU9OX1BFUkNFTlRJTEUsIHNvLkRFRkFVTFRfTUFYX1NFUVVFTkNFX05VTUJFUlNfVE9fQ09MTEVDVCksIFxuc28uRElTQUJMRUQgPSBuZXcgc28oLTEsIDAsIDApO1xuXG5jbGFzcyBvbyB7XG4gICAgY29uc3RydWN0b3IoXG4gICAgLyoqXG4gICAgICogVGhlIG5vcm1hbGl6ZWQgdXNlcklkIChlLmcuIG51bGwgVUlEID0+IFwiXCIgdXNlcklkKSB1c2VkIHRvIHN0b3JlIC9cbiAgICAgKiByZXRyaWV2ZSBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXJJZCA9IHQsIHRoaXMuc2VyaWFsaXplciA9IGUsIHRoaXMuaW5kZXhNYW5hZ2VyID0gbiwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IHMsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQ2FjaGVzIHRoZSBkb2N1bWVudCBrZXlzIGZvciBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMuIElmIHRoZSBtdXRhdGlvblxuICAgICAgICAgKiBoYXMgYmVlbiByZW1vdmVkIGZyb20gSW5kZXhlZERiLCB0aGUgY2FjaGVkIHZhbHVlIG1heSBjb250aW51ZSB0b1xuICAgICAgICAgKiBiZSB1c2VkIHRvIHJldHJpZXZlIHRoZSBiYXRjaCdzIGRvY3VtZW50IGtleXMuIFRvIHJlbW92ZSBhIGNhY2hlZCB2YWx1ZVxuICAgICAgICAgKiBsb2NhbGx5LCBgcmVtb3ZlQ2FjaGVkTXV0YXRpb25LZXlzKClgIHNob3VsZCBiZSBpbnZva2VkIGVpdGhlciBkaXJlY3RseVxuICAgICAgICAgKiBvciB0aHJvdWdoIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdpdGggbXVsdGktdGFiLCB3aGVuIHRoZSBwcmltYXJ5IGNsaWVudCBhY2tub3dsZWRnZXMgb3IgcmVqZWN0cyBhIG11dGF0aW9uLFxuICAgICAgICAgKiB0aGlzIGNhY2hlIGlzIHVzZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgdG8gaW52YWxpZGF0ZSB0aGUgbG9jYWxcbiAgICAgICAgICogdmlldyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgd2VyZSBwcmV2aW91c2x5IGFmZmVjdGVkIGJ5IHRoZSBtdXRhdGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgICAgIHRoaXMuVm4gPSB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIuXG4gICAgICogQHBhcmFtIHVzZXIgLSBUaGUgdXNlciBmb3Igd2hpY2ggdG8gY3JlYXRlIGEgbXV0YXRpb24gcXVldWUuXG4gICAgICogQHBhcmFtIHNlcmlhbGl6ZXIgLSBUaGUgc2VyaWFsaXplciB0byB1c2Ugd2hlbiBwZXJzaXN0aW5nIHRvIEluZGV4ZWREYi5cbiAgICAgKi8gICAgc3RhdGljIGRlKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gVE9ETyhtY2cpOiBGaWd1cmUgb3V0IHdoYXQgY29uc3RyYWludHMgdGhlcmUgYXJlIG9uIHVzZXJJRHNcbiAgICAgICAgLy8gSW4gcGFydGljdWxhciwgYXJlIHRoZXJlIGFueSByZXNlcnZlZCBjaGFyYWN0ZXJzPyBhcmUgZW1wdHkgaWRzIGFsbG93ZWQ/XG4gICAgICAgIC8vIEZvciB0aGUgbW9tZW50IHN0b3JlIHRoZXNlIHRvZ2V0aGVyIGluIHRoZSBzYW1lIG11dGF0aW9ucyB0YWJsZSBhc3N1bWluZ1xuICAgICAgICAvLyB0aGF0IGVtcHR5IHVzZXJJRHMgYXJlbid0IGFsbG93ZWQuXG4gICAgICAgIEYoXCJcIiAhPT0gdC51aWQpO1xuICAgICAgICBjb25zdCBpID0gdC5pc0F1dGhlbnRpY2F0ZWQoKSA/IHQudWlkIDogXCJcIjtcbiAgICAgICAgcmV0dXJuIG5ldyBvbyhpLCBlLCBuLCBzKTtcbiAgICB9XG4gICAgY2hlY2tFbXB0eSh0KSB7XG4gICAgICAgIGxldCBlID0gITA7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgXSwgWyB0aGlzLnVzZXJJZCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIF0pO1xuICAgICAgICByZXR1cm4gY28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgIH0sICgodCwgbiwgcykgPT4ge1xuICAgICAgICAgICAgZSA9ICExLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSBhbyh0KSwgciA9IGNvKHQpO1xuICAgICAgICAvLyBUaGUgSW5kZXhlZERiIGltcGxlbWVudGF0aW9uIGluIENocm9tZSAoYW5kIEZpcmVmb3gpIGRvZXMgbm90IGhhbmRsZVxuICAgICAgICAvLyBjb21wb3VuZCBpbmRpY2VzIHRoYXQgaW5jbHVkZSBhdXRvLWdlbmVyYXRlZCBrZXlzIGNvcnJlY3RseS4gVG8gZW5zdXJlXG4gICAgICAgIC8vIHRoYXQgdGhlIGluZGV4IGVudHJ5IGlzIGFkZGVkIGNvcnJlY3RseSBpbiBhbGwgYnJvd3NlcnMsIHdlIHBlcmZvcm0gdHdvXG4gICAgICAgIC8vIHdyaXRlczogVGhlIGZpcnN0IHdyaXRlIGlzIHVzZWQgdG8gcmV0cmlldmUgdGhlIG5leHQgYXV0by1nZW5lcmF0ZWQgQmF0Y2hcbiAgICAgICAgLy8gSUQsIGFuZCB0aGUgc2Vjb25kIHdyaXRlIHBvcHVsYXRlcyB0aGUgaW5kZXggYW5kIHN0b3JlcyB0aGUgYWN0dWFsXG4gICAgICAgIC8vIG11dGF0aW9uIGJhdGNoLlxuICAgICAgICAvLyBTZWU6IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTcwMTk3MlxuICAgICAgICAvLyBXZSB3cml0ZSBhbiBlbXB0eSBvYmplY3QgdG8gb2J0YWluIGtleVxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICByZXR1cm4gci5hZGQoe30pLm5leHQoKG8gPT4ge1xuICAgICAgICAgICAgRihcIm51bWJlclwiID09IHR5cGVvZiBvKTtcbiAgICAgICAgICAgIGNvbnN0IHUgPSBuZXcgWnMobywgZSwgbiwgcyksIGMgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4uYmFzZU11dGF0aW9ucy5tYXAoKGUgPT4gamkodC5mZSwgZSkpKSwgaSA9IG4ubXV0YXRpb25zLm1hcCgoZSA9PiBqaSh0LmZlLCBlKSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZDogZSxcbiAgICAgICAgICAgICAgICAgICAgYmF0Y2hJZDogbi5iYXRjaElkLFxuICAgICAgICAgICAgICAgICAgICBsb2NhbFdyaXRlVGltZU1zOiBuLmxvY2FsV3JpdGVUaW1lLnRvTWlsbGlzKCksXG4gICAgICAgICAgICAgICAgICAgIGJhc2VNdXRhdGlvbnM6IHMsXG4gICAgICAgICAgICAgICAgICAgIG11dGF0aW9uczogaVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9KHRoaXMuc2VyaWFsaXplciwgdGhpcy51c2VySWQsIHUpLCBhID0gW107XG4gICAgICAgICAgICBsZXQgaCA9IG5ldyBFZSgoKHQsIGUpID0+IGV0KHQuY2Fub25pY2FsU3RyaW5nKCksIGUuY2Fub25pY2FsU3RyaW5nKCkpKSk7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IHQgb2Ygcykge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB6dCh0aGlzLnVzZXJJZCwgdC5rZXkucGF0aCwgbyk7XG4gICAgICAgICAgICAgICAgaCA9IGguYWRkKHQua2V5LnBhdGgucG9wTGFzdCgpKSwgYS5wdXNoKHIucHV0KGMpKSwgYS5wdXNoKGkucHV0KGUsIFd0KSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaC5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgICAgICBhLnB1c2godGhpcy5pbmRleE1hbmFnZXIuYWRkVG9Db2xsZWN0aW9uUGFyZW50SW5kZXgodCwgZSkpO1xuICAgICAgICAgICAgfSkpLCB0LmFkZE9uQ29tbWl0dGVkTGlzdGVuZXIoKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0aGlzLlZuW29dID0gdS5rZXlzKCk7XG4gICAgICAgICAgICB9KSksIFJ0LndhaXRGb3IoYSkubmV4dCgoKCkgPT4gdSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gY28odCkuZ2V0KGUpLm5leHQoKHQgPT4gdCA/IChGKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIF9yKHRoaXMuc2VyaWFsaXplciwgdCkpIDogbnVsbCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBkb2N1bWVudCBrZXlzIGZvciB0aGUgbXV0YXRpb24gYmF0Y2ggd2l0aCB0aGUgZ2l2ZW4gYmF0Y2hJZC5cbiAgICAgKiBGb3IgcHJpbWFyeSBjbGllbnRzLCB0aGlzIG1ldGhvZCByZXR1cm5zIGBudWxsYCBhZnRlclxuICAgICAqIGByZW1vdmVNdXRhdGlvbkJhdGNoZXMoKWAgaGFzIGJlZW4gY2FsbGVkLiBTZWNvbmRhcnkgY2xpZW50cyByZXR1cm4gYVxuICAgICAqIGNhY2hlZCByZXN1bHQgdW50aWwgYHJlbW92ZUNhY2hlZE11dGF0aW9uS2V5cygpYCBpcyBpbnZva2VkLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgU24odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5WbltlXSA/IFJ0LnJlc29sdmUodGhpcy5WbltlXSkgOiB0aGlzLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LmtleXMoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5WbltlXSA9IG4sIG47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlICsgMSwgcyA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoWyB0aGlzLnVzZXJJZCwgbiBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gY28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJ1c2VyTXV0YXRpb25zSW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBzXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgZS51c2VySWQgPT09IHRoaXMudXNlcklkICYmIChGKGUuYmF0Y2hJZCA+PSBuKSwgaSA9IF9yKHRoaXMuc2VyaWFsaXplciwgZSkpLCBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFVuYWNrbm93bGVkZ2VkQmF0Y2hJZCh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS51cHBlckJvdW5kKFsgdGhpcy51c2VySWQsIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IG4gPSAtMTtcbiAgICAgICAgcmV0dXJuIGNvKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwidXNlck11dGF0aW9uc0luZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogZSxcbiAgICAgICAgICAgIHJldmVyc2U6ICEwXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgbiA9IGUuYmF0Y2hJZCwgcy5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBJREJLZXlSYW5nZS5ib3VuZChbIHRoaXMudXNlcklkLCAtMSBdLCBbIHRoaXMudXNlcklkLCBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgXSk7XG4gICAgICAgIHJldHVybiBjbyh0KS5qKFwidXNlck11dGF0aW9uc0luZGV4XCIsIGUpLm5leHQoKHQgPT4gdC5tYXAoKHQgPT4gX3IodGhpcy5zZXJpYWxpemVyLCB0KSkpKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ0RvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgLy8gU2NhbiB0aGUgZG9jdW1lbnQtbXV0YXRpb24gaW5kZXggc3RhcnRpbmcgd2l0aCBhIHByZWZpeCBzdGFydGluZyB3aXRoXG4gICAgICAgIC8vIHRoZSBnaXZlbiBkb2N1bWVudEtleS5cbiAgICAgICAgY29uc3QgbiA9IGp0KHRoaXMudXNlcklkLCBlLnBhdGgpLCBzID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChuKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gYW8odCkuWCh7XG4gICAgICAgICAgICByYW5nZTogc1xuICAgICAgICB9LCAoKG4sIHMsIHIpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtvLCB1LCBjXSA9IG4sIGEgPSBHdCh1KTtcbiAgICAgICAgICAgIC8vIE9ubHkgY29uc2lkZXIgcm93cyBtYXRjaGluZyBleGFjdGx5IHRoZSBzcGVjaWZpYyBrZXkgb2ZcbiAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgIC8vIG9yZGVyIHRlcm1pbmF0b3JzIGJlZm9yZSBwYXRoIHNlcGFyYXRvcnMsIHdlJ2xsIGVuY291bnRlciBhbGxcbiAgICAgICAgICAgIC8vIHRoZSBpbmRleCByb3dzIGZvciBkb2N1bWVudEtleSBjb250aWd1b3VzbHkuIEluIHBhcnRpY3VsYXIsIGFsbFxuICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgLy8gZG9jdW1lbnRzIG5lc3RlZCBpbiBhIHN1YmNvbGxlY3Rpb24gYmVuZWF0aCBkb2N1bWVudEtleSBzbyB3ZVxuICAgICAgICAgICAgLy8gY2FuIHN0b3AgYXMgc29vbiBhcyB3ZSBoaXQgYW55IHN1Y2ggcm93LlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG8gPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKGEpKSBcbiAgICAgICAgICAgIC8vIExvb2sgdXAgdGhlIG11dGF0aW9uIGJhdGNoIGluIHRoZSBzdG9yZS5cbiAgICAgICAgICAgIHJldHVybiBjbyh0KS5nZXQoYykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCF0KSB0aHJvdyBPKCk7XG4gICAgICAgICAgICAgICAgRih0LnVzZXJJZCA9PT0gdGhpcy51c2VySWQpLCBpLnB1c2goX3IodGhpcy5zZXJpYWxpemVyLCB0KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGkpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgRWUoZXQpO1xuICAgICAgICBjb25zdCBzID0gW107XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGp0KHRoaXMudXNlcklkLCBlLnBhdGgpLCByID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChpKSwgbyA9IGFvKHQpLlgoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiByXG4gICAgICAgICAgICB9LCAoKHQsIHMsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBbciwgbywgdV0gPSB0LCBjID0gR3Qobyk7XG4gICAgICAgICAgICAgICAgLy8gT25seSBjb25zaWRlciByb3dzIG1hdGNoaW5nIGV4YWN0bHkgdGhlIHNwZWNpZmljIGtleSBvZlxuICAgICAgICAgICAgICAgIC8vIGludGVyZXN0LiBOb3RlIHRoYXQgYmVjYXVzZSB3ZSBvcmRlciBieSBwYXRoIGZpcnN0LCBhbmQgd2VcbiAgICAgICAgICAgICAgICAvLyBvcmRlciB0ZXJtaW5hdG9ycyBiZWZvcmUgcGF0aCBzZXBhcmF0b3JzLCB3ZSdsbCBlbmNvdW50ZXIgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIGluZGV4IHJvd3MgZm9yIGRvY3VtZW50S2V5IGNvbnRpZ3VvdXNseS4gSW4gcGFydGljdWxhciwgYWxsXG4gICAgICAgICAgICAgICAgLy8gdGhlIHJvd3MgZm9yIGRvY3VtZW50S2V5IHdpbGwgb2NjdXIgYmVmb3JlIGFueSByb3dzIGZvclxuICAgICAgICAgICAgICAgIC8vIGRvY3VtZW50cyBuZXN0ZWQgaW4gYSBzdWJjb2xsZWN0aW9uIGJlbmVhdGggZG9jdW1lbnRLZXkgc28gd2VcbiAgICAgICAgICAgICAgICAvLyBjYW4gc3RvcCBhcyBzb29uIGFzIHdlIGhpdCBhbnkgc3VjaCByb3cuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIGUucGF0aC5pc0VxdWFsKGMpID8gbiA9IG4uYWRkKHUpIDogaS5kb25lKCk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBzLnB1c2gobyk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihzKS5uZXh0KCgoKSA9PiB0aGlzLkRuKHQsIG4pKSk7XG4gICAgfVxuICAgIGdldEFsbE11dGF0aW9uQmF0Y2hlc0FmZmVjdGluZ1F1ZXJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMSwgaSA9IGp0KHRoaXMudXNlcklkLCBuKSwgciA9IElEQktleVJhbmdlLmxvd2VyQm91bmQoaSk7XG4gICAgICAgIC8vIENvbGxlY3QgdXAgdW5pcXVlIGJhdGNoSURzIGVuY291bnRlcmVkIGR1cmluZyBhIHNjYW4gb2YgdGhlIGluZGV4LiBVc2UgYVxuICAgICAgICAvLyBTb3J0ZWRTZXQgdG8gYWNjdW11bGF0ZSBiYXRjaCBJRHMgc28gdGhleSBjYW4gYmUgdHJhdmVyc2VkIGluIG9yZGVyIGluIGFcbiAgICAgICAgLy8gc2NhbiBvZiB0aGUgbWFpbiB0YWJsZS5cbiAgICAgICAgbGV0IG8gPSBuZXcgRWUoZXQpO1xuICAgICAgICByZXR1cm4gYW8odCkuWCh7XG4gICAgICAgICAgICByYW5nZTogclxuICAgICAgICB9LCAoKHQsIGUsIGkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IFtyLCB1LCBjXSA9IHQsIGEgPSBHdCh1KTtcbiAgICAgICAgICAgIHIgPT09IHRoaXMudXNlcklkICYmIG4uaXNQcmVmaXhPZihhKSA/IFxuICAgICAgICAgICAgLy8gUm93cyB3aXRoIGRvY3VtZW50IGtleXMgbW9yZSB0aGFuIG9uZSBzZWdtZW50IGxvbmdlciB0aGFuIHRoZVxuICAgICAgICAgICAgLy8gcXVlcnkgcGF0aCBjYW4ndCBiZSBtYXRjaGVzLiBGb3IgZXhhbXBsZSwgYSBxdWVyeSBvbiAncm9vbXMnXG4gICAgICAgICAgICAvLyBjYW4ndCBtYXRjaCB0aGUgZG9jdW1lbnQgL3Jvb21zL2FiYy9tZXNzYWdlcy94eXguXG4gICAgICAgICAgICAvLyBUT0RPKG1jZyk6IHdlJ2xsIG5lZWQgYSBkaWZmZXJlbnQgc2Nhbm5lciB3aGVuIHdlIGltcGxlbWVudFxuICAgICAgICAgICAgLy8gYW5jZXN0b3IgcXVlcmllcy5cbiAgICAgICAgICAgIGEubGVuZ3RoID09PSBzICYmIChvID0gby5hZGQoYykpIDogaS5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB0aGlzLkRuKHQsIG8pKSk7XG4gICAgfVxuICAgIERuKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IFtdLCBzID0gW107XG4gICAgICAgIC8vIFRPRE8ocm9ja3dvb2QpOiBJbXBsZW1lbnQgdGhpcyB1c2luZyBpdGVyYXRlLlxuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHMucHVzaChjbyh0KS5nZXQoZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHRocm93IE8oKTtcbiAgICAgICAgICAgICAgICBGKHQudXNlcklkID09PSB0aGlzLnVzZXJJZCksIG4ucHVzaChfcih0aGlzLnNlcmlhbGl6ZXIsIHQpKTtcbiAgICAgICAgICAgIH0pKSk7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihzKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIHJlbW92ZU11dGF0aW9uQmF0Y2godCwgZSkge1xuICAgICAgICByZXR1cm4gaW8odC5odCwgdGhpcy51c2VySWQsIGUpLm5leHQoKG4gPT4gKHQuYWRkT25Db21taXR0ZWRMaXN0ZW5lcigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5DbihlLmJhdGNoSWQpO1xuICAgICAgICB9KSksIFJ0LmZvckVhY2gobiwgKGUgPT4gdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBlKSkpKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDbGVhcnMgdGhlIGNhY2hlZCBrZXlzIGZvciBhIG11dGF0aW9uIGJhdGNoLiBUaGlzIG1ldGhvZCBzaG91bGQgYmVcbiAgICAgKiBjYWxsZWQgYnkgc2Vjb25kYXJ5IGNsaWVudHMgYWZ0ZXIgdGhleSBwcm9jZXNzIG11dGF0aW9uIHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBOb3RlIHRoYXQgdGhpcyBtZXRob2QgZG9lcyBub3QgaGF2ZSB0byBiZSBjYWxsZWQgZnJvbSBwcmltYXJ5IGNsaWVudHMgYXNcbiAgICAgKiB0aGUgY29ycmVzcG9uZGluZyBjYWNoZSBlbnRyaWVzIGFyZSBjbGVhcmVkIHdoZW4gYW4gYWNrbm93bGVkZ2VkIG9yXG4gICAgICogcmVqZWN0ZWQgYmF0Y2ggaXMgcmVtb3ZlZCBmcm9tIHRoZSBtdXRhdGlvbiBxdWV1ZS5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5XG4gICAgQ24odCkge1xuICAgICAgICBkZWxldGUgdGhpcy5Wblt0XTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGVja0VtcHR5KHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgaWYgKCFlKSByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgLy8gVmVyaWZ5IHRoYXQgdGhlcmUgYXJlIG5vIGVudHJpZXMgaW4gdGhlIGRvY3VtZW50TXV0YXRpb25zIGluZGV4IGlmXG4gICAgICAgICAgICAvLyB0aGUgcXVldWUgaXMgZW1wdHkuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gSURCS2V5UmFuZ2UubG93ZXJCb3VuZChbIHRoaXMudXNlcklkIF0pO1xuICAgICAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICAgICAgcmV0dXJuIGFvKHQpLlgoe1xuICAgICAgICAgICAgICAgIHJhbmdlOiBuXG4gICAgICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBpZiAodFswXSA9PT0gdGhpcy51c2VySWQpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZSA9IEd0KHRbMV0pO1xuICAgICAgICAgICAgICAgICAgICBzLnB1c2goZSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIG4uZG9uZSgpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICAgICBGKDAgPT09IHMubGVuZ3RoKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB1byh0LCB0aGlzLnVzZXJJZCwgZSk7XG4gICAgfVxuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkgKHN0YXRlIGlzIGhlbGQgaW4gbWVtb3J5IGluIG90aGVyIGNsaWVudHMpLlxuICAgIC8qKiBSZXR1cm5zIHRoZSBtdXRhdGlvbiBxdWV1ZSdzIG1ldGFkYXRhIGZyb20gSW5kZXhlZERiLiAqL1xuICAgIHhuKHQpIHtcbiAgICAgICAgcmV0dXJuIGhvKHQpLmdldCh0aGlzLnVzZXJJZCkubmV4dCgodCA9PiB0IHx8IHtcbiAgICAgICAgICAgIHVzZXJJZDogdGhpcy51c2VySWQsXG4gICAgICAgICAgICBsYXN0QWNrbm93bGVkZ2VkQmF0Y2hJZDogLTEsXG4gICAgICAgICAgICBsYXN0U3RyZWFtVG9rZW46IFwiXCJcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBtdXRhdGlvbiBxdWV1ZSBmb3IgdGhlIGdpdmVuIHVzZXIgY29udGFpbnMgYSBwZW5kaW5nXG4gKiAgICAgICAgIG11dGF0aW9uIGZvciB0aGUgZ2l2ZW4ga2V5LlxuICovIGZ1bmN0aW9uIHVvKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0ganQoZSwgbi5wYXRoKSwgaSA9IHNbMV0sIHIgPSBJREJLZXlSYW5nZS5sb3dlckJvdW5kKHMpO1xuICAgIGxldCBvID0gITE7XG4gICAgcmV0dXJuIGFvKHQpLlgoe1xuICAgICAgICByYW5nZTogcixcbiAgICAgICAgWTogITBcbiAgICB9LCAoKHQsIG4sIHMpID0+IHtcbiAgICAgICAgY29uc3QgW3IsIHUsIC8qYmF0Y2hJRCovIGNdID0gdDtcbiAgICAgICAgciA9PT0gZSAmJiB1ID09PSBpICYmIChvID0gITApLCBzLmRvbmUoKTtcbiAgICB9KSkubmV4dCgoKCkgPT4gbykpO1xufVxuXG4vKiogUmV0dXJucyB0cnVlIGlmIGFueSBtdXRhdGlvbiBxdWV1ZSBjb250YWlucyB0aGUgZ2l2ZW4gZG9jdW1lbnQuICovXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgbXV0YXRpb25zIG9iamVjdCBzdG9yZS5cbiAqL1xuZnVuY3Rpb24gY28odCkge1xuICAgIHJldHVybiBfZSh0LCBcIm11dGF0aW9uc1wiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIG11dGF0aW9uUXVldWVzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBhbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwiZG9jdW1lbnRNdXRhdGlvbnNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSBtdXRhdGlvblF1ZXVlcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gaG8odCkge1xuICAgIHJldHVybiBfZSh0LCBcIm11dGF0aW9uUXVldWVzXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqIE9mZnNldCB0byBlbnN1cmUgbm9uLW92ZXJsYXBwaW5nIHRhcmdldCBpZHMuICovXG4vKipcbiAqIEdlbmVyYXRlcyBtb25vdG9uaWNhbGx5IGluY3JlYXNpbmcgdGFyZ2V0IElEcyBmb3Igc2VuZGluZyB0YXJnZXRzIHRvIHRoZVxuICogd2F0Y2ggc3RyZWFtLlxuICpcbiAqIFRoZSBjbGllbnQgY29uc3RydWN0cyB0d28gZ2VuZXJhdG9ycywgb25lIGZvciB0aGUgdGFyZ2V0IGNhY2hlLCBhbmQgb25lIGZvclxuICogZm9yIHRoZSBzeW5jIGVuZ2luZSAodG8gZ2VuZXJhdGUgbGltYm8gZG9jdW1lbnRzIHRhcmdldHMpLiBUaGVzZVxuICogZ2VuZXJhdG9ycyBwcm9kdWNlIG5vbi1vdmVybGFwcGluZyBJRHMgKGJ5IHVzaW5nIGV2ZW4gYW5kIG9kZCBJRHNcbiAqIHJlc3BlY3RpdmVseSkuXG4gKlxuICogQnkgc2VwYXJhdGluZyB0aGUgdGFyZ2V0IElEIHNwYWNlLCB0aGUgcXVlcnkgY2FjaGUgY2FuIGdlbmVyYXRlIHRhcmdldCBJRHNcbiAqIHRoYXQgcGVyc2lzdCBhY3Jvc3MgY2xpZW50IHJlc3RhcnRzLCB3aGlsZSBzeW5jIGVuZ2luZSBjYW4gaW5kZXBlbmRlbnRseVxuICogZ2VuZXJhdGUgaW4tbWVtb3J5IHRhcmdldCBJRHMgdGhhdCBhcmUgdHJhbnNpZW50IGFuZCBjYW4gYmUgcmV1c2VkIGFmdGVyIGFcbiAqIHJlc3RhcnQuXG4gKi9cbmNsYXNzIGxvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTm4gPSB0O1xuICAgIH1cbiAgICBuZXh0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ObiArPSAyLCB0aGlzLk5uO1xuICAgIH1cbiAgICBzdGF0aWMga24oKSB7XG4gICAgICAgIC8vIFRoZSB0YXJnZXQgY2FjaGUgZ2VuZXJhdG9yIG11c3QgcmV0dXJuICcyJyBpbiBpdHMgZmlyc3QgY2FsbCB0byBgbmV4dCgpYFxuICAgICAgICAvLyBhcyB0aGVyZSBpcyBubyBkaWZmZXJlbnRpYXRpb24gaW4gdGhlIHByb3RvY29sIGxheWVyIGJldHdlZW4gYW4gdW5zZXRcbiAgICAgICAgLy8gbnVtYmVyIGFuZCB0aGUgbnVtYmVyICcwJy4gSWYgd2Ugd2VyZSB0byBzZW50IGEgdGFyZ2V0IHdpdGggdGFyZ2V0IElEXG4gICAgICAgIC8vICcwJywgdGhlIGJhY2tlbmQgd291bGQgY29uc2lkZXIgaXQgdW5zZXQgYW5kIHJlcGxhY2UgaXQgd2l0aCBpdHMgb3duIElELlxuICAgICAgICByZXR1cm4gbmV3IGxvKDApO1xuICAgIH1cbiAgICBzdGF0aWMgTW4oKSB7XG4gICAgICAgIC8vIFN5bmMgZW5naW5lIGFzc2lnbnMgdGFyZ2V0IElEcyBmb3IgbGltYm8gZG9jdW1lbnQgZGV0ZWN0aW9uLlxuICAgICAgICByZXR1cm4gbmV3IGxvKC0xKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGZvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0LCB0aGlzLnNlcmlhbGl6ZXIgPSBlO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdlIGRvbid0IGNhY2hlIGdsb2JhbCBtZXRhZGF0YSBmb3IgdGhlIHRhcmdldCBjYWNoZSwgc2luY2VcbiAgICAvLyBzb21lIG9mIGl0IChpbiBwYXJ0aWN1bGFyIGBoaWdoZXN0VGFyZ2V0SWRgKSBjYW4gYmUgbW9kaWZpZWQgYnkgc2Vjb25kYXJ5XG4gICAgLy8gdGFicy4gV2UgY291bGQgcGVyaGFwcyBiZSBtb3JlIGdyYW51bGFyIChhbmQgZS5nLiBzdGlsbCBjYWNoZVxuICAgIC8vIGBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uYCBpbiBtZW1vcnkpIGJ1dCBmb3Igc2ltcGxpY2l0eSB3ZSBjdXJyZW50bHkgZ29cbiAgICAvLyB0byBJbmRleGVkRGIgd2hlbmV2ZXIgd2UgbmVlZCB0byByZWFkIG1ldGFkYXRhLiBXZSBjYW4gcmV2aXNpdCBpZiBpdCB0dXJuc1xuICAgIC8vIG91dCB0byBoYXZlIGEgbWVhbmluZ2Z1bCBwZXJmb3JtYW5jZSBpbXBhY3QuXG4gICAgYWxsb2NhdGVUYXJnZXRJZCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyBsbyhlLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgICAgICAgICByZXR1cm4gZS5oaWdoZXN0VGFyZ2V0SWQgPSBuLm5leHQoKSwgdGhpcy5Pbih0LCBlKS5uZXh0KCgoKSA9PiBlLmhpZ2hlc3RUYXJnZXRJZCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbih0KS5uZXh0KCh0ID0+IHJ0LmZyb21UaW1lc3RhbXAobmV3IGl0KHQubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbi5zZWNvbmRzLCB0Lmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24ubmFub3NlY29uZHMpKSkpO1xuICAgIH1cbiAgICBnZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICByZXR1cm4gdGhpcy4kbih0KS5uZXh0KCh0ID0+IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyKSk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQpLm5leHQoKHMgPT4gKHMuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyID0gZSwgbiAmJiAocy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uID0gbi50b1RpbWVzdGFtcCgpKSwgXG4gICAgICAgIGUgPiBzLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciAmJiAocy5oaWdoZXN0TGlzdGVuU2VxdWVuY2VOdW1iZXIgPSBlKSwgdGhpcy5Pbih0LCBzKSkpKTtcbiAgICB9XG4gICAgYWRkVGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZuKHQsIGUpLm5leHQoKCgpID0+IHRoaXMuJG4odCkubmV4dCgobiA9PiAobi50YXJnZXRDb3VudCArPSAxLCB0aGlzLkJuKGUsIG4pLCBcbiAgICAgICAgdGhpcy5Pbih0LCBuKSkpKSkpO1xuICAgIH1cbiAgICB1cGRhdGVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuRm4odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCgoKSA9PiB3byh0KS5kZWxldGUoZS50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiB0aGlzLiRuKHQpKSkubmV4dCgoZSA9PiAoRihlLnRhcmdldENvdW50ID4gMCksIFxuICAgICAgICBlLnRhcmdldENvdW50IC09IDEsIHRoaXMuT24odCwgZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERyb3BzIGFueSB0YXJnZXRzIHdpdGggc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQsIGV4Y2VwdGluZyB0aG9zZVxuICAgICAqIHByZXNlbnQgaW4gYGFjdGl2ZVRhcmdldElkc2AuIERvY3VtZW50IGFzc29jaWF0aW9ucyBmb3IgdGhlIHJlbW92ZWQgdGFyZ2V0cyBhcmUgYWxzbyByZW1vdmVkLlxuICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB0YXJnZXRzIHJlbW92ZWQuXG4gICAgICovICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICBsZXQgcyA9IDA7XG4gICAgICAgIGNvbnN0IGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHdvKHQpLlgoKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB1ID0gbXIobyk7XG4gICAgICAgICAgICB1LnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQodS50YXJnZXRJZCkgJiYgKHMrKywgaS5wdXNoKHRoaXMucmVtb3ZlVGFyZ2V0RGF0YSh0LCB1KSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUnQud2FpdEZvcihpKSkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiB3aXRoIGVhY2ggYFRhcmdldERhdGFgIHRoYXQgd2UgaGF2ZSBjYWNoZWQuXG4gICAgICovICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gd28odCkuWCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBtcihuKTtcbiAgICAgICAgICAgIGUocyk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgJG4odCkge1xuICAgICAgICByZXR1cm4gX28odCkuZ2V0KFwidGFyZ2V0R2xvYmFsS2V5XCIpLm5leHQoKHQgPT4gKEYobnVsbCAhPT0gdCksIHQpKSk7XG4gICAgfVxuICAgIE9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIF9vKHQpLnB1dChcInRhcmdldEdsb2JhbEtleVwiLCBlKTtcbiAgICB9XG4gICAgRm4odCwgZSkge1xuICAgICAgICByZXR1cm4gd28odCkucHV0KGdyKHRoaXMuc2VyaWFsaXplciwgZSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbi1wbGFjZSB1cGRhdGVzIHRoZSBwcm92aWRlZCBtZXRhZGF0YSB0byBhY2NvdW50IGZvciB2YWx1ZXMgaW4gdGhlIGdpdmVuXG4gICAgICogVGFyZ2V0RGF0YS4gU2F2aW5nIGlzIGRvbmUgc2VwYXJhdGVseS4gUmV0dXJucyB0cnVlIGlmIHRoZXJlIHdlcmUgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgbWV0YWRhdGEuXG4gICAgICovICAgIEJuKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSAhMTtcbiAgICAgICAgcmV0dXJuIHQudGFyZ2V0SWQgPiBlLmhpZ2hlc3RUYXJnZXRJZCAmJiAoZS5oaWdoZXN0VGFyZ2V0SWQgPSB0LnRhcmdldElkLCBuID0gITApLCBcbiAgICAgICAgdC5zZXF1ZW5jZU51bWJlciA+IGUuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyICYmIChlLmhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlciA9IHQuc2VxdWVuY2VOdW1iZXIsIFxuICAgICAgICBuID0gITApLCBuO1xuICAgIH1cbiAgICBnZXRUYXJnZXRDb3VudCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLiRuKHQpLm5leHQoKHQgPT4gdC50YXJnZXRDb3VudCkpO1xuICAgIH1cbiAgICBnZXRUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgLy8gSXRlcmF0aW5nIGJ5IHRoZSBjYW5vbmljYWxJZCBtYXkgeWllbGQgbW9yZSB0aGFuIG9uZSByZXN1bHQgYmVjYXVzZVxuICAgICAgICAvLyBjYW5vbmljYWxJZCB2YWx1ZXMgYXJlIG5vdCByZXF1aXJlZCB0byBiZSB1bmlxdWUgcGVyIHRhcmdldC4gVGhpcyBxdWVyeVxuICAgICAgICAvLyBkZXBlbmRzIG9uIHRoZSBxdWVyeVRhcmdldHMgaW5kZXggdG8gYmUgZWZmaWNpZW50LlxuICAgICAgICBjb25zdCBuID0gJG4oZSksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4sIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSBdLCBbIG4sIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSBdKTtcbiAgICAgICAgbGV0IGkgPSBudWxsO1xuICAgICAgICByZXR1cm4gd28odCkuWCh7XG4gICAgICAgICAgICByYW5nZTogcyxcbiAgICAgICAgICAgIGluZGV4OiBcInF1ZXJ5VGFyZ2V0c0luZGV4XCJcbiAgICAgICAgfSwgKCh0LCBuLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gbXIobik7XG4gICAgICAgICAgICAvLyBBZnRlciBmaW5kaW5nIGEgcG90ZW50aWFsIG1hdGNoLCBjaGVjayB0aGF0IHRoZSB0YXJnZXQgaXNcbiAgICAgICAgICAgIC8vIGFjdHVhbGx5IGVxdWFsIHRvIHRoZSByZXF1ZXN0ZWQgdGFyZ2V0LlxuICAgICAgICAgICAgICAgICAgICAgICAgT24oZSwgci50YXJnZXQpICYmIChpID0gciwgcy5kb25lKCkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gaSkpO1xuICAgIH1cbiAgICBhZGRNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IFtdLCBpID0gbW8odCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKGUgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHF0KGUucGF0aCk7XG4gICAgICAgICAgICBzLnB1c2goaS5wdXQoe1xuICAgICAgICAgICAgICAgIHRhcmdldElkOiBuLFxuICAgICAgICAgICAgICAgIHBhdGg6IHJcbiAgICAgICAgICAgIH0pKSwgcy5wdXNoKHRoaXMucmVmZXJlbmNlRGVsZWdhdGUuYWRkUmVmZXJlbmNlKHQsIG4sIGUpKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKHMpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXModCwgZSwgbikge1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IFRoZSByZXZlcnNlIGluZGV4IChkb2N1bWVudHNUYXJnZXRzKSBpcyBtYWludGFpbmVkIGJ5XG4gICAgICAgIC8vIEluZGV4ZWREYi5cbiAgICAgICAgY29uc3QgcyA9IG1vKHQpO1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaChlLCAoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gcXQoZS5wYXRoKTtcbiAgICAgICAgICAgIHJldHVybiBSdC53YWl0Rm9yKFsgcy5kZWxldGUoWyBuLCBpIF0pLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLnJlbW92ZVJlZmVyZW5jZSh0LCBuLCBlKSBdKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBtbyh0KSwgcyA9IElEQktleVJhbmdlLmJvdW5kKFsgZSBdLCBbIGUgKyAxIF0sIFxuICAgICAgICAvKmxvd2VyT3Blbj0qLyAhMSwgXG4gICAgICAgIC8qdXBwZXJPcGVuPSovICEwKTtcbiAgICAgICAgcmV0dXJuIG4uZGVsZXRlKHMpO1xuICAgIH1cbiAgICBnZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBJREJLZXlSYW5nZS5ib3VuZChbIGUgXSwgWyBlICsgMSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCksIHMgPSBtbyh0KTtcbiAgICAgICAgbGV0IGkgPSBncygpO1xuICAgICAgICByZXR1cm4gcy5YKHtcbiAgICAgICAgICAgIHJhbmdlOiBuLFxuICAgICAgICAgICAgWTogITBcbiAgICAgICAgfSwgKCh0LCBlLCBuKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gR3QodFsxXSksIHIgPSBuZXcgaHQocyk7XG4gICAgICAgICAgICBpID0gaS5hZGQocik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIGNvbnRhaW5zS2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHF0KGUucGF0aCksIHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIG4gXSwgWyBzdChuKSBdLCBcbiAgICAgICAgLypsb3dlck9wZW49Ki8gITEsIFxuICAgICAgICAvKnVwcGVyT3Blbj0qLyAhMCk7XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIG1vKHQpLlgoe1xuICAgICAgICAgICAgaW5kZXg6IFwiZG9jdW1lbnRUYXJnZXRzSW5kZXhcIixcbiAgICAgICAgICAgIFk6ICEwLFxuICAgICAgICAgICAgcmFuZ2U6IHNcbiAgICAgICAgfSwgKChbdCwgZV0sIG4sIHMpID0+IHtcbiAgICAgICAgICAgIC8vIEhhdmluZyBhIHNlbnRpbmVsIHJvdyBmb3IgYSBkb2N1bWVudCBkb2VzIG5vdCBjb3VudCBhcyBjb250YWluaW5nIHRoYXQgZG9jdW1lbnQ7XG4gICAgICAgICAgICAvLyBGb3IgdGhlIHRhcmdldCBjYWNoZSwgY29udGFpbmluZyB0aGUgZG9jdW1lbnQgbWVhbnMgdGhlIGRvY3VtZW50IGlzIHBhcnQgb2Ygc29tZVxuICAgICAgICAgICAgLy8gdGFyZ2V0LlxuICAgICAgICAgICAgMCAhPT0gdCAmJiAoaSsrLCBzLmRvbmUoKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpID4gMCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBMb29rcyB1cCBhIFRhcmdldERhdGEgZW50cnkgYnkgdGFyZ2V0IElELlxuICAgICAqXG4gICAgICogQHBhcmFtIHRhcmdldElkIC0gVGhlIHRhcmdldCBJRCBvZiB0aGUgVGFyZ2V0RGF0YSBlbnRyeSB0byBsb29rIHVwLlxuICAgICAqIEByZXR1cm5zIFRoZSBjYWNoZWQgVGFyZ2V0RGF0YSBlbnRyeSwgb3IgbnVsbCBpZiB0aGUgY2FjaGUgaGFzIG5vIGVudHJ5IGZvclxuICAgICAqIHRoZSB0YXJnZXQuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICBsZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB3byh0KS5nZXQoZSkubmV4dCgodCA9PiB0ID8gbXIodCkgOiBudWxsKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcXVlcmllcyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gd28odCkge1xuICAgIHJldHVybiBfZSh0LCBcInRhcmdldHNcIik7XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGdldCBhIHR5cGVkIFNpbXBsZURiU3RvcmUgZm9yIHRoZSB0YXJnZXQgZ2xvYmFscyBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gX28odCkge1xuICAgIHJldHVybiBfZSh0LCBcInRhcmdldEdsb2JhbFwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGRvY3VtZW50IHRhcmdldCBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gbW8odCkge1xuICAgIHJldHVybiBfZSh0LCBcInRhcmdldERvY3VtZW50c1wiKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gZ28oW3QsIGVdLCBbbiwgc10pIHtcbiAgICBjb25zdCBpID0gZXQodCwgbik7XG4gICAgcmV0dXJuIDAgPT09IGkgPyBldChlLCBzKSA6IGk7XG59XG5cbi8qKlxuICogVXNlZCB0byBjYWxjdWxhdGUgdGhlIG50aCBzZXF1ZW5jZSBudW1iZXIuIEtlZXBzIGEgcm9sbGluZyBidWZmZXIgb2YgdGhlXG4gKiBsb3dlc3QgbiB2YWx1ZXMgcGFzc2VkIHRvIGBhZGRFbGVtZW50YCwgYW5kIGZpbmFsbHkgcmVwb3J0cyB0aGUgbGFyZ2VzdCBvZlxuICogdGhlbSBpbiBgbWF4VmFsdWVgLlxuICovIGNsYXNzIHlvIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuTG4gPSB0LCB0aGlzLmJ1ZmZlciA9IG5ldyBFZShnbyksIHRoaXMucW4gPSAwO1xuICAgIH1cbiAgICBVbigpIHtcbiAgICAgICAgcmV0dXJuICsrdGhpcy5xbjtcbiAgICB9XG4gICAgS24odCkge1xuICAgICAgICBjb25zdCBlID0gWyB0LCB0aGlzLlVuKCkgXTtcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnNpemUgPCB0aGlzLkxuKSB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmFkZChlKTsgZWxzZSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5idWZmZXIubGFzdCgpO1xuICAgICAgICAgICAgZ28oZSwgdCkgPCAwICYmICh0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLmRlbGV0ZSh0KS5hZGQoZSkpO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldCBtYXhWYWx1ZSgpIHtcbiAgICAgICAgLy8gR3VhcmFudGVlZCB0byBiZSBub24tZW1wdHkuIElmIHdlIGRlY2lkZSB3ZSBhcmUgbm90IGNvbGxlY3RpbmcgYW55XG4gICAgICAgIC8vIHNlcXVlbmNlIG51bWJlcnMsIG50aFNlcXVlbmNlTnVtYmVyIGJlbG93IHNob3J0LWNpcmN1aXRzLiBJZiB3ZSBoYXZlXG4gICAgICAgIC8vIGRlY2lkZWQgdGhhdCB3ZSBhcmUgY29sbGVjdGluZyBuIHNlcXVlbmNlIG51bWJlcnMsIGl0J3MgYmVjYXVzZSBuIGlzIHNvbWVcbiAgICAgICAgLy8gcGVyY2VudGFnZSBvZiB0aGUgZXhpc3Rpbmcgc2VxdWVuY2UgbnVtYmVycy4gVGhhdCBtZWFucyB3ZSBzaG91bGQgbmV2ZXJcbiAgICAgICAgLy8gYmUgaW4gYSBzaXR1YXRpb24gd2hlcmUgd2UgYXJlIGNvbGxlY3Rpbmcgc2VxdWVuY2UgbnVtYmVycyBidXQgZG9uJ3RcbiAgICAgICAgLy8gYWN0dWFsbHkgaGF2ZSBhbnkuXG4gICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlci5sYXN0KClbMF07XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgaXMgcmVzcG9uc2libGUgZm9yIHRoZSBzY2hlZHVsaW5nIG9mIExSVSBnYXJiYWdlIGNvbGxlY3Rpb24uIEl0IGhhbmRsZXMgY2hlY2tpbmdcbiAqIHdoZXRoZXIgb3Igbm90IEdDIGlzIGVuYWJsZWQsIGFzIHdlbGwgYXMgd2hpY2ggZGVsYXkgdG8gdXNlIGJlZm9yZSB0aGUgbmV4dCBydW4uXG4gKi8gY2xhc3MgcG8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5nYXJiYWdlQ29sbGVjdG9yID0gdCwgdGhpcy5hc3luY1F1ZXVlID0gZSwgdGhpcy5sb2NhbFN0b3JlID0gbiwgdGhpcy5HbiA9IG51bGw7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICAtMSAhPT0gdGhpcy5nYXJiYWdlQ29sbGVjdG9yLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkICYmIHRoaXMuUW4oNmU0KTtcbiAgICB9XG4gICAgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5HbiAmJiAodGhpcy5Hbi5jYW5jZWwoKSwgdGhpcy5HbiA9IG51bGwpO1xuICAgIH1cbiAgICBnZXQgc3RhcnRlZCgpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuR247XG4gICAgfVxuICAgIFFuKHQpIHtcbiAgICAgICAgTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYEdhcmJhZ2UgY29sbGVjdGlvbiBzY2hlZHVsZWQgaW4gJHt0fW1zYCksIHRoaXMuR24gPSB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFmdGVyRGVsYXkoXCJscnVfZ2FyYmFnZV9jb2xsZWN0aW9uXCIgLyogVGltZXJJZC5McnVHYXJiYWdlQ29sbGVjdGlvbiAqLyAsIHQsIChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLkduID0gbnVsbDtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5sb2NhbFN0b3JlLmNvbGxlY3RHYXJiYWdlKHRoaXMuZ2FyYmFnZUNvbGxlY3Rvcik7XG4gICAgICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICAgICAgRHQodCkgPyBOKFwiTHJ1R2FyYmFnZUNvbGxlY3RvclwiLCBcIklnbm9yaW5nIEluZGV4ZWREQiBlcnJvciBkdXJpbmcgZ2FyYmFnZSBjb2xsZWN0aW9uOiBcIiwgdCkgOiBhd2FpdCB2dCh0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHRoaXMuUW4oM2U1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbXBsZW1lbnRzIHRoZSBzdGVwcyBmb3IgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAqLyBjbGFzcyBJbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmpuID0gdCwgdGhpcy5wYXJhbXMgPSBlO1xuICAgIH1cbiAgICBjYWxjdWxhdGVUYXJnZXRDb3VudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpuLnpuKHQpLm5leHQoKHQgPT4gTWF0aC5mbG9vcihlIC8gMTAwICogdCkpKTtcbiAgICB9XG4gICAgbnRoU2VxdWVuY2VOdW1iZXIodCwgZSkge1xuICAgICAgICBpZiAoMCA9PT0gZSkgcmV0dXJuIFJ0LnJlc29sdmUoT3QuY3QpO1xuICAgICAgICBjb25zdCBuID0gbmV3IHlvKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5qbi5mb3JFYWNoVGFyZ2V0KHQsICh0ID0+IG4uS24odC5zZXF1ZW5jZU51bWJlcikpKS5uZXh0KCgoKSA9PiB0aGlzLmpuLlduKHQsICh0ID0+IG4uS24odCkpKSkpLm5leHQoKCgpID0+IG4ubWF4VmFsdWUpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmpuLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4ucmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSk7XG4gICAgfVxuICAgIGNvbGxlY3QodCwgZSkge1xuICAgICAgICByZXR1cm4gLTEgPT09IHRoaXMucGFyYW1zLmNhY2hlU2l6ZUNvbGxlY3Rpb25UaHJlc2hvbGQgPyAoTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgXCJHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgZGlzYWJsZWRcIiksIFxuICAgICAgICBSdC5yZXNvbHZlKG5vKSkgOiB0aGlzLmdldENhY2hlU2l6ZSh0KS5uZXh0KChuID0+IG4gPCB0aGlzLnBhcmFtcy5jYWNoZVNpemVDb2xsZWN0aW9uVGhyZXNob2xkID8gKE4oXCJMcnVHYXJiYWdlQ29sbGVjdG9yXCIsIGBHYXJiYWdlIGNvbGxlY3Rpb24gc2tpcHBlZDsgQ2FjaGUgc2l6ZSAke259IGlzIGxvd2VyIHRoYW4gdGhyZXNob2xkICR7dGhpcy5wYXJhbXMuY2FjaGVTaXplQ29sbGVjdGlvblRocmVzaG9sZH1gKSwgXG4gICAgICAgIG5vKSA6IHRoaXMuSG4odCwgZSkpKTtcbiAgICB9XG4gICAgZ2V0Q2FjaGVTaXplKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuam4uZ2V0Q2FjaGVTaXplKHQpO1xuICAgIH1cbiAgICBIbih0LCBlKSB7XG4gICAgICAgIGxldCBuLCBzLCBpLCByLCBvLCBjLCBhO1xuICAgICAgICBjb25zdCBoID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2FsY3VsYXRlVGFyZ2V0Q291bnQodCwgdGhpcy5wYXJhbXMucGVyY2VudGlsZVRvQ29sbGVjdCkubmV4dCgoZSA9PiAoXG4gICAgICAgIC8vIENhcCBhdCB0aGUgY29uZmlndXJlZCBtYXhcbiAgICAgICAgZSA+IHRoaXMucGFyYW1zLm1heGltdW1TZXF1ZW5jZU51bWJlcnNUb0NvbGxlY3QgPyAoTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYENhcHBpbmcgc2VxdWVuY2UgbnVtYmVycyB0byBjb2xsZWN0IGRvd24gdG8gdGhlIG1heGltdW0gb2YgJHt0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0fSBmcm9tICR7ZX1gKSwgXG4gICAgICAgIHMgPSB0aGlzLnBhcmFtcy5tYXhpbXVtU2VxdWVuY2VOdW1iZXJzVG9Db2xsZWN0KSA6IHMgPSBlLCByID0gRGF0ZS5ub3coKSwgdGhpcy5udGhTZXF1ZW5jZU51bWJlcih0LCBzKSkpKS5uZXh0KChzID0+IChuID0gcywgXG4gICAgICAgIG8gPSBEYXRlLm5vdygpLCB0aGlzLnJlbW92ZVRhcmdldHModCwgbiwgZSkpKSkubmV4dCgoZSA9PiAoaSA9IGUsIGMgPSBEYXRlLm5vdygpLCBcbiAgICAgICAgdGhpcy5yZW1vdmVPcnBoYW5lZERvY3VtZW50cyh0LCBuKSkpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGlmIChhID0gRGF0ZS5ub3coKSwgQygpIDw9IExvZ0xldmVsLkRFQlVHKSB7XG4gICAgICAgICAgICAgICAgTihcIkxydUdhcmJhZ2VDb2xsZWN0b3JcIiwgYExSVSBHYXJiYWdlIENvbGxlY3Rpb25cXG5cXHRDb3VudGVkIHRhcmdldHMgaW4gJHtyIC0gaH1tc1xcblxcdERldGVybWluZWQgbGVhc3QgcmVjZW50bHkgdXNlZCAke3N9IGluIGAgKyAobyAtIHIpICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHtpfSB0YXJnZXRzIGluIGAgKyAoYyAtIG8pICsgXCJtc1xcblwiICsgYFxcdFJlbW92ZWQgJHt0fSBkb2N1bWVudHMgaW4gYCArIChhIC0gYykgKyBcIm1zXFxuXCIgKyBgVG90YWwgRHVyYXRpb246ICR7YSAtIGh9bXNgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHtcbiAgICAgICAgICAgICAgICBkaWRSdW46ICEwLFxuICAgICAgICAgICAgICAgIHNlcXVlbmNlTnVtYmVyc0NvbGxlY3RlZDogcyxcbiAgICAgICAgICAgICAgICB0YXJnZXRzUmVtb3ZlZDogaSxcbiAgICAgICAgICAgICAgICBkb2N1bWVudHNSZW1vdmVkOiB0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVG8odCwgZSkge1xuICAgIHJldHVybiBuZXcgSW8odCwgZSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUHJvdmlkZXMgTFJVIGZ1bmN0aW9uYWxpdHkgZm9yIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS4gKi8gY2xhc3MgRW8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5kYiA9IHQsIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IFRvKHRoaXMsIGUpO1xuICAgIH1cbiAgICB6bih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkpuKHQpO1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLmdldFRhcmdldENvdW50KHQpLm5leHQoKHQgPT4gZS5uZXh0KChlID0+IHQgKyBlKSkpKTtcbiAgICB9XG4gICAgSm4odCkge1xuICAgICAgICBsZXQgZSA9IDA7XG4gICAgICAgIHJldHVybiB0aGlzLlduKHQsICh0ID0+IHtcbiAgICAgICAgICAgIGUrKztcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUpKTtcbiAgICB9XG4gICAgZm9yRWFjaFRhcmdldCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkuZm9yRWFjaFRhcmdldCh0LCBlKTtcbiAgICB9XG4gICAgV24odCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Zbih0LCAoKHQsIG4pID0+IGUobikpKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIEFvKHQsIG4pO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gQW8odCwgbik7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldHModCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5kYi5nZXRUYXJnZXRDYWNoZSgpLnJlbW92ZVRhcmdldHModCwgZSwgbik7XG4gICAgfVxuICAgIG1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEFvKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgYW55dGhpbmcgd291bGQgcHJldmVudCB0aGlzIGRvY3VtZW50IGZyb20gYmVpbmcgZ2FyYmFnZVxuICAgICAqIGNvbGxlY3RlZCwgZ2l2ZW4gdGhhdCB0aGUgZG9jdW1lbnQgaW4gcXVlc3Rpb24gaXMgbm90IHByZXNlbnQgaW4gYW55XG4gICAgICogdGFyZ2V0cyBhbmQgaGFzIGEgc2VxdWVuY2UgbnVtYmVyIGxlc3MgdGhhbiBvciBlcXVhbCB0byB0aGUgdXBwZXIgYm91bmQgZm9yXG4gICAgICogdGhlIGNvbGxlY3Rpb24gcnVuLlxuICAgICAqLyAgICBYbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbiA9ICExO1xuICAgICAgICAgICAgcmV0dXJuIGhvKHQpLlooKHMgPT4gdW8odCwgcywgZSkubmV4dCgodCA9PiAodCAmJiAobiA9ICEwKSwgUnQucmVzb2x2ZSghdCkpKSkpKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgICAgIH0odCwgZSk7XG4gICAgfVxuICAgIHJlbW92ZU9ycGhhbmVkRG9jdW1lbnRzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZGIuZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpLm5ld0NoYW5nZUJ1ZmZlcigpLCBzID0gW107XG4gICAgICAgIGxldCBpID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuWW4odCwgKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBpZiAobyA8PSBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuWG4odCwgcikubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZSkgXG4gICAgICAgICAgICAgICAgICAgIC8vIE91ciBzaXplIGFjY291bnRpbmcgcmVxdWlyZXMgdXMgdG8gcmVhZCBhbGwgZG9jdW1lbnRzIGJlZm9yZVxuICAgICAgICAgICAgICAgICAgICAvLyByZW1vdmluZyB0aGVtLlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gaSsrLCBuLmdldEVudHJ5KHQsIHIpLm5leHQoKCgpID0+IChuLnJlbW92ZUVudHJ5KHIsIHJ0Lm1pbigpKSwgbW8odCkuZGVsZXRlKFsgMCwgcXQoci5wYXRoKSBdKSkpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICAgICAgcy5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkubmV4dCgoKCkgPT4gUnQud2FpdEZvcihzKSkpLm5leHQoKCgpID0+IG4uYXBwbHkodCkpKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0LCBuKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiBBbyh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbCBwcm92aWRlZCBmdW5jdGlvbiBmb3IgZWFjaCBkb2N1bWVudCBpbiB0aGUgY2FjaGUgdGhhdCBpcyAnb3JwaGFuZWQnLiBPcnBoYW5lZFxuICAgICAqIG1lYW5zIG5vdCBhIHBhcnQgb2YgYW55IHRhcmdldCwgc28gdGhlIG9ubHkgZW50cnkgaW4gdGhlIHRhcmdldC1kb2N1bWVudCBpbmRleCBmb3JcbiAgICAgKiB0aGF0IGRvY3VtZW50IHdpbGwgYmUgdGhlIHNlbnRpbmVsIHJvdyAodGFyZ2V0SWQgMCksIHdoaWNoIHdpbGwgYWxzbyBoYXZlIHRoZSBzZXF1ZW5jZVxuICAgICAqIG51bWJlciBmb3IgdGhlIGxhc3QgdGltZSB0aGUgZG9jdW1lbnQgd2FzIGFjY2Vzc2VkLlxuICAgICAqLyAgICBZbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBtbyh0KTtcbiAgICAgICAgbGV0IHMsIGkgPSBPdC5jdDtcbiAgICAgICAgcmV0dXJuIG4uWCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudFRhcmdldHNJbmRleFwiXG4gICAgICAgIH0sICgoW3QsIG5dLCB7cGF0aDogciwgc2VxdWVuY2VOdW1iZXI6IG99KSA9PiB7XG4gICAgICAgICAgICAwID09PSB0ID8gKFxuICAgICAgICAgICAgLy8gaWYgbmV4dFRvUmVwb3J0IGlzIHZhbGlkLCByZXBvcnQgaXQsIHRoaXMgaXMgYSBuZXcga2V5IHNvIHRoZVxuICAgICAgICAgICAgLy8gbGFzdCBvbmUgbXVzdCBub3QgYmUgYSBtZW1iZXIgb2YgYW55IHRhcmdldHMuXG4gICAgICAgICAgICBpICE9PSBPdC5jdCAmJiBlKG5ldyBodChHdChzKSksIGkpLCBcbiAgICAgICAgICAgIC8vIHNldCBuZXh0VG9SZXBvcnQgdG8gYmUgdGhpcyBzZXF1ZW5jZSBudW1iZXIuIEl0J3MgdGhlIG5leHQgb25lIHdlXG4gICAgICAgICAgICAvLyBtaWdodCByZXBvcnQsIGlmIHdlIGRvbid0IGZpbmQgYW55IHRhcmdldHMgZm9yIHRoaXMgZG9jdW1lbnQuXG4gICAgICAgICAgICAvLyBOb3RlIHRoYXQgdGhlIHNlcXVlbmNlIG51bWJlciBtdXN0IGJlIGRlZmluZWQgd2hlbiB0aGUgdGFyZ2V0SWRcbiAgICAgICAgICAgIC8vIGlzIDAuXG4gICAgICAgICAgICBpID0gbywgcyA9IHIpIDogXG4gICAgICAgICAgICAvLyBzZXQgbmV4dFRvUmVwb3J0IHRvIGJlIGludmFsaWQsIHdlIGtub3cgd2UgZG9uJ3QgbmVlZCB0byByZXBvcnRcbiAgICAgICAgICAgIC8vIHRoaXMgb25lIHNpbmNlIHdlIGZvdW5kIGEgdGFyZ2V0IGZvciBpdC5cbiAgICAgICAgICAgIGkgPSBPdC5jdDtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFNpbmNlIHdlIHJlcG9ydCBzZXF1ZW5jZSBudW1iZXJzIGFmdGVyIGdldHRpbmcgdG8gdGhlIG5leHQga2V5LCB3ZVxuICAgICAgICAgICAgLy8gbmVlZCB0byBjaGVjayBpZiB0aGUgbGFzdCBrZXkgd2UgaXRlcmF0ZWQgb3ZlciB3YXMgYW4gb3JwaGFuZWRcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGFuZCByZXBvcnQgaXQuXG4gICAgICAgICAgICBpICE9PSBPdC5jdCAmJiBlKG5ldyBodChHdChzKSksIGkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldENhY2hlU2l6ZSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmRiLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5nZXRTaXplKHQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gQW8odCwgZSkge1xuICAgIHJldHVybiBtbyh0KS5wdXQoXG4gICAgLyoqXG4gKiBAcmV0dXJucyBBIHZhbHVlIHN1aXRhYmxlIGZvciB3cml0aW5nIGEgc2VudGluZWwgcm93IGluIHRoZSB0YXJnZXQtZG9jdW1lbnRcbiAqIHN0b3JlLlxuICovXG4gICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdGFyZ2V0SWQ6IDAsXG4gICAgICAgICAgICBwYXRoOiBxdCh0LnBhdGgpLFxuICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IGVcbiAgICAgICAgfTtcbiAgICB9KGUsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSk7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGluLW1lbW9yeSBidWZmZXIgb2YgZW50cmllcyB0byBiZSB3cml0dGVuIHRvIGEgUmVtb3RlRG9jdW1lbnRDYWNoZS5cbiAqIEl0IGNhbiBiZSB1c2VkIHRvIGJhdGNoIHVwIGEgc2V0IG9mIGNoYW5nZXMgdG8gYmUgd3JpdHRlbiB0byB0aGUgY2FjaGUsIGJ1dFxuICogYWRkaXRpb25hbGx5IHN1cHBvcnRzIHJlYWRpbmcgZW50cmllcyBiYWNrIHdpdGggdGhlIGBnZXRFbnRyeSgpYCBtZXRob2QsXG4gKiBmYWxsaW5nIGJhY2sgdG8gdGhlIHVuZGVybHlpbmcgUmVtb3RlRG9jdW1lbnRDYWNoZSBpZiBubyBlbnRyeSBpc1xuICogYnVmZmVyZWQuXG4gKlxuICogRW50cmllcyBhZGRlZCB0byB0aGUgY2FjaGUgKm11c3QqIGJlIHJlYWQgZmlyc3QuIFRoaXMgaXMgdG8gZmFjaWxpdGF0ZVxuICogY2FsY3VsYXRpbmcgdGhlIHNpemUgZGVsdGEgb2YgdGhlIHBlbmRpbmcgY2hhbmdlcy5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IFRoaXMgY2xhc3Mgd2FzIGltcGxlbWVudGVkIHRoZW4gcmVtb3ZlZCBmcm9tIG90aGVyIHBsYXRmb3Jtcy5cbiAqIElmIGJ5dGUtY291bnRpbmcgZW5kcyB1cCBiZWluZyBuZWVkZWQgb24gdGhlIG90aGVyIHBsYXRmb3JtcywgY29uc2lkZXJcbiAqIHBvcnRpbmcgdGhpcyBjbGFzcyBhcyBwYXJ0IG9mIHRoYXQgaW1wbGVtZW50YXRpb24gd29yay5cbiAqLyBjbGFzcyB2byB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIC8vIEEgbWFwcGluZyBvZiBkb2N1bWVudCBrZXkgdG8gdGhlIG5ldyBjYWNoZSBlbnRyeSB0aGF0IHNob3VsZCBiZSB3cml0dGVuLlxuICAgICAgICB0aGlzLmNoYW5nZXMgPSBuZXcgb3MoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgdGhpcy5jaGFuZ2VzQXBwbGllZCA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUuYWRkRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSBtb2RpZnkgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIGFkZEVudHJ5KHQpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQodC5rZXksIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBCdWZmZXJzIGEgYFJlbW90ZURvY3VtZW50Q2FjaGUucmVtb3ZlRW50cnkoKWAgY2FsbC5cbiAgICAgKlxuICAgICAqIFlvdSBjYW4gb25seSByZW1vdmUgZG9jdW1lbnRzIHRoYXQgaGF2ZSBhbHJlYWR5IGJlZW4gcmV0cmlldmVkIHZpYVxuICAgICAqIGBnZXRFbnRyeSgpL2dldEVudHJpZXMoKWAgKGVuZm9yY2VkIHZpYSBJbmRleGVkRGJzIGBhcHBseSgpYCkuXG4gICAgICovICAgIHJlbW92ZUVudHJ5KHQsIGUpIHtcbiAgICAgICAgdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlcy5zZXQodCwgYW4ubmV3SW52YWxpZERvY3VtZW50KHQpLnNldFJlYWRUaW1lKGUpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLiBUaGUgYnVmZmVyZWQgY2hhbmdlcyB3aWxsIGZpcnN0IGJlIGNoZWNrZWQsXG4gICAgICogYW5kIGlmIG5vIGJ1ZmZlcmVkIGNoYW5nZSBhcHBsaWVzLCB0aGlzIHdpbGwgZm9yd2FyZCB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IG9yIGFuIGludmFsaWQgZG9jdW1lbnQgaWYgd2UgaGF2ZSBub3RoaW5nXG4gICAgICogY2FjaGVkLlxuICAgICAqLyAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIHRoaXMuYXNzZXJ0Tm90QXBwbGllZCgpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5jaGFuZ2VzLmdldChlKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gbiA/IFJ0LnJlc29sdmUobikgOiB0aGlzLmdldEZyb21DYWNoZSh0LCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgc2V2ZXJhbCBlbnRyaWVzIGluIHRoZSBjYWNoZSwgZm9yd2FyZGluZyB0b1xuICAgICAqIGBSZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KClgLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIGluIHdoaWNoIHRvIHBlcmZvcm0gYW55IHBlcnNpc3RlbmNlXG4gICAgICogICAgIG9wZXJhdGlvbnMuXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5cyAtIFRoZSBrZXlzIG9mIHRoZSBlbnRyaWVzIHRvIGxvb2sgdXAuXG4gICAgICogQHJldHVybnMgQSBtYXAgb2YgY2FjaGVkIGRvY3VtZW50cywgaW5kZXhlZCBieSBrZXkuIElmIGFuIGVudHJ5IGNhbm5vdCBiZVxuICAgICAqICAgICBmb3VuZCwgdGhlIGNvcnJlc3BvbmRpbmcga2V5IHdpbGwgYmUgbWFwcGVkIHRvIGFuIGludmFsaWQgZG9jdW1lbnQuXG4gICAgICovICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRBbGxGcm9tQ2FjaGUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFwcGxpZXMgYnVmZmVyZWQgY2hhbmdlcyB0byB0aGUgdW5kZXJseWluZyBSZW1vdGVEb2N1bWVudENhY2hlLCB1c2luZ1xuICAgICAqIHRoZSBwcm92aWRlZCB0cmFuc2FjdGlvbi5cbiAgICAgKi8gICAgYXBwbHkodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnROb3RBcHBsaWVkKCksIHRoaXMuY2hhbmdlc0FwcGxpZWQgPSAhMCwgdGhpcy5hcHBseUNoYW5nZXModCk7XG4gICAgfVxuICAgIC8qKiBIZWxwZXIgdG8gYXNzZXJ0IHRoaXMuY2hhbmdlcyBpcyBub3QgbnVsbCAgKi8gICAgYXNzZXJ0Tm90QXBwbGllZCgpIHt9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFRoZSBSZW1vdGVEb2N1bWVudENhY2hlIGZvciBJbmRleGVkRGIuIFRvIGNvbnN0cnVjdCwgaW52b2tlXG4gKiBgbmV3SW5kZXhlZERiUmVtb3RlRG9jdW1lbnRDYWNoZSgpYC5cbiAqLyBjbGFzcyBSbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSB0O1xuICAgIH1cbiAgICBzZXRJbmRleE1hbmFnZXIodCkge1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgdGhlIHN1cHBsaWVkIGVudHJpZXMgdG8gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGBhZGRFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYCB0byBlbnN1cmUgcHJvcGVyIGFjY291bnRpbmcgb2YgbWV0YWRhdGEuXG4gICAgICovICAgIGFkZEVudHJ5KHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFNvKHQpLnB1dChuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyBhIGRvY3VtZW50IGZyb20gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgIGFyZSByZXF1aXJlZCB0byBnbyB0aHJvdWdoIHRoZSBSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlclxuICAgICAqIHJldHVybmVkIGJ5IGBuZXdDaGFuZ2VCdWZmZXIoKWAgdG8gZW5zdXJlIHByb3BlciBhY2NvdW50aW5nIG9mIG1ldGFkYXRhLlxuICAgICAqLyAgICByZW1vdmVFbnRyeSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBTbyh0KS5kZWxldGUoXG4gICAgICAgIC8qKlxuICogUmV0dXJucyBhIGtleSB0aGF0IGNhbiBiZSB1c2VkIGZvciBkb2N1bWVudCBsb29rdXBzIHZpYSB0aGUgcHJpbWFyeSBrZXkgb2ZcbiAqIHRoZSBEYlJlbW90ZURvY3VtZW50IG9iamVjdCBzdG9yZS5cbiAqL1xuICAgICAgICBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdC5wYXRoLnRvQXJyYXkoKTtcbiAgICAgICAgICAgIHJldHVybiBbIFxuICAgICAgICAgICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAgICAgICAgIC8qIGNvbGxlY3Rpb24gaWQgKi8gbltuLmxlbmd0aCAtIDJdLCBmcihlKSwgXG4gICAgICAgICAgICAvKiBkb2N1bWVudCBpZCAqLyBuW24ubGVuZ3RoIC0gMV0gXTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRDb2xsZWN0aW9uR3JvdXBJbmRleGAgaW5kZXguXG4gKi8gKGUsIG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY3VycmVudCBjYWNoZSBzaXplLlxuICAgICAqXG4gICAgICogQ2FsbGVycyB0byBgYWRkRW50cnkoKWAgYW5kIGByZW1vdmVFbnRyeSgpYCAqbXVzdCogY2FsbCB0aGlzIGFmdGVyd2FyZHMgdG8gdXBkYXRlIHRoZVxuICAgICAqIGNhY2hlJ3MgbWV0YWRhdGEuXG4gICAgICovICAgIHVwZGF0ZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0TWV0YWRhdGEodCkubmV4dCgobiA9PiAobi5ieXRlU2l6ZSArPSBlLCB0aGlzLlpuKHQsIG4pKSkpO1xuICAgIH1cbiAgICBnZXRFbnRyeSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gYW4ubmV3SW52YWxpZERvY3VtZW50KGUpO1xuICAgICAgICByZXR1cm4gU28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJkb2N1bWVudEtleUluZGV4XCIsXG4gICAgICAgICAgICByYW5nZTogSURCS2V5UmFuZ2Uub25seShEbyhlKSlcbiAgICAgICAgfSwgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuID0gdGhpcy50cyhlLCBzKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogTG9va3MgdXAgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50S2V5IC0gVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBUaGUgY2FjaGVkIGRvY3VtZW50IGVudHJ5IGFuZCBpdHMgc2l6ZS5cbiAgICAgKi8gICAgZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IHtcbiAgICAgICAgICAgIHNpemU6IDAsXG4gICAgICAgICAgICBkb2N1bWVudDogYW4ubmV3SW52YWxpZERvY3VtZW50KGUpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBTbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBJREJLZXlSYW5nZS5vbmx5KERvKGUpKVxuICAgICAgICB9LCAoKHQsIHMpID0+IHtcbiAgICAgICAgICAgIG4gPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQ6IHRoaXMudHMoZSwgcyksXG4gICAgICAgICAgICAgICAgc2l6ZTogcm8ocylcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIGdldEVudHJpZXModCwgZSkge1xuICAgICAgICBsZXQgbiA9IGNzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm5zKHQsIGUsICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IHRoaXMudHModCwgZSk7XG4gICAgICAgICAgICBuID0gbi5pbnNlcnQodCwgcyk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIExvb2tzIHVwIHNldmVyYWwgZW50cmllcyBpbiB0aGUgY2FjaGUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRLZXlzIC0gVGhlIHNldCBvZiBrZXlzIGVudHJpZXMgdG8gbG9vayB1cC5cbiAgICAgKiBAcmV0dXJucyBBIG1hcCBvZiBkb2N1bWVudHMgaW5kZXhlZCBieSBrZXkgYW5kIGEgbWFwIG9mIHNpemVzIGluZGV4ZWQgYnlcbiAgICAgKiAgICAga2V5ICh6ZXJvIGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBleGlzdCkuXG4gICAgICovICAgIHNzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBjcygpLCBzID0gbmV3IHBlKGh0LmNvbXBhcmF0b3IpO1xuICAgICAgICByZXR1cm4gdGhpcy5ucyh0LCBlLCAoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSB0aGlzLnRzKHQsIGUpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGkpLCBzID0gcy5pbnNlcnQodCwgcm8oZSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gKHtcbiAgICAgICAgICAgIGRvY3VtZW50czogbixcbiAgICAgICAgICAgIHJzOiBzXG4gICAgICAgIH0pKSk7XG4gICAgfVxuICAgIG5zKHQsIGUsIG4pIHtcbiAgICAgICAgaWYgKGUuaXNFbXB0eSgpKSByZXR1cm4gUnQucmVzb2x2ZSgpO1xuICAgICAgICBsZXQgcyA9IG5ldyBFZSh4byk7XG4gICAgICAgIGUuZm9yRWFjaCgodCA9PiBzID0gcy5hZGQodCkpKTtcbiAgICAgICAgY29uc3QgaSA9IElEQktleVJhbmdlLmJvdW5kKERvKHMuZmlyc3QoKSksIERvKHMubGFzdCgpKSksIHIgPSBzLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGxldCBvID0gci5nZXROZXh0KCk7XG4gICAgICAgIHJldHVybiBTbyh0KS5YKHtcbiAgICAgICAgICAgIGluZGV4OiBcImRvY3VtZW50S2V5SW5kZXhcIixcbiAgICAgICAgICAgIHJhbmdlOiBpXG4gICAgICAgIH0sICgodCwgZSwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGh0LmZyb21TZWdtZW50cyhbIC4uLmUucHJlZml4UGF0aCwgZS5jb2xsZWN0aW9uR3JvdXAsIGUuZG9jdW1lbnRJZCBdKTtcbiAgICAgICAgICAgIC8vIEdvIHRocm91Z2gga2V5cyBub3QgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKDtvICYmIHhvKG8sIGkpIDwgMDsgKSBuKG8sIG51bGwpLCBvID0gci5nZXROZXh0KCk7XG4gICAgICAgICAgICBvICYmIG8uaXNFcXVhbChpKSAmJiAoXG4gICAgICAgICAgICAvLyBLZXkgZm91bmQgaW4gY2FjaGUuXG4gICAgICAgICAgICBuKG8sIGUpLCBvID0gci5oYXNOZXh0KCkgPyByLmdldE5leHQoKSA6IG51bGwpLCBcbiAgICAgICAgICAgIC8vIFNraXAgdG8gdGhlIG5leHQga2V5IChpZiB0aGVyZSBpcyBvbmUpLlxuICAgICAgICAgICAgbyA/IHMuRyhEbyhvKSkgOiBzLmRvbmUoKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIC8vIFRoZSByZXN0IG9mIHRoZSBrZXlzIGFyZSBub3QgaW4gdGhlIGNhY2hlLiBPbmUgY2FzZSB3aGVyZSBgaXRlcmF0ZWBcbiAgICAgICAgICAgIC8vIGFib3ZlIHdvbid0IGdvIHRocm91Z2ggdGhlbSBpcyB3aGVuIHRoZSBjYWNoZSBpcyBlbXB0eS5cbiAgICAgICAgICAgIGZvciAoO287ICkgbihvLCBudWxsKSwgbyA9IHIuaGFzTmV4dCgpID8gci5nZXROZXh0KCkgOiBudWxsO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gZS5wYXRoLCByID0gWyBpLnBvcExhc3QoKS50b0FycmF5KCksIGkubGFzdFNlZ21lbnQoKSwgZnIobi5yZWFkVGltZSksIG4uZG9jdW1lbnRLZXkucGF0aC5pc0VtcHR5KCkgPyBcIlwiIDogbi5kb2N1bWVudEtleS5wYXRoLmxhc3RTZWdtZW50KCkgXSwgbyA9IFsgaS5wb3BMYXN0KCkudG9BcnJheSgpLCBpLmxhc3RTZWdtZW50KCksIFsgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIsIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSIF0sIFwiXCIgXTtcbiAgICAgICAgcmV0dXJuIFNvKHQpLmooSURCS2V5UmFuZ2UuYm91bmQociwgbywgITApKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGxldCBuID0gY3MoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgaSBvZiB0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMudHMoaHQuZnJvbVNlZ21lbnRzKGkucHJlZml4UGF0aC5jb25jYXQoaS5jb2xsZWN0aW9uR3JvdXAsIGkuZG9jdW1lbnRJZCkpLCBpKTtcbiAgICAgICAgICAgICAgICB0LmlzRm91bmREb2N1bWVudCgpICYmIChucyhlLCB0KSB8fCBzLmhhcyh0LmtleSkpICYmIChcbiAgICAgICAgICAgICAgICAvLyBFaXRoZXIgdGhlIGRvY3VtZW50IG1hdGNoZXMgdGhlIGdpdmVuIHF1ZXJ5LCBvciBpdCBpcyBtdXRhdGVkLlxuICAgICAgICAgICAgICAgIG4gPSBuLmluc2VydCh0LmtleSwgdCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgZ2V0QWxsRnJvbUNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGxldCBpID0gY3MoKTtcbiAgICAgICAgY29uc3QgciA9IENvKGUsIG4pLCBvID0gQ28oZSwgSXQubWF4KCkpO1xuICAgICAgICByZXR1cm4gU28odCkuWCh7XG4gICAgICAgICAgICBpbmRleDogXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLFxuICAgICAgICAgICAgcmFuZ2U6IElEQktleVJhbmdlLmJvdW5kKHIsIG8sICEwKVxuICAgICAgICB9LCAoKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLnRzKGh0LmZyb21TZWdtZW50cyhlLnByZWZpeFBhdGguY29uY2F0KGUuY29sbGVjdGlvbkdyb3VwLCBlLmRvY3VtZW50SWQpKSwgZSk7XG4gICAgICAgICAgICBpID0gaS5pbnNlcnQoci5rZXksIHIpLCBpLnNpemUgPT09IHMgJiYgbi5kb25lKCk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSk7XG4gICAgfVxuICAgIG5ld0NoYW5nZUJ1ZmZlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYm8odGhpcywgISF0ICYmIHQudHJhY2tSZW1vdmFscyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRNZXRhZGF0YSh0KS5uZXh0KCh0ID0+IHQuYnl0ZVNpemUpKTtcbiAgICB9XG4gICAgZ2V0TWV0YWRhdGEodCkge1xuICAgICAgICByZXR1cm4gVm8odCkuZ2V0KFwicmVtb3RlRG9jdW1lbnRHbG9iYWxLZXlcIikubmV4dCgodCA9PiAoRighIXQpLCB0KSkpO1xuICAgIH1cbiAgICBabih0LCBlKSB7XG4gICAgICAgIHJldHVybiBWbyh0KS5wdXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVjb2RlcyBgZGJSZW1vdGVEb2NgIGFuZCByZXR1cm5zIHRoZSBkb2N1bWVudCAob3IgYW4gaW52YWxpZCBkb2N1bWVudCBpZlxuICAgICAqIHRoZSBkb2N1bWVudCBjb3JyZXNwb25kcyB0byB0aGUgZm9ybWF0IHVzZWQgZm9yIHNlbnRpbmVsIGRlbGV0ZXMpLlxuICAgICAqLyAgICB0cyh0LCBlKSB7XG4gICAgICAgIGlmIChlKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gaHIodGhpcy5zZXJpYWxpemVyLCBlKTtcbiAgICAgICAgICAgIC8vIFdoZXRoZXIgdGhlIGRvY3VtZW50IGlzIGEgc2VudGluZWwgcmVtb3ZhbCBhbmQgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGVcbiAgICAgICAgICAgIC8vIGBnZXROZXdEb2N1bWVudENoYW5nZXMoKWBcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHQuaXNOb0RvY3VtZW50KCkgJiYgdC52ZXJzaW9uLmlzRXF1YWwocnQubWluKCkpKSkgcmV0dXJuIHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFuLm5ld0ludmFsaWREb2N1bWVudCh0KTtcbiAgICB9XG59XG5cbi8qKiBDcmVhdGVzIGEgbmV3IEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuICovIGZ1bmN0aW9uIFBvKHQpIHtcbiAgICByZXR1cm4gbmV3IFJvKHQpO1xufVxuXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIEluZGV4ZWREYlJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogVW5saWtlIHRoZSBNZW1vcnlSZW1vdGVEb2N1bWVudENoYW5nZUJ1ZmZlciwgdGhlIEluZGV4ZWREYiBpbXBsZW1lbnRhdGlvbiBjb21wdXRlcyB0aGUgc2l6ZVxuICogZGVsdGEgZm9yIGFsbCBzdWJtaXR0ZWQgY2hhbmdlcy4gVGhpcyBhdm9pZHMgaGF2aW5nIHRvIHJlLXJlYWQgYWxsIGRvY3VtZW50cyBmcm9tIEluZGV4ZWREYlxuICogd2hlbiB3ZSBhcHBseSB0aGUgY2hhbmdlcy5cbiAqLyBjbGFzcyBibyBleHRlbmRzIHZvIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRDYWNoZSAtIFRoZSBJbmRleGVkRGJSZW1vdGVEb2N1bWVudENhY2hlIHRvIGFwcGx5IHRoZSBjaGFuZ2VzIHRvLlxuICAgICAqIEBwYXJhbSB0cmFja1JlbW92YWxzIC0gV2hldGhlciB0byBjcmVhdGUgc2VudGluZWwgZGVsZXRlcyB0aGF0IGNhbiBiZSB0cmFja2VkIGJ5XG4gICAgICogYGdldE5ld0RvY3VtZW50Q2hhbmdlcygpYC5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMub3MgPSB0LCB0aGlzLnRyYWNrUmVtb3ZhbHMgPSBlLCBcbiAgICAgICAgLy8gQSBtYXAgb2YgZG9jdW1lbnQgc2l6ZXMgYW5kIHJlYWQgdGltZXMgcHJpb3IgdG8gYXBwbHlpbmcgdGhlIGNoYW5nZXMgaW5cbiAgICAgICAgLy8gdGhpcyBidWZmZXIuXG4gICAgICAgIHRoaXMudXMgPSBuZXcgb3MoKHQgPT4gdC50b1N0cmluZygpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKTtcbiAgICB9XG4gICAgYXBwbHlDaGFuZ2VzKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICBsZXQgbiA9IDAsIHMgPSBuZXcgRWUoKCh0LCBlKSA9PiBldCh0LmNhbm9uaWNhbFN0cmluZygpLCBlLmNhbm9uaWNhbFN0cmluZygpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5jaGFuZ2VzLmZvckVhY2goKChpLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdGhpcy51cy5nZXQoaSk7XG4gICAgICAgICAgICBpZiAoZS5wdXNoKHRoaXMub3MucmVtb3ZlRW50cnkodCwgaSwgby5yZWFkVGltZSkpLCByLmlzVmFsaWREb2N1bWVudCgpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdSA9IGxyKHRoaXMub3Muc2VyaWFsaXplciwgcik7XG4gICAgICAgICAgICAgICAgcyA9IHMuYWRkKGkucGF0aC5wb3BMYXN0KCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGMgPSBybyh1KTtcbiAgICAgICAgICAgICAgICBuICs9IGMgLSBvLnNpemUsIGUucHVzaCh0aGlzLm9zLmFkZEVudHJ5KHQsIGksIHUpKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAobiAtPSBvLnNpemUsIHRoaXMudHJhY2tSZW1vdmFscykge1xuICAgICAgICAgICAgICAgIC8vIEluIG9yZGVyIHRvIHRyYWNrIHJlbW92YWxzLCB3ZSBzdG9yZSBhIFwic2VudGluZWwgZGVsZXRlXCIgaW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlRG9jdW1lbnRDYWNoZS4gVGhpcyBlbnRyeSBpcyByZXByZXNlbnRlZCBieSBhIE5vRG9jdW1lbnRcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGEgdmVyc2lvbiBvZiAwIGFuZCBpZ25vcmVkIGJ5IGBtYXliZURlY29kZURvY3VtZW50KClgIGJ1dFxuICAgICAgICAgICAgICAgIC8vIHByZXNlcnZlZCBpbiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBscih0aGlzLm9zLnNlcmlhbGl6ZXIsIHIuY29udmVydFRvTm9Eb2N1bWVudChydC5taW4oKSkpO1xuICAgICAgICAgICAgICAgIGUucHVzaCh0aGlzLm9zLmFkZEVudHJ5KHQsIGksIG4pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCBzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgZS5wdXNoKHRoaXMub3MuaW5kZXhNYW5hZ2VyLmFkZFRvQ29sbGVjdGlvblBhcmVudEluZGV4KHQsIG4pKTtcbiAgICAgICAgfSkpLCBlLnB1c2godGhpcy5vcy51cGRhdGVNZXRhZGF0YSh0LCBuKSksIFJ0LndhaXRGb3IoZSk7XG4gICAgfVxuICAgIGdldEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGUgYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMub3MuZXModCwgZSkubmV4dCgodCA9PiAodGhpcy51cy5zZXQoZSwge1xuICAgICAgICAgICAgc2l6ZTogdC5zaXplLFxuICAgICAgICAgICAgcmVhZFRpbWU6IHQuZG9jdW1lbnQucmVhZFRpbWVcbiAgICAgICAgfSksIHQuZG9jdW1lbnQpKSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIC8vIFJlY29yZCB0aGUgc2l6ZSBvZiBldmVyeXRoaW5nIHdlIGxvYWQgZnJvbSB0aGUgY2FjaGUgc28gd2UgY2FuIGNvbXB1dGVcbiAgICAgICAgLy8gYSBkZWx0YSBsYXRlci5cbiAgICAgICAgcmV0dXJuIHRoaXMub3Muc3ModCwgZSkubmV4dCgoKHtkb2N1bWVudHM6IHQsIHJzOiBlfSkgPT4gKFxuICAgICAgICAvLyBOb3RlOiBgZ2V0QWxsRnJvbUNhY2hlYCByZXR1cm5zIHR3byBtYXBzIGluc3RlYWQgb2YgYSBzaW5nbGUgbWFwIGZyb21cbiAgICAgICAgLy8ga2V5cyB0byBgRG9jdW1lbnRTaXplRW50cnlgcy4gVGhpcyBpcyB0byBhbGxvdyByZXR1cm5pbmcgdGhlXG4gICAgICAgIC8vIGBNdXRhYmxlRG9jdW1lbnRNYXBgIGRpcmVjdGx5LCB3aXRob3V0IGEgY29udmVyc2lvbi5cbiAgICAgICAgZS5mb3JFYWNoKCgoZSwgbikgPT4ge1xuICAgICAgICAgICAgdGhpcy51cy5zZXQoZSwge1xuICAgICAgICAgICAgICAgIHNpemU6IG4sXG4gICAgICAgICAgICAgICAgcmVhZFRpbWU6IHQuZ2V0KGUpLnJlYWRUaW1lXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkpLCB0KSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVm8odCkge1xuICAgIHJldHVybiBfZSh0LCBcInJlbW90ZURvY3VtZW50R2xvYmFsXCIpO1xufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcmVtb3RlRG9jdW1lbnRzIG9iamVjdCBzdG9yZS5cbiAqLyBmdW5jdGlvbiBTbyh0KSB7XG4gICAgcmV0dXJuIF9lKHQsIFwicmVtb3RlRG9jdW1lbnRzVjE0XCIpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBrZXkgdGhhdCBjYW4gYmUgdXNlZCBmb3IgZG9jdW1lbnQgbG9va3VwcyBvbiB0aGVcbiAqIGBEYlJlbW90ZURvY3VtZW50RG9jdW1lbnRLZXlJbmRleGAgaW5kZXguXG4gKi8gZnVuY3Rpb24gRG8odCkge1xuICAgIGNvbnN0IGUgPSB0LnBhdGgudG9BcnJheSgpO1xuICAgIHJldHVybiBbIFxuICAgIC8qIHByZWZpeCBwYXRoICovIGUuc2xpY2UoMCwgZS5sZW5ndGggLSAyKSwgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyBlW2UubGVuZ3RoIC0gMl0sIFxuICAgIC8qIGRvY3VtZW50IGlkICovIGVbZS5sZW5ndGggLSAxXSBdO1xufVxuXG5mdW5jdGlvbiBDbyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGUuZG9jdW1lbnRLZXkucGF0aC50b0FycmF5KCk7XG4gICAgcmV0dXJuIFsgXG4gICAgLyogY29sbGVjdGlvbiBpZCAqLyB0LCBmcihlLnJlYWRUaW1lKSwgXG4gICAgLyogcHJlZml4IHBhdGggKi8gbi5zbGljZSgwLCBuLmxlbmd0aCAtIDIpLCBcbiAgICAvKiBkb2N1bWVudCBpZCAqLyBuLmxlbmd0aCA+IDAgPyBuW24ubGVuZ3RoIC0gMV0gOiBcIlwiIF07XG59XG5cbi8qKlxuICogQ29tcGFyYXRvciB0aGF0IGNvbXBhcmVzIGRvY3VtZW50IGtleXMgYWNjb3JkaW5nIHRvIHRoZSBwcmltYXJ5IGtleSBzb3J0aW5nXG4gKiB1c2VkIGJ5IHRoZSBgRGJSZW1vdGVEb2N1bWVudERvY3VtZW50YCBzdG9yZSAoYnkgcHJlZml4IHBhdGgsIGNvbGxlY3Rpb24gaWRcbiAqIGFuZCB0aGVuIGRvY3VtZW50IElEKS5cbiAqXG4gKiBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuICovIGZ1bmN0aW9uIHhvKHQsIGUpIHtcbiAgICBjb25zdCBuID0gdC5wYXRoLnRvQXJyYXkoKSwgcyA9IGUucGF0aC50b0FycmF5KCk7XG4gICAgLy8gVGhlIG9yZGVyaW5nIGlzIGJhc2VkIG9uIGh0dHBzOi8vY2hyb21pdW0uZ29vZ2xlc291cmNlLmNvbS9jaHJvbWl1bS9ibGluay8rL2ZlNWMyMWZlZjk0ZGFlNzFjMWMzMzQ0Nzc1YjhkOGE3ZjdlNmQ5ZWMvU291cmNlL21vZHVsZXMvaW5kZXhlZGRiL0lEQktleS5jcHAjNzRcbiAgICBsZXQgaSA9IDA7XG4gICAgZm9yIChsZXQgdCA9IDA7IHQgPCBuLmxlbmd0aCAtIDIgJiYgdCA8IHMubGVuZ3RoIC0gMjsgKyt0KSBpZiAoaSA9IGV0KG5bdF0sIHNbdF0pLCBcbiAgICBpKSByZXR1cm4gaTtcbiAgICByZXR1cm4gaSA9IGV0KG4ubGVuZ3RoLCBzLmxlbmd0aCksIGkgfHwgKGkgPSBldChuW24ubGVuZ3RoIC0gMl0sIHNbcy5sZW5ndGggLSAyXSksIFxuICAgIGkgfHwgZXQobltuLmxlbmd0aCAtIDFdLCBzW3MubGVuZ3RoIC0gMV0pKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogU2NoZW1hIFZlcnNpb24gZm9yIHRoZSBXZWIgY2xpZW50OlxuICogMS4gIEluaXRpYWwgdmVyc2lvbiBpbmNsdWRpbmcgTXV0YXRpb24gUXVldWUsIFF1ZXJ5IENhY2hlLCBhbmQgUmVtb3RlXG4gKiAgICAgRG9jdW1lbnQgQ2FjaGVcbiAqIDIuICBVc2VkIHRvIGVuc3VyZSBhIHRhcmdldEdsb2JhbCBvYmplY3QgZXhpc3RzIGFuZCBhZGQgdGFyZ2V0Q291bnQgdG8gaXQuIE5vXG4gKiAgICAgbG9uZ2VyIHJlcXVpcmVkIGJlY2F1c2UgbWlncmF0aW9uIDMgdW5jb25kaXRpb25hbGx5IGNsZWFycyBpdC5cbiAqIDMuICBEcm9wcGVkIGFuZCByZS1jcmVhdGVkIFF1ZXJ5IENhY2hlIHRvIGRlYWwgd2l0aCBjYWNoZSBjb3JydXB0aW9uIHJlbGF0ZWRcbiAqICAgICB0byBsaW1ibyByZXNvbHV0aW9uLiBBZGRyZXNzZXNcbiAqICAgICBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtaW9zLXNkay9pc3N1ZXMvMTU0OFxuICogNC4gIE11bHRpLVRhYiBTdXBwb3J0LlxuICogNS4gIFJlbW92YWwgb2YgaGVsZCB3cml0ZSBhY2tzLlxuICogNi4gIENyZWF0ZSBkb2N1bWVudCBnbG9iYWwgZm9yIHRyYWNraW5nIGRvY3VtZW50IGNhY2hlIHNpemUuXG4gKiA3LiAgRW5zdXJlIGV2ZXJ5IGNhY2hlZCBkb2N1bWVudCBoYXMgYSBzZW50aW5lbCByb3cgd2l0aCBhIHNlcXVlbmNlIG51bWJlci5cbiAqIDguICBBZGQgY29sbGVjdGlvbi1wYXJlbnQgaW5kZXggZm9yIENvbGxlY3Rpb24gR3JvdXAgcXVlcmllcy5cbiAqIDkuICBDaGFuZ2UgUmVtb3RlRG9jdW1lbnRDaGFuZ2VzIHN0b3JlIHRvIGJlIGtleWVkIGJ5IHJlYWRUaW1lIHJhdGhlciB0aGFuXG4gKiAgICAgYW4gYXV0by1pbmNyZW1lbnRpbmcgSUQuIFRoaXMgaXMgcmVxdWlyZWQgZm9yIEluZGV4LUZyZWUgcXVlcmllcy5cbiAqIDEwLiBSZXdyaXRlIHRoZSBjYW5vbmljYWwgSURzIHRvIHRoZSBleHBsaWNpdCBQcm90b2J1Zi1iYXNlZCBmb3JtYXQuXG4gKiAxMS4gQWRkIGJ1bmRsZXMgYW5kIG5hbWVkX3F1ZXJpZXMgZm9yIGJ1bmRsZSBzdXBwb3J0LlxuICogMTIuIEFkZCBkb2N1bWVudCBvdmVybGF5cy5cbiAqIDEzLiBSZXdyaXRlIHRoZSBrZXlzIG9mIHRoZSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgdG8gYWxsb3cgZm9yIGVmZmljaWVudFxuICogICAgIGRvY3VtZW50IGxvb2t1cCB2aWEgYGdldEFsbCgpYC5cbiAqIDE0LiBBZGQgb3ZlcmxheXMuXG4gKiAxNS4gQWRkIGluZGV4aW5nIHN1cHBvcnQuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIyIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFJlcHJlc2VudHMgYSBsb2NhbCB2aWV3IChvdmVybGF5KSBvZiBhIGRvY3VtZW50LCBhbmQgdGhlIGZpZWxkcyB0aGF0IGFyZVxuICogbG9jYWxseSBtdXRhdGVkLlxuICovXG5jbGFzcyBObyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqXG4gICAgICogVGhlIGZpZWxkcyB0aGF0IGFyZSBsb2NhbGx5IG11dGF0ZWQgYnkgcGF0Y2ggbXV0YXRpb25zLlxuICAgICAqXG4gICAgICogSWYgdGhlIG92ZXJsYXllZFx0ZG9jdW1lbnQgaXMgZnJvbSBzZXQgb3IgZGVsZXRlIG11dGF0aW9ucywgdGhpcyBpcyBgbnVsbGAuXG4gICAgICogSWYgdGhlcmUgaXMgbm8gb3ZlcmxheSAobXV0YXRpb24pIGZvciB0aGUgZG9jdW1lbnQsIHRoaXMgaXMgYW4gZW1wdHkgYEZpZWxkTWFza2AuXG4gICAgICovXG4gICAgZSkge1xuICAgICAgICB0aGlzLm92ZXJsYXllZERvY3VtZW50ID0gdCwgdGhpcy5tdXRhdGVkRmllbGRzID0gZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVhZG9ubHkgdmlldyBvZiB0aGUgbG9jYWwgc3RhdGUgb2YgYWxsIGRvY3VtZW50cyB3ZSdyZSB0cmFja2luZyAoaS5lLiB3ZVxuICogaGF2ZSBhIGNhY2hlZCB2ZXJzaW9uIGluIHJlbW90ZURvY3VtZW50Q2FjaGUgb3IgbG9jYWwgbXV0YXRpb25zIGZvciB0aGVcbiAqIGRvY3VtZW50KS4gVGhlIHZpZXcgaXMgY29tcHV0ZWQgYnkgYXBwbHlpbmcgdGhlIG11dGF0aW9ucyBpbiB0aGVcbiAqIE11dGF0aW9uUXVldWUgdG8gdGhlIFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi8gY2xhc3Mga28ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gdCwgdGhpcy5tdXRhdGlvblF1ZXVlID0gZSwgdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZSA9IG4sIFxuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEdldCB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnQgaWRlbnRpZmllZCBieSBga2V5YC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIExvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50IG9yIG51bGwgaWYgd2UgZG9uJ3QgaGF2ZSBhbnkgY2FjaGVkXG4gICAgICogc3RhdGUgZm9yIGl0LlxuICAgICAqLyAgICBnZXREb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gbnVsbDtcbiAgICAgICAgcmV0dXJuIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUuZ2V0T3ZlcmxheSh0LCBlKS5uZXh0KChzID0+IChuID0gcywgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJ5KHQsIGUpKSkpLm5leHQoKHQgPT4gKG51bGwgIT09IG4gJiYgS3Mobi5tdXRhdGlvbiwgdCwgUmUuZW1wdHkoKSwgaXQubm93KCkpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2V0cyB0aGUgbG9jYWwgdmlldyBvZiB0aGUgZG9jdW1lbnRzIGlkZW50aWZpZWQgYnkgYGtleXNgLlxuICAgICAqXG4gICAgICogSWYgd2UgZG9uJ3QgaGF2ZSBjYWNoZWQgc3RhdGUgZm9yIGEgZG9jdW1lbnQgaW4gYGtleXNgLCBhIE5vRG9jdW1lbnQgd2lsbFxuICAgICAqIGJlIHN0b3JlZCBmb3IgdGhhdCBrZXkgaW4gdGhlIHJlc3VsdGluZyBzZXQuXG4gICAgICovICAgIGdldERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cmllcyh0LCBlKS5uZXh0KChlID0+IHRoaXMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHModCwgZSwgZ3MoKSkubmV4dCgoKCkgPT4gZSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFNpbWlsYXIgdG8gYGdldERvY3VtZW50c2AsIGJ1dCBjcmVhdGVzIHRoZSBsb2NhbCB2aWV3IGZyb20gdGhlIGdpdmVuXG4gICAgICogYGJhc2VEb2NzYCB3aXRob3V0IHJldHJpZXZpbmcgZG9jdW1lbnRzIGZyb20gdGhlIGxvY2FsIHN0b3JlLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHRyYW5zYWN0aW9uIHRoaXMgb3BlcmF0aW9uIGlzIHNjb3BlZCB0by5cbiAgICAgKiBAcGFyYW0gZG9jcyAtIFRoZSBkb2N1bWVudHMgdG8gYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIGdldCB0aGUgbG9jYWwgdmlld3MuXG4gICAgICogQHBhcmFtIGV4aXN0ZW5jZVN0YXRlQ2hhbmdlZCAtIFRoZSBzZXQgb2YgZG9jdW1lbnQga2V5cyB3aG9zZSBleGlzdGVuY2Ugc3RhdGVcbiAgICAgKiAgIGlzIGNoYW5nZWQuIFRoaXMgaXMgdXNlZnVsIHRvIGRldGVybWluZSBpZiBzb21lIGRvY3VtZW50cyBvdmVybGF5IG5lZWRzXG4gICAgICogICB0byBiZSByZWNhbGN1bGF0ZWQuXG4gICAgICovICAgIGdldExvY2FsVmlld09mRG9jdW1lbnRzKHQsIGUsIG4gPSBncygpKSB7XG4gICAgICAgIGNvbnN0IHMgPSBmcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKHQsIHMsIGUpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKHQsIGUsIHMsIG4pLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgbGV0IGUgPSBocygpO1xuICAgICAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBlID0gZS5pbnNlcnQodCwgbi5vdmVybGF5ZWREb2N1bWVudCk7XG4gICAgICAgICAgICB9KSksIGU7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBHZXRzIHRoZSBvdmVybGF5ZWQgZG9jdW1lbnRzIGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQgbWFwLCB3aGljaCB3aWxsIGluY2x1ZGVcbiAgICAgKiB0aGUgbG9jYWwgdmlldyBvZiB0aG9zZSBkb2N1bWVudHMgYW5kIGEgYEZpZWxkTWFza2AgaW5kaWNhdGluZyB3aGljaCBmaWVsZHNcbiAgICAgKiBhcmUgbXV0YXRlZCBsb2NhbGx5LCBgbnVsbGAgaWYgb3ZlcmxheSBpcyBhIFNldCBvciBEZWxldGUgbXV0YXRpb24uXG4gICAgICovICAgIGdldE92ZXJsYXllZERvY3VtZW50cyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBmcygpO1xuICAgICAgICByZXR1cm4gdGhpcy5wb3B1bGF0ZU92ZXJsYXlzKHQsIG4sIGUpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKHQsIGUsIG4sIGdzKCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEZldGNoZXMgdGhlIG92ZXJsYXlzIGZvciB7QGNvZGUgZG9jc30gYW5kIGFkZHMgdGhlbSB0byBwcm92aWRlZCBvdmVybGF5IG1hcFxuICAgICAqIGlmIHRoZSBtYXAgZG9lcyBub3QgYWxyZWFkeSBjb250YWluIGFuIGVudHJ5IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnQga2V5LlxuICAgICAqLyAgICBwb3B1bGF0ZU92ZXJsYXlzKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IFtdO1xuICAgICAgICByZXR1cm4gbi5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGUuaGFzKHQpIHx8IHMucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLmRvY3VtZW50T3ZlcmxheUNhY2hlLmdldE92ZXJsYXlzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdC5mb3JFYWNoKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgICAgIGUuc2V0KHQsIG4pO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENvbXB1dGVzIHRoZSBsb2NhbCB2aWV3IGZvciB0aGUgZ2l2ZW4gZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3MgLSBUaGUgZG9jdW1lbnRzIHRvIGNvbXB1dGUgdmlld3MgZm9yLiBJdCBhbHNvIGhhcyB0aGUgYmFzZVxuICAgICAqICAgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvdmVybGF5cyAtIFRoZSBvdmVybGF5cyB0aGF0IG5lZWQgdG8gYmUgYXBwbGllZCB0byB0aGUgZ2l2ZW4gYmFzZVxuICAgICAqICAgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBleGlzdGVuY2VTdGF0ZUNoYW5nZWQgLSBBIHNldCBvZiBkb2N1bWVudHMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlc1xuICAgICAqICAgbWlnaHQgaGF2ZSBjaGFuZ2VkLiBUaGlzIGlzIHVzZWQgdG8gZGV0ZXJtaW5lIGlmIHdlIG5lZWQgdG8gcmUtY2FsY3VsYXRlXG4gICAgICogICBvdmVybGF5cyBmcm9tIG11dGF0aW9uIHF1ZXVlcy5cbiAgICAgKiBAcmV0dXJuIEEgbWFwIHJlcHJlc2VudHMgdGhlIGxvY2FsIGRvY3VtZW50cyB2aWV3LlxuICAgICAqLyAgICBjb21wdXRlVmlld3ModCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGNzKCk7XG4gICAgICAgIGNvbnN0IHIgPSB3cygpLCBvID0gd3MoKTtcbiAgICAgICAgcmV0dXJuIGUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG8gPSBuLmdldChlLmtleSk7XG4gICAgICAgICAgICAvLyBSZWNhbGN1bGF0ZSBhbiBvdmVybGF5IGlmIHRoZSBkb2N1bWVudCdzIGV4aXN0ZW5jZSBzdGF0ZSBjaGFuZ2VkIGR1ZSB0b1xuICAgICAgICAgICAgLy8gYSByZW1vdGUgZXZlbnQgKmFuZCogdGhlIG92ZXJsYXkgaXMgYSBQYXRjaE11dGF0aW9uLiBUaGlzIGlzIGJlY2F1c2VcbiAgICAgICAgICAgIC8vIGRvY3VtZW50IGV4aXN0ZW5jZSBzdGF0ZSBjYW4gY2hhbmdlIGlmIHNvbWUgcGF0Y2ggbXV0YXRpb24nc1xuICAgICAgICAgICAgLy8gcHJlY29uZGl0aW9ucyBhcmUgbWV0LlxuICAgICAgICAgICAgLy8gTk9URTogd2UgcmVjYWxjdWxhdGUgd2hlbiBgb3ZlcmxheWAgaXMgdW5kZWZpbmVkIGFzIHdlbGwsIGJlY2F1c2UgdGhlcmVcbiAgICAgICAgICAgIC8vIG1pZ2h0IGJlIGEgcGF0Y2ggbXV0YXRpb24gd2hvc2UgcHJlY29uZGl0aW9uIGRvZXMgbm90IG1hdGNoIGJlZm9yZSB0aGVcbiAgICAgICAgICAgIC8vIGNoYW5nZSAoaGVuY2Ugb3ZlcmxheSBpcyB1bmRlZmluZWQpLCBidXQgd291bGQgbm93IG1hdGNoLlxuICAgICAgICAgICAgICAgICAgICAgICAgcy5oYXMoZS5rZXkpICYmICh2b2lkIDAgPT09IG8gfHwgby5tdXRhdGlvbiBpbnN0YW5jZW9mIHpzKSA/IGkgPSBpLmluc2VydChlLmtleSwgZSkgOiB2b2lkIDAgIT09IG8gPyAoci5zZXQoZS5rZXksIG8ubXV0YXRpb24uZ2V0RmllbGRNYXNrKCkpLCBcbiAgICAgICAgICAgIEtzKG8ubXV0YXRpb24sIGUsIG8ubXV0YXRpb24uZ2V0RmllbGRNYXNrKCksIGl0Lm5vdygpKSkgOiBcbiAgICAgICAgICAgIC8vIG5vIG92ZXJsYXkgZXhpc3RzXG4gICAgICAgICAgICAvLyBVc2luZyBFTVBUWSB0byBpbmRpY2F0ZSB0aGVyZSBpcyBubyBvdmVybGF5IGZvciB0aGUgZG9jdW1lbnQuXG4gICAgICAgICAgICByLnNldChlLmtleSwgUmUuZW1wdHkoKSk7XG4gICAgICAgIH0pKSwgdGhpcy5yZWNhbGN1bGF0ZUFuZFNhdmVPdmVybGF5cyh0LCBpKS5uZXh0KCh0ID0+ICh0LmZvckVhY2goKCh0LCBlKSA9PiByLnNldCh0LCBlKSkpLCBcbiAgICAgICAgZS5mb3JFYWNoKCgodCwgZSkgPT4ge1xuICAgICAgICAgICAgdmFyIG47XG4gICAgICAgICAgICByZXR1cm4gby5zZXQodCwgbmV3IE5vKGUsIG51bGwgIT09IChuID0gci5nZXQodCkpICYmIHZvaWQgMCAhPT0gbiA/IG4gOiBudWxsKSk7XG4gICAgICAgIH0pKSwgbykpKTtcbiAgICB9XG4gICAgcmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXModCwgZSkge1xuICAgICAgICBjb25zdCBuID0gd3MoKTtcbiAgICAgICAgLy8gQSByZXZlcnNlIGxvb2t1cCBtYXAgZnJvbSBiYXRjaCBpZCB0byB0aGUgZG9jdW1lbnRzIHdpdGhpbiB0aGF0IGJhdGNoLlxuICAgICAgICAgICAgICAgIGxldCBzID0gbmV3IHBlKCgodCwgZSkgPT4gdCAtIGUpKSwgaSA9IGdzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWUuZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHQpIGkua2V5cygpLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBlLmdldCh0KTtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gcikgcmV0dXJuO1xuICAgICAgICAgICAgICAgIGxldCBvID0gbi5nZXQodCkgfHwgUmUuZW1wdHkoKTtcbiAgICAgICAgICAgICAgICBvID0gaS5hcHBseVRvTG9jYWxWaWV3KHIsIG8pLCBuLnNldCh0LCBvKTtcbiAgICAgICAgICAgICAgICBjb25zdCB1ID0gKHMuZ2V0KGkuYmF0Y2hJZCkgfHwgZ3MoKSkuYWRkKHQpO1xuICAgICAgICAgICAgICAgIHMgPSBzLmluc2VydChpLmJhdGNoSWQsIHUpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IFtdLCBvID0gcy5nZXRSZXZlcnNlSXRlcmF0b3IoKTtcbiAgICAgICAgICAgIC8vIEl0ZXJhdGUgaW4gZGVzY2VuZGluZyBvcmRlciBvZiBiYXRjaCBJRHMsIGFuZCBza2lwIGRvY3VtZW50cyB0aGF0IGFyZVxuICAgICAgICAgICAgLy8gYWxyZWFkeSBzYXZlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoO28uaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gby5nZXROZXh0KCksIHUgPSBzLmtleSwgYyA9IHMudmFsdWUsIGEgPSBkcygpO1xuICAgICAgICAgICAgICAgIGMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaS5oYXModCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBxcyhlLmdldCh0KSwgbi5nZXQodCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiBhLnNldCh0LCBzKSwgaSA9IGkuYWRkKHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSkpLCByLnB1c2godGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5zYXZlT3ZlcmxheXModCwgdSwgYSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIFJ0LndhaXRGb3Iocik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY2FsY3VsYXRlcyBvdmVybGF5cyBieSByZWFkaW5nIHRoZSBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGVcbiAgICAgKiBmaXJzdCwgYW5kIHNhdmVzIHRoZW0gYWZ0ZXIgdGhleSBhcmUgY2FsY3VsYXRlZC5cbiAgICAgKi8gICAgcmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlLmdldEVudHJpZXModCwgZSkubmV4dCgoZSA9PiB0aGlzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBlcmZvcm1zIGEgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgdmlldyBvZiBhbGwgZG9jdW1lbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHRyYW5zYWN0aW9uIC0gVGhlIHBlcnNpc3RlbmNlIHRyYW5zYWN0aW9uLlxuICAgICAqIEBwYXJhbSBxdWVyeSAtIFRoZSBxdWVyeSB0byBtYXRjaCBkb2N1bWVudHMgYWdhaW5zdC5cbiAgICAgKiBAcGFyYW0gb2Zmc2V0IC0gUmVhZCB0aW1lIGFuZCBrZXkgdG8gc3RhcnQgc2Nhbm5pbmcgYnkgKGV4Y2x1c2l2ZSkuXG4gICAgICovICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbikge1xuICAgICAgICAvKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgcXVlcnkgbWF0Y2hlcyBhIHNpbmdsZSBkb2N1bWVudCBieSBwYXRoIChyYXRoZXIgdGhhbiBhXG4gKiBjb2xsZWN0aW9uKS5cbiAqL1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGh0LmlzRG9jdW1lbnRLZXkodC5wYXRoKSAmJiBudWxsID09PSB0LmNvbGxlY3Rpb25Hcm91cCAmJiAwID09PSB0LmZpbHRlcnMubGVuZ3RoO1xuICAgICAgICB9KGUpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkodCwgZS5wYXRoKSA6IFduKGUpID8gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQsIGUsIG4pIDogdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSh0LCBlLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogR2l2ZW4gYSBjb2xsZWN0aW9uIGdyb3VwLCByZXR1cm5zIHRoZSBuZXh0IGRvY3VtZW50cyB0aGF0IGZvbGxvdyB0aGUgcHJvdmlkZWQgb2Zmc2V0LCBhbG9uZ1xuICAgICAqIHdpdGggYW4gdXBkYXRlZCBiYXRjaCBJRC5cbiAgICAgKlxuICAgICAqIDxwPlRoZSBkb2N1bWVudHMgcmV0dXJuZWQgYnkgdGhpcyBtZXRob2QgYXJlIG9yZGVyZWQgYnkgcmVtb3RlIHZlcnNpb24gZnJvbSB0aGUgcHJvdmlkZWRcbiAgICAgKiBvZmZzZXQuIElmIHRoZXJlIGFyZSBubyBtb3JlIHJlbW90ZSBkb2N1bWVudHMgYWZ0ZXIgdGhlIHByb3ZpZGVkIG9mZnNldCwgZG9jdW1lbnRzIHdpdGhcbiAgICAgKiBtdXRhdGlvbnMgaW4gb3JkZXIgb2YgYmF0Y2ggaWQgZnJvbSB0aGUgb2Zmc2V0IGFyZSByZXR1cm5lZC4gU2luY2UgYWxsIGRvY3VtZW50cyBpbiBhIGJhdGNoIGFyZVxuICAgICAqIHJldHVybmVkIHRvZ2V0aGVyLCB0aGUgdG90YWwgbnVtYmVyIG9mIGRvY3VtZW50cyByZXR1cm5lZCBjYW4gZXhjZWVkIHtAY29kZSBjb3VudH0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gdHJhbnNhY3Rpb25cbiAgICAgKiBAcGFyYW0gY29sbGVjdGlvbkdyb3VwIFRoZSBjb2xsZWN0aW9uIGdyb3VwIGZvciB0aGUgZG9jdW1lbnRzLlxuICAgICAqIEBwYXJhbSBvZmZzZXQgVGhlIG9mZnNldCB0byBpbmRleCBpbnRvLlxuICAgICAqIEBwYXJhbSBjb3VudCBUaGUgbnVtYmVyIG9mIGRvY3VtZW50cyB0byByZXR1cm5cbiAgICAgKiBAcmV0dXJuIEEgTG9jYWxXcml0ZVJlc3VsdCB3aXRoIHRoZSBkb2N1bWVudHMgdGhhdCBmb2xsb3cgdGhlIHByb3ZpZGVkIG9mZnNldCBhbmQgdGhlIGxhc3QgcHJvY2Vzc2VkIGJhdGNoIGlkLlxuICAgICAqLyAgICBnZXROZXh0RG9jdW1lbnRzKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUsIG4sIHMpLm5leHQoKGkgPT4ge1xuICAgICAgICAgICAgY29uc3QgciA9IHMgLSBpLnNpemUgPiAwID8gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb25Hcm91cCh0LCBlLCBuLmxhcmdlc3RCYXRjaElkLCBzIC0gaS5zaXplKSA6IFJ0LnJlc29sdmUoZnMoKSk7XG4gICAgICAgICAgICAvLyBUaGUgY2FsbHNpdGUgd2lsbCB1c2UgdGhlIGxhcmdlc3QgYmF0Y2ggSUQgdG9nZXRoZXIgd2l0aCB0aGUgbGF0ZXN0IHJlYWQgdGltZSB0byBjcmVhdGVcbiAgICAgICAgICAgIC8vIGEgbmV3IGluZGV4IG9mZnNldC4gU2luY2Ugd2Ugb25seSBwcm9jZXNzIGJhdGNoIElEcyBpZiBhbGwgcmVtb3RlIGRvY3VtZW50cyBoYXZlIGJlZW4gcmVhZCxcbiAgICAgICAgICAgIC8vIG5vIG92ZXJsYXkgd2lsbCBpbmNyZWFzZSB0aGUgb3ZlcmFsbCByZWFkIHRpbWUuIFRoaXMgaXMgd2h5IHdlIG9ubHkgbmVlZCB0byBzcGVjaWFsIGNhc2VcbiAgICAgICAgICAgIC8vIHRoZSBiYXRjaCBpZC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBvID0gLTEsIHUgPSBpO1xuICAgICAgICAgICAgcmV0dXJuIHIubmV4dCgoZSA9PiBSdC5mb3JFYWNoKGUsICgoZSwgbikgPT4gKG8gPCBuLmxhcmdlc3RCYXRjaElkICYmIChvID0gbi5sYXJnZXN0QmF0Y2hJZCksIFxuICAgICAgICAgICAgaS5nZXQoZSkgPyBSdC5yZXNvbHZlKCkgOiB0aGlzLnJlbW90ZURvY3VtZW50Q2FjaGUuZ2V0RW50cnkodCwgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdSA9IHUuaW5zZXJ0KGUsIHQpO1xuICAgICAgICAgICAgfSkpKSkpLm5leHQoKCgpID0+IHRoaXMucG9wdWxhdGVPdmVybGF5cyh0LCBlLCBpKSkpLm5leHQoKCgpID0+IHRoaXMuY29tcHV0ZVZpZXdzKHQsIHUsIGUsIGdzKCkpKSkubmV4dCgodCA9PiAoe1xuICAgICAgICAgICAgICAgIGJhdGNoSWQ6IG8sXG4gICAgICAgICAgICAgICAgY2hhbmdlczogbHModClcbiAgICAgICAgICAgIH0pKSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0RvY3VtZW50UXVlcnkodCwgZSkge1xuICAgICAgICAvLyBKdXN0IGRvIGEgc2ltcGxlIGRvY3VtZW50IGxvb2t1cC5cbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RG9jdW1lbnQodCwgbmV3IGh0KGUpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGxldCBlID0gaHMoKTtcbiAgICAgICAgICAgIHJldHVybiB0LmlzRm91bmREb2N1bWVudCgpICYmIChlID0gZS5pbnNlcnQodC5rZXksIHQpKSwgZTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBnZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25Hcm91cFF1ZXJ5KHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IGUuY29sbGVjdGlvbkdyb3VwO1xuICAgICAgICBsZXQgaSA9IGhzKCk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlci5nZXRDb2xsZWN0aW9uUGFyZW50cyh0LCBzKS5uZXh0KChyID0+IFJ0LmZvckVhY2gociwgKHIgPT4ge1xuICAgICAgICAgICAgY29uc3QgbyA9IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVuKGUsIFxuICAgICAgICAgICAgICAgIC8qY29sbGVjdGlvbkdyb3VwPSovIG51bGwsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCB0LmVuZEF0KTtcbiAgICAgICAgICAgIH0oZSwgci5jaGlsZChzKSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXREb2N1bWVudHNNYXRjaGluZ0NvbGxlY3Rpb25RdWVyeSh0LCBvLCBuKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICB0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGkgPSBpLmluc2VydCh0LCBlKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBpKSkpKTtcbiAgICB9XG4gICAgZ2V0RG9jdW1lbnRzTWF0Y2hpbmdDb2xsZWN0aW9uUXVlcnkodCwgZSwgbikge1xuICAgICAgICAvLyBRdWVyeSB0aGUgcmVtb3RlIGRvY3VtZW50cyBhbmQgb3ZlcmxheSBtdXRhdGlvbnMuXG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2N1bWVudE92ZXJsYXlDYWNoZS5nZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24odCwgZS5wYXRoLCBuLmxhcmdlc3RCYXRjaElkKS5uZXh0KChpID0+IChzID0gaSwgXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4sIHMpKSkpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgLy8gQXMgZG9jdW1lbnRzIG1pZ2h0IG1hdGNoIHRoZSBxdWVyeSBiZWNhdXNlIG9mIHRoZWlyIG92ZXJsYXkgd2UgbmVlZCB0b1xuICAgICAgICAgICAgLy8gaW5jbHVkZSBkb2N1bWVudHMgZm9yIGFsbCBvdmVybGF5cyBpbiB0aGUgaW5pdGlhbCBkb2N1bWVudCBzZXQuXG4gICAgICAgICAgICBzLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IG4uZ2V0S2V5KCk7XG4gICAgICAgICAgICAgICAgbnVsbCA9PT0gdC5nZXQocykgJiYgKHQgPSB0Lmluc2VydChzLCBhbi5uZXdJbnZhbGlkRG9jdW1lbnQocykpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIC8vIEFwcGx5IHRoZSBvdmVybGF5cyBhbmQgbWF0Y2ggYWdhaW5zdCB0aGUgcXVlcnkuXG4gICAgICAgICAgICBsZXQgbiA9IGhzKCk7XG4gICAgICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCgodCwgaSkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBzLmdldCh0KTtcbiAgICAgICAgICAgICAgICB2b2lkIDAgIT09IHIgJiYgS3Moci5tdXRhdGlvbiwgaSwgUmUuZW1wdHkoKSwgaXQubm93KCkpLCBcbiAgICAgICAgICAgICAgICAvLyBGaW5hbGx5LCBpbnNlcnQgdGhlIGRvY3VtZW50cyB0aGF0IHN0aWxsIG1hdGNoIHRoZSBxdWVyeVxuICAgICAgICAgICAgICAgIG5zKGUsIGkpICYmIChuID0gbi5pbnNlcnQodCwgaSkpO1xuICAgICAgICAgICAgfSkpLCBuO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBNbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSB0LCB0aGlzLmNzID0gbmV3IE1hcCwgdGhpcy5ocyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldEJ1bmRsZU1ldGFkYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5jcy5nZXQoZSkpO1xuICAgIH1cbiAgICBzYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkge1xuICAgICAgICAvKiogRGVjb2RlcyBhIEJ1bmRsZU1ldGFkYXRhIHByb3RvIGludG8gYSBCdW5kbGVNZXRhZGF0YSBvYmplY3QuICovXG4gICAgICAgIHZhciBuO1xuICAgICAgICByZXR1cm4gdGhpcy5jcy5zZXQoZS5pZCwge1xuICAgICAgICAgICAgaWQ6IChuID0gZSkuaWQsXG4gICAgICAgICAgICB2ZXJzaW9uOiBuLnZlcnNpb24sXG4gICAgICAgICAgICBjcmVhdGVUaW1lOiBOaShuLmNyZWF0ZVRpbWUpXG4gICAgICAgIH0pLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE5hbWVkUXVlcnkodCwgZSkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLmhzLmdldChlKSk7XG4gICAgfVxuICAgIHNhdmVOYW1lZFF1ZXJ5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaHMuc2V0KGUubmFtZSwgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0Lm5hbWUsXG4gICAgICAgICAgICAgICAgcXVlcnk6IHlyKHQuYnVuZGxlZFF1ZXJ5KSxcbiAgICAgICAgICAgICAgICByZWFkVGltZTogTmkodC5yZWFkVGltZSlcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0oZSkpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbi1tZW1vcnkgaW1wbGVtZW50YXRpb24gb2YgRG9jdW1lbnRPdmVybGF5Q2FjaGUuXG4gKi8gY2xhc3MgJG8ge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAvLyBBIG1hcCBzb3J0ZWQgYnkgRG9jdW1lbnRLZXksIHdob3NlIHZhbHVlIGlzIGEgcGFpciBvZiB0aGUgbGFyZ2VzdCBiYXRjaCBpZFxuICAgICAgICAvLyBmb3IgdGhlIG92ZXJsYXkgYW5kIHRoZSBvdmVybGF5IGl0c2VsZi5cbiAgICAgICAgdGhpcy5vdmVybGF5cyA9IG5ldyBwZShodC5jb21wYXJhdG9yKSwgdGhpcy5scyA9IG5ldyBNYXA7XG4gICAgfVxuICAgIGdldE92ZXJsYXkodCwgZSkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLm92ZXJsYXlzLmdldChlKSk7XG4gICAgfVxuICAgIGdldE92ZXJsYXlzKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGZzKCk7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKGUsIChlID0+IHRoaXMuZ2V0T3ZlcmxheSh0LCBlKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIG51bGwgIT09IHQgJiYgbi5zZXQoZSwgdCk7XG4gICAgICAgIH0pKSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgc2F2ZU92ZXJsYXlzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHRoaXMud2UodCwgZSwgcyk7XG4gICAgICAgIH0pKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVPdmVybGF5c0ZvckJhdGNoSWQodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gdGhpcy5scy5nZXQobik7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHMgJiYgKHMuZm9yRWFjaCgodCA9PiB0aGlzLm92ZXJsYXlzID0gdGhpcy5vdmVybGF5cy5yZW1vdmUodCkpKSwgXG4gICAgICAgIHRoaXMubHMuZGVsZXRlKG4pKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRPdmVybGF5c0ZvckNvbGxlY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gZnMoKSwgaSA9IGUubGVuZ3RoICsgMSwgciA9IG5ldyBodChlLmNoaWxkKFwiXCIpKSwgbyA9IHRoaXMub3ZlcmxheXMuZ2V0SXRlcmF0b3JGcm9tKHIpO1xuICAgICAgICBmb3IgKDtvLmhhc05leHQoKTsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gby5nZXROZXh0KCkudmFsdWUsIHIgPSB0LmdldEtleSgpO1xuICAgICAgICAgICAgaWYgKCFlLmlzUHJlZml4T2Yoci5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICAvLyBEb2N1bWVudHMgZnJvbSBzdWItY29sbGVjdGlvbnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHIucGF0aC5sZW5ndGggPT09IGkgJiYgKHQubGFyZ2VzdEJhdGNoSWQgPiBuICYmIHMuc2V0KHQuZ2V0S2V5KCksIHQpKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShzKTtcbiAgICB9XG4gICAgZ2V0T3ZlcmxheXNGb3JDb2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IG5ldyBwZSgoKHQsIGUpID0+IHQgLSBlKSk7XG4gICAgICAgIGNvbnN0IHIgPSB0aGlzLm92ZXJsYXlzLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO3IuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSByLmdldE5leHQoKS52YWx1ZTtcbiAgICAgICAgICAgIGlmICh0LmdldEtleSgpLmdldENvbGxlY3Rpb25Hcm91cCgpID09PSBlICYmIHQubGFyZ2VzdEJhdGNoSWQgPiBuKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSBpLmdldCh0Lmxhcmdlc3RCYXRjaElkKTtcbiAgICAgICAgICAgICAgICBudWxsID09PSBlICYmIChlID0gZnMoKSwgaSA9IGkuaW5zZXJ0KHQubGFyZ2VzdEJhdGNoSWQsIGUpKSwgZS5zZXQodC5nZXRLZXkoKSwgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbyA9IGZzKCksIHUgPSBpLmdldEl0ZXJhdG9yKCk7XG4gICAgICAgIGZvciAoO3UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGlmICh1LmdldE5leHQoKS52YWx1ZS5mb3JFYWNoKCgodCwgZSkgPT4gby5zZXQodCwgZSkpKSwgby5zaXplKCkgPj0gcykgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobyk7XG4gICAgfVxuICAgIHdlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gUmVtb3ZlIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGUgb3ZlcmxheSB0byBpdHMgYmF0Y2ggaWQuXG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLm92ZXJsYXlzLmdldChuLmtleSk7XG4gICAgICAgIGlmIChudWxsICE9PSBzKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5scy5nZXQocy5sYXJnZXN0QmF0Y2hJZCkuZGVsZXRlKG4ua2V5KTtcbiAgICAgICAgICAgIHRoaXMubHMuc2V0KHMubGFyZ2VzdEJhdGNoSWQsIHQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3ZlcmxheXMgPSB0aGlzLm92ZXJsYXlzLmluc2VydChuLmtleSwgbmV3IGVpKGUsIG4pKTtcbiAgICAgICAgLy8gQ3JlYXRlIHRoZSBhc3NvY2lhdGlvbiBvZiB0aGlzIG92ZXJsYXkgdG8gdGhlIGdpdmVuIGxhcmdlc3RCYXRjaElkLlxuICAgICAgICBsZXQgaSA9IHRoaXMubHMuZ2V0KGUpO1xuICAgICAgICB2b2lkIDAgPT09IGkgJiYgKGkgPSBncygpLCB0aGlzLmxzLnNldChlLCBpKSksIHRoaXMubHMuc2V0KGUsIGkuYWRkKG4ua2V5KSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGNvbGxlY3Rpb24gb2YgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IGZyb20gc29tZSBraW5kIG9mIG51bWJlcmVkIGVudGl0eVxuICogKGVpdGhlciBhIHRhcmdldCBJRCBvciBiYXRjaCBJRCkuIEFzIHJlZmVyZW5jZXMgYXJlIGFkZGVkIHRvIG9yIHJlbW92ZWQgZnJvbVxuICogdGhlIHNldCBjb3JyZXNwb25kaW5nIGV2ZW50cyBhcmUgZW1pdHRlZCB0byBhIHJlZ2lzdGVyZWQgZ2FyYmFnZSBjb2xsZWN0b3IuXG4gKlxuICogRWFjaCByZWZlcmVuY2UgaXMgcmVwcmVzZW50ZWQgYnkgYSBEb2N1bWVudFJlZmVyZW5jZSBvYmplY3QuIEVhY2ggb2YgdGhlbVxuICogY29udGFpbnMgZW5vdWdoIGluZm9ybWF0aW9uIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IHRoZSByZWZlcmVuY2UuIFRoZXkgYXJlIGFsbFxuICogc3RvcmVkIHByaW1hcmlseSBpbiBhIHNldCBzb3J0ZWQgYnkga2V5LiBBIGRvY3VtZW50IGlzIGNvbnNpZGVyZWQgZ2FyYmFnZSBpZlxuICogdGhlcmUncyBubyByZWZlcmVuY2VzIGluIHRoYXQgc2V0ICh0aGlzIGNhbiBiZSBlZmZpY2llbnRseSBjaGVja2VkIHRoYW5rcyB0b1xuICogc29ydGluZyBieSBrZXkpLlxuICpcbiAqIFJlZmVyZW5jZVNldCBhbHNvIGtlZXBzIGEgc2Vjb25kYXJ5IHNldCB0aGF0IGNvbnRhaW5zIHJlZmVyZW5jZXMgc29ydGVkIGJ5XG4gKiBJRHMuIFRoaXMgb25lIGlzIHVzZWQgdG8gZWZmaWNpZW50bHkgaW1wbGVtZW50IHJlbW92YWwgb2YgYWxsIHJlZmVyZW5jZXMgYnlcbiAqIHNvbWUgdGFyZ2V0IElELlxuICovIGNsYXNzIE9vIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSBrZXkuXG4gICAgICAgIHRoaXMuZnMgPSBuZXcgRWUoRm8uZHMpLCBcbiAgICAgICAgLy8gQSBzZXQgb2Ygb3V0c3RhbmRpbmcgcmVmZXJlbmNlcyB0byBhIGRvY3VtZW50IHNvcnRlZCBieSB0YXJnZXQgaWQuXG4gICAgICAgIHRoaXMud3MgPSBuZXcgRWUoRm8uX3MpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2Ugc2V0IGNvbnRhaW5zIG5vIHJlZmVyZW5jZXMuICovICAgIGlzRW1wdHkoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZzLmlzRW1wdHkoKTtcbiAgICB9XG4gICAgLyoqIEFkZHMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuIElELiAqLyAgICBhZGRSZWZlcmVuY2UodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IEZvKHQsIGUpO1xuICAgICAgICB0aGlzLmZzID0gdGhpcy5mcy5hZGQobiksIHRoaXMud3MgPSB0aGlzLndzLmFkZChuKTtcbiAgICB9XG4gICAgLyoqIEFkZCByZWZlcmVuY2VzIHRvIHRoZSBnaXZlbiBkb2N1bWVudCBrZXlzIGZvciB0aGUgZ2l2ZW4gSUQuICovICAgIGdzKHQsIGUpIHtcbiAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHRoaXMuYWRkUmVmZXJlbmNlKHQsIGUpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlbW92ZXMgYSByZWZlcmVuY2UgdG8gdGhlIGdpdmVuIGRvY3VtZW50IGtleSBmb3IgdGhlIGdpdmVuXG4gICAgICogSUQuXG4gICAgICovICAgIHJlbW92ZVJlZmVyZW5jZSh0LCBlKSB7XG4gICAgICAgIHRoaXMueXMobmV3IEZvKHQsIGUpKTtcbiAgICB9XG4gICAgcHModCwgZSkge1xuICAgICAgICB0LmZvckVhY2goKHQgPT4gdGhpcy5yZW1vdmVSZWZlcmVuY2UodCwgZSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xlYXJzIGFsbCByZWZlcmVuY2VzIHdpdGggYSBnaXZlbiBJRC4gQ2FsbHMgcmVtb3ZlUmVmKCkgZm9yIGVhY2gga2V5XG4gICAgICogcmVtb3ZlZC5cbiAgICAgKi8gICAgSXModCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IGh0KG5ldyB1dChbXSkpLCBuID0gbmV3IEZvKGUsIHQpLCBzID0gbmV3IEZvKGUsIHQgKyAxKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy53cy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy55cyh0KSwgaS5wdXNoKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBUcygpIHtcbiAgICAgICAgdGhpcy5mcy5mb3JFYWNoKCh0ID0+IHRoaXMueXModCkpKTtcbiAgICB9XG4gICAgeXModCkge1xuICAgICAgICB0aGlzLmZzID0gdGhpcy5mcy5kZWxldGUodCksIHRoaXMud3MgPSB0aGlzLndzLmRlbGV0ZSh0KTtcbiAgICB9XG4gICAgRXModCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IGh0KG5ldyB1dChbXSkpLCBuID0gbmV3IEZvKGUsIHQpLCBzID0gbmV3IEZvKGUsIHQgKyAxKTtcbiAgICAgICAgbGV0IGkgPSBncygpO1xuICAgICAgICByZXR1cm4gdGhpcy53cy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgaSA9IGkuYWRkKHQua2V5KTtcbiAgICAgICAgfSkpLCBpO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgRm8odCwgMCksIG4gPSB0aGlzLmZzLmZpcnN0QWZ0ZXJPckVxdWFsKGUpO1xuICAgICAgICByZXR1cm4gbnVsbCAhPT0gbiAmJiB0LmlzRXF1YWwobi5rZXkpO1xuICAgIH1cbn1cblxuY2xhc3MgRm8ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5rZXkgPSB0LCB0aGlzLkFzID0gZTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkga2V5IHRoZW4gYnkgSUQgKi8gICAgc3RhdGljIGRzKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSB8fCBldCh0LkFzLCBlLkFzKTtcbiAgICB9XG4gICAgLyoqIENvbXBhcmUgYnkgSUQgdGhlbiBieSBrZXkgKi8gICAgc3RhdGljIF9zKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIGV0KHQuQXMsIGUuQXMpIHx8IGh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEJvIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuaW5kZXhNYW5hZ2VyID0gdCwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IGUsIFxuICAgICAgICAvKipcbiAgICAgICAgICogVGhlIHNldCBvZiBhbGwgbXV0YXRpb25zIHRoYXQgaGF2ZSBiZWVuIHNlbnQgYnV0IG5vdCB5ZXQgYmVlbiBhcHBsaWVkIHRvXG4gICAgICAgICAqIHRoZSBiYWNrZW5kLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gW10sIFxuICAgICAgICAvKiogTmV4dCB2YWx1ZSB0byB1c2Ugd2hlbiBhc3NpZ25pbmcgc2VxdWVudGlhbCBJRHMgdG8gZWFjaCBtdXRhdGlvbiBiYXRjaC4gKi9cbiAgICAgICAgdGhpcy52cyA9IDEsIFxuICAgICAgICAvKiogQW4gb3JkZXJlZCBtYXBwaW5nIGJldHdlZW4gZG9jdW1lbnRzIGFuZCB0aGUgbXV0YXRpb25zIGJhdGNoIElEcy4gKi9cbiAgICAgICAgdGhpcy5ScyA9IG5ldyBFZShGby5kcyk7XG4gICAgfVxuICAgIGNoZWNrRW1wdHkodCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSgwID09PSB0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoKTtcbiAgICB9XG4gICAgYWRkTXV0YXRpb25CYXRjaCh0LCBlLCBuLCBzKSB7XG4gICAgICAgIGNvbnN0IGkgPSB0aGlzLnZzO1xuICAgICAgICB0aGlzLnZzKyssIHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiAwICYmIHRoaXMubXV0YXRpb25RdWV1ZVt0aGlzLm11dGF0aW9uUXVldWUubGVuZ3RoIC0gMV07XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgWnMoaSwgZSwgbiwgcyk7XG4gICAgICAgIHRoaXMubXV0YXRpb25RdWV1ZS5wdXNoKHIpO1xuICAgICAgICAvLyBUcmFjayByZWZlcmVuY2VzIGJ5IGRvY3VtZW50IGtleSBhbmQgaW5kZXggY29sbGVjdGlvbiBwYXJlbnRzLlxuICAgICAgICBmb3IgKGNvbnN0IGUgb2YgcykgdGhpcy5ScyA9IHRoaXMuUnMuYWRkKG5ldyBGbyhlLmtleSwgaSkpLCB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBlLmtleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHIpO1xuICAgIH1cbiAgICBsb29rdXBNdXRhdGlvbkJhdGNoKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5QcyhlKSk7XG4gICAgfVxuICAgIGdldE5leHRNdXRhdGlvbkJhdGNoQWZ0ZXJCYXRjaElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUgKyAxLCBzID0gdGhpcy5icyhuKSwgaSA9IHMgPCAwID8gMCA6IHM7XG4gICAgICAgIC8vIFRoZSByZXF1ZXN0ZWQgYmF0Y2hJZCBtYXkgc3RpbGwgYmUgb3V0IG9mIHJhbmdlIHNvIG5vcm1hbGl6ZSBpdCB0byB0aGVcbiAgICAgICAgLy8gc3RhcnQgb2YgdGhlIHF1ZXVlLlxuICAgICAgICAgICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPiBpID8gdGhpcy5tdXRhdGlvblF1ZXVlW2ldIDogbnVsbCk7XG4gICAgfVxuICAgIGdldEhpZ2hlc3RVbmFja25vd2xlZGdlZEJhdGNoSWQoKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKDAgPT09IHRoaXMubXV0YXRpb25RdWV1ZS5sZW5ndGggPyAtMSA6IHRoaXMudnMgLSAxKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5tdXRhdGlvblF1ZXVlLnNsaWNlKCkpO1xuICAgIH1cbiAgICBnZXRBbGxNdXRhdGlvbkJhdGNoZXNBZmZlY3RpbmdEb2N1bWVudEtleSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgRm8oZSwgMCksIHMgPSBuZXcgRm8oZSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSwgaSA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5Scy5mb3JFYWNoSW5SYW5nZShbIG4sIHMgXSwgKHQgPT4ge1xuICAgICAgICAgICAgY29uc3QgZSA9IHRoaXMuUHModC5Bcyk7XG4gICAgICAgICAgICBpLnB1c2goZSk7XG4gICAgICAgIH0pKSwgUnQucmVzb2x2ZShpKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nRG9jdW1lbnRLZXlzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBuZXcgRWUoZXQpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuZXcgRm8odCwgMCksIHMgPSBuZXcgRm8odCwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTtcbiAgICAgICAgICAgIHRoaXMuUnMuZm9yRWFjaEluUmFuZ2UoWyBlLCBzIF0sICh0ID0+IHtcbiAgICAgICAgICAgICAgICBuID0gbi5hZGQodC5Bcyk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgIH0pKSwgUnQucmVzb2x2ZSh0aGlzLlZzKG4pKTtcbiAgICB9XG4gICAgZ2V0QWxsTXV0YXRpb25CYXRjaGVzQWZmZWN0aW5nUXVlcnkodCwgZSkge1xuICAgICAgICAvLyBVc2UgdGhlIHF1ZXJ5IHBhdGggYXMgYSBwcmVmaXggZm9yIHRlc3RpbmcgaWYgYSBkb2N1bWVudCBtYXRjaGVzIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgY29uc3QgbiA9IGUucGF0aCwgcyA9IG4ubGVuZ3RoICsgMTtcbiAgICAgICAgLy8gQ29uc3RydWN0IGEgZG9jdW1lbnQgcmVmZXJlbmNlIGZvciBhY3R1YWxseSBzY2FubmluZyB0aGUgaW5kZXguIFVubGlrZVxuICAgICAgICAvLyB0aGUgcHJlZml4IHRoZSBkb2N1bWVudCBrZXkgaW4gdGhpcyByZWZlcmVuY2UgbXVzdCBoYXZlIGFuIGV2ZW4gbnVtYmVyIG9mXG4gICAgICAgIC8vIHNlZ21lbnRzLiBUaGUgZW1wdHkgc2VnbWVudCBjYW4gYmUgdXNlZCBhIHN1ZmZpeCBvZiB0aGUgcXVlcnkgcGF0aFxuICAgICAgICAvLyBiZWNhdXNlIGl0IHByZWNlZGVzIGFsbCBvdGhlciBzZWdtZW50cyBpbiBhbiBvcmRlcmVkIHRyYXZlcnNhbC5cbiAgICAgICAgbGV0IGkgPSBuO1xuICAgICAgICBodC5pc0RvY3VtZW50S2V5KGkpIHx8IChpID0gaS5jaGlsZChcIlwiKSk7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgRm8obmV3IGh0KGkpLCAwKTtcbiAgICAgICAgLy8gRmluZCB1bmlxdWUgYmF0Y2hJRHMgcmVmZXJlbmNlZCBieSBhbGwgZG9jdW1lbnRzIHBvdGVudGlhbGx5IG1hdGNoaW5nIHRoZVxuICAgICAgICAvLyBxdWVyeS5cbiAgICAgICAgICAgICAgICBsZXQgbyA9IG5ldyBFZShldCk7XG4gICAgICAgIHJldHVybiB0aGlzLlJzLmZvckVhY2hXaGlsZSgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gdC5rZXkucGF0aDtcbiAgICAgICAgICAgIHJldHVybiAhIW4uaXNQcmVmaXhPZihlKSAmJiAoXG4gICAgICAgICAgICAvLyBSb3dzIHdpdGggZG9jdW1lbnQga2V5cyBtb3JlIHRoYW4gb25lIHNlZ21lbnQgbG9uZ2VyIHRoYW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgICAvLyBwYXRoIGNhbid0IGJlIG1hdGNoZXMuIEZvciBleGFtcGxlLCBhIHF1ZXJ5IG9uICdyb29tcycgY2FuJ3QgbWF0Y2hcbiAgICAgICAgICAgIC8vIHRoZSBkb2N1bWVudCAvcm9vbXMvYWJjL21lc3NhZ2VzL3h5eC5cbiAgICAgICAgICAgIC8vIFRPRE8obWNnKTogd2UnbGwgbmVlZCBhIGRpZmZlcmVudCBzY2FubmVyIHdoZW4gd2UgaW1wbGVtZW50XG4gICAgICAgICAgICAvLyBhbmNlc3RvciBxdWVyaWVzLlxuICAgICAgICAgICAgZS5sZW5ndGggPT09IHMgJiYgKG8gPSBvLmFkZCh0LkFzKSksICEwKTtcbiAgICAgICAgfSksIHIpLCBSdC5yZXNvbHZlKHRoaXMuVnMobykpO1xuICAgIH1cbiAgICBWcyh0KSB7XG4gICAgICAgIC8vIENvbnN0cnVjdCBhbiBhcnJheSBvZiBtYXRjaGluZyBiYXRjaGVzLCBzb3J0ZWQgYnkgYmF0Y2hJRCB0byBlbnN1cmUgdGhhdFxuICAgICAgICAvLyBtdWx0aXBsZSBtdXRhdGlvbnMgYWZmZWN0aW5nIHRoZSBzYW1lIGRvY3VtZW50IGtleSBhcmUgYXBwbGllZCBpbiBvcmRlci5cbiAgICAgICAgY29uc3QgZSA9IFtdO1xuICAgICAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLlBzKHQpO1xuICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBlLnB1c2gobik7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgcmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSB7XG4gICAgICAgIEYoMCA9PT0gdGhpcy5TcyhlLmJhdGNoSWQsIFwicmVtb3ZlZFwiKSksIHRoaXMubXV0YXRpb25RdWV1ZS5zaGlmdCgpO1xuICAgICAgICBsZXQgbiA9IHRoaXMuUnM7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKGUubXV0YXRpb25zLCAocyA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gbmV3IEZvKHMua2V5LCBlLmJhdGNoSWQpO1xuICAgICAgICAgICAgcmV0dXJuIG4gPSBuLmRlbGV0ZShpKSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZS5tYXJrUG90ZW50aWFsbHlPcnBoYW5lZCh0LCBzLmtleSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLlJzID0gbjtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBDbih0KSB7XG4gICAgICAgIC8vIE5vLW9wIHNpbmNlIHRoZSBtZW1vcnkgbXV0YXRpb24gcXVldWUgZG9lcyBub3QgbWFpbnRhaW4gYSBzZXBhcmF0ZSBjYWNoZS5cbiAgICB9XG4gICAgY29udGFpbnNLZXkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IEZvKGUsIDApLCBzID0gdGhpcy5Scy5maXJzdEFmdGVyT3JFcXVhbChuKTtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoZS5pc0VxdWFsKHMgJiYgcy5rZXkpKTtcbiAgICB9XG4gICAgcGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGaW5kcyB0aGUgaW5kZXggb2YgdGhlIGdpdmVuIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlIGFuZCBhc3NlcnRzIHRoYXRcbiAgICAgKiB0aGUgcmVzdWx0aW5nIGluZGV4IGlzIHdpdGhpbiB0aGUgYm91bmRzIG9mIHRoZSBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBiYXRjaElkIC0gVGhlIGJhdGNoSWQgdG8gc2VhcmNoIGZvclxuICAgICAqIEBwYXJhbSBhY3Rpb24gLSBBIGRlc2NyaXB0aW9uIG9mIHdoYXQgdGhlIGNhbGxlciBpcyBkb2luZywgcGhyYXNlZCBpbiBwYXNzaXZlXG4gICAgICogZm9ybSAoZS5nLiBcImFja25vd2xlZGdlZFwiIGluIGEgcm91dGluZSB0aGF0IGFja25vd2xlZGdlcyBiYXRjaGVzKS5cbiAgICAgKi8gICAgU3ModCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5icyh0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRmluZHMgdGhlIGluZGV4IG9mIHRoZSBnaXZlbiBiYXRjaElkIGluIHRoZSBtdXRhdGlvbiBxdWV1ZS4gVGhpcyBvcGVyYXRpb25cbiAgICAgKiBpcyBPKDEpLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIGNvbXB1dGVkIGluZGV4IG9mIHRoZSBiYXRjaCB3aXRoIHRoZSBnaXZlbiBiYXRjaElkLCBiYXNlZCBvblxuICAgICAqIHRoZSBzdGF0ZSBvZiB0aGUgcXVldWUuIE5vdGUgdGhpcyBpbmRleCBjYW4gYmUgbmVnYXRpdmUgaWYgdGhlIHJlcXVlc3RlZFxuICAgICAqIGJhdGNoSWQgaGFzIGFscmVhZHkgYmVlbiByZW12b2VkIGZyb20gdGhlIHF1ZXVlIG9yIHBhc3QgdGhlIGVuZCBvZiB0aGVcbiAgICAgKiBxdWV1ZSBpZiB0aGUgYmF0Y2hJZCBpcyBsYXJnZXIgdGhhbiB0aGUgbGFzdCBhZGRlZCBiYXRjaC5cbiAgICAgKi8gICAgYnModCkge1xuICAgICAgICBpZiAoMCA9PT0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgXG4gICAgICAgIC8vIEFzIGFuIGluZGV4IHRoaXMgaXMgcGFzdCB0aGUgZW5kIG9mIHRoZSBxdWV1ZVxuICAgICAgICByZXR1cm4gMDtcbiAgICAgICAgLy8gRXhhbWluZSB0aGUgZnJvbnQgb2YgdGhlIHF1ZXVlIHRvIGZpZ3VyZSBvdXQgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGVcbiAgICAgICAgLy8gYmF0Y2hJZCBhbmQgaW5kZXhlcyBpbiB0aGUgYXJyYXkuIE5vdGUgdGhhdCBzaW5jZSB0aGUgcXVldWUgaXMgb3JkZXJlZFxuICAgICAgICAvLyBieSBiYXRjaElkLCBpZiB0aGUgZmlyc3QgYmF0Y2ggaGFzIGEgbGFyZ2VyIGJhdGNoSWQgdGhlbiB0aGUgcmVxdWVzdGVkXG4gICAgICAgIC8vIGJhdGNoSWQgZG9lc24ndCBleGlzdCBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHQgLSB0aGlzLm11dGF0aW9uUXVldWVbMF0uYmF0Y2hJZDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSB2ZXJzaW9uIG9mIGxvb2t1cE11dGF0aW9uQmF0Y2ggdGhhdCBkb2Vzbid0IHJldHVybiBhIHByb21pc2UsIHRoaXMgbWFrZXNcbiAgICAgKiBvdGhlciBmdW5jdGlvbnMgdGhhdCB1c2VzIHRoaXMgY29kZSBlYXNpZXIgdG8gcmVhZCBhbmQgbW9yZSBlZmZpY2VudC5cbiAgICAgKi8gICAgUHModCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5icyh0KTtcbiAgICAgICAgaWYgKGUgPCAwIHx8IGUgPj0gdGhpcy5tdXRhdGlvblF1ZXVlLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgICAgIHJldHVybiB0aGlzLm11dGF0aW9uUXVldWVbZV07XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgbWVtb3J5LW9ubHkgUmVtb3RlRG9jdW1lbnRDYWNoZSBmb3IgSW5kZXhlZERiLiBUbyBjb25zdHJ1Y3QsIGludm9rZVxuICogYG5ld01lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUoKWAuXG4gKi9cbmNsYXNzIExvIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0gc2l6ZXIgLSBVc2VkIHRvIGFzc2VzcyB0aGUgc2l6ZSBvZiBhIGRvY3VtZW50LiBGb3IgZWFnZXIgR0MsIHRoaXMgaXNcbiAgICAgKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAgICAgKiBjYWxjdWxhdGluZyB0aGUgc2l6ZS5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuRHMgPSB0LCBcbiAgICAgICAgLyoqIFVuZGVybHlpbmcgY2FjaGUgb2YgZG9jdW1lbnRzIGFuZCB0aGVpciByZWFkIHRpbWVzLiAqL1xuICAgICAgICB0aGlzLmRvY3MgPSBuZXcgcGUoaHQuY29tcGFyYXRvciksIFxuICAgICAgICAvKiogU2l6ZSBvZiBhbGwgY2FjaGVkIGRvY3VtZW50cy4gKi9cbiAgICAgICAgdGhpcy5zaXplID0gMDtcbiAgICB9XG4gICAgc2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgdGhpcy5pbmRleE1hbmFnZXIgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIHRoZSBzdXBwbGllZCBlbnRyeSB0byB0aGUgY2FjaGUgYW5kIHVwZGF0ZXMgdGhlIGNhY2hlIHNpemUgYXMgYXBwcm9wcmlhdGUuXG4gICAgICpcbiAgICAgKiBBbGwgY2FsbHMgb2YgYGFkZEVudHJ5YCAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgYWRkRW50cnkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5rZXksIHMgPSB0aGlzLmRvY3MuZ2V0KG4pLCBpID0gcyA/IHMuc2l6ZSA6IDAsIHIgPSB0aGlzLkRzKGUpO1xuICAgICAgICByZXR1cm4gdGhpcy5kb2NzID0gdGhpcy5kb2NzLmluc2VydChuLCB7XG4gICAgICAgICAgICBkb2N1bWVudDogZS5tdXRhYmxlQ29weSgpLFxuICAgICAgICAgICAgc2l6ZTogclxuICAgICAgICB9KSwgdGhpcy5zaXplICs9IHIgLSBpLCB0aGlzLmluZGV4TWFuYWdlci5hZGRUb0NvbGxlY3Rpb25QYXJlbnRJbmRleCh0LCBuLnBhdGgucG9wTGFzdCgpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGVudHJ5IGZyb20gdGhlIGNhY2hlIGFuZCB1cGRhdGVzIHRoZSBjYWNoZSBzaXplIGFzIGFwcHJvcHJpYXRlLlxuICAgICAqXG4gICAgICogQWxsIGNhbGxzIG9mIGByZW1vdmVFbnRyeWAgYXJlIHJlcXVpcmVkIHRvIGdvIHRocm91Z2ggdGhlIFJlbW90ZURvY3VtZW50Q2hhbmdlQnVmZmVyXG4gICAgICogcmV0dXJuZWQgYnkgYG5ld0NoYW5nZUJ1ZmZlcigpYC5cbiAgICAgKi8gICAgcmVtb3ZlRW50cnkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5kb2NzLmdldCh0KTtcbiAgICAgICAgZSAmJiAodGhpcy5kb2NzID0gdGhpcy5kb2NzLnJlbW92ZSh0KSwgdGhpcy5zaXplIC09IGUuc2l6ZSk7XG4gICAgfVxuICAgIGdldEVudHJ5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuZG9jcy5nZXQoZSk7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKG4gPyBuLmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBhbi5uZXdJbnZhbGlkRG9jdW1lbnQoZSkpO1xuICAgIH1cbiAgICBnZXRFbnRyaWVzKHQsIGUpIHtcbiAgICAgICAgbGV0IG4gPSBjcygpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSB0aGlzLmRvY3MuZ2V0KHQpO1xuICAgICAgICAgICAgbiA9IG4uaW5zZXJ0KHQsIGUgPyBlLmRvY3VtZW50Lm11dGFibGVDb3B5KCkgOiBhbi5uZXdJbnZhbGlkRG9jdW1lbnQodCkpO1xuICAgICAgICB9KSksIFJ0LnJlc29sdmUobik7XG4gICAgfVxuICAgIGdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiwgcykge1xuICAgICAgICBsZXQgaSA9IGNzKCk7XG4gICAgICAgIC8vIERvY3VtZW50cyBhcmUgb3JkZXJlZCBieSBrZXksIHNvIHdlIGNhbiB1c2UgYSBwcmVmaXggc2NhbiB0byBuYXJyb3cgZG93blxuICAgICAgICAvLyB0aGUgZG9jdW1lbnRzIHdlIG5lZWQgdG8gbWF0Y2ggdGhlIHF1ZXJ5IGFnYWluc3QuXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGUucGF0aCwgbyA9IG5ldyBodChyLmNoaWxkKFwiXCIpKSwgdSA9IHRoaXMuZG9jcy5nZXRJdGVyYXRvckZyb20obyk7XG4gICAgICAgIGZvciAoO3UuaGFzTmV4dCgpOyApIHtcbiAgICAgICAgICAgIGNvbnN0IHtrZXk6IHQsIHZhbHVlOiB7ZG9jdW1lbnQ6IG99fSA9IHUuZ2V0TmV4dCgpO1xuICAgICAgICAgICAgaWYgKCFyLmlzUHJlZml4T2YodC5wYXRoKSkgYnJlYWs7XG4gICAgICAgICAgICB0LnBhdGgubGVuZ3RoID4gci5sZW5ndGggKyAxIHx8IChUdChwdChvKSwgbikgPD0gMCB8fCAocy5oYXMoby5rZXkpIHx8IG5zKGUsIG8pKSAmJiAoaSA9IGkuaW5zZXJ0KG8ua2V5LCBvLm11dGFibGVDb3B5KCkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUoaSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21Db2xsZWN0aW9uR3JvdXAodCwgZSwgbiwgcykge1xuICAgICAgICAvLyBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSB0aGUgSW5kZXhCYWNrZmlsbGVyIGlmIHBlcnNpc3RlbmNlXG4gICAgICAgIC8vIGlzIGVuYWJsZWQuXG4gICAgICAgIE8oKTtcbiAgICB9XG4gICAgQ3ModCwgZSkge1xuICAgICAgICByZXR1cm4gUnQuZm9yRWFjaCh0aGlzLmRvY3MsICh0ID0+IGUodCkpKTtcbiAgICB9XG4gICAgbmV3Q2hhbmdlQnVmZmVyKHQpIHtcbiAgICAgICAgLy8gYHRyYWNrUmVtb3ZhbHNgIGlzIGlnbm9yZXMgc2luY2UgdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUga2VlcHNcbiAgICAgICAgLy8gYSBzZXBhcmF0ZSBjaGFuZ2Vsb2cgYW5kIGRvZXMgbm90IG5lZWQgc3BlY2lhbCBoYW5kbGluZyBmb3IgcmVtb3ZhbHMuXG4gICAgICAgIHJldHVybiBuZXcgcW8odGhpcyk7XG4gICAgfVxuICAgIGdldFNpemUodCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLnNpemUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IG1lbW9yeS1vbmx5IFJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKlxuICogQHBhcmFtIHNpemVyIC0gVXNlZCB0byBhc3Nlc3MgdGhlIHNpemUgb2YgYSBkb2N1bWVudC4gRm9yIGVhZ2VyIEdDLCB0aGlzIGlzXG4gKiBleHBlY3RlZCB0byBqdXN0IHJldHVybiAwIHRvIGF2b2lkIHVubmVjZXNzYXJpbHkgZG9pbmcgdGhlIHdvcmsgb2ZcbiAqIGNhbGN1bGF0aW5nIHRoZSBzaXplLlxuICovXG4vKipcbiAqIEhhbmRsZXMgdGhlIGRldGFpbHMgb2YgYWRkaW5nIGFuZCB1cGRhdGluZyBkb2N1bWVudHMgaW4gdGhlIE1lbW9yeVJlbW90ZURvY3VtZW50Q2FjaGUuXG4gKi9cbmNsYXNzIHFvIGV4dGVuZHMgdm8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5vcyA9IHQ7XG4gICAgfVxuICAgIGFwcGx5Q2hhbmdlcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgcy5pc1ZhbGlkRG9jdW1lbnQoKSA/IGUucHVzaCh0aGlzLm9zLmFkZEVudHJ5KHQsIHMpKSA6IHRoaXMub3MucmVtb3ZlRW50cnkobik7XG4gICAgICAgIH0pKSwgUnQud2FpdEZvcihlKTtcbiAgICB9XG4gICAgZ2V0RnJvbUNhY2hlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3MuZ2V0RW50cnkodCwgZSk7XG4gICAgfVxuICAgIGdldEFsbEZyb21DYWNoZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9zLmdldEVudHJpZXModCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjbGFzcyBVbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0IHRvIHRoZSBkYXRhIGFib3V0IHRoYXQgdGFyZ2V0XG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnhzID0gbmV3IG9zKCh0ID0+ICRuKHQpKSwgT24pLCBcbiAgICAgICAgLyoqIFRoZSBsYXN0IHJlY2VpdmVkIHNuYXBzaG90IHZlcnNpb24uICovXG4gICAgICAgIHRoaXMubGFzdFJlbW90ZVNuYXBzaG90VmVyc2lvbiA9IHJ0Lm1pbigpLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IG51bWJlcmVkIHRhcmdldCBJRCBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSAwLCBcbiAgICAgICAgLyoqIFRoZSBoaWdoZXN0IHNlcXVlbmNlIG51bWJlciBlbmNvdW50ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5OcyA9IDAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBvcmRlcmVkIGJpZGlyZWN0aW9uYWwgbWFwcGluZyBiZXR3ZWVuIGRvY3VtZW50cyBhbmQgdGhlIHJlbW90ZSB0YXJnZXRcbiAgICAgICAgICogSURzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5rcyA9IG5ldyBPbywgdGhpcy50YXJnZXRDb3VudCA9IDAsIHRoaXMuTXMgPSBsby5rbigpO1xuICAgIH1cbiAgICBmb3JFYWNoVGFyZ2V0KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuZm9yRWFjaCgoKHQsIG4pID0+IGUobikpKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBnZXRMYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5sYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uKTtcbiAgICB9XG4gICAgZ2V0SGlnaGVzdFNlcXVlbmNlTnVtYmVyKHQpIHtcbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUodGhpcy5Ocyk7XG4gICAgfVxuICAgIGFsbG9jYXRlVGFyZ2V0SWQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgPSB0aGlzLk1zLm5leHQoKSwgUnQucmVzb2x2ZSh0aGlzLmhpZ2hlc3RUYXJnZXRJZCk7XG4gICAgfVxuICAgIHNldFRhcmdldHNNZXRhZGF0YSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuICYmICh0aGlzLmxhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24gPSBuKSwgZSA+IHRoaXMuTnMgJiYgKHRoaXMuTnMgPSBlKSwgXG4gICAgICAgIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgRm4odCkge1xuICAgICAgICB0aGlzLnhzLnNldCh0LnRhcmdldCwgdCk7XG4gICAgICAgIGNvbnN0IGUgPSB0LnRhcmdldElkO1xuICAgICAgICBlID4gdGhpcy5oaWdoZXN0VGFyZ2V0SWQgJiYgKHRoaXMuTXMgPSBuZXcgbG8oZSksIHRoaXMuaGlnaGVzdFRhcmdldElkID0gZSksIHQuc2VxdWVuY2VOdW1iZXIgPiB0aGlzLk5zICYmICh0aGlzLk5zID0gdC5zZXF1ZW5jZU51bWJlcik7XG4gICAgfVxuICAgIGFkZFRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5GbihlKSwgdGhpcy50YXJnZXRDb3VudCArPSAxLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZVRhcmdldERhdGEodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5GbihlKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXREYXRhKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMueHMuZGVsZXRlKGUudGFyZ2V0KSwgdGhpcy5rcy5JcyhlLnRhcmdldElkKSwgdGhpcy50YXJnZXRDb3VudCAtPSAxLCBcbiAgICAgICAgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXRzKHQsIGUsIG4pIHtcbiAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICBjb25zdCBpID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLnhzLmZvckVhY2goKChyLCBvKSA9PiB7XG4gICAgICAgICAgICBvLnNlcXVlbmNlTnVtYmVyIDw9IGUgJiYgbnVsbCA9PT0gbi5nZXQoby50YXJnZXRJZCkgJiYgKHRoaXMueHMuZGVsZXRlKHIpLCBpLnB1c2godGhpcy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBvLnRhcmdldElkKSksIFxuICAgICAgICAgICAgcysrKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKGkpLm5leHQoKCgpID0+IHMpKTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0Q291bnQodCkge1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh0aGlzLnRhcmdldENvdW50KTtcbiAgICB9XG4gICAgZ2V0VGFyZ2V0RGF0YSh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnhzLmdldChlKSB8fCBudWxsO1xuICAgICAgICByZXR1cm4gUnQucmVzb2x2ZShuKTtcbiAgICB9XG4gICAgYWRkTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMua3MuZ3MoZSwgbiksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgcmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5rcy5wcyhlLCBuKTtcbiAgICAgICAgY29uc3QgcyA9IHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUsIGkgPSBbXTtcbiAgICAgICAgcmV0dXJuIHMgJiYgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIGkucHVzaChzLm1hcmtQb3RlbnRpYWxseU9ycGhhbmVkKHQsIGUpKTtcbiAgICAgICAgfSkpLCBSdC53YWl0Rm9yKGkpO1xuICAgIH1cbiAgICByZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtzLklzKGUpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGdldE1hdGNoaW5nS2V5c0ZvclRhcmdldElkKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMua3MuRXMoZSk7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKG4pO1xuICAgIH1cbiAgICBjb250YWluc0tleSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKHRoaXMua3MuY29udGFpbnNLZXkoZSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBtZW1vcnktYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBvbmx5IGluIFJBTSBhbmRcbiAqIG5vdCBwZXJzaXN0ZWQgYWNyb3NzIHNlc3Npb25zLlxuICovXG5jbGFzcyBLbyB7XG4gICAgLyoqXG4gICAgICogVGhlIGNvbnN0cnVjdG9yIGFjY2VwdHMgYSBmYWN0b3J5IGZvciBjcmVhdGluZyBhIHJlZmVyZW5jZSBkZWxlZ2F0ZS4gVGhpc1xuICAgICAqIGFsbG93cyBib3RoIHRoZSBkZWxlZ2F0ZSBhbmQgdGhpcyBpbnN0YW5jZSB0byBoYXZlIHN0cm9uZyByZWZlcmVuY2VzIHRvXG4gICAgICogZWFjaCBvdGhlciB3aXRob3V0IGhhdmluZyBudWxsYWJsZSBmaWVsZHMgdGhhdCB3b3VsZCB0aGVuIG5lZWQgdG8gYmVcbiAgICAgKiBjaGVja2VkIG9yIGFzc2VydGVkIG9uIGV2ZXJ5IGFjY2Vzcy5cbiAgICAgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuJHMgPSB7fSwgdGhpcy5vdmVybGF5cyA9IHt9LCB0aGlzLk9zID0gbmV3IE90KDApLCB0aGlzLkZzID0gITEsIHRoaXMuRnMgPSAhMCwgXG4gICAgICAgIHRoaXMucmVmZXJlbmNlRGVsZWdhdGUgPSB0KHRoaXMpLCB0aGlzLkJzID0gbmV3IFVvKHRoaXMpO1xuICAgICAgICB0aGlzLmluZGV4TWFuYWdlciA9IG5ldyB6ciwgdGhpcy5yZW1vdGVEb2N1bWVudENhY2hlID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBMbyh0KTtcbiAgICAgICAgfSgodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLkxzKHQpKSksIHRoaXMuc2VyaWFsaXplciA9IG5ldyBhcihlKSwgdGhpcy5xcyA9IG5ldyBNbyh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBzdGFydCgpIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8gZHVyYWJsZSBzdGF0ZSB0byBlbnN1cmUgaXMgY2xvc2VkIG9uIHNodXRkb3duLlxuICAgICAgICByZXR1cm4gdGhpcy5GcyA9ICExLCBQcm9taXNlLnJlc29sdmUoKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZzO1xuICAgIH1cbiAgICBzZXREYXRhYmFzZURlbGV0ZWRMaXN0ZW5lcigpIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIHNldE5ldHdvcmtFbmFibGVkKCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgLy8gV2UgZG8gbm90IGN1cnJlbnRseSBzdXBwb3J0IGluZGljZXMgZm9yIG1lbW9yeSBwZXJzaXN0ZW5jZSwgc28gd2UgY2FuXG4gICAgICAgIC8vIHJldHVybiB0aGUgc2FtZSBzaGFyZWQgaW5zdGFuY2Ugb2YgdGhlIG1lbW9yeSBpbmRleCBtYW5hZ2VyLlxuICAgICAgICByZXR1cm4gdGhpcy5pbmRleE1hbmFnZXI7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0aGlzLm92ZXJsYXlzW3QudG9LZXkoKV07XG4gICAgICAgIHJldHVybiBlIHx8IChlID0gbmV3ICRvLCB0aGlzLm92ZXJsYXlzW3QudG9LZXkoKV0gPSBlKSwgZTtcbiAgICB9XG4gICAgZ2V0TXV0YXRpb25RdWV1ZSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gdGhpcy4kc1t0LnRvS2V5KCldO1xuICAgICAgICByZXR1cm4gbiB8fCAobiA9IG5ldyBCbyhlLCB0aGlzLnJlZmVyZW5jZURlbGVnYXRlKSwgdGhpcy4kc1t0LnRvS2V5KCldID0gbiksIG47XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CcztcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0QnVuZGxlQ2FjaGUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnFzO1xuICAgIH1cbiAgICBydW5UcmFuc2FjdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIE4oXCJNZW1vcnlQZXJzaXN0ZW5jZVwiLCBcIlN0YXJ0aW5nIHRyYW5zYWN0aW9uOlwiLCB0KTtcbiAgICAgICAgY29uc3QgcyA9IG5ldyBHbyh0aGlzLk9zLm5leHQoKSk7XG4gICAgICAgIHJldHVybiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLlVzKCksIG4ocykubmV4dCgodCA9PiB0aGlzLnJlZmVyZW5jZURlbGVnYXRlLktzKHMpLm5leHQoKCgpID0+IHQpKSkpLnRvUHJvbWlzZSgpLnRoZW4oKHQgPT4gKHMucmFpc2VPbkNvbW1pdHRlZEV2ZW50KCksIFxuICAgICAgICB0KSkpO1xuICAgIH1cbiAgICBHcyh0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5vcihPYmplY3QudmFsdWVzKHRoaXMuJHMpLm1hcCgobiA9PiAoKSA9PiBuLmNvbnRhaW5zS2V5KHQsIGUpKSkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNZW1vcnkgcGVyc2lzdGVuY2UgaXMgbm90IGFjdHVhbGx5IHRyYW5zYWN0aW9uYWwsIGJ1dCBmdXR1cmUgaW1wbGVtZW50YXRpb25zXG4gKiBtYXkgaGF2ZSB0cmFuc2FjdGlvbi1zY29wZWQgc3RhdGUuXG4gKi8gY2xhc3MgR28gZXh0ZW5kcyBBdCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmN1cnJlbnRTZXF1ZW5jZU51bWJlciA9IHQ7XG4gICAgfVxufVxuXG5jbGFzcyBRbyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgXG4gICAgICAgIC8qKiBUcmFja3MgYWxsIGRvY3VtZW50cyB0aGF0IGFyZSBhY3RpdmUgaW4gUXVlcnkgdmlld3MuICovXG4gICAgICAgIHRoaXMuUXMgPSBuZXcgT28sIFxuICAgICAgICAvKiogVGhlIGxpc3Qgb2YgZG9jdW1lbnRzIHRoYXQgYXJlIHBvdGVudGlhbGx5IEdDZWQgYWZ0ZXIgZWFjaCB0cmFuc2FjdGlvbi4gKi9cbiAgICAgICAgdGhpcy5qcyA9IG51bGw7XG4gICAgfVxuICAgIHN0YXRpYyB6cyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgUW8odCk7XG4gICAgfVxuICAgIGdldCBXcygpIHtcbiAgICAgICAgaWYgKHRoaXMuanMpIHJldHVybiB0aGlzLmpzO1xuICAgICAgICB0aHJvdyBPKCk7XG4gICAgfVxuICAgIGFkZFJlZmVyZW5jZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlFzLmFkZFJlZmVyZW5jZShuLCBlKSwgdGhpcy5Xcy5kZWxldGUobi50b1N0cmluZygpKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Rcy5yZW1vdmVSZWZlcmVuY2UobiwgZSksIHRoaXMuV3MuYWRkKG4udG9TdHJpbmcoKSksIFJ0LnJlc29sdmUoKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Xcy5hZGQoZS50b1N0cmluZygpKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVUYXJnZXQodCwgZSkge1xuICAgICAgICB0aGlzLlFzLklzKGUudGFyZ2V0SWQpLmZvckVhY2goKHQgPT4gdGhpcy5Xcy5hZGQodC50b1N0cmluZygpKSkpO1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpO1xuICAgICAgICByZXR1cm4gbi5nZXRNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBlLnRhcmdldElkKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHQuZm9yRWFjaCgodCA9PiB0aGlzLldzLmFkZCh0LnRvU3RyaW5nKCkpKSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBuLnJlbW92ZVRhcmdldERhdGEodCwgZSkpKTtcbiAgICB9XG4gICAgVXMoKSB7XG4gICAgICAgIHRoaXMuanMgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBLcyh0KSB7XG4gICAgICAgIC8vIFJlbW92ZSBuZXdseSBvcnBoYW5lZCBkb2N1bWVudHMuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKS5uZXdDaGFuZ2VCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2godGhpcy5XcywgKG4gPT4ge1xuICAgICAgICAgICAgY29uc3QgcyA9IGh0LmZyb21QYXRoKG4pO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuSHModCwgcykubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCBlLnJlbW92ZUVudHJ5KHMsIHJ0Lm1pbigpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+ICh0aGlzLmpzID0gbnVsbCwgZS5hcHBseSh0KSkpKTtcbiAgICB9XG4gICAgdXBkYXRlTGltYm9Eb2N1bWVudCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhzKHQsIGUpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgdCA/IHRoaXMuV3MuZGVsZXRlKGUudG9TdHJpbmcoKSkgOiB0aGlzLldzLmFkZChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIExzKHQpIHtcbiAgICAgICAgLy8gRm9yIGVhZ2VyIEdDLCB3ZSBkb24ndCBjYXJlIGFib3V0IHRoZSBkb2N1bWVudCBzaXplLCB0aGVyZSBhcmUgbm8gc2l6ZSB0aHJlc2hvbGRzLlxuICAgICAgICByZXR1cm4gMDtcbiAgICB9XG4gICAgSHModCwgZSkge1xuICAgICAgICByZXR1cm4gUnQub3IoWyAoKSA9PiBSdC5yZXNvbHZlKHRoaXMuUXMuY29udGFpbnNLZXkoZSkpLCAoKSA9PiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuY29udGFpbnNLZXkodCwgZSksICgpID0+IHRoaXMucGVyc2lzdGVuY2UuR3ModCwgZSkgXSk7XG4gICAgfVxufVxuXG5jbGFzcyBqbyB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdCwgdGhpcy5KcyA9IG5ldyBvcygodCA9PiBxdCh0LnBhdGgpKSwgKCh0LCBlKSA9PiB0LmlzRXF1YWwoZSkpKSwgXG4gICAgICAgIHRoaXMuZ2FyYmFnZUNvbGxlY3RvciA9IFRvKHRoaXMsIGUpO1xuICAgIH1cbiAgICBzdGF0aWMgenModCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IGpvKHQsIGUpO1xuICAgIH1cbiAgICAvLyBOby1vcHMsIHByZXNlbnQgc28gbWVtb3J5IHBlcnNpc3RlbmNlIGRvZXNuJ3QgaGF2ZSB0byBjYXJlIHdoaWNoIGRlbGVnYXRlXG4gICAgLy8gaXQgaGFzLlxuICAgIFVzKCkge31cbiAgICBLcyh0KSB7XG4gICAgICAgIHJldHVybiBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGZvckVhY2hUYXJnZXQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmZvckVhY2hUYXJnZXQodCwgZSk7XG4gICAgfVxuICAgIHpuKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuSm4odCk7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkuZ2V0VGFyZ2V0Q291bnQodCkubmV4dCgodCA9PiBlLm5leHQoKGUgPT4gdCArIGUpKSkpO1xuICAgIH1cbiAgICBKbih0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHRoaXMuV24odCwgKHQgPT4ge1xuICAgICAgICAgICAgZSsrO1xuICAgICAgICB9KSkubmV4dCgoKCkgPT4gZSkpO1xuICAgIH1cbiAgICBXbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBSdC5mb3JFYWNoKHRoaXMuSnMsICgobiwgcykgPT4gdGhpcy5Ybih0LCBuLCBzKS5uZXh0KCh0ID0+IHQgPyBSdC5yZXNvbHZlKCkgOiBlKHMpKSkpKTtcbiAgICB9XG4gICAgcmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkucmVtb3ZlVGFyZ2V0cyh0LCBlLCBuKTtcbiAgICB9XG4gICAgcmVtb3ZlT3JwaGFuZWREb2N1bWVudHModCwgZSkge1xuICAgICAgICBsZXQgbiA9IDA7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLnBlcnNpc3RlbmNlLmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgaSA9IHMubmV3Q2hhbmdlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiBzLkNzKHQsIChzID0+IHRoaXMuWG4odCwgcywgZSkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICB0IHx8IChuKyssIGkucmVtb3ZlRW50cnkocywgcnQubWluKCkpKTtcbiAgICAgICAgfSkpKSkubmV4dCgoKCkgPT4gaS5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4pKTtcbiAgICB9XG4gICAgbWFya1BvdGVudGlhbGx5T3JwaGFuZWQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Kcy5zZXQoZSwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHJlbW92ZVRhcmdldCh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlLndpdGhTZXF1ZW5jZU51bWJlcih0LmN1cnJlbnRTZXF1ZW5jZU51bWJlcik7XG4gICAgICAgIHJldHVybiB0aGlzLnBlcnNpc3RlbmNlLmdldFRhcmdldENhY2hlKCkudXBkYXRlVGFyZ2V0RGF0YSh0LCBuKTtcbiAgICB9XG4gICAgYWRkUmVmZXJlbmNlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuSnMuc2V0KG4sIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgUnQucmVzb2x2ZSgpO1xuICAgIH1cbiAgICByZW1vdmVSZWZlcmVuY2UodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gdGhpcy5Kcy5zZXQobiwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIHVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5Kcy5zZXQoZSwgdC5jdXJyZW50U2VxdWVuY2VOdW1iZXIpLCBSdC5yZXNvbHZlKCk7XG4gICAgfVxuICAgIExzKHQpIHtcbiAgICAgICAgbGV0IGUgPSB0LmtleS50b1N0cmluZygpLmxlbmd0aDtcbiAgICAgICAgcmV0dXJuIHQuaXNGb3VuZERvY3VtZW50KCkgJiYgKGUgKz0gemUodC5kYXRhLnZhbHVlKSksIGU7XG4gICAgfVxuICAgIFhuKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIFJ0Lm9yKFsgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5Hcyh0LCBlKSwgKCkgPT4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRUYXJnZXRDYWNoZSgpLmNvbnRhaW5zS2V5KHQsIGUpLCAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5Kcy5nZXQoZSk7XG4gICAgICAgICAgICByZXR1cm4gUnQucmVzb2x2ZSh2b2lkIDAgIT09IHQgJiYgdCA+IG4pO1xuICAgICAgICB9IF0pO1xuICAgIH1cbiAgICBnZXRDYWNoZVNpemUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5nZXRSZW1vdGVEb2N1bWVudENhY2hlKCkuZ2V0U2l6ZSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy4gKi8gY2xhc3Mgem8ge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgZGF0YWJhc2UgY3JlYXRpb24gYW5kIHNjaGVtYSB1cGdyYWRlcy5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCBpbiBwcm9kdWN0aW9uLCB0aGlzIG1ldGhvZCBpcyBvbmx5IGV2ZXIgdXNlZCB0byB1cGdyYWRlIHRoZSBzY2hlbWFcbiAgICAgKiB0byBTQ0hFTUFfVkVSU0lPTi4gRGlmZmVyZW50IHZhbHVlcyBvZiB0b1ZlcnNpb24gYXJlIG9ubHkgdXNlZCBmb3IgdGVzdGluZ1xuICAgICAqIGFuZCBsb2NhbCBmZWF0dXJlIGRldmVsb3BtZW50LlxuICAgICAqLyAgICBPKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgY29uc3QgaSA9IG5ldyBQdChcImNyZWF0ZU9yVXBncmFkZVwiLCBlKTtcbiAgICAgICAgbiA8IDEgJiYgcyA+PSAxICYmIChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwib3duZXJcIik7XG4gICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvblF1ZXVlc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogXCJ1c2VySWRcIlxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJ1c2VyTXV0YXRpb25zSW5kZXhcIiwgUXQsIHtcbiAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICB9KSwgdC5jcmVhdGVPYmplY3RTdG9yZShcImRvY3VtZW50TXV0YXRpb25zXCIpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogVXBncmFkZSBmdW5jdGlvbiB0byBtaWdyYXRlIHRoZSAnbXV0YXRpb25zJyBzdG9yZSBmcm9tIFYxIHRvIFYzLiBMb2Fkc1xuICogYW5kIHJld3JpdGVzIGFsbCBkYXRhLlxuICovICh0KSwgV28odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIH0odCkpO1xuICAgICAgICAvLyBNaWdyYXRpb24gMiB0byBwb3B1bGF0ZSB0aGUgdGFyZ2V0R2xvYmFsIG9iamVjdCBubyBsb25nZXIgbmVlZGVkIHNpbmNlXG4gICAgICAgIC8vIG1pZ3JhdGlvbiAzIHVuY29uZGl0aW9uYWxseSBjbGVhcnMgaXQuXG4gICAgICAgICAgICAgICAgbGV0IHIgPSBSdC5yZXNvbHZlKCk7XG4gICAgICAgIHJldHVybiBuIDwgMyAmJiBzID49IDMgJiYgKFxuICAgICAgICAvLyBCcmFuZCBuZXcgY2xpZW50cyBkb24ndCBuZWVkIHRvIGRyb3AgYW5kIHJlY3JlYXRlLS1vbmx5IGNsaWVudHMgdGhhdFxuICAgICAgICAvLyBwb3RlbnRpYWxseSBoYXZlIGNvcnJ1cHQgZGF0YS5cbiAgICAgICAgMCAhPT0gbiAmJiAoIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXREb2N1bWVudHNcIiksIHQuZGVsZXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRzXCIpLCB0LmRlbGV0ZU9iamVjdFN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpO1xuICAgICAgICB9KHQpLCBXbyh0KSksIHIgPSByLm5leHQoKCgpID0+IFxuICAgICAgICAvKipcbiAqIENyZWF0ZXMgdGhlIHRhcmdldCBnbG9iYWwgc2luZ2xldG9uIHJvdy5cbiAqXG4gKiBAcGFyYW0gdHhuIC0gVGhlIHZlcnNpb24gdXBncmFkZSB0cmFuc2FjdGlvbiBmb3IgaW5kZXhlZGRiXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuc3RvcmUoXCJ0YXJnZXRHbG9iYWxcIiksIG4gPSB7XG4gICAgICAgICAgICAgICAgaGlnaGVzdFRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgIGhpZ2hlc3RMaXN0ZW5TZXF1ZW5jZU51bWJlcjogMCxcbiAgICAgICAgICAgICAgICBsYXN0UmVtb3RlU25hcHNob3RWZXJzaW9uOiBydC5taW4oKS50b1RpbWVzdGFtcCgpLFxuICAgICAgICAgICAgICAgIHRhcmdldENvdW50OiAwXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGUucHV0KFwidGFyZ2V0R2xvYmFsS2V5XCIsIG4pO1xuICAgICAgICB9KGkpKSkpLCBuIDwgNCAmJiBzID49IDQgJiYgKDAgIT09IG4gJiYgKFxuICAgICAgICAvLyBTY2hlbWEgdmVyc2lvbiAzIHVzZXMgYXV0by1nZW5lcmF0ZWQga2V5cyB0byBnZW5lcmF0ZSBnbG9iYWxseSB1bmlxdWVcbiAgICAgICAgLy8gbXV0YXRpb24gYmF0Y2ggSURzICh0aGlzIHdhcyBwcmV2aW91c2x5IGVuc3VyZWQgaW50ZXJuYWxseSBieSB0aGVcbiAgICAgICAgLy8gY2xpZW50KS4gVG8gbWlncmF0ZSB0byB0aGUgbmV3IHNjaGVtYSwgd2UgaGF2ZSB0byByZWFkIGFsbCBtdXRhdGlvbnNcbiAgICAgICAgLy8gYW5kIHdyaXRlIHRoZW0gYmFjayBvdXQuIFdlIHByZXNlcnZlIHRoZSBleGlzdGluZyBiYXRjaCBJRHMgdG8gZ3VhcmFudGVlXG4gICAgICAgIC8vIGNvbnNpc3RlbmN5IHdpdGggb3RoZXIgb2JqZWN0IHN0b3Jlcy4gQW55IGZ1cnRoZXIgbXV0YXRpb24gYmF0Y2ggSURzIHdpbGxcbiAgICAgICAgLy8gYmUgYXV0by1nZW5lcmF0ZWQuXG4gICAgICAgIHIgPSByLm5leHQoKCgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBlLnN0b3JlKFwibXV0YXRpb25zXCIpLmooKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICB0LmRlbGV0ZU9iamVjdFN0b3JlKFwibXV0YXRpb25zXCIpO1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJtdXRhdGlvbnNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJhdGNoSWRcIixcbiAgICAgICAgICAgICAgICAgICAgYXV0b0luY3JlbWVudDogITBcbiAgICAgICAgICAgICAgICB9KS5jcmVhdGVJbmRleChcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBRdCwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICEwXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IGUuc3RvcmUoXCJtdXRhdGlvbnNcIiksIGkgPSBuLm1hcCgodCA9PiBzLnB1dCh0KSkpO1xuICAgICAgICAgICAgICAgIHJldHVybiBSdC53YWl0Rm9yKGkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KHQsIGkpKSkpLCByID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJjbGllbnRNZXRhZGF0YVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IFwiY2xpZW50SWRcIlxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSh0KTtcbiAgICAgICAgfSkpKSwgbiA8IDUgJiYgcyA+PSA1ICYmIChyID0gci5uZXh0KCgoKSA9PiB0aGlzLllzKGkpKSkpLCBuIDwgNiAmJiBzID49IDYgJiYgKHIgPSByLm5leHQoKCgpID0+IChmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRHbG9iYWxcIik7XG4gICAgICAgIH0odCksIHRoaXMuWHMoaSkpKSkpLCBuIDwgNyAmJiBzID49IDcgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuWnMoaSkpKSksIG4gPCA4ICYmIHMgPj0gOCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy50aSh0LCBpKSkpKSwgXG4gICAgICAgIG4gPCA5ICYmIHMgPj0gOSAmJiAociA9IHIubmV4dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gTXVsdGktVGFiIHVzZWQgdG8gbWFuYWdlIGl0cyBvd24gY2hhbmdlbG9nLCBidXQgdGhpcyBoYXMgYmVlbiBtb3ZlZFxuICAgICAgICAgICAgLy8gdG8gdGhlIERiUmVtb3RlRG9jdW1lbnQgb2JqZWN0IHN0b3JlIGl0c2VsZi4gU2luY2UgdGhlIHByZXZpb3VzIGNoYW5nZVxuICAgICAgICAgICAgLy8gbG9nIG9ubHkgY29udGFpbmVkIHRyYW5zaWVudCBkYXRhLCB3ZSBjYW4gZHJvcCBpdHMgb2JqZWN0IHN0b3JlLlxuICAgICAgICAgICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0Lm9iamVjdFN0b3JlTmFtZXMuY29udGFpbnMoXCJyZW1vdGVEb2N1bWVudENoYW5nZXNcIikgJiYgdC5kZWxldGVPYmplY3RTdG9yZShcInJlbW90ZURvY3VtZW50Q2hhbmdlc1wiKTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgICAgICAvLyBOb3RlOiBTY2hlbWEgdmVyc2lvbiA5IHVzZWQgdG8gY3JlYXRlIGEgcmVhZCB0aW1lIGluZGV4IGZvciB0aGVcbiAgICAgICAgICAgIC8vIFJlbW90ZURvY3VtZW50Q2FjaGUuIFRoaXMgaXMgbm93IGRvbmUgd2l0aCBzY2hlbWEgdmVyc2lvbiAxMy5cbiAgICAgICAgICAgICAgICB9KSkpLCBuIDwgMTAgJiYgcyA+PSAxMCAmJiAociA9IHIubmV4dCgoKCkgPT4gdGhpcy5laShpKSkpKSwgbiA8IDExICYmIHMgPj0gMTEgJiYgKHIgPSByLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImJ1bmRsZXNcIiwge1xuICAgICAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImJ1bmRsZUlkXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwibmFtZWRRdWVyaWVzXCIsIHtcbiAgICAgICAgICAgICAgICAgICAga2V5UGF0aDogXCJuYW1lXCJcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0odCk7XG4gICAgICAgIH0pKSksIG4gPCAxMiAmJiBzID49IDEyICYmIChyID0gci5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICAhZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiZG9jdW1lbnRPdmVybGF5c1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGtleVBhdGg6IG9lXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgZS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25QYXRoT3ZlcmxheUluZGV4XCIsIHVlLCB7XG4gICAgICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgICAgICB9KSwgZS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cE92ZXJsYXlJbmRleFwiLCBjZSwge1xuICAgICAgICAgICAgICAgICAgICB1bmlxdWU6ICExXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9KHQpO1xuICAgICAgICB9KSkpLCBuIDwgMTMgJiYgcyA+PSAxMyAmJiAociA9IHIubmV4dCgoKCkgPT4gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJyZW1vdGVEb2N1bWVudHNWMTRcIiwge1xuICAgICAgICAgICAgICAgIGtleVBhdGg6IEh0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGUuY3JlYXRlSW5kZXgoXCJkb2N1bWVudEtleUluZGV4XCIsIEp0KSwgZS5jcmVhdGVJbmRleChcImNvbGxlY3Rpb25Hcm91cEluZGV4XCIsIFl0KTtcbiAgICAgICAgfSh0KSkpLm5leHQoKCgpID0+IHRoaXMubmkodCwgaSkpKS5uZXh0KCgoKSA9PiB0LmRlbGV0ZU9iamVjdFN0b3JlKFwicmVtb3RlRG9jdW1lbnRzXCIpKSkpLCBcbiAgICAgICAgbiA8IDE0ICYmIHMgPj0gMTQgJiYgKHIgPSByLm5leHQoKCgpID0+IHRoaXMuc2kodCwgaSkpKSksIG4gPCAxNSAmJiBzID49IDE1ICYmIChyID0gci5uZXh0KCgoKSA9PiBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhDb25maWd1cmF0aW9uXCIsIHtcbiAgICAgICAgICAgICAgICBrZXlQYXRoOiBcImluZGV4SWRcIixcbiAgICAgICAgICAgICAgICBhdXRvSW5jcmVtZW50OiAhMFxuICAgICAgICAgICAgfSkuY3JlYXRlSW5kZXgoXCJjb2xsZWN0aW9uR3JvdXBJbmRleFwiLCBcImNvbGxlY3Rpb25Hcm91cFwiLCB7XG4gICAgICAgICAgICAgICAgdW5pcXVlOiAhMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0LmNyZWF0ZU9iamVjdFN0b3JlKFwiaW5kZXhTdGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogbmVcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwic2VxdWVuY2VOdW1iZXJJbmRleFwiLCBzZSwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdC5jcmVhdGVPYmplY3RTdG9yZShcImluZGV4RW50cmllc1wiLCB7XG4gICAgICAgICAgICAgICAga2V5UGF0aDogaWVcbiAgICAgICAgICAgIH0pLmNyZWF0ZUluZGV4KFwiZG9jdW1lbnRLZXlJbmRleFwiLCByZSwge1xuICAgICAgICAgICAgICAgIHVuaXF1ZTogITFcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KHQpKSkpLCByO1xuICAgIH1cbiAgICBYcyh0KSB7XG4gICAgICAgIGxldCBlID0gMDtcbiAgICAgICAgcmV0dXJuIHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIikuWCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGUgKz0gcm8obik7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0ge1xuICAgICAgICAgICAgICAgIGJ5dGVTaXplOiBlXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudEdsb2JhbFwiKS5wdXQoXCJyZW1vdGVEb2N1bWVudEdsb2JhbEtleVwiLCBuKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBZcyh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKFwibXV0YXRpb25RdWV1ZXNcIiksIG4gPSB0LnN0b3JlKFwibXV0YXRpb25zXCIpO1xuICAgICAgICByZXR1cm4gZS5qKCkubmV4dCgoZSA9PiBSdC5mb3JFYWNoKGUsIChlID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBJREJLZXlSYW5nZS5ib3VuZChbIGUudXNlcklkLCAtMSBdLCBbIGUudXNlcklkLCBlLmxhc3RBY2tub3dsZWRnZWRCYXRjaElkIF0pO1xuICAgICAgICAgICAgcmV0dXJuIG4uaihcInVzZXJNdXRhdGlvbnNJbmRleFwiLCBzKS5uZXh0KChuID0+IFJ0LmZvckVhY2gobiwgKG4gPT4ge1xuICAgICAgICAgICAgICAgIEYobi51c2VySWQgPT09IGUudXNlcklkKTtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gX3IodGhpcy5zZXJpYWxpemVyLCBuKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gaW8odCwgZS51c2VySWQsIHMpLm5leHQoKCgpID0+IHt9KSk7XG4gICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgfSkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEVuc3VyZXMgdGhhdCBldmVyeSBkb2N1bWVudCBpbiB0aGUgcmVtb3RlIGRvY3VtZW50IGNhY2hlIGhhcyBhIGNvcnJlc3BvbmRpbmcgc2VudGluZWwgcm93XG4gICAgICogd2l0aCBhIHNlcXVlbmNlIG51bWJlci4gTWlzc2luZyByb3dzIGFyZSBnaXZlbiB0aGUgbW9zdCByZWNlbnRseSB1c2VkIHNlcXVlbmNlIG51bWJlci5cbiAgICAgKi8gICAgWnModCkge1xuICAgICAgICBjb25zdCBlID0gdC5zdG9yZShcInRhcmdldERvY3VtZW50c1wiKSwgbiA9IHQuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNcIik7XG4gICAgICAgIHJldHVybiB0LnN0b3JlKFwidGFyZ2V0R2xvYmFsXCIpLmdldChcInRhcmdldEdsb2JhbEtleVwiKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBbXTtcbiAgICAgICAgICAgIHJldHVybiBuLlgoKChuLCBpKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgciA9IG5ldyB1dChuKSwgbyA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFsgMCwgcXQodCkgXTtcbiAgICAgICAgICAgICAgICB9KHIpO1xuICAgICAgICAgICAgICAgIHMucHVzaChlLmdldChvKS5uZXh0KChuID0+IG4gPyBSdC5yZXNvbHZlKCkgOiAobiA9PiBlLnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIHRhcmdldElkOiAwLFxuICAgICAgICAgICAgICAgICAgICBwYXRoOiBxdChuKSxcbiAgICAgICAgICAgICAgICAgICAgc2VxdWVuY2VOdW1iZXI6IHQuaGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXG4gICAgICAgICAgICAgICAgfSkpKHIpKSkpO1xuICAgICAgICAgICAgfSkpLm5leHQoKCgpID0+IFJ0LndhaXRGb3IocykpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0aSh0LCBlKSB7XG4gICAgICAgIC8vIENyZWF0ZSB0aGUgaW5kZXguXG4gICAgICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJjb2xsZWN0aW9uUGFyZW50c1wiLCB7XG4gICAgICAgICAgICBrZXlQYXRoOiBlZVxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgbiA9IGUuc3RvcmUoXCJjb2xsZWN0aW9uUGFyZW50c1wiKSwgcyA9IG5ldyBXciwgaSA9IHQgPT4ge1xuICAgICAgICAgICAgaWYgKHMuYWRkKHQpKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQubGFzdFNlZ21lbnQoKSwgcyA9IHQucG9wTGFzdCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnB1dCh7XG4gICAgICAgICAgICAgICAgICAgIGNvbGxlY3Rpb25JZDogZSxcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50OiBxdChzKVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBIZWxwZXIgdG8gYWRkIGFuIGluZGV4IGVudHJ5IGlmZiB3ZSBoYXZlbid0IGFscmVhZHkgd3JpdHRlbiBpdC5cbiAgICAgICAgICAgICAgICAvLyBJbmRleCBleGlzdGluZyByZW1vdGUgZG9jdW1lbnRzLlxuICAgICAgICByZXR1cm4gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKS5YKHtcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgodCwgZSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbiA9IG5ldyB1dCh0KTtcbiAgICAgICAgICAgIHJldHVybiBpKG4ucG9wTGFzdCgpKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IGUuc3RvcmUoXCJkb2N1bWVudE11dGF0aW9uc1wiKS5YKHtcbiAgICAgICAgICAgIFk6ICEwXG4gICAgICAgIH0sICgoW3QsIGUsIG5dLCBzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCByID0gR3QoZSk7XG4gICAgICAgICAgICByZXR1cm4gaShyLnBvcExhc3QoKSk7XG4gICAgICAgIH0pKSkpO1xuICAgIH1cbiAgICBlaSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0LnN0b3JlKFwidGFyZ2V0c1wiKTtcbiAgICAgICAgcmV0dXJuIGUuWCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBtcihuKSwgaSA9IGdyKHRoaXMuc2VyaWFsaXplciwgcyk7XG4gICAgICAgICAgICByZXR1cm4gZS5wdXQoaSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgbmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gZS5zdG9yZShcInJlbW90ZURvY3VtZW50c1wiKSwgcyA9IFtdO1xuICAgICAgICByZXR1cm4gbi5YKCgodCwgbikgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGUuc3RvcmUoXCJyZW1vdGVEb2N1bWVudHNWMTRcIiksIHIgPSAobyA9IG4sIG8uZG9jdW1lbnQgPyBuZXcgaHQodXQuZnJvbVN0cmluZyhvLmRvY3VtZW50Lm5hbWUpLnBvcEZpcnN0KDUpKSA6IG8ubm9Eb2N1bWVudCA/IGh0LmZyb21TZWdtZW50cyhvLm5vRG9jdW1lbnQucGF0aCkgOiBvLnVua25vd25Eb2N1bWVudCA/IGh0LmZyb21TZWdtZW50cyhvLnVua25vd25Eb2N1bWVudC5wYXRoKSA6IE8oKSkucGF0aC50b0FycmF5KCk7XG4gICAgICAgICAgICB2YXIgbztcbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICAgICAgICAgICAgY29uc3QgdSA9IHtcbiAgICAgICAgICAgICAgICBwcmVmaXhQYXRoOiByLnNsaWNlKDAsIHIubGVuZ3RoIC0gMiksXG4gICAgICAgICAgICAgICAgY29sbGVjdGlvbkdyb3VwOiByW3IubGVuZ3RoIC0gMl0sXG4gICAgICAgICAgICAgICAgZG9jdW1lbnRJZDogcltyLmxlbmd0aCAtIDFdLFxuICAgICAgICAgICAgICAgIHJlYWRUaW1lOiBuLnJlYWRUaW1lIHx8IFsgMCwgMCBdLFxuICAgICAgICAgICAgICAgIHVua25vd25Eb2N1bWVudDogbi51bmtub3duRG9jdW1lbnQsXG4gICAgICAgICAgICAgICAgbm9Eb2N1bWVudDogbi5ub0RvY3VtZW50LFxuICAgICAgICAgICAgICAgIGRvY3VtZW50OiBuLmRvY3VtZW50LFxuICAgICAgICAgICAgICAgIGhhc0NvbW1pdHRlZE11dGF0aW9uczogISFuLmhhc0NvbW1pdHRlZE11dGF0aW9uc1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHMucHVzaChpLnB1dCh1KSk7XG4gICAgICAgIH0pKS5uZXh0KCgoKSA9PiBSdC53YWl0Rm9yKHMpKSk7XG4gICAgfVxuICAgIHNpKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IGUuc3RvcmUoXCJtdXRhdGlvbnNcIiksIHMgPSBQbyh0aGlzLnNlcmlhbGl6ZXIpLCBpID0gbmV3IEtvKFFvLnpzLCB0aGlzLnNlcmlhbGl6ZXIuZmUpO1xuICAgICAgICByZXR1cm4gbi5qKCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIHZhciBlO1xuICAgICAgICAgICAgICAgIGxldCBzID0gbnVsbCAhPT0gKGUgPSBuLmdldCh0LnVzZXJJZCkpICYmIHZvaWQgMCAhPT0gZSA/IGUgOiBncygpO1xuICAgICAgICAgICAgICAgIF9yKHRoaXMuc2VyaWFsaXplciwgdCkua2V5cygpLmZvckVhY2goKHQgPT4gcyA9IHMuYWRkKHQpKSksIG4uc2V0KHQudXNlcklkLCBzKTtcbiAgICAgICAgICAgIH0pKSwgUnQuZm9yRWFjaChuLCAoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gbmV3IFYobiksIG8gPSBSci5kZSh0aGlzLnNlcmlhbGl6ZXIsIHIpLCB1ID0gaS5nZXRJbmRleE1hbmFnZXIociksIGMgPSBvby5kZShyLCB0aGlzLnNlcmlhbGl6ZXIsIHUsIGkucmVmZXJlbmNlRGVsZWdhdGUpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuZXcga28ocywgYywgbywgdSkucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXMobmV3IHdlKGUsIE90LmN0KSwgdCkubmV4dCgpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBXbyh0KSB7XG4gICAgdC5jcmVhdGVPYmplY3RTdG9yZShcInRhcmdldERvY3VtZW50c1wiLCB7XG4gICAgICAgIGtleVBhdGg6IFp0XG4gICAgfSkuY3JlYXRlSW5kZXgoXCJkb2N1bWVudFRhcmdldHNJbmRleFwiLCB0ZSwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSk7XG4gICAgLy8gTk9URTogVGhpcyBpcyB1bmlxdWUgb25seSBiZWNhdXNlIHRoZSBUYXJnZXRJZCBpcyB0aGUgc3VmZml4LlxuICAgIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRzXCIsIHtcbiAgICAgICAga2V5UGF0aDogXCJ0YXJnZXRJZFwiXG4gICAgfSkuY3JlYXRlSW5kZXgoXCJxdWVyeVRhcmdldHNJbmRleFwiLCBYdCwge1xuICAgICAgICB1bmlxdWU6ICEwXG4gICAgfSksIHQuY3JlYXRlT2JqZWN0U3RvcmUoXCJ0YXJnZXRHbG9iYWxcIik7XG59XG5cbmNvbnN0IEhvID0gXCJGYWlsZWQgdG8gb2J0YWluIGV4Y2x1c2l2ZSBhY2Nlc3MgdG8gdGhlIHBlcnNpc3RlbmNlIGxheWVyLiBUbyBhbGxvdyBzaGFyZWQgYWNjZXNzLCBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uIGhhcyB0byBiZSBlbmFibGVkIGluIGFsbCB0YWJzLiBJZiB5b3UgYXJlIHVzaW5nIGBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjp0cnVlYCwgbWFrZSBzdXJlIHRoYXQgb25seSBvbmUgdGFiIGhhcyBwZXJzaXN0ZW5jZSBlbmFibGVkIGF0IGFueSBnaXZlbiB0aW1lLlwiO1xuXG4vKipcbiAqIE9sZGVzdCBhY2NlcHRhYmxlIGFnZSBpbiBtaWxsaXNlY29uZHMgZm9yIGNsaWVudCBtZXRhZGF0YSBiZWZvcmUgdGhlIGNsaWVudFxuICogaXMgY29uc2lkZXJlZCBpbmFjdGl2ZSBhbmQgaXRzIGFzc29jaWF0ZWQgZGF0YSBpcyBnYXJiYWdlIGNvbGxlY3RlZC5cbiAqL1xuLyoqXG4gKiBBbiBJbmRleGVkREItYmFja2VkIGluc3RhbmNlIG9mIFBlcnNpc3RlbmNlLiBEYXRhIGlzIHN0b3JlZCBwZXJzaXN0ZW50bHlcbiAqIGFjcm9zcyBzZXNzaW9ucy5cbiAqXG4gKiBPbiBXZWIgb25seSwgdGhlIEZpcmVzdG9yZSBTREtzIHN1cHBvcnQgc2hhcmVkIGFjY2VzcyB0byBpdHMgcGVyc2lzdGVuY2VcbiAqIGxheWVyLiBUaGlzIGFsbG93cyBtdWx0aXBsZSBicm93c2VyIHRhYnMgdG8gcmVhZCBhbmQgd3JpdGUgdG8gSW5kZXhlZERiIGFuZFxuICogdG8gc3luY2hyb25pemUgc3RhdGUgZXZlbiB3aXRob3V0IG5ldHdvcmsgY29ubmVjdGl2aXR5LiBTaGFyZWQgYWNjZXNzIGlzXG4gKiBjdXJyZW50bHkgb3B0aW9uYWwgYW5kIG5vdCBlbmFibGVkIHVubGVzcyBhbGwgY2xpZW50cyBpbnZva2VcbiAqIGBlbmFibGVQZXJzaXN0ZW5jZSgpYCB3aXRoIGB7c3luY2hyb25pemVUYWJzOnRydWV9YC5cbiAqXG4gKiBJbiBtdWx0aS10YWIgbW9kZSwgaWYgbXVsdGlwbGUgY2xpZW50cyBhcmUgYWN0aXZlIGF0IHRoZSBzYW1lIHRpbWUsIHRoZSBTREtcbiAqIHdpbGwgZGVzaWduYXRlIG9uZSBjbGllbnQgYXMgdGhlIOKAnHByaW1hcnkgY2xpZW504oCdLiBBbiBlZmZvcnQgaXMgbWFkZSB0byBwaWNrXG4gKiBhIHZpc2libGUsIG5ldHdvcmstY29ubmVjdGVkIGFuZCBhY3RpdmUgY2xpZW50LCBhbmQgdGhpcyBjbGllbnQgaXNcbiAqIHJlc3BvbnNpYmxlIGZvciBsZXR0aW5nIG90aGVyIGNsaWVudHMga25vdyBhYm91dCBpdHMgcHJlc2VuY2UuIFRoZSBwcmltYXJ5XG4gKiBjbGllbnQgd3JpdGVzIGEgdW5pcXVlIGNsaWVudC1nZW5lcmF0ZWQgaWRlbnRpZmllciAodGhlIGNsaWVudCBJRCkgdG9cbiAqIEluZGV4ZWREYuKAmXMg4oCcb3duZXLigJ0gc3RvcmUgZXZlcnkgNCBzZWNvbmRzLiBJZiB0aGUgcHJpbWFyeSBjbGllbnQgZmFpbHMgdG9cbiAqIHVwZGF0ZSB0aGlzIGVudHJ5LCBhbm90aGVyIGNsaWVudCBjYW4gYWNxdWlyZSB0aGUgbGVhc2UgYW5kIHRha2Ugb3ZlciBhc1xuICogcHJpbWFyeS5cbiAqXG4gKiBTb21lIHBlcnNpc3RlbmNlIG9wZXJhdGlvbnMgaW4gdGhlIFNESyBhcmUgZGVzaWduYXRlZCBhcyBwcmltYXJ5LWNsaWVudCBvbmx5XG4gKiBvcGVyYXRpb25zLiBUaGlzIGluY2x1ZGVzIHRoZSBhY2tub3dsZWRnbWVudCBvZiBtdXRhdGlvbnMgYW5kIGFsbCB1cGRhdGVzIG9mXG4gKiByZW1vdGUgZG9jdW1lbnRzLiBUaGUgZWZmZWN0cyBvZiB0aGVzZSBvcGVyYXRpb25zIGFyZSB3cml0dGVuIHRvIHBlcnNpc3RlbmNlXG4gKiBhbmQgdGhlbiBicm9hZGNhc3QgdG8gb3RoZXIgdGFicyB2aWEgTG9jYWxTdG9yYWdlIChzZWVcbiAqIGBXZWJTdG9yYWdlU2hhcmVkQ2xpZW50U3RhdGVgKSwgd2hpY2ggdGhlbiByZWZyZXNoIHRoZWlyIHN0YXRlIGZyb21cbiAqIHBlcnNpc3RlbmNlLlxuICpcbiAqIFNpbWlsYXJseSwgdGhlIHByaW1hcnkgY2xpZW50IGxpc3RlbnMgdG8gbm90aWZpY2F0aW9ucyBzZW50IGJ5IHNlY29uZGFyeVxuICogY2xpZW50cyB0byBkaXNjb3ZlciBwZXJzaXN0ZW5jZSBjaGFuZ2VzIHdyaXR0ZW4gYnkgc2Vjb25kYXJ5IGNsaWVudHMsIHN1Y2ggYXNcbiAqIHRoZSBhZGRpdGlvbiBvZiBuZXcgbXV0YXRpb25zIGFuZCBxdWVyeSB0YXJnZXRzLlxuICpcbiAqIElmIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZCBhbmQgYW5vdGhlciB0YWIgYWxyZWFkeSBvYnRhaW5lZCB0aGUgcHJpbWFyeVxuICogbGVhc2UsIEluZGV4ZWREYlBlcnNpc3RlbmNlIGVudGVycyBhIGZhaWxlZCBzdGF0ZSBhbmQgYWxsIHN1YnNlcXVlbnRcbiAqIG9wZXJhdGlvbnMgd2lsbCBhdXRvbWF0aWNhbGx5IGZhaWwuXG4gKlxuICogQWRkaXRpb25hbGx5LCB0aGVyZSBpcyBhbiBvcHRpbWl6YXRpb24gc28gdGhhdCB3aGVuIGEgdGFiIGlzIGNsb3NlZCwgdGhlXG4gKiBwcmltYXJ5IGxlYXNlIGlzIHJlbGVhc2VkIGltbWVkaWF0ZWx5ICh0aGlzIGlzIGVzcGVjaWFsbHkgaW1wb3J0YW50IHRvIG1ha2VcbiAqIHN1cmUgdGhhdCBhIHJlZnJlc2hlZCB0YWIgaXMgYWJsZSB0byBpbW1lZGlhdGVseSByZS1hY3F1aXJlIHRoZSBwcmltYXJ5XG4gKiBsZWFzZSkuIFVuZm9ydHVuYXRlbHksIEluZGV4ZWREQiBjYW5ub3QgYmUgcmVsaWFibHkgdXNlZCBpbiB3aW5kb3cudW5sb2FkXG4gKiBzaW5jZSBpdCBpcyBhbiBhc3luY2hyb25vdXMgQVBJLiBTbyBpbiBhZGRpdGlvbiB0byBhdHRlbXB0aW5nIHRvIGdpdmUgdXAgdGhlXG4gKiBsZWFzZSwgdGhlIGxlYXNlaG9sZGVyIHdyaXRlcyBpdHMgY2xpZW50IElEIHRvIGEgXCJ6b21iaWVkQ2xpZW50XCIgZW50cnkgaW5cbiAqIExvY2FsU3RvcmFnZSB3aGljaCBhY3RzIGFzIGFuIGluZGljYXRvciB0aGF0IGFub3RoZXIgdGFiIHNob3VsZCBnbyBhaGVhZCBhbmRcbiAqIHRha2UgdGhlIHByaW1hcnkgbGVhc2UgaW1tZWRpYXRlbHkgcmVnYXJkbGVzcyBvZiB0aGUgY3VycmVudCBsZWFzZSB0aW1lc3RhbXAuXG4gKlxuICogVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSBgc3luY2hyb25pemVUYWJzYCBzZWN0aW9uIHdoZW4gbXVsdGktdGFiIGlzIG5vXG4gKiBsb25nZXIgb3B0aW9uYWwuXG4gKi9cbmNsYXNzIEpvIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBXaGV0aGVyIHRvIHN5bmNocm9uaXplIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgbXVsdGlwbGUgdGFicyBhbmQgc2hhcmVcbiAgICAgKiBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UuXG4gICAgICovXG4gICAgdCwgZSwgbiwgcywgaSwgciwgbywgdSwgYywgXG4gICAgLyoqXG4gICAgICogSWYgc2V0IHRvIHRydWUsIGZvcmNlZnVsbHkgb2J0YWlucyBkYXRhYmFzZSBhY2Nlc3MuIEV4aXN0aW5nIHRhYnMgd2lsbFxuICAgICAqIG5vIGxvbmdlciBiZSBhYmxlIHRvIGFjY2VzcyBJbmRleGVkREIuXG4gICAgICovXG4gICAgYSwgaCA9IDE1KSB7XG4gICAgICAgIGlmICh0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uID0gdCwgdGhpcy5wZXJzaXN0ZW5jZUtleSA9IGUsIHRoaXMuY2xpZW50SWQgPSBuLCBcbiAgICAgICAgdGhpcy5paSA9IGksIHRoaXMud2luZG93ID0gciwgdGhpcy5kb2N1bWVudCA9IG8sIHRoaXMucmkgPSBjLCB0aGlzLm9pID0gYSwgdGhpcy51aSA9IGgsIFxuICAgICAgICB0aGlzLk9zID0gbnVsbCwgdGhpcy5GcyA9ICExLCB0aGlzLmlzUHJpbWFyeSA9ICExLCB0aGlzLm5ldHdvcmtFbmFibGVkID0gITAsIFxuICAgICAgICAvKiogT3VyIHdpbmRvdy51bmxvYWQgaGFuZGxlciwgaWYgcmVnaXN0ZXJlZC4gKi9cbiAgICAgICAgdGhpcy5jaSA9IG51bGwsIHRoaXMuaW5Gb3JlZ3JvdW5kID0gITEsIFxuICAgICAgICAvKiogT3VyICd2aXNpYmlsaXR5Y2hhbmdlJyBsaXN0ZW5lciBpZiByZWdpc3RlcmVkLiAqL1xuICAgICAgICB0aGlzLmFpID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgY2xpZW50IG1ldGFkYXRhIHJlZnJlc2ggdGFzay4gKi9cbiAgICAgICAgdGhpcy5oaSA9IG51bGwsIFxuICAgICAgICAvKiogVGhlIGxhc3QgdGltZSB3ZSBnYXJiYWdlIGNvbGxlY3RlZCB0aGUgY2xpZW50IG1ldGFkYXRhIG9iamVjdCBzdG9yZS4gKi9cbiAgICAgICAgdGhpcy5saSA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwgXG4gICAgICAgIC8qKiBBIGxpc3RlbmVyIHRvIG5vdGlmeSBvbiBwcmltYXJ5IHN0YXRlIGNoYW5nZXMuICovXG4gICAgICAgIHRoaXMuZmkgPSB0ID0+IFByb21pc2UucmVzb2x2ZSgpLCAhSm8uRCgpKSB0aHJvdyBuZXcgVShxLlVOSU1QTEVNRU5URUQsIFwiVGhpcyBwbGF0Zm9ybSBpcyBlaXRoZXIgbWlzc2luZyBJbmRleGVkREIgb3IgaXMga25vd24gdG8gaGF2ZSBhbiBpbmNvbXBsZXRlIGltcGxlbWVudGF0aW9uLiBPZmZsaW5lIHBlcnNpc3RlbmNlIGhhcyBiZWVuIGRpc2FibGVkLlwiKTtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSA9IG5ldyBFbyh0aGlzLCBzKSwgdGhpcy5kaSA9IGUgKyBcIm1haW5cIiwgdGhpcy5zZXJpYWxpemVyID0gbmV3IGFyKHUpLCBcbiAgICAgICAgdGhpcy53aSA9IG5ldyBidCh0aGlzLmRpLCB0aGlzLnVpLCBuZXcgem8odGhpcy5zZXJpYWxpemVyKSksIHRoaXMuQnMgPSBuZXcgZm8odGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSwgdGhpcy5zZXJpYWxpemVyKSwgXG4gICAgICAgIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZSA9IFBvKHRoaXMuc2VyaWFsaXplciksIHRoaXMucXMgPSBuZXcgRXIsIHRoaXMud2luZG93ICYmIHRoaXMud2luZG93LmxvY2FsU3RvcmFnZSA/IHRoaXMuX2kgPSB0aGlzLndpbmRvdy5sb2NhbFN0b3JhZ2UgOiAodGhpcy5faSA9IG51bGwsIFxuICAgICAgICAhMSA9PT0gYSAmJiBrKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJMb2NhbFN0b3JhZ2UgaXMgdW5hdmFpbGFibGUuIEFzIGEgcmVzdWx0LCBwZXJzaXN0ZW5jZSBtYXkgbm90IHdvcmsgcmVsaWFibHkuIEluIHBhcnRpY3VsYXIgZW5hYmxlUGVyc2lzdGVuY2UoKSBjb3VsZCBmYWlsIGltbWVkaWF0ZWx5IGFmdGVyIHJlZnJlc2hpbmcgdGhlIHBhZ2UuXCIpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXR0ZW1wdCB0byBzdGFydCBJbmRleGVkRGIgcGVyc2lzdGVuY2UuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBXaGV0aGVyIHBlcnNpc3RlbmNlIHdhcyBlbmFibGVkLlxuICAgICAqLyAgICBzdGFydCgpIHtcbiAgICAgICAgLy8gTk9URTogVGhpcyBpcyBleHBlY3RlZCB0byBmYWlsIHNvbWV0aW1lcyAoaW4gdGhlIGNhc2Ugb2YgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gYWxyZWFkeSBoYXZpbmcgdGhlIHBlcnNpc3RlbmNlIGxvY2spLCBzbyBpdCdzIHRoZSBmaXJzdCB0aGluZyB3ZSBzaG91bGRcbiAgICAgICAgLy8gZG8uXG4gICAgICAgIHJldHVybiB0aGlzLm1pKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUHJpbWFyeSAmJiAhdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAvLyBGYWlsIGBzdGFydCgpYCBpZiBgc3luY2hyb25pemVUYWJzYCBpcyBkaXNhYmxlZCBhbmQgd2UgY2Fubm90XG4gICAgICAgICAgICAvLyBvYnRhaW4gdGhlIHByaW1hcnkgbGVhc2UuXG4gICAgICAgICAgICB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIEhvKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdpKCksIHRoaXMueWkoKSwgdGhpcy5waSgpLCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwiZ2V0SGlnaGVzdExpc3RlblNlcXVlbmNlTnVtYmVyXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gdGhpcy5Ccy5nZXRIaWdoZXN0U2VxdWVuY2VOdW1iZXIodCkpKTtcbiAgICAgICAgfSkpLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgdGhpcy5PcyA9IG5ldyBPdCh0LCB0aGlzLnJpKTtcbiAgICAgICAgfSkpLnRoZW4oKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMuRnMgPSAhMDtcbiAgICAgICAgfSkpLmNhdGNoKCh0ID0+ICh0aGlzLndpICYmIHRoaXMud2kuY2xvc2UoKSwgUHJvbWlzZS5yZWplY3QodCkpKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgcHJpbWFyeSBzdGF0ZSBvZiB0aGVcbiAgICAgKiBpbnN0YW5jZSBjaGFuZ2VzLiBVcG9uIHJlZ2lzdGVyaW5nLCB0aGlzIGxpc3RlbmVyIGlzIGludm9rZWQgaW1tZWRpYXRlbHlcbiAgICAgKiB3aXRoIHRoZSBjdXJyZW50IHByaW1hcnkgc3RhdGUuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICBJaSh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZpID0gYXN5bmMgZSA9PiB7XG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydGVkKSByZXR1cm4gdChlKTtcbiAgICAgICAgfSwgdCh0aGlzLmlzUHJpbWFyeSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBhIGxpc3RlbmVyIHRoYXQgZ2V0cyBjYWxsZWQgd2hlbiB0aGUgZGF0YWJhc2UgcmVjZWl2ZXMgYVxuICAgICAqIHZlcnNpb24gY2hhbmdlIGV2ZW50IGluZGljYXRpbmcgdGhhdCBpdCBoYXMgZGVsZXRlZC5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKHQpIHtcbiAgICAgICAgdGhpcy53aS5CKChhc3luYyBlID0+IHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGFuIGF0dGVtcHQgaXMgbWFkZSB0byBkZWxldGUgSW5kZXhlZERCLlxuICAgICAgICAgICAgbnVsbCA9PT0gZS5uZXdWZXJzaW9uICYmIGF3YWl0IHQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGp1c3RzIHRoZSBjdXJyZW50IG5ldHdvcmsgc3RhdGUgaW4gdGhlIGNsaWVudCdzIG1ldGFkYXRhLCBwb3RlbnRpYWxseVxuICAgICAqIGFmZmVjdGluZyB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICAgKlxuICAgICAqIFBPUlRJTkcgTk9URTogVGhpcyBpcyBvbmx5IHVzZWQgZm9yIFdlYiBtdWx0aS10YWIuXG4gICAgICovICAgIHNldE5ldHdvcmtFbmFibGVkKHQpIHtcbiAgICAgICAgdGhpcy5uZXR3b3JrRW5hYmxlZCAhPT0gdCAmJiAodGhpcy5uZXR3b3JrRW5hYmxlZCA9IHQsIFxuICAgICAgICAvLyBTY2hlZHVsZSBhIHByaW1hcnkgbGVhc2UgcmVmcmVzaCBmb3IgaW1tZWRpYXRlIGV4ZWN1dGlvbi4gVGhlIGV2ZW50dWFsXG4gICAgICAgIC8vIGxlYXNlIHVwZGF0ZSB3aWxsIGJlIHByb3BhZ2F0ZWQgdmlhIGBwcmltYXJ5U3RhdGVMaXN0ZW5lcmAuXG4gICAgICAgIHRoaXMuaWkuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5zdGFydGVkICYmIGF3YWl0IHRoaXMubWkoKTtcbiAgICAgICAgfSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgY2xpZW50IG1ldGFkYXRhIGluIEluZGV4ZWREYiBhbmQgYXR0ZW1wdHMgdG8gZWl0aGVyIG9idGFpbiBvclxuICAgICAqIGV4dGVuZCB0aGUgcHJpbWFyeSBsZWFzZSBmb3IgdGhlIGxvY2FsIGNsaWVudC4gQXN5bmNocm9ub3VzbHkgbm90aWZpZXMgdGhlXG4gICAgICogcHJpbWFyeSBzdGF0ZSBsaXN0ZW5lciBpZiB0aGUgY2xpZW50IGVpdGhlciBuZXdseSBvYnRhaW5lZCBvciByZWxlYXNlZCBpdHNcbiAgICAgKiBwcmltYXJ5IGxlYXNlLlxuICAgICAqLyAgICBtaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJ1cGRhdGVDbGllbnRNZXRhZGF0YUFuZFRyeUJlY29tZVByaW1hcnlcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gWG8odCkucHV0KHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLmNsaWVudElkLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpLFxuICAgICAgICAgICAgbmV0d29ya0VuYWJsZWQ6IHRoaXMubmV0d29ya0VuYWJsZWQsXG4gICAgICAgICAgICBpbkZvcmVncm91bmQ6IHRoaXMuaW5Gb3JlZ3JvdW5kXG4gICAgICAgIH0pLm5leHQoKCgpID0+IHtcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJpbWFyeSkgcmV0dXJuIHRoaXMuVGkodCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdCB8fCAodGhpcy5pc1ByaW1hcnkgPSAhMSwgdGhpcy5paS5lbnF1ZXVlUmV0cnlhYmxlKCgoKSA9PiB0aGlzLmZpKCExKSkpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLm5leHQoKCgpID0+IHRoaXMuRWkodCkpKS5uZXh0KChlID0+IHRoaXMuaXNQcmltYXJ5ICYmICFlID8gdGhpcy5BaSh0KS5uZXh0KCgoKSA9PiAhMSkpIDogISFlICYmIHRoaXMudmkodCkubmV4dCgoKCkgPT4gITApKSkpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgaWYgKER0KHQpKSBcbiAgICAgICAgICAgIC8vIFByb2NlZWQgd2l0aCB0aGUgZXhpc3Rpbmcgc3RhdGUuIEFueSBzdWJzZXF1ZW50IGFjY2VzcyB0b1xuICAgICAgICAgICAgLy8gSW5kZXhlZERCIHdpbGwgdmVyaWZ5IHRoZSBsZWFzZS5cbiAgICAgICAgICAgIHJldHVybiBOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJGYWlsZWQgdG8gZXh0ZW5kIG93bmVyIGxlYXNlOiBcIiwgdCksIHRoaXMuaXNQcmltYXJ5O1xuICAgICAgICAgICAgaWYgKCF0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uKSB0aHJvdyB0O1xuICAgICAgICAgICAgcmV0dXJuIE4oXCJJbmRleGVkRGJQZXJzaXN0ZW5jZVwiLCBcIlJlbGVhc2luZyBvd25lciBsZWFzZSBhZnRlciBlcnJvciBkdXJpbmcgbGVhc2UgcmVmcmVzaFwiLCB0KSwgXG4gICAgICAgICAgICAvKiBpc1ByaW1hcnk9ICovICExO1xuICAgICAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmlzUHJpbWFyeSAhPT0gdCAmJiB0aGlzLmlpLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuZmkodCkpKSwgdGhpcy5pc1ByaW1hcnkgPSB0O1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFRpKHQpIHtcbiAgICAgICAgcmV0dXJuIFlvKHQpLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4gUnQucmVzb2x2ZSh0aGlzLlJpKHQpKSkpO1xuICAgIH1cbiAgICBQaSh0KSB7XG4gICAgICAgIHJldHVybiBYbyh0KS5kZWxldGUodGhpcy5jbGllbnRJZCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIElmIHRoZSBnYXJiYWdlIGNvbGxlY3Rpb24gdGhyZXNob2xkIGhhcyBwYXNzZWQsIHBydW5lcyB0aGVcbiAgICAgKiBSZW1vdGVEb2N1bWVudENoYW5nZXMgYW5kIHRoZSBDbGllbnRNZXRhZGF0YSBzdG9yZSBiYXNlZCBvbiB0aGUgbGFzdCB1cGRhdGVcbiAgICAgKiB0aW1lIG9mIGFsbCBjbGllbnRzLlxuICAgICAqLyAgICBhc3luYyBiaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNQcmltYXJ5ICYmICF0aGlzLlZpKHRoaXMubGksIDE4ZTUpKSB7XG4gICAgICAgICAgICB0aGlzLmxpID0gRGF0ZS5ub3coKTtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLnJ1blRyYW5zYWN0aW9uKFwibWF5YmVHYXJiYWdlQ29sbGVjdE11bHRpQ2xpZW50U3RhdGVcIiwgXCJyZWFkd3JpdGUtcHJpbWFyeVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IF9lKHQsIFwiY2xpZW50TWV0YWRhdGFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGUuaigpLm5leHQoKHQgPT4ge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdGhpcy5TaSh0LCAxOGU1KSwgcyA9IHQuZmlsdGVyKCh0ID0+IC0xID09PSBuLmluZGV4T2YodCkpKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVsZXRlIG1ldGFkYXRhIGZvciBjbGllbnRzIHRoYXQgYXJlIG5vIGxvbmdlciBjb25zaWRlcmVkIGFjdGl2ZS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIFJ0LmZvckVhY2gocywgKHQgPT4gZS5kZWxldGUodC5jbGllbnRJZCkpKS5uZXh0KCgoKSA9PiBzKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLmNhdGNoKCgoKSA9PiBbXSkpO1xuICAgICAgICAgICAgLy8gRGVsZXRlIHBvdGVudGlhbCBsZWZ0b3ZlciBlbnRyaWVzIHRoYXQgbWF5IGNvbnRpbnVlIHRvIG1hcmsgdGhlXG4gICAgICAgICAgICAvLyBpbmFjdGl2ZSBjbGllbnRzIGFzIHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlLlxuICAgICAgICAgICAgLy8gSWRlYWxseSB3ZSdkIGRlbGV0ZSB0aGUgSW5kZXhlZERiIGFuZCBMb2NhbFN0b3JhZ2Ugem9tYmllIGVudHJpZXMgZm9yXG4gICAgICAgICAgICAvLyB0aGUgY2xpZW50IGF0b21pY2FsbHksIGJ1dCB3ZSBjYW4ndC4gU28gd2Ugb3B0IHRvIGRlbGV0ZSB0aGUgSW5kZXhlZERiXG4gICAgICAgICAgICAvLyBlbnRyaWVzIGZpcnN0IHRvIGF2b2lkIHBvdGVudGlhbGx5IHJldml2aW5nIGEgem9tYmllZCBjbGllbnQuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faSkgZm9yIChjb25zdCBlIG9mIHQpIHRoaXMuX2kucmVtb3ZlSXRlbSh0aGlzLkRpKGUuY2xpZW50SWQpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAgICAgKiBTY2hlZHVsZXMgYSByZWN1cnJpbmcgdGltZXIgdG8gdXBkYXRlIHRoZSBjbGllbnQgbWV0YWRhdGEgYW5kIHRvIGVpdGhlclxuICAgICAqIGV4dGVuZCBvciBhY3F1aXJlIHRoZSBwcmltYXJ5IGxlYXNlIGlmIHRoZSBjbGllbnQgaXMgZWxpZ2libGUuXG4gICAgICovICAgIHBpKCkge1xuICAgICAgICB0aGlzLmhpID0gdGhpcy5paS5lbnF1ZXVlQWZ0ZXJEZWxheShcImNsaWVudF9tZXRhZGF0YV9yZWZyZXNoXCIgLyogVGltZXJJZC5DbGllbnRNZXRhZGF0YVJlZnJlc2ggKi8gLCA0ZTMsICgoKSA9PiB0aGlzLm1pKCkudGhlbigoKCkgPT4gdGhpcy5iaSgpKSkudGhlbigoKCkgPT4gdGhpcy5waSgpKSkpKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB3aGV0aGVyIGBjbGllbnRgIGlzIHRoZSBsb2NhbCBjbGllbnQuICovICAgIFJpKHQpIHtcbiAgICAgICAgcmV0dXJuICEhdCAmJiB0Lm93bmVySWQgPT09IHRoaXMuY2xpZW50SWQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV2YWx1YXRlIHRoZSBzdGF0ZSBvZiBhbGwgYWN0aXZlIGNsaWVudHMgYW5kIGRldGVybWluZSB3aGV0aGVyIHRoZSBsb2NhbFxuICAgICAqIGNsaWVudCBpcyBvciBjYW4gYWN0IGFzIHRoZSBob2xkZXIgb2YgdGhlIHByaW1hcnkgbGVhc2UuIFJldHVybnMgd2hldGhlclxuICAgICAqIHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBsZWFzZSwgYnV0IGRvZXMgbm90IGFjdHVhbGx5IGFjcXVpcmUgaXQuXG4gICAgICogTWF5IHJldHVybiAnZmFsc2UnIGV2ZW4gaWYgdGhlcmUgaXMgbm8gYWN0aXZlIGxlYXNlaG9sZGVyIGFuZCBhbm90aGVyXG4gICAgICogKGZvcmVncm91bmQpIGNsaWVudCBzaG91bGQgYmVjb21lIGxlYXNlaG9sZGVyIGluc3RlYWQuXG4gICAgICovICAgIEVpKHQpIHtcbiAgICAgICAgaWYgKHRoaXMub2kpIHJldHVybiBSdC5yZXNvbHZlKCEwKTtcbiAgICAgICAgcmV0dXJuIFlvKHQpLmdldChcIm93bmVyXCIpLm5leHQoKGUgPT4ge1xuICAgICAgICAgICAgLy8gQSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoZSBwcmltYXJ5IGxlYXNlIGlmOlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCB0aGUgY2xpZW50J3MgdGFiIGlzIGluIHRoZSBmb3JlZ3JvdW5kLlxuICAgICAgICAgICAgLy8gLSBpdHMgbmV0d29yayBpcyBlbmFibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW4gdGhlXG4gICAgICAgICAgICAvLyAgIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIGV2ZXJ5IGNsaWVudHMgbmV0d29yayBpcyBkaXNhYmxlZCBhbmQgdGhlIGNsaWVudCdzIHRhYiBpcyBpbiB0aGVcbiAgICAgICAgICAgIC8vICAgZm9yZWdyb3VuZC5cbiAgICAgICAgICAgIC8vIC0gZXZlcnkgY2xpZW50cyBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBubyBvdGhlciBjbGllbnQncyB0YWIgaXMgaW5cbiAgICAgICAgICAgIC8vICAgdGhlIGZvcmVncm91bmQuXG4gICAgICAgICAgICAvLyAtIHRoZSBgZm9yY2VPd25pbmdUYWJgIHNldHRpbmcgd2FzIHBhc3NlZCBpbi5cbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlICYmIHRoaXMuVmkoZS5sZWFzZVRpbWVzdGFtcE1zLCA1ZTMpICYmICF0aGlzLkNpKGUub3duZXJJZCkpIHtcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5SaShlKSAmJiB0aGlzLm5ldHdvcmtFbmFibGVkKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLlJpKGUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZS5hbGxvd1RhYlN5bmNocm9uaXphdGlvbikgXG4gICAgICAgICAgICAgICAgICAgIC8vIEZhaWwgdGhlIGBjYW5BY3RBc1ByaW1hcnlgIGNoZWNrIGlmIHRoZSBjdXJyZW50IGxlYXNlaG9sZGVyIGhhc1xuICAgICAgICAgICAgICAgICAgICAvLyBub3Qgb3B0ZWQgaW50byBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLiBJZiB0aGlzIGhhcHBlbnMgYXRcbiAgICAgICAgICAgICAgICAgICAgLy8gY2xpZW50IHN0YXJ0dXAsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSByZXR1cm5lZCBieVxuICAgICAgICAgICAgICAgICAgICAvLyBgZW5hYmxlUGVyc2lzdGVuY2UoKWAgYW5kIHRoZSB1c2VyIGNhbiBjb250aW51ZSB0byB1c2UgRmlyZXN0b3JlXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpdGggaW4tbWVtb3J5IHBlcnNpc3RlbmNlLlxuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZhaWxzIGR1cmluZyBhIGxlYXNlIHJlZnJlc2gsIHdlIHdpbGwgaW5zdGVhZCBibG9jayB0aGVcbiAgICAgICAgICAgICAgICAgICAgLy8gQXN5bmNRdWV1ZSBmcm9tIGV4ZWN1dGluZyBmdXJ0aGVyIG9wZXJhdGlvbnMuIE5vdGUgdGhhdCB0aGlzIGlzXG4gICAgICAgICAgICAgICAgICAgIC8vIGFjY2VwdGFibGUgc2luY2UgbWl4aW5nICYgbWF0Y2hpbmcgZGlmZmVyZW50IGBzeW5jaHJvbml6ZVRhYnNgXG4gICAgICAgICAgICAgICAgICAgIC8vIHNldHRpbmdzIGlzIG5vdCBzdXBwb3J0ZWQuXG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE8oYi8xMTQyMjYyMzQpOiBSZW1vdmUgdGhpcyBjaGVjayB3aGVuIGBzeW5jaHJvbml6ZVRhYnNgIGNhblxuICAgICAgICAgICAgICAgICAgICAvLyBubyBsb25nZXIgYmUgdHVybmVkIG9mZi5cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBIbyk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gISghdGhpcy5uZXR3b3JrRW5hYmxlZCB8fCAhdGhpcy5pbkZvcmVncm91bmQpIHx8IFhvKHQpLmooKS5uZXh0KCh0ID0+IHZvaWQgMCA9PT0gdGhpcy5TaSh0LCA1ZTMpLmZpbmQoKHQgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNsaWVudElkICE9PSB0LmNsaWVudElkKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAhdGhpcy5uZXR3b3JrRW5hYmxlZCAmJiB0Lm5ldHdvcmtFbmFibGVkLCBuID0gIXRoaXMuaW5Gb3JlZ3JvdW5kICYmIHQuaW5Gb3JlZ3JvdW5kLCBzID0gdGhpcy5uZXR3b3JrRW5hYmxlZCA9PT0gdC5uZXR3b3JrRW5hYmxlZDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGUgfHwgbiAmJiBzKSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgICAgIH0pKSkpO1xuICAgICAgICB9KSkubmV4dCgodCA9PiAodGhpcy5pc1ByaW1hcnkgIT09IHQgJiYgTihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJHt0ID8gXCJpc1wiIDogXCJpcyBub3RcIn0gZWxpZ2libGUgZm9yIGEgcHJpbWFyeSBsZWFzZS5gKSwgXG4gICAgICAgIHQpKSk7XG4gICAgfVxuICAgIGFzeW5jIHNodXRkb3duKCkge1xuICAgICAgICAvLyBUaGUgc2h1dGRvd24oKSBvcGVyYXRpb25zIGFyZSBpZGVtcG90ZW50IGFuZCBjYW4gYmUgY2FsbGVkIGV2ZW4gd2hlblxuICAgICAgICAvLyBzdGFydCgpIGFib3J0ZWQgKGUuZy4gYmVjYXVzZSBpdCBjb3VsZG4ndCBhY3F1aXJlIHRoZSBwZXJzaXN0ZW5jZSBsZWFzZSkuXG4gICAgICAgIHRoaXMuRnMgPSAhMSwgdGhpcy54aSgpLCB0aGlzLmhpICYmICh0aGlzLmhpLmNhbmNlbCgpLCB0aGlzLmhpID0gbnVsbCksIHRoaXMuTmkoKSwgXG4gICAgICAgIHRoaXMua2koKSwgXG4gICAgICAgIC8vIFVzZSBgU2ltcGxlRGIucnVuVHJhbnNhY3Rpb25gIGRpcmVjdGx5IHRvIGF2b2lkIGZhaWxpbmcgaWYgYW5vdGhlciB0YWJcbiAgICAgICAgLy8gaGFzIG9idGFpbmVkIHRoZSBwcmltYXJ5IGxlYXNlLlxuICAgICAgICBhd2FpdCB0aGlzLndpLnJ1blRyYW5zYWN0aW9uKFwic2h1dGRvd25cIiwgXCJyZWFkd3JpdGVcIiwgWyBcIm93bmVyXCIsIFwiY2xpZW50TWV0YWRhdGFcIiBdLCAodCA9PiB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IHdlKHQsIE90LmN0KTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLkFpKGUpLm5leHQoKCgpID0+IHRoaXMuUGkoZSkpKTtcbiAgICAgICAgfSkpLCB0aGlzLndpLmNsb3NlKCksIFxuICAgICAgICAvLyBSZW1vdmUgdGhlIGVudHJ5IG1hcmtpbmcgdGhlIGNsaWVudCBhcyB6b21iaWVkIGZyb20gTG9jYWxTdG9yYWdlIHNpbmNlXG4gICAgICAgIC8vIHdlIHN1Y2Nlc3NmdWxseSBkZWxldGVkIGl0cyBtZXRhZGF0YSBmcm9tIEluZGV4ZWREYi5cbiAgICAgICAgdGhpcy5NaSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGNsaWVudHMgdGhhdCBhcmUgbm90IHpvbWJpZWQgYW5kIGhhdmUgYW4gdXBkYXRlVGltZSB3aXRoaW4gdGhlXG4gICAgICogcHJvdmlkZWQgdGhyZXNob2xkLlxuICAgICAqLyAgICBTaSh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0LmZpbHRlcigodCA9PiB0aGlzLlZpKHQudXBkYXRlVGltZU1zLCBlKSAmJiAhdGhpcy5DaSh0LmNsaWVudElkKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gSWYgbXVsdGktdGFiXG4gICAgICogaXMgbm90IHN1cHBvcnRlZCwgcmV0dXJucyBhbiBhcnJheSB0aGF0IG9ubHkgY29udGFpbnMgdGhlIGxvY2FsIGNsaWVudCdzXG4gICAgICogSUQuXG4gICAgICpcbiAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBXZWIgbXVsdGktdGFiLlxuICAgICAqLyAgICAkaSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnVuVHJhbnNhY3Rpb24oXCJnZXRBY3RpdmVDbGllbnRzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gWG8odCkuaigpLm5leHQoKHQgPT4gdGhpcy5TaSh0LCAxOGU1KS5tYXAoKHQgPT4gdC5jbGllbnRJZCkpKSkpKTtcbiAgICB9XG4gICAgZ2V0IHN0YXJ0ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkZzO1xuICAgIH1cbiAgICBnZXRNdXRhdGlvblF1ZXVlKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG9vLmRlKHQsIHRoaXMuc2VyaWFsaXplciwgZSwgdGhpcy5yZWZlcmVuY2VEZWxlZ2F0ZSk7XG4gICAgfVxuICAgIGdldFRhcmdldENhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5CcztcbiAgICB9XG4gICAgZ2V0UmVtb3RlRG9jdW1lbnRDYWNoZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVtb3RlRG9jdW1lbnRDYWNoZTtcbiAgICB9XG4gICAgZ2V0SW5kZXhNYW5hZ2VyKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBKcih0LCB0aGlzLnNlcmlhbGl6ZXIuZmUuZGF0YWJhc2VJZCk7XG4gICAgfVxuICAgIGdldERvY3VtZW50T3ZlcmxheUNhY2hlKHQpIHtcbiAgICAgICAgcmV0dXJuIFJyLmRlKHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgfVxuICAgIGdldEJ1bmRsZUNhY2hlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5xcztcbiAgICB9XG4gICAgcnVuVHJhbnNhY3Rpb24odCwgZSwgbikge1xuICAgICAgICBOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJTdGFydGluZyB0cmFuc2FjdGlvbjpcIiwgdCk7XG4gICAgICAgIGNvbnN0IHMgPSBcInJlYWRvbmx5XCIgPT09IGUgPyBcInJlYWRvbmx5XCIgOiBcInJlYWR3cml0ZVwiLCBpID0gMTUgPT09IChyID0gdGhpcy51aSkgPyBkZSA6IDE0ID09PSByID8gZmUgOiAxMyA9PT0gciA/IGxlIDogMTIgPT09IHIgPyBoZSA6IDExID09PSByID8gYWUgOiB2b2lkIE8oKTtcbiAgICAgICAgLyoqIFJldHVybnMgdGhlIG9iamVjdCBzdG9yZXMgZm9yIHRoZSBwcm92aWRlZCBzY2hlbWEuICovXG4gICAgICAgIHZhciByO1xuICAgICAgICBsZXQgbztcbiAgICAgICAgLy8gRG8gYWxsIHRyYW5zYWN0aW9ucyBhcyByZWFkd3JpdGUgYWdhaW5zdCBhbGwgb2JqZWN0IHN0b3Jlcywgc2luY2Ugd2VcbiAgICAgICAgLy8gYXJlIHRoZSBvbmx5IHJlYWRlci93cml0ZXIuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMud2kucnVuVHJhbnNhY3Rpb24odCwgcywgaSwgKHMgPT4gKG8gPSBuZXcgd2UocywgdGhpcy5PcyA/IHRoaXMuT3MubmV4dCgpIDogT3QuY3QpLCBcbiAgICAgICAgXCJyZWFkd3JpdGUtcHJpbWFyeVwiID09PSBlID8gdGhpcy5UaShvKS5uZXh0KCh0ID0+ICEhdCB8fCB0aGlzLkVpKG8pKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBpZiAoIWUpIHRocm93IGsoYEZhaWxlZCB0byBvYnRhaW4gcHJpbWFyeSBsZWFzZSBmb3IgYWN0aW9uICcke3R9Jy5gKSwgdGhpcy5pc1ByaW1hcnkgPSAhMSwgXG4gICAgICAgICAgICB0aGlzLmlpLmVucXVldWVSZXRyeWFibGUoKCgpID0+IHRoaXMuZmkoITEpKSksIG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgRXQpO1xuICAgICAgICAgICAgcmV0dXJuIG4obyk7XG4gICAgICAgIH0pKS5uZXh0KCh0ID0+IHRoaXMudmkobykubmV4dCgoKCkgPT4gdCkpKSkgOiB0aGlzLk9pKG8pLm5leHQoKCgpID0+IG4obykpKSkpKS50aGVuKCh0ID0+IChvLnJhaXNlT25Db21taXR0ZWRFdmVudCgpLCBcbiAgICAgICAgdCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVmVyaWZpZXMgdGhhdCB0aGUgY3VycmVudCB0YWIgaXMgdGhlIHByaW1hcnkgbGVhc2Vob2xkZXIgb3IgYWx0ZXJuYXRpdmVseVxuICAgICAqIHRoYXQgdGhlIGxlYXNlaG9sZGVyIGhhcyBvcHRlZCBpbnRvIG11bHRpLXRhYiBzeW5jaHJvbml6YXRpb24uXG4gICAgICovXG4gICAgLy8gVE9ETyhiLzExNDIyNjIzNCk6IFJlbW92ZSB0aGlzIGNoZWNrIHdoZW4gYHN5bmNocm9uaXplVGFic2AgY2FuIG5vIGxvbmdlclxuICAgIC8vIGJlIHR1cm5lZCBvZmYuXG4gICAgT2kodCkge1xuICAgICAgICByZXR1cm4gWW8odCkuZ2V0KFwib3duZXJcIikubmV4dCgodCA9PiB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdCAmJiB0aGlzLlZpKHQubGVhc2VUaW1lc3RhbXBNcywgNWUzKSAmJiAhdGhpcy5DaSh0Lm93bmVySWQpICYmICF0aGlzLlJpKHQpICYmICEodGhpcy5vaSB8fCB0aGlzLmFsbG93VGFiU3luY2hyb25pemF0aW9uICYmIHQuYWxsb3dUYWJTeW5jaHJvbml6YXRpb24pKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIEhvKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBPYnRhaW5zIG9yIGV4dGVuZHMgdGhlIG5ldyBwcmltYXJ5IGxlYXNlIGZvciB0aGUgbG9jYWwgY2xpZW50LiBUaGlzXG4gICAgICogbWV0aG9kIGRvZXMgbm90IHZlcmlmeSB0aGF0IHRoZSBjbGllbnQgaXMgZWxpZ2libGUgZm9yIHRoaXMgbGVhc2UuXG4gICAgICovICAgIHZpKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIG93bmVySWQ6IHRoaXMuY2xpZW50SWQsXG4gICAgICAgICAgICBhbGxvd1RhYlN5bmNocm9uaXphdGlvbjogdGhpcy5hbGxvd1RhYlN5bmNocm9uaXphdGlvbixcbiAgICAgICAgICAgIGxlYXNlVGltZXN0YW1wTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIFlvKHQpLnB1dChcIm93bmVyXCIsIGUpO1xuICAgIH1cbiAgICBzdGF0aWMgRCgpIHtcbiAgICAgICAgcmV0dXJuIGJ0LkQoKTtcbiAgICB9XG4gICAgLyoqIENoZWNrcyB0aGUgcHJpbWFyeSBsZWFzZSBhbmQgcmVtb3ZlcyBpdCBpZiB3ZSBhcmUgdGhlIGN1cnJlbnQgcHJpbWFyeS4gKi8gICAgQWkodCkge1xuICAgICAgICBjb25zdCBlID0gWW8odCk7XG4gICAgICAgIHJldHVybiBlLmdldChcIm93bmVyXCIpLm5leHQoKHQgPT4gdGhpcy5SaSh0KSA/IChOKFwiSW5kZXhlZERiUGVyc2lzdGVuY2VcIiwgXCJSZWxlYXNpbmcgcHJpbWFyeSBsZWFzZS5cIiksIFxuICAgICAgICBlLmRlbGV0ZShcIm93bmVyXCIpKSA6IFJ0LnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICAvKiogVmVyaWZpZXMgdGhhdCBgdXBkYXRlVGltZU1zYCBpcyB3aXRoaW4gYG1heEFnZU1zYC4gKi8gICAgVmkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gRGF0ZS5ub3coKTtcbiAgICAgICAgcmV0dXJuICEodCA8IG4gLSBlKSAmJiAoISh0ID4gbikgfHwgKGsoYERldGVjdGVkIGFuIHVwZGF0ZSB0aW1lIHRoYXQgaXMgaW4gdGhlIGZ1dHVyZTogJHt0fSA+ICR7bn1gKSwgXG4gICAgICAgICExKSk7XG4gICAgfVxuICAgIGdpKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLmRvY3VtZW50ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdGhpcy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICh0aGlzLmFpID0gKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5paS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiAodGhpcy5pbkZvcmVncm91bmQgPSBcInZpc2libGVcIiA9PT0gdGhpcy5kb2N1bWVudC52aXNpYmlsaXR5U3RhdGUsIFxuICAgICAgICAgICAgdGhpcy5taSgpKSkpO1xuICAgICAgICB9LCB0aGlzLmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuYWkpLCB0aGlzLmluRm9yZWdyb3VuZCA9IFwidmlzaWJsZVwiID09PSB0aGlzLmRvY3VtZW50LnZpc2liaWxpdHlTdGF0ZSk7XG4gICAgfVxuICAgIE5pKCkge1xuICAgICAgICB0aGlzLmFpICYmICh0aGlzLmRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsIHRoaXMuYWkpLCB0aGlzLmFpID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEF0dGFjaGVzIGEgd2luZG93LnVubG9hZCBoYW5kbGVyIHRoYXQgd2lsbCBzeW5jaHJvbm91c2x5IHdyaXRlIG91clxuICAgICAqIGNsaWVudElkIHRvIGEgXCJ6b21iaWUgY2xpZW50IGlkXCIgbG9jYXRpb24gaW4gTG9jYWxTdG9yYWdlLiBUaGlzIGNhbiBiZSB1c2VkXG4gICAgICogYnkgdGFicyB0cnlpbmcgdG8gYWNxdWlyZSB0aGUgcHJpbWFyeSBsZWFzZSB0byBkZXRlcm1pbmUgdGhhdCB0aGUgbGVhc2VcbiAgICAgKiBpcyBubyBsb25nZXIgdmFsaWQgZXZlbiBpZiB0aGUgdGltZXN0YW1wIGlzIHJlY2VudC4gVGhpcyBpcyBwYXJ0aWN1bGFybHlcbiAgICAgKiBpbXBvcnRhbnQgZm9yIHRoZSByZWZyZXNoIGNhc2UgKHNvIHRoZSB0YWIgY29ycmVjdGx5IHJlLWFjcXVpcmVzIHRoZVxuICAgICAqIHByaW1hcnkgbGVhc2UpLiBMb2NhbFN0b3JhZ2UgaXMgdXNlZCBmb3IgdGhpcyByYXRoZXIgdGhhbiBJbmRleGVkRGIgYmVjYXVzZVxuICAgICAqIGl0IGlzIGEgc3luY2hyb25vdXMgQVBJIGFuZCBzbyBjYW4gYmUgdXNlZCByZWxpYWJseSBmcm9tICBhbiB1bmxvYWRcbiAgICAgKiBoYW5kbGVyLlxuICAgICAqLyAgICB5aSgpIHtcbiAgICAgICAgdmFyIHQ7XG4gICAgICAgIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgKG51bGwgPT09ICh0ID0gdGhpcy53aW5kb3cpIHx8IHZvaWQgMCA9PT0gdCA/IHZvaWQgMCA6IHQuYWRkRXZlbnRMaXN0ZW5lcikgJiYgKHRoaXMuY2kgPSAoKSA9PiB7XG4gICAgICAgICAgICAvLyBOb3RlOiBJbiB0aGVvcnksIHRoaXMgc2hvdWxkIGJlIHNjaGVkdWxlZCBvbiB0aGUgQXN5bmNRdWV1ZSBzaW5jZSBpdFxuICAgICAgICAgICAgLy8gYWNjZXNzZXMgaW50ZXJuYWwgc3RhdGUuIFdlIGV4ZWN1dGUgdGhpcyBjb2RlIGRpcmVjdGx5IGR1cmluZyBzaHV0ZG93blxuICAgICAgICAgICAgLy8gdG8gbWFrZSBzdXJlIGl0IGdldHMgYSBjaGFuY2UgdG8gcnVuLlxuICAgICAgICAgICAgdGhpcy54aSgpO1xuICAgICAgICAgICAgY29uc3QgdCA9IC8oPzpWZXJzaW9ufE1vYmlsZSlcXC8xWzQ1Nl0vO1xuICAgICAgICAgICAgaXNTYWZhcmkoKSAmJiAobmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2godCkgfHwgbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCh0KSkgJiYgXG4gICAgICAgICAgICAvLyBPbiBTYWZhcmkgMTQsIDE1LCBhbmQgMTYsIHdlIGRvIG5vdCBydW4gYW55IGNsZWFudXAgYWN0aW9ucyBhcyBpdCBtaWdodFxuICAgICAgICAgICAgLy8gdHJpZ2dlciBhIGJ1ZyB0aGF0IHByZXZlbnRzIFNhZmFyaSBmcm9tIHJlLW9wZW5pbmcgSW5kZXhlZERCIGR1cmluZ1xuICAgICAgICAgICAgLy8gdGhlIG5leHQgcGFnZSBsb2FkLlxuICAgICAgICAgICAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yMjY1NDdcbiAgICAgICAgICAgIHRoaXMuaWkuZW50ZXJSZXN0cmljdGVkTW9kZSgvKiBwdXJnZUV4aXN0aW5nVGFza3M9ICovICEwKSwgdGhpcy5paS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiB0aGlzLnNodXRkb3duKCkpKTtcbiAgICAgICAgfSwgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsIHRoaXMuY2kpKTtcbiAgICB9XG4gICAga2koKSB7XG4gICAgICAgIHRoaXMuY2kgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJwYWdlaGlkZVwiLCB0aGlzLmNpKSwgdGhpcy5jaSA9IG51bGwpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgYSBjbGllbnQgaXMgXCJ6b21iaWVkXCIgYmFzZWQgb24gaXRzIExvY2FsU3RvcmFnZSBlbnRyeS5cbiAgICAgKiBDbGllbnRzIGJlY29tZSB6b21iaWVkIHdoZW4gdGhlaXIgdGFiIGNsb3NlcyB3aXRob3V0IHJ1bm5pbmcgYWxsIG9mIHRoZVxuICAgICAqIGNsZWFudXAgbG9naWMgaW4gYHNodXRkb3duKClgLlxuICAgICAqLyAgICBDaSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgY29uc3QgbiA9IG51bGwgIT09IChudWxsID09PSAoZSA9IHRoaXMuX2kpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuZ2V0SXRlbSh0aGlzLkRpKHQpKSk7XG4gICAgICAgICAgICByZXR1cm4gTihcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIGBDbGllbnQgJyR7dH0nICR7biA/IFwiaXNcIiA6IFwiaXMgbm90XCJ9IHpvbWJpZWQgaW4gTG9jYWxTdG9yYWdlYCksIFxuICAgICAgICAgICAgbjtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICByZXR1cm4gayhcIkluZGV4ZWREYlBlcnNpc3RlbmNlXCIsIFwiRmFpbGVkIHRvIGdldCB6b21iaWVkIGNsaWVudCBpZC5cIiwgdCksICExO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlY29yZCBjbGllbnQgYXMgem9tYmllZCAoYSBjbGllbnQgdGhhdCBoYWQgaXRzIHRhYiBjbG9zZWQpLiBab21iaWVkXG4gICAgICogY2xpZW50cyBhcmUgaWdub3JlZCBkdXJpbmcgcHJpbWFyeSB0YWIgc2VsZWN0aW9uLlxuICAgICAqLyAgICB4aSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2kpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9pLnNldEl0ZW0odGhpcy5EaSh0aGlzLmNsaWVudElkKSwgU3RyaW5nKERhdGUubm93KCkpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gR3JhY2VmdWxseSBoYW5kbGUgaWYgTG9jYWxTdG9yYWdlIGlzbid0IGF2YWlsYWJsZSAvIHdvcmtpbmcuXG4gICAgICAgICAgICBrKFwiRmFpbGVkIHRvIHNldCB6b21iaWUgY2xpZW50IGlkLlwiLCB0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKiogUmVtb3ZlcyB0aGUgem9tYmllZCBjbGllbnQgZW50cnkgaWYgaXQgZXhpc3RzLiAqLyAgICBNaSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2kpIHRyeSB7XG4gICAgICAgICAgICB0aGlzLl9pLnJlbW92ZUl0ZW0odGhpcy5EaSh0aGlzLmNsaWVudElkKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIC8vIElnbm9yZVxuICAgICAgICB9XG4gICAgfVxuICAgIERpKHQpIHtcbiAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfem9tYmllXyR7dGhpcy5wZXJzaXN0ZW5jZUtleX1fJHt0fWA7XG4gICAgfVxufVxuXG4vKipcbiAqIEhlbHBlciB0byBnZXQgYSB0eXBlZCBTaW1wbGVEYlN0b3JlIGZvciB0aGUgcHJpbWFyeSBjbGllbnQgb2JqZWN0IHN0b3JlLlxuICovIGZ1bmN0aW9uIFlvKHQpIHtcbiAgICByZXR1cm4gX2UodCwgXCJvd25lclwiKTtcbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZ2V0IGEgdHlwZWQgU2ltcGxlRGJTdG9yZSBmb3IgdGhlIGNsaWVudCBtZXRhZGF0YSBvYmplY3Qgc3RvcmUuXG4gKi8gZnVuY3Rpb24gWG8odCkge1xuICAgIHJldHVybiBfZSh0LCBcImNsaWVudE1ldGFkYXRhXCIpO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlcyBhIHN0cmluZyB1c2VkIGFzIGEgcHJlZml4IHdoZW4gc3RvcmluZyBkYXRhIGluIEluZGV4ZWREQiBhbmRcbiAqIExvY2FsU3RvcmFnZS5cbiAqLyBmdW5jdGlvbiBabyh0LCBlKSB7XG4gICAgLy8gVXNlIHR3byBkaWZmZXJlbnQgcHJlZml4IGZvcm1hdHM6XG4gICAgLy8gICAqIGZpcmVzdG9yZSAvIHBlcnNpc3RlbmNlS2V5IC8gcHJvamVjdElEIC4gZGF0YWJhc2VJRCAvIC4uLlxuICAgIC8vICAgKiBmaXJlc3RvcmUgLyBwZXJzaXN0ZW5jZUtleSAvIHByb2plY3RJRCAvIC4uLlxuICAgIC8vIHByb2plY3RJRHMgYXJlIEROUy1jb21wYXRpYmxlIG5hbWVzIGFuZCBjYW5ub3QgY29udGFpbiBkb3RzXG4gICAgLy8gc28gdGhlcmUncyBubyBkYW5nZXIgb2YgY29sbGlzaW9ucy5cbiAgICBsZXQgbiA9IHQucHJvamVjdElkO1xuICAgIHJldHVybiB0LmlzRGVmYXVsdERhdGFiYXNlIHx8IChuICs9IFwiLlwiICsgdC5kYXRhYmFzZSksIFwiZmlyZXN0b3JlL1wiICsgZSArIFwiL1wiICsgbiArIFwiL1wiO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIHNldCBvZiBjaGFuZ2VzIHRvIHdoYXQgZG9jdW1lbnRzIGFyZSBjdXJyZW50bHkgaW4gdmlldyBhbmQgb3V0IG9mIHZpZXcgZm9yXG4gKiBhIGdpdmVuIHF1ZXJ5LiBUaGVzZSBjaGFuZ2VzIGFyZSBzZW50IHRvIHRoZSBMb2NhbFN0b3JlIGJ5IHRoZSBWaWV3ICh2aWFcbiAqIHRoZSBTeW5jRW5naW5lKSBhbmQgYXJlIHVzZWQgdG8gcGluIC8gdW5waW4gZG9jdW1lbnRzIGFzIGFwcHJvcHJpYXRlLlxuICovXG5jbGFzcyB0dSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlLCB0aGlzLkZpID0gbiwgdGhpcy5CaSA9IHM7XG4gICAgfVxuICAgIHN0YXRpYyBMaSh0LCBlKSB7XG4gICAgICAgIGxldCBuID0gZ3MoKSwgcyA9IGdzKCk7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiBlLmRvY0NoYW5nZXMpIHN3aXRjaCAodC50eXBlKSB7XG4gICAgICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICAgICAgbiA9IG4uYWRkKHQuZG9jLmtleSk7XG4gICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgcyA9IHMuYWRkKHQuZG9jLmtleSk7XG4gLy8gZG8gbm90aGluZ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyB0dSh0LCBlLmZyb21DYWNoZSwgbiwgcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUaGUgRmlyZXN0b3JlIHF1ZXJ5IGVuZ2luZS5cbiAqXG4gKiBGaXJlc3RvcmUgcXVlcmllcyBjYW4gYmUgZXhlY3V0ZWQgaW4gdGhyZWUgbW9kZXMuIFRoZSBRdWVyeSBFbmdpbmUgZGV0ZXJtaW5lc1xuICogd2hhdCBtb2RlIHRvIHVzZSBiYXNlZCBvbiB3aGF0IGRhdGEgaXMgcGVyc2lzdGVkLiBUaGUgbW9kZSBvbmx5IGRldGVybWluZXNcbiAqIHRoZSBydW50aW1lIGNvbXBsZXhpdHkgb2YgdGhlIHF1ZXJ5IC0gdGhlIHJlc3VsdCBzZXQgaXMgZXF1aXZhbGVudCBhY3Jvc3MgYWxsXG4gKiBpbXBsZW1lbnRhdGlvbnMuXG4gKlxuICogVGhlIFF1ZXJ5IGVuZ2luZSB3aWxsIHVzZSBpbmRleGVkLWJhc2VkIGV4ZWN1dGlvbiBpZiBhIHVzZXIgaGFzIGNvbmZpZ3VyZWRcbiAqIGFueSBpbmRleCB0aGF0IGNhbiBiZSB1c2VkIHRvIGV4ZWN1dGUgcXVlcnkgKHZpYSBgc2V0SW5kZXhDb25maWd1cmF0aW9uKClgKS5cbiAqIE90aGVyd2lzZSwgdGhlIGVuZ2luZSB3aWxsIHRyeSB0byBvcHRpbWl6ZSB0aGUgcXVlcnkgYnkgcmUtdXNpbmcgYSBwcmV2aW91c2x5XG4gKiBwZXJzaXN0ZWQgcXVlcnkgcmVzdWx0LiBJZiB0aGF0IGlzIG5vdCBwb3NzaWJsZSwgdGhlIHF1ZXJ5IHdpbGwgYmUgZXhlY3V0ZWRcbiAqIHZpYSBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICpcbiAqIEluZGV4LWJhc2VkIGV4ZWN1dGlvbiBpcyB0aGUgZGVmYXVsdCB3aGVuIGF2YWlsYWJsZS4gVGhlIHF1ZXJ5IGVuZ2luZVxuICogc3VwcG9ydHMgcGFydGlhbCBpbmRleGVkIGV4ZWN1dGlvbiBhbmQgbWVyZ2VzIHRoZSByZXN1bHQgZnJvbSB0aGUgaW5kZXhcbiAqIGxvb2t1cCB3aXRoIGRvY3VtZW50cyB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuIFRoZSBpbmRleCBldmFsdWF0aW9uXG4gKiBtYXRjaGVzIHRoZSBiYWNrZW5kJ3MgZm9ybWF0IGFuZCBhcyBzdWNoLCB0aGUgU0RLIGNhbiB1c2UgaW5kZXhpbmcgZm9yIGFsbFxuICogcXVlcmllcyB0aGF0IHRoZSBiYWNrZW5kIHN1cHBvcnRzLlxuICpcbiAqIElmIG5vIGluZGV4IGV4aXN0cywgdGhlIHF1ZXJ5IGVuZ2luZSB0cmllcyB0byB0YWtlIGFkdmFudGFnZSBvZiB0aGUgdGFyZ2V0XG4gKiBkb2N1bWVudCBtYXBwaW5nIGluIHRoZSBUYXJnZXRDYWNoZS4gVGhlc2UgbWFwcGluZ3MgZXhpc3RzIGZvciBhbGwgcXVlcmllc1xuICogdGhhdCBoYXZlIGJlZW4gc3luY2VkIHdpdGggdGhlIGJhY2tlbmQgYXQgbGVhc3Qgb25jZSBhbmQgYWxsb3cgdGhlIHF1ZXJ5XG4gKiBlbmdpbmUgdG8gb25seSByZWFkIGRvY3VtZW50cyB0aGF0IHByZXZpb3VzbHkgbWF0Y2hlZCBhIHF1ZXJ5IHBsdXMgYW55XG4gKiBkb2N1bWVudHMgdGhhdCB3ZXJlIGVkaXRlZCBhZnRlciB0aGUgcXVlcnkgd2FzIGxhc3QgbGlzdGVuZWQgdG8uXG4gKlxuICogVGhlcmUgYXJlIHNvbWUgY2FzZXMgd2hlbiB0aGlzIG9wdGltaXphdGlvbiBpcyBub3QgZ3VhcmFudGVlZCB0byBwcm9kdWNlXG4gKiB0aGUgc2FtZSByZXN1bHRzIGFzIGZ1bGwgY29sbGVjdGlvbiBzY2Fucy4gSW4gdGhlc2UgY2FzZXMsIHF1ZXJ5XG4gKiBwcm9jZXNzaW5nIGZhbGxzIGJhY2sgdG8gZnVsbCBzY2Fucy4gVGhlc2UgY2FzZXMgYXJlOlxuICpcbiAqIC0gTGltaXQgcXVlcmllcyB3aGVyZSBhIGRvY3VtZW50IHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgcHJldmlvdXNseSBubyBsb25nZXJcbiAqICAgbWF0Y2hlcyB0aGUgcXVlcnkuXG4gKlxuICogLSBMaW1pdCBxdWVyaWVzIHdoZXJlIGEgZG9jdW1lbnQgZWRpdCBtYXkgY2F1c2UgdGhlIGRvY3VtZW50IHRvIHNvcnQgYmVsb3dcbiAqICAgYW5vdGhlciBkb2N1bWVudCB0aGF0IGlzIGluIHRoZSBsb2NhbCBjYWNoZS5cbiAqXG4gKiAtIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIGJlZW4gQ1VSUkVOVCBvciBmcmVlIG9mIGxpbWJvIGRvY3VtZW50cy5cbiAqLyBjbGFzcyBldSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucWkgPSAhMTtcbiAgICB9XG4gICAgLyoqIFNldHMgdGhlIGRvY3VtZW50IHZpZXcgdG8gcXVlcnkgYWdhaW5zdC4gKi8gICAgaW5pdGlhbGl6ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMuVWkgPSB0LCB0aGlzLmluZGV4TWFuYWdlciA9IGUsIHRoaXMucWkgPSAhMDtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYWxsIGxvY2FsIGRvY3VtZW50cyBtYXRjaGluZyB0aGUgc3BlY2lmaWVkIHF1ZXJ5LiAqLyAgICBnZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIGUsIG4sIHMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuS2kodCwgZSkubmV4dCgoaSA9PiBpIHx8IHRoaXMuR2kodCwgZSwgcywgbikpKS5uZXh0KChuID0+IG4gfHwgdGhpcy5RaSh0LCBlKSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtcyBhbiBpbmRleGVkIHF1ZXJ5IHRoYXQgZXZhbHVhdGVzIHRoZSBxdWVyeSBiYXNlZCBvbiBhIGNvbGxlY3Rpb24nc1xuICAgICAqIHBlcnNpc3RlZCBpbmRleCB2YWx1ZXMuIFJldHVybnMgYG51bGxgIGlmIGFuIGluZGV4IGlzIG5vdCBhdmFpbGFibGUuXG4gICAgICovICAgIEtpKHQsIGUpIHtcbiAgICAgICAgaWYgKFFuKGUpKSBcbiAgICAgICAgLy8gUXVlcmllcyB0aGF0IG1hdGNoIGFsbCBkb2N1bWVudHMgZG9uJ3QgYmVuZWZpdCBmcm9tIHVzaW5nXG4gICAgICAgIC8vIGtleS1iYXNlZCBsb29rdXBzLiBJdCBpcyBtb3JlIGVmZmljaWVudCB0byBzY2FuIGFsbCBkb2N1bWVudHMgaW4gYVxuICAgICAgICAvLyBjb2xsZWN0aW9uLCByYXRoZXIgdGhhbiB0byBwZXJmb3JtIGluZGl2aWR1YWwgbG9va3Vwcy5cbiAgICAgICAgcmV0dXJuIFJ0LnJlc29sdmUobnVsbCk7XG4gICAgICAgIGxldCBuID0gSm4oZSk7XG4gICAgICAgIHJldHVybiB0aGlzLmluZGV4TWFuYWdlci5nZXRJbmRleFR5cGUodCwgbikubmV4dCgocyA9PiAwIC8qIEluZGV4VHlwZS5OT05FICovID09PSBzID8gbnVsbCA6IChudWxsICE9PSBlLmxpbWl0ICYmIDEgLyogSW5kZXhUeXBlLlBBUlRJQUwgKi8gPT09IHMgJiYgKFxuICAgICAgICAvLyBXZSBjYW5ub3QgYXBwbHkgYSBsaW1pdCBmb3IgdGFyZ2V0cyB0aGF0IGFyZSBzZXJ2ZWQgdXNpbmcgYSBwYXJ0aWFsXG4gICAgICAgIC8vIGluZGV4LiBJZiBhIHBhcnRpYWwgaW5kZXggd2lsbCBiZSB1c2VkIHRvIHNlcnZlIHRoZSB0YXJnZXQsIHRoZVxuICAgICAgICAvLyBxdWVyeSBtYXkgcmV0dXJuIGEgc3VwZXJzZXQgb2YgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlIHRhcmdldFxuICAgICAgICAvLyAoZS5nLiBpZiB0aGUgaW5kZXggZG9lc24ndCBpbmNsdWRlIGFsbCB0aGUgdGFyZ2V0J3MgZmlsdGVycyksIG9yXG4gICAgICAgIC8vIG1heSByZXR1cm4gdGhlIGNvcnJlY3Qgc2V0IG9mIGRvY3VtZW50cyBpbiB0aGUgd3Jvbmcgb3JkZXIgKGUuZy4gaWZcbiAgICAgICAgLy8gdGhlIGluZGV4IGRvZXNuJ3QgaW5jbHVkZSBhIHNlZ21lbnQgZm9yIG9uZSBvZiB0aGUgb3JkZXJCeXMpLlxuICAgICAgICAvLyBUaGVyZWZvcmUsIGEgbGltaXQgc2hvdWxkIG5vdCBiZSBhcHBsaWVkIGluIHN1Y2ggY2FzZXMuXG4gICAgICAgIGUgPSBYbihlLCBudWxsLCBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8pLCBuID0gSm4oZSkpLCB0aGlzLmluZGV4TWFuYWdlci5nZXREb2N1bWVudHNNYXRjaGluZ1RhcmdldCh0LCBuKS5uZXh0KChzID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBncyguLi5zKTtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLlVpLmdldERvY3VtZW50cyh0LCBpKS5uZXh0KChzID0+IHRoaXMuaW5kZXhNYW5hZ2VyLmdldE1pbk9mZnNldCh0LCBuKS5uZXh0KChuID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCByID0gdGhpcy5qaShlLCBzKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy56aShlLCByLCBpLCBuLnJlYWRUaW1lKSA/IHRoaXMuS2kodCwgWG4oZSwgbnVsbCwgXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovKSkgOiB0aGlzLldpKHQsIHIsIGUsIG4pO1xuICAgICAgICAgICAgfSkpKSk7XG4gICAgICAgIH0pKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGVyZm9ybXMgYSBxdWVyeSBiYXNlZCBvbiB0aGUgdGFyZ2V0J3MgcGVyc2lzdGVkIHF1ZXJ5IG1hcHBpbmcuIFJldHVybnNcbiAgICAgKiBgbnVsbGAgaWYgdGhlIG1hcHBpbmcgaXMgbm90IGF2YWlsYWJsZSBvciBjYW5ub3QgYmUgdXNlZC5cbiAgICAgKi8gICAgR2kodCwgZSwgbiwgcykge1xuICAgICAgICByZXR1cm4gUW4oZSkgfHwgcy5pc0VxdWFsKHJ0Lm1pbigpKSA/IHRoaXMuUWkodCwgZSkgOiB0aGlzLlVpLmdldERvY3VtZW50cyh0LCBuKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHIgPSB0aGlzLmppKGUsIGkpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuemkoZSwgciwgbiwgcykgPyB0aGlzLlFpKHQsIGUpIDogKEMoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBOKFwiUXVlcnlFbmdpbmVcIiwgXCJSZS11c2luZyBwcmV2aW91cyByZXN1bHQgZnJvbSAlcyB0byBleGVjdXRlIHF1ZXJ5OiAlc1wiLCBzLnRvU3RyaW5nKCksIGVzKGUpKSwgXG4gICAgICAgICAgICB0aGlzLldpKHQsIHIsIGUsIHl0KHMsIC0xKSkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIFF1ZXJpZXMgdGhhdCBoYXZlIG5ldmVyIHNlZW4gYSBzbmFwc2hvdCB3aXRob3V0IGxpbWJvIGZyZWUgZG9jdW1lbnRzXG4gICAgICAgIC8vIHNob3VsZCBhbHNvIGJlIHJ1biBhcyBhIGZ1bGwgY29sbGVjdGlvbiBzY2FuLlxuICAgICAgICB9XG4gICAgLyoqIEFwcGxpZXMgdGhlIHF1ZXJ5IGZpbHRlciBhbmQgc29ydGluZyB0byB0aGUgcHJvdmlkZWQgZG9jdW1lbnRzLiAgKi8gICAgamkodCwgZSkge1xuICAgICAgICAvLyBTb3J0IHRoZSBkb2N1bWVudHMgYW5kIHJlLWFwcGx5IHRoZSBxdWVyeSBmaWx0ZXIgc2luY2UgcHJldmlvdXNseVxuICAgICAgICAvLyBtYXRjaGluZyBkb2N1bWVudHMgZG8gbm90IG5lY2Vzc2FyaWx5IHN0aWxsIG1hdGNoIHRoZSBxdWVyeS5cbiAgICAgICAgbGV0IG4gPSBuZXcgRWUoaXModCkpO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCgoZSwgcykgPT4ge1xuICAgICAgICAgICAgbnModCwgcykgJiYgKG4gPSBuLmFkZChzKSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGV0ZXJtaW5lcyBpZiBhIGxpbWl0IHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGZyb20gY2FjaGUsIG1ha2luZyBpdFxuICAgICAqIGluZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgZXhlY3V0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5IC0gVGhlIHF1ZXJ5LlxuICAgICAqIEBwYXJhbSBzb3J0ZWRQcmV2aW91c1Jlc3VsdHMgLSBUaGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2hlZCB0aGUgcXVlcnkgd2hlbiBpdFxuICAgICAqIHdhcyBsYXN0IHN5bmNocm9uaXplZCwgc29ydGVkIGJ5IHRoZSBxdWVyeSdzIGNvbXBhcmF0b3IuXG4gICAgICogQHBhcmFtIHJlbW90ZUtleXMgLSBUaGUgZG9jdW1lbnQga2V5cyB0aGF0IG1hdGNoZWQgdGhlIHF1ZXJ5IGF0IHRoZSBsYXN0XG4gICAgICogc25hcHNob3QuXG4gICAgICogQHBhcmFtIGxpbWJvRnJlZVNuYXBzaG90VmVyc2lvbiAtIFRoZSB2ZXJzaW9uIG9mIHRoZSBzbmFwc2hvdCB3aGVuIHRoZVxuICAgICAqIHF1ZXJ5IHdhcyBsYXN0IHN5bmNocm9uaXplZC5cbiAgICAgKi8gICAgemkodCwgZSwgbiwgcykge1xuICAgICAgICBpZiAobnVsbCA9PT0gdC5saW1pdCkgXG4gICAgICAgIC8vIFF1ZXJpZXMgd2l0aG91dCBsaW1pdHMgZG8gbm90IG5lZWQgdG8gYmUgcmVmaWxsZWQuXG4gICAgICAgIHJldHVybiAhMTtcbiAgICAgICAgaWYgKG4uc2l6ZSAhPT0gZS5zaXplKSBcbiAgICAgICAgLy8gVGhlIHF1ZXJ5IG5lZWRzIHRvIGJlIHJlZmlsbGVkIGlmIGEgcHJldmlvdXNseSBtYXRjaGluZyBkb2N1bWVudCBub1xuICAgICAgICAvLyBsb25nZXIgbWF0Y2hlcy5cbiAgICAgICAgcmV0dXJuICEwO1xuICAgICAgICAvLyBMaW1pdCBxdWVyaWVzIGFyZSBub3QgZWxpZ2libGUgZm9yIGluZGV4LWZyZWUgcXVlcnkgZXhlY3V0aW9uIGlmIHRoZXJlIGlzXG4gICAgICAgIC8vIGEgcG90ZW50aWFsIHRoYXQgYW4gb2xkZXIgZG9jdW1lbnQgZnJvbSBjYWNoZSBub3cgc29ydHMgYmVmb3JlIGEgZG9jdW1lbnRcbiAgICAgICAgLy8gdGhhdCB3YXMgcHJldmlvdXNseSBwYXJ0IG9mIHRoZSBsaW1pdC4gVGhpcywgaG93ZXZlciwgY2FuIG9ubHkgaGFwcGVuIGlmXG4gICAgICAgIC8vIHRoZSBkb2N1bWVudCBhdCB0aGUgZWRnZSBvZiB0aGUgbGltaXQgZ29lcyBvdXQgb2YgbGltaXQuXG4gICAgICAgIC8vIElmIGEgZG9jdW1lbnQgdGhhdCBpcyBub3QgdGhlIGxpbWl0IGJvdW5kYXJ5IHNvcnRzIGRpZmZlcmVudGx5LFxuICAgICAgICAvLyB0aGUgYm91bmRhcnkgb2YgdGhlIGxpbWl0IGl0c2VsZiBkaWQgbm90IGNoYW5nZSBhbmQgZG9jdW1lbnRzIGZyb20gY2FjaGVcbiAgICAgICAgLy8gd2lsbCBjb250aW51ZSB0byBiZSBcInJlamVjdGVkXCIgYnkgdGhpcyBib3VuZGFyeS4gVGhlcmVmb3JlLCB3ZSBjYW4gaWdub3JlXG4gICAgICAgIC8vIGFueSBtb2RpZmljYXRpb25zIHRoYXQgZG9uJ3QgYWZmZWN0IHRoZSBsYXN0IGRvY3VtZW50LlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBcIkZcIiAvKiBMaW1pdFR5cGUuRmlyc3QgKi8gPT09IHQubGltaXRUeXBlID8gZS5sYXN0KCkgOiBlLmZpcnN0KCk7XG4gICAgICAgIHJldHVybiAhIWkgJiYgKGkuaGFzUGVuZGluZ1dyaXRlcyB8fCBpLnZlcnNpb24uY29tcGFyZVRvKHMpID4gMCk7XG4gICAgfVxuICAgIFFpKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIEMoKSA8PSBMb2dMZXZlbC5ERUJVRyAmJiBOKFwiUXVlcnlFbmdpbmVcIiwgXCJVc2luZyBmdWxsIGNvbGxlY3Rpb24gc2NhbiB0byBleGVjdXRlIHF1ZXJ5OlwiLCBlcyhlKSksIFxuICAgICAgICB0aGlzLlVpLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgSXQubWluKCkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21iaW5lcyB0aGUgcmVzdWx0cyBmcm9tIGFuIGluZGV4ZWQgZXhlY3V0aW9uIHdpdGggdGhlIHJlbWFpbmluZyBkb2N1bWVudHNcbiAgICAgKiB0aGF0IGhhdmUgbm90IHlldCBiZWVuIGluZGV4ZWQuXG4gICAgICovICAgIFdpKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgLy8gUmV0cmlldmUgYWxsIHJlc3VsdHMgZm9yIGRvY3VtZW50cyB0aGF0IHdlcmUgdXBkYXRlZCBzaW5jZSB0aGUgb2Zmc2V0LlxuICAgICAgICByZXR1cm4gdGhpcy5VaS5nZXREb2N1bWVudHNNYXRjaGluZ1F1ZXJ5KHQsIG4sIHMpLm5leHQoKHQgPT4gKFxuICAgICAgICAvLyBNZXJnZSB3aXRoIGV4aXN0aW5nIHJlc3VsdHNcbiAgICAgICAgZS5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQgPSB0Lmluc2VydChlLmtleSwgZSk7XG4gICAgICAgIH0pKSwgdCkpKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEltcGxlbWVudHMgYExvY2FsU3RvcmVgIGludGVyZmFjZS5cbiAqXG4gKiBOb3RlOiBzb21lIGZpZWxkIGRlZmluZWQgaW4gdGhpcyBjbGFzcyBtaWdodCBoYXZlIHB1YmxpYyBhY2Nlc3MgbGV2ZWwsIGJ1dFxuICogdGhlIGNsYXNzIGlzIG5vdCBleHBvcnRlZCBzbyB0aGV5IGFyZSBvbmx5IGFjY2Vzc2libGUgZnJvbSB0aGlzIG1vZHVsZS5cbiAqIFRoaXMgaXMgdXNlZnVsIHRvIGltcGxlbWVudCBvcHRpb25hbCBmZWF0dXJlcyAobGlrZSBidW5kbGVzKSBpbiBmcmVlXG4gKiBmdW5jdGlvbnMsIHN1Y2ggdGhhdCB0aGV5IGFyZSB0cmVlLXNoYWtlYWJsZS5cbiAqL1xuY2xhc3MgbnUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBNYW5hZ2VzIG91ciBpbi1tZW1vcnkgb3IgZHVyYWJsZSBwZXJzaXN0ZW5jZS4gKi9cbiAgICB0LCBlLCBuLCBzKSB7XG4gICAgICAgIHRoaXMucGVyc2lzdGVuY2UgPSB0LCB0aGlzLkhpID0gZSwgdGhpcy5zZXJpYWxpemVyID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBNYXBzIGEgdGFyZ2V0SUQgdG8gZGF0YSBhYm91dCBpdHMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFdlIGFyZSB1c2luZyBhbiBpbW11dGFibGUgZGF0YSBzdHJ1Y3R1cmUgb24gV2ViIHRvIG1ha2UgcmUtcnVuc1xuICAgICAgICAgKiBvZiBgYXBwbHlSZW1vdGVFdmVudCgpYCBpZGVtcG90ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5KaSA9IG5ldyBwZShldCksIFxuICAgICAgICAvKiogTWFwcyBhIHRhcmdldCB0byBpdHMgdGFyZ2V0SUQuICovXG4gICAgICAgIC8vIFRPRE8od3VhbmR5KTogRXZhbHVhdGUgaWYgVGFyZ2V0SWQgY2FuIGJlIHBhcnQgb2YgVGFyZ2V0LlxuICAgICAgICB0aGlzLllpID0gbmV3IG9zKCh0ID0+ICRuKHQpKSwgT24pLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgcGVyIGNvbGxlY3Rpb24gZ3JvdXAgaW5kZXggb2YgdGhlIGxhc3QgcmVhZCB0aW1lIHByb2Nlc3NlZCBieVxuICAgICAgICAgKiBgZ2V0TmV3RG9jdW1lbnRDaGFuZ2VzKClgLlxuICAgICAgICAgKlxuICAgICAgICAgKiBQT1JUSU5HIE5PVEU6IFRoaXMgaXMgb25seSB1c2VkIGZvciBtdWx0aS10YWIgc3luY2hyb25pemF0aW9uLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5YaSA9IG5ldyBNYXAsIHRoaXMuWmkgPSB0LmdldFJlbW90ZURvY3VtZW50Q2FjaGUoKSwgdGhpcy5CcyA9IHQuZ2V0VGFyZ2V0Q2FjaGUoKSwgXG4gICAgICAgIHRoaXMucXMgPSB0LmdldEJ1bmRsZUNhY2hlKCksIHRoaXMudHIobik7XG4gICAgfVxuICAgIHRyKHQpIHtcbiAgICAgICAgLy8gVE9ETyhpbmRleGluZyk6IEFkZCBzcGVjIHRlc3RzIHRoYXQgdGVzdCB0aGVzZSBjb21wb25lbnRzIGNoYW5nZSBhZnRlciBhXG4gICAgICAgIC8vIHVzZXIgY2hhbmdlXG4gICAgICAgIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUgPSB0aGlzLnBlcnNpc3RlbmNlLmdldERvY3VtZW50T3ZlcmxheUNhY2hlKHQpLCB0aGlzLmluZGV4TWFuYWdlciA9IHRoaXMucGVyc2lzdGVuY2UuZ2V0SW5kZXhNYW5hZ2VyKHQpLCBcbiAgICAgICAgdGhpcy5tdXRhdGlvblF1ZXVlID0gdGhpcy5wZXJzaXN0ZW5jZS5nZXRNdXRhdGlvblF1ZXVlKHQsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgdGhpcy5sb2NhbERvY3VtZW50cyA9IG5ldyBrbyh0aGlzLlppLCB0aGlzLm11dGF0aW9uUXVldWUsIHRoaXMuZG9jdW1lbnRPdmVybGF5Q2FjaGUsIHRoaXMuaW5kZXhNYW5hZ2VyKSwgXG4gICAgICAgIHRoaXMuWmkuc2V0SW5kZXhNYW5hZ2VyKHRoaXMuaW5kZXhNYW5hZ2VyKSwgdGhpcy5IaS5pbml0aWFsaXplKHRoaXMubG9jYWxEb2N1bWVudHMsIHRoaXMuaW5kZXhNYW5hZ2VyKTtcbiAgICB9XG4gICAgY29sbGVjdEdhcmJhZ2UodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkNvbGxlY3QgZ2FyYmFnZVwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsIChlID0+IHQuY29sbGVjdChlLCB0aGlzLkppKSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc3UoXG4vKiogTWFuYWdlcyBvdXIgaW4tbWVtb3J5IG9yIGR1cmFibGUgcGVyc2lzdGVuY2UuICovXG50LCBlLCBuLCBzKSB7XG4gICAgcmV0dXJuIG5ldyBudSh0LCBlLCBuLCBzKTtcbn1cblxuLyoqXG4gKiBUZWxscyB0aGUgTG9jYWxTdG9yZSB0aGF0IHRoZSBjdXJyZW50bHkgYXV0aGVudGljYXRlZCB1c2VyIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEluIHJlc3BvbnNlIHRoZSBsb2NhbCBzdG9yZSBzd2l0Y2hlcyB0aGUgbXV0YXRpb24gcXVldWUgdG8gdGhlIG5ldyB1c2VyIGFuZFxuICogcmV0dXJucyBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogQW5kcm9pZCBhbmQgaU9TIG9ubHkgcmV0dXJuIHRoZSBkb2N1bWVudHMgYWZmZWN0ZWQgYnkgdGhlXG4vLyBjaGFuZ2UuXG5hc3luYyBmdW5jdGlvbiBpdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgcmV0dXJuIGF3YWl0IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJIYW5kbGUgdXNlciBjaGFuZ2VcIiwgXCJyZWFkb25seVwiLCAodCA9PiB7XG4gICAgICAgIC8vIFN3YXAgb3V0IHRoZSBtdXRhdGlvbiBxdWV1ZSwgZ3JhYmJpbmcgdGhlIHBlbmRpbmcgbXV0YXRpb24gYmF0Y2hlc1xuICAgICAgICAvLyBiZWZvcmUgYW5kIGFmdGVyLlxuICAgICAgICBsZXQgcztcbiAgICAgICAgcmV0dXJuIG4ubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkubmV4dCgoaSA9PiAocyA9IGksIG4udHIoZSksIG4ubXV0YXRpb25RdWV1ZS5nZXRBbGxNdXRhdGlvbkJhdGNoZXModCkpKSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICBjb25zdCBpID0gW10sIHIgPSBbXTtcbiAgICAgICAgICAgIC8vIFVuaW9uIHRoZSBvbGQvbmV3IGNoYW5nZWQga2V5cy5cbiAgICAgICAgICAgIGxldCBvID0gZ3MoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSB7XG4gICAgICAgICAgICAgICAgaS5wdXNoKHQuYmF0Y2hJZCk7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIHQubXV0YXRpb25zKSBvID0gby5hZGQoZS5rZXkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICByLnB1c2godC5iYXRjaElkKTtcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgdC5tdXRhdGlvbnMpIG8gPSBvLmFkZChlLmtleSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBSZXR1cm4gdGhlIHNldCBvZiBhbGwgKHBvdGVudGlhbGx5KSBjaGFuZ2VkIGRvY3VtZW50cyBhbmQgdGhlIGxpc3RcbiAgICAgICAgICAgIC8vIG9mIG11dGF0aW9uIGJhdGNoIElEcyB0aGF0IHdlcmUgYWZmZWN0ZWQgYnkgY2hhbmdlLlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4ubG9jYWxEb2N1bWVudHMuZ2V0RG9jdW1lbnRzKHQsIG8pLm5leHQoKHQgPT4gKHtcbiAgICAgICAgICAgICAgICBlcjogdCxcbiAgICAgICAgICAgICAgICByZW1vdmVkQmF0Y2hJZHM6IGksXG4gICAgICAgICAgICAgICAgYWRkZWRCYXRjaElkczogclxuICAgICAgICAgICAgfSkpKTtcbiAgICAgICAgfSkpO1xuICAgIH0pKTtcbn1cblxuLyogQWNjZXB0cyBsb2NhbGx5IGdlbmVyYXRlZCBNdXRhdGlvbnMgYW5kIGNvbW1pdCB0aGVtIHRvIHN0b3JhZ2UuICovXG4vKipcbiAqIEFja25vd2xlZGdlcyB0aGUgZ2l2ZW4gYmF0Y2guXG4gKlxuICogT24gdGhlIGhhcHB5IHBhdGggd2hlbiBhIGJhdGNoIGlzIGFja25vd2xlZGdlZCwgdGhlIGxvY2FsIHN0b3JlIHdpbGxcbiAqXG4gKiAgKyByZW1vdmUgdGhlIGJhdGNoIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlO1xuICogICsgYXBwbHkgdGhlIGNoYW5nZXMgdG8gdGhlIHJlbW90ZSBkb2N1bWVudCBjYWNoZTtcbiAqICArIHJlY2FsY3VsYXRlIHRoZSBsYXRlbmN5IGNvbXBlbnNhdGVkIHZpZXcgaW1wbGllZCBieSB0aG9zZSBjaGFuZ2VzICh0aGVyZVxuICogICAgbWF5IGJlIG11dGF0aW9ucyBpbiB0aGUgcXVldWUgdGhhdCBhZmZlY3QgdGhlIGRvY3VtZW50cyBidXQgaGF2ZW4ndCBiZWVuXG4gKiAgICBhY2tub3dsZWRnZWQgeWV0KTsgYW5kXG4gKiAgKyBnaXZlIHRoZSBjaGFuZ2VkIGRvY3VtZW50cyBiYWNrIHRoZSBzeW5jIGVuZ2luZVxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgKG1vZGlmaWVkKSBkb2N1bWVudHMuXG4gKi9cbmZ1bmN0aW9uIHJ1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFja25vd2xlZGdlIGJhdGNoXCIsIFwicmVhZHdyaXRlLXByaW1hcnlcIiwgKHQgPT4ge1xuICAgICAgICBjb25zdCBzID0gZS5iYXRjaC5rZXlzKCksIGkgPSBuLlppLm5ld0NoYW5nZUJ1ZmZlcih7XG4gICAgICAgICAgICB0cmFja1JlbW92YWxzOiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuLmJhdGNoLCByID0gaS5rZXlzKCk7XG4gICAgICAgICAgICBsZXQgbyA9IFJ0LnJlc29sdmUoKTtcbiAgICAgICAgICAgIHJldHVybiByLmZvckVhY2goKHQgPT4ge1xuICAgICAgICAgICAgICAgIG8gPSBvLm5leHQoKCgpID0+IHMuZ2V0RW50cnkoZSwgdCkpKS5uZXh0KChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgciA9IG4uZG9jVmVyc2lvbnMuZ2V0KHQpO1xuICAgICAgICAgICAgICAgICAgICBGKG51bGwgIT09IHIpLCBlLnZlcnNpb24uY29tcGFyZVRvKHIpIDwgMCAmJiAoaS5hcHBseVRvUmVtb3RlRG9jdW1lbnQoZSwgbiksIGUuaXNWYWxpZERvY3VtZW50KCkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAvLyBXZSB1c2UgdGhlIGNvbW1pdFZlcnNpb24gYXMgdGhlIHJlYWRUaW1lIHJhdGhlciB0aGFuIHRoZVxuICAgICAgICAgICAgICAgICAgICAvLyBkb2N1bWVudCdzIHVwZGF0ZVRpbWUgc2luY2UgdGhlIHVwZGF0ZVRpbWUgaXMgbm90IGFkdmFuY2VkXG4gICAgICAgICAgICAgICAgICAgIC8vIGZvciB1cGRhdGVzIHRoYXQgZG8gbm90IG1vZGlmeSB0aGUgdW5kZXJseWluZyBkb2N1bWVudC5cbiAgICAgICAgICAgICAgICAgICAgZS5zZXRSZWFkVGltZShuLmNvbW1pdFZlcnNpb24pLCBzLmFkZEVudHJ5KGUpKSk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLCBvLm5leHQoKCgpID0+IHQubXV0YXRpb25RdWV1ZS5yZW1vdmVNdXRhdGlvbkJhdGNoKGUsIGkpKSk7XG4gICAgICAgIH1cbiAgICAgICAgLyoqIFJldHVybnMgdGhlIGxvY2FsIHZpZXcgb2YgdGhlIGRvY3VtZW50cyBhZmZlY3RlZCBieSBhIG11dGF0aW9uIGJhdGNoLiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiwgdCwgZSwgaSkubmV4dCgoKCkgPT4gaS5hcHBseSh0KSkpLm5leHQoKCgpID0+IG4ubXV0YXRpb25RdWV1ZS5wZXJmb3JtQ29uc2lzdGVuY3lDaGVjayh0KSkpLm5leHQoKCgpID0+IG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUucmVtb3ZlT3ZlcmxheXNGb3JCYXRjaElkKHQsIHMsIGUuYmF0Y2guYmF0Y2hJZCkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLnJlY2FsY3VsYXRlQW5kU2F2ZU92ZXJsYXlzRm9yRG9jdW1lbnRLZXlzKHQsIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGxldCBlID0gZ3MoKTtcbiAgICAgICAgICAgIGZvciAobGV0IG4gPSAwOyBuIDwgdC5tdXRhdGlvblJlc3VsdHMubGVuZ3RoOyArK24pIHtcbiAgICAgICAgICAgICAgICB0Lm11dGF0aW9uUmVzdWx0c1tuXS50cmFuc2Zvcm1SZXN1bHRzLmxlbmd0aCA+IDAgJiYgKGUgPSBlLmFkZCh0LmJhdGNoLm11dGF0aW9uc1tuXS5rZXkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBlO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVtb3ZlcyBtdXRhdGlvbnMgZnJvbSB0aGUgTXV0YXRpb25RdWV1ZSBmb3IgdGhlIHNwZWNpZmllZCBiYXRjaDtcbiAqIExvY2FsRG9jdW1lbnRzIHdpbGwgYmUgcmVjYWxjdWxhdGVkLlxuICpcbiAqIEByZXR1cm5zIFRoZSByZXN1bHRpbmcgbW9kaWZpZWQgZG9jdW1lbnRzLlxuICovIChlKSkpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0LCBzKSkpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBsYXN0IGNvbnNpc3RlbnQgc25hcHNob3QgcHJvY2Vzc2VkICh1c2VkIGJ5IHRoZSBSZW1vdGVTdG9yZSB0b1xuICogZGV0ZXJtaW5lIHdoZXRoZXIgdG8gYnVmZmVyIGluY29taW5nIHNuYXBzaG90cyBmcm9tIHRoZSBiYWNrZW5kKS5cbiAqL1xuZnVuY3Rpb24gb3UodCkge1xuICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgIHJldHVybiBlLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IGxhc3QgcmVtb3RlIHNuYXBzaG90IHZlcnNpb25cIiwgXCJyZWFkb25seVwiLCAodCA9PiBlLkJzLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkpKTtcbn1cblxuLyoqXG4gKiBVcGRhdGVzIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpIGRvY3VtZW50cy4gV2UgYXNzdW1lIHRoYXQgdGhlIHJlbW90ZVxuICogZXZlbnQgcmVmbGVjdHMgYW55IHdyaXRlIGJhdGNoZXMgdGhhdCBoYXZlIGJlZW4gYWNrbm93bGVkZ2VkIG9yIHJlamVjdGVkXG4gKiAoaS5lLiB3ZSBkbyBub3QgcmUtYXBwbHkgbG9jYWwgbXV0YXRpb25zIHRvIHVwZGF0ZXMgZnJvbSB0aGlzIGV2ZW50KS5cbiAqXG4gKiBMb2NhbERvY3VtZW50cyBhcmUgcmUtY2FsY3VsYXRlZCBpZiB0aGVyZSBhcmUgcmVtYWluaW5nIG11dGF0aW9ucyBpbiB0aGVcbiAqIHF1ZXVlLlxuICovIGZ1bmN0aW9uIHV1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IGUuc25hcHNob3RWZXJzaW9uO1xuICAgIGxldCBpID0gbi5KaTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFwcGx5IHJlbW90ZSBldmVudFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgciA9IG4uWmkubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgICAgIHRyYWNrUmVtb3ZhbHM6ICEwXG4gICAgICAgIH0pO1xuICAgICAgICAvLyBSZXNldCBuZXdUYXJnZXREYXRhQnlUYXJnZXRNYXAgaW4gY2FzZSB0aGlzIHRyYW5zYWN0aW9uIGdldHMgcmUtcnVuLlxuICAgICAgICAgICAgICAgIGkgPSBuLkppO1xuICAgICAgICBjb25zdCBvID0gW107XG4gICAgICAgIGUudGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgociwgdSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgYyA9IGkuZ2V0KHUpO1xuICAgICAgICAgICAgaWYgKCFjKSByZXR1cm47XG4gICAgICAgICAgICAvLyBPbmx5IHVwZGF0ZSB0aGUgcmVtb3RlIGtleXMgaWYgdGhlIHRhcmdldCBpcyBzdGlsbCBhY3RpdmUuIFRoaXNcbiAgICAgICAgICAgIC8vIGVuc3VyZXMgdGhhdCB3ZSBjYW4gcGVyc2lzdCB0aGUgdXBkYXRlZCB0YXJnZXQgZGF0YSBhbG9uZyB3aXRoXG4gICAgICAgICAgICAvLyB0aGUgdXBkYXRlZCBhc3NpZ25tZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgby5wdXNoKG4uQnMucmVtb3ZlTWF0Y2hpbmdLZXlzKHQsIHIucmVtb3ZlZERvY3VtZW50cywgdSkubmV4dCgoKCkgPT4gbi5Ccy5hZGRNYXRjaGluZ0tleXModCwgci5hZGRlZERvY3VtZW50cywgdSkpKSk7XG4gICAgICAgICAgICBsZXQgYSA9IGMud2l0aFNlcXVlbmNlTnVtYmVyKHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKTtcbiAgICAgICAgICAgIG51bGwgIT09IGUudGFyZ2V0TWlzbWF0Y2hlcy5nZXQodSkgPyBhID0gYS53aXRoUmVzdW1lVG9rZW4oVmUuRU1QVFlfQllURV9TVFJJTkcsIHJ0Lm1pbigpKS53aXRoTGFzdExpbWJvRnJlZVNuYXBzaG90VmVyc2lvbihydC5taW4oKSkgOiByLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgJiYgKGEgPSBhLndpdGhSZXN1bWVUb2tlbihyLnJlc3VtZVRva2VuLCBzKSksIFxuICAgICAgICAgICAgaSA9IGkuaW5zZXJ0KHUsIGEpLCBcbiAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgdGFyZ2V0IGRhdGEgaWYgdGhlcmUgYXJlIHRhcmdldCBjaGFuZ2VzIChvciBpZlxuICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0aW1lIGhhcyBwYXNzZWQgc2luY2UgdGhlIGxhc3QgdXBkYXRlKS5cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBuZXdUYXJnZXREYXRhIHNob3VsZCBiZSBwZXJzaXN0ZWQgZHVyaW5nIGFuIHVwZGF0ZSBvZlxuICogYW4gYWN0aXZlIHRhcmdldC4gVGFyZ2V0RGF0YSBzaG91bGQgYWx3YXlzIGJlIHBlcnNpc3RlZCB3aGVuIGEgdGFyZ2V0IGlzXG4gKiBiZWluZyByZWxlYXNlZCBhbmQgc2hvdWxkIG5vdCBjYWxsIHRoaXMgZnVuY3Rpb24uXG4gKlxuICogV2hpbGUgdGhlIHRhcmdldCBpcyBhY3RpdmUsIFRhcmdldERhdGEgdXBkYXRlcyBjYW4gYmUgb21pdHRlZCB3aGVuIG5vdGhpbmdcbiAqIGFib3V0IHRoZSB0YXJnZXQgaGFzIGNoYW5nZWQgZXhjZXB0IG1ldGFkYXRhIGxpa2UgdGhlIHJlc3VtZSB0b2tlbiBvclxuICogc25hcHNob3QgdmVyc2lvbi4gT2NjYXNpb25hbGx5IGl0J3Mgd29ydGggdGhlIGV4dHJhIHdyaXRlIHRvIHByZXZlbnQgdGhlc2VcbiAqIHZhbHVlcyBmcm9tIGdldHRpbmcgdG9vIHN0YWxlIGFmdGVyIGEgY3Jhc2gsIGJ1dCB0aGlzIGRvZXNuJ3QgaGF2ZSB0byBiZVxuICogdG9vIGZyZXF1ZW50LlxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICAgICAgLy8gQWx3YXlzIHBlcnNpc3QgdGFyZ2V0IGRhdGEgaWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGEgcmVzdW1lIHRva2VuLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0LnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSkgcmV0dXJuICEwO1xuICAgICAgICAgICAgICAgIC8vIERvbid0IGFsbG93IHJlc3VtZSB0b2tlbiBjaGFuZ2VzIHRvIGJlIGJ1ZmZlcmVkIGluZGVmaW5pdGVseS4gVGhpc1xuICAgICAgICAgICAgICAgIC8vIGFsbG93cyB1cyB0byBiZSByZWFzb25hYmx5IHVwLXRvLWRhdGUgYWZ0ZXIgYSBjcmFzaCBhbmQgYXZvaWRzIG5lZWRpbmdcbiAgICAgICAgICAgICAgICAvLyB0byBsb29wIG92ZXIgYWxsIGFjdGl2ZSBxdWVyaWVzIG9uIHNodXRkb3duLiBFc3BlY2lhbGx5IGluIHRoZSBicm93c2VyXG4gICAgICAgICAgICAgICAgLy8gd2UgbWF5IG5vdCBnZXQgdGltZSB0byBkbyBhbnl0aGluZyBpbnRlcmVzdGluZyB3aGlsZSB0aGUgY3VycmVudCB0YWIgaXNcbiAgICAgICAgICAgICAgICAvLyBjbG9zaW5nLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZS5zbmFwc2hvdFZlcnNpb24udG9NaWNyb3NlY29uZHMoKSAtIHQuc25hcHNob3RWZXJzaW9uLnRvTWljcm9zZWNvbmRzKCkgPj0gM2U4KSByZXR1cm4gITA7XG4gICAgICAgICAgICAgICAgLy8gT3RoZXJ3aXNlIGlmIHRoZSBvbmx5IHRoaW5nIHRoYXQgaGFzIGNoYW5nZWQgYWJvdXQgYSB0YXJnZXQgaXMgaXRzIHJlc3VtZVxuICAgICAgICAgICAgICAgIC8vIHRva2VuIGl0J3Mgbm90IHdvcnRoIHBlcnNpc3RpbmcuIE5vdGUgdGhhdCB0aGUgUmVtb3RlU3RvcmUga2VlcHMgYW5cbiAgICAgICAgICAgICAgICAvLyBpbi1tZW1vcnkgdmlldyBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSB0YXJnZXRzIHdoaWNoIGluY2x1ZGVzIHRoZSBjdXJyZW50XG4gICAgICAgICAgICAgICAgLy8gcmVzdW1lIHRva2VuLCBzbyBzdHJlYW0gZmFpbHVyZSBvciB1c2VyIGNoYW5nZXMgd2lsbCBzdGlsbCB1c2UgYW5cbiAgICAgICAgICAgICAgICAvLyB1cC10by1kYXRlIHJlc3VtZSB0b2tlbiByZWdhcmRsZXNzIG9mIHdoYXQgd2UgZG8gaGVyZS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uYWRkZWREb2N1bWVudHMuc2l6ZSArIG4ubW9kaWZpZWREb2N1bWVudHMuc2l6ZSArIG4ucmVtb3ZlZERvY3VtZW50cy5zaXplID4gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogTm90aWZpZXMgbG9jYWwgc3RvcmUgb2YgdGhlIGNoYW5nZWQgdmlld3MgdG8gbG9jYWxseSBwaW4gZG9jdW1lbnRzLlxuICovIChjLCBhLCByKSAmJiBvLnB1c2gobi5Ccy51cGRhdGVUYXJnZXREYXRhKHQsIGEpKTtcbiAgICAgICAgfSkpO1xuICAgICAgICBsZXQgdSA9IGNzKCksIGMgPSBncygpO1xuICAgICAgICAvLyBIQUNLOiBUaGUgb25seSByZWFzb24gd2UgYWxsb3cgYSBudWxsIHNuYXBzaG90IHZlcnNpb24gaXMgc28gdGhhdCB3ZVxuICAgICAgICAvLyBjYW4gc3ludGhlc2l6ZSByZW1vdGUgZXZlbnRzIHdoZW4gd2UgZ2V0IHBlcm1pc3Npb24gZGVuaWVkIGVycm9ycyB3aGlsZVxuICAgICAgICAvLyB0cnlpbmcgdG8gcmVzb2x2ZSB0aGUgc3RhdGUgb2YgYSBsb2NhbGx5IGNhY2hlZCBkb2N1bWVudCB0aGF0IGlzIGluXG4gICAgICAgIC8vIGxpbWJvLlxuICAgICAgICBpZiAoZS5kb2N1bWVudFVwZGF0ZXMuZm9yRWFjaCgocyA9PiB7XG4gICAgICAgICAgICBlLnJlc29sdmVkTGltYm9Eb2N1bWVudHMuaGFzKHMpICYmIG8ucHVzaChuLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLnVwZGF0ZUxpbWJvRG9jdW1lbnQodCwgcykpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBFYWNoIGxvb3AgaXRlcmF0aW9uIG9ubHkgYWZmZWN0cyBpdHMgXCJvd25cIiBkb2MsIHNvIGl0J3Mgc2FmZSB0byBnZXQgYWxsXG4gICAgICAgIC8vIHRoZSByZW1vdGUgZG9jdW1lbnRzIGluIGFkdmFuY2UgaW4gYSBzaW5nbGUgY2FsbC5cbiAgICAgICAgby5wdXNoKGN1KHQsIHIsIGUuZG9jdW1lbnRVcGRhdGVzKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgIHUgPSB0Lm5yLCBjID0gdC5zcjtcbiAgICAgICAgfSkpKSwgIXMuaXNFcXVhbChydC5taW4oKSkpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBuLkJzLmdldExhc3RSZW1vdGVTbmFwc2hvdFZlcnNpb24odCkubmV4dCgoZSA9PiBuLkJzLnNldFRhcmdldHNNZXRhZGF0YSh0LCB0LmN1cnJlbnRTZXF1ZW5jZU51bWJlciwgcykpKTtcbiAgICAgICAgICAgIG8ucHVzaChlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gUnQud2FpdEZvcihvKS5uZXh0KCgoKSA9PiByLmFwcGx5KHQpKSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRMb2NhbFZpZXdPZkRvY3VtZW50cyh0LCB1LCBjKSkpLm5leHQoKCgpID0+IHUpKTtcbiAgICB9KSkudGhlbigodCA9PiAobi5KaSA9IGksIHQpKSk7XG59XG5cbi8qKlxuICogUG9wdWxhdGVzIGRvY3VtZW50IGNoYW5nZSBidWZmZXIgd2l0aCBkb2N1bWVudHMgZnJvbSBiYWNrZW5kIG9yIGEgYnVuZGxlLlxuICogUmV0dXJucyB0aGUgZG9jdW1lbnQgY2hhbmdlcyByZXN1bHRpbmcgZnJvbSBhcHBseWluZyB0aG9zZSBkb2N1bWVudHMsIGFuZFxuICogYWxzbyBhIHNldCBvZiBkb2N1bWVudHMgd2hvc2UgZXhpc3RlbmNlIHN0YXRlIGFyZSBjaGFuZ2VkIGFzIGEgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSB0eG4gLSBUcmFuc2FjdGlvbiB0byB1c2UgdG8gcmVhZCBleGlzdGluZyBkb2N1bWVudHMgZnJvbSBzdG9yYWdlLlxuICogQHBhcmFtIGRvY3VtZW50QnVmZmVyIC0gRG9jdW1lbnQgYnVmZmVyIHRvIGNvbGxlY3QgdGhlIHJlc3VsdGVkIGNoYW5nZXMgdG8gYmVcbiAqICAgICAgICBhcHBsaWVkIHRvIHN0b3JhZ2UuXG4gKiBAcGFyYW0gZG9jdW1lbnRzIC0gRG9jdW1lbnRzIHRvIGJlIGFwcGxpZWQuXG4gKi8gZnVuY3Rpb24gY3UodCwgZSwgbikge1xuICAgIGxldCBzID0gZ3MoKSwgaSA9IGdzKCk7XG4gICAgcmV0dXJuIG4uZm9yRWFjaCgodCA9PiBzID0gcy5hZGQodCkpKSwgZS5nZXRFbnRyaWVzKHQsIHMpLm5leHQoKHQgPT4ge1xuICAgICAgICBsZXQgcyA9IGNzKCk7XG4gICAgICAgIHJldHVybiBuLmZvckVhY2goKChuLCByKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBvID0gdC5nZXQobik7XG4gICAgICAgICAgICAvLyBDaGVjayBpZiBzZWUgaWYgdGhlcmUgaXMgYSBleGlzdGVuY2Ugc3RhdGUgY2hhbmdlIGZvciB0aGlzIGRvY3VtZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgci5pc0ZvdW5kRG9jdW1lbnQoKSAhPT0gby5pc0ZvdW5kRG9jdW1lbnQoKSAmJiAoaSA9IGkuYWRkKG4pKSwgXG4gICAgICAgICAgICAvLyBOb3RlOiBUaGUgb3JkZXIgb2YgdGhlIHN0ZXBzIGJlbG93IGlzIGltcG9ydGFudCwgc2luY2Ugd2Ugd2FudFxuICAgICAgICAgICAgLy8gdG8gZW5zdXJlIHRoYXQgcmVqZWN0ZWQgbGltYm8gcmVzb2x1dGlvbnMgKHdoaWNoIGZhYnJpY2F0ZVxuICAgICAgICAgICAgLy8gTm9Eb2N1bWVudHMgd2l0aCBTbmFwc2hvdFZlcnNpb24ubWluKCkpIG5ldmVyIGFkZCBkb2N1bWVudHMgdG9cbiAgICAgICAgICAgIC8vIGNhY2hlLlxuICAgICAgICAgICAgci5pc05vRG9jdW1lbnQoKSAmJiByLnZlcnNpb24uaXNFcXVhbChydC5taW4oKSkgPyAoXG4gICAgICAgICAgICAvLyBOb0RvY3VtZW50cyB3aXRoIFNuYXBzaG90VmVyc2lvbi5taW4oKSBhcmUgdXNlZCBpbiBtYW51ZmFjdHVyZWRcbiAgICAgICAgICAgIC8vIGV2ZW50cy4gV2UgcmVtb3ZlIHRoZXNlIGRvY3VtZW50cyBmcm9tIGNhY2hlIHNpbmNlIHdlIGxvc3RcbiAgICAgICAgICAgIC8vIGFjY2Vzcy5cbiAgICAgICAgICAgIGUucmVtb3ZlRW50cnkobiwgci5yZWFkVGltZSksIHMgPSBzLmluc2VydChuLCByKSkgOiAhby5pc1ZhbGlkRG9jdW1lbnQoKSB8fCByLnZlcnNpb24uY29tcGFyZVRvKG8udmVyc2lvbikgPiAwIHx8IDAgPT09IHIudmVyc2lvbi5jb21wYXJlVG8oby52ZXJzaW9uKSAmJiBvLmhhc1BlbmRpbmdXcml0ZXMgPyAoZS5hZGRFbnRyeShyKSwgXG4gICAgICAgICAgICBzID0gcy5pbnNlcnQobiwgcikpIDogTihcIkxvY2FsU3RvcmVcIiwgXCJJZ25vcmluZyBvdXRkYXRlZCB3YXRjaCB1cGRhdGUgZm9yIFwiLCBuLCBcIi4gQ3VycmVudCB2ZXJzaW9uOlwiLCBvLnZlcnNpb24sIFwiIFdhdGNoIHZlcnNpb246XCIsIHIudmVyc2lvbik7XG4gICAgICAgIH0pKSwge1xuICAgICAgICAgICAgbnI6IHMsXG4gICAgICAgICAgICBzcjogaVxuICAgICAgICB9O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBHZXRzIHRoZSBtdXRhdGlvbiBiYXRjaCBhZnRlciB0aGUgcGFzc2VkIGluIGJhdGNoSWQgaW4gdGhlIG11dGF0aW9uIHF1ZXVlXG4gKiBvciBudWxsIGlmIGVtcHR5LlxuICogQHBhcmFtIGFmdGVyQmF0Y2hJZCAtIElmIHByb3ZpZGVkLCB0aGUgYmF0Y2ggdG8gc2VhcmNoIGFmdGVyLlxuICogQHJldHVybnMgVGhlIG5leHQgbXV0YXRpb24gb3IgbnVsbCBpZiB0aGVyZSB3YXNuJ3Qgb25lLlxuICovXG5mdW5jdGlvbiBhdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgbmV4dCBtdXRhdGlvbiBiYXRjaFwiLCBcInJlYWRvbmx5XCIsICh0ID0+ICh2b2lkIDAgPT09IGUgJiYgKGUgPSAtMSksIFxuICAgIG4ubXV0YXRpb25RdWV1ZS5nZXROZXh0TXV0YXRpb25CYXRjaEFmdGVyQmF0Y2hJZCh0LCBlKSkpKTtcbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgY3VycmVudCB2YWx1ZSBvZiBhIERvY3VtZW50IHdpdGggYSBnaXZlbiBrZXkgb3IgbnVsbCBpZiBub3RcbiAqIGZvdW5kIC0gdXNlZCBmb3IgdGVzdGluZy5cbiAqL1xuLyoqXG4gKiBBc3NpZ25zIHRoZSBnaXZlbiB0YXJnZXQgYW4gaW50ZXJuYWwgSUQgc28gdGhhdCBpdHMgcmVzdWx0cyBjYW4gYmUgcGlubmVkIHNvXG4gKiB0aGV5IGRvbid0IGdldCBHQydkLiBBIHRhcmdldCBtdXN0IGJlIGFsbG9jYXRlZCBpbiB0aGUgbG9jYWwgc3RvcmUgYmVmb3JlXG4gKiB0aGUgc3RvcmUgY2FuIGJlIHVzZWQgdG8gbWFuYWdlIGl0cyB2aWV3LlxuICpcbiAqIEFsbG9jYXRpbmcgYW4gYWxyZWFkeSBhbGxvY2F0ZWQgYFRhcmdldGAgd2lsbCByZXR1cm4gdGhlIGV4aXN0aW5nIGBUYXJnZXREYXRhYFxuICogZm9yIHRoYXQgYFRhcmdldGAuXG4gKi9cbmZ1bmN0aW9uIGh1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIkFsbG9jYXRlIHRhcmdldFwiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgIGxldCBzO1xuICAgICAgICByZXR1cm4gbi5Ccy5nZXRUYXJnZXREYXRhKHQsIGUpLm5leHQoKGkgPT4gaSA/IChcbiAgICAgICAgLy8gVGhpcyB0YXJnZXQgaGFzIGJlZW4gbGlzdGVuZWQgdG8gcHJldmlvdXNseSwgc28gcmV1c2UgdGhlXG4gICAgICAgIC8vIHByZXZpb3VzIHRhcmdldElELlxuICAgICAgICAvLyBUT0RPKG1jZyk6IGZyZXNoZW4gbGFzdCBhY2Nlc3NlZCBkYXRlP1xuICAgICAgICBzID0gaSwgUnQucmVzb2x2ZShzKSkgOiBuLkJzLmFsbG9jYXRlVGFyZ2V0SWQodCkubmV4dCgoaSA9PiAocyA9IG5ldyBjcihlLCBpLCBcIlRhcmdldFB1cnBvc2VMaXN0ZW5cIiAvKiBUYXJnZXRQdXJwb3NlLkxpc3RlbiAqLyAsIHQuY3VycmVudFNlcXVlbmNlTnVtYmVyKSwgXG4gICAgICAgIG4uQnMuYWRkVGFyZ2V0RGF0YSh0LCBzKS5uZXh0KCgoKSA9PiBzKSkpKSkpKTtcbiAgICB9KSkudGhlbigodCA9PiB7XG4gICAgICAgIC8vIElmIE11bHRpLVRhYiBpcyBlbmFibGVkLCB0aGUgZXhpc3RpbmcgdGFyZ2V0IGRhdGEgbWF5IGJlIG5ld2VyIHRoYW5cbiAgICAgICAgLy8gdGhlIGluLW1lbW9yeSBkYXRhXG4gICAgICAgIGNvbnN0IHMgPSBuLkppLmdldCh0LnRhcmdldElkKTtcbiAgICAgICAgcmV0dXJuIChudWxsID09PSBzIHx8IHQuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhzLnNuYXBzaG90VmVyc2lvbikgPiAwKSAmJiAobi5KaSA9IG4uSmkuaW5zZXJ0KHQudGFyZ2V0SWQsIHQpLCBcbiAgICAgICAgbi5ZaS5zZXQoZSwgdC50YXJnZXRJZCkpLCB0O1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRoZSBUYXJnZXREYXRhIGFzIHNlZW4gYnkgdGhlIExvY2FsU3RvcmUsIGluY2x1ZGluZyB1cGRhdGVzIHRoYXQgbWF5XG4gKiBoYXZlIG5vdCB5ZXQgYmVlbiBwZXJzaXN0ZWQgdG8gdGhlIFRhcmdldENhY2hlLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nLlxuLyoqXG4gKiBVbnBpbnMgYWxsIHRoZSBkb2N1bWVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBnaXZlbiB0YXJnZXQuIElmXG4gKiBga2VlcFBlcnNpc3RlZFRhcmdldERhdGFgIGlzIHNldCB0byBmYWxzZSBhbmQgRWFnZXIgR0MgZW5hYmxlZCwgdGhlIG1ldGhvZFxuICogZGlyZWN0bHkgcmVtb3ZlcyB0aGUgYXNzb2NpYXRlZCB0YXJnZXQgZGF0YSBmcm9tIHRoZSB0YXJnZXQgY2FjaGUuXG4gKlxuICogUmVsZWFzaW5nIGEgbm9uLWV4aXN0aW5nIGBUYXJnZXRgIGlzIGEgbm8tb3AuXG4gKi9cbi8vIFBPUlRJTkcgTk9URTogYGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhYCBpcyBtdWx0aS10YWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGx1KHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KSwgaSA9IHMuSmkuZ2V0KGUpLCByID0gbiA/IFwicmVhZHdyaXRlXCIgOiBcInJlYWR3cml0ZS1wcmltYXJ5XCI7XG4gICAgdHJ5IHtcbiAgICAgICAgbiB8fCBhd2FpdCBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiUmVsZWFzZSB0YXJnZXRcIiwgciwgKHQgPT4gcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5yZW1vdmVUYXJnZXQodCwgaSkpKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGlmICghRHQodCkpIHRocm93IHQ7XG4gICAgICAgIC8vIEFsbCBgcmVsZWFzZVRhcmdldGAgZG9lcyBpcyByZWNvcmQgdGhlIGZpbmFsIG1ldGFkYXRhIHN0YXRlIGZvciB0aGVcbiAgICAgICAgLy8gdGFyZ2V0LCBidXQgd2UndmUgYmVlbiByZWNvcmRpbmcgdGhpcyBwZXJpb2RpY2FsbHkgZHVyaW5nIHRhcmdldFxuICAgICAgICAvLyBhY3Rpdml0eS4gSWYgd2UgbG9zZSB0aGlzIHdyaXRlIHRoaXMgY291bGQgY2F1c2UgYSB2ZXJ5IHNsaWdodFxuICAgICAgICAvLyBkaWZmZXJlbmNlIGluIHRoZSBvcmRlciBvZiB0YXJnZXQgZGVsZXRpb24gZHVyaW5nIEdDLCBidXQgd2VcbiAgICAgICAgLy8gZG9uJ3QgZGVmaW5lIGV4YWN0IExSVSBzZW1hbnRpY3Mgc28gdGhpcyBpcyBhY2NlcHRhYmxlLlxuICAgICAgICBOKFwiTG9jYWxTdG9yZVwiLCBgRmFpbGVkIHRvIHVwZGF0ZSBzZXF1ZW5jZSBudW1iZXJzIGZvciB0YXJnZXQgJHtlfTogJHt0fWApO1xuICAgIH1cbiAgICBzLkppID0gcy5KaS5yZW1vdmUoZSksIHMuWWkuZGVsZXRlKGkudGFyZ2V0KTtcbn1cblxuLyoqXG4gKiBSdW5zIHRoZSBzcGVjaWZpZWQgcXVlcnkgYWdhaW5zdCB0aGUgbG9jYWwgc3RvcmUgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMsXG4gKiBwb3RlbnRpYWxseSB0YWtpbmcgYWR2YW50YWdlIG9mIHF1ZXJ5IGRhdGEgZnJvbSBwcmV2aW91cyBleGVjdXRpb25zIChzdWNoXG4gKiBhcyB0aGUgc2V0IG9mIHJlbW90ZSBrZXlzKS5cbiAqXG4gKiBAcGFyYW0gdXNlUHJldmlvdXNSZXN1bHRzIC0gV2hldGhlciByZXN1bHRzIGZyb20gcHJldmlvdXMgZXhlY3V0aW9ucyBjYW5cbiAqIGJlIHVzZWQgdG8gb3B0aW1pemUgdGhpcyBxdWVyeSBleGVjdXRpb24uXG4gKi8gZnVuY3Rpb24gZnUodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpO1xuICAgIGxldCBpID0gcnQubWluKCksIHIgPSBncygpO1xuICAgIHJldHVybiBzLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiRXhlY3V0ZSBxdWVyeVwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEwodCksIGkgPSBzLllpLmdldChuKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgMCAhPT0gaSA/IFJ0LnJlc29sdmUocy5KaS5nZXQoaSkpIDogcy5Ccy5nZXRUYXJnZXREYXRhKGUsIG4pO1xuICAgIH0ocywgdCwgSm4oZSkpLm5leHQoKGUgPT4ge1xuICAgICAgICBpZiAoZSkgcmV0dXJuIGkgPSBlLmxhc3RMaW1ib0ZyZWVTbmFwc2hvdFZlcnNpb24sIHMuQnMuZ2V0TWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgZS50YXJnZXRJZCkubmV4dCgodCA9PiB7XG4gICAgICAgICAgICByID0gdDtcbiAgICAgICAgfSkpO1xuICAgIH0pKS5uZXh0KCgoKSA9PiBzLkhpLmdldERvY3VtZW50c01hdGNoaW5nUXVlcnkodCwgZSwgbiA/IGkgOiBydC5taW4oKSwgbiA/IHIgOiBncygpKSkpLm5leHQoKHQgPT4gKF91KHMsIHNzKGUpLCB0KSwgXG4gICAge1xuICAgICAgICBkb2N1bWVudHM6IHQsXG4gICAgICAgIGlyOiByXG4gICAgfSkpKSkpO1xufVxuXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuZnVuY3Rpb24gZHUodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gTChuLkJzKSwgaSA9IG4uSmkuZ2V0KGUpO1xuICAgIHJldHVybiBpID8gUHJvbWlzZS5yZXNvbHZlKGkudGFyZ2V0KSA6IG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgdGFyZ2V0IGRhdGFcIiwgXCJyZWFkb25seVwiLCAodCA9PiBzLmxlKHQsIGUpLm5leHQoKHQgPT4gdCA/IHQudGFyZ2V0IDogbnVsbCkpKSk7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgc2V0IG9mIGRvY3VtZW50cyB0aGF0IGhhdmUgYmVlbiB1cGRhdGVkIHNpbmNlIHRoZSBsYXN0IGNhbGwuXG4gKiBJZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCByZXR1cm5zIHRoZSBzZXQgb2YgY2hhbmdlcyBzaW5jZSBjbGllbnRcbiAqIGluaXRpYWxpemF0aW9uLiBGdXJ0aGVyIGludm9jYXRpb25zIHdpbGwgcmV0dXJuIGRvY3VtZW50IHRoYXQgaGF2ZSBjaGFuZ2VkXG4gKiBzaW5jZSB0aGUgcHJpb3IgY2FsbC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIHd1KHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IG4uWGkuZ2V0KGUpIHx8IHJ0Lm1pbigpO1xuICAgIC8vIEdldCB0aGUgY3VycmVudCBtYXhpbXVtIHJlYWQgdGltZSBmb3IgdGhlIGNvbGxlY3Rpb24uIFRoaXMgc2hvdWxkIGFsd2F5c1xuICAgIC8vIGV4aXN0LCBidXQgdG8gcmVkdWNlIHRoZSBjaGFuY2UgZm9yIHJlZ3Jlc3Npb25zIHdlIGRlZmF1bHQgdG9cbiAgICAvLyBTbmFwc2hvdFZlcnNpb24uTWluKClcbiAgICAvLyBUT0RPKGluZGV4aW5nKTogQ29uc2lkZXIgcmVtb3ZpbmcgdGhlIGRlZmF1bHQgdmFsdWUuXG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5ldyBkb2N1bWVudCBjaGFuZ2VzXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5aaS5nZXRBbGxGcm9tQ29sbGVjdGlvbkdyb3VwKHQsIGUsIHl0KHMsIC0xKSwgXG4gICAgLyogbGltaXQ9ICovIE51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSkpLnRoZW4oKHQgPT4gKF91KG4sIGUsIHQpLCB0KSkpO1xufVxuXG4vKiogU2V0cyB0aGUgY29sbGVjdGlvbiBncm91cCdzIG1heGltdW0gcmVhZCB0aW1lIGZyb20gdGhlIGdpdmVuIGRvY3VtZW50cy4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBfdSh0LCBlLCBuKSB7XG4gICAgbGV0IHMgPSB0LlhpLmdldChlKSB8fCBydC5taW4oKTtcbiAgICBuLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgIGUucmVhZFRpbWUuY29tcGFyZVRvKHMpID4gMCAmJiAocyA9IGUucmVhZFRpbWUpO1xuICAgIH0pKSwgdC5YaS5zZXQoZSwgcyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB0YXJnZXQgdXNpbmcgdGhlIGdpdmVuIGJ1bmRsZSBuYW1lLCB3aGljaCB3aWxsIGJlIHVzZWQgdG9cbiAqIGhvbGQgdGhlIGtleXMgb2YgYWxsIGRvY3VtZW50cyBmcm9tIHRoZSBidW5kbGUgaW4gcXVlcnktZG9jdW1lbnQgbWFwcGluZ3MuXG4gKiBUaGlzIGVuc3VyZXMgdGhhdCB0aGUgbG9hZGVkIGRvY3VtZW50cyBkbyBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkXG4gKiByaWdodCBhd2F5LlxuICovXG4vKipcbiAqIEFwcGxpZXMgdGhlIGRvY3VtZW50cyBmcm9tIGEgYnVuZGxlIHRvIHRoZSBcImdyb3VuZC1zdGF0ZVwiIChyZW1vdGUpXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTG9jYWxEb2N1bWVudHMgYXJlIHJlLWNhbGN1bGF0ZWQgaWYgdGhlcmUgYXJlIHJlbWFpbmluZyBtdXRhdGlvbnMgaW4gdGhlXG4gKiBxdWV1ZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gbXUodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBMKHQpO1xuICAgIGxldCByID0gZ3MoKSwgbyA9IGNzKCk7XG4gICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgY29uc3QgbiA9IGUucnIodC5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgdC5kb2N1bWVudCAmJiAociA9IHIuYWRkKG4pKTtcbiAgICAgICAgY29uc3QgcyA9IGUudXIodCk7XG4gICAgICAgIHMuc2V0UmVhZFRpbWUoZS5jcih0Lm1ldGFkYXRhLnJlYWRUaW1lKSksIG8gPSBvLmluc2VydChuLCBzKTtcbiAgICB9XG4gICAgY29uc3QgdSA9IGkuWmkubmV3Q2hhbmdlQnVmZmVyKHtcbiAgICAgICAgdHJhY2tSZW1vdmFsczogITBcbiAgICB9KSwgYyA9IGF3YWl0IGh1KGksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgLy8gSXQgaXMgT0sgdGhhdCB0aGUgcGF0aCB1c2VkIGZvciB0aGUgcXVlcnkgaXMgbm90IHZhbGlkLCBiZWNhdXNlIHRoaXMgd2lsbFxuICAgICAgICAvLyBub3QgYmUgcmVhZCBhbmQgcXVlcmllZC5cbiAgICAgICAgcmV0dXJuIEpuKEduKHV0LmZyb21TdHJpbmcoYF9fYnVuZGxlX18vZG9jcy8ke3R9YCkpKTtcbiAgICB9KHMpKTtcbiAgICAvLyBBbGxvY2F0ZXMgYSB0YXJnZXQgdG8gaG9sZCBhbGwgZG9jdW1lbnQga2V5cyBmcm9tIHRoZSBidW5kbGUsIHN1Y2ggdGhhdFxuICAgIC8vIHRoZXkgd2lsbCBub3QgZ2V0IGdhcmJhZ2UgY29sbGVjdGVkIHJpZ2h0IGF3YXkuXG4gICAgICAgIHJldHVybiBpLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQXBwbHkgYnVuZGxlIGRvY3VtZW50c1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBjdSh0LCB1LCBvKS5uZXh0KChlID0+ICh1LmFwcGx5KHQpLCBcbiAgICBlKSkpLm5leHQoKGUgPT4gaS5Ccy5yZW1vdmVNYXRjaGluZ0tleXNGb3JUYXJnZXRJZCh0LCBjLnRhcmdldElkKS5uZXh0KCgoKSA9PiBpLkJzLmFkZE1hdGNoaW5nS2V5cyh0LCByLCBjLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkubG9jYWxEb2N1bWVudHMuZ2V0TG9jYWxWaWV3T2ZEb2N1bWVudHModCwgZS5uciwgZS5zcikpKS5uZXh0KCgoKSA9PiBlLm5yKSkpKSkpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBwcm9taXNlIG9mIGEgYm9vbGVhbiB0byBpbmRpY2F0ZSBpZiB0aGUgZ2l2ZW4gYnVuZGxlIGhhcyBhbHJlYWR5XG4gKiBiZWVuIGxvYWRlZCBhbmQgdGhlIGNyZWF0ZSB0aW1lIGlzIG5ld2VyIHRoYW4gdGhlIGN1cnJlbnQgbG9hZGluZyBidW5kbGUuXG4gKi9cbi8qKlxuICogU2F2ZXMgdGhlIGdpdmVuIGBOYW1lZFF1ZXJ5YCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ3UodCwgZSwgbiA9IGdzKCkpIHtcbiAgICAvLyBBbGxvY2F0ZSBhIHRhcmdldCBmb3IgdGhlIG5hbWVkIHF1ZXJ5IHN1Y2ggdGhhdCBpdCBjYW4gYmUgcmVzdW1lZFxuICAgIC8vIGZyb20gYXNzb2NpYXRlZCByZWFkIHRpbWUgaWYgdXNlcnMgdXNlIGl0IHRvIGxpc3Rlbi5cbiAgICAvLyBOT1RFOiB0aGlzIGFsc28gbWVhbnMgaWYgbm8gY29ycmVzcG9uZGluZyB0YXJnZXQgZXhpc3RzLCB0aGUgbmV3IHRhcmdldFxuICAgIC8vIHdpbGwgcmVtYWluIGFjdGl2ZSBhbmQgd2lsbCBub3QgZ2V0IGNvbGxlY3RlZCwgdW5sZXNzIHVzZXJzIGhhcHBlbiB0b1xuICAgIC8vIHVubGlzdGVuIHRoZSBxdWVyeSBzb21laG93LlxuICAgIGNvbnN0IHMgPSBhd2FpdCBodSh0LCBKbih5cihlLmJ1bmRsZWRRdWVyeSkpKSwgaSA9IEwodCk7XG4gICAgcmV0dXJuIGkucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJTYXZlIG5hbWVkIHF1ZXJ5XCIsIFwicmVhZHdyaXRlXCIsICh0ID0+IHtcbiAgICAgICAgY29uc3QgciA9IE5pKGUucmVhZFRpbWUpO1xuICAgICAgICAvLyBTaW1wbHkgc2F2ZSB0aGUgcXVlcnkgaXRzZWxmIGlmIGl0IGlzIG9sZGVyIHRoYW4gd2hhdCB0aGUgU0RLIGFscmVhZHlcbiAgICAgICAgLy8gaGFzLlxuICAgICAgICAgICAgICAgIGlmIChzLnNuYXBzaG90VmVyc2lvbi5jb21wYXJlVG8ocikgPj0gMCkgcmV0dXJuIGkucXMuc2F2ZU5hbWVkUXVlcnkodCwgZSk7XG4gICAgICAgIC8vIFVwZGF0ZSBleGlzdGluZyB0YXJnZXQgZGF0YSBiZWNhdXNlIHRoZSBxdWVyeSBmcm9tIHRoZSBidW5kbGUgaXMgbmV3ZXIuXG4gICAgICAgICAgICAgICAgY29uc3QgbyA9IHMud2l0aFJlc3VtZVRva2VuKFZlLkVNUFRZX0JZVEVfU1RSSU5HLCByKTtcbiAgICAgICAgcmV0dXJuIGkuSmkgPSBpLkppLmluc2VydChvLnRhcmdldElkLCBvKSwgaS5Ccy51cGRhdGVUYXJnZXREYXRhKHQsIG8pLm5leHQoKCgpID0+IGkuQnMucmVtb3ZlTWF0Y2hpbmdLZXlzRm9yVGFyZ2V0SWQodCwgcy50YXJnZXRJZCkpKS5uZXh0KCgoKSA9PiBpLkJzLmFkZE1hdGNoaW5nS2V5cyh0LCBuLCBzLnRhcmdldElkKSkpLm5leHQoKCgpID0+IGkucXMuc2F2ZU5hbWVkUXVlcnkodCwgZSkpKTtcbiAgICB9KSk7XG59XG5cbi8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24geXUodCwgZSkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX2NsaWVudHNfJHt0fV8ke2V9YDtcbn1cblxuLy8gVGhlIGZvcm1hdCBvZiB0aGUgV2ViU3RvcmFnZSBrZXkgdGhhdCBzdG9yZXMgdGhlIG11dGF0aW9uIHN0YXRlIGlzOlxuLy8gICAgIGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPlxuLy8gICAgIChmb3IgdW5hdXRoZW50aWNhdGVkIHVzZXJzKVxuLy8gb3I6IGZpcmVzdG9yZV9tdXRhdGlvbnNfPHBlcnNpc3RlbmNlX3ByZWZpeD5fPGJhdGNoX2lkPl88dXNlcl91aWQ+XG5cbi8vICd1c2VyX3VpZCcgaXMgbGFzdCB0byBhdm9pZCBuZWVkaW5nIHRvIGVzY2FwZSAnXycgY2hhcmFjdGVycyB0aGF0IGl0IG1pZ2h0XG4vLyBjb250YWluLlxuLyoqIEFzc2VtYmxlcyB0aGUga2V5IGZvciBhIG11dGF0aW9uIGJhdGNoIGluIFdlYlN0b3JhZ2UgKi9cbmZ1bmN0aW9uIHB1KHQsIGUsIG4pIHtcbiAgICBsZXQgcyA9IGBmaXJlc3RvcmVfbXV0YXRpb25zXyR7dH1fJHtufWA7XG4gICAgcmV0dXJuIGUuaXNBdXRoZW50aWNhdGVkKCkgJiYgKHMgKz0gYF8ke2UudWlkfWApLCBzO1xufVxuXG4vLyBUaGUgZm9ybWF0IG9mIHRoZSBXZWJTdG9yYWdlIGtleSB0aGF0IHN0b3JlcyBhIHF1ZXJ5IHRhcmdldCdzIG1ldGFkYXRhIGlzOlxuLy8gICAgIGZpcmVzdG9yZV90YXJnZXRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+Xzx0YXJnZXRfaWQ+XG4vKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIGEgcXVlcnkgc3RhdGUgaW4gV2ViU3RvcmFnZSAqL1xuZnVuY3Rpb24gSXUodCwgZSkge1xuICAgIHJldHVybiBgZmlyZXN0b3JlX3RhcmdldHNfJHt0fV8ke2V9YDtcbn1cblxuLy8gVGhlIFdlYlN0b3JhZ2UgcHJlZml4IHRoYXQgc3RvcmVzIHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZS4gVGhlXG4vLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbi8vICAgICBmaXJlc3RvcmVfb25saW5lX3N0YXRlXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XG4vKipcbiAqIEhvbGRzIHRoZSBzdGF0ZSBvZiBhIG11dGF0aW9uIGJhdGNoLCBpbmNsdWRpbmcgaXRzIHVzZXIgSUQsIGJhdGNoIElEIGFuZFxuICogd2hldGhlciB0aGUgYmF0Y2ggaXMgJ3BlbmRpbmcnLCAnYWNrbm93bGVkZ2VkJyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBUdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLnVzZXIgPSB0LCB0aGlzLmJhdGNoSWQgPSBlLCB0aGlzLnN0YXRlID0gbiwgdGhpcy5lcnJvciA9IHM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIE11dGF0aW9uTWV0YWRhdGEgZnJvbSBpdHMgSlNPTiByZXByZXNlbnRhdGlvbiBpbiBXZWJTdG9yYWdlLlxuICAgICAqIExvZ3MgYSB3YXJuaW5nIGFuZCByZXR1cm5zIG51bGwgaWYgdGhlIGZvcm1hdCBvZiB0aGUgZGF0YSBpcyBub3QgdmFsaWQuXG4gICAgICovICAgIHN0YXRpYyBhcih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKU09OLnBhcnNlKG4pO1xuICAgICAgICBsZXQgaSwgciA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIHMgJiYgLTEgIT09IFsgXCJwZW5kaW5nXCIsIFwiYWNrbm93bGVkZ2VkXCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yocy5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gcy5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBzLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIHIgJiYgcy5lcnJvciAmJiAociA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIHMuZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBzLmVycm9yLmNvZGUsIFxuICAgICAgICByICYmIChpID0gbmV3IFUocy5lcnJvci5jb2RlLCBzLmVycm9yLm1lc3NhZ2UpKSksIHIgPyBuZXcgVHUodCwgZSwgcy5zdGF0ZSwgaSkgOiAoayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgbXV0YXRpb24gc3RhdGUgZm9yIElEICcke2V9JzogJHtufWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxuICAgIGhyKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3IgJiYgKHQuZXJyb3IgPSB7XG4gICAgICAgICAgICBjb2RlOiB0aGlzLmVycm9yLmNvZGUsXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmVycm9yLm1lc3NhZ2VcbiAgICAgICAgfSksIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIb2xkcyB0aGUgc3RhdGUgb2YgYSBxdWVyeSB0YXJnZXQsIGluY2x1ZGluZyBpdHMgdGFyZ2V0IElEIGFuZCB3aGV0aGVyIHRoZVxuICogdGFyZ2V0IGlzICdub3QtY3VycmVudCcsICdjdXJyZW50JyBvciAncmVqZWN0ZWQnLlxuICovXG4vLyBWaXNpYmxlIGZvciB0ZXN0aW5nXG5jbGFzcyBFdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLnRhcmdldElkID0gdCwgdGhpcy5zdGF0ZSA9IGUsIHRoaXMuZXJyb3IgPSBuO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBRdWVyeVRhcmdldE1ldGFkYXRhIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgYXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gSlNPTi5wYXJzZShlKTtcbiAgICAgICAgbGV0IHMsIGkgPSBcIm9iamVjdFwiID09IHR5cGVvZiBuICYmIC0xICE9PSBbIFwibm90LWN1cnJlbnRcIiwgXCJjdXJyZW50XCIsIFwicmVqZWN0ZWRcIiBdLmluZGV4T2Yobi5zdGF0ZSkgJiYgKHZvaWQgMCA9PT0gbi5lcnJvciB8fCBcIm9iamVjdFwiID09IHR5cGVvZiBuLmVycm9yKTtcbiAgICAgICAgcmV0dXJuIGkgJiYgbi5lcnJvciAmJiAoaSA9IFwic3RyaW5nXCIgPT0gdHlwZW9mIG4uZXJyb3IubWVzc2FnZSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBuLmVycm9yLmNvZGUsIFxuICAgICAgICBpICYmIChzID0gbmV3IFUobi5lcnJvci5jb2RlLCBuLmVycm9yLm1lc3NhZ2UpKSksIGkgPyBuZXcgRXUodCwgbi5zdGF0ZSwgcykgOiAoayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgdGFyZ2V0IHN0YXRlIGZvciBJRCAnJHt0fSc6ICR7ZX1gKSwgXG4gICAgICAgIG51bGwpO1xuICAgIH1cbiAgICBocigpIHtcbiAgICAgICAgY29uc3QgdCA9IHtcbiAgICAgICAgICAgIHN0YXRlOiB0aGlzLnN0YXRlLFxuICAgICAgICAgICAgdXBkYXRlVGltZU1zOiBEYXRlLm5vdygpXG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzLmVycm9yICYmICh0LmVycm9yID0ge1xuICAgICAgICAgICAgY29kZTogdGhpcy5lcnJvci5jb2RlLFxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5lcnJvci5tZXNzYWdlXG4gICAgICAgIH0pLCBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogVGhpcyBjbGFzcyByZXByZXNlbnRzIHRoZSBpbW11dGFibGUgQ2xpZW50U3RhdGUgZm9yIGEgY2xpZW50IHJlYWQgZnJvbVxuICogV2ViU3RvcmFnZSwgY29udGFpbmluZyB0aGUgbGlzdCBvZiBhY3RpdmUgcXVlcnkgdGFyZ2V0cy5cbiAqLyBjbGFzcyBBdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBSZW1vdGVDbGllbnRTdGF0ZSBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIGluIFdlYlN0b3JhZ2UuXG4gICAgICogTG9ncyBhIHdhcm5pbmcgYW5kIHJldHVybnMgbnVsbCBpZiB0aGUgZm9ybWF0IG9mIHRoZSBkYXRhIGlzIG5vdCB2YWxpZC5cbiAgICAgKi8gICAgc3RhdGljIGFyKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UoZSk7XG4gICAgICAgIGxldCBzID0gXCJvYmplY3RcIiA9PSB0eXBlb2YgbiAmJiBuLmFjdGl2ZVRhcmdldElkcyBpbnN0YW5jZW9mIEFycmF5LCBpID0gcHMoKTtcbiAgICAgICAgZm9yIChsZXQgdCA9IDA7IHMgJiYgdCA8IG4uYWN0aXZlVGFyZ2V0SWRzLmxlbmd0aDsgKyt0KSBzID0gTHQobi5hY3RpdmVUYXJnZXRJZHNbdF0pLCBcbiAgICAgICAgaSA9IGkuYWRkKG4uYWN0aXZlVGFyZ2V0SWRzW3RdKTtcbiAgICAgICAgcmV0dXJuIHMgPyBuZXcgQXUodCwgaSkgOiAoayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBGYWlsZWQgdG8gcGFyc2UgY2xpZW50IGRhdGEgZm9yIGluc3RhbmNlICcke3R9JzogJHtlfWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoaXMgY2xhc3MgcmVwcmVzZW50cyB0aGUgb25saW5lIHN0YXRlIGZvciBhbGwgY2xpZW50cyBwYXJ0aWNpcGF0aW5nIGluXG4gKiBtdWx0aS10YWIuIFRoZSBvbmxpbmUgc3RhdGUgaXMgb25seSB3cml0dGVuIHRvIGJ5IHRoZSBwcmltYXJ5IGNsaWVudCwgYW5kXG4gKiB1c2VkIGluIHNlY29uZGFyeSBjbGllbnRzIHRvIHVwZGF0ZSB0aGVpciBxdWVyeSB2aWV3cy5cbiAqLyBjbGFzcyB2dSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmNsaWVudElkID0gdCwgdGhpcy5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIFNoYXJlZE9ubGluZVN0YXRlIGZyb20gaXRzIEpTT04gcmVwcmVzZW50YXRpb24gaW4gV2ViU3RvcmFnZS5cbiAgICAgKiBMb2dzIGEgd2FybmluZyBhbmQgcmV0dXJucyBudWxsIGlmIHRoZSBmb3JtYXQgb2YgdGhlIGRhdGEgaXMgbm90IHZhbGlkLlxuICAgICAqLyAgICBzdGF0aWMgYXIodCkge1xuICAgICAgICBjb25zdCBlID0gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgJiYgLTEgIT09IFsgXCJVbmtub3duXCIsIFwiT25saW5lXCIsIFwiT2ZmbGluZVwiIF0uaW5kZXhPZihlLm9ubGluZVN0YXRlKSAmJiBcInN0cmluZ1wiID09IHR5cGVvZiBlLmNsaWVudElkID8gbmV3IHZ1KGUuY2xpZW50SWQsIGUub25saW5lU3RhdGUpIDogKGsoXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBgRmFpbGVkIHRvIHBhcnNlIG9ubGluZSBzdGF0ZTogJHt0fWApLCBcbiAgICAgICAgbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIE1ldGFkYXRhIHN0YXRlIG9mIHRoZSBsb2NhbCBjbGllbnQuIFVubGlrZSBgUmVtb3RlQ2xpZW50U3RhdGVgLCB0aGlzIGNsYXNzIGlzXG4gKiBtdXRhYmxlIGFuZCBrZWVwcyB0cmFjayBvZiBhbGwgcGVuZGluZyBtdXRhdGlvbnMsIHdoaWNoIGFsbG93cyB1cyB0b1xuICogdXBkYXRlIHRoZSByYW5nZSBvZiBwZW5kaW5nIG11dGF0aW9uIGJhdGNoIElEcyBhcyBuZXcgbXV0YXRpb25zIGFyZSBhZGRlZCBvclxuICogcmVtb3ZlZC5cbiAqXG4gKiBUaGUgZGF0YSBpbiBgTG9jYWxDbGllbnRTdGF0ZWAgaXMgbm90IHJlYWQgZnJvbSBXZWJTdG9yYWdlIGFuZCBpbnN0ZWFkXG4gKiB1cGRhdGVkIHZpYSBpdHMgaW5zdGFuY2UgbWV0aG9kcy4gVGhlIHVwZGF0ZWQgc3RhdGUgY2FuIGJlIHNlcmlhbGl6ZWQgdmlhXG4gKiBgdG9XZWJTdG9yYWdlSlNPTigpYC5cbiAqL1xuLy8gVmlzaWJsZSBmb3IgdGVzdGluZy5cbmNsYXNzIFJ1IHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVUYXJnZXRJZHMgPSBwcygpO1xuICAgIH1cbiAgICBscih0KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuYWRkKHQpO1xuICAgIH1cbiAgICBkcih0KSB7XG4gICAgICAgIHRoaXMuYWN0aXZlVGFyZ2V0SWRzID0gdGhpcy5hY3RpdmVUYXJnZXRJZHMuZGVsZXRlKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyB0aGlzIGVudHJ5IGludG8gYSBKU09OLWVuY29kZWQgZm9ybWF0IHdlIGNhbiB1c2UgZm9yIFdlYlN0b3JhZ2UuXG4gICAgICogRG9lcyBub3QgZW5jb2RlIGBjbGllbnRJZGAgYXMgaXQgaXMgcGFydCBvZiB0aGUga2V5IGluIFdlYlN0b3JhZ2UuXG4gICAgICovICAgIGhyKCkge1xuICAgICAgICBjb25zdCB0ID0ge1xuICAgICAgICAgICAgYWN0aXZlVGFyZ2V0SWRzOiB0aGlzLmFjdGl2ZVRhcmdldElkcy50b0FycmF5KCksXG4gICAgICAgICAgICB1cGRhdGVUaW1lTXM6IERhdGUubm93KClcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCB1c2VzIFdlYlN0b3JhZ2UgKHdpbmRvdy5sb2NhbFN0b3JhZ2UpIGFzIHRoZVxuICogYmFja2luZyBzdG9yZSBmb3IgdGhlIFNoYXJlZENsaWVudFN0YXRlLiBJdCBrZWVwcyB0cmFjayBvZiBhbGwgYWN0aXZlXG4gKiBjbGllbnRzIGFuZCBzdXBwb3J0cyBtb2RpZmljYXRpb25zIG9mIHRoZSBsb2NhbCBjbGllbnQncyBkYXRhLlxuICovIGNsYXNzIFB1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMud2luZG93ID0gdCwgdGhpcy5paSA9IGUsIHRoaXMucGVyc2lzdGVuY2VLZXkgPSBuLCB0aGlzLndyID0gcywgdGhpcy5zeW5jRW5naW5lID0gbnVsbCwgXG4gICAgICAgIHRoaXMub25saW5lU3RhdGVIYW5kbGVyID0gbnVsbCwgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIgPSBudWxsLCB0aGlzLl9yID0gdGhpcy5tci5iaW5kKHRoaXMpLCBcbiAgICAgICAgdGhpcy5nciA9IG5ldyBwZShldCksIHRoaXMuc3RhcnRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIENhcHR1cmVzIFdlYlN0b3JhZ2UgZXZlbnRzIHRoYXQgb2NjdXIgYmVmb3JlIGBzdGFydCgpYCBpcyBjYWxsZWQuIFRoZXNlXG4gICAgICAgICAqIGV2ZW50cyBhcmUgcmVwbGF5ZWQgb25jZSBgV2ViU3RvcmFnZVNoYXJlZENsaWVudFN0YXRlYCBpcyBzdGFydGVkLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy55ciA9IFtdO1xuICAgICAgICAvLyBFc2NhcGUgdGhlIHNwZWNpYWwgY2hhcmFjdGVycyBtZW50aW9uZWQgaGVyZTpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9HdWlkZS9SZWd1bGFyX0V4cHJlc3Npb25zXG4gICAgICAgIGNvbnN0IHIgPSBuLnJlcGxhY2UoL1suKis/XiR7fSgpfFtcXF1cXFxcXS9nLCBcIlxcXFwkJlwiKTtcbiAgICAgICAgdGhpcy5zdG9yYWdlID0gdGhpcy53aW5kb3cubG9jYWxTdG9yYWdlLCB0aGlzLmN1cnJlbnRVc2VyID0gaSwgdGhpcy5wciA9IHl1KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMud3IpLCBcbiAgICAgICAgdGhpcy5JciA9IFxuICAgICAgICAvKiogQXNzZW1ibGVzIHRoZSBrZXkgZm9yIHRoZSBjdXJyZW50IHNlcXVlbmNlIG51bWJlci4gKi9cbiAgICAgICAgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfc2VxdWVuY2VfbnVtYmVyXyR7dH1gO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE4IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgdGhpcy5nciA9IHRoaXMuZ3IuaW5zZXJ0KHRoaXMud3IsIG5ldyBSdSksIHRoaXMuVHIgPSBuZXcgUmVnRXhwKGBeZmlyZXN0b3JlX2NsaWVudHNfJHtyfV8oW15fXSopJGApLCBcbiAgICAgICAgdGhpcy5FciA9IG5ldyBSZWdFeHAoYF5maXJlc3RvcmVfbXV0YXRpb25zXyR7cn1fKFxcXFxkKykoPzpfKC4qKSk/JGApLCB0aGlzLkFyID0gbmV3IFJlZ0V4cChgXmZpcmVzdG9yZV90YXJnZXRzXyR7cn1fKFxcXFxkKykkYCksIFxuICAgICAgICB0aGlzLnZyID0gXG4gICAgICAgIC8qKiBBc3NlbWJsZXMgdGhlIGtleSBmb3IgdGhlIG9ubGluZSBzdGF0ZSBvZiB0aGUgcHJpbWFyeSB0YWIuICovXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIHJldHVybiBgZmlyZXN0b3JlX29ubGluZV9zdGF0ZV8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBwcmVmaXggdGhhdCBwbGF5cyBhcyBhIGV2ZW50IHRvIGluZGljYXRlIHRoZSByZW1vdGUgZG9jdW1lbnRzXG4gICAgICAgIC8vIG1pZ2h0IGhhdmUgY2hhbmdlZCBkdWUgdG8gc29tZSBzZWNvbmRhcnkgdGFicyBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAgICAvLyBmb3JtYXQgb2YgdGhlIGtleSBpczpcbiAgICAgICAgLy8gICAgIGZpcmVzdG9yZV9idW5kbGVfbG9hZGVkX3YyXzxwZXJzaXN0ZW5jZUtleT5cbiAgICAgICAgLy8gVGhlIHZlcnNpb24gZW5kaW5nIHdpdGggXCJ2MlwiIHN0b3JlcyB0aGUgbGlzdCBvZiBtb2RpZmllZCBjb2xsZWN0aW9uIGdyb3Vwcy5cbiAgICAgICAgKHRoaXMucGVyc2lzdGVuY2VLZXkpLCB0aGlzLlJyID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgcmV0dXJuIGBmaXJlc3RvcmVfYnVuZGxlX2xvYWRlZF92Ml8ke3R9YDtcbiAgICAgICAgfVxuICAgICAgICAvLyBUaGUgV2ViU3RvcmFnZSBrZXkgcHJlZml4IGZvciB0aGUga2V5IHRoYXQgc3RvcmVzIHRoZSBsYXN0IHNlcXVlbmNlIG51bWJlciBhbGxvY2F0ZWQuIFRoZSBrZXlcbiAgICAgICAgLy8gbG9va3MgbGlrZSAnZmlyZXN0b3JlX3NlcXVlbmNlX251bWJlcl88cGVyc2lzdGVuY2VfcHJlZml4PicuXG4gICAgICAgICh0aGlzLnBlcnNpc3RlbmNlS2V5KSwgXG4gICAgICAgIC8vIFJhdGhlciB0aGFuIGFkZGluZyB0aGUgc3RvcmFnZSBvYnNlcnZlciBkdXJpbmcgc3RhcnQoKSwgd2UgYWRkIHRoZVxuICAgICAgICAvLyBzdG9yYWdlIG9ic2VydmVyIGR1cmluZyBpbml0aWFsaXphdGlvbi4gVGhpcyBlbnN1cmVzIHRoYXQgd2UgY29sbGVjdFxuICAgICAgICAvLyBldmVudHMgYmVmb3JlIG90aGVyIGNvbXBvbmVudHMgcG9wdWxhdGUgdGhlaXIgaW5pdGlhbCBzdGF0ZSAoZHVyaW5nIHRoZWlyXG4gICAgICAgIC8vIHJlc3BlY3RpdmUgc3RhcnQoKSBjYWxscykuIE90aGVyd2lzZSwgd2UgbWlnaHQgZm9yIGV4YW1wbGUgbWlzcyBhXG4gICAgICAgIC8vIG11dGF0aW9uIHRoYXQgaXMgYWRkZWQgYWZ0ZXIgTG9jYWxTdG9yZSdzIHN0YXJ0KCkgcHJvY2Vzc2VkIHRoZSBleGlzdGluZ1xuICAgICAgICAvLyBtdXRhdGlvbnMgYnV0IGJlZm9yZSB3ZSBvYnNlcnZlIFdlYlN0b3JhZ2UgZXZlbnRzLlxuICAgICAgICB0aGlzLndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic3RvcmFnZVwiLCB0aGlzLl9yKTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgJ3RydWUnIGlmIFdlYlN0b3JhZ2UgaXMgYXZhaWxhYmxlIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LiAqLyAgICBzdGF0aWMgRCh0KSB7XG4gICAgICAgIHJldHVybiAhKCF0IHx8ICF0LmxvY2FsU3RvcmFnZSk7XG4gICAgfVxuICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICAvLyBSZXRyaWV2ZSB0aGUgbGlzdCBvZiBleGlzdGluZyBjbGllbnRzIHRvIGJhY2tmaWxsIHRoZSBkYXRhIGluXG4gICAgICAgIC8vIFNoYXJlZENsaWVudFN0YXRlLlxuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5zeW5jRW5naW5lLiRpKCk7XG4gICAgICAgIGZvciAoY29uc3QgZSBvZiB0KSB7XG4gICAgICAgICAgICBpZiAoZSA9PT0gdGhpcy53cikgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5nZXRJdGVtKHl1KHRoaXMucGVyc2lzdGVuY2VLZXksIGUpKTtcbiAgICAgICAgICAgIGlmICh0KSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEF1LmFyKGUsIHQpO1xuICAgICAgICAgICAgICAgIG4gJiYgKHRoaXMuZ3IgPSB0aGlzLmdyLmluc2VydChuLmNsaWVudElkLCBuKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5QcigpO1xuICAgICAgICAvLyBDaGVjayBpZiB0aGVyZSBpcyBhbiBleGlzdGluZyBvbmxpbmUgc3RhdGUgYW5kIGNhbGwgdGhlIGNhbGxiYWNrIGhhbmRsZXJcbiAgICAgICAgLy8gaWYgYXBwbGljYWJsZS5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuc3RvcmFnZS5nZXRJdGVtKHRoaXMudnIpO1xuICAgICAgICBpZiAoZSkge1xuICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnIoZSk7XG4gICAgICAgICAgICB0ICYmIHRoaXMuVnIodCk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMueXIpIHRoaXMubXIodCk7XG4gICAgICAgIHRoaXMueXIgPSBbXSwgXG4gICAgICAgIC8vIFJlZ2lzdGVyIGEgd2luZG93IHVubG9hZCBob29rIHRvIHJlbW92ZSB0aGUgY2xpZW50IG1ldGFkYXRhIGVudHJ5IGZyb21cbiAgICAgICAgLy8gV2ViU3RvcmFnZSBldmVuIGlmIGBzaHV0ZG93bigpYCB3YXMgbm90IGNhbGxlZC5cbiAgICAgICAgdGhpcy53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInBhZ2VoaWRlXCIsICgoKSA9PiB0aGlzLnNodXRkb3duKCkpKSwgdGhpcy5zdGFydGVkID0gITA7XG4gICAgfVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5JciwgSlNPTi5zdHJpbmdpZnkodCkpO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLlNyKHRoaXMuZ3IpO1xuICAgIH1cbiAgICBpc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSAhMTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ3IuZm9yRWFjaCgoKG4sIHMpID0+IHtcbiAgICAgICAgICAgIHMuYWN0aXZlVGFyZ2V0SWRzLmhhcyh0KSAmJiAoZSA9ICEwKTtcbiAgICAgICAgfSkpLCBlO1xuICAgIH1cbiAgICBhZGRQZW5kaW5nTXV0YXRpb24odCkge1xuICAgICAgICB0aGlzLkRyKHQsIFwicGVuZGluZ1wiKTtcbiAgICB9XG4gICAgdXBkYXRlTXV0YXRpb25TdGF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuRHIodCwgZSwgbiksIFxuICAgICAgICAvLyBPbmNlIGEgZmluYWwgbXV0YXRpb24gcmVzdWx0IGlzIG9ic2VydmVkIGJ5IG90aGVyIGNsaWVudHMsIHRoZXkgbm8gbG9uZ2VyXG4gICAgICAgIC8vIGFjY2VzcyB0aGUgbXV0YXRpb24ncyBtZXRhZGF0YSBlbnRyeS4gU2luY2UgV2ViU3RvcmFnZSByZXBsYXlzIGV2ZW50c1xuICAgICAgICAvLyBpbiBvcmRlciwgaXQgaXMgc2FmZSB0byBkZWxldGUgdGhlIGVudHJ5IHJpZ2h0IGFmdGVyIHVwZGF0aW5nIGl0LlxuICAgICAgICB0aGlzLkNyKHQpO1xuICAgIH1cbiAgICBhZGRMb2NhbFF1ZXJ5VGFyZ2V0KHQpIHtcbiAgICAgICAgbGV0IGUgPSBcIm5vdC1jdXJyZW50XCI7XG4gICAgICAgIC8vIExvb2t1cCBhbiBleGlzdGluZyBxdWVyeSBzdGF0ZSBpZiB0aGUgdGFyZ2V0IElEIHdhcyBhbHJlYWR5IHJlZ2lzdGVyZWRcbiAgICAgICAgLy8gYnkgYW5vdGhlciB0YWJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc0FjdGl2ZVF1ZXJ5VGFyZ2V0KHQpKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0oSXUodGhpcy5wZXJzaXN0ZW5jZUtleSwgdCkpO1xuICAgICAgICAgICAgaWYgKG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gRXUuYXIodCwgbik7XG4gICAgICAgICAgICAgICAgcyAmJiAoZSA9IHMuc3RhdGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLk5yLmxyKHQpLCB0aGlzLlByKCksIGU7XG4gICAgfVxuICAgIHJlbW92ZUxvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICB0aGlzLk5yLmRyKHQpLCB0aGlzLlByKCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLk5yLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMucmVtb3ZlSXRlbShJdSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSk7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLmtyKHQsIGUsIG4pO1xuICAgIH1cbiAgICBoYW5kbGVVc2VyQ2hhbmdlKHQsIGUsIG4pIHtcbiAgICAgICAgZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHRoaXMuQ3IodCk7XG4gICAgICAgIH0pKSwgdGhpcy5jdXJyZW50VXNlciA9IHQsIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFkZFBlbmRpbmdNdXRhdGlvbih0KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXRPbmxpbmVTdGF0ZSh0KSB7XG4gICAgICAgIHRoaXMuTXIodCk7XG4gICAgfVxuICAgIG5vdGlmeUJ1bmRsZUxvYWRlZCh0KSB7XG4gICAgICAgIHRoaXMuJHIodCk7XG4gICAgfVxuICAgIHNodXRkb3duKCkge1xuICAgICAgICB0aGlzLnN0YXJ0ZWQgJiYgKHRoaXMud2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzdG9yYWdlXCIsIHRoaXMuX3IpLCB0aGlzLnJlbW92ZUl0ZW0odGhpcy5wciksIFxuICAgICAgICB0aGlzLnN0YXJ0ZWQgPSAhMSk7XG4gICAgfVxuICAgIGdldEl0ZW0odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5zdG9yYWdlLmdldEl0ZW0odCk7XG4gICAgICAgIHJldHVybiBOKFwiU2hhcmVkQ2xpZW50U3RhdGVcIiwgXCJSRUFEXCIsIHQsIGUpLCBlO1xuICAgIH1cbiAgICBzZXRJdGVtKHQsIGUpIHtcbiAgICAgICAgTihcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiU0VUXCIsIHQsIGUpLCB0aGlzLnN0b3JhZ2Uuc2V0SXRlbSh0LCBlKTtcbiAgICB9XG4gICAgcmVtb3ZlSXRlbSh0KSB7XG4gICAgICAgIE4oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIlJFTU9WRVwiLCB0KSwgdGhpcy5zdG9yYWdlLnJlbW92ZUl0ZW0odCk7XG4gICAgfVxuICAgIG1yKHQpIHtcbiAgICAgICAgLy8gTm90ZTogVGhlIGZ1bmN0aW9uIGlzIHR5cGVkIHRvIHRha2UgRXZlbnQgdG8gYmUgaW50ZXJmYWNlLWNvbXBhdGlibGUgd2l0aFxuICAgICAgICAvLyBgV2luZG93LmFkZEV2ZW50TGlzdGVuZXJgLlxuICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgaWYgKGUuc3RvcmFnZUFyZWEgPT09IHRoaXMuc3RvcmFnZSkge1xuICAgICAgICAgICAgaWYgKE4oXCJTaGFyZWRDbGllbnRTdGF0ZVwiLCBcIkVWRU5UXCIsIGUua2V5LCBlLm5ld1ZhbHVlKSwgZS5rZXkgPT09IHRoaXMucHIpIHJldHVybiB2b2lkIGsoXCJSZWNlaXZlZCBXZWJTdG9yYWdlIG5vdGlmaWNhdGlvbiBmb3IgbG9jYWwgY2hhbmdlLiBBbm90aGVyIGNsaWVudCBtaWdodCBoYXZlIGdhcmJhZ2UtY29sbGVjdGVkIG91ciBzdGF0ZVwiKTtcbiAgICAgICAgICAgIHRoaXMuaWkuZW5xdWV1ZVJldHJ5YWJsZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXJ0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT09IGUua2V5KSBpZiAodGhpcy5Uci50ZXN0KGUua2V5KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLk9yKGUua2V5KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5Gcih0LCBudWxsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5CcihlLmtleSwgZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLkZyKHQuY2xpZW50SWQsIHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuRXIudGVzdChlLmtleSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuTHIoZS5rZXksIGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0KSByZXR1cm4gdGhpcy5xcih0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLkFyLnRlc3QoZS5rZXkpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobnVsbCAhPT0gZS5uZXdWYWx1ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLlVyKGUua2V5LCBlLm5ld1ZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodCkgcmV0dXJuIHRoaXMuS3IodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMudnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChudWxsICE9PSBlLm5ld1ZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuYnIoZS5uZXdWYWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHQpIHJldHVybiB0aGlzLlZyKHQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGUua2V5ID09PSB0aGlzLklyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCB0ID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBlID0gT3QuY3Q7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG51bGwgIT0gdCkgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbiA9IEpTT04ucGFyc2UodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEYoXCJudW1iZXJcIiA9PSB0eXBlb2YgbiksIGUgPSBuO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgayhcIlNoYXJlZENsaWVudFN0YXRlXCIsIFwiRmFpbGVkIHRvIHJlYWQgc2VxdWVuY2UgbnVtYmVyIGZyb20gV2ViU3RvcmFnZVwiLCB0KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGU7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvKipcbiAqIGBNZW1vcnlTaGFyZWRDbGllbnRTdGF0ZWAgaXMgYSBzaW1wbGUgaW1wbGVtZW50YXRpb24gb2YgU2hhcmVkQ2xpZW50U3RhdGUgZm9yXG4gKiBjbGllbnRzIHVzaW5nIG1lbW9yeSBwZXJzaXN0ZW5jZS4gVGhlIHN0YXRlIGluIHRoaXMgY2xhc3MgcmVtYWlucyBmdWxseVxuICogaXNvbGF0ZWQgYW5kIG5vIHN5bmNocm9uaXphdGlvbiBpcyBwZXJmb3JtZWQuXG4gKi8gKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdCAhPT0gT3QuY3QgJiYgdGhpcy5zZXF1ZW5jZU51bWJlckhhbmRsZXIodCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09IHRoaXMuUnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLkdyKGUubmV3VmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodC5tYXAoKHQgPT4gdGhpcy5zeW5jRW5naW5lLlFyKHQpKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIHRoaXMueXIucHVzaChlKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnZXQgTnIoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdyLmdldCh0aGlzLndyKTtcbiAgICB9XG4gICAgUHIoKSB7XG4gICAgICAgIHRoaXMuc2V0SXRlbSh0aGlzLnByLCB0aGlzLk5yLmhyKCkpO1xuICAgIH1cbiAgICBEcih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgVHUodGhpcy5jdXJyZW50VXNlciwgdCwgZSwgbiksIGkgPSBwdSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0aGlzLmN1cnJlbnRVc2VyLCB0KTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKGksIHMuaHIoKSk7XG4gICAgfVxuICAgIENyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHB1KHRoaXMucGVyc2lzdGVuY2VLZXksIHRoaXMuY3VycmVudFVzZXIsIHQpO1xuICAgICAgICB0aGlzLnJlbW92ZUl0ZW0oZSk7XG4gICAgfVxuICAgIE1yKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHtcbiAgICAgICAgICAgIGNsaWVudElkOiB0aGlzLndyLFxuICAgICAgICAgICAgb25saW5lU3RhdGU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zdG9yYWdlLnNldEl0ZW0odGhpcy52ciwgSlNPTi5zdHJpbmdpZnkoZSkpO1xuICAgIH1cbiAgICBrcih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBJdSh0aGlzLnBlcnNpc3RlbmNlS2V5LCB0KSwgaSA9IG5ldyBFdSh0LCBlLCBuKTtcbiAgICAgICAgdGhpcy5zZXRJdGVtKHMsIGkuaHIoKSk7XG4gICAgfVxuICAgICRyKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IEpTT04uc3RyaW5naWZ5KEFycmF5LmZyb20odCkpO1xuICAgICAgICB0aGlzLnNldEl0ZW0odGhpcy5SciwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhIGNsaWVudCBzdGF0ZSBrZXkgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyBudWxsIGlmIHRoZSBrZXkgZG9lcyBub3RcbiAgICAgKiBtYXRjaCB0aGUgZXhwZWN0ZWQga2V5IGZvcm1hdC5cbiAgICAgKi8gICAgT3IodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5Uci5leGVjKHQpO1xuICAgICAgICByZXR1cm4gZSA/IGVbMV0gOiBudWxsO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBjbGllbnQgc3RhdGUgaW4gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlIGNvdWxkIG5vdFxuICAgICAqIGJlIHBhcnNlZC5cbiAgICAgKi8gICAgQnIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Pcih0KTtcbiAgICAgICAgcmV0dXJuIEF1LmFyKG4sIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQYXJzZXMgYSBtdXRhdGlvbiBiYXRjaCBzdGF0ZSBpbiBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBMcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLkVyLmV4ZWModCksIHMgPSBOdW1iZXIoblsxXSksIGkgPSB2b2lkIDAgIT09IG5bMl0gPyBuWzJdIDogbnVsbDtcbiAgICAgICAgcmV0dXJuIFR1LmFyKG5ldyBWKGkpLCBzLCBlKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUGFyc2VzIGEgcXVlcnkgdGFyZ2V0IHN0YXRlIGZyb20gV2ViU3RvcmFnZS4gUmV0dXJucyAnbnVsbCcgaWYgdGhlIHZhbHVlXG4gICAgICogY291bGQgbm90IGJlIHBhcnNlZC5cbiAgICAgKi8gICAgVXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5Bci5leGVjKHQpLCBzID0gTnVtYmVyKG5bMV0pO1xuICAgICAgICByZXR1cm4gRXUuYXIocywgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFBhcnNlcyBhbiBvbmxpbmUgc3RhdGUgZnJvbSBXZWJTdG9yYWdlLiBSZXR1cm5zICdudWxsJyBpZiB0aGUgdmFsdWVcbiAgICAgKiBjb3VsZCBub3QgYmUgcGFyc2VkLlxuICAgICAqLyAgICBicih0KSB7XG4gICAgICAgIHJldHVybiB2dS5hcih0KTtcbiAgICB9XG4gICAgR3IodCkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0KTtcbiAgICB9XG4gICAgYXN5bmMgcXIodCkge1xuICAgICAgICBpZiAodC51c2VyLnVpZCA9PT0gdGhpcy5jdXJyZW50VXNlci51aWQpIHJldHVybiB0aGlzLnN5bmNFbmdpbmUuanIodC5iYXRjaElkLCB0LnN0YXRlLCB0LmVycm9yKTtcbiAgICAgICAgTihcIlNoYXJlZENsaWVudFN0YXRlXCIsIGBJZ25vcmluZyBtdXRhdGlvbiBmb3Igbm9uLWFjdGl2ZSB1c2VyICR7dC51c2VyLnVpZH1gKTtcbiAgICB9XG4gICAgS3IodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zeW5jRW5naW5lLnpyKHQudGFyZ2V0SWQsIHQuc3RhdGUsIHQuZXJyb3IpO1xuICAgIH1cbiAgICBGcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gdGhpcy5nci5pbnNlcnQodCwgZSkgOiB0aGlzLmdyLnJlbW92ZSh0KSwgcyA9IHRoaXMuU3IodGhpcy5nciksIGkgPSB0aGlzLlNyKG4pLCByID0gW10sIG8gPSBbXTtcbiAgICAgICAgcmV0dXJuIGkuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICBzLmhhcyh0KSB8fCByLnB1c2godCk7XG4gICAgICAgIH0pKSwgcy5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIGkuaGFzKHQpIHx8IG8ucHVzaCh0KTtcbiAgICAgICAgfSkpLCB0aGlzLnN5bmNFbmdpbmUuV3IociwgbykudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgdGhpcy5nciA9IG47XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgVnIodCkge1xuICAgICAgICAvLyBXZSBjaGVjayB3aGV0aGVyIHRoZSBjbGllbnQgdGhhdCB3cm90ZSB0aGlzIG9ubGluZSBzdGF0ZSBpcyBzdGlsbCBhY3RpdmVcbiAgICAgICAgLy8gYnkgY29tcGFyaW5nIGl0cyBjbGllbnQgSUQgdG8gdGhlIGxpc3Qgb2YgY2xpZW50cyBrZXB0IGFjdGl2ZSBpblxuICAgICAgICAvLyBJbmRleGVkRGIuIElmIGEgY2xpZW50IGRvZXMgbm90IHVwZGF0ZSB0aGVpciBJbmRleGVkRGIgY2xpZW50IHN0YXRlXG4gICAgICAgIC8vIHdpdGhpbiA1IHNlY29uZHMsIGl0IGlzIGNvbnNpZGVyZWQgaW5hY3RpdmUgYW5kIHdlIGRvbid0IGVtaXQgYW4gb25saW5lXG4gICAgICAgIC8vIHN0YXRlIGV2ZW50LlxuICAgICAgICB0aGlzLmdyLmdldCh0LmNsaWVudElkKSAmJiB0aGlzLm9ubGluZVN0YXRlSGFuZGxlcih0Lm9ubGluZVN0YXRlKTtcbiAgICB9XG4gICAgU3IodCkge1xuICAgICAgICBsZXQgZSA9IHBzKCk7XG4gICAgICAgIHJldHVybiB0LmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICBlID0gZS51bmlvbldpdGgobi5hY3RpdmVUYXJnZXRJZHMpO1xuICAgICAgICB9KSksIGU7XG4gICAgfVxufVxuXG5jbGFzcyBidSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuSHIgPSBuZXcgUnUsIHRoaXMuSnIgPSB7fSwgdGhpcy5vbmxpbmVTdGF0ZUhhbmRsZXIgPSBudWxsLCB0aGlzLnNlcXVlbmNlTnVtYmVySGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGFkZFBlbmRpbmdNdXRhdGlvbih0KSB7XG4gICAgICAgIC8vIE5vIG9wLlxuICAgIH1cbiAgICB1cGRhdGVNdXRhdGlvblN0YXRlKHQsIGUsIG4pIHtcbiAgICAgICAgLy8gTm8gb3AuXG4gICAgfVxuICAgIGFkZExvY2FsUXVlcnlUYXJnZXQodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5Ici5scih0KSwgdGhpcy5Kclt0XSB8fCBcIm5vdC1jdXJyZW50XCI7XG4gICAgfVxuICAgIHVwZGF0ZVF1ZXJ5U3RhdGUodCwgZSwgbikge1xuICAgICAgICB0aGlzLkpyW3RdID0gZTtcbiAgICB9XG4gICAgcmVtb3ZlTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHRoaXMuSHIuZHIodCk7XG4gICAgfVxuICAgIGlzTG9jYWxRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhyLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIGNsZWFyUXVlcnlTdGF0ZSh0KSB7XG4gICAgICAgIGRlbGV0ZSB0aGlzLkpyW3RdO1xuICAgIH1cbiAgICBnZXRBbGxBY3RpdmVRdWVyeVRhcmdldHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhyLmFjdGl2ZVRhcmdldElkcztcbiAgICB9XG4gICAgaXNBY3RpdmVRdWVyeVRhcmdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLkhyLmFjdGl2ZVRhcmdldElkcy5oYXModCk7XG4gICAgfVxuICAgIHN0YXJ0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5IciA9IG5ldyBSdSwgUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgfVxuICAgIGhhbmRsZVVzZXJDaGFuZ2UodCwgZSwgbikge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2V0T25saW5lU3RhdGUodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG4gICAgc2h1dGRvd24oKSB7fVxuICAgIHdyaXRlU2VxdWVuY2VOdW1iZXIodCkge31cbiAgICBub3RpZnlCdW5kbGVMb2FkZWQodCkge1xuICAgICAgICAvLyBObyBvcC5cbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIFZ1IHtcbiAgICBZcih0KSB7XG4gICAgICAgIC8vIE5vLW9wLlxuICAgIH1cbiAgICBzaHV0ZG93bigpIHtcbiAgICAgICAgLy8gTm8tb3AuXG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gUmVmZXJlbmNlcyB0byBgd2luZG93YCBhcmUgZ3VhcmRlZCBieSBCcm93c2VyQ29ubmVjdGl2aXR5TW9uaXRvci5pc0F2YWlsYWJsZSgpXG4vKiBlc2xpbnQtZGlzYWJsZSBuby1yZXN0cmljdGVkLWdsb2JhbHMgKi9cbi8qKlxuICogQnJvd3NlciBpbXBsZW1lbnRhdGlvbiBvZiBDb25uZWN0aXZpdHlNb25pdG9yLlxuICovXG5jbGFzcyBTdSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuWHIgPSAoKSA9PiB0aGlzLlpyKCksIHRoaXMuZW8gPSAoKSA9PiB0aGlzLm5vKCksIHRoaXMuc28gPSBbXSwgdGhpcy5pbygpO1xuICAgIH1cbiAgICBZcih0KSB7XG4gICAgICAgIHRoaXMuc28ucHVzaCh0KTtcbiAgICB9XG4gICAgc2h1dGRvd24oKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwib25saW5lXCIsIHRoaXMuWHIpLCB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm9mZmxpbmVcIiwgdGhpcy5lbyk7XG4gICAgfVxuICAgIGlvKCkge1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm9ubGluZVwiLCB0aGlzLlhyKSwgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJvZmZsaW5lXCIsIHRoaXMuZW8pO1xuICAgIH1cbiAgICBacigpIHtcbiAgICAgICAgTihcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBBVkFJTEFCTEVcIik7XG4gICAgICAgIGZvciAoY29uc3QgdCBvZiB0aGlzLnNvKSB0KDAgLyogTmV0d29ya1N0YXR1cy5BVkFJTEFCTEUgKi8pO1xuICAgIH1cbiAgICBubygpIHtcbiAgICAgICAgTihcIkNvbm5lY3Rpdml0eU1vbml0b3JcIiwgXCJOZXR3b3JrIGNvbm5lY3Rpdml0eSBjaGFuZ2VkOiBVTkFWQUlMQUJMRVwiKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMuc28pIHQoMSAvKiBOZXR3b3JrU3RhdHVzLlVOQVZBSUxBQkxFICovKTtcbiAgICB9XG4gICAgLy8gVE9ETyhjaGVuYnJpYW4pOiBDb25zaWRlciBwYXNzaW5nIGluIHdpbmRvdyBlaXRoZXIgaW50byB0aGlzIGNvbXBvbmVudCBvclxuICAgIC8vIGhlcmUgZm9yIHRlc3RpbmcgdmlhIEZha2VXaW5kb3cuXG4gICAgLyoqIENoZWNrcyB0aGF0IGFsbCB1c2VkIGF0dHJpYnV0ZXMgb2Ygd2luZG93IGFyZSBhdmFpbGFibGUuICovXG4gICAgc3RhdGljIEQoKSB7XG4gICAgICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgJiYgdm9pZCAwICE9PSB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciAmJiB2b2lkIDAgIT09IHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjMgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogVGhlIHZhbHVlIHJldHVybmVkIGZyb20gdGhlIG1vc3QgcmVjZW50IGludm9jYXRpb24gb2ZcbiAqIGBnZW5lcmF0ZVVuaXF1ZURlYnVnSWQoKWAsIG9yIG51bGwgaWYgaXQgaGFzIG5ldmVyIGJlZW4gaW52b2tlZC5cbiAqLyBsZXQgRHUgPSBudWxsO1xuXG4vKipcbiAqIEdlbmVyYXRlcyBhbmQgcmV0dXJucyBhbiBpbml0aWFsIHZhbHVlIGZvciBgbGFzdFVuaXF1ZURlYnVnSWRgLlxuICpcbiAqIFRoZSByZXR1cm5lZCB2YWx1ZSBpcyByYW5kb21seSBzZWxlY3RlZCBmcm9tIGEgcmFuZ2Ugb2YgaW50ZWdlcnMgdGhhdCBhcmVcbiAqIHJlcHJlc2VudGVkIGFzIDggaGV4YWRlY2ltYWwgZGlnaXRzLiBUaGlzIG1lYW5zIHRoYXQgKHdpdGhpbiByZWFzb24pIGFueVxuICogbnVtYmVycyBnZW5lcmF0ZWQgYnkgaW5jcmVtZW50aW5nIHRoZSByZXR1cm5lZCBudW1iZXIgYnkgMSB3aWxsIGFsc28gYmVcbiAqIHJlcHJlc2VudGVkIGJ5IDggaGV4YWRlY2ltYWwgZGlnaXRzLiBUaGlzIGxlYWRzIHRvIGFsbCBcIklEc1wiIGhhdmluZyB0aGUgc2FtZVxuICogbGVuZ3RoIHdoZW4gY29udmVydGVkIHRvIGEgaGV4YWRlY2ltYWwgc3RyaW5nLCBtYWtpbmcgcmVhZGluZyBsb2dzIGNvbnRhaW5pbmdcbiAqIHRoZXNlIElEcyBlYXNpZXIgdG8gZm9sbG93LiBBbmQgc2luY2UgdGhlIHJldHVybiB2YWx1ZSBpcyByYW5kb21seSBzZWxlY3RlZFxuICogaXQgd2lsbCBoZWxwIHRvIGRpZmZlcmVudGlhdGUgYmV0d2VlbiBsb2dzIGZyb20gZGlmZmVyZW50IGV4ZWN1dGlvbnMuXG4gKi9cbi8qKlxuICogR2VuZXJhdGVzIGFuZCByZXR1cm5zIGEgdW5pcXVlIElEIGFzIGEgaGV4YWRlY2ltYWwgc3RyaW5nLlxuICpcbiAqIFRoZSByZXR1cm5lZCBJRCBpcyBpbnRlbmRlZCB0byBiZSB1c2VkIGluIGRlYnVnIGxvZ2dpbmcgbWVzc2FnZXMgdG8gaGVscFxuICogY29ycmVsYXRlIGxvZyBtZXNzYWdlcyB0aGF0IG1heSBiZSBzcGF0aWFsbHkgc2VwYXJhdGVkIGluIHRoZSBsb2dzLCBidXRcbiAqIGxvZ2ljYWxseSByZWxhdGVkLiBGb3IgZXhhbXBsZSwgYSBuZXR3b3JrIGNvbm5lY3Rpb24gY291bGQgaW5jbHVkZSB0aGUgc2FtZVxuICogXCJkZWJ1ZyBJRFwiIHN0cmluZyBpbiBhbGwgb2YgaXRzIGxvZyBtZXNzYWdlcyB0byBoZWxwIHRyYWNlIGEgc3BlY2lmaWNcbiAqIGNvbm5lY3Rpb24gb3ZlciB0aW1lLlxuICpcbiAqIEByZXR1cm4gdGhlIDEwLWNoYXJhY3RlciBnZW5lcmF0ZWQgSUQgKGUuZy4gXCIweGExYjJjM2Q0XCIpLlxuICovXG5mdW5jdGlvbiBDdSgpIHtcbiAgICByZXR1cm4gbnVsbCA9PT0gRHUgPyBEdSA9IDI2ODQzNTQ1NiArIE1hdGgucm91bmQoMjE0NzQ4MzY0OCAqIE1hdGgucmFuZG9tKCkpIDogRHUrKywgXG4gICAgXCIweFwiICsgRHUudG9TdHJpbmcoMTYpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCB4dSA9IHtcbiAgICBCYXRjaEdldERvY3VtZW50czogXCJiYXRjaEdldFwiLFxuICAgIENvbW1pdDogXCJjb21taXRcIixcbiAgICBSdW5RdWVyeTogXCJydW5RdWVyeVwiLFxuICAgIFJ1bkFnZ3JlZ2F0aW9uUXVlcnk6IFwicnVuQWdncmVnYXRpb25RdWVyeVwiXG59O1xuXG4vKipcbiAqIE1hcHMgUlBDIG5hbWVzIHRvIHRoZSBjb3JyZXNwb25kaW5nIFJFU1QgZW5kcG9pbnQgbmFtZS5cbiAqXG4gKiBXZSB1c2UgYXJyYXkgbm90YXRpb24gdG8gYXZvaWQgbWFuZ2xpbmcuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIFByb3ZpZGVzIGEgc2ltcGxlIGhlbHBlciBjbGFzcyB0aGF0IGltcGxlbWVudHMgdGhlIFN0cmVhbSBpbnRlcmZhY2UgdG9cbiAqIGJyaWRnZSB0byBvdGhlciBpbXBsZW1lbnRhdGlvbnMgdGhhdCBhcmUgc3RyZWFtcyBidXQgZG8gbm90IGltcGxlbWVudCB0aGVcbiAqIGludGVyZmFjZS4gVGhlIHN0cmVhbSBjYWxsYmFja3MgYXJlIGludm9rZWQgd2l0aCB0aGUgY2FsbE9uLi4uIG1ldGhvZHMuXG4gKi9cbmNsYXNzIE51IHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMucm8gPSB0LnJvLCB0aGlzLm9vID0gdC5vbztcbiAgICB9XG4gICAgdW8odCkge1xuICAgICAgICB0aGlzLmNvID0gdDtcbiAgICB9XG4gICAgYW8odCkge1xuICAgICAgICB0aGlzLmhvID0gdDtcbiAgICB9XG4gICAgb25NZXNzYWdlKHQpIHtcbiAgICAgICAgdGhpcy5sbyA9IHQ7XG4gICAgfVxuICAgIGNsb3NlKCkge1xuICAgICAgICB0aGlzLm9vKCk7XG4gICAgfVxuICAgIHNlbmQodCkge1xuICAgICAgICB0aGlzLnJvKHQpO1xuICAgIH1cbiAgICBmbygpIHtcbiAgICAgICAgdGhpcy5jbygpO1xuICAgIH1cbiAgICB3byh0KSB7XG4gICAgICAgIHRoaXMuaG8odCk7XG4gICAgfVxuICAgIF9vKHQpIHtcbiAgICAgICAgdGhpcy5sbyh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGt1ID0gXCJXZWJDaGFubmVsQ29ubmVjdGlvblwiO1xuXG5jbGFzcyBNdSBleHRlbmRzIFxuLyoqXG4gKiBCYXNlIGNsYXNzIGZvciBhbGwgUmVzdC1iYXNlZCBjb25uZWN0aW9ucyB0byB0aGUgYmFja2VuZCAoV2ViQ2hhbm5lbCBhbmRcbiAqIEhUVFApLlxuICovXG5jbGFzcyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSW5mbyA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IHQuZGF0YWJhc2VJZDtcbiAgICAgICAgY29uc3QgZSA9IHQuc3NsID8gXCJodHRwc1wiIDogXCJodHRwXCI7XG4gICAgICAgIHRoaXMubW8gPSBlICsgXCI6Ly9cIiArIHQuaG9zdCwgdGhpcy55byA9IFwicHJvamVjdHMvXCIgKyB0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkICsgXCIvZGF0YWJhc2VzL1wiICsgdGhpcy5kYXRhYmFzZUlkLmRhdGFiYXNlICsgXCIvZG9jdW1lbnRzXCI7XG4gICAgfVxuICAgIGdldCBwbygpIHtcbiAgICAgICAgLy8gQm90aCBgaW52b2tlUlBDKClgIGFuZCBgaW52b2tlU3RyZWFtaW5nUlBDKClgIHVzZSB0aGVpciBgcGF0aGAgYXJndW1lbnRzIHRvIGRldGVybWluZVxuICAgICAgICAvLyB3aGVyZSB0byBydW4gdGhlIHF1ZXJ5LCBhbmQgZXhwZWN0IHRoZSBgcmVxdWVzdGAgdG8gTk9UIHNwZWNpZnkgdGhlIFwicGF0aFwiLlxuICAgICAgICByZXR1cm4gITE7XG4gICAgfVxuICAgIElvKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IEN1KCksIG8gPSB0aGlzLlRvKHQsIGUpO1xuICAgICAgICBOKFwiUmVzdENvbm5lY3Rpb25cIiwgYFNlbmRpbmcgUlBDICcke3R9JyAke3J9OmAsIG8sIG4pO1xuICAgICAgICBjb25zdCB1ID0ge307XG4gICAgICAgIHJldHVybiB0aGlzLkVvKHUsIHMsIGkpLCB0aGlzLkFvKHQsIG8sIHUsIG4pLnRoZW4oKGUgPT4gKE4oXCJSZXN0Q29ubmVjdGlvblwiLCBgUmVjZWl2ZWQgUlBDICcke3R9JyAke3J9OiBgLCBlKSwgXG4gICAgICAgIGUpKSwgKGUgPT4ge1xuICAgICAgICAgICAgdGhyb3cgTShcIlJlc3RDb25uZWN0aW9uXCIsIGBSUEMgJyR7dH0nICR7cn0gZmFpbGVkIHdpdGggZXJyb3I6IGAsIGUsIFwidXJsOiBcIiwgbywgXCJyZXF1ZXN0OlwiLCBuKSwgXG4gICAgICAgICAgICBlO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIHZvKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgLy8gVGhlIFJFU1QgQVBJIGF1dG9tYXRpY2FsbHkgYWdncmVnYXRlcyBhbGwgb2YgdGhlIHN0cmVhbWVkIHJlc3VsdHMsIHNvIHdlXG4gICAgICAgIC8vIGNhbiBqdXN0IHVzZSB0aGUgbm9ybWFsIGludm9rZSgpIG1ldGhvZC5cbiAgICAgICAgcmV0dXJuIHRoaXMuSW8odCwgZSwgbiwgcywgaSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVzIHRoZSBoZWFkZXJzIGZvciBhIHJlcXVlc3QsIGFkZGluZyBhbnkgYXV0aG9yaXphdGlvbiB0b2tlbiBpZlxuICAgICAqIHByZXNlbnQgYW5kIGFueSBhZGRpdGlvbmFsIGhlYWRlcnMgZm9yIHRoZSByZXF1ZXN0LlxuICAgICAqLyAgICBFbyh0LCBlLCBuKSB7XG4gICAgICAgIHRbXCJYLUdvb2ctQXBpLUNsaWVudFwiXSA9IFwiZ2wtanMvIGZpcmUvXCIgKyBTLCBcbiAgICAgICAgLy8gQ29udGVudC1UeXBlOiB0ZXh0L3BsYWluIHdpbGwgYXZvaWQgcHJlZmxpZ2h0IHJlcXVlc3RzIHdoaWNoIG1pZ2h0XG4gICAgICAgIC8vIG1lc3Mgd2l0aCBDT1JTIGFuZCByZWRpcmVjdHMgYnkgcHJveGllcy4gSWYgd2UgYWRkIGN1c3RvbSBoZWFkZXJzXG4gICAgICAgIC8vIHdlIHdpbGwgbmVlZCB0byBjaGFuZ2UgdGhpcyBjb2RlIHRvIHBvdGVudGlhbGx5IHVzZSB0aGUgJGh0dHBPdmVyd3JpdGVcbiAgICAgICAgLy8gcGFyYW1ldGVyIHN1cHBvcnRlZCBieSBFU0YgdG8gYXZvaWQgdHJpZ2dlcmluZyBwcmVmbGlnaHQgcmVxdWVzdHMuXG4gICAgICAgIHRbXCJDb250ZW50LVR5cGVcIl0gPSBcInRleHQvcGxhaW5cIiwgdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQgJiYgKHRbXCJYLUZpcmViYXNlLUdNUElEXCJdID0gdGhpcy5kYXRhYmFzZUluZm8uYXBwSWQpLCBcbiAgICAgICAgZSAmJiBlLmhlYWRlcnMuZm9yRWFjaCgoKGUsIG4pID0+IHRbbl0gPSBlKSksIG4gJiYgbi5oZWFkZXJzLmZvckVhY2goKChlLCBuKSA9PiB0W25dID0gZSkpO1xuICAgIH1cbiAgICBUbyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSB4dVt0XTtcbiAgICAgICAgcmV0dXJuIGAke3RoaXMubW99L3YxLyR7ZX06JHtufWA7XG4gICAgfVxufSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5mb3JjZUxvbmdQb2xsaW5nID0gdC5mb3JjZUxvbmdQb2xsaW5nLCB0aGlzLmF1dG9EZXRlY3RMb25nUG9sbGluZyA9IHQuYXV0b0RldGVjdExvbmdQb2xsaW5nLCBcbiAgICAgICAgdGhpcy51c2VGZXRjaFN0cmVhbXMgPSB0LnVzZUZldGNoU3RyZWFtcywgdGhpcy5sb25nUG9sbGluZ09wdGlvbnMgPSB0LmxvbmdQb2xsaW5nT3B0aW9ucztcbiAgICB9XG4gICAgQW8odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gQ3UoKTtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCgociwgbykgPT4ge1xuICAgICAgICAgICAgY29uc3QgdSA9IG5ldyBYaHJJbztcbiAgICAgICAgICAgIHUuc2V0V2l0aENyZWRlbnRpYWxzKCEwKSwgdS5saXN0ZW5PbmNlKEV2ZW50VHlwZS5DT01QTEVURSwgKCgpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHUuZ2V0TGFzdEVycm9yQ29kZSgpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgY2FzZSBFcnJvckNvZGUuTk9fRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gdS5nZXRSZXNwb25zZUpzb24oKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIE4oa3UsIGBYSFIgZm9yIFJQQyAnJHt0fScgJHtpfSByZWNlaXZlZDpgLCBKU09OLnN0cmluZ2lmeShlKSksIHIoZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLlRJTUVPVVQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBOKGt1LCBgUlBDICcke3R9JyAke2l9IHRpbWVkIG91dGApLCBvKG5ldyBVKHEuREVBRExJTkVfRVhDRUVERUQsIFwiUmVxdWVzdCB0aW1lIG91dFwiKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgIGNhc2UgRXJyb3JDb2RlLkhUVFBfRVJST1I6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBuID0gdS5nZXRTdGF0dXMoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChOKGt1LCBgUlBDICcke3R9JyAke2l9IGZhaWxlZCB3aXRoIHN0YXR1czpgLCBuLCBcInJlc3BvbnNlIHRleHQ6XCIsIHUuZ2V0UmVzcG9uc2VUZXh0KCkpLCBcbiAgICAgICAgICAgICAgICAgICAgICAgIG4gPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHQgPSB1LmdldFJlc3BvbnNlSnNvbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIEFycmF5LmlzQXJyYXkodCkgJiYgKHQgPSB0WzBdKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5lcnJvcjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZSAmJiBlLnN0YXR1cyAmJiBlLm1lc3NhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSB0LnRvTG93ZXJDYXNlKCkucmVwbGFjZSgvXy9nLCBcIi1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyhxKS5pbmRleE9mKGUpID49IDAgPyBlIDogcS5VTktOT1dOO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KGUuc3RhdHVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbyhuZXcgVSh0LCBlLm1lc3NhZ2UpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgbyhuZXcgVShxLlVOS05PV04sIFwiU2VydmVyIHJlc3BvbmRlZCB3aXRoIHN0YXR1cyBcIiArIHUuZ2V0U3RhdHVzKCkpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIHJlY2VpdmVkIGFuIEhUVFBfRVJST1IgYnV0IHRoZXJlJ3Mgbm8gc3RhdHVzIGNvZGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCdzIG1vc3QgcHJvYmFibHkgYSBjb25uZWN0aW9uIGlzc3VlXG4gICAgICAgICAgICAgICAgICAgICAgICBvKG5ldyBVKHEuVU5BVkFJTEFCTEUsIFwiQ29ubmVjdGlvbiBmYWlsZWQuXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIE8oKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XG4gICAgICAgICAgICAgICAgICAgIE4oa3UsIGBSUEMgJyR7dH0nICR7aX0gY29tcGxldGVkLmApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIGNvbnN0IGMgPSBKU09OLnN0cmluZ2lmeShzKTtcbiAgICAgICAgICAgIE4oa3UsIGBSUEMgJyR7dH0nICR7aX0gc2VuZGluZyByZXF1ZXN0OmAsIHMpLCB1LnNlbmQoZSwgXCJQT1NUXCIsIGMsIG4sIDE1KTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBSbyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBDdSgpLCBpID0gWyB0aGlzLm1vLCBcIi9cIiwgXCJnb29nbGUuZmlyZXN0b3JlLnYxLkZpcmVzdG9yZVwiLCBcIi9cIiwgdCwgXCIvY2hhbm5lbFwiIF0sIHIgPSBjcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0KCksIG8gPSBnZXRTdGF0RXZlbnRUYXJnZXQoKSwgdSA9IHtcbiAgICAgICAgICAgIC8vIFJlcXVpcmVkIGZvciBiYWNrZW5kIHN0aWNraW5lc3MsIHJvdXRpbmcgYmVoYXZpb3IgaXMgYmFzZWQgb24gdGhpc1xuICAgICAgICAgICAgLy8gcGFyYW1ldGVyLlxuICAgICAgICAgICAgaHR0cFNlc3Npb25JZFBhcmFtOiBcImdzZXNzaW9uaWRcIixcbiAgICAgICAgICAgIGluaXRNZXNzYWdlSGVhZGVyczoge30sXG4gICAgICAgICAgICBtZXNzYWdlVXJsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gVGhpcyBwYXJhbSBpcyB1c2VkIHRvIGltcHJvdmUgcm91dGluZyBhbmQgcHJvamVjdCBpc29sYXRpb24gYnkgdGhlXG4gICAgICAgICAgICAgICAgLy8gYmFja2VuZCBhbmQgbXVzdCBiZSBpbmNsdWRlZCBpbiBldmVyeSByZXF1ZXN0LlxuICAgICAgICAgICAgICAgIGRhdGFiYXNlOiBgcHJvamVjdHMvJHt0aGlzLmRhdGFiYXNlSWQucHJvamVjdElkfS9kYXRhYmFzZXMvJHt0aGlzLmRhdGFiYXNlSWQuZGF0YWJhc2V9YFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNlbmRSYXdKc29uOiAhMCxcbiAgICAgICAgICAgIHN1cHBvcnRzQ3Jvc3NEb21haW5YaHI6ICEwLFxuICAgICAgICAgICAgaW50ZXJuYWxDaGFubmVsUGFyYW1zOiB7XG4gICAgICAgICAgICAgICAgLy8gT3ZlcnJpZGUgdGhlIGRlZmF1bHQgdGltZW91dCAocmFuZG9taXplZCBiZXR3ZWVuIDEwLTIwIHNlY29uZHMpIHNpbmNlXG4gICAgICAgICAgICAgICAgLy8gYSBsYXJnZSB3cml0ZSBiYXRjaCBvbiBhIHNsb3cgaW50ZXJuZXQgY29ubmVjdGlvbiBtYXkgdGFrZSBhIGxvbmdcbiAgICAgICAgICAgICAgICAvLyB0aW1lIHRvIHNlbmQgdG8gdGhlIGJhY2tlbmQuIFJhdGhlciB0aGFuIGhhdmUgV2ViQ2hhbm5lbCBpbXBvc2UgYVxuICAgICAgICAgICAgICAgIC8vIHRpZ2h0IHRpbWVvdXQgd2hpY2ggY291bGQgbGVhZCB0byBpbmZpbml0ZSB0aW1lb3V0cyBhbmQgcmV0cmllcywgd2VcbiAgICAgICAgICAgICAgICAvLyBzZXQgaXQgdmVyeSBsYXJnZSAoNS0xMCBtaW51dGVzKSBhbmQgcmVseSBvbiB0aGUgYnJvd3NlcidzIGJ1aWx0aW5cbiAgICAgICAgICAgICAgICAvLyB0aW1lb3V0cyB0byBraWNrIGluIGlmIHRoZSByZXF1ZXN0IGlzbid0IHdvcmtpbmcuXG4gICAgICAgICAgICAgICAgZm9yd2FyZENoYW5uZWxSZXF1ZXN0VGltZW91dE1zOiA2ZTVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBmb3JjZUxvbmdQb2xsaW5nOiB0aGlzLmZvcmNlTG9uZ1BvbGxpbmcsXG4gICAgICAgICAgICBkZXRlY3RCdWZmZXJpbmdQcm94eTogdGhpcy5hdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcbiAgICAgICAgfSwgYyA9IHRoaXMubG9uZ1BvbGxpbmdPcHRpb25zLnRpbWVvdXRTZWNvbmRzO1xuICAgICAgICB2b2lkIDAgIT09IGMgJiYgKHUubG9uZ1BvbGxpbmdUaW1lb3V0ID0gTWF0aC5yb3VuZCgxZTMgKiBjKSksIHRoaXMudXNlRmV0Y2hTdHJlYW1zICYmICh1LnhtbEh0dHBGYWN0b3J5ID0gbmV3IEZldGNoWG1sSHR0cEZhY3Rvcnkoe30pKSwgXG4gICAgICAgIHRoaXMuRW8odS5pbml0TWVzc2FnZUhlYWRlcnMsIGUsIG4pLCBcbiAgICAgICAgLy8gU2VuZGluZyB0aGUgY3VzdG9tIGhlYWRlcnMgd2UganVzdCBhZGRlZCB0byByZXF1ZXN0LmluaXRNZXNzYWdlSGVhZGVyc1xuICAgICAgICAvLyAoQXV0aG9yaXphdGlvbiwgZXRjLikgd2lsbCB0cmlnZ2VyIHRoZSBicm93c2VyIHRvIG1ha2UgYSBDT1JTIHByZWZsaWdodFxuICAgICAgICAvLyByZXF1ZXN0IGJlY2F1c2UgdGhlIFhIUiB3aWxsIG5vIGxvbmdlciBtZWV0IHRoZSBjcml0ZXJpYSBmb3IgYSBcInNpbXBsZVwiXG4gICAgICAgIC8vIENPUlMgcmVxdWVzdDpcbiAgICAgICAgLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9DT1JTI1NpbXBsZV9yZXF1ZXN0c1xuICAgICAgICAvLyBUaGVyZWZvcmUgdG8gYXZvaWQgdGhlIENPUlMgcHJlZmxpZ2h0IHJlcXVlc3QgKGFuIGV4dHJhIG5ldHdvcmtcbiAgICAgICAgLy8gcm91bmR0cmlwKSwgd2UgdXNlIHRoZSBlbmNvZGVJbml0TWVzc2FnZUhlYWRlcnMgb3B0aW9uIHRvIHNwZWNpZnkgdGhhdFxuICAgICAgICAvLyB0aGUgaGVhZGVycyBzaG91bGQgaW5zdGVhZCBiZSBlbmNvZGVkIGluIHRoZSByZXF1ZXN0J3MgUE9TVCBwYXlsb2FkLFxuICAgICAgICAvLyB3aGljaCBpcyByZWNvZ25pemVkIGJ5IHRoZSB3ZWJjaGFubmVsIGJhY2tlbmQuXG4gICAgICAgIHUuZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzID0gITA7XG4gICAgICAgIGNvbnN0IGEgPSBpLmpvaW4oXCJcIik7XG4gICAgICAgIE4oa3UsIGBDcmVhdGluZyBSUEMgJyR7dH0nIHN0cmVhbSAke3N9OiAke2F9YCwgdSk7XG4gICAgICAgIGNvbnN0IGggPSByLmNyZWF0ZVdlYkNoYW5uZWwoYSwgdSk7XG4gICAgICAgIC8vIFdlYkNoYW5uZWwgc3VwcG9ydHMgc2VuZGluZyB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBoYW5kc2hha2UgLSBzYXZpbmdcbiAgICAgICAgLy8gYSBuZXR3b3JrIHJvdW5kIHRyaXAuIEhvd2V2ZXIsIGl0IHdpbGwgaGF2ZSB0byBjYWxsIHNlbmQgaW4gdGhlIHNhbWVcbiAgICAgICAgLy8gSlMgZXZlbnQgbG9vcCBhcyBvcGVuLiBJbiBvcmRlciB0byBlbmZvcmNlIHRoaXMsIHdlIGRlbGF5IGFjdHVhbGx5XG4gICAgICAgIC8vIG9wZW5pbmcgdGhlIFdlYkNoYW5uZWwgdW50aWwgc2VuZCBpcyBjYWxsZWQuIFdoZXRoZXIgd2UgaGF2ZSBjYWxsZWRcbiAgICAgICAgLy8gb3BlbiBpcyB0cmFja2VkIHdpdGggdGhpcyB2YXJpYWJsZS5cbiAgICAgICAgICAgICAgICBsZXQgbCA9ICExLCBmID0gITE7XG4gICAgICAgIC8vIEEgZmxhZyB0byBkZXRlcm1pbmUgd2hldGhlciB0aGUgc3RyZWFtIHdhcyBjbG9zZWQgKGJ5IHVzIG9yIHRocm91Z2ggYW5cbiAgICAgICAgLy8gZXJyb3IvY2xvc2UgZXZlbnQpIHRvIGF2b2lkIGRlbGl2ZXJpbmcgbXVsdGlwbGUgY2xvc2UgZXZlbnRzIG9yIHNlbmRpbmdcbiAgICAgICAgLy8gb24gYSBjbG9zZWQgc3RyZWFtXG4gICAgICAgICAgICAgICAgY29uc3QgZCA9IG5ldyBOdSh7XG4gICAgICAgICAgICBybzogZSA9PiB7XG4gICAgICAgICAgICAgICAgZiA/IE4oa3UsIGBOb3Qgc2VuZGluZyBiZWNhdXNlIFJQQyAnJHt0fScgc3RyZWFtICR7c30gaXMgY2xvc2VkOmAsIGUpIDogKGwgfHwgKE4oa3UsIGBPcGVuaW5nIFJQQyAnJHt0fScgc3RyZWFtICR7c30gdHJhbnNwb3J0LmApLCBcbiAgICAgICAgICAgICAgICBoLm9wZW4oKSwgbCA9ICEwKSwgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gc2VuZGluZzpgLCBlKSwgaC5zZW5kKGUpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBvbzogKCkgPT4gaC5jbG9zZSgpXG4gICAgICAgIH0pLCB3ID0gKHQsIGUsIG4pID0+IHtcbiAgICAgICAgICAgIC8vIFRPRE8oZGltb25kKTogY2xvc3VyZSB0eXBpbmcgc2VlbXMgYnJva2VuIGJlY2F1c2UgV2ViQ2hhbm5lbCBkb2VzXG4gICAgICAgICAgICAvLyBub3QgaW1wbGVtZW50IGdvb2cuZXZlbnRzLkxpc3RlbmFibGVcbiAgICAgICAgICAgIHQubGlzdGVuKGUsICh0ID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBuKHQpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgdDtcbiAgICAgICAgICAgICAgICAgICAgfSksIDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gQ2xvc3VyZSBldmVudHMgYXJlIGd1YXJkZWQgYW5kIGV4Y2VwdGlvbnMgYXJlIHN3YWxsb3dlZCwgc28gY2F0Y2ggYW55XG4gICAgICAgIC8vIGV4Y2VwdGlvbiBhbmQgcmV0aHJvdyB1c2luZyBhIHNldFRpbWVvdXQgc28gdGhleSBiZWNvbWUgdmlzaWJsZSBhZ2Fpbi5cbiAgICAgICAgLy8gTm90ZSB0aGF0IGV2ZW50dWFsbHkgdGhpcyBmdW5jdGlvbiBjb3VsZCBnbyBhd2F5IGlmIHdlIGFyZSBjb25maWRlbnRcbiAgICAgICAgLy8gZW5vdWdoIHRoZSBjb2RlIGlzIGV4Y2VwdGlvbiBmcmVlLlxuICAgICAgICAgICAgICAgIHJldHVybiB3KGgsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk9QRU4sICgoKSA9PiB7XG4gICAgICAgICAgICBmIHx8IE4oa3UsIGBSUEMgJyR7dH0nIHN0cmVhbSAke3N9IHRyYW5zcG9ydCBvcGVuZWQuYCk7XG4gICAgICAgIH0pKSwgdyhoLCBXZWJDaGFubmVsLkV2ZW50VHlwZS5DTE9TRSwgKCgpID0+IHtcbiAgICAgICAgICAgIGYgfHwgKGYgPSAhMCwgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gdHJhbnNwb3J0IGNsb3NlZGApLCBkLndvKCkpO1xuICAgICAgICB9KSksIHcoaCwgV2ViQ2hhbm5lbC5FdmVudFR5cGUuRVJST1IsIChlID0+IHtcbiAgICAgICAgICAgIGYgfHwgKGYgPSAhMCwgTShrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gdHJhbnNwb3J0IGVycm9yZWQ6YCwgZSksIGQud28obmV3IFUocS5VTkFWQUlMQUJMRSwgXCJUaGUgb3BlcmF0aW9uIGNvdWxkIG5vdCBiZSBjb21wbGV0ZWRcIikpKTtcbiAgICAgICAgfSkpLCB3KGgsIFdlYkNoYW5uZWwuRXZlbnRUeXBlLk1FU1NBR0UsIChlID0+IHtcbiAgICAgICAgICAgIHZhciBuO1xuICAgICAgICAgICAgaWYgKCFmKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgaSA9IGUuZGF0YVswXTtcbiAgICAgICAgICAgICAgICBGKCEhaSk7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzM1MTQzODkxKTogVGhlcmUgaXMgYSBidWcgaW4gT25lIFBsYXRmb3JtIHRoYXQgY2F1c2VkIGVycm9yc1xuICAgICAgICAgICAgICAgIC8vIChhbmQgb25seSBlcnJvcnMpIHRvIGJlIHdyYXBwZWQgaW4gYW4gZXh0cmEgYXJyYXkuIFRvIGJlIGZvcndhcmRcbiAgICAgICAgICAgICAgICAvLyBjb21wYXRpYmxlIHdpdGggdGhlIGJ1ZyB3ZSBuZWVkIHRvIGNoZWNrIGVpdGhlciBjb25kaXRpb24uIFRoZSBsYXR0ZXJcbiAgICAgICAgICAgICAgICAvLyBjYW4gYmUgcmVtb3ZlZCBvbmNlIHRoZSBmaXggaGFzIGJlZW4gcm9sbGVkIG91dC5cbiAgICAgICAgICAgICAgICAvLyBVc2UgYW55IGJlY2F1c2UgbXNnRGF0YS5lcnJvciBpcyBub3QgdHlwZWQuXG4gICAgICAgICAgICAgICAgY29uc3QgciA9IGksIG8gPSByLmVycm9yIHx8IChudWxsID09PSAobiA9IHJbMF0pIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uZXJyb3IpO1xuICAgICAgICAgICAgICAgIGlmIChvKSB7XG4gICAgICAgICAgICAgICAgICAgIE4oa3UsIGBSUEMgJyR7dH0nIHN0cmVhbSAke3N9IHJlY2VpdmVkIGVycm9yOmAsIG8pO1xuICAgICAgICAgICAgICAgICAgICAvLyBlcnJvci5zdGF0dXMgd2lsbCBiZSBhIHN0cmluZyBsaWtlICdPSycgb3IgJ05PVF9GT1VORCcuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBvLnN0YXR1cztcbiAgICAgICAgICAgICAgICAgICAgbGV0IG4gPSBcbiAgICAgICAgICAgICAgICAgICAgLyoqXG4gKiBNYXBzIGFuIGVycm9yIENvZGUgZnJvbSBhIEdSUEMgc3RhdHVzIGlkZW50aWZpZXIgbGlrZSAnTk9UX0ZPVU5EJy5cbiAqXG4gKiBAcmV0dXJucyBUaGUgQ29kZSBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBzdGF0dXMgc3RyaW5nIG9yIHVuZGVmaW5lZCBpZlxuICogICAgIHRoZXJlIGlzIG5vIG1hdGNoLlxuICovXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGxvb2t1cCBieSBzdHJpbmdcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBlID0gaWlbdF07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodm9pZCAwICE9PSBlKSByZXR1cm4gdWkoZSk7XG4gICAgICAgICAgICAgICAgICAgIH0oZSksIGkgPSBvLm1lc3NhZ2U7XG4gICAgICAgICAgICAgICAgICAgIHZvaWQgMCA9PT0gbiAmJiAobiA9IHEuSU5URVJOQUwsIGkgPSBcIlVua25vd24gZXJyb3Igc3RhdHVzOiBcIiArIGUgKyBcIiB3aXRoIG1lc3NhZ2UgXCIgKyBvLm1lc3NhZ2UpLCBcbiAgICAgICAgICAgICAgICAgICAgLy8gTWFyayBjbG9zZWQgc28gbm8gZnVydGhlciBldmVudHMgYXJlIHByb3BhZ2F0ZWRcbiAgICAgICAgICAgICAgICAgICAgZiA9ICEwLCBkLndvKG5ldyBVKG4sIGkpKSwgaC5jbG9zZSgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBOKGt1LCBgUlBDICcke3R9JyBzdHJlYW0gJHtzfSByZWNlaXZlZDpgLCBpKSwgZC5fbyhpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkpLCB3KG8sIEV2ZW50LlNUQVRfRVZFTlQsIChlID0+IHtcbiAgICAgICAgICAgIGUuc3RhdCA9PT0gU3RhdC5QUk9YWSA/IE4oa3UsIGBSUEMgJyR7dH0nIHN0cmVhbSAke3N9IGRldGVjdGVkIGJ1ZmZlcmluZyBwcm94eWApIDogZS5zdGF0ID09PSBTdGF0Lk5PUFJPWFkgJiYgTihrdSwgYFJQQyAnJHt0fScgc3RyZWFtICR7c30gZGV0ZWN0ZWQgbm8gYnVmZmVyaW5nIHByb3h5YCk7XG4gICAgICAgIH0pKSwgc2V0VGltZW91dCgoKCkgPT4ge1xuICAgICAgICAgICAgLy8gVGVjaG5pY2FsbHkgd2UgY291bGQvc2hvdWxkIHdhaXQgZm9yIHRoZSBXZWJDaGFubmVsIG9wZW5lZCBldmVudCxcbiAgICAgICAgICAgIC8vIGJ1dCBiZWNhdXNlIHdlIHdhbnQgdG8gc2VuZCB0aGUgZmlyc3QgbWVzc2FnZSB3aXRoIHRoZSBXZWJDaGFubmVsXG4gICAgICAgICAgICAvLyBoYW5kc2hha2Ugd2UgcHJldGVuZCB0aGUgY2hhbm5lbCBvcGVuZWQgaGVyZSAoYXN5bmNocm9ub3VzbHkpLCBhbmRcbiAgICAgICAgICAgIC8vIHRoZW4gZGVsYXkgdGhlIGFjdHVhbCBvcGVuIHVudGlsIHRoZSBmaXJzdCBtZXNzYWdlIGlzIHNlbnQuXG4gICAgICAgICAgICBkLmZvKCk7XG4gICAgICAgIH0pLCAwKSwgZDtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogSW5pdGlhbGl6ZXMgdGhlIFdlYkNoYW5uZWxDb25uZWN0aW9uIGZvciB0aGUgYnJvd3Nlci4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ3dpbmRvdycgaW1wbGVtZW50YXRpb24gb3IgbnVsbCBpZiBub3QgYXZhaWxhYmxlLiAqL1xuZnVuY3Rpb24gJHUoKSB7XG4gICAgLy8gYHdpbmRvd2AgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGUuZy4gaW4gUmVhY3ROYXRpdmUgYW5kIFdlYldvcmtlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgPyB3aW5kb3cgOiBudWxsO1xufVxuXG4vKiogVGhlIFBsYXRmb3JtJ3MgJ2RvY3VtZW50JyBpbXBsZW1lbnRhdGlvbiBvciBudWxsIGlmIG5vdCBhdmFpbGFibGUuICovIGZ1bmN0aW9uIE91KCkge1xuICAgIC8vIGBkb2N1bWVudGAgaXMgbm90IGFsd2F5cyBhdmFpbGFibGUsIGUuZy4gaW4gUmVhY3ROYXRpdmUgYW5kIFdlYldvcmtlcnMuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXJlc3RyaWN0ZWQtZ2xvYmFsc1xuICAgIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBkb2N1bWVudCA/IGRvY3VtZW50IDogbnVsbDtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gZnVuY3Rpb24gRnUodCkge1xuICAgIHJldHVybiBuZXcgVmkodCwgLyogdXNlUHJvdG8zSnNvbj0gKi8gITApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGhlbHBlciBmb3IgcnVubmluZyBkZWxheWVkIHRhc2tzIGZvbGxvd2luZyBhbiBleHBvbmVudGlhbCBiYWNrb2ZmIGN1cnZlXG4gKiBiZXR3ZWVuIGF0dGVtcHRzLlxuICpcbiAqIEVhY2ggZGVsYXkgaXMgbWFkZSB1cCBvZiBhIFwiYmFzZVwiIGRlbGF5IHdoaWNoIGZvbGxvd3MgdGhlIGV4cG9uZW50aWFsXG4gKiBiYWNrb2ZmIGN1cnZlLCBhbmQgYSArLy0gNTAlIFwiaml0dGVyXCIgdGhhdCBpcyBjYWxjdWxhdGVkIGFuZCBhZGRlZCB0byB0aGVcbiAqIGJhc2UgZGVsYXkuIFRoaXMgcHJldmVudHMgY2xpZW50cyBmcm9tIGFjY2lkZW50YWxseSBzeW5jaHJvbml6aW5nIHRoZWlyXG4gKiBkZWxheXMgY2F1c2luZyBzcGlrZXMgb2YgbG9hZCB0byB0aGUgYmFja2VuZC5cbiAqL1xuY2xhc3MgQnUge1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKlxuICAgICAqIFRoZSBBc3luY1F1ZXVlIHRvIHJ1biBiYWNrb2ZmIG9wZXJhdGlvbnMgb24uXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqXG4gICAgICogVGhlIElEIHRvIHVzZSB3aGVuIHNjaGVkdWxpbmcgYmFja29mZiBvcGVyYXRpb25zIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAqL1xuICAgIGUsIFxuICAgIC8qKlxuICAgICAqIFRoZSBpbml0aWFsIGRlbGF5ICh1c2VkIGFzIHRoZSBiYXNlIGRlbGF5IG9uIHRoZSBmaXJzdCByZXRyeSBhdHRlbXB0KS5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIGxpdHRsZSBhcyAwLjUqaW5pdGlhbERlbGF5TXMuXG4gICAgICovXG4gICAgbiA9IDFlM1xuICAgIC8qKlxuICAgICAqIFRoZSBtdWx0aXBsaWVyIHRvIHVzZSB0byBkZXRlcm1pbmUgdGhlIGV4dGVuZGVkIGJhc2UgZGVsYXkgYWZ0ZXIgZWFjaFxuICAgICAqIGF0dGVtcHQuXG4gICAgICovICwgcyA9IDEuNVxuICAgIC8qKlxuICAgICAqIFRoZSBtYXhpbXVtIGJhc2UgZGVsYXkgYWZ0ZXIgd2hpY2ggbm8gZnVydGhlciBiYWNrb2ZmIGlzIHBlcmZvcm1lZC5cbiAgICAgKiBOb3RlIHRoYXQgaml0dGVyIHdpbGwgc3RpbGwgYmUgYXBwbGllZCwgc28gdGhlIGFjdHVhbCBkZWxheSBjb3VsZCBiZSBhc1xuICAgICAqIG11Y2ggYXMgMS41Km1heERlbGF5TXMuXG4gICAgICovICwgaSA9IDZlNCkge1xuICAgICAgICB0aGlzLmlpID0gdCwgdGhpcy50aW1lcklkID0gZSwgdGhpcy5QbyA9IG4sIHRoaXMuYm8gPSBzLCB0aGlzLlZvID0gaSwgdGhpcy5TbyA9IDAsIFxuICAgICAgICB0aGlzLkRvID0gbnVsbCwgXG4gICAgICAgIC8qKiBUaGUgbGFzdCBiYWNrb2ZmIGF0dGVtcHQsIGFzIGVwb2NoIG1pbGxpc2Vjb25kcy4gKi9cbiAgICAgICAgdGhpcy5DbyA9IERhdGUubm93KCksIHRoaXMucmVzZXQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVzZXRzIHRoZSBiYWNrb2ZmIGRlbGF5LlxuICAgICAqXG4gICAgICogVGhlIHZlcnkgbmV4dCBiYWNrb2ZmQW5kV2FpdCgpIHdpbGwgaGF2ZSBubyBkZWxheS4gSWYgaXQgaXMgY2FsbGVkIGFnYWluXG4gICAgICogKGkuZS4gZHVlIHRvIGFuIGVycm9yKSwgaW5pdGlhbERlbGF5TXMgKHBsdXMgaml0dGVyKSB3aWxsIGJlIHVzZWQsIGFuZFxuICAgICAqIHN1YnNlcXVlbnQgb25lcyB3aWxsIGluY3JlYXNlIGFjY29yZGluZyB0byB0aGUgYmFja29mZkZhY3Rvci5cbiAgICAgKi8gICAgcmVzZXQoKSB7XG4gICAgICAgIHRoaXMuU28gPSAwO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXNldHMgdGhlIGJhY2tvZmYgZGVsYXkgdG8gdGhlIG1heGltdW0gZGVsYXkgKGUuZy4gZm9yIHVzZSBhZnRlciBhXG4gICAgICogUkVTT1VSQ0VfRVhIQVVTVEVEIGVycm9yKS5cbiAgICAgKi8gICAgeG8oKSB7XG4gICAgICAgIHRoaXMuU28gPSB0aGlzLlZvO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIGFmdGVyIGN1cnJlbnREZWxheU1zLCBhbmQgaW5jcmVhc2VzIHRoZVxuICAgICAqIGRlbGF5IGZvciBhbnkgc3Vic2VxdWVudCBhdHRlbXB0cy4gSWYgdGhlcmUgd2FzIGEgcGVuZGluZyBiYWNrb2ZmIG9wZXJhdGlvblxuICAgICAqIGFscmVhZHksIGl0IHdpbGwgYmUgY2FuY2VsZWQuXG4gICAgICovICAgIE5vKHQpIHtcbiAgICAgICAgLy8gQ2FuY2VsIGFueSBwZW5kaW5nIGJhY2tvZmYgb3BlcmF0aW9uLlxuICAgICAgICB0aGlzLmNhbmNlbCgpO1xuICAgICAgICAvLyBGaXJzdCBzY2hlZHVsZSB1c2luZyB0aGUgY3VycmVudCBiYXNlICh3aGljaCBtYXkgYmUgMCBhbmQgc2hvdWxkIGJlXG4gICAgICAgIC8vIGhvbm9yZWQgYXMgc3VjaCkuXG4gICAgICAgIGNvbnN0IGUgPSBNYXRoLmZsb29yKHRoaXMuU28gKyB0aGlzLmtvKCkpLCBuID0gTWF0aC5tYXgoMCwgRGF0ZS5ub3coKSAtIHRoaXMuQ28pLCBzID0gTWF0aC5tYXgoMCwgZSAtIG4pO1xuICAgICAgICAvLyBHdWFyZCBhZ2FpbnN0IGxhc3RBdHRlbXB0VGltZSBiZWluZyBpbiB0aGUgZnV0dXJlIGR1ZSB0byBhIGNsb2NrIGNoYW5nZS5cbiAgICAgICAgICAgICAgICBzID4gMCAmJiBOKFwiRXhwb25lbnRpYWxCYWNrb2ZmXCIsIGBCYWNraW5nIG9mZiBmb3IgJHtzfSBtcyAoYmFzZSBkZWxheTogJHt0aGlzLlNvfSBtcywgZGVsYXkgd2l0aCBqaXR0ZXI6ICR7ZX0gbXMsIGxhc3QgYXR0ZW1wdDogJHtufSBtcyBhZ28pYCksIFxuICAgICAgICB0aGlzLkRvID0gdGhpcy5paS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLnRpbWVySWQsIHMsICgoKSA9PiAodGhpcy5DbyA9IERhdGUubm93KCksIFxuICAgICAgICB0KCkpKSksIFxuICAgICAgICAvLyBBcHBseSBiYWNrb2ZmIGZhY3RvciB0byBkZXRlcm1pbmUgbmV4dCBkZWxheSBhbmQgZW5zdXJlIGl0IGlzIHdpdGhpblxuICAgICAgICAvLyBib3VuZHMuXG4gICAgICAgIHRoaXMuU28gKj0gdGhpcy5ibywgdGhpcy5TbyA8IHRoaXMuUG8gJiYgKHRoaXMuU28gPSB0aGlzLlBvKSwgdGhpcy5TbyA+IHRoaXMuVm8gJiYgKHRoaXMuU28gPSB0aGlzLlZvKTtcbiAgICB9XG4gICAgTW8oKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuRG8gJiYgKHRoaXMuRG8uc2tpcERlbGF5KCksIHRoaXMuRG8gPSBudWxsKTtcbiAgICB9XG4gICAgY2FuY2VsKCkge1xuICAgICAgICBudWxsICE9PSB0aGlzLkRvICYmICh0aGlzLkRvLmNhbmNlbCgpLCB0aGlzLkRvID0gbnVsbCk7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgcmFuZG9tIHZhbHVlIGluIHRoZSByYW5nZSBbLWN1cnJlbnRCYXNlTXMvMiwgY3VycmVudEJhc2VNcy8yXSAqLyAgICBrbygpIHtcbiAgICAgICAgcmV0dXJuIChNYXRoLnJhbmRvbSgpIC0gLjUpICogdGhpcy5TbztcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgUGVyc2lzdGVudFN0cmVhbSBpcyBhbiBhYnN0cmFjdCBiYXNlIGNsYXNzIHRoYXQgcmVwcmVzZW50cyBhIHN0cmVhbWluZyBSUENcbiAqIHRvIHRoZSBGaXJlc3RvcmUgYmFja2VuZC4gSXQncyBidWlsdCBvbiB0b3Agb2YgdGhlIGNvbm5lY3Rpb25zIG93biBzdXBwb3J0XG4gKiBmb3Igc3RyZWFtaW5nIFJQQ3MsIGFuZCBhZGRzIHNldmVyYWwgY3JpdGljYWwgZmVhdHVyZXMgZm9yIG91ciBjbGllbnRzOlxuICpcbiAqICAgLSBFeHBvbmVudGlhbCBiYWNrb2ZmIG9uIGZhaWx1cmVcbiAqICAgLSBBdXRoZW50aWNhdGlvbiB2aWEgQ3JlZGVudGlhbHNQcm92aWRlclxuICogICAtIERpc3BhdGNoaW5nIGFsbCBjYWxsYmFja3MgaW50byB0aGUgc2hhcmVkIHdvcmtlciBxdWV1ZVxuICogICAtIENsb3NpbmcgaWRsZSBzdHJlYW1zIGFmdGVyIDYwIHNlY29uZHMgb2YgaW5hY3Rpdml0eVxuICpcbiAqIFN1YmNsYXNzZXMgb2YgUGVyc2lzdGVudFN0cmVhbSBpbXBsZW1lbnQgc2VyaWFsaXphdGlvbiBvZiBtb2RlbHMgdG8gYW5kXG4gKiBmcm9tIHRoZSBKU09OIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBwcm90b2NvbCBidWZmZXJzIGZvciBhIHNwZWNpZmljXG4gKiBzdHJlYW1pbmcgUlBDLlxuICpcbiAqICMjIFN0YXJ0aW5nIGFuZCBTdG9wcGluZ1xuICpcbiAqIFN0cmVhbWluZyBSUENzIGFyZSBzdGF0ZWZ1bCBhbmQgbmVlZCB0byBiZSBzdGFydCgpZWQgYmVmb3JlIG1lc3NhZ2VzIGNhblxuICogYmUgc2VudCBhbmQgcmVjZWl2ZWQuIFRoZSBQZXJzaXN0ZW50U3RyZWFtIHdpbGwgY2FsbCB0aGUgb25PcGVuKCkgZnVuY3Rpb25cbiAqIG9mIHRoZSBsaXN0ZW5lciBvbmNlIHRoZSBzdHJlYW0gaXMgcmVhZHkgdG8gYWNjZXB0IHJlcXVlc3RzLlxuICpcbiAqIFNob3VsZCBhIHN0YXJ0KCkgZmFpbCwgUGVyc2lzdGVudFN0cmVhbSB3aWxsIGNhbGwgdGhlIHJlZ2lzdGVyZWQgb25DbG9zZSgpXG4gKiBsaXN0ZW5lciB3aXRoIGEgRmlyZXN0b3JlRXJyb3IgaW5kaWNhdGluZyB3aGF0IHdlbnQgd3JvbmcuXG4gKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIGNhbiBiZSBzdGFydGVkIGFuZCBzdG9wcGVkIHJlcGVhdGVkbHkuXG4gKlxuICogR2VuZXJpYyB0eXBlczpcbiAqICBTZW5kVHlwZTogVGhlIHR5cGUgb2YgdGhlIG91dGdvaW5nIG1lc3NhZ2Ugb2YgdGhlIHVuZGVybHlpbmdcbiAqICAgIGNvbm5lY3Rpb24gc3RyZWFtXG4gKiAgUmVjZWl2ZVR5cGU6IFRoZSB0eXBlIG9mIHRoZSBpbmNvbWluZyBtZXNzYWdlIG9mIHRoZSB1bmRlcmx5aW5nXG4gKiAgICBjb25uZWN0aW9uIHN0cmVhbVxuICogIExpc3RlbmVyVHlwZTogVGhlIHR5cGUgb2YgdGhlIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSB1c2VkIGZvciBjYWxsYmFja3NcbiAqL1xuY2xhc3MgTHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIsIG8sIHUpIHtcbiAgICAgICAgdGhpcy5paSA9IHQsIHRoaXMuJG8gPSBuLCB0aGlzLk9vID0gcywgdGhpcy5jb25uZWN0aW9uID0gaSwgdGhpcy5hdXRoQ3JlZGVudGlhbHNQcm92aWRlciA9IHIsIFxuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlciA9IG8sIHRoaXMubGlzdGVuZXIgPSB1LCB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBjbG9zZSBjb3VudCB0aGF0J3MgaW5jcmVtZW50ZWQgZXZlcnkgdGltZSB0aGUgc3RyZWFtIGlzIGNsb3NlZDsgdXNlZCBieVxuICAgICAgICAgKiBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyKCkgdG8gaW52YWxpZGF0ZSBjYWxsYmFja3MgdGhhdCBoYXBwZW4gYWZ0ZXJcbiAgICAgICAgICogY2xvc2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkZvID0gMCwgdGhpcy5CbyA9IG51bGwsIHRoaXMuTG8gPSBudWxsLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMucW8gPSBuZXcgQnUodCwgZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiBzdGFydCgpIGhhcyBiZWVuIGNhbGxlZCBhbmQgbm8gZXJyb3IgaGFzIG9jY3VycmVkLiBUcnVlXG4gICAgICogaW5kaWNhdGVzIHRoZSBzdHJlYW0gaXMgb3BlbiBvciBpbiB0aGUgcHJvY2VzcyBvZiBvcGVuaW5nICh3aGljaFxuICAgICAqIGVuY29tcGFzc2VzIHJlc3BlY3RpbmcgYmFja29mZiwgZ2V0dGluZyBhdXRoIHRva2VucywgYW5kIHN0YXJ0aW5nIHRoZVxuICAgICAqIGFjdHVhbCBSUEMpLiBVc2UgaXNPcGVuKCkgdG8gZGV0ZXJtaW5lIGlmIHRoZSBzdHJlYW0gaXMgb3BlbiBhbmQgcmVhZHkgZm9yXG4gICAgICogb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIFVvKCkge1xuICAgICAgICByZXR1cm4gMSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuU3RhcnRpbmcgKi8gPT09IHRoaXMuc3RhdGUgfHwgNSAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuQmFja29mZiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCB0aGlzLktvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgdW5kZXJseWluZyBSUEMgaXMgb3BlbiAodGhlIG9uT3BlbigpIGxpc3RlbmVyIGhhcyBiZWVuXG4gICAgICogY2FsbGVkKSBhbmQgdGhlIHN0cmVhbSBpcyByZWFkeSBmb3Igb3V0Ym91bmQgcmVxdWVzdHMuXG4gICAgICovICAgIEtvKCkge1xuICAgICAgICByZXR1cm4gMiAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiAqLyA9PT0gdGhpcy5zdGF0ZSB8fCAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovID09PSB0aGlzLnN0YXRlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTdGFydHMgdGhlIFJQQy4gT25seSBhbGxvd2VkIGlmIGlzU3RhcnRlZCgpIHJldHVybnMgZmFsc2UuIFRoZSBzdHJlYW0gaXNcbiAgICAgKiBub3QgaW1tZWRpYXRlbHkgcmVhZHkgZm9yIHVzZTogb25PcGVuKCkgd2lsbCBiZSBpbnZva2VkIHdoZW4gdGhlIFJQQyBpc1xuICAgICAqIHJlYWR5IGZvciBvdXRib3VuZCByZXF1ZXN0cywgYXQgd2hpY2ggcG9pbnQgaXNPcGVuKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RhcnQgcmV0dXJucywgaXNTdGFydGVkKCkgd2lsbCByZXR1cm4gdHJ1ZS5cbiAgICAgKi8gICAgc3RhcnQoKSB7XG4gICAgICAgIDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICE9PSB0aGlzLnN0YXRlID8gdGhpcy5hdXRoKCkgOiB0aGlzLkdvKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0b3BzIHRoZSBSUEMuIFRoaXMgY2FsbCBpcyBpZGVtcG90ZW50IGFuZCBhbGxvd2VkIHJlZ2FyZGxlc3Mgb2YgdGhlXG4gICAgICogY3VycmVudCBpc1N0YXJ0ZWQoKSBzdGF0ZS5cbiAgICAgKlxuICAgICAqIFdoZW4gc3RvcCByZXR1cm5zLCBpc1N0YXJ0ZWQoKSBhbmQgaXNPcGVuKCkgd2lsbCBib3RoIHJldHVybiBmYWxzZS5cbiAgICAgKi8gICAgYXN5bmMgc3RvcCgpIHtcbiAgICAgICAgdGhpcy5VbygpICYmIGF3YWl0IHRoaXMuY2xvc2UoMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFmdGVyIGFuIGVycm9yIHRoZSBzdHJlYW0gd2lsbCB1c3VhbGx5IGJhY2sgb2ZmIG9uIHRoZSBuZXh0IGF0dGVtcHQgdG9cbiAgICAgKiBzdGFydCBpdC4gSWYgdGhlIGVycm9yIHdhcnJhbnRzIGFuIGltbWVkaWF0ZSByZXN0YXJ0IG9mIHRoZSBzdHJlYW0sIHRoZVxuICAgICAqIHNlbmRlciBjYW4gdXNlIHRoaXMgdG8gaW5kaWNhdGUgdGhhdCB0aGUgcmVjZWl2ZXIgc2hvdWxkIG5vdCBiYWNrIG9mZi5cbiAgICAgKlxuICAgICAqIEVhY2ggZXJyb3Igd2lsbCBjYWxsIHRoZSBvbkNsb3NlKCkgbGlzdGVuZXIuIFRoYXQgZnVuY3Rpb24gY2FuIGRlY2lkZSB0b1xuICAgICAqIGluaGliaXQgYmFja29mZiBpZiByZXF1aXJlZC5cbiAgICAgKi8gICAgUW8oKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAwIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5Jbml0aWFsICovICwgdGhpcy5xby5yZXNldCgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBNYXJrcyB0aGlzIHN0cmVhbSBhcyBpZGxlLiBJZiBubyBmdXJ0aGVyIGFjdGlvbnMgYXJlIHBlcmZvcm1lZCBvbiB0aGVcbiAgICAgKiBzdHJlYW0gZm9yIG9uZSBtaW51dGUsIHRoZSBzdHJlYW0gd2lsbCBhdXRvbWF0aWNhbGx5IGNsb3NlIGl0c2VsZiBhbmRcbiAgICAgKiBub3RpZnkgdGhlIHN0cmVhbSdzIG9uQ2xvc2UoKSBoYW5kbGVyIHdpdGggU3RhdHVzLk9LLiBUaGUgc3RyZWFtIHdpbGwgdGhlblxuICAgICAqIGJlIGluIGEgIWlzU3RhcnRlZCgpIHN0YXRlLCByZXF1aXJpbmcgdGhlIGNhbGxlciB0byBzdGFydCB0aGUgc3RyZWFtIGFnYWluXG4gICAgICogYmVmb3JlIGZ1cnRoZXIgdXNlLlxuICAgICAqXG4gICAgICogT25seSBzdHJlYW1zIHRoYXQgYXJlIGluIHN0YXRlICdPcGVuJyBjYW4gYmUgbWFya2VkIGlkbGUsIGFzIGFsbCBvdGhlclxuICAgICAqIHN0YXRlcyBpbXBseSBwZW5kaW5nIG5ldHdvcmsgb3BlcmF0aW9ucy5cbiAgICAgKi8gICAgam8oKSB7XG4gICAgICAgIC8vIFN0YXJ0cyB0aGUgaWRsZSB0aW1lIGlmIHdlIGFyZSBpbiBzdGF0ZSAnT3BlbicgYW5kIGFyZSBub3QgeWV0IGFscmVhZHlcbiAgICAgICAgLy8gcnVubmluZyBhIHRpbWVyIChpbiB3aGljaCBjYXNlIHRoZSBwcmV2aW91cyBpZGxlIHRpbWVvdXQgc3RpbGwgYXBwbGllcykuXG4gICAgICAgIHRoaXMuS28oKSAmJiBudWxsID09PSB0aGlzLkJvICYmICh0aGlzLkJvID0gdGhpcy5paS5lbnF1ZXVlQWZ0ZXJEZWxheSh0aGlzLiRvLCA2ZTQsICgoKSA9PiB0aGlzLnpvKCkpKSk7XG4gICAgfVxuICAgIC8qKiBTZW5kcyBhIG1lc3NhZ2UgdG8gdGhlIHVuZGVybHlpbmcgc3RyZWFtLiAqLyAgICBXbyh0KSB7XG4gICAgICAgIHRoaXMuSG8oKSwgdGhpcy5zdHJlYW0uc2VuZCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBieSB0aGUgaWRsZSB0aW1lciB3aGVuIHRoZSBzdHJlYW0gc2hvdWxkIGNsb3NlIGR1ZSB0byBpbmFjdGl2aXR5LiAqLyAgICBhc3luYyB6bygpIHtcbiAgICAgICAgaWYgKHRoaXMuS28oKSkgXG4gICAgICAgIC8vIFdoZW4gdGltaW5nIG91dCBhbiBpZGxlIHN0cmVhbSB0aGVyZSdzIG5vIHJlYXNvbiB0byBmb3JjZSB0aGUgc3RyZWFtIGludG8gYmFja29mZiB3aGVuXG4gICAgICAgIC8vIGl0IHJlc3RhcnRzIHNvIHNldCB0aGUgc3RyZWFtIHN0YXRlIHRvIEluaXRpYWwgaW5zdGVhZCBvZiBFcnJvci5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2xvc2UoMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyk7XG4gICAgfVxuICAgIC8qKiBNYXJrcyB0aGUgc3RyZWFtIGFzIGFjdGl2ZSBhZ2Fpbi4gKi8gICAgSG8oKSB7XG4gICAgICAgIHRoaXMuQm8gJiYgKHRoaXMuQm8uY2FuY2VsKCksIHRoaXMuQm8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqIENhbmNlbHMgdGhlIGhlYWx0aCBjaGVjayBkZWxheWVkIG9wZXJhdGlvbi4gKi8gICAgSm8oKSB7XG4gICAgICAgIHRoaXMuTG8gJiYgKHRoaXMuTG8uY2FuY2VsKCksIHRoaXMuTG8gPSBudWxsKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2xvc2VzIHRoZSBzdHJlYW0gYW5kIGNsZWFucyB1cCBhcyBuZWNlc3Nhcnk6XG4gICAgICpcbiAgICAgKiAqIGNsb3NlcyB0aGUgdW5kZXJseWluZyBHUlBDIHN0cmVhbTtcbiAgICAgKiAqIGNhbGxzIHRoZSBvbkNsb3NlIGhhbmRsZXIgd2l0aCB0aGUgZ2l2ZW4gJ2Vycm9yJztcbiAgICAgKiAqIHNldHMgaW50ZXJuYWwgc3RyZWFtIHN0YXRlIHRvICdmaW5hbFN0YXRlJztcbiAgICAgKiAqIGFkanVzdHMgdGhlIGJhY2tvZmYgdGltZXIgYmFzZWQgb24gdGhlIGVycm9yXG4gICAgICpcbiAgICAgKiBBIG5ldyBzdHJlYW0gY2FuIGJlIG9wZW5lZCBieSBjYWxsaW5nIHN0YXJ0KCkuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmluYWxTdGF0ZSAtIHRoZSBpbnRlbmRlZCBzdGF0ZSBvZiB0aGUgc3RyZWFtIGFmdGVyIGNsb3NpbmcuXG4gICAgICogQHBhcmFtIGVycm9yIC0gdGhlIGVycm9yIHRoZSBjb25uZWN0aW9uIHdhcyBjbG9zZWQgd2l0aC5cbiAgICAgKi8gICAgYXN5bmMgY2xvc2UodCwgZSkge1xuICAgICAgICAvLyBDYW5jZWwgYW55IG91dHN0YW5kaW5nIHRpbWVycyAodGhleSdyZSBndWFyYW50ZWVkIG5vdCB0byBleGVjdXRlKS5cbiAgICAgICAgdGhpcy5IbygpLCB0aGlzLkpvKCksIHRoaXMucW8uY2FuY2VsKCksIFxuICAgICAgICAvLyBJbnZhbGlkYXRlcyBhbnkgc3RyZWFtLXJlbGF0ZWQgY2FsbGJhY2tzIChlLmcuIGZyb20gYXV0aCBvciB0aGVcbiAgICAgICAgLy8gdW5kZXJseWluZyBzdHJlYW0pLCBndWFyYW50ZWVpbmcgdGhleSB3b24ndCBleGVjdXRlLlxuICAgICAgICB0aGlzLkZvKyssIDQgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkVycm9yICovICE9PSB0ID8gXG4gICAgICAgIC8vIElmIHRoaXMgaXMgYW4gaW50ZW50aW9uYWwgY2xvc2UgZW5zdXJlIHdlIGRvbid0IGRlbGF5IG91ciBuZXh0IGNvbm5lY3Rpb24gYXR0ZW1wdC5cbiAgICAgICAgdGhpcy5xby5yZXNldCgpIDogZSAmJiBlLmNvZGUgPT09IHEuUkVTT1VSQ0VfRVhIQVVTVEVEID8gKFxuICAgICAgICAvLyBMb2cgdGhlIGVycm9yLiAoUHJvYmFibHkgZWl0aGVyICdxdW90YSBleGNlZWRlZCcgb3IgJ21heCBxdWV1ZSBsZW5ndGggcmVhY2hlZCcuKVxuICAgICAgICBrKGUudG9TdHJpbmcoKSksIGsoXCJVc2luZyBtYXhpbXVtIGJhY2tvZmYgZGVsYXkgdG8gcHJldmVudCBvdmVybG9hZGluZyB0aGUgYmFja2VuZC5cIiksIFxuICAgICAgICB0aGlzLnFvLnhvKCkpIDogZSAmJiBlLmNvZGUgPT09IHEuVU5BVVRIRU5USUNBVEVEICYmIDMgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkhlYWx0aHkgKi8gIT09IHRoaXMuc3RhdGUgJiYgKFxuICAgICAgICAvLyBcInVuYXV0aGVudGljYXRlZFwiIGVycm9yIG1lYW5zIHRoZSB0b2tlbiB3YXMgcmVqZWN0ZWQuIFRoaXMgc2hvdWxkIHJhcmVseVxuICAgICAgICAvLyBoYXBwZW4gc2luY2UgYm90aCBBdXRoIGFuZCBBcHBDaGVjayBlbnN1cmUgYSBzdWZmaWNpZW50IFRUTCB3aGVuIHdlXG4gICAgICAgIC8vIHJlcXVlc3QgYSB0b2tlbi4gSWYgYSB1c2VyIG1hbnVhbGx5IHJlc2V0cyB0aGVpciBzeXN0ZW0gY2xvY2sgdGhpcyBjYW5cbiAgICAgICAgLy8gZmFpbCwgaG93ZXZlci4gSW4gdGhpcyBjYXNlLCB3ZSBzaG91bGQgZ2V0IGEgQ29kZS5VTkFVVEhFTlRJQ0FURUQgZXJyb3JcbiAgICAgICAgLy8gYmVmb3JlIHdlIHJlY2VpdmVkIHRoZSBmaXJzdCBtZXNzYWdlIGFuZCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgdGhlIHRva2VuXG4gICAgICAgIC8vIHRvIGVuc3VyZSB0aGF0IHdlIGZldGNoIGEgbmV3IHRva2VuLlxuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsc1Byb3ZpZGVyLmludmFsaWRhdGVUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHNQcm92aWRlci5pbnZhbGlkYXRlVG9rZW4oKSksIFxuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgdW5kZXJseWluZyBzdHJlYW0gYmVjYXVzZSB3ZSBhcmUgbm8gbG9uZ2VyIGludGVyZXN0ZWQgaW4gZXZlbnRzLlxuICAgICAgICBudWxsICE9PSB0aGlzLnN0cmVhbSAmJiAodGhpcy5ZbygpLCB0aGlzLnN0cmVhbS5jbG9zZSgpLCB0aGlzLnN0cmVhbSA9IG51bGwpLCBcbiAgICAgICAgLy8gVGhpcyBzdGF0ZSBtdXN0IGJlIGFzc2lnbmVkIGJlZm9yZSBjYWxsaW5nIG9uQ2xvc2UoKSB0byBhbGxvdyB0aGUgY2FsbGJhY2sgdG9cbiAgICAgICAgLy8gaW5oaWJpdCBiYWNrb2ZmIG9yIG90aGVyd2lzZSBtYW5pcHVsYXRlIHRoZSBzdGF0ZSBpbiBpdHMgbm9uLXN0YXJ0ZWQgc3RhdGUuXG4gICAgICAgIHRoaXMuc3RhdGUgPSB0LCBcbiAgICAgICAgLy8gTm90aWZ5IHRoZSBsaXN0ZW5lciB0aGF0IHRoZSBzdHJlYW0gY2xvc2VkLlxuICAgICAgICBhd2FpdCB0aGlzLmxpc3RlbmVyLmFvKGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDYW4gYmUgb3ZlcnJpZGRlbiB0byBwZXJmb3JtIGFkZGl0aW9uYWwgY2xlYW51cCBiZWZvcmUgdGhlIHN0cmVhbSBpcyBjbG9zZWQuXG4gICAgICogQ2FsbGluZyBzdXBlci50ZWFyRG93bigpIGlzIG5vdCByZXF1aXJlZC5cbiAgICAgKi8gICAgWW8oKSB7fVxuICAgIGF1dGgoKSB7XG4gICAgICAgIHRoaXMuc3RhdGUgPSAxIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5TdGFydGluZyAqLztcbiAgICAgICAgY29uc3QgdCA9IHRoaXMuWG8odGhpcy5GbyksIGUgPSB0aGlzLkZvO1xuICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IEp1c3QgdXNlIGRpc3BhdGNoSWZOb3RDbG9zZWQsIGJ1dCBzZWUgVE9ETyBiZWxvdy5cbiAgICAgICAgICAgICAgICBQcm9taXNlLmFsbChbIHRoaXMuYXV0aENyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzUHJvdmlkZXIuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3QsIG5dKSA9PiB7XG4gICAgICAgICAgICAvLyBTdHJlYW0gY2FuIGJlIHN0b3BwZWQgd2hpbGUgd2FpdGluZyBmb3IgYXV0aGVudGljYXRpb24uXG4gICAgICAgICAgICAvLyBUT0RPKG1pa2VsZWhlbik6IFdlIHJlYWxseSBzaG91bGQganVzdCB1c2UgZGlzcGF0Y2hJZk5vdENsb3NlZFxuICAgICAgICAgICAgLy8gYW5kIGxldCB0aGlzIGRpc3BhdGNoIG9udG8gdGhlIHF1ZXVlLCBidXQgdGhhdCBvcGVuZWQgYSBzcGVjIHRlc3QgY2FuXG4gICAgICAgICAgICAvLyBvZiB3b3JtcyB0aGF0IEkgZG9uJ3Qgd2FudCB0byBkZWFsIHdpdGggaW4gdGhpcyBQUi5cbiAgICAgICAgICAgIHRoaXMuRm8gPT09IGUgJiYgXG4gICAgICAgICAgICAvLyBOb3JtYWxseSB3ZSdkIGhhdmUgdG8gc2NoZWR1bGUgdGhlIGNhbGxiYWNrIG9uIHRoZSBBc3luY1F1ZXVlLlxuICAgICAgICAgICAgLy8gSG93ZXZlciwgdGhlIGZvbGxvd2luZyBjYWxscyBhcmUgc2FmZSB0byBiZSBjYWxsZWQgb3V0c2lkZSB0aGVcbiAgICAgICAgICAgIC8vIEFzeW5jUXVldWUgc2luY2UgdGhleSBkb24ndCBjaGFpbiBhc3luY2hyb25vdXMgY2FsbHNcbiAgICAgICAgICAgIHRoaXMuWm8odCwgbik7XG4gICAgICAgIH0pLCAoZSA9PiB7XG4gICAgICAgICAgICB0KCgoKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG5ldyBVKHEuVU5LTk9XTiwgXCJGZXRjaGluZyBhdXRoIHRva2VuIGZhaWxlZDogXCIgKyBlLm1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnR1KHQpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIFpvKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHRoaXMuWG8odGhpcy5Gbyk7XG4gICAgICAgIHRoaXMuc3RyZWFtID0gdGhpcy5ldSh0LCBlKSwgdGhpcy5zdHJlYW0udW8oKCgpID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+ICh0aGlzLnN0YXRlID0gMiAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuT3BlbiAqLyAsIHRoaXMuTG8gPSB0aGlzLmlpLmVucXVldWVBZnRlckRlbGF5KHRoaXMuT28sIDFlNCwgKCgpID0+ICh0aGlzLktvKCkgJiYgKHRoaXMuc3RhdGUgPSAzIC8qIFBlcnNpc3RlbnRTdHJlYW1TdGF0ZS5IZWFsdGh5ICovKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKSwgdGhpcy5saXN0ZW5lci51bygpKSkpO1xuICAgICAgICB9KSksIHRoaXMuc3RyZWFtLmFvKCh0ID0+IHtcbiAgICAgICAgICAgIG4oKCgpID0+IHRoaXMudHUodCkpKTtcbiAgICAgICAgfSkpLCB0aGlzLnN0cmVhbS5vbk1lc3NhZ2UoKHQgPT4ge1xuICAgICAgICAgICAgbigoKCkgPT4gdGhpcy5vbk1lc3NhZ2UodCkpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBHbygpIHtcbiAgICAgICAgdGhpcy5zdGF0ZSA9IDUgLyogUGVyc2lzdGVudFN0cmVhbVN0YXRlLkJhY2tvZmYgKi8gLCB0aGlzLnFvLk5vKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gMCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuSW5pdGlhbCAqLyAsIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvLyBWaXNpYmxlIGZvciB0ZXN0c1xuICAgIHR1KHQpIHtcbiAgICAgICAgLy8gSW4gdGhlb3J5IHRoZSBzdHJlYW0gY291bGQgY2xvc2UgY2xlYW5seSwgaG93ZXZlciwgaW4gb3VyIGN1cnJlbnQgbW9kZWxcbiAgICAgICAgLy8gd2UgbmV2ZXIgZXhwZWN0IHRoaXMgdG8gaGFwcGVuIGJlY2F1c2UgaWYgd2Ugc3RvcCBhIHN0cmVhbSBvdXJzZWx2ZXMsXG4gICAgICAgIC8vIHRoaXMgY2FsbGJhY2sgd2lsbCBuZXZlciBiZSBjYWxsZWQuIFRvIHByZXZlbnQgY2FzZXMgd2hlcmUgd2UgcmV0cnlcbiAgICAgICAgLy8gd2l0aG91dCBhIGJhY2tvZmYgYWNjaWRlbnRhbGx5LCB3ZSBzZXQgdGhlIHN0cmVhbSB0byBlcnJvciBpbiBhbGwgY2FzZXMuXG4gICAgICAgIHJldHVybiBOKFwiUGVyc2lzdGVudFN0cmVhbVwiLCBgY2xvc2Ugd2l0aCBlcnJvcjogJHt0fWApLCB0aGlzLnN0cmVhbSA9IG51bGwsIHRoaXMuY2xvc2UoNCAvKiBQZXJzaXN0ZW50U3RyZWFtU3RhdGUuRXJyb3IgKi8gLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIFwiZGlzcGF0Y2hlclwiIGZ1bmN0aW9uIHRoYXQgZGlzcGF0Y2hlcyBvcGVyYXRpb25zIG9udG8gdGhlXG4gICAgICogQXN5bmNRdWV1ZSBidXQgb25seSBydW5zIHRoZW0gaWYgY2xvc2VDb3VudCByZW1haW5zIHVuY2hhbmdlZC4gVGhpcyBhbGxvd3NcbiAgICAgKiB1cyB0byB0dXJuIGF1dGggLyBzdHJlYW0gY2FsbGJhY2tzIGludG8gbm8tb3BzIGlmIHRoZSBzdHJlYW0gaXMgY2xvc2VkIC9cbiAgICAgKiByZS1vcGVuZWQsIGV0Yy5cbiAgICAgKi8gICAgWG8odCkge1xuICAgICAgICByZXR1cm4gZSA9PiB7XG4gICAgICAgICAgICB0aGlzLmlpLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHRoaXMuRm8gPT09IHQgPyBlKCkgOiAoTihcIlBlcnNpc3RlbnRTdHJlYW1cIiwgXCJzdHJlYW0gY2FsbGJhY2sgc2tpcHBlZCBieSBnZXRDbG9zZUd1YXJkZWREaXNwYXRjaGVyLlwiKSwgXG4gICAgICAgICAgICBQcm9taXNlLnJlc29sdmUoKSkpKTtcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBQZXJzaXN0ZW50U3RyZWFtIHRoYXQgaW1wbGVtZW50cyB0aGUgTGlzdGVuIFJQQy5cbiAqXG4gKiBPbmNlIHRoZSBMaXN0ZW4gc3RyZWFtIGhhcyBjYWxsZWQgdGhlIG9uT3BlbigpIGxpc3RlbmVyLCBhbnkgbnVtYmVyIG9mXG4gKiBsaXN0ZW4oKSBhbmQgdW5saXN0ZW4oKSBjYWxscyBjYW4gYmUgbWFkZSB0byBjb250cm9sIHdoYXQgY2hhbmdlcyB3aWxsIGJlXG4gKiBzZW50IGZyb20gdGhlIHNlcnZlciBmb3IgTGlzdGVuUmVzcG9uc2VzLlxuICovIGNsYXNzIHF1IGV4dGVuZHMgTHUge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgc3VwZXIodCwgXCJsaXN0ZW5fc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFRpbWVySWQuTGlzdGVuU3RyZWFtQ29ubmVjdGlvbkJhY2tvZmYgKi8gLCBcImxpc3Rlbl9zdHJlYW1faWRsZVwiIC8qIFRpbWVySWQuTGlzdGVuU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBUaW1lcklkLkhlYWx0aENoZWNrVGltZW91dCAqLyAsIGUsIG4sIHMsIHIpLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gaTtcbiAgICB9XG4gICAgZXUodCwgZSkge1xuICAgICAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9uLlJvKFwiTGlzdGVuXCIsIHQsIGUpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICAvLyBBIHN1Y2Nlc3NmdWwgcmVzcG9uc2UgbWVhbnMgdGhlIHN0cmVhbSBpcyBoZWFsdGh5XG4gICAgICAgIHRoaXMucW8ucmVzZXQoKTtcbiAgICAgICAgY29uc3QgZSA9IFFpKHRoaXMuc2VyaWFsaXplciwgdCksIG4gPSBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAvLyBXZSBoYXZlIG9ubHkgcmVhY2hlZCBhIGNvbnNpc3RlbnQgc25hcHNob3QgZm9yIHRoZSBlbnRpcmUgc3RyZWFtIGlmIHRoZXJlXG4gICAgICAgICAgICAvLyBpcyBhIHJlYWRfdGltZSBzZXQgYW5kIGl0IGFwcGxpZXMgdG8gYWxsIHRhcmdldHMgKGkuZS4gdGhlIGxpc3Qgb2ZcbiAgICAgICAgICAgIC8vIHRhcmdldHMgaXMgZW1wdHkpLiBUaGUgYmFja2VuZCBpcyBndWFyYW50ZWVkIHRvIHNlbmQgc3VjaCByZXNwb25zZXMuXG4gICAgICAgICAgICBpZiAoIShcInRhcmdldENoYW5nZVwiIGluIHQpKSByZXR1cm4gcnQubWluKCk7XG4gICAgICAgICAgICBjb25zdCBlID0gdC50YXJnZXRDaGFuZ2U7XG4gICAgICAgICAgICByZXR1cm4gZS50YXJnZXRJZHMgJiYgZS50YXJnZXRJZHMubGVuZ3RoID8gcnQubWluKCkgOiBlLnJlYWRUaW1lID8gTmkoZS5yZWFkVGltZSkgOiBydC5taW4oKTtcbiAgICAgICAgfSh0KTtcbiAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIubnUoZSwgbik7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVycyBpbnRlcmVzdCBpbiB0aGUgcmVzdWx0cyBvZiB0aGUgZ2l2ZW4gdGFyZ2V0LiBJZiB0aGUgdGFyZ2V0XG4gICAgICogaW5jbHVkZXMgYSByZXN1bWVUb2tlbiBpdCB3aWxsIGJlIGluY2x1ZGVkIGluIHRoZSByZXF1ZXN0LiBSZXN1bHRzIHRoYXRcbiAgICAgKiBhZmZlY3QgdGhlIHRhcmdldCB3aWxsIGJlIHN0cmVhbWVkIGJhY2sgYXMgV2F0Y2hDaGFuZ2UgbWVzc2FnZXMgdGhhdFxuICAgICAqIHJlZmVyZW5jZSB0aGUgdGFyZ2V0SWQuXG4gICAgICovICAgIHN1KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHt9O1xuICAgICAgICBlLmRhdGFiYXNlID0gTGkodGhpcy5zZXJpYWxpemVyKSwgZS5hZGRUYXJnZXQgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBsZXQgbjtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLnRhcmdldDtcbiAgICAgICAgICAgIGlmIChuID0gRm4ocykgPyB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBIaSh0LCBzKVxuICAgICAgICAgICAgfSA6IHtcbiAgICAgICAgICAgICAgICBxdWVyeTogSmkodCwgcylcbiAgICAgICAgICAgIH0sIG4udGFyZ2V0SWQgPSBlLnRhcmdldElkLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICBuLnJlc3VtZVRva2VuID0gQ2kodCwgZS5yZXN1bWVUb2tlbik7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IFNpKHQsIGUuZXhwZWN0ZWRDb3VudCk7XG4gICAgICAgICAgICAgICAgbnVsbCAhPT0gcyAmJiAobi5leHBlY3RlZENvdW50ID0gcyk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGUuc25hcHNob3RWZXJzaW9uLmNvbXBhcmVUbyhydC5taW4oKSkgPiAwKSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyh3dWFuZHkpOiBDb25zaWRlciByZW1vdmluZyBhYm92ZSBjaGVjayBiZWNhdXNlIGl0IGlzIG1vc3QgbGlrZWx5IHRydWUuXG4gICAgICAgICAgICAgICAgLy8gUmlnaHQgbm93LCBtYW55IHRlc3RzIGRlcGVuZCBvbiB0aGlzIGJlaGF2aW91ciB0aG91Z2ggKGxlYXZpbmcgbWluKCkgb3V0XG4gICAgICAgICAgICAgICAgLy8gb2Ygc2VyaWFsaXphdGlvbikuXG4gICAgICAgICAgICAgICAgbi5yZWFkVGltZSA9IERpKHQsIGUuc25hcHNob3RWZXJzaW9uLnRvVGltZXN0YW1wKCkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBTaSh0LCBlLmV4cGVjdGVkQ291bnQpO1xuICAgICAgICAgICAgICAgIG51bGwgIT09IHMgJiYgKG4uZXhwZWN0ZWRDb3VudCA9IHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG47XG4gICAgICAgIH0odGhpcy5zZXJpYWxpemVyLCB0KTtcbiAgICAgICAgY29uc3QgbiA9IFhpKHRoaXMuc2VyaWFsaXplciwgdCk7XG4gICAgICAgIG4gJiYgKGUubGFiZWxzID0gbiksIHRoaXMuV28oZSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVucmVnaXN0ZXJzIGludGVyZXN0IGluIHRoZSByZXN1bHRzIG9mIHRoZSB0YXJnZXQgYXNzb2NpYXRlZCB3aXRoIHRoZVxuICAgICAqIGdpdmVuIHRhcmdldElkLlxuICAgICAqLyAgICBpdSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7fTtcbiAgICAgICAgZS5kYXRhYmFzZSA9IExpKHRoaXMuc2VyaWFsaXplciksIGUucmVtb3ZlVGFyZ2V0ID0gdCwgdGhpcy5XbyhlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBTdHJlYW0gdGhhdCBpbXBsZW1lbnRzIHRoZSBXcml0ZSBSUEMuXG4gKlxuICogVGhlIFdyaXRlIFJQQyByZXF1aXJlcyB0aGUgY2FsbGVyIHRvIG1haW50YWluIHNwZWNpYWwgc3RyZWFtVG9rZW5cbiAqIHN0YXRlIGluIGJldHdlZW4gY2FsbHMsIHRvIGhlbHAgdGhlIHNlcnZlciB1bmRlcnN0YW5kIHdoaWNoIHJlc3BvbnNlcyB0aGVcbiAqIGNsaWVudCBoYXMgcHJvY2Vzc2VkIGJ5IHRoZSB0aW1lIHRoZSBuZXh0IHJlcXVlc3QgaXMgbWFkZS4gRXZlcnkgcmVzcG9uc2VcbiAqIHdpbGwgY29udGFpbiBhIHN0cmVhbVRva2VuOyB0aGlzIHZhbHVlIG11c3QgYmUgcGFzc2VkIHRvIHRoZSBuZXh0XG4gKiByZXF1ZXN0LlxuICpcbiAqIEFmdGVyIGNhbGxpbmcgc3RhcnQoKSBvbiB0aGlzIHN0cmVhbSwgdGhlIG5leHQgcmVxdWVzdCBtdXN0IGJlIGEgaGFuZHNoYWtlLFxuICogY29udGFpbmluZyB3aGF0ZXZlciBzdHJlYW1Ub2tlbiBpcyBvbiBoYW5kLiBPbmNlIGEgcmVzcG9uc2UgdG8gdGhpc1xuICogcmVxdWVzdCBpcyByZWNlaXZlZCwgYWxsIHBlbmRpbmcgbXV0YXRpb25zIG1heSBiZSBzdWJtaXR0ZWQuIFdoZW5cbiAqIHN1Ym1pdHRpbmcgbXVsdGlwbGUgYmF0Y2hlcyBvZiBtdXRhdGlvbnMgYXQgdGhlIHNhbWUgdGltZSwgaXQnc1xuICogb2theSB0byB1c2UgdGhlIHNhbWUgc3RyZWFtVG9rZW4gZm9yIHRoZSBjYWxscyB0byB3cml0ZU11dGF0aW9ucy5cbiAqXG4gKiBUT0RPKGIvMzMyNzEyMzUpOiBVc2UgcHJvdG8gdHlwZXNcbiAqLyBjbGFzcyBVdSBleHRlbmRzIEx1IHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByKSB7XG4gICAgICAgIHN1cGVyKHQsIFwid3JpdGVfc3RyZWFtX2Nvbm5lY3Rpb25fYmFja29mZlwiIC8qIFRpbWVySWQuV3JpdGVTdHJlYW1Db25uZWN0aW9uQmFja29mZiAqLyAsIFwid3JpdGVfc3RyZWFtX2lkbGVcIiAvKiBUaW1lcklkLldyaXRlU3RyZWFtSWRsZSAqLyAsIFwiaGVhbHRoX2NoZWNrX3RpbWVvdXRcIiAvKiBUaW1lcklkLkhlYWx0aENoZWNrVGltZW91dCAqLyAsIGUsIG4sIHMsIHIpLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gaSwgdGhpcy5ydSA9ICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUcmFja3Mgd2hldGhlciBvciBub3QgYSBoYW5kc2hha2UgaGFzIGJlZW4gc3VjY2Vzc2Z1bGx5IGV4Y2hhbmdlZCBhbmRcbiAgICAgKiB0aGUgc3RyZWFtIGlzIHJlYWR5IHRvIGFjY2VwdCBtdXRhdGlvbnMuXG4gICAgICovICAgIGdldCBvdSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucnU7XG4gICAgfVxuICAgIC8vIE92ZXJyaWRlIG9mIFBlcnNpc3RlbnRTdHJlYW0uc3RhcnRcbiAgICBzdGFydCgpIHtcbiAgICAgICAgdGhpcy5ydSA9ICExLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHZvaWQgMCwgc3VwZXIuc3RhcnQoKTtcbiAgICB9XG4gICAgWW8oKSB7XG4gICAgICAgIHRoaXMucnUgJiYgdGhpcy51dShbXSk7XG4gICAgfVxuICAgIGV1KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY29ubmVjdGlvbi5SbyhcIldyaXRlXCIsIHQsIGUpO1xuICAgIH1cbiAgICBvbk1lc3NhZ2UodCkge1xuICAgICAgICBpZiAoXG4gICAgICAgIC8vIEFsd2F5cyBjYXB0dXJlIHRoZSBsYXN0IHN0cmVhbSB0b2tlbi5cbiAgICAgICAgRighIXQuc3RyZWFtVG9rZW4pLCB0aGlzLmxhc3RTdHJlYW1Ub2tlbiA9IHQuc3RyZWFtVG9rZW4sIHRoaXMucnUpIHtcbiAgICAgICAgICAgIC8vIEEgc3VjY2Vzc2Z1bCBmaXJzdCB3cml0ZSByZXNwb25zZSBtZWFucyB0aGUgc3RyZWFtIGlzIGhlYWx0aHksXG4gICAgICAgICAgICAvLyBOb3RlLCB0aGF0IHdlIGNvdWxkIGNvbnNpZGVyIGEgc3VjY2Vzc2Z1bCBoYW5kc2hha2UgaGVhbHRoeSwgaG93ZXZlcixcbiAgICAgICAgICAgIC8vIHRoZSB3cml0ZSBpdHNlbGYgbWlnaHQgYmUgY2F1c2luZyBhbiBlcnJvciB3ZSB3YW50IHRvIGJhY2sgb2ZmIGZyb20uXG4gICAgICAgICAgICB0aGlzLnFvLnJlc2V0KCk7XG4gICAgICAgICAgICBjb25zdCBlID0gV2kodC53cml0ZVJlc3VsdHMsIHQuY29tbWl0VGltZSksIG4gPSBOaSh0LmNvbW1pdFRpbWUpO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGlzdGVuZXIuY3UobiwgZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gVGhlIGZpcnN0IHJlc3BvbnNlIGlzIGFsd2F5cyB0aGUgaGFuZHNoYWtlIHJlc3BvbnNlXG4gICAgICAgIHJldHVybiBGKCF0LndyaXRlUmVzdWx0cyB8fCAwID09PSB0LndyaXRlUmVzdWx0cy5sZW5ndGgpLCB0aGlzLnJ1ID0gITAsIHRoaXMubGlzdGVuZXIuYXUoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogU2VuZHMgYW4gaW5pdGlhbCBzdHJlYW1Ub2tlbiB0byB0aGUgc2VydmVyLCBwZXJmb3JtaW5nIHRoZSBoYW5kc2hha2VcbiAgICAgKiByZXF1aXJlZCB0byBtYWtlIHRoZSBTdHJlYW1pbmdXcml0ZSBSUEMgd29yay4gU3Vic2VxdWVudFxuICAgICAqIGNhbGxzIHNob3VsZCB3YWl0IHVudGlsIG9uSGFuZHNoYWtlQ29tcGxldGUgd2FzIGNhbGxlZC5cbiAgICAgKi8gICAgaHUoKSB7XG4gICAgICAgIC8vIFRPRE8oZGltb25kKTogU3VwcG9ydCBzdHJlYW0gcmVzdW1wdGlvbi4gV2UgaW50ZW50aW9uYWxseSBkbyBub3Qgc2V0IHRoZVxuICAgICAgICAvLyBzdHJlYW0gdG9rZW4gb24gdGhlIGhhbmRzaGFrZSwgaWdub3JpbmcgYW55IHN0cmVhbSB0b2tlbiB3ZSBtaWdodCBoYXZlLlxuICAgICAgICBjb25zdCB0ID0ge307XG4gICAgICAgIHQuZGF0YWJhc2UgPSBMaSh0aGlzLnNlcmlhbGl6ZXIpLCB0aGlzLldvKHQpO1xuICAgIH1cbiAgICAvKiogU2VuZHMgYSBncm91cCBvZiBtdXRhdGlvbnMgdG8gdGhlIEZpcmVzdG9yZSBiYWNrZW5kIHRvIGFwcGx5LiAqLyAgICB1dSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB7XG4gICAgICAgICAgICBzdHJlYW1Ub2tlbjogdGhpcy5sYXN0U3RyZWFtVG9rZW4sXG4gICAgICAgICAgICB3cml0ZXM6IHQubWFwKCh0ID0+IGppKHRoaXMuc2VyaWFsaXplciwgdCkpKVxuICAgICAgICB9O1xuICAgICAgICB0aGlzLldvKGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRGF0YXN0b3JlIGFuZCBpdHMgcmVsYXRlZCBtZXRob2RzIGFyZSBhIHdyYXBwZXIgYXJvdW5kIHRoZSBleHRlcm5hbCBHb29nbGVcbiAqIENsb3VkIERhdGFzdG9yZSBncnBjIEFQSSwgd2hpY2ggcHJvdmlkZXMgYW4gaW50ZXJmYWNlIHRoYXQgaXMgbW9yZSBjb252ZW5pZW50XG4gKiBmb3IgdGhlIHJlc3Qgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlIHRvIGNvbnN1bWUuXG4gKi9cbi8qKlxuICogQW4gaW1wbGVtZW50YXRpb24gb2YgRGF0YXN0b3JlIHRoYXQgZXhwb3NlcyBhZGRpdGlvbmFsIHN0YXRlIGZvciBpbnRlcm5hbFxuICogY29uc3VtcHRpb24uXG4gKi9cbmNsYXNzIEt1IGV4dGVuZHMgY2xhc3Mge30ge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5hdXRoQ3JlZGVudGlhbHMgPSB0LCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMgPSBlLCB0aGlzLmNvbm5lY3Rpb24gPSBuLCBcbiAgICAgICAgdGhpcy5zZXJpYWxpemVyID0gcywgdGhpcy5sdSA9ICExO1xuICAgIH1cbiAgICBmdSgpIHtcbiAgICAgICAgaWYgKHRoaXMubHUpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJUaGUgY2xpZW50IGhhcyBhbHJlYWR5IGJlZW4gdGVybWluYXRlZC5cIik7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBhdXRoIGFuZCBBcHBDaGVjayB0b2tlbnMuICovICAgIElvKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZnUoKSwgUHJvbWlzZS5hbGwoWyB0aGlzLmF1dGhDcmVkZW50aWFscy5nZXRUb2tlbigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSBdKS50aGVuKCgoW3MsIGldKSA9PiB0aGlzLmNvbm5lY3Rpb24uSW8odCwgZSwgbiwgcywgaSkpKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aHJvdyBcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lID8gKHQuY29kZSA9PT0gcS5VTkFVVEhFTlRJQ0FURUQgJiYgKHRoaXMuYXV0aENyZWRlbnRpYWxzLmludmFsaWRhdGVUb2tlbigpLCBcbiAgICAgICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSksIHQpIDogbmV3IFUocS5VTktOT1dOLCB0LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSk7XG4gICAgfVxuICAgIC8qKiBJbnZva2VzIHRoZSBwcm92aWRlZCBSUEMgd2l0aCBzdHJlYW1lZCByZXN1bHRzIHdpdGggYXV0aCBhbmQgQXBwQ2hlY2sgdG9rZW5zLiAqLyAgICB2byh0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmZ1KCksIFByb21pc2UuYWxsKFsgdGhpcy5hdXRoQ3JlZGVudGlhbHMuZ2V0VG9rZW4oKSwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzLmdldFRva2VuKCkgXSkudGhlbigoKFtpLCByXSkgPT4gdGhpcy5jb25uZWN0aW9uLnZvKHQsIGUsIG4sIGksIHIsIHMpKSkuY2F0Y2goKHQgPT4ge1xuICAgICAgICAgICAgdGhyb3cgXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSA/ICh0LmNvZGUgPT09IHEuVU5BVVRIRU5USUNBVEVEICYmICh0aGlzLmF1dGhDcmVkZW50aWFscy5pbnZhbGlkYXRlVG9rZW4oKSwgXG4gICAgICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuaW52YWxpZGF0ZVRva2VuKCkpLCB0KSA6IG5ldyBVKHEuVU5LTk9XTiwgdC50b1N0cmluZygpKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMubHUgPSAhMDtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JleHApOiBNYWtlIHN1cmUgdGhlcmUgaXMgb25seSBvbmUgRGF0YXN0b3JlIGluc3RhbmNlIHBlclxuLy8gZmlyZXN0b3JlLWV4cCBjbGllbnQuXG5hc3luYyBmdW5jdGlvbiBHdSh0LCBlLCBuKSB7XG4gICAgdmFyIHM7XG4gICAgY29uc3QgaSA9IEwodCksIHtyZXF1ZXN0OiByLCBkdTogb30gPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBKaSh0LCBlKSwgaSA9IHt9LCByID0gW107XG4gICAgICAgIGxldCBvID0gMDtcbiAgICAgICAgcmV0dXJuIG4uZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAvLyBNYXAgYWxsIGNsaWVudC1zaWRlIGFsaWFzZXMgdG8gYSB1bmlxdWUgc2hvcnQtZm9ybVxuICAgICAgICAgICAgLy8gYWxpYXMuIFRoaXMgYXZvaWRzIGlzc3VlcyB3aXRoIGNsaWVudC1zaWRlIGFsaWFzZXMgdGhhdFxuICAgICAgICAgICAgLy8gZXhjZWVkIHRoZSAxNTAwLWJ5dGUgc3RyaW5nIHNpemUgbGltaXQuXG4gICAgICAgICAgICBjb25zdCBlID0gXCJhZ2dyZWdhdGVfXCIgKyBvKys7XG4gICAgICAgICAgICBpW2VdID0gdC5hbGlhcywgXCJjb3VudFwiID09PSB0Lnl0ID8gci5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogZSxcbiAgICAgICAgICAgICAgICBjb3VudDoge31cbiAgICAgICAgICAgIH0pIDogXCJhdmdcIiA9PT0gdC55dCA/IHIucHVzaCh7XG4gICAgICAgICAgICAgICAgYWxpYXM6IGUsXG4gICAgICAgICAgICAgICAgYXZnOiB7XG4gICAgICAgICAgICAgICAgICAgIGZpZWxkOiBzcih0LmZpZWxkUGF0aClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KSA6IFwic3VtXCIgPT09IHQueXQgJiYgci5wdXNoKHtcbiAgICAgICAgICAgICAgICBhbGlhczogZSxcbiAgICAgICAgICAgICAgICBzdW06IHtcbiAgICAgICAgICAgICAgICAgICAgZmllbGQ6IHNyKHQuZmllbGRQYXRoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIHtcbiAgICAgICAgICAgIHJlcXVlc3Q6IHtcbiAgICAgICAgICAgICAgICBzdHJ1Y3R1cmVkQWdncmVnYXRpb25RdWVyeToge1xuICAgICAgICAgICAgICAgICAgICBhZ2dyZWdhdGlvbnM6IHIsXG4gICAgICAgICAgICAgICAgICAgIHN0cnVjdHVyZWRRdWVyeTogcy5zdHJ1Y3R1cmVkUXVlcnlcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHBhcmVudDogcy5wYXJlbnRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBkdTogaVxuICAgICAgICB9O1xuICAgIH0oaS5zZXJpYWxpemVyLCBKbihlKSwgbiksIHUgPSByLnBhcmVudDtcbiAgICBpLmNvbm5lY3Rpb24ucG8gfHwgZGVsZXRlIHIucGFyZW50O1xuICAgIGNvbnN0IGMgPSAoYXdhaXQgaS52byhcIlJ1bkFnZ3JlZ2F0aW9uUXVlcnlcIiwgdSwgciwgLypleHBlY3RlZFJlc3BvbnNlQ291bnQ9Ki8gMSkpLmZpbHRlcigodCA9PiAhIXQucmVzdWx0KSk7XG4gICAgLy8gT21pdCBSdW5BZ2dyZWdhdGlvblF1ZXJ5UmVzcG9uc2UgdGhhdCBvbmx5IGNvbnRhaW4gcmVhZFRpbWVzLlxuICAgICAgICBGKDEgPT09IGMubGVuZ3RoKTtcbiAgICAvLyBSZW1hcCB0aGUgc2hvcnQtZm9ybSBhbGlhc2VzIHRoYXQgd2VyZSBzZW50IHRvIHRoZSBzZXJ2ZXJcbiAgICAvLyB0byB0aGUgY2xpZW50LXNpZGUgYWxpYXNlcy4gVXNlcnMgd2lsbCBhY2Nlc3MgdGhlIHJlc3VsdHNcbiAgICAvLyB1c2luZyB0aGUgY2xpZW50LXNpZGUgYWxpYXMuXG4gICAgY29uc3QgYSA9IG51bGwgPT09IChzID0gY1swXS5yZXN1bHQpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuYWdncmVnYXRlRmllbGRzO1xuICAgIHJldHVybiBPYmplY3Qua2V5cyhhKS5yZWR1Y2UoKCh0LCBlKSA9PiAodFtvW2VdXSA9IGFbZV0sIHQpKSwge30pO1xufVxuXG4vKipcbiAqIEEgY29tcG9uZW50IHVzZWQgYnkgdGhlIFJlbW90ZVN0b3JlIHRvIHRyYWNrIHRoZSBPbmxpbmVTdGF0ZSAodGhhdCBpcyxcbiAqIHdoZXRoZXIgb3Igbm90IHRoZSBjbGllbnQgYXMgYSB3aG9sZSBzaG91bGQgYmUgY29uc2lkZXJlZCB0byBiZSBvbmxpbmUgb3JcbiAqIG9mZmxpbmUpLCBpbXBsZW1lbnRpbmcgdGhlIGFwcHJvcHJpYXRlIGhldXJpc3RpY3MuXG4gKlxuICogSW4gcGFydGljdWxhciwgd2hlbiB0aGUgY2xpZW50IGlzIHRyeWluZyB0byBjb25uZWN0IHRvIHRoZSBiYWNrZW5kLCB3ZVxuICogYWxsb3cgdXAgdG8gTUFYX1dBVENIX1NUUkVBTV9GQUlMVVJFUyB3aXRoaW4gT05MSU5FX1NUQVRFX1RJTUVPVVRfTVMgZm9yXG4gKiBhIGNvbm5lY3Rpb24gdG8gc3VjY2VlZC4gSWYgd2UgaGF2ZSB0b28gbWFueSBmYWlsdXJlcyBvciB0aGUgdGltZW91dCBlbGFwc2VzLFxuICogdGhlbiB3ZSBzZXQgdGhlIE9ubGluZVN0YXRlIHRvIE9mZmxpbmUsIGFuZCB0aGUgY2xpZW50IHdpbGwgYmVoYXZlIGFzIGlmXG4gKiBpdCBpcyBvZmZsaW5lIChnZXQoKXMgd2lsbCByZXR1cm4gY2FjaGVkIGRhdGEsIGV0Yy4pLlxuICovXG5jbGFzcyBRdSB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLm9ubGluZVN0YXRlSGFuZGxlciA9IGUsIFxuICAgICAgICAvKiogVGhlIGN1cnJlbnQgT25saW5lU3RhdGUuICovXG4gICAgICAgIHRoaXMuc3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGNvdW50IG9mIGNvbnNlY3V0aXZlIGZhaWx1cmVzIHRvIG9wZW4gdGhlIHN0cmVhbS4gSWYgaXQgcmVhY2hlcyB0aGVcbiAgICAgICAgICogbWF4aW11bSBkZWZpbmVkIGJ5IE1BWF9XQVRDSF9TVFJFQU1fRkFJTFVSRVMsIHdlJ2xsIHNldCB0aGUgT25saW5lU3RhdGUgdG9cbiAgICAgICAgICogT2ZmbGluZS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3UgPSAwLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgdGltZXIgdGhhdCBlbGFwc2VzIGFmdGVyIE9OTElORV9TVEFURV9USU1FT1VUX01TLCBhdCB3aGljaCBwb2ludCB3ZVxuICAgICAgICAgKiB0cmFuc2l0aW9uIGZyb20gT25saW5lU3RhdGUuVW5rbm93biB0byBPbmxpbmVTdGF0ZS5PZmZsaW5lIHdpdGhvdXQgd2FpdGluZ1xuICAgICAgICAgKiBmb3IgdGhlIHN0cmVhbSB0byBhY3R1YWxseSBmYWlsIChNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTIHRpbWVzKS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuX3UgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgdGhlIGNsaWVudCBzaG91bGQgbG9nIGEgd2FybmluZyBtZXNzYWdlIGlmIGl0IGZhaWxzIHRvIGNvbm5lY3QgdG9cbiAgICAgICAgICogdGhlIGJhY2tlbmQgKGluaXRpYWxseSB0cnVlLCBjbGVhcmVkIGFmdGVyIGEgc3VjY2Vzc2Z1bCBzdHJlYW0sIG9yIGlmIHdlJ3ZlXG4gICAgICAgICAqIGxvZ2dlZCB0aGUgbWVzc2FnZSBhbHJlYWR5KS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubXUgPSAhMDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FsbGVkIGJ5IFJlbW90ZVN0b3JlIHdoZW4gYSB3YXRjaCBzdHJlYW0gaXMgc3RhcnRlZCAoaW5jbHVkaW5nIG9uIGVhY2hcbiAgICAgKiBiYWNrb2ZmIGF0dGVtcHQpLlxuICAgICAqXG4gICAgICogSWYgdGhpcyBpcyB0aGUgZmlyc3QgYXR0ZW1wdCwgaXQgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gVW5rbm93biBhbmQgc3RhcnRzXG4gICAgICogdGhlIG9ubGluZVN0YXRlVGltZXIuXG4gICAgICovICAgIGd1KCkge1xuICAgICAgICAwID09PSB0aGlzLnd1ICYmICh0aGlzLnl1KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCB0aGlzLl91ID0gdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBZnRlckRlbGF5KFwib25saW5lX3N0YXRlX3RpbWVvdXRcIiAvKiBUaW1lcklkLk9ubGluZVN0YXRlVGltZW91dCAqLyAsIDFlNCwgKCgpID0+ICh0aGlzLl91ID0gbnVsbCwgXG4gICAgICAgIHRoaXMucHUoXCJCYWNrZW5kIGRpZG4ndCByZXNwb25kIHdpdGhpbiAxMCBzZWNvbmRzLlwiKSwgdGhpcy55dShcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyBvdXIgT25saW5lU3RhdGUgYXMgYXBwcm9wcmlhdGUgYWZ0ZXIgdGhlIHdhdGNoIHN0cmVhbSByZXBvcnRzIGFcbiAgICAgKiBmYWlsdXJlLiBUaGUgZmlyc3QgZmFpbHVyZSBtb3ZlcyB1cyB0byB0aGUgJ1Vua25vd24nIHN0YXRlLiBXZSB0aGVuIG1heVxuICAgICAqIGFsbG93IG11bHRpcGxlIGZhaWx1cmVzIChiYXNlZCBvbiBNQVhfV0FUQ0hfU1RSRUFNX0ZBSUxVUkVTKSBiZWZvcmUgd2VcbiAgICAgKiBhY3R1YWxseSB0cmFuc2l0aW9uIHRvIHRoZSAnT2ZmbGluZScgc3RhdGUuXG4gICAgICovICAgIEl1KHQpIHtcbiAgICAgICAgXCJPbmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PbmxpbmUgKi8gPT09IHRoaXMuc3RhdGUgPyB0aGlzLnl1KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pIDogKHRoaXMud3UrKywgXG4gICAgICAgIHRoaXMud3UgPj0gMSAmJiAodGhpcy5UdSgpLCB0aGlzLnB1KGBDb25uZWN0aW9uIGZhaWxlZCAxIHRpbWVzLiBNb3N0IHJlY2VudCBlcnJvcjogJHt0LnRvU3RyaW5nKCl9YCksIFxuICAgICAgICB0aGlzLnl1KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pKSk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEV4cGxpY2l0bHkgc2V0cyB0aGUgT25saW5lU3RhdGUgdG8gdGhlIHNwZWNpZmllZCBzdGF0ZS5cbiAgICAgKlxuICAgICAqIE5vdGUgdGhhdCB0aGlzIHJlc2V0cyBvdXIgdGltZXJzIC8gZmFpbHVyZSBjb3VudGVycywgZXRjLiB1c2VkIGJ5IG91clxuICAgICAqIE9mZmxpbmUgaGV1cmlzdGljcywgc28gbXVzdCBub3QgYmUgdXNlZCBpbiBwbGFjZSBvZlxuICAgICAqIGhhbmRsZVdhdGNoU3RyZWFtU3RhcnQoKSBhbmQgaGFuZGxlV2F0Y2hTdHJlYW1GYWlsdXJlKCkuXG4gICAgICovICAgIHNldCh0KSB7XG4gICAgICAgIHRoaXMuVHUoKSwgdGhpcy53dSA9IDAsIFwiT25saW5lXCIgLyogT25saW5lU3RhdGUuT25saW5lICovID09PSB0ICYmIChcbiAgICAgICAgLy8gV2UndmUgY29ubmVjdGVkIHRvIHdhdGNoIGF0IGxlYXN0IG9uY2UuIERvbid0IHdhcm4gdGhlIGRldmVsb3BlclxuICAgICAgICAvLyBhYm91dCBiZWluZyBvZmZsaW5lIGdvaW5nIGZvcndhcmQuXG4gICAgICAgIHRoaXMubXUgPSAhMSksIHRoaXMueXUodCk7XG4gICAgfVxuICAgIHl1KHQpIHtcbiAgICAgICAgdCAhPT0gdGhpcy5zdGF0ZSAmJiAodGhpcy5zdGF0ZSA9IHQsIHRoaXMub25saW5lU3RhdGVIYW5kbGVyKHQpKTtcbiAgICB9XG4gICAgcHUodCkge1xuICAgICAgICBjb25zdCBlID0gYENvdWxkIG5vdCByZWFjaCBDbG91ZCBGaXJlc3RvcmUgYmFja2VuZC4gJHt0fVxcblRoaXMgdHlwaWNhbGx5IGluZGljYXRlcyB0aGF0IHlvdXIgZGV2aWNlIGRvZXMgbm90IGhhdmUgYSBoZWFsdGh5IEludGVybmV0IGNvbm5lY3Rpb24gYXQgdGhlIG1vbWVudC4gVGhlIGNsaWVudCB3aWxsIG9wZXJhdGUgaW4gb2ZmbGluZSBtb2RlIHVudGlsIGl0IGlzIGFibGUgdG8gc3VjY2Vzc2Z1bGx5IGNvbm5lY3QgdG8gdGhlIGJhY2tlbmQuYDtcbiAgICAgICAgdGhpcy5tdSA/IChrKGUpLCB0aGlzLm11ID0gITEpIDogTihcIk9ubGluZVN0YXRlVHJhY2tlclwiLCBlKTtcbiAgICB9XG4gICAgVHUoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMuX3UgJiYgKHRoaXMuX3UuY2FuY2VsKCksIHRoaXMuX3UgPSBudWxsKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIGp1IHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgbG9jYWwgc3RvcmUsIHVzZWQgdG8gZmlsbCB0aGUgd3JpdGUgcGlwZWxpbmUgd2l0aCBvdXRib3VuZCBtdXRhdGlvbnMuXG4gICAgICovXG4gICAgdCwgXG4gICAgLyoqIFRoZSBjbGllbnQtc2lkZSBwcm94eSBmb3IgaW50ZXJhY3Rpbmcgd2l0aCB0aGUgYmFja2VuZC4gKi9cbiAgICBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5yZW1vdGVTeW5jZXIgPSB7fSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIGxpc3Qgb2YgdXAgdG8gTUFYX1BFTkRJTkdfV1JJVEVTIHdyaXRlcyB0aGF0IHdlIGhhdmUgZmV0Y2hlZCBmcm9tIHRoZVxuICAgICAgICAgKiBMb2NhbFN0b3JlIHZpYSBmaWxsV3JpdGVQaXBlbGluZSgpIGFuZCBoYXZlIG9yIHdpbGwgc2VuZCB0byB0aGUgd3JpdGVcbiAgICAgICAgICogc3RyZWFtLlxuICAgICAgICAgKlxuICAgICAgICAgKiBXaGVuZXZlciB3cml0ZVBpcGVsaW5lLmxlbmd0aCA+IDAgdGhlIFJlbW90ZVN0b3JlIHdpbGwgYXR0ZW1wdCB0byBzdGFydCBvclxuICAgICAgICAgKiByZXN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0uIFdoZW4gdGhlIHN0cmVhbSBpcyBlc3RhYmxpc2hlZCB0aGUgd3JpdGVzIGluIHRoZVxuICAgICAgICAgKiBwaXBlbGluZSB3aWxsIGJlIHNlbnQgaW4gb3JkZXIuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlcyByZW1haW4gaW4gd3JpdGVQaXBlbGluZSB1bnRpbCB0aGV5IGFyZSBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmRcbiAgICAgICAgICogYW5kIHRodXMgd2lsbCBhdXRvbWF0aWNhbGx5IGJlIHJlLXNlbnQgaWYgdGhlIHN0cmVhbSBpcyBpbnRlcnJ1cHRlZCAvXG4gICAgICAgICAqIHJlc3RhcnRlZCBiZWZvcmUgdGhleSdyZSBhY2tub3dsZWRnZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFdyaXRlIHJlc3BvbnNlcyBmcm9tIHRoZSBiYWNrZW5kIGFyZSBsaW5rZWQgdG8gdGhlaXIgb3JpZ2luYXRpbmcgcmVxdWVzdFxuICAgICAgICAgKiBwdXJlbHkgYmFzZWQgb24gb3JkZXIsIGFuZCBzbyB3ZSBjYW4ganVzdCBzaGlmdCgpIHdyaXRlcyBmcm9tIHRoZSBmcm9udCBvZlxuICAgICAgICAgKiB0aGUgd3JpdGVQaXBlbGluZSBhcyB3ZSByZWNlaXZlIHJlc3BvbnNlcy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuRXUgPSBbXSwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIG1hcHBpbmcgb2Ygd2F0Y2hlZCB0YXJnZXRzIHRoYXQgdGhlIGNsaWVudCBjYXJlcyBhYm91dCB0cmFja2luZyBhbmQgdGhlXG4gICAgICAgICAqIHVzZXIgaGFzIGV4cGxpY2l0bHkgY2FsbGVkIGEgJ2xpc3RlbicgZm9yIHRoaXMgdGFyZ2V0LlxuICAgICAgICAgKlxuICAgICAgICAgKiBUaGVzZSB0YXJnZXRzIG1heSBvciBtYXkgbm90IGhhdmUgYmVlbiBzZW50IHRvIG9yIGFja25vd2xlZGdlZCBieSB0aGVcbiAgICAgICAgICogc2VydmVyLiBPbiByZS1lc3RhYmxpc2hpbmcgdGhlIGxpc3RlbiBzdHJlYW0sIHRoZXNlIHRhcmdldHMgc2hvdWxkIGJlIHNlbnRcbiAgICAgICAgICogdG8gdGhlIHNlcnZlci4gVGhlIHRhcmdldHMgcmVtb3ZlZCB3aXRoIHVubGlzdGVucyBhcmUgcmVtb3ZlZCBlYWdlcmx5XG4gICAgICAgICAqIHdpdGhvdXQgd2FpdGluZyBmb3IgY29uZmlybWF0aW9uIGZyb20gdGhlIGxpc3RlbiBzdHJlYW0uXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLkF1ID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBBIHNldCBvZiByZWFzb25zIGZvciB3aHkgdGhlIFJlbW90ZVN0b3JlIG1heSBiZSBvZmZsaW5lLiBJZiBlbXB0eSwgdGhlXG4gICAgICAgICAqIFJlbW90ZVN0b3JlIG1heSBzdGFydCBpdHMgbmV0d29yayBjb25uZWN0aW9ucy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMudnUgPSBuZXcgU2V0LCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXJzIHRoYXQgZ2V0IGNhbGxlZCB3aGVuIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIG9yIGVuYWJsZWQuXG4gICAgICAgICAqXG4gICAgICAgICAqIFBPUlRJTkcgTk9URTogVGhlc2UgZnVuY3Rpb25zIGFyZSB1c2VkIG9uIHRoZSBXZWIgY2xpZW50IHRvIGNyZWF0ZSB0aGVcbiAgICAgICAgICogdW5kZXJseWluZyBzdHJlYW1zICh0byBzdXBwb3J0IHRyZWUtc2hha2VhYmxlIHN0cmVhbXMpLiBPbiBBbmRyb2lkIGFuZCBpT1MsXG4gICAgICAgICAqIHRoZSBzdHJlYW1zIGFyZSBjcmVhdGVkIGR1cmluZyBjb25zdHJ1Y3Rpb24gb2YgUmVtb3RlU3RvcmUuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLlJ1ID0gW10sIHRoaXMuUHUgPSBpLCB0aGlzLlB1LllyKCh0ID0+IHtcbiAgICAgICAgICAgIG4uZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgICAgIC8vIFBvcnRpbmcgTm90ZTogVW5saWtlIGlPUywgYHJlc3RhcnROZXR3b3JrKClgIGlzIGNhbGxlZCBldmVuIHdoZW4gdGhlXG4gICAgICAgICAgICAgICAgLy8gbmV0d29yayBiZWNvbWVzIHVucmVhY2hhYmxlIGFzIHdlIGRvbid0IGhhdmUgYW55IG90aGVyIHdheSB0byB0ZWFyXG4gICAgICAgICAgICAgICAgLy8gZG93biBvdXIgc3RyZWFtcy5cbiAgICAgICAgICAgICAgICBlYyh0aGlzKSAmJiAoTihcIlJlbW90ZVN0b3JlXCIsIFwiUmVzdGFydGluZyBzdHJlYW1zIGZvciBuZXR3b3JrIHJlYWNoYWJpbGl0eSBjaGFuZ2UuXCIpLCBcbiAgICAgICAgICAgICAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgICAgICAgICBlLnZ1LmFkZCg0IC8qIE9mZmxpbmVDYXVzZS5Db25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCBXdShlKSwgZS5idS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLyksIFxuICAgICAgICAgICAgICAgICAgICBlLnZ1LmRlbGV0ZSg0IC8qIE9mZmxpbmVDYXVzZS5Db25uZWN0aXZpdHlDaGFuZ2UgKi8pLCBhd2FpdCB6dShlKTtcbiAgICAgICAgICAgICAgICB9KHRoaXMpKTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpLCB0aGlzLmJ1ID0gbmV3IFF1KG4sIHMpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24genUodCkge1xuICAgIGlmIChlYyh0KSkgZm9yIChjb25zdCBlIG9mIHQuUnUpIGF3YWl0IGUoLyogZW5hYmxlZD0gKi8gITApO1xufVxuXG4vKipcbiAqIFRlbXBvcmFyaWx5IGRpc2FibGVzIHRoZSBuZXR3b3JrLiBUaGUgbmV0d29yayBjYW4gYmUgcmUtZW5hYmxlZCB1c2luZ1xuICogZW5hYmxlTmV0d29yaygpLlxuICovIGFzeW5jIGZ1bmN0aW9uIFd1KHQpIHtcbiAgICBmb3IgKGNvbnN0IGUgb2YgdC5SdSkgYXdhaXQgZSgvKiBlbmFibGVkPSAqLyAhMSk7XG59XG5cbi8qKlxuICogU3RhcnRzIG5ldyBsaXN0ZW4gZm9yIHRoZSBnaXZlbiB0YXJnZXQuIFVzZXMgcmVzdW1lIHRva2VuIGlmIHByb3ZpZGVkLiBJdFxuICogaXMgYSBuby1vcCBpZiB0aGUgdGFyZ2V0IG9mIGdpdmVuIGBUYXJnZXREYXRhYCBpcyBhbHJlYWR5IGJlaW5nIGxpc3RlbmVkIHRvLlxuICovXG5mdW5jdGlvbiBIdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgbi5BdS5oYXMoZS50YXJnZXRJZCkgfHwgKFxuICAgIC8vIE1hcmsgdGhpcyBhcyBzb21ldGhpbmcgdGhlIGNsaWVudCBpcyBjdXJyZW50bHkgbGlzdGVuaW5nIGZvci5cbiAgICBuLkF1LnNldChlLnRhcmdldElkLCBlKSwgdGMobikgPyBcbiAgICAvLyBUaGUgbGlzdGVuIHdpbGwgYmUgc2VudCBpbiBvbldhdGNoU3RyZWFtT3BlblxuICAgIFp1KG4pIDogcGMobikuS28oKSAmJiBZdShuLCBlKSk7XG59XG5cbi8qKlxuICogUmVtb3ZlcyB0aGUgbGlzdGVuIGZyb20gc2VydmVyLiBJdCBpcyBhIG5vLW9wIGlmIHRoZSBnaXZlbiB0YXJnZXQgaWQgaXNcbiAqIG5vdCBiZWluZyBsaXN0ZW5lZCB0by5cbiAqLyBmdW5jdGlvbiBKdSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBwYyhuKTtcbiAgICBuLkF1LmRlbGV0ZShlKSwgcy5LbygpICYmIFh1KG4sIGUpLCAwID09PSBuLkF1LnNpemUgJiYgKHMuS28oKSA/IHMuam8oKSA6IGVjKG4pICYmIFxuICAgIC8vIFJldmVydCB0byBPbmxpbmVTdGF0ZS5Vbmtub3duIGlmIHRoZSB3YXRjaCBzdHJlYW0gaXMgbm90IG9wZW4gYW5kIHdlXG4gICAgLy8gaGF2ZSBubyBsaXN0ZW5lcnMsIHNpbmNlIHdpdGhvdXQgYW55IGxpc3RlbnMgdG8gc2VuZCB3ZSBjYW5ub3RcbiAgICAvLyBjb25maXJtIGlmIHRoZSBzdHJlYW0gaXMgaGVhbHRoeSBhbmQgdXBncmFkZSB0byBPbmxpbmVTdGF0ZS5PbmxpbmUuXG4gICAgbi5idS5zZXQoXCJVbmtub3duXCIgLyogT25saW5lU3RhdGUuVW5rbm93biAqLykpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSB0aGUgZXhwZWN0ZWQgbnVtYmVyIG9mIHBlbmRpbmcgcmVzcG9uc2VzIHdlJ3JlIGR1ZVxuICogZnJvbSB3YXRjaCBzbyB3ZSB3YWl0IGZvciB0aGUgYWNrIHRvIHByb2Nlc3MgYW55IG1lc3NhZ2VzIGZyb20gdGhpcyB0YXJnZXQuXG4gKi8gZnVuY3Rpb24gWXUodCwgZSkge1xuICAgIGlmICh0LlZ1LnF0KGUudGFyZ2V0SWQpLCBlLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDAgfHwgZS5zbmFwc2hvdFZlcnNpb24uY29tcGFyZVRvKHJ0Lm1pbigpKSA+IDApIHtcbiAgICAgICAgY29uc3QgbiA9IHQucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZS50YXJnZXRJZCkuc2l6ZTtcbiAgICAgICAgZSA9IGUud2l0aEV4cGVjdGVkQ291bnQobik7XG4gICAgfVxuICAgIHBjKHQpLnN1KGUpO1xufVxuXG4vKipcbiAqIFdlIG5lZWQgdG8gaW5jcmVtZW50IHRoZSBleHBlY3RlZCBudW1iZXIgb2YgcGVuZGluZyByZXNwb25zZXMgd2UncmUgZHVlXG4gKiBmcm9tIHdhdGNoIHNvIHdlIHdhaXQgZm9yIHRoZSByZW1vdmFsIG9uIHRoZSBzZXJ2ZXIgYmVmb3JlIHdlIHByb2Nlc3MgYW55XG4gKiBtZXNzYWdlcyBmcm9tIHRoaXMgdGFyZ2V0LlxuICovIGZ1bmN0aW9uIFh1KHQsIGUpIHtcbiAgICB0LlZ1LnF0KGUpLCBwYyh0KS5pdShlKTtcbn1cblxuZnVuY3Rpb24gWnUodCkge1xuICAgIHQuVnUgPSBuZXcgRWkoe1xuICAgICAgICBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0OiBlID0+IHQucmVtb3RlU3luY2VyLmdldFJlbW90ZUtleXNGb3JUYXJnZXQoZSksXG4gICAgICAgIGxlOiBlID0+IHQuQXUuZ2V0KGUpIHx8IG51bGwsXG4gICAgICAgIHVlOiAoKSA9PiB0LmRhdGFzdG9yZS5zZXJpYWxpemVyLmRhdGFiYXNlSWRcbiAgICB9KSwgcGModCkuc3RhcnQoKSwgdC5idS5ndSgpO1xufVxuXG4vKipcbiAqIFJldHVybnMgd2hldGhlciB0aGUgd2F0Y2ggc3RyZWFtIHNob3VsZCBiZSBzdGFydGVkIGJlY2F1c2UgaXQncyBuZWNlc3NhcnlcbiAqIGFuZCBoYXMgbm90IHlldCBiZWVuIHN0YXJ0ZWQuXG4gKi8gZnVuY3Rpb24gdGModCkge1xuICAgIHJldHVybiBlYyh0KSAmJiAhcGModCkuVW8oKSAmJiB0LkF1LnNpemUgPiAwO1xufVxuXG5mdW5jdGlvbiBlYyh0KSB7XG4gICAgcmV0dXJuIDAgPT09IEwodCkudnUuc2l6ZTtcbn1cblxuZnVuY3Rpb24gbmModCkge1xuICAgIHQuVnUgPSB2b2lkIDA7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNjKHQpIHtcbiAgICB0LkF1LmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgIFl1KHQsIGUpO1xuICAgIH0pKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gaWModCwgZSkge1xuICAgIG5jKHQpLCBcbiAgICAvLyBJZiB3ZSBzdGlsbCBuZWVkIHRoZSB3YXRjaCBzdHJlYW0sIHJldHJ5IHRoZSBjb25uZWN0aW9uLlxuICAgIHRjKHQpID8gKHQuYnUuSXUoZSksIFp1KHQpKSA6IFxuICAgIC8vIE5vIG5lZWQgdG8gcmVzdGFydCB3YXRjaCBzdHJlYW0gYmVjYXVzZSB0aGVyZSBhcmUgbm8gYWN0aXZlIHRhcmdldHMuXG4gICAgLy8gVGhlIG9ubGluZSBzdGF0ZSBpcyBzZXQgdG8gdW5rbm93biBiZWNhdXNlIHRoZXJlIGlzIG5vIGFjdGl2ZSBhdHRlbXB0XG4gICAgLy8gYXQgZXN0YWJsaXNoaW5nIGEgY29ubmVjdGlvblxuICAgIHQuYnUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pO1xufVxuXG5hc3luYyBmdW5jdGlvbiByYyh0LCBlLCBuKSB7XG4gICAgaWYgKFxuICAgIC8vIE1hcmsgdGhlIGNsaWVudCBhcyBvbmxpbmUgc2luY2Ugd2UgZ290IGEgbWVzc2FnZSBmcm9tIHRoZSBzZXJ2ZXJcbiAgICB0LmJ1LnNldChcIk9ubGluZVwiIC8qIE9ubGluZVN0YXRlLk9ubGluZSAqLyksIGUgaW5zdGFuY2VvZiBJaSAmJiAyIC8qIFdhdGNoVGFyZ2V0Q2hhbmdlU3RhdGUuUmVtb3ZlZCAqLyA9PT0gZS5zdGF0ZSAmJiBlLmNhdXNlKSBcbiAgICAvLyBUaGVyZSB3YXMgYW4gZXJyb3Igb24gYSB0YXJnZXQsIGRvbid0IHdhaXQgZm9yIGEgY29uc2lzdGVudCBzbmFwc2hvdFxuICAgIC8vIHRvIHJhaXNlIGV2ZW50c1xuICAgIHRyeSB7XG4gICAgICAgIGF3YWl0IFxuICAgICAgICAvKiogSGFuZGxlcyBhbiBlcnJvciBvbiBhIHRhcmdldCAqL1xuICAgICAgICBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gZS5jYXVzZTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgcyBvZiBlLnRhcmdldElkcykgXG4gICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICB0LkF1LmhhcyhzKSAmJiAoYXdhaXQgdC5yZW1vdGVTeW5jZXIucmVqZWN0TGlzdGVuKHMsIG4pLCB0LkF1LmRlbGV0ZShzKSwgdC5WdS5yZW1vdmVUYXJnZXQocykpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQXR0ZW1wdHMgdG8gZmlsbCBvdXIgd3JpdGUgcGlwZWxpbmUgd2l0aCB3cml0ZXMgZnJvbSB0aGUgTG9jYWxTdG9yZS5cbiAqXG4gKiBDYWxsZWQgaW50ZXJuYWxseSB0byBib290c3RyYXAgb3IgcmVmaWxsIHRoZSB3cml0ZSBwaXBlbGluZSBhbmQgYnlcbiAqIFN5bmNFbmdpbmUgd2hlbmV2ZXIgdGhlcmUgYXJlIG5ldyBtdXRhdGlvbnMgdG8gcHJvY2Vzcy5cbiAqXG4gKiBTdGFydHMgdGhlIHdyaXRlIHN0cmVhbSBpZiBuZWNlc3NhcnkuXG4gKi8gKHQsIGUpO1xuICAgIH0gY2F0Y2ggKG4pIHtcbiAgICAgICAgTihcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJlbW92ZSB0YXJnZXRzICVzOiAlcyBcIiwgZS50YXJnZXRJZHMuam9pbihcIixcIiksIG4pLCBcbiAgICAgICAgYXdhaXQgb2ModCwgbik7XG4gICAgfSBlbHNlIGlmIChlIGluc3RhbmNlb2YgeWkgPyB0LlZ1Lkh0KGUpIDogZSBpbnN0YW5jZW9mIHBpID8gdC5WdS5uZShlKSA6IHQuVnUuWHQoZSksIFxuICAgICFuLmlzRXF1YWwocnQubWluKCkpKSB0cnkge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgb3UodC5sb2NhbFN0b3JlKTtcbiAgICAgICAgbi5jb21wYXJlVG8oZSkgPj0gMCAmJiBcbiAgICAgICAgLy8gV2UgaGF2ZSByZWNlaXZlZCBhIHRhcmdldCBjaGFuZ2Ugd2l0aCBhIGdsb2JhbCBzbmFwc2hvdCBpZiB0aGUgc25hcHNob3RcbiAgICAgICAgLy8gdmVyc2lvbiBpcyBub3QgZXF1YWwgdG8gU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICBhd2FpdCBcbiAgICAgICAgLyoqXG4gKiBUYWtlcyBhIGJhdGNoIG9mIGNoYW5nZXMgZnJvbSB0aGUgRGF0YXN0b3JlLCByZXBhY2thZ2VzIHRoZW0gYXMgYVxuICogUmVtb3RlRXZlbnQsIGFuZCBwYXNzZXMgdGhhdCBvbiB0byB0aGUgbGlzdGVuZXIsIHdoaWNoIGlzIHR5cGljYWxseSB0aGVcbiAqIFN5bmNFbmdpbmUuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IHQuVnUuY2UoZSk7XG4gICAgICAgICAgICAvLyBVcGRhdGUgaW4tbWVtb3J5IHJlc3VtZSB0b2tlbnMuIExvY2FsU3RvcmUgd2lsbCB1cGRhdGUgdGhlXG4gICAgICAgICAgICAvLyBwZXJzaXN0ZW50IHZpZXcgb2YgdGhlc2Ugd2hlbiBhcHBseWluZyB0aGUgY29tcGxldGVkIFJlbW90ZUV2ZW50LlxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4udGFyZ2V0Q2hhbmdlcy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgICAgIGlmIChuLnJlc3VtZVRva2VuLmFwcHJveGltYXRlQnl0ZVNpemUoKSA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaSA9IHQuQXUuZ2V0KHMpO1xuICAgICAgICAgICAgICAgICAgICAvLyBBIHdhdGNoZWQgdGFyZ2V0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkIGFscmVhZHkuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaSAmJiB0LkF1LnNldChzLCBpLndpdGhSZXN1bWVUb2tlbihuLnJlc3VtZVRva2VuLCBlKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSkpLCBcbiAgICAgICAgICAgIC8vIFJlLWVzdGFibGlzaCBsaXN0ZW5zIGZvciB0aGUgdGFyZ2V0cyB0aGF0IGhhdmUgYmVlbiBpbnZhbGlkYXRlZCBieVxuICAgICAgICAgICAgLy8gZXhpc3RlbmNlIGZpbHRlciBtaXNtYXRjaGVzLlxuICAgICAgICAgICAgbi50YXJnZXRNaXNtYXRjaGVzLmZvckVhY2goKChlLCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHQuQXUuZ2V0KGUpO1xuICAgICAgICAgICAgICAgIGlmICghcykgXG4gICAgICAgICAgICAgICAgLy8gQSB3YXRjaGVkIHRhcmdldCBtaWdodCBoYXZlIGJlZW4gcmVtb3ZlZCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAvLyBDbGVhciB0aGUgcmVzdW1lIHRva2VuIGZvciB0aGUgdGFyZ2V0LCBzaW5jZSB3ZSdyZSBpbiBhIGtub3duIG1pc21hdGNoXG4gICAgICAgICAgICAgICAgLy8gc3RhdGUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHQuQXUuc2V0KGUsIHMud2l0aFJlc3VtZVRva2VuKFZlLkVNUFRZX0JZVEVfU1RSSU5HLCBzLnNuYXBzaG90VmVyc2lvbikpLCBcbiAgICAgICAgICAgICAgICAvLyBDYXVzZSBhIGhhcmQgcmVzZXQgYnkgdW53YXRjaGluZyBhbmQgcmV3YXRjaGluZyBpbW1lZGlhdGVseSwgYnV0XG4gICAgICAgICAgICAgICAgLy8gZGVsaWJlcmF0ZWx5IGRvbid0IHNlbmQgYSByZXN1bWUgdG9rZW4gc28gdGhhdCB3ZSBnZXQgYSBmdWxsIHVwZGF0ZS5cbiAgICAgICAgICAgICAgICBYdSh0LCBlKTtcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSB0YXJnZXQgd2Ugc2VuZCBhcyBiZWluZyBvbiBiZWhhbGYgb2YgYW4gZXhpc3RlbmNlIGZpbHRlclxuICAgICAgICAgICAgICAgIC8vIG1pc21hdGNoLCBidXQgZG9uJ3QgYWN0dWFsbHkgcmV0YWluIHRoYXQgaW4gbGlzdGVuVGFyZ2V0cy4gVGhpcyBlbnN1cmVzXG4gICAgICAgICAgICAgICAgLy8gdGhhdCB3ZSBmbGFnIHRoZSBmaXJzdCByZS1saXN0ZW4gdGhpcyB3YXkgd2l0aG91dCBpbXBhY3RpbmcgZnV0dXJlXG4gICAgICAgICAgICAgICAgLy8gbGlzdGVucyBvZiB0aGlzIHRhcmdldCAodGhhdCBtaWdodCBoYXBwZW4gZS5nLiBvbiByZWNvbm5lY3QpLlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgY3Iocy50YXJnZXQsIGUsIG4sIHMuc2VxdWVuY2VOdW1iZXIpO1xuICAgICAgICAgICAgICAgIFl1KHQsIGkpO1xuICAgICAgICAgICAgfSkpLCB0LnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50KG4pO1xuICAgICAgICB9KHQsIG4pO1xuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgTihcIlJlbW90ZVN0b3JlXCIsIFwiRmFpbGVkIHRvIHJhaXNlIHNuYXBzaG90OlwiLCBlKSwgYXdhaXQgb2ModCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY292ZXJ5IGxvZ2ljIGZvciBJbmRleGVkREIgZXJyb3JzIHRoYXQgdGFrZXMgdGhlIG5ldHdvcmsgb2ZmbGluZSB1bnRpbFxuICogYG9wYCBzdWNjZWVkcy4gUmV0cmllcyBhcmUgc2NoZWR1bGVkIHdpdGggYmFja29mZiB1c2luZ1xuICogYGVucXVldWVSZXRyeWFibGUoKWAuIElmIGBvcCgpYCBpcyBub3QgcHJvdmlkZWQsIEluZGV4ZWREQiBhY2Nlc3MgaXNcbiAqIHZhbGlkYXRlZCB2aWEgYSBnZW5lcmljIG9wZXJhdGlvbi5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgUHJvbWlzZSBpcyByZXNvbHZlZCBvbmNlIHRoZSBuZXR3b3JrIGlzIGRpc2FibGVkIGFuZCBiZWZvcmVcbiAqIGFueSByZXRyeSBhdHRlbXB0LlxuICovIGFzeW5jIGZ1bmN0aW9uIG9jKHQsIGUsIG4pIHtcbiAgICBpZiAoIUR0KGUpKSB0aHJvdyBlO1xuICAgIHQudnUuYWRkKDEgLyogT2ZmbGluZUNhdXNlLkluZGV4ZWREYkZhaWxlZCAqLyksIFxuICAgIC8vIERpc2FibGUgbmV0d29yayBhbmQgcmFpc2Ugb2ZmbGluZSBzbmFwc2hvdHNcbiAgICBhd2FpdCBXdSh0KSwgdC5idS5zZXQoXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyksIG4gfHwgKFxuICAgIC8vIFVzZSBhIHNpbXBsZSByZWFkIG9wZXJhdGlvbiB0byBkZXRlcm1pbmUgaWYgSW5kZXhlZERCIHJlY292ZXJlZC5cbiAgICAvLyBJZGVhbGx5LCB3ZSB3b3VsZCBleHBvc2UgYSBoZWFsdGggY2hlY2sgZGlyZWN0bHkgb24gU2ltcGxlRGIsIGJ1dFxuICAgIC8vIFJlbW90ZVN0b3JlIG9ubHkgaGFzIGFjY2VzcyB0byBwZXJzaXN0ZW5jZSB0aHJvdWdoIExvY2FsU3RvcmUuXG4gICAgbiA9ICgpID0+IG91KHQubG9jYWxTdG9yZSkpLCBcbiAgICAvLyBQcm9iZSBJbmRleGVkREIgcGVyaW9kaWNhbGx5IGFuZCByZS1lbmFibGUgbmV0d29ya1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlUmV0cnlhYmxlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIE4oXCJSZW1vdGVTdG9yZVwiLCBcIlJldHJ5aW5nIEluZGV4ZWREQiBhY2Nlc3NcIiksIGF3YWl0IG4oKSwgdC52dS5kZWxldGUoMSAvKiBPZmZsaW5lQ2F1c2UuSW5kZXhlZERiRmFpbGVkICovKSwgXG4gICAgICAgIGF3YWl0IHp1KHQpO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyBgb3BgLiBJZiBgb3BgIGZhaWxzLCB0YWtlcyB0aGUgbmV0d29yayBvZmZsaW5lIHVudGlsIGBvcGBcbiAqIHN1Y2NlZWRzLiBSZXR1cm5zIGFmdGVyIHRoZSBmaXJzdCBhdHRlbXB0LlxuICovIGZ1bmN0aW9uIHVjKHQsIGUpIHtcbiAgICByZXR1cm4gZSgpLmNhdGNoKChuID0+IG9jKHQsIG4sIGUpKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNjKHQpIHtcbiAgICBjb25zdCBlID0gTCh0KSwgbiA9IEljKGUpO1xuICAgIGxldCBzID0gZS5FdS5sZW5ndGggPiAwID8gZS5FdVtlLkV1Lmxlbmd0aCAtIDFdLmJhdGNoSWQgOiAtMTtcbiAgICBmb3IgKDthYyhlKTsgKSB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgYXUoZS5sb2NhbFN0b3JlLCBzKTtcbiAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgIDAgPT09IGUuRXUubGVuZ3RoICYmIG4uam8oKTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgIHMgPSB0LmJhdGNoSWQsIGhjKGUsIHQpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgb2MoZSwgdCk7XG4gICAgfVxuICAgIGxjKGUpICYmIGZjKGUpO1xufVxuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB3ZSBjYW4gYWRkIHRvIHRoZSB3cml0ZSBwaXBlbGluZSAoaS5lLiB0aGUgbmV0d29yayBpc1xuICogZW5hYmxlZCBhbmQgdGhlIHdyaXRlIHBpcGVsaW5lIGlzIG5vdCBmdWxsKS5cbiAqLyBmdW5jdGlvbiBhYyh0KSB7XG4gICAgcmV0dXJuIGVjKHQpICYmIHQuRXUubGVuZ3RoIDwgMTA7XG59XG5cbi8qKlxuICogUXVldWVzIGFkZGl0aW9uYWwgd3JpdGVzIHRvIGJlIHNlbnQgdG8gdGhlIHdyaXRlIHN0cmVhbSwgc2VuZGluZyB0aGVtXG4gKiBpbW1lZGlhdGVseSBpZiB0aGUgd3JpdGUgc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuICovIGZ1bmN0aW9uIGhjKHQsIGUpIHtcbiAgICB0LkV1LnB1c2goZSk7XG4gICAgY29uc3QgbiA9IEljKHQpO1xuICAgIG4uS28oKSAmJiBuLm91ICYmIG4udXUoZS5tdXRhdGlvbnMpO1xufVxuXG5mdW5jdGlvbiBsYyh0KSB7XG4gICAgcmV0dXJuIGVjKHQpICYmICFJYyh0KS5VbygpICYmIHQuRXUubGVuZ3RoID4gMDtcbn1cblxuZnVuY3Rpb24gZmModCkge1xuICAgIEljKHQpLnN0YXJ0KCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGRjKHQpIHtcbiAgICBJYyh0KS5odSgpO1xufVxuXG5hc3luYyBmdW5jdGlvbiB3Yyh0KSB7XG4gICAgY29uc3QgZSA9IEljKHQpO1xuICAgIC8vIFNlbmQgdGhlIHdyaXRlIHBpcGVsaW5lIG5vdyB0aGF0IHRoZSBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0LkV1KSBlLnV1KG4ubXV0YXRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gX2ModCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSB0LkV1LnNoaWZ0KCksIGkgPSB0aS5mcm9tKHMsIGUsIG4pO1xuICAgIGF3YWl0IHVjKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5hcHBseVN1Y2Nlc3NmdWxXcml0ZShpKSkpLCBcbiAgICAvLyBJdCdzIHBvc3NpYmxlIHRoYXQgd2l0aCB0aGUgY29tcGxldGlvbiBvZiB0aGlzIG11dGF0aW9uIGFub3RoZXJcbiAgICAvLyBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICBhd2FpdCBjYyh0KTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gbWModCwgZSkge1xuICAgIC8vIElmIHRoZSB3cml0ZSBzdHJlYW0gY2xvc2VkIGFmdGVyIHRoZSB3cml0ZSBoYW5kc2hha2UgY29tcGxldGVzLCBhIHdyaXRlXG4gICAgLy8gb3BlcmF0aW9uIGZhaWxlZCBhbmQgd2UgZmFpbCB0aGUgcGVuZGluZyBvcGVyYXRpb24uXG4gICAgZSAmJiBJYyh0KS5vdSAmJiBcbiAgICAvLyBUaGlzIGVycm9yIGFmZmVjdHMgdGhlIGFjdHVhbCB3cml0ZS5cbiAgICBhd2FpdCBhc3luYyBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIE9ubHkgaGFuZGxlIHBlcm1hbmVudCBlcnJvcnMgaGVyZS4gSWYgaXQncyB0cmFuc2llbnQsIGp1c3QgbGV0IHRoZSByZXRyeVxuICAgICAgICAvLyBsb2dpYyBraWNrIGluLlxuICAgICAgICBpZiAobiA9IGUuY29kZSwgb2kobikgJiYgbiAhPT0gcS5BQk9SVEVEKSB7XG4gICAgICAgICAgICAvLyBUaGlzIHdhcyBhIHBlcm1hbmVudCBlcnJvciwgdGhlIHJlcXVlc3QgaXRzZWxmIHdhcyB0aGUgcHJvYmxlbVxuICAgICAgICAgICAgLy8gc28gaXQncyBub3QgZ29pbmcgdG8gc3VjY2VlZCBpZiB3ZSByZXNlbmQgaXQuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5FdS5zaGlmdCgpO1xuICAgICAgICAgICAgLy8gSW4gdGhpcyBjYXNlIGl0J3MgYWxzbyB1bmxpa2VseSB0aGF0IHRoZSBzZXJ2ZXIgaXRzZWxmIGlzIG1lbHRpbmdcbiAgICAgICAgICAgIC8vIGRvd24gLS0gdGhpcyB3YXMganVzdCBhIGJhZCByZXF1ZXN0IHNvIGluaGliaXQgYmFja29mZiBvbiB0aGUgbmV4dFxuICAgICAgICAgICAgLy8gcmVzdGFydC5cbiAgICAgICAgICAgICAgICAgICAgICAgIEljKHQpLlFvKCksIGF3YWl0IHVjKHQsICgoKSA9PiB0LnJlbW90ZVN5bmNlci5yZWplY3RGYWlsZWRXcml0ZShuLmJhdGNoSWQsIGUpKSksIFxuICAgICAgICAgICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHdpdGggdGhlIGNvbXBsZXRpb24gb2YgdGhpcyBtdXRhdGlvblxuICAgICAgICAgICAgLy8gYW5vdGhlciBzbG90IGhhcyBmcmVlZCB1cC5cbiAgICAgICAgICAgIGF3YWl0IGNjKHQpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuO1xuICAgIH0odCwgZSksIFxuICAgIC8vIFRoZSB3cml0ZSBzdHJlYW0gbWlnaHQgaGF2ZSBiZWVuIHN0YXJ0ZWQgYnkgcmVmaWxsaW5nIHRoZSB3cml0ZVxuICAgIC8vIHBpcGVsaW5lIGZvciBmYWlsZWQgd3JpdGVzXG4gICAgbGModCkgJiYgZmModCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBuLmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBOKFwiUmVtb3RlU3RvcmVcIiwgXCJSZW1vdGVTdG9yZSByZWNlaXZlZCBuZXcgY3JlZGVudGlhbHNcIik7XG4gICAgY29uc3QgcyA9IGVjKG4pO1xuICAgIC8vIFRlYXIgZG93biBhbmQgcmUtY3JlYXRlIG91ciBuZXR3b3JrIHN0cmVhbXMuIFRoaXMgd2lsbCBlbnN1cmUgd2UgZ2V0IGFcbiAgICAvLyBmcmVzaCBhdXRoIHRva2VuIGZvciB0aGUgbmV3IHVzZXIgYW5kIHJlLWZpbGwgdGhlIHdyaXRlIHBpcGVsaW5lIHdpdGhcbiAgICAvLyBuZXcgbXV0YXRpb25zIGZyb20gdGhlIExvY2FsU3RvcmUgKHNpbmNlIG11dGF0aW9ucyBhcmUgcGVyLXVzZXIpLlxuICAgICAgICBuLnZ1LmFkZCgzIC8qIE9mZmxpbmVDYXVzZS5DcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgV3UobiksIHMgJiYgXG4gICAgLy8gRG9uJ3Qgc2V0IHRoZSBuZXR3b3JrIHN0YXR1cyB0byBVbmtub3duIGlmIHdlIGFyZSBvZmZsaW5lLlxuICAgIG4uYnUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pLCBhd2FpdCBuLnJlbW90ZVN5bmNlci5oYW5kbGVDcmVkZW50aWFsQ2hhbmdlKGUpLCBcbiAgICBuLnZ1LmRlbGV0ZSgzIC8qIE9mZmxpbmVDYXVzZS5DcmVkZW50aWFsQ2hhbmdlICovKSwgYXdhaXQgenUobik7XG59XG5cbi8qKlxuICogVG9nZ2xlcyB0aGUgbmV0d29yayBzdGF0ZSB3aGVuIHRoZSBjbGllbnQgZ2FpbnMgb3IgbG9zZXMgaXRzIHByaW1hcnkgbGVhc2UuXG4gKi8gYXN5bmMgZnVuY3Rpb24geWModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIGUgPyAobi52dS5kZWxldGUoMiAvKiBPZmZsaW5lQ2F1c2UuSXNTZWNvbmRhcnkgKi8pLCBhd2FpdCB6dShuKSkgOiBlIHx8IChuLnZ1LmFkZCgyIC8qIE9mZmxpbmVDYXVzZS5Jc1NlY29uZGFyeSAqLyksIFxuICAgIGF3YWl0IFd1KG4pLCBuLmJ1LnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKSk7XG59XG5cbi8qKlxuICogSWYgbm90IHlldCBpbml0aWFsaXplZCwgcmVnaXN0ZXJzIHRoZSBXYXRjaFN0cmVhbSBhbmQgaXRzIG5ldHdvcmsgc3RhdGVcbiAqIGNhbGxiYWNrIHdpdGggYHJlbW90ZVN0b3JlSW1wbGAuIFJldHVybnMgdGhlIGV4aXN0aW5nIHN0cmVhbSBpZiBvbmUgaXNcbiAqIGFscmVhZHkgYXZhaWxhYmxlLlxuICpcbiAqIFBPUlRJTkcgTk9URTogT24gaU9TIGFuZCBBbmRyb2lkLCB0aGUgV2F0Y2hTdHJlYW0gZ2V0cyByZWdpc3RlcmVkIG9uIHN0YXJ0dXAuXG4gKiBUaGlzIGlzIG5vdCBkb25lIG9uIFdlYiB0byBhbGxvdyBpdCB0byBiZSB0cmVlLXNoYWtlbi5cbiAqLyBmdW5jdGlvbiBwYyh0KSB7XG4gICAgcmV0dXJuIHQuU3UgfHwgKFxuICAgIC8vIENyZWF0ZSBzdHJlYW0gKGJ1dCBub3RlIHRoYXQgaXQgaXMgbm90IHN0YXJ0ZWQgeWV0KS5cbiAgICB0LlN1ID0gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gTCh0KTtcbiAgICAgICAgcmV0dXJuIHMuZnUoKSwgbmV3IHF1KGUsIHMuY29ubmVjdGlvbiwgcy5hdXRoQ3JlZGVudGlhbHMsIHMuYXBwQ2hlY2tDcmVkZW50aWFscywgcy5zZXJpYWxpemVyLCBuKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTggR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi8gKHQuZGF0YXN0b3JlLCB0LmFzeW5jUXVldWUsIHtcbiAgICAgICAgdW86IHNjLmJpbmQobnVsbCwgdCksXG4gICAgICAgIGFvOiBpYy5iaW5kKG51bGwsIHQpLFxuICAgICAgICBudTogcmMuYmluZChudWxsLCB0KVxuICAgIH0pLCB0LlJ1LnB1c2goKGFzeW5jIGUgPT4ge1xuICAgICAgICBlID8gKHQuU3UuUW8oKSwgdGModCkgPyBadSh0KSA6IHQuYnUuc2V0KFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8pKSA6IChhd2FpdCB0LlN1LnN0b3AoKSwgXG4gICAgICAgIG5jKHQpKTtcbiAgICB9KSkpLCB0LlN1O1xufVxuXG4vKipcbiAqIElmIG5vdCB5ZXQgaW5pdGlhbGl6ZWQsIHJlZ2lzdGVycyB0aGUgV3JpdGVTdHJlYW0gYW5kIGl0cyBuZXR3b3JrIHN0YXRlXG4gKiBjYWxsYmFjayB3aXRoIGByZW1vdGVTdG9yZUltcGxgLiBSZXR1cm5zIHRoZSBleGlzdGluZyBzdHJlYW0gaWYgb25lIGlzXG4gKiBhbHJlYWR5IGF2YWlsYWJsZS5cbiAqXG4gKiBQT1JUSU5HIE5PVEU6IE9uIGlPUyBhbmQgQW5kcm9pZCwgdGhlIFdyaXRlU3RyZWFtIGdldHMgcmVnaXN0ZXJlZCBvbiBzdGFydHVwLlxuICogVGhpcyBpcyBub3QgZG9uZSBvbiBXZWIgdG8gYWxsb3cgaXQgdG8gYmUgdHJlZS1zaGFrZW4uXG4gKi8gZnVuY3Rpb24gSWModCkge1xuICAgIHJldHVybiB0LkR1IHx8IChcbiAgICAvLyBDcmVhdGUgc3RyZWFtIChidXQgbm90ZSB0aGF0IGl0IGlzIG5vdCBzdGFydGVkIHlldCkuXG4gICAgdC5EdSA9IGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgY29uc3QgcyA9IEwodCk7XG4gICAgICAgIHJldHVybiBzLmZ1KCksIG5ldyBVdShlLCBzLmNvbm5lY3Rpb24sIHMuYXV0aENyZWRlbnRpYWxzLCBzLmFwcENoZWNrQ3JlZGVudGlhbHMsIHMuc2VyaWFsaXplciwgbik7XG4gICAgfSh0LmRhdGFzdG9yZSwgdC5hc3luY1F1ZXVlLCB7XG4gICAgICAgIHVvOiBkYy5iaW5kKG51bGwsIHQpLFxuICAgICAgICBhbzogbWMuYmluZChudWxsLCB0KSxcbiAgICAgICAgYXU6IHdjLmJpbmQobnVsbCwgdCksXG4gICAgICAgIGN1OiBfYy5iaW5kKG51bGwsIHQpXG4gICAgfSksIHQuUnUucHVzaCgoYXN5bmMgZSA9PiB7XG4gICAgICAgIGUgPyAodC5EdS5RbygpLCBcbiAgICAgICAgLy8gVGhpcyB3aWxsIHN0YXJ0IHRoZSB3cml0ZSBzdHJlYW0gaWYgbmVjZXNzYXJ5LlxuICAgICAgICBhd2FpdCBjYyh0KSkgOiAoYXdhaXQgdC5EdS5zdG9wKCksIHQuRXUubGVuZ3RoID4gMCAmJiAoTihcIlJlbW90ZVN0b3JlXCIsIGBTdG9wcGluZyB3cml0ZSBzdHJlYW0gd2l0aCAke3QuRXUubGVuZ3RofSBwZW5kaW5nIHdyaXRlc2ApLCBcbiAgICAgICAgdC5FdSA9IFtdKSk7XG4gICAgfSkpKSwgdC5EdTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBvcGVyYXRpb24gc2NoZWR1bGVkIHRvIGJlIHJ1biBpbiB0aGUgZnV0dXJlIG9uIGFuIEFzeW5jUXVldWUuXG4gKlxuICogSXQgaXMgY3JlYXRlZCB2aWEgRGVsYXllZE9wZXJhdGlvbi5jcmVhdGVBbmRTY2hlZHVsZSgpLlxuICpcbiAqIFN1cHBvcnRzIGNhbmNlbGxhdGlvbiAodmlhIGNhbmNlbCgpKSBhbmQgZWFybHkgZXhlY3V0aW9uICh2aWEgc2tpcERlbGF5KCkpLlxuICpcbiAqIE5vdGU6IFdlIGltcGxlbWVudCBgUHJvbWlzZUxpa2VgIGluc3RlYWQgb2YgYFByb21pc2VgLCBhcyB0aGUgYFByb21pc2VgIHR5cGVcbiAqIGluIG5ld2VyIHZlcnNpb25zIG9mIFR5cGVTY3JpcHQgZGVmaW5lcyBgZmluYWxseWAsIHdoaWNoIGlzIG5vdCBhdmFpbGFibGUgaW5cbiAqIElFLlxuICovXG5jbGFzcyBUYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSkge1xuICAgICAgICB0aGlzLmFzeW5jUXVldWUgPSB0LCB0aGlzLnRpbWVySWQgPSBlLCB0aGlzLnRhcmdldFRpbWVNcyA9IG4sIHRoaXMub3AgPSBzLCB0aGlzLnJlbW92YWxDYWxsYmFjayA9IGksIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gbmV3IEssIHRoaXMudGhlbiA9IHRoaXMuZGVmZXJyZWQucHJvbWlzZS50aGVuLmJpbmQodGhpcy5kZWZlcnJlZC5wcm9taXNlKSwgXG4gICAgICAgIC8vIEl0J3Mgbm9ybWFsIGZvciB0aGUgZGVmZXJyZWQgcHJvbWlzZSB0byBiZSBjYW5jZWxlZCAoZHVlIHRvIGNhbmNlbGxhdGlvbilcbiAgICAgICAgLy8gYW5kIHNvIHdlIGF0dGFjaCBhIGR1bW15IGNhdGNoIGNhbGxiYWNrIHRvIGF2b2lkXG4gICAgICAgIC8vICdVbmhhbmRsZWRQcm9taXNlUmVqZWN0aW9uV2FybmluZycgbG9nIHNwYW0uXG4gICAgICAgIHRoaXMuZGVmZXJyZWQucHJvbWlzZS5jYXRjaCgodCA9PiB7fSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgRGVsYXllZE9wZXJhdGlvbiB0aGF0IGhhcyBiZWVuIHNjaGVkdWxlZCB0byBiZVxuICAgICAqIGV4ZWN1dGVkIG9uIHRoZSBwcm92aWRlZCBhc3luY1F1ZXVlIGFmdGVyIHRoZSBwcm92aWRlZCBkZWxheU1zLlxuICAgICAqXG4gICAgICogQHBhcmFtIGFzeW5jUXVldWUgLSBUaGUgcXVldWUgdG8gc2NoZWR1bGUgdGhlIG9wZXJhdGlvbiBvbi5cbiAgICAgKiBAcGFyYW0gaWQgLSBBIFRpbWVyIElEIGlkZW50aWZ5aW5nIHRoZSB0eXBlIG9mIG9wZXJhdGlvbiB0aGlzIGlzLlxuICAgICAqIEBwYXJhbSBkZWxheU1zIC0gVGhlIGRlbGF5IChtcykgYmVmb3JlIHRoZSBvcGVyYXRpb24gc2hvdWxkIGJlIHNjaGVkdWxlZC5cbiAgICAgKiBAcGFyYW0gb3AgLSBUaGUgb3BlcmF0aW9uIHRvIHJ1bi5cbiAgICAgKiBAcGFyYW0gcmVtb3ZhbENhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgc3luY2hyb25vdXNseSBvbmNlIHRoZVxuICAgICAqICAgb3BlcmF0aW9uIGlzIGV4ZWN1dGVkIG9yIGNhbmNlbGVkLCBub3RpZnlpbmcgdGhlIEFzeW5jUXVldWUgdG8gcmVtb3ZlIGl0XG4gICAgICogICBmcm9tIGl0cyBkZWxheWVkT3BlcmF0aW9ucyBsaXN0LlxuICAgICAqICAgUE9SVElORyBOT1RFOiBUaGlzIGV4aXN0cyB0byBwcmV2ZW50IG1ha2luZyByZW1vdmVEZWxheWVkT3BlcmF0aW9uKCkgYW5kXG4gICAgICogICB0aGUgRGVsYXllZE9wZXJhdGlvbiBjbGFzcyBwdWJsaWMuXG4gICAgICovICAgIHN0YXRpYyBjcmVhdGVBbmRTY2hlZHVsZSh0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBEYXRlLm5vdygpICsgbiwgbyA9IG5ldyBUYyh0LCBlLCByLCBzLCBpKTtcbiAgICAgICAgcmV0dXJuIG8uc3RhcnQobiksIG87XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFN0YXJ0cyB0aGUgdGltZXIuIFRoaXMgaXMgY2FsbGVkIGltbWVkaWF0ZWx5IGFmdGVyIGNvbnN0cnVjdGlvbiBieVxuICAgICAqIGNyZWF0ZUFuZFNjaGVkdWxlKCkuXG4gICAgICovICAgIHN0YXJ0KHQpIHtcbiAgICAgICAgdGhpcy50aW1lckhhbmRsZSA9IHNldFRpbWVvdXQoKCgpID0+IHRoaXMuaGFuZGxlRGVsYXlFbGFwc2VkKCkpLCB0KTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUXVldWVzIHRoZSBvcGVyYXRpb24gdG8gcnVuIGltbWVkaWF0ZWx5IChpZiBpdCBoYXNuJ3QgYWxyZWFkeSBiZWVuIHJ1biBvclxuICAgICAqIGNhbmNlbGVkKS5cbiAgICAgKi8gICAgc2tpcERlbGF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVEZWxheUVsYXBzZWQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2FuY2VscyB0aGUgb3BlcmF0aW9uIGlmIGl0IGhhc24ndCBhbHJlYWR5IGJlZW4gZXhlY3V0ZWQgb3IgY2FuY2VsZWQuIFRoZVxuICAgICAqIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cbiAgICAgKlxuICAgICAqIEFzIGxvbmcgYXMgdGhlIG9wZXJhdGlvbiBoYXMgbm90IHlldCBiZWVuIHJ1biwgY2FsbGluZyBjYW5jZWwoKSBwcm92aWRlcyBhXG4gICAgICogZ3VhcmFudGVlIHRoYXQgdGhlIG9wZXJhdGlvbiB3aWxsIG5vdCBiZSBydW4uXG4gICAgICovICAgIGNhbmNlbCh0KSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMuY2xlYXJUaW1lb3V0KCksIHRoaXMuZGVmZXJyZWQucmVqZWN0KG5ldyBVKHEuQ0FOQ0VMTEVELCBcIk9wZXJhdGlvbiBjYW5jZWxsZWRcIiArICh0ID8gXCI6IFwiICsgdCA6IFwiXCIpKSkpO1xuICAgIH1cbiAgICBoYW5kbGVEZWxheUVsYXBzZWQoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBudWxsICE9PSB0aGlzLnRpbWVySGFuZGxlID8gKHRoaXMuY2xlYXJUaW1lb3V0KCksIFxuICAgICAgICB0aGlzLm9wKCkudGhlbigodCA9PiB0aGlzLmRlZmVycmVkLnJlc29sdmUodCkpKSkgOiBQcm9taXNlLnJlc29sdmUoKSkpO1xuICAgIH1cbiAgICBjbGVhclRpbWVvdXQoKSB7XG4gICAgICAgIG51bGwgIT09IHRoaXMudGltZXJIYW5kbGUgJiYgKHRoaXMucmVtb3ZhbENhbGxiYWNrKHRoaXMpLCBjbGVhclRpbWVvdXQodGhpcy50aW1lckhhbmRsZSksIFxuICAgICAgICB0aGlzLnRpbWVySGFuZGxlID0gbnVsbCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBGaXJlc3RvcmVFcnJvciB0aGF0IGNhbiBiZSBzdXJmYWNlZCB0byB0aGUgdXNlciBpZiB0aGUgcHJvdmlkZWRcbiAqIGVycm9yIGlzIGFuIEluZGV4ZWREYlRyYW5zYWN0aW9uRXJyb3IuIFJlLXRocm93cyB0aGUgZXJyb3Igb3RoZXJ3aXNlLlxuICovIGZ1bmN0aW9uIEVjKHQsIGUpIHtcbiAgICBpZiAoayhcIkFzeW5jUXVldWVcIiwgYCR7ZX06ICR7dH1gKSwgRHQodCkpIHJldHVybiBuZXcgVShxLlVOQVZBSUxBQkxFLCBgJHtlfTogJHt0fWApO1xuICAgIHRocm93IHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIERvY3VtZW50U2V0IGlzIGFuIGltbXV0YWJsZSAoY29weS1vbi13cml0ZSkgY29sbGVjdGlvbiB0aGF0IGhvbGRzIGRvY3VtZW50c1xuICogaW4gb3JkZXIgc3BlY2lmaWVkIGJ5IHRoZSBwcm92aWRlZCBjb21wYXJhdG9yLiBXZSBhbHdheXMgYWRkIGEgZG9jdW1lbnQga2V5XG4gKiBjb21wYXJhdG9yIG9uIHRvcCBvZiB3aGF0IGlzIHByb3ZpZGVkIHRvIGd1YXJhbnRlZSBkb2N1bWVudCBlcXVhbGl0eSBiYXNlZCBvblxuICogdGhlIGtleS5cbiAqLyBjbGFzcyBBYyB7XG4gICAgLyoqIFRoZSBkZWZhdWx0IG9yZGVyaW5nIGlzIGJ5IGtleSBpZiB0aGUgY29tcGFyYXRvciBpcyBvbWl0dGVkICovXG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICAvLyBXZSBhcmUgYWRkaW5nIGRvY3VtZW50IGtleSBjb21wYXJhdG9yIHRvIHRoZSBlbmQgYXMgaXQncyB0aGUgb25seVxuICAgICAgICAvLyBndWFyYW50ZWVkIHVuaXF1ZSBwcm9wZXJ0eSBvZiBhIGRvY3VtZW50LlxuICAgICAgICB0aGlzLmNvbXBhcmF0b3IgPSB0ID8gKGUsIG4pID0+IHQoZSwgbikgfHwgaHQuY29tcGFyYXRvcihlLmtleSwgbi5rZXkpIDogKHQsIGUpID0+IGh0LmNvbXBhcmF0b3IodC5rZXksIGUua2V5KSwgXG4gICAgICAgIHRoaXMua2V5ZWRNYXAgPSBocygpLCB0aGlzLnNvcnRlZFNldCA9IG5ldyBwZSh0aGlzLmNvbXBhcmF0b3IpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGFuIGVtcHR5IGNvcHkgb2YgdGhlIGV4aXN0aW5nIERvY3VtZW50U2V0LCB1c2luZyB0aGUgc2FtZVxuICAgICAqIGNvbXBhcmF0b3IuXG4gICAgICovICAgIHN0YXRpYyBlbXB0eVNldCh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgQWModC5jb21wYXJhdG9yKTtcbiAgICB9XG4gICAgaGFzKHQpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT0gdGhpcy5rZXllZE1hcC5nZXQodCk7XG4gICAgfVxuICAgIGdldCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmtleWVkTWFwLmdldCh0KTtcbiAgICB9XG4gICAgZmlyc3QoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5taW5LZXkoKTtcbiAgICB9XG4gICAgbGFzdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuc29ydGVkU2V0Lm1heEtleSgpO1xuICAgIH1cbiAgICBpc0VtcHR5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zb3J0ZWRTZXQuaXNFbXB0eSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgcHJvdmlkZWQga2V5IGluIHRoZSBkb2N1bWVudCBzZXQsIG9yIC0xIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IGtleSBpcyBub3QgcHJlc2VudCBpbiB0aGUgc2V0O1xuICAgICAqLyAgICBpbmRleE9mKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMua2V5ZWRNYXAuZ2V0KHQpO1xuICAgICAgICByZXR1cm4gZSA/IHRoaXMuc29ydGVkU2V0LmluZGV4T2YoZSkgOiAtMTtcbiAgICB9XG4gICAgZ2V0IHNpemUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvcnRlZFNldC5zaXplO1xuICAgIH1cbiAgICAvKiogSXRlcmF0ZXMgZG9jdW1lbnRzIGluIG9yZGVyIGRlZmluZWQgYnkgXCJjb21wYXJhdG9yXCIgKi8gICAgZm9yRWFjaCh0KSB7XG4gICAgICAgIHRoaXMuc29ydGVkU2V0Lmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiAodChlKSwgITEpKSk7XG4gICAgfVxuICAgIC8qKiBJbnNlcnRzIG9yIHVwZGF0ZXMgYSBkb2N1bWVudCB3aXRoIHRoZSBzYW1lIGtleSAqLyAgICBhZGQodCkge1xuICAgICAgICAvLyBGaXJzdCByZW1vdmUgdGhlIGVsZW1lbnQgaWYgd2UgaGF2ZSBpdC5cbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZGVsZXRlKHQua2V5KTtcbiAgICAgICAgcmV0dXJuIGUuY29weShlLmtleWVkTWFwLmluc2VydCh0LmtleSwgdCksIGUuc29ydGVkU2V0Lmluc2VydCh0LCBudWxsKSk7XG4gICAgfVxuICAgIC8qKiBEZWxldGVzIGEgZG9jdW1lbnQgd2l0aCBhIGdpdmVuIGtleSAqLyAgICBkZWxldGUodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5nZXQodCk7XG4gICAgICAgIHJldHVybiBlID8gdGhpcy5jb3B5KHRoaXMua2V5ZWRNYXAucmVtb3ZlKHQpLCB0aGlzLnNvcnRlZFNldC5yZW1vdmUoZSkpIDogdGhpcztcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBBYykpIHJldHVybiAhMTtcbiAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gdC5zaXplKSByZXR1cm4gITE7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNvcnRlZFNldC5nZXRJdGVyYXRvcigpLCBuID0gdC5zb3J0ZWRTZXQuZ2V0SXRlcmF0b3IoKTtcbiAgICAgICAgZm9yICg7ZS5oYXNOZXh0KCk7ICkge1xuICAgICAgICAgICAgY29uc3QgdCA9IGUuZ2V0TmV4dCgpLmtleSwgcyA9IG4uZ2V0TmV4dCgpLmtleTtcbiAgICAgICAgICAgIGlmICghdC5pc0VxdWFsKHMpKSByZXR1cm4gITE7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbiAgICB0b1N0cmluZygpIHtcbiAgICAgICAgY29uc3QgdCA9IFtdO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQucHVzaChlLnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIDAgPT09IHQubGVuZ3RoID8gXCJEb2N1bWVudFNldCAoKVwiIDogXCJEb2N1bWVudFNldCAoXFxuICBcIiArIHQuam9pbihcIiAgXFxuXCIpICsgXCJcXG4pXCI7XG4gICAgfVxuICAgIGNvcHkodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gbmV3IEFjO1xuICAgICAgICByZXR1cm4gbi5jb21wYXJhdG9yID0gdGhpcy5jb21wYXJhdG9yLCBuLmtleWVkTWFwID0gdCwgbi5zb3J0ZWRTZXQgPSBlLCBuO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRG9jdW1lbnRDaGFuZ2VTZXQga2VlcHMgdHJhY2sgb2YgYSBzZXQgb2YgY2hhbmdlcyB0byBkb2NzIGluIGEgcXVlcnksIG1lcmdpbmdcbiAqIGR1cGxpY2F0ZSBldmVudHMgZm9yIHRoZSBzYW1lIGRvYy5cbiAqLyBjbGFzcyB2YyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuQ3UgPSBuZXcgcGUoaHQuY29tcGFyYXRvcik7XG4gICAgfVxuICAgIHRyYWNrKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IHQuZG9jLmtleSwgbiA9IHRoaXMuQ3UuZ2V0KGUpO1xuICAgICAgICBuID8gXG4gICAgICAgIC8vIE1lcmdlIHRoZSBuZXcgY2hhbmdlIHdpdGggdGhlIGV4aXN0aW5nIGNoYW5nZS5cbiAgICAgICAgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICE9PSB0LnR5cGUgJiYgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovID09PSBuLnR5cGUgPyB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwgdCkgOiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gPT09IHQudHlwZSAmJiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAhPT0gbi50eXBlID8gdGhpcy5DdSA9IHRoaXMuQ3UuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IG4udHlwZSxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IHQudHlwZSAmJiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuQ3UgPSB0aGlzLkN1Lmluc2VydChlLCB7XG4gICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiB0LmRvY1xuICAgICAgICB9KSA6IDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA9PT0gdC50eXBlICYmIDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gbi50eXBlID8gdGhpcy5DdSA9IHRoaXMuQ3UuaW5zZXJ0KGUsIHtcbiAgICAgICAgICAgIHR5cGU6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyAsXG4gICAgICAgICAgICBkb2M6IHQuZG9jXG4gICAgICAgIH0pIDogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gPT09IHQudHlwZSAmJiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gPT09IG4udHlwZSA/IHRoaXMuQ3UgPSB0aGlzLkN1LnJlbW92ZShlKSA6IDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovID09PSB0LnR5cGUgJiYgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovID09PSBuLnR5cGUgPyB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgZG9jOiBuLmRvY1xuICAgICAgICB9KSA6IDAgLyogQ2hhbmdlVHlwZS5BZGRlZCAqLyA9PT0gdC50eXBlICYmIDEgLyogQ2hhbmdlVHlwZS5SZW1vdmVkICovID09PSBuLnR5cGUgPyB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwge1xuICAgICAgICAgICAgdHlwZTogMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovICxcbiAgICAgICAgICAgIGRvYzogdC5kb2NcbiAgICAgICAgfSkgOiBcbiAgICAgICAgLy8gVGhpcyBpbmNsdWRlcyB0aGVzZSBjYXNlcywgd2hpY2ggZG9uJ3QgbWFrZSBzZW5zZTpcbiAgICAgICAgLy8gQWRkZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPlJlbW92ZWRcbiAgICAgICAgLy8gTW9kaWZpZWQtPkFkZGVkXG4gICAgICAgIC8vIFJlbW92ZWQtPk1vZGlmaWVkXG4gICAgICAgIC8vIE1ldGFkYXRhLT5BZGRlZFxuICAgICAgICAvLyBSZW1vdmVkLT5NZXRhZGF0YVxuICAgICAgICBPKCkgOiB0aGlzLkN1ID0gdGhpcy5DdS5pbnNlcnQoZSwgdCk7XG4gICAgfVxuICAgIHh1KCkge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIHJldHVybiB0aGlzLkN1Lmlub3JkZXJUcmF2ZXJzYWwoKChlLCBuKSA9PiB7XG4gICAgICAgICAgICB0LnB1c2gobik7XG4gICAgICAgIH0pKSwgdDtcbiAgICB9XG59XG5cbmNsYXNzIFJjIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpLCByLCBvLCB1LCBjKSB7XG4gICAgICAgIHRoaXMucXVlcnkgPSB0LCB0aGlzLmRvY3MgPSBlLCB0aGlzLm9sZERvY3MgPSBuLCB0aGlzLmRvY0NoYW5nZXMgPSBzLCB0aGlzLm11dGF0ZWRLZXlzID0gaSwgXG4gICAgICAgIHRoaXMuZnJvbUNhY2hlID0gciwgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID0gbywgdGhpcy5leGNsdWRlc01ldGFkYXRhQ2hhbmdlcyA9IHUsIFxuICAgICAgICB0aGlzLmhhc0NhY2hlZFJlc3VsdHMgPSBjO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIHZpZXcgc25hcHNob3QgYXMgaWYgYWxsIGRvY3VtZW50cyBpbiB0aGUgc25hcHNob3Qgd2VyZSBhZGRlZC4gKi8gICAgc3RhdGljIGZyb21Jbml0aWFsRG9jdW1lbnRzKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IFtdO1xuICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgIHIucHVzaCh7XG4gICAgICAgICAgICAgICAgdHlwZTogMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICxcbiAgICAgICAgICAgICAgICBkb2M6IHRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSksIG5ldyBSYyh0LCBlLCBBYy5lbXB0eVNldChlKSwgciwgbiwgcywgXG4gICAgICAgIC8qIHN5bmNTdGF0ZUNoYW5nZWQ9ICovICEwLCBcbiAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICExLCBpKTtcbiAgICB9XG4gICAgZ2V0IGhhc1BlbmRpbmdXcml0ZXMoKSB7XG4gICAgICAgIHJldHVybiAhdGhpcy5tdXRhdGVkS2V5cy5pc0VtcHR5KCk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICBpZiAoISh0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGUgJiYgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID09PSB0Lmhhc0NhY2hlZFJlc3VsdHMgJiYgdGhpcy5zeW5jU3RhdGVDaGFuZ2VkID09PSB0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgdGhpcy5tdXRhdGVkS2V5cy5pc0VxdWFsKHQubXV0YXRlZEtleXMpICYmIFpuKHRoaXMucXVlcnksIHQucXVlcnkpICYmIHRoaXMuZG9jcy5pc0VxdWFsKHQuZG9jcykgJiYgdGhpcy5vbGREb2NzLmlzRXF1YWwodC5vbGREb2NzKSkpIHJldHVybiAhMTtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuZG9jQ2hhbmdlcywgbiA9IHQuZG9jQ2hhbmdlcztcbiAgICAgICAgaWYgKGUubGVuZ3RoICE9PSBuLmxlbmd0aCkgcmV0dXJuICExO1xuICAgICAgICBmb3IgKGxldCB0ID0gMDsgdCA8IGUubGVuZ3RoOyB0KyspIGlmIChlW3RdLnR5cGUgIT09IG5bdF0udHlwZSB8fCAhZVt0XS5kb2MuaXNFcXVhbChuW3RdLmRvYykpIHJldHVybiAhMTtcbiAgICAgICAgcmV0dXJuICEwO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogSG9sZHMgdGhlIGxpc3RlbmVycyBhbmQgdGhlIGxhc3QgcmVjZWl2ZWQgVmlld1NuYXBzaG90IGZvciBhIHF1ZXJ5IGJlaW5nXG4gKiB0cmFja2VkIGJ5IEV2ZW50TWFuYWdlci5cbiAqLyBjbGFzcyBQYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuTnUgPSB2b2lkIDAsIHRoaXMubGlzdGVuZXJzID0gW107XG4gICAgfVxufVxuXG5jbGFzcyBiYyB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMucXVlcmllcyA9IG5ldyBvcygodCA9PiB0cyh0KSksIFpuKSwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5rdSA9IG5ldyBTZXQ7XG4gICAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBWYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBlLnF1ZXJ5O1xuICAgIGxldCBpID0gITEsIHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyIHx8IChpID0gITAsIHIgPSBuZXcgUGMpLCBpKSB0cnkge1xuICAgICAgICByLk51ID0gYXdhaXQgbi5vbkxpc3RlbihzKTtcbiAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgIGNvbnN0IG4gPSBFYyh0LCBgSW5pdGlhbGl6YXRpb24gb2YgcXVlcnkgJyR7ZXMoZS5xdWVyeSl9JyBmYWlsZWRgKTtcbiAgICAgICAgcmV0dXJuIHZvaWQgZS5vbkVycm9yKG4pO1xuICAgIH1cbiAgICBpZiAobi5xdWVyaWVzLnNldChzLCByKSwgci5saXN0ZW5lcnMucHVzaChlKSwgXG4gICAgLy8gUnVuIGdsb2JhbCBzbmFwc2hvdCBsaXN0ZW5lcnMgaWYgYSBjb25zaXN0ZW50IHNuYXBzaG90IGhhcyBiZWVuIGVtaXR0ZWQuXG4gICAgZS5NdShuLm9ubGluZVN0YXRlKSwgci5OdSkge1xuICAgICAgICBlLiR1KHIuTnUpICYmIHhjKG4pO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gU2ModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gZS5xdWVyeTtcbiAgICBsZXQgaSA9ICExO1xuICAgIGNvbnN0IHIgPSBuLnF1ZXJpZXMuZ2V0KHMpO1xuICAgIGlmIChyKSB7XG4gICAgICAgIGNvbnN0IHQgPSByLmxpc3RlbmVycy5pbmRleE9mKGUpO1xuICAgICAgICB0ID49IDAgJiYgKHIubGlzdGVuZXJzLnNwbGljZSh0LCAxKSwgaSA9IDAgPT09IHIubGlzdGVuZXJzLmxlbmd0aCk7XG4gICAgfVxuICAgIGlmIChpKSByZXR1cm4gbi5xdWVyaWVzLmRlbGV0ZShzKSwgbi5vblVubGlzdGVuKHMpO1xufVxuXG5mdW5jdGlvbiBEYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCk7XG4gICAgbGV0IHMgPSAhMTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBjb25zdCBlID0gdC5xdWVyeSwgaSA9IG4ucXVlcmllcy5nZXQoZSk7XG4gICAgICAgIGlmIChpKSB7XG4gICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgaS5saXN0ZW5lcnMpIGUuJHUodCkgJiYgKHMgPSAhMCk7XG4gICAgICAgICAgICBpLk51ID0gdDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBzICYmIHhjKG4pO1xufVxuXG5mdW5jdGlvbiBDYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCksIGkgPSBzLnF1ZXJpZXMuZ2V0KGUpO1xuICAgIGlmIChpKSBmb3IgKGNvbnN0IHQgb2YgaS5saXN0ZW5lcnMpIHQub25FcnJvcihuKTtcbiAgICAvLyBSZW1vdmUgYWxsIGxpc3RlbmVycy4gTk9URTogV2UgZG9uJ3QgbmVlZCB0byBjYWxsIHN5bmNFbmdpbmUudW5saXN0ZW4oKVxuICAgIC8vIGFmdGVyIGFuIGVycm9yLlxuICAgICAgICBzLnF1ZXJpZXMuZGVsZXRlKGUpO1xufVxuXG4vLyBDYWxsIGFsbCBnbG9iYWwgc25hcHNob3QgbGlzdGVuZXJzIHRoYXQgaGF2ZSBiZWVuIHNldC5cbmZ1bmN0aW9uIHhjKHQpIHtcbiAgICB0Lmt1LmZvckVhY2goKHQgPT4ge1xuICAgICAgICB0Lm5leHQoKTtcbiAgICB9KSk7XG59XG5cbi8qKlxuICogUXVlcnlMaXN0ZW5lciB0YWtlcyBhIHNlcmllcyBvZiBpbnRlcm5hbCB2aWV3IHNuYXBzaG90cyBhbmQgZGV0ZXJtaW5lc1xuICogd2hlbiB0byByYWlzZSB0aGUgZXZlbnQuXG4gKlxuICogSXQgdXNlcyBhbiBPYnNlcnZlciB0byBkaXNwYXRjaCBldmVudHMuXG4gKi8gY2xhc3MgTmMge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuT3UgPSBlLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXRpYWwgc25hcHNob3RzIChlLmcuIGZyb20gY2FjaGUpIG1heSBub3QgYmUgcHJvcGFnYXRlZCB0byB0aGUgd3JhcHBlZFxuICAgICAgICAgKiBvYnNlcnZlci4gVGhpcyBmbGFnIGlzIHNldCB0byB0cnVlIG9uY2Ugd2UndmUgYWN0dWFsbHkgcmFpc2VkIGFuIGV2ZW50LlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5GdSA9ICExLCB0aGlzLkJ1ID0gbnVsbCwgdGhpcy5vbmxpbmVTdGF0ZSA9IFwiVW5rbm93blwiIC8qIE9ubGluZVN0YXRlLlVua25vd24gKi8gLCBcbiAgICAgICAgdGhpcy5vcHRpb25zID0gbiB8fCB7fTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyB0aGUgbmV3IFZpZXdTbmFwc2hvdCB0byB0aGlzIGxpc3RlbmVyLCByYWlzaW5nIGEgdXNlci1mYWNpbmcgZXZlbnRcbiAgICAgKiBpZiBhcHBsaWNhYmxlIChkZXBlbmRpbmcgb24gd2hhdCBjaGFuZ2VkLCB3aGV0aGVyIHRoZSB1c2VyIGhhcyBvcHRlZCBpbnRvXG4gICAgICogbWV0YWRhdGEtb25seSBjaGFuZ2VzLCBldGMuKS4gUmV0dXJucyB0cnVlIGlmIGEgdXNlci1mYWNpbmcgZXZlbnQgd2FzXG4gICAgICogaW5kZWVkIHJhaXNlZC5cbiAgICAgKi8gICAgJHUodCkge1xuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5pbmNsdWRlTWV0YWRhdGFDaGFuZ2VzKSB7XG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIG1ldGFkYXRhIG9ubHkgY2hhbmdlcy5cbiAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiB0LmRvY0NoYW5nZXMpIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAhPT0gbi50eXBlICYmIGUucHVzaChuKTtcbiAgICAgICAgICAgIHQgPSBuZXcgUmModC5xdWVyeSwgdC5kb2NzLCB0Lm9sZERvY3MsIGUsIHQubXV0YXRlZEtleXMsIHQuZnJvbUNhY2hlLCB0LnN5bmNTdGF0ZUNoYW5nZWQsIFxuICAgICAgICAgICAgLyogZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXM9ICovICEwLCB0Lmhhc0NhY2hlZFJlc3VsdHMpO1xuICAgICAgICB9XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLkZ1ID8gdGhpcy5MdSh0KSAmJiAodGhpcy5PdS5uZXh0KHQpLCBlID0gITApIDogdGhpcy5xdSh0LCB0aGlzLm9ubGluZVN0YXRlKSAmJiAodGhpcy5VdSh0KSwgXG4gICAgICAgIGUgPSAhMCksIHRoaXMuQnUgPSB0LCBlO1xuICAgIH1cbiAgICBvbkVycm9yKHQpIHtcbiAgICAgICAgdGhpcy5PdS5lcnJvcih0KTtcbiAgICB9XG4gICAgLyoqIFJldHVybnMgd2hldGhlciBhIHNuYXBzaG90IHdhcyByYWlzZWQuICovICAgIE11KHQpIHtcbiAgICAgICAgdGhpcy5vbmxpbmVTdGF0ZSA9IHQ7XG4gICAgICAgIGxldCBlID0gITE7XG4gICAgICAgIHJldHVybiB0aGlzLkJ1ICYmICF0aGlzLkZ1ICYmIHRoaXMucXUodGhpcy5CdSwgdCkgJiYgKHRoaXMuVXUodGhpcy5CdSksIGUgPSAhMCksIFxuICAgICAgICBlO1xuICAgIH1cbiAgICBxdSh0LCBlKSB7XG4gICAgICAgIC8vIEFsd2F5cyByYWlzZSB0aGUgZmlyc3QgZXZlbnQgd2hlbiB3ZSdyZSBzeW5jZWRcbiAgICAgICAgaWYgKCF0LmZyb21DYWNoZSkgcmV0dXJuICEwO1xuICAgICAgICAvLyBOT1RFOiBXZSBjb25zaWRlciBPbmxpbmVTdGF0ZS5Vbmtub3duIGFzIG9ubGluZSAoaXQgc2hvdWxkIGJlY29tZSBPZmZsaW5lXG4gICAgICAgIC8vIG9yIE9ubGluZSBpZiB3ZSB3YWl0IGxvbmcgZW5vdWdoKS5cbiAgICAgICAgICAgICAgICBjb25zdCBuID0gXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gZTtcbiAgICAgICAgLy8gRG9uJ3QgcmFpc2UgdGhlIGV2ZW50IGlmIHdlJ3JlIG9ubGluZSwgYXJlbid0IHN5bmNlZCB5ZXQgKGNoZWNrZWRcbiAgICAgICAgLy8gYWJvdmUpIGFuZCBhcmUgd2FpdGluZyBmb3IgYSBzeW5jLlxuICAgICAgICAgICAgICAgIHJldHVybiAoIXRoaXMub3B0aW9ucy5LdSB8fCAhbikgJiYgKCF0LmRvY3MuaXNFbXB0eSgpIHx8IHQuaGFzQ2FjaGVkUmVzdWx0cyB8fCBcIk9mZmxpbmVcIiAvKiBPbmxpbmVTdGF0ZS5PZmZsaW5lICovID09PSBlKTtcbiAgICAgICAgLy8gUmFpc2UgZGF0YSBmcm9tIGNhY2hlIGlmIHdlIGhhdmUgYW55IGRvY3VtZW50cywgaGF2ZSBjYWNoZWQgcmVzdWx0cyBiZWZvcmUsXG4gICAgICAgIC8vIG9yIHdlIGFyZSBvZmZsaW5lLlxuICAgICAgICB9XG4gICAgTHUodCkge1xuICAgICAgICAvLyBXZSBkb24ndCBuZWVkIHRvIGhhbmRsZSBpbmNsdWRlRG9jdW1lbnRNZXRhZGF0YUNoYW5nZXMgaGVyZSBiZWNhdXNlXG4gICAgICAgIC8vIHRoZSBNZXRhZGF0YSBvbmx5IGNoYW5nZXMgaGF2ZSBhbHJlYWR5IGJlZW4gc3RyaXBwZWQgb3V0IGlmIG5lZWRlZC5cbiAgICAgICAgLy8gQXQgdGhpcyBwb2ludCB0aGUgb25seSBjaGFuZ2VzIHdlIHdpbGwgc2VlIGFyZSB0aGUgb25lcyB3ZSBzaG91bGRcbiAgICAgICAgLy8gcHJvcGFnYXRlLlxuICAgICAgICBpZiAodC5kb2NDaGFuZ2VzLmxlbmd0aCA+IDApIHJldHVybiAhMDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMuQnUgJiYgdGhpcy5CdS5oYXNQZW5kaW5nV3JpdGVzICE9PSB0Lmhhc1BlbmRpbmdXcml0ZXM7XG4gICAgICAgIHJldHVybiAhKCF0LnN5bmNTdGF0ZUNoYW5nZWQgJiYgIWUpICYmICEwID09PSB0aGlzLm9wdGlvbnMuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgLy8gR2VuZXJhbGx5IHdlIHNob3VsZCBoYXZlIGhpdCBvbmUgb2YgdGhlIGNhc2VzIGFib3ZlLCBidXQgaXQncyBwb3NzaWJsZVxuICAgICAgICAvLyB0byBnZXQgaGVyZSBpZiB0aGVyZSB3ZXJlIG9ubHkgbWV0YWRhdGEgZG9jQ2hhbmdlcyBhbmQgdGhleSBnb3RcbiAgICAgICAgLy8gc3RyaXBwZWQgb3V0LlxuICAgICAgICB9XG4gICAgVXUodCkge1xuICAgICAgICB0ID0gUmMuZnJvbUluaXRpYWxEb2N1bWVudHModC5xdWVyeSwgdC5kb2NzLCB0Lm11dGF0ZWRLZXlzLCB0LmZyb21DYWNoZSwgdC5oYXNDYWNoZWRSZXN1bHRzKSwgXG4gICAgICAgIHRoaXMuRnUgPSAhMCwgdGhpcy5PdS5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjb21wbGV0ZSBlbGVtZW50IGluIHRoZSBidW5kbGUgc3RyZWFtLCB0b2dldGhlciB3aXRoIHRoZSBieXRlIGxlbmd0aCBpdFxuICogb2NjdXBpZXMgaW4gdGhlIHN0cmVhbS5cbiAqLyBjbGFzcyBrYyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLy8gSG93IG1hbnkgYnl0ZXMgdGhpcyBlbGVtZW50IHRha2VzIHRvIHN0b3JlIGluIHRoZSBidW5kbGUuXG4gICAgZSkge1xuICAgICAgICB0aGlzLkd1ID0gdCwgdGhpcy5ieXRlTGVuZ3RoID0gZTtcbiAgICB9XG4gICAgUXUoKSB7XG4gICAgICAgIHJldHVybiBcIm1ldGFkYXRhXCIgaW4gdGhpcy5HdTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhlbHBlciB0byBjb252ZXJ0IG9iamVjdHMgZnJvbSBidW5kbGVzIHRvIG1vZGVsIG9iamVjdHMgaW4gdGhlIFNESy5cbiAqLyBjbGFzcyBNYyB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSB0O1xuICAgIH1cbiAgICBycih0KSB7XG4gICAgICAgIHJldHVybiBPaSh0aGlzLnNlcmlhbGl6ZXIsIHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb252ZXJ0cyBhIEJ1bmRsZURvY3VtZW50IHRvIGEgTXV0YWJsZURvY3VtZW50LlxuICAgICAqLyAgICB1cih0KSB7XG4gICAgICAgIHJldHVybiB0Lm1ldGFkYXRhLmV4aXN0cyA/IEtpKHRoaXMuc2VyaWFsaXplciwgdC5kb2N1bWVudCwgITEpIDogYW4ubmV3Tm9Eb2N1bWVudCh0aGlzLnJyKHQubWV0YWRhdGEubmFtZSksIHRoaXMuY3IodC5tZXRhZGF0YS5yZWFkVGltZSkpO1xuICAgIH1cbiAgICBjcih0KSB7XG4gICAgICAgIHJldHVybiBOaSh0KTtcbiAgICB9XG59XG5cbi8qKlxuICogQSBjbGFzcyB0byBwcm9jZXNzIHRoZSBlbGVtZW50cyBmcm9tIGEgYnVuZGxlLCBsb2FkIHRoZW0gaW50byBsb2NhbFxuICogc3RvcmFnZSBhbmQgcHJvdmlkZSBwcm9ncmVzcyB1cGRhdGUgd2hpbGUgbG9hZGluZy5cbiAqLyBjbGFzcyAkYyB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmp1ID0gdCwgdGhpcy5sb2NhbFN0b3JlID0gZSwgdGhpcy5zZXJpYWxpemVyID0gbiwgXG4gICAgICAgIC8qKiBCYXRjaGVkIHF1ZXJpZXMgdG8gYmUgc2F2ZWQgaW50byBzdG9yYWdlICovXG4gICAgICAgIHRoaXMucXVlcmllcyA9IFtdLCBcbiAgICAgICAgLyoqIEJhdGNoZWQgZG9jdW1lbnRzIHRvIGJlIHNhdmVkIGludG8gc3RvcmFnZSAqL1xuICAgICAgICB0aGlzLmRvY3VtZW50cyA9IFtdLCBcbiAgICAgICAgLyoqIFRoZSBjb2xsZWN0aW9uIGdyb3VwcyBhZmZlY3RlZCBieSB0aGlzIGJ1bmRsZS4gKi9cbiAgICAgICAgdGhpcy5jb2xsZWN0aW9uR3JvdXBzID0gbmV3IFNldCwgdGhpcy5wcm9ncmVzcyA9IE9jKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBZGRzIGFuIGVsZW1lbnQgZnJvbSB0aGUgYnVuZGxlIHRvIHRoZSBsb2FkZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgbmV3IHByb2dyZXNzIGlmIGFkZGluZyB0aGUgZWxlbWVudCBsZWFkcyB0byBhIG5ldyBwcm9ncmVzcyxcbiAgICAgKiBvdGhlcndpc2UgcmV0dXJucyBudWxsLlxuICAgICAqLyAgICB6dSh0KSB7XG4gICAgICAgIHRoaXMucHJvZ3Jlc3MuYnl0ZXNMb2FkZWQgKz0gdC5ieXRlTGVuZ3RoO1xuICAgICAgICBsZXQgZSA9IHRoaXMucHJvZ3Jlc3MuZG9jdW1lbnRzTG9hZGVkO1xuICAgICAgICBpZiAodC5HdS5uYW1lZFF1ZXJ5KSB0aGlzLnF1ZXJpZXMucHVzaCh0Lkd1Lm5hbWVkUXVlcnkpOyBlbHNlIGlmICh0Lkd1LmRvY3VtZW50TWV0YWRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMuZG9jdW1lbnRzLnB1c2goe1xuICAgICAgICAgICAgICAgIG1ldGFkYXRhOiB0Lkd1LmRvY3VtZW50TWV0YWRhdGFcbiAgICAgICAgICAgIH0pLCB0Lkd1LmRvY3VtZW50TWV0YWRhdGEuZXhpc3RzIHx8ICsrZTtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB1dC5mcm9tU3RyaW5nKHQuR3UuZG9jdW1lbnRNZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIHRoaXMuY29sbGVjdGlvbkdyb3Vwcy5hZGQobi5nZXQobi5sZW5ndGggLSAyKSk7XG4gICAgICAgIH0gZWxzZSB0Lkd1LmRvY3VtZW50ICYmICh0aGlzLmRvY3VtZW50c1t0aGlzLmRvY3VtZW50cy5sZW5ndGggLSAxXS5kb2N1bWVudCA9IHQuR3UuZG9jdW1lbnQsIFxuICAgICAgICArK2UpO1xuICAgICAgICByZXR1cm4gZSAhPT0gdGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPyAodGhpcy5wcm9ncmVzcy5kb2N1bWVudHNMb2FkZWQgPSBlLCBcbiAgICAgICAgT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5wcm9ncmVzcykpIDogbnVsbDtcbiAgICB9XG4gICAgV3UodCkge1xuICAgICAgICBjb25zdCBlID0gbmV3IE1hcCwgbiA9IG5ldyBNYyh0aGlzLnNlcmlhbGl6ZXIpO1xuICAgICAgICBmb3IgKGNvbnN0IHMgb2YgdCkgaWYgKHMubWV0YWRhdGEucXVlcmllcykge1xuICAgICAgICAgICAgY29uc3QgdCA9IG4ucnIocy5tZXRhZGF0YS5uYW1lKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgbiBvZiBzLm1ldGFkYXRhLnF1ZXJpZXMpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzID0gKGUuZ2V0KG4pIHx8IGdzKCkpLmFkZCh0KTtcbiAgICAgICAgICAgICAgICBlLnNldChuLCBzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBwcm9ncmVzcyB0byAnU3VjY2VzcycgYW5kIHJldHVybiB0aGUgdXBkYXRlZCBwcm9ncmVzcy5cbiAgICAgKi8gICAgYXN5bmMgY29tcGxldGUoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBtdSh0aGlzLmxvY2FsU3RvcmUsIG5ldyBNYyh0aGlzLnNlcmlhbGl6ZXIpLCB0aGlzLmRvY3VtZW50cywgdGhpcy5qdS5pZCksIGUgPSB0aGlzLld1KHRoaXMuZG9jdW1lbnRzKTtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIHRoaXMucXVlcmllcykgYXdhaXQgZ3UodGhpcy5sb2NhbFN0b3JlLCB0LCBlLmdldCh0Lm5hbWUpKTtcbiAgICAgICAgcmV0dXJuIHRoaXMucHJvZ3Jlc3MudGFza1N0YXRlID0gXCJTdWNjZXNzXCIsIHtcbiAgICAgICAgICAgIHByb2dyZXNzOiB0aGlzLnByb2dyZXNzLFxuICAgICAgICAgICAgSHU6IHRoaXMuY29sbGVjdGlvbkdyb3VwcyxcbiAgICAgICAgICAgIEp1OiB0XG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBgTG9hZEJ1bmRsZVRhc2tQcm9ncmVzc2AgcmVwcmVzZW50aW5nIHRoZSBpbml0aWFsIHByb2dyZXNzIG9mXG4gKiBsb2FkaW5nIGEgYnVuZGxlLlxuICovIGZ1bmN0aW9uIE9jKHQpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDAsXG4gICAgICAgIGJ5dGVzTG9hZGVkOiAwLFxuICAgICAgICB0b3RhbERvY3VtZW50czogdC50b3RhbERvY3VtZW50cyxcbiAgICAgICAgdG90YWxCeXRlczogdC50b3RhbEJ5dGVzXG4gICAgfTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHJlcHJlc2VudGluZyB0aGUgcHJvZ3Jlc3MgdGhhdCB0aGUgbG9hZGluZ1xuICogaGFzIHN1Y2NlZWRlZC5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmNsYXNzIEZjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbmNsYXNzIEJjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdDtcbiAgICB9XG59XG5cbi8qKlxuICogVmlldyBpcyByZXNwb25zaWJsZSBmb3IgY29tcHV0aW5nIHRoZSBmaW5hbCBtZXJnZWQgdHJ1dGggb2Ygd2hhdCBkb2NzIGFyZSBpblxuICogYSBxdWVyeS4gSXQgZ2V0cyBub3RpZmllZCBvZiBsb2NhbCBhbmQgcmVtb3RlIGNoYW5nZXMgdG8gZG9jcywgYW5kIGFwcGxpZXNcbiAqIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3QgcG9zc2libGUgcmVzdWx0cy5cbiAqLyBjbGFzcyBMYyB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLyoqIERvY3VtZW50cyBpbmNsdWRlZCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgIGUpIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMuWXUgPSBlLCB0aGlzLlh1ID0gbnVsbCwgdGhpcy5oYXNDYWNoZWRSZXN1bHRzID0gITEsIFxuICAgICAgICAvKipcbiAgICAgICAgICogQSBmbGFnIHdoZXRoZXIgdGhlIHZpZXcgaXMgY3VycmVudCB3aXRoIHRoZSBiYWNrZW5kLiBBIHZpZXcgaXMgY29uc2lkZXJlZFxuICAgICAgICAgKiBjdXJyZW50IGFmdGVyIGl0IGhhcyBzZWVuIHRoZSBjdXJyZW50IGZsYWcgZnJvbSB0aGUgYmFja2VuZCBhbmQgZGlkIG5vdFxuICAgICAgICAgKiBsb3NlIGNvbnNpc3RlbmN5IHdpdGhpbiB0aGUgd2F0Y2ggc3RyZWFtIChlLmcuIGJlY2F1c2Ugb2YgYW4gZXhpc3RlbmNlXG4gICAgICAgICAqIGZpbHRlciBtaXNtYXRjaCkuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmN1cnJlbnQgPSAhMSwgXG4gICAgICAgIC8qKiBEb2N1bWVudHMgaW4gdGhlIHZpZXcgYnV0IG5vdCBpbiB0aGUgcmVtb3RlIHRhcmdldCAqL1xuICAgICAgICB0aGlzLlp1ID0gZ3MoKSwgXG4gICAgICAgIC8qKiBEb2N1bWVudCBLZXlzIHRoYXQgaGF2ZSBsb2NhbCBjaGFuZ2VzICovXG4gICAgICAgIHRoaXMubXV0YXRlZEtleXMgPSBncygpLCB0aGlzLnRjID0gaXModCksIHRoaXMuZWMgPSBuZXcgQWModGhpcy50Yyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFRoZSBzZXQgb2YgcmVtb3RlIGRvY3VtZW50cyB0aGF0IHRoZSBzZXJ2ZXIgaGFzIHRvbGQgdXMgYmVsb25ncyB0byB0aGUgdGFyZ2V0IGFzc29jaWF0ZWQgd2l0aFxuICAgICAqIHRoaXMgdmlldy5cbiAgICAgKi8gICAgZ2V0IG5jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ZdTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSXRlcmF0ZXMgb3ZlciBhIHNldCBvZiBkb2MgY2hhbmdlcywgYXBwbGllcyB0aGUgcXVlcnkgbGltaXQsIGFuZCBjb21wdXRlc1xuICAgICAqIHdoYXQgdGhlIG5ldyByZXN1bHRzIHNob3VsZCBiZSwgd2hhdCB0aGUgY2hhbmdlcyB3ZXJlLCBhbmQgd2hldGhlciB3ZSBtYXlcbiAgICAgKiBuZWVkIHRvIGdvIGJhY2sgdG8gdGhlIGxvY2FsIGNhY2hlIGZvciBtb3JlIHJlc3VsdHMuIERvZXMgbm90IG1ha2UgYW55XG4gICAgICogY2hhbmdlcyB0byB0aGUgdmlldy5cbiAgICAgKiBAcGFyYW0gZG9jQ2hhbmdlcyAtIFRoZSBkb2MgY2hhbmdlcyB0byBhcHBseSB0byB0aGlzIHZpZXcuXG4gICAgICogQHBhcmFtIHByZXZpb3VzQ2hhbmdlcyAtIElmIHRoaXMgaXMgYmVpbmcgY2FsbGVkIHdpdGggYSByZWZpbGwsIHRoZW4gc3RhcnRcbiAgICAgKiAgICAgICAgd2l0aCB0aGlzIHNldCBvZiBkb2NzIGFuZCBjaGFuZ2VzIGluc3RlYWQgb2YgdGhlIGN1cnJlbnQgdmlldy5cbiAgICAgKiBAcmV0dXJucyBhIG5ldyBzZXQgb2YgZG9jcywgY2hhbmdlcywgYW5kIHJlZmlsbCBmbGFnLlxuICAgICAqLyAgICBzYyh0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBlID8gZS5pYyA6IG5ldyB2YywgcyA9IGUgPyBlLmVjIDogdGhpcy5lYztcbiAgICAgICAgbGV0IGkgPSBlID8gZS5tdXRhdGVkS2V5cyA6IHRoaXMubXV0YXRlZEtleXMsIHIgPSBzLCBvID0gITE7XG4gICAgICAgIC8vIFRyYWNrIHRoZSBsYXN0IGRvYyBpbiBhIChmdWxsKSBsaW1pdC4gVGhpcyBpcyBuZWNlc3NhcnksIGJlY2F1c2Ugc29tZVxuICAgICAgICAvLyB1cGRhdGUgKGEgZGVsZXRlLCBvciBhbiB1cGRhdGUgbW92aW5nIGEgZG9jIHBhc3QgdGhlIG9sZCBsaW1pdCkgbWlnaHRcbiAgICAgICAgLy8gbWVhbiB0aGVyZSBpcyBzb21lIG90aGVyIGRvY3VtZW50IGluIHRoZSBsb2NhbCBjYWNoZSB0aGF0IGVpdGhlciBzaG91bGRcbiAgICAgICAgLy8gY29tZSAoMSkgYmV0d2VlbiB0aGUgb2xkIGxhc3QgbGltaXQgZG9jIGFuZCB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZVxuICAgICAgICAvLyBjYXNlIG9mIHVwZGF0ZXMsIG9yICgyKSBhZnRlciB0aGUgbmV3IGxhc3QgZG9jdW1lbnQsIGluIHRoZSBjYXNlIG9mXG4gICAgICAgIC8vIGRlbGV0ZXMuIFNvIHdlIGtlZXAgdGhpcyBkb2MgYXQgdGhlIG9sZCBsaW1pdCB0byBjb21wYXJlIHRoZSB1cGRhdGVzIHRvLlxuICAgICAgICAvLyBOb3RlIHRoYXQgdGhpcyBzaG91bGQgbmV2ZXIgZ2V0IHVzZWQgaW4gYSByZWZpbGwgKHdoZW4gcHJldmlvdXNDaGFuZ2VzIGlzXG4gICAgICAgIC8vIHNldCksIGJlY2F1c2UgdGhlcmUgd2lsbCBvbmx5IGJlIGFkZHMgLS0gbm8gZGVsZXRlcyBvciB1cGRhdGVzLlxuICAgICAgICBjb25zdCB1ID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSAmJiBzLnNpemUgPT09IHRoaXMucXVlcnkubGltaXQgPyBzLmxhc3QoKSA6IG51bGwsIGMgPSBcIkxcIiAvKiBMaW1pdFR5cGUuTGFzdCAqLyA9PT0gdGhpcy5xdWVyeS5saW1pdFR5cGUgJiYgcy5zaXplID09PSB0aGlzLnF1ZXJ5LmxpbWl0ID8gcy5maXJzdCgpIDogbnVsbDtcbiAgICAgICAgLy8gRHJvcCBkb2N1bWVudHMgb3V0IHRvIG1lZXQgbGltaXQvbGltaXRUb0xhc3QgcmVxdWlyZW1lbnQuXG4gICAgICAgIGlmICh0Lmlub3JkZXJUcmF2ZXJzYWwoKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBhID0gcy5nZXQodCksIGggPSBucyh0aGlzLnF1ZXJ5LCBlKSA/IGUgOiBudWxsLCBsID0gISFhICYmIHRoaXMubXV0YXRlZEtleXMuaGFzKGEua2V5KSwgZiA9ICEhaCAmJiAoaC5oYXNMb2NhbE11dGF0aW9ucyB8fCBcbiAgICAgICAgICAgIC8vIFdlIG9ubHkgY29uc2lkZXIgY29tbWl0dGVkIG11dGF0aW9ucyBmb3IgZG9jdW1lbnRzIHRoYXQgd2VyZVxuICAgICAgICAgICAgLy8gbXV0YXRlZCBkdXJpbmcgdGhlIGxpZmV0aW1lIG9mIHRoZSB2aWV3LlxuICAgICAgICAgICAgdGhpcy5tdXRhdGVkS2V5cy5oYXMoaC5rZXkpICYmIGguaGFzQ29tbWl0dGVkTXV0YXRpb25zKTtcbiAgICAgICAgICAgIGxldCBkID0gITE7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgY2hhbmdlXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYSAmJiBoKSB7XG4gICAgICAgICAgICAgICAgYS5kYXRhLmlzRXF1YWwoaC5kYXRhKSA/IGwgIT09IGYgJiYgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAzIC8qIENoYW5nZVR5cGUuTWV0YWRhdGEgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwKSA6IHRoaXMucmMoYSwgaCkgfHwgKG4udHJhY2soe1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAyIC8qIENoYW5nZVR5cGUuTW9kaWZpZWQgKi8gLFxuICAgICAgICAgICAgICAgICAgICBkb2M6IGhcbiAgICAgICAgICAgICAgICB9KSwgZCA9ICEwLCAodSAmJiB0aGlzLnRjKGgsIHUpID4gMCB8fCBjICYmIHRoaXMudGMoaCwgYykgPCAwKSAmJiAoXG4gICAgICAgICAgICAgICAgLy8gVGhpcyBkb2MgbW92ZWQgZnJvbSBpbnNpZGUgdGhlIGxpbWl0IHRvIG91dHNpZGUgdGhlIGxpbWl0LlxuICAgICAgICAgICAgICAgIC8vIFRoYXQgbWVhbnMgdGhlcmUgbWF5IGJlIHNvbWUgb3RoZXIgZG9jIGluIHRoZSBsb2NhbCBjYWNoZVxuICAgICAgICAgICAgICAgIC8vIHRoYXQgc2hvdWxkIGJlIGluY2x1ZGVkIGluc3RlYWQuXG4gICAgICAgICAgICAgICAgbyA9ICEwKSk7XG4gICAgICAgICAgICB9IGVsc2UgIWEgJiYgaCA/IChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogaFxuICAgICAgICAgICAgfSksIGQgPSAhMCkgOiBhICYmICFoICYmIChuLnRyYWNrKHtcbiAgICAgICAgICAgICAgICB0eXBlOiAxIC8qIENoYW5nZVR5cGUuUmVtb3ZlZCAqLyAsXG4gICAgICAgICAgICAgICAgZG9jOiBhXG4gICAgICAgICAgICB9KSwgZCA9ICEwLCAodSB8fCBjKSAmJiAoXG4gICAgICAgICAgICAvLyBBIGRvYyB3YXMgcmVtb3ZlZCBmcm9tIGEgZnVsbCBsaW1pdCBxdWVyeS4gV2UnbGwgbmVlZCB0b1xuICAgICAgICAgICAgLy8gcmVxdWVyeSBmcm9tIHRoZSBsb2NhbCBjYWNoZSB0byBzZWUgaWYgd2Uga25vdyBhYm91dCBzb21lIG90aGVyXG4gICAgICAgICAgICAvLyBkb2MgdGhhdCBzaG91bGQgYmUgaW4gdGhlIHJlc3VsdHMuXG4gICAgICAgICAgICBvID0gITApKTtcbiAgICAgICAgICAgIGQgJiYgKGggPyAociA9IHIuYWRkKGgpLCBpID0gZiA/IGkuYWRkKHQpIDogaS5kZWxldGUodCkpIDogKHIgPSByLmRlbGV0ZSh0KSwgaSA9IGkuZGVsZXRlKHQpKSk7XG4gICAgICAgIH0pKSwgbnVsbCAhPT0gdGhpcy5xdWVyeS5saW1pdCkgZm9yICg7ci5zaXplID4gdGhpcy5xdWVyeS5saW1pdDsgKSB7XG4gICAgICAgICAgICBjb25zdCB0ID0gXCJGXCIgLyogTGltaXRUeXBlLkZpcnN0ICovID09PSB0aGlzLnF1ZXJ5LmxpbWl0VHlwZSA/IHIubGFzdCgpIDogci5maXJzdCgpO1xuICAgICAgICAgICAgciA9IHIuZGVsZXRlKHQua2V5KSwgaSA9IGkuZGVsZXRlKHQua2V5KSwgbi50cmFjayh7XG4gICAgICAgICAgICAgICAgdHlwZTogMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gLFxuICAgICAgICAgICAgICAgIGRvYzogdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGVjOiByLFxuICAgICAgICAgICAgaWM6IG4sXG4gICAgICAgICAgICB6aTogbyxcbiAgICAgICAgICAgIG11dGF0ZWRLZXlzOiBpXG4gICAgICAgIH07XG4gICAgfVxuICAgIHJjKHQsIGUpIHtcbiAgICAgICAgLy8gV2Ugc3VwcHJlc3MgdGhlIGluaXRpYWwgY2hhbmdlIGV2ZW50IGZvciBkb2N1bWVudHMgdGhhdCB3ZXJlIG1vZGlmaWVkIGFzXG4gICAgICAgIC8vIHBhcnQgb2YgYSB3cml0ZSBhY2tub3dsZWRnbWVudCAoZS5nLiB3aGVuIHRoZSB2YWx1ZSBvZiBhIHNlcnZlciB0cmFuc2Zvcm1cbiAgICAgICAgLy8gaXMgYXBwbGllZCkgYXMgV2F0Y2ggd2lsbCBzZW5kIHVzIHRoZSBzYW1lIGRvY3VtZW50IGFnYWluLlxuICAgICAgICAvLyBCeSBzdXBwcmVzc2luZyB0aGUgZXZlbnQsIHdlIG9ubHkgcmFpc2UgdHdvIHVzZXIgdmlzaWJsZSBldmVudHMgKG9uZSB3aXRoXG4gICAgICAgIC8vIGBoYXNQZW5kaW5nV3JpdGVzYCBhbmQgdGhlIGZpbmFsIHN0YXRlIG9mIHRoZSBkb2N1bWVudCkgaW5zdGVhZCBvZiB0aHJlZVxuICAgICAgICAvLyAob25lIHdpdGggYGhhc1BlbmRpbmdXcml0ZXNgLCB0aGUgbW9kaWZpZWQgZG9jdW1lbnQgd2l0aFxuICAgICAgICAvLyBgaGFzUGVuZGluZ1dyaXRlc2AgYW5kIHRoZSBmaW5hbCBzdGF0ZSBvZiB0aGUgZG9jdW1lbnQpLlxuICAgICAgICByZXR1cm4gdC5oYXNMb2NhbE11dGF0aW9ucyAmJiBlLmhhc0NvbW1pdHRlZE11dGF0aW9ucyAmJiAhZS5oYXNMb2NhbE11dGF0aW9ucztcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlcyB0aGUgdmlldyB3aXRoIHRoZSBnaXZlbiBWaWV3RG9jdW1lbnRDaGFuZ2VzIGFuZCBvcHRpb25hbGx5IHVwZGF0ZXNcbiAgICAgKiBsaW1ibyBkb2NzIGFuZCBzeW5jIHN0YXRlIGZyb20gdGhlIHByb3ZpZGVkIHRhcmdldCBjaGFuZ2UuXG4gICAgICogQHBhcmFtIGRvY0NoYW5nZXMgLSBUaGUgc2V0IG9mIGNoYW5nZXMgdG8gbWFrZSB0byB0aGUgdmlldydzIGRvY3MuXG4gICAgICogQHBhcmFtIHVwZGF0ZUxpbWJvRG9jdW1lbnRzIC0gV2hldGhlciB0byB1cGRhdGUgbGltYm8gZG9jdW1lbnRzIGJhc2VkIG9uXG4gICAgICogICAgICAgIHRoaXMgY2hhbmdlLlxuICAgICAqIEBwYXJhbSB0YXJnZXRDaGFuZ2UgLSBBIHRhcmdldCBjaGFuZ2UgdG8gYXBwbHkgZm9yIGNvbXB1dGluZyBsaW1ibyBkb2NzIGFuZFxuICAgICAqICAgICAgICBzeW5jIHN0YXRlLlxuICAgICAqIEByZXR1cm5zIEEgbmV3IFZpZXdDaGFuZ2Ugd2l0aCB0aGUgZ2l2ZW4gZG9jcywgY2hhbmdlcywgYW5kIHN5bmMgc3RhdGUuXG4gICAgICovXG4gICAgLy8gUE9SVElORyBOT1RFOiBUaGUgaU9TL0FuZHJvaWQgY2xpZW50cyBhbHdheXMgY29tcHV0ZSBsaW1ibyBkb2N1bWVudCBjaGFuZ2VzLlxuICAgIGFwcGx5Q2hhbmdlcyh0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSB0aGlzLmVjO1xuICAgICAgICB0aGlzLmVjID0gdC5lYywgdGhpcy5tdXRhdGVkS2V5cyA9IHQubXV0YXRlZEtleXM7XG4gICAgICAgIC8vIFNvcnQgY2hhbmdlcyBiYXNlZCBvbiB0eXBlIGFuZCBxdWVyeSBjb21wYXJhdG9yXG4gICAgICAgIGNvbnN0IGkgPSB0LmljLnh1KCk7XG4gICAgICAgIGkuc29ydCgoKHQsIGUpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0ID0+IHtcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICAgIGNhc2UgMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovIDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMiAvKiBDaGFuZ2VUeXBlLk1vZGlmaWVkICovIDpcbiAgICAgICAgICAgICAgICAgIGNhc2UgMyAvKiBDaGFuZ2VUeXBlLk1ldGFkYXRhICovIDpcbiAgICAgICAgICAgICAgICAgICAgLy8gQSBtZXRhZGF0YSBjaGFuZ2UgaXMgY29udmVydGVkIHRvIGEgbW9kaWZpZWQgY2hhbmdlIGF0IHRoZSBwdWJsaWNcbiAgICAgICAgICAgICAgICAgICAgLy8gYXBpIGxheWVyLiAgU2luY2Ugd2Ugc29ydCBieSBkb2N1bWVudCBrZXkgYW5kIHRoZW4gY2hhbmdlIHR5cGUsXG4gICAgICAgICAgICAgICAgICAgIC8vIG1ldGFkYXRhIGFuZCBtb2RpZmllZCBjaGFuZ2VzIG11c3QgYmUgc29ydGVkIGVxdWl2YWxlbnRseS5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDI7XG5cbiAgICAgICAgICAgICAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMDtcblxuICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIE8oKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIG4odCkgLSBuKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0LnR5cGUsIGUudHlwZSkgfHwgdGhpcy50Yyh0LmRvYywgZS5kb2MpKSksIHRoaXMub2Mobik7XG4gICAgICAgIGNvbnN0IHIgPSBlID8gdGhpcy51YygpIDogW10sIG8gPSAwID09PSB0aGlzLlp1LnNpemUgJiYgdGhpcy5jdXJyZW50ID8gMSAvKiBTeW5jU3RhdGUuU3luY2VkICovIDogMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gLCB1ID0gbyAhPT0gdGhpcy5YdTtcbiAgICAgICAgaWYgKHRoaXMuWHUgPSBvLCAwICE9PSBpLmxlbmd0aCB8fCB1KSB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIHNuYXBzaG90OiBuZXcgUmModGhpcy5xdWVyeSwgdC5lYywgcywgaSwgdC5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IG8sIHUsIFxuICAgICAgICAgICAgICAgIC8qIGV4Y2x1ZGVzTWV0YWRhdGFDaGFuZ2VzPSAqLyAhMSwgISFuICYmIG4ucmVzdW1lVG9rZW4uYXBwcm94aW1hdGVCeXRlU2l6ZSgpID4gMCksXG4gICAgICAgICAgICAgICAgY2M6IHJcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gY2hhbmdlc1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgY2M6IHJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQXBwbGllcyBhbiBPbmxpbmVTdGF0ZSBjaGFuZ2UgdG8gdGhlIHZpZXcsIHBvdGVudGlhbGx5IGdlbmVyYXRpbmcgYVxuICAgICAqIFZpZXdDaGFuZ2UgaWYgdGhlIHZpZXcncyBzeW5jU3RhdGUgY2hhbmdlcyBhcyBhIHJlc3VsdC5cbiAgICAgKi8gICAgTXUodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jdXJyZW50ICYmIFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8gPT09IHQgPyAoXG4gICAgICAgIC8vIElmIHdlJ3JlIG9mZmxpbmUsIHNldCBgY3VycmVudGAgdG8gZmFsc2UgYW5kIHRoZW4gY2FsbCBhcHBseUNoYW5nZXMoKVxuICAgICAgICAvLyB0byByZWZyZXNoIG91ciBzeW5jU3RhdGUgYW5kIGdlbmVyYXRlIGEgVmlld0NoYW5nZSBhcyBhcHByb3ByaWF0ZS4gV2VcbiAgICAgICAgLy8gYXJlIGd1YXJhbnRlZWQgdG8gZ2V0IGEgbmV3IFRhcmdldENoYW5nZSB0aGF0IHNldHMgYGN1cnJlbnRgIGJhY2sgdG9cbiAgICAgICAgLy8gdHJ1ZSBvbmNlIHRoZSBjbGllbnQgaXMgYmFjayBvbmxpbmUuXG4gICAgICAgIHRoaXMuY3VycmVudCA9ICExLCB0aGlzLmFwcGx5Q2hhbmdlcyh7XG4gICAgICAgICAgICBlYzogdGhpcy5lYyxcbiAgICAgICAgICAgIGljOiBuZXcgdmMsXG4gICAgICAgICAgICBtdXRhdGVkS2V5czogdGhpcy5tdXRhdGVkS2V5cyxcbiAgICAgICAgICAgIHppOiAhMVxuICAgICAgICB9LCBcbiAgICAgICAgLyogdXBkYXRlTGltYm9Eb2N1bWVudHM9ICovICExKSkgOiB7XG4gICAgICAgICAgICBjYzogW11cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB3aGV0aGVyIHRoZSBkb2MgZm9yIHRoZSBnaXZlbiBrZXkgc2hvdWxkIGJlIGluIGxpbWJvLlxuICAgICAqLyAgICBhYyh0KSB7XG4gICAgICAgIC8vIElmIHRoZSByZW1vdGUgZW5kIHNheXMgaXQncyBwYXJ0IG9mIHRoaXMgcXVlcnksIGl0J3Mgbm90IGluIGxpbWJvLlxuICAgICAgICByZXR1cm4gIXRoaXMuWXUuaGFzKHQpICYmIChcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIGRvZXNuJ3QgdGhpbmsgaXQncyBhIHJlc3VsdCwgc28gaXQgc2hvdWxkbid0IGJlIGluIGxpbWJvLlxuICAgICAgICAhIXRoaXMuZWMuaGFzKHQpICYmICF0aGlzLmVjLmdldCh0KS5oYXNMb2NhbE11dGF0aW9ucyk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFVwZGF0ZXMgc3luY2VkRG9jdW1lbnRzLCBjdXJyZW50LCBhbmQgbGltYm8gZG9jcyBiYXNlZCBvbiB0aGUgZ2l2ZW4gY2hhbmdlLlxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2YgY2hhbmdlcyB0byB3aGljaCBkb2NzIGFyZSBpbiBsaW1iby5cbiAgICAgKi8gICAgb2ModCkge1xuICAgICAgICB0ICYmICh0LmFkZGVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5ZdSA9IHRoaXMuWXUuYWRkKHQpKSksIHQubW9kaWZpZWREb2N1bWVudHMuZm9yRWFjaCgodCA9PiB7fSkpLCBcbiAgICAgICAgdC5yZW1vdmVkRG9jdW1lbnRzLmZvckVhY2goKHQgPT4gdGhpcy5ZdSA9IHRoaXMuWXUuZGVsZXRlKHQpKSksIHRoaXMuY3VycmVudCA9IHQuY3VycmVudCk7XG4gICAgfVxuICAgIHVjKCkge1xuICAgICAgICAvLyBXZSBjYW4gb25seSBkZXRlcm1pbmUgbGltYm8gZG9jdW1lbnRzIHdoZW4gd2UncmUgaW4tc3luYyB3aXRoIHRoZSBzZXJ2ZXIuXG4gICAgICAgIGlmICghdGhpcy5jdXJyZW50KSByZXR1cm4gW107XG4gICAgICAgIC8vIFRPRE8oa2xpbXQpOiBEbyB0aGlzIGluY3JlbWVudGFsbHkgc28gdGhhdCBpdCdzIG5vdCBxdWFkcmF0aWMgd2hlblxuICAgICAgICAvLyB1cGRhdGluZyBtYW55IGRvY3VtZW50cy5cbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5adTtcbiAgICAgICAgdGhpcy5adSA9IGdzKCksIHRoaXMuZWMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLmFjKHQua2V5KSAmJiAodGhpcy5adSA9IHRoaXMuWnUuYWRkKHQua2V5KSk7XG4gICAgICAgIH0pKTtcbiAgICAgICAgLy8gRGlmZiB0aGUgbmV3IGxpbWJvIGRvY3Mgd2l0aCB0aGUgb2xkIGxpbWJvIGRvY3MuXG4gICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgcmV0dXJuIHQuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLlp1Lmhhcyh0KSB8fCBlLnB1c2gobmV3IEJjKHQpKTtcbiAgICAgICAgfSkpLCB0aGlzLlp1LmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5oYXMobikgfHwgZS5wdXNoKG5ldyBGYyhuKSk7XG4gICAgICAgIH0pKSwgZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBpbi1tZW1vcnkgc3RhdGUgb2YgdGhlIGN1cnJlbnQgdmlldyB3aXRoIHRoZSBzdGF0ZSByZWFkIGZyb21cbiAgICAgKiBwZXJzaXN0ZW5jZS5cbiAgICAgKlxuICAgICAqIFdlIHVwZGF0ZSB0aGUgcXVlcnkgdmlldyB3aGVuZXZlciBhIGNsaWVudCdzIHByaW1hcnkgc3RhdHVzIGNoYW5nZXM6XG4gICAgICogLSBXaGVuIGEgY2xpZW50IHRyYW5zaXRpb25zIGZyb20gcHJpbWFyeSB0byBzZWNvbmRhcnksIGl0IGNhbiBtaXNzXG4gICAgICogICBMb2NhbFN0b3JhZ2UgdXBkYXRlcyBhbmQgaXRzIHF1ZXJ5IHZpZXdzIG1heSB0ZW1wb3JhcmlseSBub3QgYmVcbiAgICAgKiAgIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzdGF0ZSBvbiBkaXNrLlxuICAgICAqIC0gRm9yIHNlY29uZGFyeSB0byBwcmltYXJ5IHRyYW5zaXRpb25zLCB0aGUgY2xpZW50IG5lZWRzIHRvIHVwZGF0ZSB0aGUgbGlzdFxuICAgICAqICAgb2YgYHN5bmNlZERvY3VtZW50c2Agc2luY2Ugc2Vjb25kYXJ5IGNsaWVudHMgdXBkYXRlIHRoZWlyIHF1ZXJ5IHZpZXdzXG4gICAgICogICBiYXNlZCBwdXJlbHkgb24gc3ludGhlc2l6ZWQgUmVtb3RlRXZlbnRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LmRvY3VtZW50cyAtIFRoZSBkb2N1bWVudHMgdGhhdCBtYXRjaCB0aGUgcXVlcnkgYWNjb3JkaW5nXG4gICAgICogdG8gdGhlIExvY2FsU3RvcmUuXG4gICAgICogQHBhcmFtIHF1ZXJ5UmVzdWx0LnJlbW90ZUtleXMgLSBUaGUga2V5cyBvZiB0aGUgZG9jdW1lbnRzIHRoYXQgbWF0Y2ggdGhlXG4gICAgICogcXVlcnkgYWNjb3JkaW5nIHRvIHRoZSBiYWNrZW5kLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFZpZXdDaGFuZ2UgdGhhdCByZXN1bHRlZCBmcm9tIHRoaXMgc3luY2hyb25pemF0aW9uLlxuICAgICAqL1xuICAgIC8vIFBPUlRJTkcgTk9URTogTXVsdGktdGFiIG9ubHkuXG4gICAgaGModCkge1xuICAgICAgICB0aGlzLll1ID0gdC5pciwgdGhpcy5adSA9IGdzKCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnNjKHQuZG9jdW1lbnRzKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGUsIC8qdXBkYXRlTGltYm9Eb2N1bWVudHM9Ki8gITApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgdmlldyBzbmFwc2hvdCBhcyBpZiB0aGlzIHF1ZXJ5IHdhcyBqdXN0IGxpc3RlbmVkIHRvLiBDb250YWluc1xuICAgICAqIGEgZG9jdW1lbnQgYWRkIGZvciBldmVyeSBleGlzdGluZyBkb2N1bWVudCBhbmQgdGhlIGBmcm9tQ2FjaGVgIGFuZFxuICAgICAqIGBoYXNQZW5kaW5nV3JpdGVzYCBzdGF0dXMgb2YgdGhlIGFscmVhZHkgZXN0YWJsaXNoZWQgdmlldy5cbiAgICAgKi9cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLXRhYiBvbmx5LlxuICAgIGxjKCkge1xuICAgICAgICByZXR1cm4gUmMuZnJvbUluaXRpYWxEb2N1bWVudHModGhpcy5xdWVyeSwgdGhpcy5lYywgdGhpcy5tdXRhdGVkS2V5cywgMCAvKiBTeW5jU3RhdGUuTG9jYWwgKi8gPT09IHRoaXMuWHUsIHRoaXMuaGFzQ2FjaGVkUmVzdWx0cyk7XG4gICAgfVxufVxuXG4vKipcbiAqIFF1ZXJ5VmlldyBjb250YWlucyBhbGwgb2YgdGhlIGRhdGEgdGhhdCBTeW5jRW5naW5lIG5lZWRzIHRvIGtlZXAgdHJhY2sgb2YgZm9yXG4gKiBhIHBhcnRpY3VsYXIgcXVlcnkuXG4gKi9cbmNsYXNzIHFjIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKipcbiAgICAgKiBUaGUgcXVlcnkgaXRzZWxmLlxuICAgICAqL1xuICAgIHQsIFxuICAgIC8qKlxuICAgICAqIFRoZSB0YXJnZXQgbnVtYmVyIGNyZWF0ZWQgYnkgdGhlIGNsaWVudCB0aGF0IGlzIHVzZWQgaW4gdGhlIHdhdGNoXG4gICAgICogc3RyZWFtIHRvIGlkZW50aWZ5IHRoaXMgcXVlcnkuXG4gICAgICovXG4gICAgZSwgXG4gICAgLyoqXG4gICAgICogVGhlIHZpZXcgaXMgcmVzcG9uc2libGUgZm9yIGNvbXB1dGluZyB0aGUgZmluYWwgbWVyZ2VkIHRydXRoIG9mIHdoYXRcbiAgICAgKiBkb2NzIGFyZSBpbiB0aGUgcXVlcnkuIEl0IGdldHMgbm90aWZpZWQgb2YgbG9jYWwgYW5kIHJlbW90ZSBjaGFuZ2VzLFxuICAgICAqIGFuZCBhcHBsaWVzIHRoZSBxdWVyeSBmaWx0ZXJzIGFuZCBsaW1pdHMgdG8gZGV0ZXJtaW5lIHRoZSBtb3N0IGNvcnJlY3RcbiAgICAgKiBwb3NzaWJsZSByZXN1bHRzLlxuICAgICAqL1xuICAgIG4pIHtcbiAgICAgICAgdGhpcy5xdWVyeSA9IHQsIHRoaXMudGFyZ2V0SWQgPSBlLCB0aGlzLnZpZXcgPSBuO1xuICAgIH1cbn1cblxuLyoqIFRyYWNrcyBhIGxpbWJvIHJlc29sdXRpb24uICovIGNsYXNzIFVjIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2V5ID0gdCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBTZXQgdG8gdHJ1ZSBvbmNlIHdlJ3ZlIHJlY2VpdmVkIGEgZG9jdW1lbnQuIFRoaXMgaXMgdXNlZCBpblxuICAgICAgICAgKiBnZXRSZW1vdGVLZXlzRm9yVGFyZ2V0KCkgYW5kIHVsdGltYXRlbHkgdXNlZCBieSBXYXRjaENoYW5nZUFnZ3JlZ2F0b3IgdG9cbiAgICAgICAgICogZGVjaWRlIHdoZXRoZXIgaXQgbmVlZHMgdG8gbWFudWZhY3R1cmUgYSBkZWxldGUgZXZlbnQgZm9yIHRoZSB0YXJnZXQgb25jZVxuICAgICAgICAgKiB0aGUgdGFyZ2V0IGlzIENVUlJFTlQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmZjID0gITE7XG4gICAgfVxufVxuXG4vKipcbiAqIEFuIGltcGxlbWVudGF0aW9uIG9mIGBTeW5jRW5naW5lYCBjb29yZGluYXRpbmcgd2l0aCBvdGhlciBwYXJ0cyBvZiBTREsuXG4gKlxuICogVGhlIHBhcnRzIG9mIFN5bmNFbmdpbmUgdGhhdCBhY3QgYXMgYSBjYWxsYmFjayB0byBSZW1vdGVTdG9yZSBuZWVkIHRvIGJlXG4gKiByZWdpc3RlcmVkIGluZGl2aWR1YWxseS4gVGhpcyBpcyBkb25lIGluIGBzeW5jRW5naW5lV3JpdGUoKWAgYW5kXG4gKiBgc3luY0VuZ2luZUxpc3RlbigpYCAoYXMgd2VsbCBhcyBgYXBwbHlQcmltYXJ5U3RhdGUoKWApIGFzIHRoZXNlIG1ldGhvZHNcbiAqIHNlcnZlIGFzIGVudHJ5IHBvaW50cyB0byBSZW1vdGVTdG9yZSdzIGZ1bmN0aW9uYWxpdHkuXG4gKlxuICogTm90ZTogc29tZSBmaWVsZCBkZWZpbmVkIGluIHRoaXMgY2xhc3MgbWlnaHQgaGF2ZSBwdWJsaWMgYWNjZXNzIGxldmVsLCBidXRcbiAqIHRoZSBjbGFzcyBpcyBub3QgZXhwb3J0ZWQgc28gdGhleSBhcmUgb25seSBhY2Nlc3NpYmxlIGZyb20gdGhpcyBtb2R1bGUuXG4gKiBUaGlzIGlzIHVzZWZ1bCB0byBpbXBsZW1lbnQgb3B0aW9uYWwgZmVhdHVyZXMgKGxpa2UgYnVuZGxlcykgaW4gZnJlZVxuICogZnVuY3Rpb25zLCBzdWNoIHRoYXQgdGhleSBhcmUgdHJlZS1zaGFrZWFibGUuXG4gKi8gY2xhc3MgS2Mge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIFxuICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICBzLCBpLCByKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSA9IHQsIHRoaXMucmVtb3RlU3RvcmUgPSBlLCB0aGlzLmV2ZW50TWFuYWdlciA9IG4sIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgPSBzLCBcbiAgICAgICAgdGhpcy5jdXJyZW50VXNlciA9IGksIHRoaXMubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMgPSByLCB0aGlzLmRjID0ge30sIHRoaXMud2MgPSBuZXcgb3MoKHQgPT4gdHModCkpLCBabiksIFxuICAgICAgICB0aGlzLl9jID0gbmV3IE1hcCwgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBUaGUga2V5cyBvZiBkb2N1bWVudHMgdGhhdCBhcmUgaW4gbGltYm8gZm9yIHdoaWNoIHdlIGhhdmVuJ3QgeWV0IHN0YXJ0ZWQgYVxuICAgICAgICAgKiBsaW1ibyByZXNvbHV0aW9uIHF1ZXJ5LiBUaGUgc3RyaW5ncyBpbiB0aGlzIHNldCBhcmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nXG4gICAgICAgICAqIGBrZXkucGF0aC5jYW5vbmljYWxTdHJpbmcoKWAgd2hlcmUgYGtleWAgaXMgYSBgRG9jdW1lbnRLZXlgIG9iamVjdC5cbiAgICAgICAgICpcbiAgICAgICAgICogVGhlIGBTZXRgIHR5cGUgd2FzIGNob3NlbiBiZWNhdXNlIGl0IHByb3ZpZGVzIGVmZmljaWVudCBsb29rdXAgYW5kIHJlbW92YWxcbiAgICAgICAgICogb2YgYXJiaXRyYXJ5IGVsZW1lbnRzIGFuZCBpdCBhbHNvIG1haW50YWlucyBpbnNlcnRpb24gb3JkZXIsIHByb3ZpZGluZyB0aGVcbiAgICAgICAgICogZGVzaXJlZCBxdWV1ZS1saWtlIEZJRk8gc2VtYW50aWNzLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tYyA9IG5ldyBTZXQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIHRhcmdldCBJRCBmb3IgZWFjaCBkb2N1bWVudCB0aGF0IGlzIGluIGxpbWJvIHdpdGggYW5cbiAgICAgICAgICogYWN0aXZlIHRhcmdldC5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMuZ2MgPSBuZXcgcGUoaHQuY29tcGFyYXRvciksIFxuICAgICAgICAvKipcbiAgICAgICAgICogS2VlcHMgdHJhY2sgb2YgdGhlIGluZm9ybWF0aW9uIGFib3V0IGFuIGFjdGl2ZSBsaW1ibyByZXNvbHV0aW9uIGZvciBlYWNoXG4gICAgICAgICAqIGFjdGl2ZSB0YXJnZXQgSUQgdGhhdCB3YXMgc3RhcnRlZCBmb3IgdGhlIHB1cnBvc2Ugb2YgbGltYm8gcmVzb2x1dGlvbi5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMueWMgPSBuZXcgTWFwLCB0aGlzLkljID0gbmV3IE9vLCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNvbXBsZXRpb24gaGFuZGxlcnMsIGluZGV4ZWQgYnkgVXNlciBhbmQgQmF0Y2hJZC4gKi9cbiAgICAgICAgdGhpcy5UYyA9IHt9LCBcbiAgICAgICAgLyoqIFN0b3JlcyB1c2VyIGNhbGxiYWNrcyB3YWl0aW5nIGZvciBhbGwgcGVuZGluZyB3cml0ZXMgdG8gYmUgYWNrbm93bGVkZ2VkLiAqL1xuICAgICAgICB0aGlzLkVjID0gbmV3IE1hcCwgdGhpcy5BYyA9IGxvLk1uKCksIHRoaXMub25saW5lU3RhdGUgPSBcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovICwgXG4gICAgICAgIC8vIFRoZSBwcmltYXJ5IHN0YXRlIGlzIHNldCB0byBgdHJ1ZWAgb3IgYGZhbHNlYCBpbW1lZGlhdGVseSBhZnRlciBGaXJlc3RvcmVcbiAgICAgICAgLy8gc3RhcnR1cC4gSW4gdGhlIGludGVyaW0sIGEgY2xpZW50IHNob3VsZCBvbmx5IGJlIGNvbnNpZGVyZWQgcHJpbWFyeSBpZlxuICAgICAgICAvLyBgaXNQcmltYXJ5YCBpcyB0cnVlLlxuICAgICAgICB0aGlzLnZjID0gdm9pZCAwO1xuICAgIH1cbiAgICBnZXQgaXNQcmltYXJ5Q2xpZW50KCkge1xuICAgICAgICByZXR1cm4gITAgPT09IHRoaXMudmM7XG4gICAgfVxufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgbmV3IGxpc3RlbiwgcmVzb2x2ZXMgcHJvbWlzZSB3aGVuIGxpc3RlbiBlbnF1ZXVlZCB0byB0aGVcbiAqIHNlcnZlci4gQWxsIHRoZSBzdWJzZXF1ZW50IHZpZXcgc25hcHNob3RzIG9yIGVycm9ycyBhcmUgc2VudCB0byB0aGVcbiAqIHN1YnNjcmliZWQgaGFuZGxlcnMuIFJldHVybnMgdGhlIGluaXRpYWwgc25hcHNob3QuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIEdjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gcGEodCk7XG4gICAgbGV0IHMsIGk7XG4gICAgY29uc3QgciA9IG4ud2MuZ2V0KGUpO1xuICAgIGlmIChyKSBcbiAgICAvLyBQT1JUSU5HIE5PVEU6IFdpdGggTXVsdGktVGFiIFdlYiwgaXQgaXMgcG9zc2libGUgdGhhdCBhIHF1ZXJ5IHZpZXdcbiAgICAvLyBhbHJlYWR5IGV4aXN0cyB3aGVuIEV2ZW50TWFuYWdlciBjYWxscyB1cyBmb3IgdGhlIGZpcnN0IHRpbWUuIFRoaXNcbiAgICAvLyBoYXBwZW5zIHdoZW4gdGhlIHByaW1hcnkgdGFiIGlzIGFscmVhZHkgbGlzdGVuaW5nIHRvIHRoaXMgcXVlcnkgb25cbiAgICAvLyBiZWhhbGYgb2YgYW5vdGhlciB0YWIgYW5kIHRoZSB1c2VyIG9mIHRoZSBwcmltYXJ5IGFsc28gc3RhcnRzIGxpc3RlbmluZ1xuICAgIC8vIHRvIHRoZSBxdWVyeS4gRXZlbnRNYW5hZ2VyIHdpbGwgbm90IGhhdmUgYW4gYXNzaWduZWQgdGFyZ2V0IElEIGluIHRoaXNcbiAgICAvLyBjYXNlIGFuZCBjYWxscyBgbGlzdGVuYCB0byBvYnRhaW4gdGhpcyBJRC5cbiAgICBzID0gci50YXJnZXRJZCwgbi5zaGFyZWRDbGllbnRTdGF0ZS5hZGRMb2NhbFF1ZXJ5VGFyZ2V0KHMpLCBpID0gci52aWV3LmxjKCk7IGVsc2Uge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgaHUobi5sb2NhbFN0b3JlLCBKbihlKSksIHIgPSBuLnNoYXJlZENsaWVudFN0YXRlLmFkZExvY2FsUXVlcnlUYXJnZXQodC50YXJnZXRJZCk7XG4gICAgICAgIHMgPSB0LnRhcmdldElkLCBpID0gYXdhaXQgUWMobiwgZSwgcywgXCJjdXJyZW50XCIgPT09IHIsIHQucmVzdW1lVG9rZW4pLCBuLmlzUHJpbWFyeUNsaWVudCAmJiBIdShuLnJlbW90ZVN0b3JlLCB0KTtcbiAgICB9XG4gICAgcmV0dXJuIGk7XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdmlldyBmb3IgYSBwcmV2aW91c2x5IHVua25vd24gcXVlcnkgYW5kIGNvbXB1dGVzIGl0cyBpbml0aWFsXG4gKiBzbmFwc2hvdC5cbiAqLyBhc3luYyBmdW5jdGlvbiBRYyh0LCBlLCBuLCBzLCBpKSB7XG4gICAgLy8gUE9SVElORyBOT1RFOiBPbiBXZWIgb25seSwgd2UgaW5qZWN0IHRoZSBjb2RlIHRoYXQgcmVnaXN0ZXJzIG5ldyBMaW1ib1xuICAgIC8vIHRhcmdldHMgYmFzZWQgb24gdmlldyBjaGFuZ2VzLiBUaGlzIGFsbG93cyB1cyB0byBvbmx5IGRlcGVuZCBvbiBMaW1ib1xuICAgIC8vIGNoYW5nZXMgd2hlbiB1c2VyIGNvZGUgaW5jbHVkZXMgcXVlcmllcy5cbiAgICB0LlJjID0gKGUsIG4sIHMpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgbGV0IGkgPSBlLnZpZXcuc2Mobik7XG4gICAgICAgIGkuemkgJiYgKFxuICAgICAgICAvLyBUaGUgcXVlcnkgaGFzIGEgbGltaXQgYW5kIHNvbWUgZG9jcyB3ZXJlIHJlbW92ZWQsIHNvIHdlIG5lZWRcbiAgICAgICAgLy8gdG8gcmUtcnVuIHRoZSBxdWVyeSBhZ2FpbnN0IHRoZSBsb2NhbCBzdG9yZSB0byBtYWtlIHN1cmUgd2VcbiAgICAgICAgLy8gZGlkbid0IGxvc2UgYW55IGdvb2QgZG9jcyB0aGF0IGhhZCBiZWVuIHBhc3QgdGhlIGxpbWl0LlxuICAgICAgICBpID0gYXdhaXQgZnUodC5sb2NhbFN0b3JlLCBlLnF1ZXJ5LCBcbiAgICAgICAgLyogdXNlUHJldmlvdXNSZXN1bHRzPSAqLyAhMSkudGhlbigoKHtkb2N1bWVudHM6IHR9KSA9PiBlLnZpZXcuc2ModCwgaSkpKSk7XG4gICAgICAgIGNvbnN0IHIgPSBzICYmIHMudGFyZ2V0Q2hhbmdlcy5nZXQoZS50YXJnZXRJZCksIG8gPSBlLnZpZXcuYXBwbHlDaGFuZ2VzKGksIFxuICAgICAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIHIpO1xuICAgICAgICByZXR1cm4gaWEodCwgZS50YXJnZXRJZCwgby5jYyksIG8uc25hcHNob3Q7XG4gICAgfSh0LCBlLCBuLCBzKTtcbiAgICBjb25zdCByID0gYXdhaXQgZnUodC5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiB1c2VQcmV2aW91c1Jlc3VsdHM9ICovICEwKSwgbyA9IG5ldyBMYyhlLCByLmlyKSwgdSA9IG8uc2Moci5kb2N1bWVudHMpLCBjID0gZ2kuY3JlYXRlU3ludGhlc2l6ZWRUYXJnZXRDaGFuZ2VGb3JDdXJyZW50Q2hhbmdlKG4sIHMgJiYgXCJPZmZsaW5lXCIgLyogT25saW5lU3RhdGUuT2ZmbGluZSAqLyAhPT0gdC5vbmxpbmVTdGF0ZSwgaSksIGEgPSBvLmFwcGx5Q2hhbmdlcyh1LCBcbiAgICAvKiB1cGRhdGVMaW1ib0RvY3VtZW50cz0gKi8gdC5pc1ByaW1hcnlDbGllbnQsIGMpO1xuICAgIGlhKHQsIG4sIGEuY2MpO1xuICAgIGNvbnN0IGggPSBuZXcgcWMoZSwgbiwgbyk7XG4gICAgcmV0dXJuIHQud2Muc2V0KGUsIGgpLCB0Ll9jLmhhcyhuKSA/IHQuX2MuZ2V0KG4pLnB1c2goZSkgOiB0Ll9jLnNldChuLCBbIGUgXSksIGEuc25hcHNob3Q7XG59XG5cbi8qKiBTdG9wcyBsaXN0ZW5pbmcgdG8gdGhlIHF1ZXJ5LiAqLyBhc3luYyBmdW5jdGlvbiBqYyh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBuLndjLmdldChlKSwgaSA9IG4uX2MuZ2V0KHMudGFyZ2V0SWQpO1xuICAgIGlmIChpLmxlbmd0aCA+IDEpIHJldHVybiBuLl9jLnNldChzLnRhcmdldElkLCBpLmZpbHRlcigodCA9PiAhWm4odCwgZSkpKSksIHZvaWQgbi53Yy5kZWxldGUoZSk7XG4gICAgLy8gTm8gb3RoZXIgcXVlcmllcyBhcmUgbWFwcGVkIHRvIHRoZSB0YXJnZXQsIGNsZWFuIHVwIHRoZSBxdWVyeSBhbmQgdGhlIHRhcmdldC5cbiAgICAgICAgaWYgKG4uaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIC8vIFdlIG5lZWQgdG8gcmVtb3ZlIHRoZSBsb2NhbCBxdWVyeSB0YXJnZXQgZmlyc3QgdG8gYWxsb3cgdXMgdG8gdmVyaWZ5XG4gICAgICAgIC8vIHdoZXRoZXIgYW55IG90aGVyIGNsaWVudCBpcyBzdGlsbCBpbnRlcmVzdGVkIGluIHRoaXMgdGFyZ2V0LlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLnJlbW92ZUxvY2FsUXVlcnlUYXJnZXQocy50YXJnZXRJZCk7XG4gICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNBY3RpdmVRdWVyeVRhcmdldChzLnRhcmdldElkKSB8fCBhd2FpdCBsdShuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICExKS50aGVuKCgoKSA9PiB7XG4gICAgICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmNsZWFyUXVlcnlTdGF0ZShzLnRhcmdldElkKSwgSnUobi5yZW1vdGVTdG9yZSwgcy50YXJnZXRJZCksIFxuICAgICAgICAgICAgbmEobiwgcy50YXJnZXRJZCk7XG4gICAgICAgIH0pKS5jYXRjaCh2dCk7XG4gICAgfSBlbHNlIG5hKG4sIHMudGFyZ2V0SWQpLCBhd2FpdCBsdShuLmxvY2FsU3RvcmUsIHMudGFyZ2V0SWQsIFxuICAgIC8qa2VlcFBlcnNpc3RlZFRhcmdldERhdGE9Ki8gITApO1xufVxuXG4vKipcbiAqIEluaXRpYXRlcyB0aGUgd3JpdGUgb2YgbG9jYWwgbXV0YXRpb24gYmF0Y2ggd2hpY2ggaW52b2x2ZXMgYWRkaW5nIHRoZVxuICogd3JpdGVzIHRvIHRoZSBtdXRhdGlvbiBxdWV1ZSwgbm90aWZ5aW5nIHRoZSByZW1vdGUgc3RvcmUgYWJvdXQgbmV3XG4gKiBtdXRhdGlvbnMgYW5kIHJhaXNpbmcgZXZlbnRzIGZvciBhbnkgY2hhbmdlcyB0aGlzIHdyaXRlIGNhdXNlZC5cbiAqXG4gKiBUaGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGlzIGNhbGwgaXMgcmVzb2x2ZWQgd2hlbiB0aGUgYWJvdmUgc3RlcHNcbiAqIGhhdmUgY29tcGxldGVkLCAqbm90KiB3aGVuIHRoZSB3cml0ZSB3YXMgYWNrZWQgYnkgdGhlIGJhY2tlbmQuIFRoZVxuICogdXNlckNhbGxiYWNrIGlzIHJlc29sdmVkIG9uY2UgdGhlIHdyaXRlIHdhcyBhY2tlZC9yZWplY3RlZCBieSB0aGVcbiAqIGJhY2tlbmQgKG9yIGZhaWxlZCBsb2NhbGx5IGZvciBhbnkgb3RoZXIgcmVhc29uKS5cbiAqLyBhc3luYyBmdW5jdGlvbiB6Yyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IElhKHQpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBjb25zdCBuID0gTCh0KSwgcyA9IGl0Lm5vdygpLCBpID0gZS5yZWR1Y2UoKCh0LCBlKSA9PiB0LmFkZChlLmtleSkpLCBncygpKTtcbiAgICAgICAgICAgIGxldCByLCBvO1xuICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJMb2NhbGx5IHdyaXRlIG11dGF0aW9uc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiB7XG4gICAgICAgICAgICAgICAgLy8gRmlndXJlIG91dCB3aGljaCBrZXlzIGRvIG5vdCBoYXZlIGEgcmVtb3RlIHZlcnNpb24gaW4gdGhlIGNhY2hlLCB0aGlzXG4gICAgICAgICAgICAgICAgLy8gaXMgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgcmlnaHQgb3ZlcmxheSBtdXRhdGlvbjogaWYgbm8gcmVtb3RlIHZlcnNpb25cbiAgICAgICAgICAgICAgICAvLyBwcmVzZW50cywgd2UgZG8gbm90IG5lZWQgdG8gY3JlYXRlIG92ZXJsYXlzIGFzIHBhdGNoIG11dGF0aW9ucy5cbiAgICAgICAgICAgICAgICAvLyBUT0RPKE92ZXJsYXkpOiBJcyB0aGVyZSBhIGJldHRlciB3YXkgdG8gZGV0ZXJtaW5lIHRoaXM/IFVzaW5nIHRoZVxuICAgICAgICAgICAgICAgIC8vICBkb2N1bWVudCB2ZXJzaW9uIGRvZXMgbm90IHdvcmsgYmVjYXVzZSBsb2NhbCBtdXRhdGlvbnMgc2V0IHRoZW0gYmFja1xuICAgICAgICAgICAgICAgIC8vICB0byAwLlxuICAgICAgICAgICAgICAgIGxldCB1ID0gY3MoKSwgYyA9IGdzKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4uWmkuZ2V0RW50cmllcyh0LCBpKS5uZXh0KCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdSA9IHQsIHUuZm9yRWFjaCgoKHQsIGUpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUuaXNWYWxpZERvY3VtZW50KCkgfHwgKGMgPSBjLmFkZCh0KSk7XG4gICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoKCkgPT4gbi5sb2NhbERvY3VtZW50cy5nZXRPdmVybGF5ZWREb2N1bWVudHModCwgdSkpKS5uZXh0KChpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgciA9IGk7XG4gICAgICAgICAgICAgICAgICAgIC8vIEZvciBub24taWRlbXBvdGVudCBtdXRhdGlvbnMgKHN1Y2ggYXMgYEZpZWxkVmFsdWUuaW5jcmVtZW50KClgKSxcbiAgICAgICAgICAgICAgICAgICAgLy8gd2UgcmVjb3JkIHRoZSBiYXNlIHN0YXRlIGluIGEgc2VwYXJhdGUgcGF0Y2ggbXV0YXRpb24uIFRoaXMgaXNcbiAgICAgICAgICAgICAgICAgICAgLy8gbGF0ZXIgdXNlZCB0byBndWFyYW50ZWUgY29uc2lzdGVudCB2YWx1ZXMgYW5kIHByZXZlbnRzIGZsaWNrZXJcbiAgICAgICAgICAgICAgICAgICAgLy8gZXZlbiBpZiB0aGUgYmFja2VuZCBzZW5kcyB1cyBhbiB1cGRhdGUgdGhhdCBhbHJlYWR5IGluY2x1ZGVzIG91clxuICAgICAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0uXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG8gPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBHcyh0LCByLmdldCh0LmtleSkub3ZlcmxheWVkRG9jdW1lbnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbnVsbCAhPSBlICYmIFxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTk9URTogVGhlIGJhc2Ugc3RhdGUgc2hvdWxkIG9ubHkgYmUgYXBwbGllZCBpZiB0aGVyZSdzIHNvbWVcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0aW5nIGRvY3VtZW50IHRvIG92ZXJyaWRlLCBzbyB1c2UgYSBQcmVjb25kaXRpb24gb2ZcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGV4aXN0cz10cnVlXG4gICAgICAgICAgICAgICAgICAgICAgICBvLnB1c2gobmV3IHpzKHQua2V5LCBlLCBjbihlLnZhbHVlLm1hcFZhbHVlKSwgRnMuZXhpc3RzKCEwKSkpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLm11dGF0aW9uUXVldWUuYWRkTXV0YXRpb25CYXRjaCh0LCBzLCBvLCBlKTtcbiAgICAgICAgICAgICAgICB9KSkubmV4dCgoZSA9PiB7XG4gICAgICAgICAgICAgICAgICAgIG8gPSBlO1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBzID0gZS5hcHBseVRvTG9jYWxEb2N1bWVudFNldChyLCBjKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG4uZG9jdW1lbnRPdmVybGF5Q2FjaGUuc2F2ZU92ZXJsYXlzKHQsIGUuYmF0Y2hJZCwgcyk7XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfSkpLnRoZW4oKCgpID0+ICh7XG4gICAgICAgICAgICAgICAgYmF0Y2hJZDogby5iYXRjaElkLFxuICAgICAgICAgICAgICAgIGNoYW5nZXM6IGxzKHIpXG4gICAgICAgICAgICB9KSkpO1xuICAgICAgICB9KHMubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIHMuc2hhcmVkQ2xpZW50U3RhdGUuYWRkUGVuZGluZ011dGF0aW9uKHQuYmF0Y2hJZCksIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgICAgIGxldCBzID0gdC5UY1t0LmN1cnJlbnRVc2VyLnRvS2V5KCldO1xuICAgICAgICAgICAgcyB8fCAocyA9IG5ldyBwZShldCkpO1xuICAgICAgICAgICAgcyA9IHMuaW5zZXJ0KGUsIG4pLCB0LlRjW3QuY3VycmVudFVzZXIudG9LZXkoKV0gPSBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmVzb2x2ZXMgb3IgcmVqZWN0cyB0aGUgdXNlciBjYWxsYmFjayBmb3IgdGhlIGdpdmVuIGJhdGNoIGFuZCB0aGVuIGRpc2NhcmRzXG4gKiBpdC5cbiAqLyAocywgdC5iYXRjaElkLCBuKSwgYXdhaXQgdWEocywgdC5jaGFuZ2VzKSwgYXdhaXQgY2Mocy5yZW1vdGVTdG9yZSk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICAvLyBJZiB3ZSBjYW4ndCBwZXJzaXN0IHRoZSBtdXRhdGlvbiwgd2UgcmVqZWN0IHRoZSB1c2VyIGNhbGxiYWNrIGFuZFxuICAgICAgICAvLyBkb24ndCBzZW5kIHRoZSBtdXRhdGlvbi4gVGhlIHVzZXIgY2FuIHRoZW4gcmV0cnkgdGhlIHdyaXRlLlxuICAgICAgICBjb25zdCBlID0gRWModCwgXCJGYWlsZWQgdG8gcGVyc2lzdCB3cml0ZVwiKTtcbiAgICAgICAgbi5yZWplY3QoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgb25lIHJlbW90ZSBldmVudCB0byB0aGUgc3luYyBlbmdpbmUsIG5vdGlmeWluZyBhbnkgdmlld3Mgb2YgdGhlXG4gKiBjaGFuZ2VzLCBhbmQgcmVsZWFzaW5nIGFueSBwZW5kaW5nIG11dGF0aW9uIGJhdGNoZXMgdGhhdCB3b3VsZCBiZWNvbWVcbiAqIHZpc2libGUgYmVjYXVzZSBvZiB0aGUgc25hcHNob3QgdmVyc2lvbiB0aGUgcmVtb3RlIGV2ZW50IGNvbnRhaW5zLlxuICovIGFzeW5jIGZ1bmN0aW9uIFdjKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdXUobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVXBkYXRlIGByZWNlaXZlZERvY3VtZW50YCBhcyBhcHByb3ByaWF0ZSBmb3IgYW55IGxpbWJvIHRhcmdldHMuXG4gICAgICAgICAgICAgICAgZS50YXJnZXRDaGFuZ2VzLmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzID0gbi55Yy5nZXQoZSk7XG4gICAgICAgICAgICBzICYmIChcbiAgICAgICAgICAgIC8vIFNpbmNlIHRoaXMgaXMgYSBsaW1ibyByZXNvbHV0aW9uIGxvb2t1cCwgaXQncyBmb3IgYSBzaW5nbGUgZG9jdW1lbnRcbiAgICAgICAgICAgIC8vIGFuZCBpdCBjb3VsZCBiZSBhZGRlZCwgbW9kaWZpZWQsIG9yIHJlbW92ZWQsIGJ1dCBub3QgYSBjb21iaW5hdGlvbi5cbiAgICAgICAgICAgIEYodC5hZGRlZERvY3VtZW50cy5zaXplICsgdC5tb2RpZmllZERvY3VtZW50cy5zaXplICsgdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPD0gMSksIFxuICAgICAgICAgICAgdC5hZGRlZERvY3VtZW50cy5zaXplID4gMCA/IHMuZmMgPSAhMCA6IHQubW9kaWZpZWREb2N1bWVudHMuc2l6ZSA+IDAgPyBGKHMuZmMpIDogdC5yZW1vdmVkRG9jdW1lbnRzLnNpemUgPiAwICYmIChGKHMuZmMpLCBcbiAgICAgICAgICAgIHMuZmMgPSAhMSkpO1xuICAgICAgICB9KSksIGF3YWl0IHVhKG4sIHQsIGUpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgYXdhaXQgdnQodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEFwcGxpZXMgYW4gT25saW5lU3RhdGUgY2hhbmdlIHRvIHRoZSBzeW5jIGVuZ2luZSBhbmQgbm90aWZpZXMgYW55IHZpZXdzIG9mXG4gKiB0aGUgY2hhbmdlLlxuICovIGZ1bmN0aW9uIEhjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICAvLyBJZiB3ZSBhcmUgdGhlIHNlY29uZGFyeSBjbGllbnQsIHdlIGV4cGxpY2l0bHkgaWdub3JlIHRoZSByZW1vdGUgc3RvcmUnc1xuICAgIC8vIG9ubGluZSBzdGF0ZSAodGhlIGxvY2FsIGNsaWVudCBtYXkgZ28gb2ZmbGluZSwgZXZlbiB0aG91Z2ggdGhlIHByaW1hcnlcbiAgICAvLyB0YWIgcmVtYWlucyBvbmxpbmUpIGFuZCBvbmx5IGFwcGx5IHRoZSBwcmltYXJ5IHRhYidzIG9ubGluZSBzdGF0ZSBmcm9tXG4gICAgLy8gU2hhcmVkQ2xpZW50U3RhdGUuXG4gICAgICAgIGlmIChzLmlzUHJpbWFyeUNsaWVudCAmJiAwIC8qIE9ubGluZVN0YXRlU291cmNlLlJlbW90ZVN0b3JlICovID09PSBuIHx8ICFzLmlzUHJpbWFyeUNsaWVudCAmJiAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovID09PSBuKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcy53Yy5mb3JFYWNoKCgobiwgcykgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IHMudmlldy5NdShlKTtcbiAgICAgICAgICAgIGkuc25hcHNob3QgJiYgdC5wdXNoKGkuc25hcHNob3QpO1xuICAgICAgICB9KSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgICAgICAgICAgbi5vbmxpbmVTdGF0ZSA9IGU7XG4gICAgICAgICAgICBsZXQgcyA9ICExO1xuICAgICAgICAgICAgbi5xdWVyaWVzLmZvckVhY2goKCh0LCBuKSA9PiB7XG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4ubGlzdGVuZXJzKSBcbiAgICAgICAgICAgICAgICAvLyBSdW4gZ2xvYmFsIHNuYXBzaG90IGxpc3RlbmVycyBpZiBhIGNvbnNpc3RlbnQgc25hcHNob3QgaGFzIGJlZW4gZW1pdHRlZC5cbiAgICAgICAgICAgICAgICB0Lk11KGUpICYmIChzID0gITApO1xuICAgICAgICAgICAgfSkpLCBzICYmIHhjKG4pO1xuICAgICAgICB9KHMuZXZlbnRNYW5hZ2VyLCBlKSwgdC5sZW5ndGggJiYgcy5kYy5udSh0KSwgcy5vbmxpbmVTdGF0ZSA9IGUsIHMuaXNQcmltYXJ5Q2xpZW50ICYmIHMuc2hhcmVkQ2xpZW50U3RhdGUuc2V0T25saW5lU3RhdGUoZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlamVjdHMgdGhlIGxpc3RlbiBmb3IgdGhlIGdpdmVuIHRhcmdldElELiBUaGlzIGNhbiBiZSB0cmlnZ2VyZWQgYnkgdGhlXG4gKiBiYWNrZW5kIGZvciBhbnkgYWN0aXZlIHRhcmdldC5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFRoZSBzeW5jIGVuZ2luZSBpbXBsZW1lbnRhdGlvbi5cbiAqIEBwYXJhbSB0YXJnZXRJZCAtIFRoZSB0YXJnZXRJRCBjb3JyZXNwb25kcyB0byBvbmUgcHJldmlvdXNseSBpbml0aWF0ZWQgYnkgdGhlXG4gKiB1c2VyIGFzIHBhcnQgb2YgVGFyZ2V0RGF0YSBwYXNzZWQgdG8gbGlzdGVuKCkgb24gUmVtb3RlU3RvcmUuXG4gKiBAcGFyYW0gZXJyIC0gQSBkZXNjcmlwdGlvbiBvZiB0aGUgY29uZGl0aW9uIHRoYXQgaGFzIGZvcmNlZCB0aGUgcmVqZWN0aW9uLlxuICogTmVhcmx5IGFsd2F5cyB0aGlzIHdpbGwgYmUgYW4gaW5kaWNhdGlvbiB0aGF0IHRoZSB1c2VyIGlzIG5vIGxvbmdlclxuICogYXV0aG9yaXplZCB0byBzZWUgdGhlIGRhdGEgbWF0Y2hpbmcgdGhlIHRhcmdldC5cbiAqLyBhc3luYyBmdW5jdGlvbiBKYyh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCk7XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS10YWIgb25seS5cbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKGUsIFwicmVqZWN0ZWRcIiwgbik7XG4gICAgY29uc3QgaSA9IHMueWMuZ2V0KGUpLCByID0gaSAmJiBpLmtleTtcbiAgICBpZiAocikge1xuICAgICAgICAvLyBUT0RPKGtsaW10KTogV2UgcmVhbGx5IG9ubHkgc2hvdWxkIGRvIHRoZSBmb2xsb3dpbmcgb24gcGVybWlzc2lvblxuICAgICAgICAvLyBkZW5pZWQgZXJyb3JzLCBidXQgd2UgZG9uJ3QgaGF2ZSB0aGUgY2F1c2UgY29kZSBoZXJlLlxuICAgICAgICAvLyBJdCdzIGEgbGltYm8gZG9jLiBDcmVhdGUgYSBzeW50aGV0aWMgZXZlbnQgc2F5aW5nIGl0IHdhcyBkZWxldGVkLlxuICAgICAgICAvLyBUaGlzIGlzIGtpbmQgb2YgYSBoYWNrLiBJZGVhbGx5LCB3ZSB3b3VsZCBoYXZlIGEgbWV0aG9kIGluIHRoZSBsb2NhbFxuICAgICAgICAvLyBzdG9yZSB0byBwdXJnZSBhIGRvY3VtZW50LiBIb3dldmVyLCBpdCB3b3VsZCBiZSB0cmlja3kgdG8ga2VlcCBhbGwgb2ZcbiAgICAgICAgLy8gdGhlIGxvY2FsIHN0b3JlJ3MgaW52YXJpYW50cyB3aXRoIGFub3RoZXIgbWV0aG9kLlxuICAgICAgICBsZXQgdCA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcbiAgICAgICAgLy8gVE9ETyhiLzIxNzE4OTIxNik6IFRoaXMgbGltYm8gZG9jdW1lbnQgc2hvdWxkIGlkZWFsbHkgaGF2ZSBhIHJlYWQgdGltZSxcbiAgICAgICAgLy8gc28gdGhhdCBpdCBpcyBwaWNrZWQgdXAgYnkgYW55IHJlYWQtdGltZSBiYXNlZCBzY2Fucy4gVGhlIGJhY2tlbmQsXG4gICAgICAgIC8vIGhvd2V2ZXIsIGRvZXMgbm90IHNlbmQgYSByZWFkIHRpbWUgZm9yIHRhcmdldCByZW1vdmFscy5cbiAgICAgICAgICAgICAgICB0ID0gdC5pbnNlcnQociwgYW4ubmV3Tm9Eb2N1bWVudChyLCBydC5taW4oKSkpO1xuICAgICAgICBjb25zdCBuID0gZ3MoKS5hZGQociksIGkgPSBuZXcgbWkocnQubWluKCksIFxuICAgICAgICAvKiB0YXJnZXRDaGFuZ2VzPSAqLyBuZXcgTWFwLCBcbiAgICAgICAgLyogdGFyZ2V0TWlzbWF0Y2hlcz0gKi8gbmV3IHBlKGV0KSwgdCwgbik7XG4gICAgICAgIGF3YWl0IFdjKHMsIGkpLCBcbiAgICAgICAgLy8gU2luY2UgdGhpcyBxdWVyeSBmYWlsZWQsIHdlIHdvbid0IHdhbnQgdG8gbWFudWFsbHkgdW5saXN0ZW4gdG8gaXQuXG4gICAgICAgIC8vIFdlIG9ubHkgcmVtb3ZlIGl0IGZyb20gYm9va2tlZXBpbmcgYWZ0ZXIgd2Ugc3VjY2Vzc2Z1bGx5IGFwcGxpZWQgdGhlXG4gICAgICAgIC8vIFJlbW90ZUV2ZW50LiBJZiBgYXBwbHlSZW1vdGVFdmVudCgpYCB0aHJvd3MsIHdlIHdhbnQgdG8gcmUtbGlzdGVuIHRvXG4gICAgICAgIC8vIHRoaXMgcXVlcnkgd2hlbiB0aGUgUmVtb3RlU3RvcmUgcmVzdGFydHMgdGhlIFdhdGNoIHN0cmVhbSwgd2hpY2ggc2hvdWxkXG4gICAgICAgIC8vIHJlLXRyaWdnZXIgdGhlIHRhcmdldCBmYWlsdXJlLlxuICAgICAgICBzLmdjID0gcy5nYy5yZW1vdmUociksIHMueWMuZGVsZXRlKGUpLCBvYShzKTtcbiAgICB9IGVsc2UgYXdhaXQgbHUocy5sb2NhbFN0b3JlLCBlLCBcbiAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4gbmEocywgZSwgbikpKS5jYXRjaCh2dCk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFljKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KSwgcyA9IGUuYmF0Y2guYmF0Y2hJZDtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgcnUobi5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHRcbiAgICAgICAgLy8gdXApLCBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlblxuICAgICAgICAvLyBiZWZvcmUgbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBlYShuLCBzLCAvKmVycm9yPSovIG51bGwpLCB0YShuLCBzKSwgbi5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVNdXRhdGlvblN0YXRlKHMsIFwiYWNrbm93bGVkZ2VkXCIpLCBcbiAgICAgICAgYXdhaXQgdWEobiwgdCk7XG4gICAgfSBjYXRjaCAodCkge1xuICAgICAgICBhd2FpdCB2dCh0KTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIFhjKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gTCh0KTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcIlJlamVjdCBiYXRjaFwiLCBcInJlYWR3cml0ZS1wcmltYXJ5XCIsICh0ID0+IHtcbiAgICAgICAgICAgICAgICBsZXQgcztcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5tdXRhdGlvblF1ZXVlLmxvb2t1cE11dGF0aW9uQmF0Y2godCwgZSkubmV4dCgoZSA9PiAoRihudWxsICE9PSBlKSwgcyA9IGUua2V5cygpLCBcbiAgICAgICAgICAgICAgICBuLm11dGF0aW9uUXVldWUucmVtb3ZlTXV0YXRpb25CYXRjaCh0LCBlKSkpKS5uZXh0KCgoKSA9PiBuLm11dGF0aW9uUXVldWUucGVyZm9ybUNvbnNpc3RlbmN5Q2hlY2sodCkpKS5uZXh0KCgoKSA9PiBuLmRvY3VtZW50T3ZlcmxheUNhY2hlLnJlbW92ZU92ZXJsYXlzRm9yQmF0Y2hJZCh0LCBzLCBlKSkpLm5leHQoKCgpID0+IG4ubG9jYWxEb2N1bWVudHMucmVjYWxjdWxhdGVBbmRTYXZlT3ZlcmxheXNGb3JEb2N1bWVudEtleXModCwgcykpKS5uZXh0KCgoKSA9PiBuLmxvY2FsRG9jdW1lbnRzLmdldERvY3VtZW50cyh0LCBzKSkpO1xuICAgICAgICAgICAgfSkpO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogUmV0dXJucyB0aGUgbGFyZ2VzdCAobGF0ZXN0KSBiYXRjaCBpZCBpbiBtdXRhdGlvbiBxdWV1ZSB0aGF0IGlzIHBlbmRpbmdcbiAqIHNlcnZlciByZXNwb25zZS5cbiAqXG4gKiBSZXR1cm5zIGBCQVRDSElEX1VOS05PV05gIGlmIHRoZSBxdWV1ZSBpcyBlbXB0eS5cbiAqLyAocy5sb2NhbFN0b3JlLCBlKTtcbiAgICAgICAgLy8gVGhlIGxvY2FsIHN0b3JlIG1heSBvciBtYXkgbm90IGJlIGFibGUgdG8gYXBwbHkgdGhlIHdyaXRlIHJlc3VsdCBhbmRcbiAgICAgICAgLy8gcmFpc2UgZXZlbnRzIGltbWVkaWF0ZWx5IChkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgd2F0Y2hlciBpcyBjYXVnaHQgdXApLFxuICAgICAgICAvLyBzbyB3ZSByYWlzZSB1c2VyIGNhbGxiYWNrcyBmaXJzdCBzbyB0aGF0IHRoZXkgY29uc2lzdGVudGx5IGhhcHBlbiBiZWZvcmVcbiAgICAgICAgLy8gbGlzdGVuIGV2ZW50cy5cbiAgICAgICAgICAgICAgICBlYShzLCBlLCBuKSwgdGEocywgZSksIHMuc2hhcmVkQ2xpZW50U3RhdGUudXBkYXRlTXV0YXRpb25TdGF0ZShlLCBcInJlamVjdGVkXCIsIG4pLCBcbiAgICAgICAgYXdhaXQgdWEocywgdCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgICBhd2FpdCB2dChuKTtcbiAgICB9XG59XG5cbi8qKlxuICogUmVnaXN0ZXJzIGEgdXNlciBjYWxsYmFjayB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHBlbmRpbmcgbXV0YXRpb25zIGF0IHRoZSBtb21lbnQgb2YgY2FsbGluZ1xuICogYXJlIGFja25vd2xlZGdlZCAuXG4gKi8gYXN5bmMgZnVuY3Rpb24gWmModCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgIGVjKG4ucmVtb3RlU3RvcmUpIHx8IE4oXCJTeW5jRW5naW5lXCIsIFwiVGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQuIFRoZSB0YXNrIHJldHVybmVkIGJ5ICdhd2FpdFBlbmRpbmdXcml0ZXMoKScgd2lsbCBub3QgY29tcGxldGUgdW50aWwgdGhlIG5ldHdvcmsgaXMgZW5hYmxlZC5cIik7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJHZXQgaGlnaGVzdCB1bmFja25vd2xlZGdlZCBiYXRjaCBpZFwiLCBcInJlYWRvbmx5XCIsICh0ID0+IGUubXV0YXRpb25RdWV1ZS5nZXRIaWdoZXN0VW5hY2tub3dsZWRnZWRCYXRjaElkKHQpKSk7XG4gICAgICAgIH0obi5sb2NhbFN0b3JlKTtcbiAgICAgICAgaWYgKC0xID09PSB0KSBcbiAgICAgICAgLy8gVHJpZ2dlciB0aGUgY2FsbGJhY2sgcmlnaHQgYXdheSBpZiB0aGVyZSBpcyBubyBwZW5kaW5nIHdyaXRlcyBhdCB0aGUgbW9tZW50LlxuICAgICAgICByZXR1cm4gdm9pZCBlLnJlc29sdmUoKTtcbiAgICAgICAgY29uc3QgcyA9IG4uRWMuZ2V0KHQpIHx8IFtdO1xuICAgICAgICBzLnB1c2goZSksIG4uRWMuc2V0KHQsIHMpO1xuICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgY29uc3QgbiA9IEVjKHQsIFwiSW5pdGlhbGl6YXRpb24gb2Ygd2FpdEZvclBlbmRpbmdXcml0ZXMoKSBvcGVyYXRpb24gZmFpbGVkXCIpO1xuICAgICAgICBlLnJlamVjdChuKTtcbiAgICB9XG59XG5cbi8qKlxuICogVHJpZ2dlcnMgdGhlIGNhbGxiYWNrcyB0aGF0IGFyZSB3YWl0aW5nIGZvciB0aGlzIGJhdGNoIGlkIHRvIGdldCBhY2tub3dsZWRnZWQgYnkgc2VydmVyLFxuICogaWYgdGhlcmUgYXJlIGFueS5cbiAqLyBmdW5jdGlvbiB0YSh0LCBlKSB7XG4gICAgKHQuRWMuZ2V0KGUpIHx8IFtdKS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgdC5yZXNvbHZlKCk7XG4gICAgfSkpLCB0LkVjLmRlbGV0ZShlKTtcbn1cblxuLyoqIFJlamVjdCBhbGwgb3V0c3RhbmRpbmcgY2FsbGJhY2tzIHdhaXRpbmcgZm9yIHBlbmRpbmcgd3JpdGVzIHRvIGNvbXBsZXRlLiAqLyBmdW5jdGlvbiBlYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCk7XG4gICAgbGV0IGkgPSBzLlRjW3MuY3VycmVudFVzZXIudG9LZXkoKV07XG4gICAgLy8gTk9URTogTXV0YXRpb25zIHJlc3RvcmVkIGZyb20gcGVyc2lzdGVuY2Ugd29uJ3QgaGF2ZSBjYWxsYmFja3MsIHNvIGl0J3NcbiAgICAvLyBva2F5IGZvciB0aGVyZSB0byBiZSBubyBjYWxsYmFjayBmb3IgdGhpcyBJRC5cbiAgICAgICAgaWYgKGkpIHtcbiAgICAgICAgY29uc3QgdCA9IGkuZ2V0KGUpO1xuICAgICAgICB0ICYmIChuID8gdC5yZWplY3QobikgOiB0LnJlc29sdmUoKSwgaSA9IGkucmVtb3ZlKGUpKSwgcy5UY1tzLmN1cnJlbnRVc2VyLnRvS2V5KCldID0gaTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG5hKHQsIGUsIG4gPSBudWxsKSB7XG4gICAgdC5zaGFyZWRDbGllbnRTdGF0ZS5yZW1vdmVMb2NhbFF1ZXJ5VGFyZ2V0KGUpO1xuICAgIGZvciAoY29uc3QgcyBvZiB0Ll9jLmdldChlKSkgdC53Yy5kZWxldGUocyksIG4gJiYgdC5kYy5QYyhzLCBuKTtcbiAgICBpZiAodC5fYy5kZWxldGUoZSksIHQuaXNQcmltYXJ5Q2xpZW50KSB7XG4gICAgICAgIHQuSWMuSXMoZSkuZm9yRWFjaCgoZSA9PiB7XG4gICAgICAgICAgICB0LkljLmNvbnRhaW5zS2V5KGUpIHx8IFxuICAgICAgICAgICAgLy8gV2UgcmVtb3ZlZCB0aGUgbGFzdCByZWZlcmVuY2UgZm9yIHRoaXMga2V5XG4gICAgICAgICAgICBzYSh0LCBlKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gc2EodCwgZSkge1xuICAgIHQubWMuZGVsZXRlKGUucGF0aC5jYW5vbmljYWxTdHJpbmcoKSk7XG4gICAgLy8gSXQncyBwb3NzaWJsZSB0aGF0IHRoZSB0YXJnZXQgYWxyZWFkeSBnb3QgcmVtb3ZlZCBiZWNhdXNlIHRoZSBxdWVyeSBmYWlsZWQuIEluIHRoYXQgY2FzZSxcbiAgICAvLyB0aGUga2V5IHdvbid0IGV4aXN0IGluIGBsaW1ib1RhcmdldHNCeUtleWAuIE9ubHkgZG8gdGhlIGNsZWFudXAgaWYgd2Ugc3RpbGwgaGF2ZSB0aGUgdGFyZ2V0LlxuICAgIGNvbnN0IG4gPSB0LmdjLmdldChlKTtcbiAgICBudWxsICE9PSBuICYmIChKdSh0LnJlbW90ZVN0b3JlLCBuKSwgdC5nYyA9IHQuZ2MucmVtb3ZlKGUpLCB0LnljLmRlbGV0ZShuKSwgb2EodCkpO1xufVxuXG5mdW5jdGlvbiBpYSh0LCBlLCBuKSB7XG4gICAgZm9yIChjb25zdCBzIG9mIG4pIGlmIChzIGluc3RhbmNlb2YgRmMpIHQuSWMuYWRkUmVmZXJlbmNlKHMua2V5LCBlKSwgcmEodCwgcyk7IGVsc2UgaWYgKHMgaW5zdGFuY2VvZiBCYykge1xuICAgICAgICBOKFwiU3luY0VuZ2luZVwiLCBcIkRvY3VtZW50IG5vIGxvbmdlciBpbiBsaW1ibzogXCIgKyBzLmtleSksIHQuSWMucmVtb3ZlUmVmZXJlbmNlKHMua2V5LCBlKTtcbiAgICAgICAgdC5JYy5jb250YWluc0tleShzLmtleSkgfHwgXG4gICAgICAgIC8vIFdlIHJlbW92ZWQgdGhlIGxhc3QgcmVmZXJlbmNlIGZvciB0aGlzIGtleVxuICAgICAgICBzYSh0LCBzLmtleSk7XG4gICAgfSBlbHNlIE8oKTtcbn1cblxuZnVuY3Rpb24gcmEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBlLmtleSwgcyA9IG4ucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB0LmdjLmdldChuKSB8fCB0Lm1jLmhhcyhzKSB8fCAoTihcIlN5bmNFbmdpbmVcIiwgXCJOZXcgZG9jdW1lbnQgaW4gbGltYm86IFwiICsgbiksIHQubWMuYWRkKHMpLCBcbiAgICBvYSh0KSk7XG59XG5cbi8qKlxuICogU3RhcnRzIGxpc3RlbnMgZm9yIGRvY3VtZW50cyBpbiBsaW1ibyB0aGF0IGFyZSBlbnF1ZXVlZCBmb3IgcmVzb2x1dGlvbixcbiAqIHN1YmplY3QgdG8gYSBtYXhpbXVtIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLlxuICpcbiAqIFdpdGhvdXQgYm91bmRpbmcgdGhlIG51bWJlciBvZiBjb25jdXJyZW50IHJlc29sdXRpb25zLCB0aGUgc2VydmVyIGNhbiBmYWlsXG4gKiB3aXRoIFwicmVzb3VyY2UgZXhoYXVzdGVkXCIgZXJyb3JzIHdoaWNoIGNhbiBsZWFkIHRvIHBhdGhvbG9naWNhbCBjbGllbnRcbiAqIGJlaGF2aW9yIGFzIHNlZW4gaW4gaHR0cHM6Ly9naXRodWIuY29tL2ZpcmViYXNlL2ZpcmViYXNlLWpzLXNkay9pc3N1ZXMvMjY4My5cbiAqLyBmdW5jdGlvbiBvYSh0KSB7XG4gICAgZm9yICg7dC5tYy5zaXplID4gMCAmJiB0LmdjLnNpemUgPCB0Lm1heENvbmN1cnJlbnRMaW1ib1Jlc29sdXRpb25zOyApIHtcbiAgICAgICAgY29uc3QgZSA9IHQubWMudmFsdWVzKCkubmV4dCgpLnZhbHVlO1xuICAgICAgICB0Lm1jLmRlbGV0ZShlKTtcbiAgICAgICAgY29uc3QgbiA9IG5ldyBodCh1dC5mcm9tU3RyaW5nKGUpKSwgcyA9IHQuQWMubmV4dCgpO1xuICAgICAgICB0LnljLnNldChzLCBuZXcgVWMobikpLCB0LmdjID0gdC5nYy5pbnNlcnQobiwgcyksIEh1KHQucmVtb3RlU3RvcmUsIG5ldyBjcihKbihHbihuLnBhdGgpKSwgcywgXCJUYXJnZXRQdXJwb3NlTGltYm9SZXNvbHV0aW9uXCIgLyogVGFyZ2V0UHVycG9zZS5MaW1ib1Jlc29sdXRpb24gKi8gLCBPdC5jdCkpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gdWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpLCBpID0gW10sIHIgPSBbXSwgbyA9IFtdO1xuICAgIHMud2MuaXNFbXB0eSgpIHx8IChzLndjLmZvckVhY2goKCh0LCB1KSA9PiB7XG4gICAgICAgIG8ucHVzaChzLlJjKHUsIGUsIG4pLnRoZW4oKHQgPT4ge1xuICAgICAgICAgICAgLy8gVXBkYXRlIHZpZXdzIGlmIHRoZXJlIGFyZSBhY3R1YWwgY2hhbmdlcy5cbiAgICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBjaGFuZ2VzLCBvciB3ZSBhcmUgaGFuZGxpbmcgYSBnbG9iYWwgc25hcHNob3QsIG5vdGlmeVxuICAgICAgICAgICAgLy8gc2Vjb25kYXJ5IGNsaWVudHMgdG8gdXBkYXRlIHF1ZXJ5IHN0YXRlLlxuICAgICAgICAgICAgKHQgfHwgbikgJiYgcy5pc1ByaW1hcnlDbGllbnQgJiYgcy5zaGFyZWRDbGllbnRTdGF0ZS51cGRhdGVRdWVyeVN0YXRlKHUudGFyZ2V0SWQsIChudWxsID09IHQgPyB2b2lkIDAgOiB0LmZyb21DYWNoZSkgPyBcIm5vdC1jdXJyZW50XCIgOiBcImN1cnJlbnRcIiksIFxuICAgICAgICAgICAgdCkge1xuICAgICAgICAgICAgICAgIGkucHVzaCh0KTtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gdHUuTGkodS50YXJnZXRJZCwgdCk7XG4gICAgICAgICAgICAgICAgci5wdXNoKGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSkpO1xuICAgIH0pKSwgYXdhaXQgUHJvbWlzZS5hbGwobyksIHMuZGMubnUoaSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwibm90aWZ5TG9jYWxWaWV3Q2hhbmdlc1wiLCBcInJlYWR3cml0ZVwiLCAodCA9PiBSdC5mb3JFYWNoKGUsIChlID0+IFJ0LmZvckVhY2goZS5GaSwgKHMgPT4gbi5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5hZGRSZWZlcmVuY2UodCwgZS50YXJnZXRJZCwgcykpKS5uZXh0KCgoKSA9PiBSdC5mb3JFYWNoKGUuQmksIChzID0+IG4ucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUucmVtb3ZlUmVmZXJlbmNlKHQsIGUudGFyZ2V0SWQsIHMpKSkpKSkpKSk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGlmICghRHQodCkpIHRocm93IHQ7XG4gICAgICAgICAgICAvLyBJZiBgbm90aWZ5TG9jYWxWaWV3Q2hhbmdlc2AgZmFpbHMsIHdlIGRpZCBub3QgYWR2YW5jZSB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIC8vIG51bWJlciBmb3IgdGhlIGRvY3VtZW50cyB0aGF0IHdlcmUgaW5jbHVkZWQgaW4gdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIC8vIFRoaXMgbWlnaHQgdHJpZ2dlciB0aGVtIHRvIGJlIGRlbGV0ZWQgZWFybGllciB0aGFuIHRoZXkgb3RoZXJ3aXNlXG4gICAgICAgICAgICAvLyB3b3VsZCBoYXZlLCBidXQgaXQgc2hvdWxkIG5vdCBpbnZhbGlkYXRlIHRoZSBpbnRlZ3JpdHkgb2YgdGhlIGRhdGEuXG4gICAgICAgICAgICBOKFwiTG9jYWxTdG9yZVwiLCBcIkZhaWxlZCB0byB1cGRhdGUgc2VxdWVuY2UgbnVtYmVyczogXCIgKyB0KTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgY29uc3QgZSA9IHQudGFyZ2V0SWQ7XG4gICAgICAgICAgICBpZiAoIXQuZnJvbUNhY2hlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG4uSmkuZ2V0KGUpLCBzID0gdC5zbmFwc2hvdFZlcnNpb24sIGkgPSB0LndpdGhMYXN0TGltYm9GcmVlU25hcHNob3RWZXJzaW9uKHMpO1xuICAgICAgICAgICAgICAgIC8vIEFkdmFuY2UgdGhlIGxhc3QgbGltYm8gZnJlZSBzbmFwc2hvdCB2ZXJzaW9uXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG4uSmkgPSBuLkppLmluc2VydChlLCBpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0ocy5sb2NhbFN0b3JlLCByKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGNhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBpZiAoIW4uY3VycmVudFVzZXIuaXNFcXVhbChlKSkge1xuICAgICAgICBOKFwiU3luY0VuZ2luZVwiLCBcIlVzZXIgY2hhbmdlLiBOZXcgdXNlcjpcIiwgZS50b0tleSgpKTtcbiAgICAgICAgY29uc3QgdCA9IGF3YWl0IGl1KG4ubG9jYWxTdG9yZSwgZSk7XG4gICAgICAgIG4uY3VycmVudFVzZXIgPSBlLCBcbiAgICAgICAgLy8gRmFpbHMgdGFza3Mgd2FpdGluZyBmb3IgcGVuZGluZyB3cml0ZXMgcmVxdWVzdGVkIGJ5IHByZXZpb3VzIHVzZXIuXG4gICAgICAgIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHQuRWMuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdC5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdC5yZWplY3QobmV3IFUocS5DQU5DRUxMRUQsIGUpKTtcbiAgICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9KSksIHQuRWMuY2xlYXIoKTtcbiAgICAgICAgfShuLCBcIid3YWl0Rm9yUGVuZGluZ1dyaXRlcycgcHJvbWlzZSBpcyByZWplY3RlZCBkdWUgdG8gYSB1c2VyIGNoYW5nZS5cIiksIFxuICAgICAgICAvLyBUT0RPKGIvMTE0MjI2NDE3KTogQ29uc2lkZXIgY2FsbGluZyB0aGlzIG9ubHkgaW4gdGhlIHByaW1hcnkgdGFiLlxuICAgICAgICBuLnNoYXJlZENsaWVudFN0YXRlLmhhbmRsZVVzZXJDaGFuZ2UoZSwgdC5yZW1vdmVkQmF0Y2hJZHMsIHQuYWRkZWRCYXRjaElkcyksIGF3YWl0IHVhKG4sIHQuZXIpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gYWEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gbi55Yy5nZXQoZSk7XG4gICAgaWYgKHMgJiYgcy5mYykgcmV0dXJuIGdzKCkuYWRkKHMua2V5KTtcbiAgICB7XG4gICAgICAgIGxldCB0ID0gZ3MoKTtcbiAgICAgICAgY29uc3QgcyA9IG4uX2MuZ2V0KGUpO1xuICAgICAgICBpZiAoIXMpIHJldHVybiB0O1xuICAgICAgICBmb3IgKGNvbnN0IGUgb2Ygcykge1xuICAgICAgICAgICAgY29uc3QgcyA9IG4ud2MuZ2V0KGUpO1xuICAgICAgICAgICAgdCA9IHQudW5pb25XaXRoKHMudmlldy5uYyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIFJlY29uY2lsZSB0aGUgbGlzdCBvZiBzeW5jZWQgZG9jdW1lbnRzIGluIGFuIGV4aXN0aW5nIHZpZXcgd2l0aCB0aG9zZVxuICogZnJvbSBwZXJzaXN0ZW5jZS5cbiAqLyBhc3luYyBmdW5jdGlvbiBoYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IEwodCksIHMgPSBhd2FpdCBmdShuLmxvY2FsU3RvcmUsIGUucXVlcnksIFxuICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gZS52aWV3LmhjKHMpO1xuICAgIHJldHVybiBuLmlzUHJpbWFyeUNsaWVudCAmJiBpYShuLCBlLnRhcmdldElkLCBpLmNjKSwgaTtcbn1cblxuLyoqXG4gKiBSZXRyaWV2ZXMgbmV3bHkgY2hhbmdlZCBkb2N1bWVudHMgZnJvbSByZW1vdGUgZG9jdW1lbnQgY2FjaGUgYW5kIHJhaXNlc1xuICogc25hcHNob3RzIGlmIG5lZWRlZC5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGxhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICByZXR1cm4gd3Uobi5sb2NhbFN0b3JlLCBlKS50aGVuKCh0ID0+IHVhKG4sIHQpKSk7XG59XG5cbi8qKiBBcHBsaWVzIGEgbXV0YXRpb24gc3RhdGUgdG8gYW4gZXhpc3RpbmcgYmF0Y2guICAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGZhKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gTCh0KSwgciA9IGF3YWl0IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEwodCksIHMgPSBMKG4ubXV0YXRpb25RdWV1ZSk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiTG9va3VwIG11dGF0aW9uIGRvY3VtZW50c1wiLCBcInJlYWRvbmx5XCIsICh0ID0+IHMuU24odCwgZSkubmV4dCgoZSA9PiBlID8gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudHModCwgZSkgOiBSdC5yZXNvbHZlKG51bGwpKSkpKTtcbiAgICB9XG4gICAgLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbiAgICAoaS5sb2NhbFN0b3JlLCBlKTtcbiAgICBudWxsICE9PSByID8gKFwicGVuZGluZ1wiID09PSBuID8gXG4gICAgLy8gSWYgd2UgYXJlIHRoZSBwcmltYXJ5IGNsaWVudCwgd2UgbmVlZCB0byBzZW5kIHRoaXMgd3JpdGUgdG8gdGhlXG4gICAgLy8gYmFja2VuZC4gU2Vjb25kYXJ5IGNsaWVudHMgd2lsbCBpZ25vcmUgdGhlc2Ugd3JpdGVzIHNpbmNlIHRoZWlyIHJlbW90ZVxuICAgIC8vIGNvbm5lY3Rpb24gaXMgZGlzYWJsZWQuXG4gICAgYXdhaXQgY2MoaS5yZW1vdGVTdG9yZSkgOiBcImFja25vd2xlZGdlZFwiID09PSBuIHx8IFwicmVqZWN0ZWRcIiA9PT0gbiA/IChcbiAgICAvLyBOT1RFOiBCb3RoIHRoZXNlIG1ldGhvZHMgYXJlIG5vLW9wcyBmb3IgYmF0Y2hlcyB0aGF0IG9yaWdpbmF0ZWQgZnJvbVxuICAgIC8vIG90aGVyIGNsaWVudHMuXG4gICAgZWEoaSwgZSwgcyB8fCBudWxsKSwgdGEoaSwgZSksIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgTChMKHQpLm11dGF0aW9uUXVldWUpLkNuKGUpO1xuICAgIH1cbiAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgIChpLmxvY2FsU3RvcmUsIGUpKSA6IE8oKSwgYXdhaXQgdWEoaSwgcikpIDogXG4gICAgLy8gQSB0aHJvdHRsZWQgdGFiIG1heSBub3QgaGF2ZSBzZWVuIHRoZSBtdXRhdGlvbiBiZWZvcmUgaXQgd2FzIGNvbXBsZXRlZFxuICAgIC8vIGFuZCByZW1vdmVkIGZyb20gdGhlIG11dGF0aW9uIHF1ZXVlLCBpbiB3aGljaCBjYXNlIHdlIHdvbid0IGhhdmUgY2FjaGVkXG4gICAgLy8gdGhlIGFmZmVjdGVkIGRvY3VtZW50cy4gSW4gdGhpcyBjYXNlIHdlIGNhbiBzYWZlbHkgaWdub3JlIHRoZSB1cGRhdGVcbiAgICAvLyBzaW5jZSB0aGF0IG1lYW5zIHdlIGRpZG4ndCBhcHBseSB0aGUgbXV0YXRpb24gbG9jYWxseSBhdCBhbGwgKGlmIHdlXG4gICAgLy8gaGFkLCB3ZSB3b3VsZCBoYXZlIGNhY2hlZCB0aGUgYWZmZWN0ZWQgZG9jdW1lbnRzKSwgYW5kIHNvIHdlIHdpbGwganVzdFxuICAgIC8vIHNlZSBhbnkgcmVzdWx0aW5nIGRvY3VtZW50IGNoYW5nZXMgdmlhIG5vcm1hbCByZW1vdGUgZG9jdW1lbnQgdXBkYXRlc1xuICAgIC8vIGFzIGFwcGxpY2FibGUuXG4gICAgTihcIlN5bmNFbmdpbmVcIiwgXCJDYW5ub3QgYXBwbHkgbXV0YXRpb24gYmF0Y2ggd2l0aCBpZDogXCIgKyBlKTtcbn1cblxuLyoqIEFwcGxpZXMgYSBxdWVyeSB0YXJnZXQgY2hhbmdlIGZyb20gYSBkaWZmZXJlbnQgdGFiLiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmFzeW5jIGZ1bmN0aW9uIGRhKHQsIGUpIHtcbiAgICBjb25zdCBuID0gTCh0KTtcbiAgICBpZiAocGEobiksIElhKG4pLCAhMCA9PT0gZSAmJiAhMCAhPT0gbi52Yykge1xuICAgICAgICAvLyBTZWNvbmRhcnkgdGFicyBvbmx5IG1haW50YWluIFZpZXdzIGZvciB0aGVpciBsb2NhbCBsaXN0ZW5lcnMgYW5kIHRoZVxuICAgICAgICAvLyBWaWV3cyBpbnRlcm5hbCBzdGF0ZSBtYXkgbm90IGJlIDEwMCUgcG9wdWxhdGVkIChpbiBwYXJ0aWN1bGFyXG4gICAgICAgIC8vIHNlY29uZGFyeSB0YWJzIGRvbid0IHRyYWNrIHN5bmNlZERvY3VtZW50cywgdGhlIHNldCBvZiBkb2N1bWVudHMgdGhlXG4gICAgICAgIC8vIHNlcnZlciBjb25zaWRlcnMgdG8gYmUgaW4gdGhlIHRhcmdldCkuIFNvIHdoZW4gYSBzZWNvbmRhcnkgYmVjb21lc1xuICAgICAgICAvLyBwcmltYXJ5LCB3ZSBuZWVkIHRvIG5lZWQgdG8gbWFrZSBzdXJlIHRoYXQgYWxsIHZpZXdzIGZvciBhbGwgdGFyZ2V0c1xuICAgICAgICAvLyBtYXRjaCB0aGUgc3RhdGUgb24gZGlzay5cbiAgICAgICAgY29uc3QgdCA9IG4uc2hhcmVkQ2xpZW50U3RhdGUuZ2V0QWxsQWN0aXZlUXVlcnlUYXJnZXRzKCksIGUgPSBhd2FpdCB3YShuLCB0LnRvQXJyYXkoKSk7XG4gICAgICAgIG4udmMgPSAhMCwgYXdhaXQgeWMobi5yZW1vdGVTdG9yZSwgITApO1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkgSHUobi5yZW1vdGVTdG9yZSwgdCk7XG4gICAgfSBlbHNlIGlmICghMSA9PT0gZSAmJiAhMSAhPT0gbi52Yykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGxldCBlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgIG4uX2MuZm9yRWFjaCgoKHMsIGkpID0+IHtcbiAgICAgICAgICAgIG4uc2hhcmVkQ2xpZW50U3RhdGUuaXNMb2NhbFF1ZXJ5VGFyZ2V0KGkpID8gdC5wdXNoKGkpIDogZSA9IGUudGhlbigoKCkgPT4gKG5hKG4sIGkpLCBcbiAgICAgICAgICAgIGx1KG4ubG9jYWxTdG9yZSwgaSwgXG4gICAgICAgICAgICAvKmtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhPSovICEwKSkpKSwgSnUobi5yZW1vdGVTdG9yZSwgaSk7XG4gICAgICAgIH0pKSwgYXdhaXQgZSwgYXdhaXQgd2EobiwgdCksIFxuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gTCh0KTtcbiAgICAgICAgICAgIGUueWMuZm9yRWFjaCgoKHQsIG4pID0+IHtcbiAgICAgICAgICAgICAgICBKdShlLnJlbW90ZVN0b3JlLCBuKTtcbiAgICAgICAgICAgIH0pKSwgZS5JYy5UcygpLCBlLnljID0gbmV3IE1hcCwgZS5nYyA9IG5ldyBwZShodC5jb21wYXJhdG9yKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFJlY29uY2lsZSB0aGUgcXVlcnkgdmlld3Mgb2YgdGhlIHByb3ZpZGVkIHF1ZXJ5IHRhcmdldHMgd2l0aCB0aGUgc3RhdGUgZnJvbVxuICogcGVyc2lzdGVuY2UuIFJhaXNlcyBzbmFwc2hvdHMgZm9yIGFueSBjaGFuZ2VzIHRoYXQgYWZmZWN0IHRoZSBsb2NhbFxuICogY2xpZW50IGFuZCByZXR1cm5zIHRoZSB1cGRhdGVkIHN0YXRlIG9mIGFsbCB0YXJnZXQncyBxdWVyeSBkYXRhLlxuICpcbiAqIEBwYXJhbSBzeW5jRW5naW5lIC0gVGhlIHN5bmMgZW5naW5lIGltcGxlbWVudGF0aW9uXG4gKiBAcGFyYW0gdGFyZ2V0cyAtIHRoZSBsaXN0IG9mIHRhcmdldHMgd2l0aCB2aWV3cyB0aGF0IG5lZWQgdG8gYmUgcmVjb21wdXRlZFxuICogQHBhcmFtIHRyYW5zaXRpb25Ub1ByaW1hcnkgLSBgdHJ1ZWAgaWZmIHRoZSB0YWIgdHJhbnNpdGlvbnMgZnJvbSBhIHNlY29uZGFyeVxuICogdGFiIHRvIGEgcHJpbWFyeSB0YWJcbiAqL1xuICAgICAgICAvLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuICAgICAgICAobiksIG4udmMgPSAhMSwgYXdhaXQgeWMobi5yZW1vdGVTdG9yZSwgITEpO1xuICAgIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gd2EodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBMKHQpLCBpID0gW10sIHIgPSBbXTtcbiAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgY29uc3QgbiA9IHMuX2MuZ2V0KHQpO1xuICAgICAgICBpZiAobiAmJiAwICE9PSBuLmxlbmd0aCkge1xuICAgICAgICAgICAgLy8gRm9yIHF1ZXJpZXMgdGhhdCBoYXZlIGEgbG9jYWwgVmlldywgd2UgZmV0Y2ggdGhlaXIgY3VycmVudCBzdGF0ZVxuICAgICAgICAgICAgLy8gZnJvbSBMb2NhbFN0b3JlIChhcyB0aGUgcmVzdW1lIHRva2VuIGFuZCB0aGUgc25hcHNob3QgdmVyc2lvblxuICAgICAgICAgICAgLy8gbWlnaHQgaGF2ZSBjaGFuZ2VkKSBhbmQgcmVjb25jaWxlIHRoZWlyIHZpZXdzIHdpdGggdGhlIHBlcnNpc3RlZFxuICAgICAgICAgICAgLy8gc3RhdGUgKHRoZSBsaXN0IG9mIHN5bmNlZERvY3VtZW50cyBtYXkgaGF2ZSBnb3R0ZW4gb3V0IG9mIHN5bmMpLlxuICAgICAgICAgICAgZSA9IGF3YWl0IGh1KHMubG9jYWxTdG9yZSwgSm4oblswXSkpO1xuICAgICAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gcy53Yy5nZXQodCksIG4gPSBhd2FpdCBoYShzLCBlKTtcbiAgICAgICAgICAgICAgICBuLnNuYXBzaG90ICYmIHIucHVzaChuLnNuYXBzaG90KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEZvciBxdWVyaWVzIHRoYXQgbmV2ZXIgZXhlY3V0ZWQgb24gdGhpcyBjbGllbnQsIHdlIG5lZWQgdG9cbiAgICAgICAgICAgIC8vIGFsbG9jYXRlIHRoZSB0YXJnZXQgaW4gTG9jYWxTdG9yZSBhbmQgaW5pdGlhbGl6ZSBhIG5ldyBWaWV3LlxuICAgICAgICAgICAgY29uc3QgbiA9IGF3YWl0IGR1KHMubG9jYWxTdG9yZSwgdCk7XG4gICAgICAgICAgICBlID0gYXdhaXQgaHUocy5sb2NhbFN0b3JlLCBuKSwgYXdhaXQgUWMocywgX2EobiksIHQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCBlLnJlc3VtZVRva2VuKTtcbiAgICAgICAgfVxuICAgICAgICBpLnB1c2goZSk7XG4gICAgfVxuICAgIHJldHVybiBzLmRjLm51KHIpLCBpO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBgUXVlcnlgIG9iamVjdCBmcm9tIHRoZSBzcGVjaWZpZWQgYFRhcmdldGAuIFRoZXJlIGlzIG5vIHdheSB0b1xuICogb2J0YWluIHRoZSBvcmlnaW5hbCBgUXVlcnlgLCBzbyB3ZSBzeW50aGVzaXplIGEgYFF1ZXJ5YCBmcm9tIHRoZSBgVGFyZ2V0YFxuICogb2JqZWN0LlxuICpcbiAqIFRoZSBzeW50aGVzaXplZCByZXN1bHQgbWlnaHQgYmUgZGlmZmVyZW50IGZyb20gdGhlIG9yaWdpbmFsIGBRdWVyeWAsIGJ1dFxuICogc2luY2UgdGhlIHN5bnRoZXNpemVkIGBRdWVyeWAgc2hvdWxkIHJldHVybiB0aGUgc2FtZSByZXN1bHRzIGFzIHRoZVxuICogb3JpZ2luYWwgb25lIChvbmx5IHRoZSBwcmVzZW50YXRpb24gb2YgcmVzdWx0cyBtaWdodCBkaWZmZXIpLCB0aGUgcG90ZW50aWFsXG4gKiBkaWZmZXJlbmNlIHdpbGwgbm90IGNhdXNlIGlzc3Vlcy5cbiAqL1xuLy8gUE9SVElORyBOT1RFOiBNdWx0aS1UYWIgb25seS5cbmZ1bmN0aW9uIF9hKHQpIHtcbiAgICByZXR1cm4gS24odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5vcmRlckJ5LCB0LmZpbHRlcnMsIHQubGltaXQsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyAsIHQuc3RhcnRBdCwgdC5lbmRBdCk7XG59XG5cbi8qKiBSZXR1cm5zIHRoZSBJRHMgb2YgdGhlIGNsaWVudHMgdGhhdCBhcmUgY3VycmVudGx5IGFjdGl2ZS4gKi9cbi8vIFBPUlRJTkcgTk9URTogTXVsdGktVGFiIG9ubHkuXG5mdW5jdGlvbiBtYSh0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgcmV0dXJuIEwoTChlLmxvY2FsU3RvcmUpLnBlcnNpc3RlbmNlKS4kaSgpO1xufVxuXG4vKiogQXBwbGllcyBhIHF1ZXJ5IHRhcmdldCBjaGFuZ2UgZnJvbSBhIGRpZmZlcmVudCB0YWIuICovXG4vLyBQT1JUSU5HIE5PVEU6IE11bHRpLVRhYiBvbmx5LlxuYXN5bmMgZnVuY3Rpb24gZ2EodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBMKHQpO1xuICAgIGlmIChpLnZjKSBcbiAgICAvLyBJZiB3ZSByZWNlaXZlIGEgdGFyZ2V0IHN0YXRlIG5vdGlmaWNhdGlvbiB2aWEgV2ViU3RvcmFnZSwgd2UgYXJlXG4gICAgLy8gZWl0aGVyIGFscmVhZHkgc2Vjb25kYXJ5IG9yIGFub3RoZXIgdGFiIGhhcyB0YWtlbiB0aGUgcHJpbWFyeSBsZWFzZS5cbiAgICByZXR1cm4gdm9pZCBOKFwiU3luY0VuZ2luZVwiLCBcIklnbm9yaW5nIHVuZXhwZWN0ZWQgcXVlcnkgc3RhdGUgbm90aWZpY2F0aW9uLlwiKTtcbiAgICBjb25zdCByID0gaS5fYy5nZXQoZSk7XG4gICAgaWYgKHIgJiYgci5sZW5ndGggPiAwKSBzd2l0Y2ggKG4pIHtcbiAgICAgIGNhc2UgXCJjdXJyZW50XCI6XG4gICAgICBjYXNlIFwibm90LWN1cnJlbnRcIjpcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgdCA9IGF3YWl0IHd1KGkubG9jYWxTdG9yZSwgc3MoclswXSkpLCBzID0gbWkuY3JlYXRlU3ludGhlc2l6ZWRSZW1vdGVFdmVudEZvckN1cnJlbnRDaGFuZ2UoZSwgXCJjdXJyZW50XCIgPT09IG4sIFZlLkVNUFRZX0JZVEVfU1RSSU5HKTtcbiAgICAgICAgICAgIGF3YWl0IHVhKGksIHQsIHMpO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cblxuICAgICAgY2FzZSBcInJlamVjdGVkXCI6XG4gICAgICAgIGF3YWl0IGx1KGkubG9jYWxTdG9yZSwgZSwgXG4gICAgICAgIC8qIGtlZXBQZXJzaXN0ZWRUYXJnZXREYXRhICovICEwKSwgbmEoaSwgZSwgcyk7XG4gICAgICAgIGJyZWFrO1xuXG4gICAgICBkZWZhdWx0OlxuICAgICAgICBPKCk7XG4gICAgfVxufVxuXG4vKiogQWRkcyBvciByZW1vdmVzIFdhdGNoIHRhcmdldHMgZm9yIHF1ZXJpZXMgZnJvbSBkaWZmZXJlbnQgdGFicy4gKi8gYXN5bmMgZnVuY3Rpb24geWEodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBwYSh0KTtcbiAgICBpZiAocy52Yykge1xuICAgICAgICBmb3IgKGNvbnN0IHQgb2YgZSkge1xuICAgICAgICAgICAgaWYgKHMuX2MuaGFzKHQpKSB7XG4gICAgICAgICAgICAgICAgLy8gQSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuIGFkZGVkIGluIGEgcHJldmlvdXMgYXR0ZW1wdFxuICAgICAgICAgICAgICAgIE4oXCJTeW5jRW5naW5lXCIsIFwiQWRkaW5nIGFuIGFscmVhZHkgYWN0aXZlIHRhcmdldCBcIiArIHQpO1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgZSA9IGF3YWl0IGR1KHMubG9jYWxTdG9yZSwgdCksIG4gPSBhd2FpdCBodShzLmxvY2FsU3RvcmUsIGUpO1xuICAgICAgICAgICAgYXdhaXQgUWMocywgX2EoZSksIG4udGFyZ2V0SWQsIFxuICAgICAgICAgICAgLypjdXJyZW50PSovICExLCBuLnJlc3VtZVRva2VuKSwgSHUocy5yZW1vdGVTdG9yZSwgbik7XG4gICAgICAgIH1cbiAgICAgICAgZm9yIChjb25zdCB0IG9mIG4pIFxuICAgICAgICAvLyBDaGVjayB0aGF0IHRoZSB0YXJnZXQgaXMgc3RpbGwgYWN0aXZlIHNpbmNlIHRoZSB0YXJnZXQgbWlnaHQgaGF2ZSBiZWVuXG4gICAgICAgIC8vIHJlbW92ZWQgaWYgaXQgaGFzIGJlZW4gcmVqZWN0ZWQgYnkgdGhlIGJhY2tlbmQuXG4gICAgICAgIHMuX2MuaGFzKHQpICYmIFxuICAgICAgICAvLyBSZWxlYXNlIHF1ZXJpZXMgdGhhdCBhcmUgc3RpbGwgYWN0aXZlLlxuICAgICAgICBhd2FpdCBsdShzLmxvY2FsU3RvcmUsIHQsIFxuICAgICAgICAvKiBrZWVwUGVyc2lzdGVkVGFyZ2V0RGF0YSAqLyAhMSkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgSnUocy5yZW1vdGVTdG9yZSwgdCksIG5hKHMsIHQpO1xuICAgICAgICB9KSkuY2F0Y2godnQpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcGEodCkge1xuICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgIHJldHVybiBlLnJlbW90ZVN0b3JlLnJlbW90ZVN5bmNlci5hcHBseVJlbW90ZUV2ZW50ID0gV2MuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIuZ2V0UmVtb3RlS2V5c0ZvclRhcmdldCA9IGFhLmJpbmQobnVsbCwgZSksIFxuICAgIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLnJlamVjdExpc3RlbiA9IEpjLmJpbmQobnVsbCwgZSksIGUuZGMubnUgPSBEYy5iaW5kKG51bGwsIGUuZXZlbnRNYW5hZ2VyKSwgXG4gICAgZS5kYy5QYyA9IENjLmJpbmQobnVsbCwgZS5ldmVudE1hbmFnZXIpLCBlO1xufVxuXG5mdW5jdGlvbiBJYSh0KSB7XG4gICAgY29uc3QgZSA9IEwodCk7XG4gICAgcmV0dXJuIGUucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmFwcGx5U3VjY2Vzc2Z1bFdyaXRlID0gWWMuYmluZChudWxsLCBlKSwgZS5yZW1vdGVTdG9yZS5yZW1vdGVTeW5jZXIucmVqZWN0RmFpbGVkV3JpdGUgPSBYYy5iaW5kKG51bGwsIGUpLCBcbiAgICBlO1xufVxuXG4vKipcbiAqIExvYWRzIGEgRmlyZXN0b3JlIGJ1bmRsZSBpbnRvIHRoZSBTREsuIFRoZSByZXR1cm5lZCBwcm9taXNlIHJlc29sdmVzIHdoZW5cbiAqIHRoZSBidW5kbGUgZmluaXNoZWQgbG9hZGluZy5cbiAqXG4gKiBAcGFyYW0gc3luY0VuZ2luZSAtIFN5bmNFbmdpbmUgdG8gdXNlLlxuICogQHBhcmFtIGJ1bmRsZVJlYWRlciAtIEJ1bmRsZSB0byBsb2FkIGludG8gdGhlIFNESy5cbiAqIEBwYXJhbSB0YXNrIC0gTG9hZEJ1bmRsZVRhc2sgdXNlZCB0byB1cGRhdGUgdGhlIGxvYWRpbmcgcHJvZ3Jlc3MgdG8gcHVibGljIEFQSS5cbiAqLyBmdW5jdGlvbiBUYSh0LCBlLCBuKSB7XG4gICAgY29uc3QgcyA9IEwodCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICAoXG4gICAgLyoqIExvYWRzIGEgYnVuZGxlIGFuZCByZXR1cm5zIHRoZSBsaXN0IG9mIGFmZmVjdGVkIGNvbGxlY3Rpb24gZ3JvdXBzLiAqL1xuICAgIGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBlLmdldE1ldGFkYXRhKCk7XG4gICAgICAgICAgICBpZiAoYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gTmkoZS5jcmVhdGVUaW1lKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gbi5wZXJzaXN0ZW5jZS5ydW5UcmFuc2FjdGlvbihcImhhc05ld2VyQnVuZGxlXCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5xcy5nZXRCdW5kbGVNZXRhZGF0YSh0LCBlLmlkKSkpLnRoZW4oKHQgPT4gISF0ICYmIHQuY3JlYXRlVGltZS5jb21wYXJlVG8ocykgPj0gMCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLyoqXG4gKiBTYXZlcyB0aGUgZ2l2ZW4gYEJ1bmRsZU1ldGFkYXRhYCB0byBsb2NhbCBwZXJzaXN0ZW5jZS5cbiAqLyAodC5sb2NhbFN0b3JlLCBzKSkgcmV0dXJuIGF3YWl0IGUuY2xvc2UoKSwgbi5fY29tcGxldGVXaXRoKGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0YXNrU3RhdGU6IFwiU3VjY2Vzc1wiLFxuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IHQudG90YWxEb2N1bWVudHMsXG4gICAgICAgICAgICAgICAgICAgIGJ5dGVzTG9hZGVkOiB0LnRvdGFsQnl0ZXMsXG4gICAgICAgICAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiB0LnRvdGFsRG9jdW1lbnRzLFxuICAgICAgICAgICAgICAgICAgICB0b3RhbEJ5dGVzOiB0LnRvdGFsQnl0ZXNcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfShzKSksIFByb21pc2UucmVzb2x2ZShuZXcgU2V0KTtcbiAgICAgICAgICAgIG4uX3VwZGF0ZVByb2dyZXNzKE9jKHMpKTtcbiAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgJGMocywgdC5sb2NhbFN0b3JlLCBlLnNlcmlhbGl6ZXIpO1xuICAgICAgICAgICAgbGV0IHIgPSBhd2FpdCBlLmJjKCk7XG4gICAgICAgICAgICBmb3IgKDtyOyApIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gYXdhaXQgaS56dShyKTtcbiAgICAgICAgICAgICAgICB0ICYmIG4uX3VwZGF0ZVByb2dyZXNzKHQpLCByID0gYXdhaXQgZS5iYygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgbyA9IGF3YWl0IGkuY29tcGxldGUoKTtcbiAgICAgICAgICAgIHJldHVybiBhd2FpdCB1YSh0LCBvLkp1LCBcbiAgICAgICAgICAgIC8qIHJlbW90ZUV2ZW50ICovIHZvaWQgMCksIFxuICAgICAgICAgICAgLy8gU2F2ZSBtZXRhZGF0YSwgc28gbG9hZGluZyB0aGUgc2FtZSBidW5kbGUgd2lsbCBza2lwLlxuICAgICAgICAgICAgYXdhaXQgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpO1xuICAgICAgICAgICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiU2F2ZSBidW5kbGVcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gbi5xcy5zYXZlQnVuZGxlTWV0YWRhdGEodCwgZSkpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogUmV0dXJucyBhIHByb21pc2Ugb2YgYSBgTmFtZWRRdWVyeWAgYXNzb2NpYXRlZCB3aXRoIGdpdmVuIHF1ZXJ5IG5hbWUuIFByb21pc2VcbiAqIHJlc29sdmVzIHRvIHVuZGVmaW5lZCBpZiBubyBwZXJzaXN0ZWQgZGF0YSBjYW4gYmUgZm91bmQuXG4gKi8gKHQubG9jYWxTdG9yZSwgcyksIG4uX2NvbXBsZXRlV2l0aChvLnByb2dyZXNzKSwgUHJvbWlzZS5yZXNvbHZlKG8uSHUpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICByZXR1cm4gTShcIlN5bmNFbmdpbmVcIiwgYExvYWRpbmcgYnVuZGxlIGZhaWxlZCB3aXRoICR7dH1gKSwgbi5fZmFpbFdpdGgodCksIFByb21pc2UucmVzb2x2ZShuZXcgU2V0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogUHJvdmlkZXMgYWxsIGNvbXBvbmVudHMgbmVlZGVkIGZvciBGaXJlc3RvcmUgd2l0aCBpbi1tZW1vcnkgcGVyc2lzdGVuY2UuXG4gKiBVc2VzIEVhZ2VyR0MgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICovKShzLCBlLCBuKS50aGVuKCh0ID0+IHtcbiAgICAgICAgcy5zaGFyZWRDbGllbnRTdGF0ZS5ub3RpZnlCdW5kbGVMb2FkZWQodCk7XG4gICAgfSkpO1xufVxuXG5jbGFzcyBFYSB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICB0aGlzLnNlcmlhbGl6ZXIgPSBGdSh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZSA9IHRoaXMuY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUodCksIFxuICAgICAgICB0aGlzLnBlcnNpc3RlbmNlID0gdGhpcy5jcmVhdGVQZXJzaXN0ZW5jZSh0KSwgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zdGFydCgpLCB0aGlzLmxvY2FsU3RvcmUgPSB0aGlzLmNyZWF0ZUxvY2FsU3RvcmUodCksIFxuICAgICAgICB0aGlzLmdjU2NoZWR1bGVyID0gdGhpcy5jcmVhdGVHYXJiYWdlQ29sbGVjdGlvblNjaGVkdWxlcih0LCB0aGlzLmxvY2FsU3RvcmUpLCB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciA9IHRoaXMuY3JlYXRlSW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyKHQsIHRoaXMubG9jYWxTdG9yZSk7XG4gICAgfVxuICAgIGNyZWF0ZUdhcmJhZ2VDb2xsZWN0aW9uU2NoZWR1bGVyKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcih0LCBlKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjcmVhdGVMb2NhbFN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIHN1KHRoaXMucGVyc2lzdGVuY2UsIG5ldyBldSwgdC5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UodCkge1xuICAgICAgICByZXR1cm4gbmV3IEtvKFFvLnpzLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYnU7XG4gICAgfVxuICAgIGFzeW5jIHRlcm1pbmF0ZSgpIHtcbiAgICAgICAgdGhpcy5nY1NjaGVkdWxlciAmJiB0aGlzLmdjU2NoZWR1bGVyLnN0b3AoKSwgYXdhaXQgdGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zaHV0ZG93bigpLCBcbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5zaHV0ZG93bigpO1xuICAgIH1cbn1cblxuY2xhc3MgQWEgZXh0ZW5kcyBFYSB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gdDtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIodCwgZSkge1xuICAgICAgICBGKHRoaXMucGVyc2lzdGVuY2UucmVmZXJlbmNlRGVsZWdhdGUgaW5zdGFuY2VvZiBqbyk7XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnBlcnNpc3RlbmNlLnJlZmVyZW5jZURlbGVnYXRlLmdhcmJhZ2VDb2xsZWN0b3I7XG4gICAgICAgIHJldHVybiBuZXcgcG8obiwgdC5hc3luY1F1ZXVlLCBlKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gc28ud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IHNvLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgS28oKHQgPT4gam8uenModCwgZSkpLCB0aGlzLnNlcmlhbGl6ZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBQcm92aWRlcyBhbGwgY29tcG9uZW50cyBuZWVkZWQgZm9yIEZpcmVzdG9yZSB3aXRoIEluZGV4ZWREQiBwZXJzaXN0ZW5jZS5cbiAqLyBjbGFzcyB2YSBleHRlbmRzIEVhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuVmMgPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5mb3JjZU93bmVyc2hpcCA9IG4sIHRoaXMuc3luY2hyb25pemVUYWJzID0gITE7XG4gICAgfVxuICAgIGFzeW5jIGluaXRpYWxpemUodCkge1xuICAgICAgICBhd2FpdCBzdXBlci5pbml0aWFsaXplKHQpLCBhd2FpdCB0aGlzLlZjLmluaXRpYWxpemUodGhpcywgdCksIFxuICAgICAgICAvLyBFbnF1ZXVlIHdyaXRlcyBmcm9tIGEgcHJldmlvdXMgc2Vzc2lvblxuICAgICAgICBhd2FpdCBJYSh0aGlzLlZjLnN5bmNFbmdpbmUpLCBhd2FpdCBjYyh0aGlzLlZjLnJlbW90ZVN0b3JlKSwgXG4gICAgICAgIC8vIE5PVEU6IFRoaXMgd2lsbCBpbW1lZGlhdGVseSBjYWxsIHRoZSBsaXN0ZW5lciwgc28gd2UgbWFrZSBzdXJlIHRvXG4gICAgICAgIC8vIHNldCBpdCBhZnRlciBsb2NhbFN0b3JlIC8gcmVtb3RlU3RvcmUgYXJlIHN0YXJ0ZWQuXG4gICAgICAgIGF3YWl0IHRoaXMucGVyc2lzdGVuY2UuSWkoKCgpID0+ICh0aGlzLmdjU2NoZWR1bGVyICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5nY1NjaGVkdWxlci5zdGFydCgpLCBcbiAgICAgICAgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIgJiYgIXRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0ZWQgJiYgdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnQoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpO1xuICAgIH1cbiAgICBjcmVhdGVMb2NhbFN0b3JlKHQpIHtcbiAgICAgICAgcmV0dXJuIHN1KHRoaXMucGVyc2lzdGVuY2UsIG5ldyBldSwgdC5pbml0aWFsVXNlciwgdGhpcy5zZXJpYWxpemVyKTtcbiAgICB9XG4gICAgY3JlYXRlR2FyYmFnZUNvbGxlY3Rpb25TY2hlZHVsZXIodCwgZSkge1xuICAgICAgICBjb25zdCBuID0gdGhpcy5wZXJzaXN0ZW5jZS5yZWZlcmVuY2VEZWxlZ2F0ZS5nYXJiYWdlQ29sbGVjdG9yO1xuICAgICAgICByZXR1cm4gbmV3IHBvKG4sIHQuYXN5bmNRdWV1ZSwgZSk7XG4gICAgfVxuICAgIGNyZWF0ZUluZGV4QmFja2ZpbGxlclNjaGVkdWxlcih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgJHQoZSwgdGhpcy5wZXJzaXN0ZW5jZSk7XG4gICAgICAgIHJldHVybiBuZXcgTXQodC5hc3luY1F1ZXVlLCBuKTtcbiAgICB9XG4gICAgY3JlYXRlUGVyc2lzdGVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gWm8odC5kYXRhYmFzZUluZm8uZGF0YWJhc2VJZCwgdC5kYXRhYmFzZUluZm8ucGVyc2lzdGVuY2VLZXkpLCBuID0gdm9pZCAwICE9PSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID8gc28ud2l0aENhY2hlU2l6ZSh0aGlzLmNhY2hlU2l6ZUJ5dGVzKSA6IHNvLkRFRkFVTFQ7XG4gICAgICAgIHJldHVybiBuZXcgSm8odGhpcy5zeW5jaHJvbml6ZVRhYnMsIGUsIHQuY2xpZW50SWQsIG4sIHQuYXN5bmNRdWV1ZSwgJHUoKSwgT3UoKSwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLCAhIXRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbiAgICBjcmVhdGVTaGFyZWRDbGllbnRTdGF0ZSh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYnU7XG4gICAgfVxufVxuXG4vKipcbiAqIFByb3ZpZGVzIGFsbCBjb21wb25lbnRzIG5lZWRlZCBmb3IgRmlyZXN0b3JlIHdpdGggbXVsdGktdGFiIEluZGV4ZWREQlxuICogcGVyc2lzdGVuY2UuXG4gKlxuICogSW4gdGhlIGxlZ2FjeSBjbGllbnQsIHRoaXMgcHJvdmlkZXIgaXMgdXNlZCB0byBwcm92aWRlIGJvdGggbXVsdGktdGFiIGFuZFxuICogbm9uLW11bHRpLXRhYiBwZXJzaXN0ZW5jZSBzaW5jZSB3ZSBjYW5ub3QgdGVsbCBhdCBidWlsZCB0aW1lIHdoZXRoZXJcbiAqIGBzeW5jaHJvbml6ZVRhYnNgIHdpbGwgYmUgZW5hYmxlZC5cbiAqLyBjbGFzcyBSYSBleHRlbmRzIHZhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIC8qIGZvcmNlT3duZXJzaGlwPSAqLyAhMSksIHRoaXMuVmMgPSB0LCB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gZSwgdGhpcy5zeW5jaHJvbml6ZVRhYnMgPSAhMDtcbiAgICB9XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIGF3YWl0IHN1cGVyLmluaXRpYWxpemUodCk7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLlZjLnN5bmNFbmdpbmU7XG4gICAgICAgIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUgaW5zdGFuY2VvZiBQdSAmJiAodGhpcy5zaGFyZWRDbGllbnRTdGF0ZS5zeW5jRW5naW5lID0ge1xuICAgICAgICAgICAganI6IGZhLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICB6cjogZ2EuYmluZChudWxsLCBlKSxcbiAgICAgICAgICAgIFdyOiB5YS5iaW5kKG51bGwsIGUpLFxuICAgICAgICAgICAgJGk6IG1hLmJpbmQobnVsbCwgZSksXG4gICAgICAgICAgICBRcjogbGEuYmluZChudWxsLCBlKVxuICAgICAgICB9LCBhd2FpdCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLnN0YXJ0KCkpLCBcbiAgICAgICAgLy8gTk9URTogVGhpcyB3aWxsIGltbWVkaWF0ZWx5IGNhbGwgdGhlIGxpc3RlbmVyLCBzbyB3ZSBtYWtlIHN1cmUgdG9cbiAgICAgICAgLy8gc2V0IGl0IGFmdGVyIGxvY2FsU3RvcmUgLyByZW1vdGVTdG9yZSBhcmUgc3RhcnRlZC5cbiAgICAgICAgYXdhaXQgdGhpcy5wZXJzaXN0ZW5jZS5JaSgoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBhd2FpdCBkYSh0aGlzLlZjLnN5bmNFbmdpbmUsIHQpLCB0aGlzLmdjU2NoZWR1bGVyICYmICh0ICYmICF0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0ZWQgPyB0aGlzLmdjU2NoZWR1bGVyLnN0YXJ0KCkgOiB0IHx8IHRoaXMuZ2NTY2hlZHVsZXIuc3RvcCgpKSwgXG4gICAgICAgICAgICB0aGlzLmluZGV4QmFja2ZpbGxlclNjaGVkdWxlciAmJiAodCAmJiAhdGhpcy5pbmRleEJhY2tmaWxsZXJTY2hlZHVsZXIuc3RhcnRlZCA/IHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0YXJ0KCkgOiB0IHx8IHRoaXMuaW5kZXhCYWNrZmlsbGVyU2NoZWR1bGVyLnN0b3AoKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgY3JlYXRlU2hhcmVkQ2xpZW50U3RhdGUodCkge1xuICAgICAgICBjb25zdCBlID0gJHUoKTtcbiAgICAgICAgaWYgKCFQdS5EKGUpKSB0aHJvdyBuZXcgVShxLlVOSU1QTEVNRU5URUQsIFwiSW5kZXhlZERCIHBlcnNpc3RlbmNlIGlzIG9ubHkgYXZhaWxhYmxlIG9uIHBsYXRmb3JtcyB0aGF0IHN1cHBvcnQgTG9jYWxTdG9yYWdlLlwiKTtcbiAgICAgICAgY29uc3QgbiA9IFpvKHQuZGF0YWJhc2VJbmZvLmRhdGFiYXNlSWQsIHQuZGF0YWJhc2VJbmZvLnBlcnNpc3RlbmNlS2V5KTtcbiAgICAgICAgcmV0dXJuIG5ldyBQdShlLCB0LmFzeW5jUXVldWUsIG4sIHQuY2xpZW50SWQsIHQuaW5pdGlhbFVzZXIpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhbmQgd2lyZXMgdGhlIGNvbXBvbmVudHMgdGhhdCBhcmUgbmVlZGVkIHRvIGludGVyZmFjZSB3aXRoIHRoZVxuICogbmV0d29yay5cbiAqLyBjbGFzcyBQYSB7XG4gICAgYXN5bmMgaW5pdGlhbGl6ZSh0LCBlKSB7XG4gICAgICAgIHRoaXMubG9jYWxTdG9yZSB8fCAodGhpcy5sb2NhbFN0b3JlID0gdC5sb2NhbFN0b3JlLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlID0gdC5zaGFyZWRDbGllbnRTdGF0ZSwgXG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdGhpcy5jcmVhdGVEYXRhc3RvcmUoZSksIHRoaXMucmVtb3RlU3RvcmUgPSB0aGlzLmNyZWF0ZVJlbW90ZVN0b3JlKGUpLCBcbiAgICAgICAgdGhpcy5ldmVudE1hbmFnZXIgPSB0aGlzLmNyZWF0ZUV2ZW50TWFuYWdlcihlKSwgdGhpcy5zeW5jRW5naW5lID0gdGhpcy5jcmVhdGVTeW5jRW5naW5lKGUsIFxuICAgICAgICAvKiBzdGFydEFzUHJpbWFyeT0qLyAhdC5zeW5jaHJvbml6ZVRhYnMpLCB0aGlzLnNoYXJlZENsaWVudFN0YXRlLm9ubGluZVN0YXRlSGFuZGxlciA9IHQgPT4gSGModGhpcy5zeW5jRW5naW5lLCB0LCAxIC8qIE9ubGluZVN0YXRlU291cmNlLlNoYXJlZENsaWVudFN0YXRlICovKSwgXG4gICAgICAgIHRoaXMucmVtb3RlU3RvcmUucmVtb3RlU3luY2VyLmhhbmRsZUNyZWRlbnRpYWxDaGFuZ2UgPSBjYS5iaW5kKG51bGwsIHRoaXMuc3luY0VuZ2luZSksIFxuICAgICAgICBhd2FpdCB5Yyh0aGlzLnJlbW90ZVN0b3JlLCB0aGlzLnN5bmNFbmdpbmUuaXNQcmltYXJ5Q2xpZW50KSk7XG4gICAgfVxuICAgIGNyZWF0ZUV2ZW50TWFuYWdlcih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgYmM7XG4gICAgfVxuICAgIGNyZWF0ZURhdGFzdG9yZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBGdSh0LmRhdGFiYXNlSW5mby5kYXRhYmFzZUlkKSwgbiA9IChzID0gdC5kYXRhYmFzZUluZm8sIG5ldyBNdShzKSk7XG4gICAgICAgIHZhciBzO1xuICAgICAgICAvKiogUmV0dXJuIHRoZSBQbGF0Zm9ybS1zcGVjaWZpYyBjb25uZWN0aXZpdHkgbW9uaXRvci4gKi8gICAgICAgIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IEt1KHQsIGUsIG4sIHMpO1xuICAgICAgICB9KHQuYXV0aENyZWRlbnRpYWxzLCB0LmFwcENoZWNrQ3JlZGVudGlhbHMsIG4sIGUpO1xuICAgIH1cbiAgICBjcmVhdGVSZW1vdGVTdG9yZSh0KSB7XG4gICAgICAgIHJldHVybiBlID0gdGhpcy5sb2NhbFN0b3JlLCBuID0gdGhpcy5kYXRhc3RvcmUsIHMgPSB0LmFzeW5jUXVldWUsIGkgPSB0ID0+IEhjKHRoaXMuc3luY0VuZ2luZSwgdCwgMCAvKiBPbmxpbmVTdGF0ZVNvdXJjZS5SZW1vdGVTdG9yZSAqLyksIFxuICAgICAgICByID0gU3UuRCgpID8gbmV3IFN1IDogbmV3IFZ1LCBuZXcganUoZSwgbiwgcywgaSwgcik7XG4gICAgICAgIHZhciBlLCBuLCBzLCBpLCByO1xuICAgICAgICAvKiogUmUtZW5hYmxlcyB0aGUgbmV0d29yay4gSWRlbXBvdGVudC4gKi8gICAgfVxuICAgIGNyZWF0ZVN5bmNFbmdpbmUodCwgZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgXG4gICAgICAgIC8vIFBPUlRJTkcgTk9URTogTWFuYWdlcyBzdGF0ZSBzeW5jaHJvbml6YXRpb24gaW4gbXVsdGktdGFiIGVudmlyb25tZW50cy5cbiAgICAgICAgcywgaSwgciwgbykge1xuICAgICAgICAgICAgY29uc3QgdSA9IG5ldyBLYyh0LCBlLCBuLCBzLCBpLCByKTtcbiAgICAgICAgICAgIHJldHVybiBvICYmICh1LnZjID0gITApLCB1O1xuICAgICAgICB9KHRoaXMubG9jYWxTdG9yZSwgdGhpcy5yZW1vdGVTdG9yZSwgdGhpcy5ldmVudE1hbmFnZXIsIHRoaXMuc2hhcmVkQ2xpZW50U3RhdGUsIHQuaW5pdGlhbFVzZXIsIHQubWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnMsIGUpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHJldHVybiBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gTCh0KTtcbiAgICAgICAgICAgIE4oXCJSZW1vdGVTdG9yZVwiLCBcIlJlbW90ZVN0b3JlIHNodXR0aW5nIGRvd24uXCIpLCBlLnZ1LmFkZCg1IC8qIE9mZmxpbmVDYXVzZS5TaHV0ZG93biAqLyksIFxuICAgICAgICAgICAgYXdhaXQgV3UoZSksIGUuUHUuc2h1dGRvd24oKSwgXG4gICAgICAgICAgICAvLyBTZXQgdGhlIE9ubGluZVN0YXRlIHRvIFVua25vd24gKHJhdGhlciB0aGFuIE9mZmxpbmUpIHRvIGF2b2lkIHBvdGVudGlhbGx5XG4gICAgICAgICAgICAvLyB0cmlnZ2VyaW5nIHNwdXJpb3VzIGxpc3RlbmVyIGV2ZW50cyB3aXRoIGNhY2hlZCBkYXRhLCBldGMuXG4gICAgICAgICAgICBlLmJ1LnNldChcIlVua25vd25cIiAvKiBPbmxpbmVTdGF0ZS5Vbmtub3duICovKTtcbiAgICAgICAgfSh0aGlzLnJlbW90ZVN0b3JlKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEhvdyBtYW55IGJ5dGVzIHRvIHJlYWQgZWFjaCB0aW1lIHdoZW4gYFJlYWRhYmxlU3RyZWFtUmVhZGVyLnJlYWQoKWAgaXNcbiAqIGNhbGxlZC4gT25seSBhcHBsaWNhYmxlIGZvciBieXRlIHN0cmVhbXMgdGhhdCB3ZSBjb250cm9sIChlLmcuIHRob3NlIGJhY2tlZFxuICogYnkgYW4gVUludDhBcnJheSkuXG4gKi9cbi8qKlxuICogQnVpbGRzIGEgYEJ5dGVTdHJlYW1SZWFkZXJgIGZyb20gYSBVSW50OEFycmF5LlxuICogQHBhcmFtIHNvdXJjZSAtIFRoZSBkYXRhIHNvdXJjZSB0byB1c2UuXG4gKiBAcGFyYW0gYnl0ZXNQZXJSZWFkIC0gSG93IG1hbnkgYnl0ZXMgZWFjaCBgcmVhZCgpYCBmcm9tIHRoZSByZXR1cm5lZCByZWFkZXJcbiAqICAgICAgICB3aWxsIHJlYWQuXG4gKi9cbmZ1bmN0aW9uIGJhKHQsIGUgPSAxMDI0MCkge1xuICAgIGxldCBuID0gMDtcbiAgICAvLyBUaGUgVHlwZVNjcmlwdCBkZWZpbml0aW9uIGZvciBSZWFkYWJsZVN0cmVhbVJlYWRlciBjaGFuZ2VkLiBXZSB1c2VcbiAgICAvLyBgYW55YCBoZXJlIHRvIGFsbG93IHRoaXMgY29kZSB0byBjb21waWxlIHdpdGggZGlmZmVyZW50IHZlcnNpb25zLlxuICAgIC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQvaXNzdWVzLzQyOTcwXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXN5bmMgcmVhZCgpIHtcbiAgICAgICAgICAgIGlmIChuIDwgdC5ieXRlTGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHQuc2xpY2UobiwgbiArIGUpLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiAhMVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4gKz0gZSwgcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgZG9uZTogITBcbiAgICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICAgIGFzeW5jIGNhbmNlbCgpIHt9LFxuICAgICAgICByZWxlYXNlTG9jaygpIHt9LFxuICAgICAgICBjbG9zZWQ6IFByb21pc2UucmVzb2x2ZSgpXG4gICAgfTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogT24gd2ViLCBhIGBSZWFkYWJsZVN0cmVhbWAgaXMgd3JhcHBlZCBhcm91bmQgYnkgYSBgQnl0ZVN0cmVhbVJlYWRlcmAuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKlxuICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIE9ic2VydmVyPFQ+IHRoYXQgd2lsbCBkaXNwYXRjaCBldmVudHNcbiAqIGFzeW5jaHJvbm91c2x5LiBUbyBhbGxvdyBpbW1lZGlhdGUgc2lsZW5jaW5nLCBhIG11dGUgY2FsbCBpcyBhZGRlZCB3aGljaFxuICogY2F1c2VzIGV2ZW50cyBzY2hlZHVsZWQgdG8gbm8gbG9uZ2VyIGJlIHJhaXNlZC5cbiAqL1xuY2xhc3MgVmEge1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlciA9IHQsIFxuICAgICAgICAvKipcbiAgICAgICAgICogV2hlbiBzZXQgdG8gdHJ1ZSwgd2lsbCBub3QgcmFpc2UgZnV0dXJlIGV2ZW50cy4gTmVjZXNzYXJ5IHRvIGRlYWwgd2l0aFxuICAgICAgICAgKiBhc3luYyBkZXRhY2htZW50IG9mIGxpc3RlbmVyLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy5tdXRlZCA9ICExO1xuICAgIH1cbiAgICBuZXh0KHQpIHtcbiAgICAgICAgdGhpcy5vYnNlcnZlci5uZXh0ICYmIHRoaXMuU2ModGhpcy5vYnNlcnZlci5uZXh0LCB0KTtcbiAgICB9XG4gICAgZXJyb3IodCkge1xuICAgICAgICB0aGlzLm9ic2VydmVyLmVycm9yID8gdGhpcy5TYyh0aGlzLm9ic2VydmVyLmVycm9yLCB0KSA6IGsoXCJVbmNhdWdodCBFcnJvciBpbiBzbmFwc2hvdCBsaXN0ZW5lcjpcIiwgdC50b1N0cmluZygpKTtcbiAgICB9XG4gICAgRGMoKSB7XG4gICAgICAgIHRoaXMubXV0ZWQgPSAhMDtcbiAgICB9XG4gICAgU2ModCwgZSkge1xuICAgICAgICB0aGlzLm11dGVkIHx8IHNldFRpbWVvdXQoKCgpID0+IHtcbiAgICAgICAgICAgIHRoaXMubXV0ZWQgfHwgdChlKTtcbiAgICAgICAgfSksIDApO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBjbGFzcyByZXByZXNlbnRpbmcgYSBidW5kbGUuXG4gKlxuICogVGFrZXMgYSBidW5kbGUgc3RyZWFtIG9yIGJ1ZmZlciwgYW5kIHByZXNlbnRzIGFic3RyYWN0aW9ucyB0byByZWFkIGJ1bmRsZWRcbiAqIGVsZW1lbnRzIG91dCBvZiB0aGUgdW5kZXJseWluZyBjb250ZW50LlxuICovIGNsYXNzIFNhIHtcbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHJlYWRlciB0byByZWFkIGZyb20gdW5kZXJseWluZyBiaW5hcnkgYnVuZGxlIGRhdGEgc291cmNlLiAqL1xuICAgIHQsIGUpIHtcbiAgICAgICAgdGhpcy5DYyA9IHQsIHRoaXMuc2VyaWFsaXplciA9IGUsIFxuICAgICAgICAvKiogQ2FjaGVkIGJ1bmRsZSBtZXRhZGF0YS4gKi9cbiAgICAgICAgdGhpcy5tZXRhZGF0YSA9IG5ldyBLLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEludGVybmFsIGJ1ZmZlciB0byBob2xkIGJ1bmRsZSBjb250ZW50LCBhY2N1bXVsYXRpbmcgaW5jb21wbGV0ZSBlbGVtZW50XG4gICAgICAgICAqIGNvbnRlbnQuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IG5ldyBVaW50OEFycmF5LCB0aGlzLnhjID0gbmV3IFRleHREZWNvZGVyKFwidXRmLThcIiksIFxuICAgICAgICAvLyBSZWFkIHRoZSBtZXRhZGF0YSAod2hpY2ggaXMgdGhlIGZpcnN0IGVsZW1lbnQpLlxuICAgICAgICB0aGlzLk5jKCkudGhlbigodCA9PiB7XG4gICAgICAgICAgICB0ICYmIHQuUXUoKSA/IHRoaXMubWV0YWRhdGEucmVzb2x2ZSh0Lkd1Lm1ldGFkYXRhKSA6IHRoaXMubWV0YWRhdGEucmVqZWN0KG5ldyBFcnJvcihgVGhlIGZpcnN0IGVsZW1lbnQgb2YgdGhlIGJ1bmRsZSBpcyBub3QgYSBtZXRhZGF0YSwgaXQgaXNcXG4gICAgICAgICAgICAgJHtKU09OLnN0cmluZ2lmeShudWxsID09IHQgPyB2b2lkIDAgOiB0Lkd1KX1gKSk7XG4gICAgICAgIH0pLCAodCA9PiB0aGlzLm1ldGFkYXRhLnJlamVjdCh0KSkpO1xuICAgIH1cbiAgICBjbG9zZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuQ2MuY2FuY2VsKCk7XG4gICAgfVxuICAgIGFzeW5jIGdldE1ldGFkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YS5wcm9taXNlO1xuICAgIH1cbiAgICBhc3luYyBiYygpIHtcbiAgICAgICAgLy8gTWFrZXMgc3VyZSBtZXRhZGF0YSBpcyByZWFkIGJlZm9yZSBwcm9jZWVkaW5nLlxuICAgICAgICByZXR1cm4gYXdhaXQgdGhpcy5nZXRNZXRhZGF0YSgpLCB0aGlzLk5jKCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIGZyb20gdGhlIGhlYWQgb2YgaW50ZXJuYWwgYnVmZmVyLCBhbmQgcHVsbGluZyBtb3JlIGRhdGEgZnJvbVxuICAgICAqIHVuZGVybHlpbmcgc3RyZWFtIGlmIGEgY29tcGxldGUgZWxlbWVudCBjYW5ub3QgYmUgZm91bmQsIHVudGlsIGFuXG4gICAgICogZWxlbWVudChpbmNsdWRpbmcgdGhlIHByZWZpeGVkIGxlbmd0aCBhbmQgdGhlIEpTT04gc3RyaW5nKSBpcyBmb3VuZC5cbiAgICAgKlxuICAgICAqIE9uY2UgYSBjb21wbGV0ZSBlbGVtZW50IGlzIHJlYWQsIGl0IGlzIGRyb3BwZWQgZnJvbSBpbnRlcm5hbCBidWZmZXIuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGVpdGhlciB0aGUgYnVuZGxlZCBlbGVtZW50LCBvciBudWxsIGlmIHdlIGhhdmUgcmVhY2hlZCB0aGUgZW5kIG9mXG4gICAgICogdGhlIHN0cmVhbS5cbiAgICAgKi8gICAgYXN5bmMgTmMoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBhd2FpdCB0aGlzLmtjKCk7XG4gICAgICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gbnVsbDtcbiAgICAgICAgY29uc3QgZSA9IHRoaXMueGMuZGVjb2RlKHQpLCBuID0gTnVtYmVyKGUpO1xuICAgICAgICBpc05hTihuKSAmJiB0aGlzLk1jKGBsZW5ndGggc3RyaW5nICgke2V9KSBpcyBub3QgdmFsaWQgbnVtYmVyYCk7XG4gICAgICAgIGNvbnN0IHMgPSBhd2FpdCB0aGlzLiRjKG4pO1xuICAgICAgICByZXR1cm4gbmV3IGtjKEpTT04ucGFyc2UocyksIHQubGVuZ3RoICsgbik7XG4gICAgfVxuICAgIC8qKiBGaXJzdCBpbmRleCBvZiAneycgZnJvbSB0aGUgdW5kZXJseWluZyBidWZmZXIuICovICAgIE9jKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5idWZmZXIuZmluZEluZGV4KCh0ID0+IHQgPT09IFwie1wiLmNoYXJDb2RlQXQoMCkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVhZHMgZnJvbSB0aGUgYmVnaW5uaW5nIG9mIHRoZSBpbnRlcm5hbCBidWZmZXIsIHVudGlsIHRoZSBmaXJzdCAneycsIGFuZFxuICAgICAqIHJldHVybiB0aGUgY29udGVudC5cbiAgICAgKlxuICAgICAqIElmIHJlYWNoZWQgZW5kIG9mIHRoZSBzdHJlYW0sIHJldHVybnMgYSBudWxsLlxuICAgICAqLyAgICBhc3luYyBrYygpIHtcbiAgICAgICAgZm9yICg7dGhpcy5PYygpIDwgMDsgKSB7XG4gICAgICAgICAgICBpZiAoYXdhaXQgdGhpcy5GYygpKSBicmVhaztcbiAgICAgICAgfVxuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGFuZCB0aGVyZVxuICAgICAgICAvLyBoYXBwZW5zIHRvIGJlIG5vIG1vcmUgZGF0YSB0byBwcm9jZXNzLlxuICAgICAgICAgICAgICAgIGlmICgwID09PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5PYygpO1xuICAgICAgICAvLyBCcm9rZSBvdXQgb2YgdGhlIGxvb3AgYmVjYXVzZSB1bmRlcmx5aW5nIHN0cmVhbSBpcyBjbG9zZWQsIGJ1dCBzdGlsbFxuICAgICAgICAvLyBjYW5ub3QgZmluZCBhbiBvcGVuIGJyYWNrZXQuXG4gICAgICAgICAgICAgICAgdCA8IDAgJiYgdGhpcy5NYyhcIlJlYWNoZWQgdGhlIGVuZCBvZiBidW5kbGUgd2hlbiBhIGxlbmd0aCBzdHJpbmcgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICBjb25zdCBlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdCk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQgbGVuZ3RoLlxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKHQpLCBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyBmcm9tIGEgc3BlY2lmaWVkIHBvc2l0aW9uIGZyb20gdGhlIGludGVybmFsIGJ1ZmZlciwgZm9yIGEgc3BlY2lmaWVkXG4gICAgICogbnVtYmVyIG9mIGJ5dGVzLCBwdWxsaW5nIG1vcmUgZGF0YSBmcm9tIHRoZSB1bmRlcmx5aW5nIHN0cmVhbSBpZiBuZWVkZWQuXG4gICAgICpcbiAgICAgKiBSZXR1cm5zIGEgc3RyaW5nIGRlY29kZWQgZnJvbSB0aGUgcmVhZCBieXRlcy5cbiAgICAgKi8gICAgYXN5bmMgJGModCkge1xuICAgICAgICBmb3IgKDt0aGlzLmJ1ZmZlci5sZW5ndGggPCB0OyApIHtcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuRmMoKSAmJiB0aGlzLk1jKFwiUmVhY2hlZCB0aGUgZW5kIG9mIGJ1bmRsZSB3aGVuIG1vcmUgaXMgZXhwZWN0ZWQuXCIpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnhjLmRlY29kZSh0aGlzLmJ1ZmZlci5zbGljZSgwLCB0KSk7XG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgaW50ZXJuYWwgYnVmZmVyIHRvIGRyb3AgdGhlIHJlYWQganNvbiBzdHJpbmcuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UodCksIGU7XG4gICAgfVxuICAgIE1jKHQpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1mbG9hdGluZy1wcm9taXNlc1xuICAgICAgICB0aHJvdyB0aGlzLkNjLmNhbmNlbCgpLCBuZXcgRXJyb3IoYEludmFsaWQgYnVuZGxlIGZvcm1hdDogJHt0fWApO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBQdWxscyBtb3JlIGRhdGEgZnJvbSB1bmRlcmx5aW5nIHN0cmVhbSB0byBpbnRlcm5hbCBidWZmZXIuXG4gICAgICogUmV0dXJucyBhIGJvb2xlYW4gaW5kaWNhdGluZyB3aGV0aGVyIHRoZSBzdHJlYW0gaXMgZmluaXNoZWQuXG4gICAgICovICAgIGFzeW5jIEZjKCkge1xuICAgICAgICBjb25zdCB0ID0gYXdhaXQgdGhpcy5DYy5yZWFkKCk7XG4gICAgICAgIGlmICghdC5kb25lKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5idWZmZXIubGVuZ3RoICsgdC52YWx1ZS5sZW5ndGgpO1xuICAgICAgICAgICAgZS5zZXQodGhpcy5idWZmZXIpLCBlLnNldCh0LnZhbHVlLCB0aGlzLmJ1ZmZlci5sZW5ndGgpLCB0aGlzLmJ1ZmZlciA9IGU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHQuZG9uZTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEludGVybmFsIHRyYW5zYWN0aW9uIG9iamVjdCByZXNwb25zaWJsZSBmb3IgYWNjdW11bGF0aW5nIHRoZSBtdXRhdGlvbnMgdG9cbiAqIHBlcmZvcm0gYW5kIHRoZSBiYXNlIHZlcnNpb25zIGZvciBhbnkgZG9jdW1lbnRzIHJlYWQuXG4gKi9cbmNsYXNzIERhIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZGF0YXN0b3JlID0gdCwgXG4gICAgICAgIC8vIFRoZSB2ZXJzaW9uIG9mIGVhY2ggZG9jdW1lbnQgdGhhdCB3YXMgcmVhZCBkdXJpbmcgdGhpcyB0cmFuc2FjdGlvbi5cbiAgICAgICAgdGhpcy5yZWFkVmVyc2lvbnMgPSBuZXcgTWFwLCB0aGlzLm11dGF0aW9ucyA9IFtdLCB0aGlzLmNvbW1pdHRlZCA9ICExLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEEgZGVmZXJyZWQgdXNhZ2UgZXJyb3IgdGhhdCBvY2N1cnJlZCBwcmV2aW91c2x5IGluIHRoaXMgdHJhbnNhY3Rpb24gdGhhdFxuICAgICAgICAgKiB3aWxsIGNhdXNlIHRoZSB0cmFuc2FjdGlvbiB0byBmYWlsIG9uY2UgaXQgYWN0dWFsbHkgY29tbWl0cy5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMubGFzdFdyaXRlRXJyb3IgPSBudWxsLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFNldCBvZiBkb2N1bWVudHMgdGhhdCBoYXZlIGJlZW4gd3JpdHRlbiBpbiB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAqXG4gICAgICAgICAqIFdoZW4gdGhlcmUncyBtb3JlIHRoYW4gb25lIHdyaXRlIHRvIHRoZSBzYW1lIGtleSBpbiBhIHRyYW5zYWN0aW9uLCBhbnlcbiAgICAgICAgICogd3JpdGVzIGFmdGVyIHRoZSBmaXJzdCBhcmUgaGFuZGxlZCBkaWZmZXJlbnRseS5cbiAgICAgICAgICovXG4gICAgICAgIHRoaXMud3JpdHRlbkRvY3MgPSBuZXcgU2V0O1xuICAgIH1cbiAgICBhc3luYyBsb29rdXAodCkge1xuICAgICAgICBpZiAodGhpcy5lbnN1cmVDb21taXROb3RDYWxsZWQoKSwgdGhpcy5tdXRhdGlvbnMubGVuZ3RoID4gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkZpcmVzdG9yZSB0cmFuc2FjdGlvbnMgcmVxdWlyZSBhbGwgcmVhZHMgdG8gYmUgZXhlY3V0ZWQgYmVmb3JlIGFsbCB3cml0ZXMuXCIpO1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IEwodCksIHMgPSBMaShuLnNlcmlhbGl6ZXIpICsgXCIvZG9jdW1lbnRzXCIsIGkgPSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnRzOiBlLm1hcCgodCA9PiAkaShuLnNlcmlhbGl6ZXIsIHQpKSlcbiAgICAgICAgICAgIH0sIHIgPSBhd2FpdCBuLnZvKFwiQmF0Y2hHZXREb2N1bWVudHNcIiwgcywgaSwgZS5sZW5ndGgpLCBvID0gbmV3IE1hcDtcbiAgICAgICAgICAgIHIuZm9yRWFjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IEdpKG4uc2VyaWFsaXplciwgdCk7XG4gICAgICAgICAgICAgICAgby5zZXQoZS5rZXkudG9TdHJpbmcoKSwgZSk7XG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICBjb25zdCB1ID0gW107XG4gICAgICAgICAgICByZXR1cm4gZS5mb3JFYWNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICBjb25zdCBlID0gby5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgICAgICAgICBGKCEhZSksIHUucHVzaChlKTtcbiAgICAgICAgICAgIH0pKSwgdTtcbiAgICAgICAgfSh0aGlzLmRhdGFzdG9yZSwgdCk7XG4gICAgICAgIHJldHVybiBlLmZvckVhY2goKHQgPT4gdGhpcy5yZWNvcmRWZXJzaW9uKHQpKSksIGU7XG4gICAgfVxuICAgIHNldCh0LCBlKSB7XG4gICAgICAgIHRoaXMud3JpdGUoZS50b011dGF0aW9uKHQsIHRoaXMucHJlY29uZGl0aW9uKHQpKSksIHRoaXMud3JpdHRlbkRvY3MuYWRkKHQudG9TdHJpbmcoKSk7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICB0aGlzLndyaXRlKGUudG9NdXRhdGlvbih0LCB0aGlzLnByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSkpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICB0aGlzLmxhc3RXcml0ZUVycm9yID0gdDtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBkZWxldGUodCkge1xuICAgICAgICB0aGlzLndyaXRlKG5ldyBZcyh0LCB0aGlzLnByZWNvbmRpdGlvbih0KSkpLCB0aGlzLndyaXR0ZW5Eb2NzLmFkZCh0LnRvU3RyaW5nKCkpO1xuICAgIH1cbiAgICBhc3luYyBjb21taXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLmxhc3RXcml0ZUVycm9yKSB0aHJvdyB0aGlzLmxhc3RXcml0ZUVycm9yO1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5yZWFkVmVyc2lvbnM7XG4gICAgICAgIC8vIEZvciBlYWNoIG11dGF0aW9uLCBub3RlIHRoYXQgdGhlIGRvYyB3YXMgd3JpdHRlbi5cbiAgICAgICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5mb3JFYWNoKChlID0+IHtcbiAgICAgICAgICAgIHQuZGVsZXRlKGUua2V5LnRvU3RyaW5nKCkpO1xuICAgICAgICB9KSksIFxuICAgICAgICAvLyBGb3IgZWFjaCBkb2N1bWVudCB0aGF0IHdhcyByZWFkIGJ1dCBub3Qgd3JpdHRlbiB0bywgd2Ugd2FudCB0byBwZXJmb3JtXG4gICAgICAgIC8vIGEgYHZlcmlmeWAgb3BlcmF0aW9uLlxuICAgICAgICB0LmZvckVhY2goKCh0LCBlKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBuID0gaHQuZnJvbVBhdGgoZSk7XG4gICAgICAgICAgICB0aGlzLm11dGF0aW9ucy5wdXNoKG5ldyBYcyhuLCB0aGlzLnByZWNvbmRpdGlvbihuKSkpO1xuICAgICAgICB9KSksIGF3YWl0IGFzeW5jIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBMKHQpLCBzID0gTGkobi5zZXJpYWxpemVyKSArIFwiL2RvY3VtZW50c1wiLCBpID0ge1xuICAgICAgICAgICAgICAgIHdyaXRlczogZS5tYXAoKHQgPT4gamkobi5zZXJpYWxpemVyLCB0KSkpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgYXdhaXQgbi5JbyhcIkNvbW1pdFwiLCBzLCBpKTtcbiAgICAgICAgfSh0aGlzLmRhdGFzdG9yZSwgdGhpcy5tdXRhdGlvbnMpLCB0aGlzLmNvbW1pdHRlZCA9ICEwO1xuICAgIH1cbiAgICByZWNvcmRWZXJzaW9uKHQpIHtcbiAgICAgICAgbGV0IGU7XG4gICAgICAgIGlmICh0LmlzRm91bmREb2N1bWVudCgpKSBlID0gdC52ZXJzaW9uOyBlbHNlIHtcbiAgICAgICAgICAgIGlmICghdC5pc05vRG9jdW1lbnQoKSkgdGhyb3cgTygpO1xuICAgICAgICAgICAgLy8gUmVwcmVzZW50IGEgZGVsZXRlZCBkb2MgdXNpbmcgU25hcHNob3RWZXJzaW9uLm1pbigpLlxuICAgICAgICAgICAgZSA9IHJ0Lm1pbigpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG4gPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC5rZXkudG9TdHJpbmcoKSk7XG4gICAgICAgIGlmIChuKSB7XG4gICAgICAgICAgICBpZiAoIWUuaXNFcXVhbChuKSkgXG4gICAgICAgICAgICAvLyBUaGlzIHRyYW5zYWN0aW9uIHdpbGwgZmFpbCBubyBtYXR0ZXIgd2hhdC5cbiAgICAgICAgICAgIHRocm93IG5ldyBVKHEuQUJPUlRFRCwgXCJEb2N1bWVudCB2ZXJzaW9uIGNoYW5nZWQgYmV0d2VlbiB0d28gcmVhZHMuXCIpO1xuICAgICAgICB9IGVsc2UgdGhpcy5yZWFkVmVyc2lvbnMuc2V0KHQua2V5LnRvU3RyaW5nKCksIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSB2ZXJzaW9uIG9mIHRoaXMgZG9jdW1lbnQgd2hlbiBpdCB3YXMgcmVhZCBpbiB0aGlzIHRyYW5zYWN0aW9uLFxuICAgICAqIGFzIGEgcHJlY29uZGl0aW9uLCBvciBubyBwcmVjb25kaXRpb24gaWYgaXQgd2FzIG5vdCByZWFkLlxuICAgICAqLyAgICBwcmVjb25kaXRpb24odCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5yZWFkVmVyc2lvbnMuZ2V0KHQudG9TdHJpbmcoKSk7XG4gICAgICAgIHJldHVybiAhdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlID8gZS5pc0VxdWFsKHJ0Lm1pbigpKSA/IEZzLmV4aXN0cyghMSkgOiBGcy51cGRhdGVUaW1lKGUpIDogRnMubm9uZSgpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSBwcmVjb25kaXRpb24gZm9yIGEgZG9jdW1lbnQgaWYgdGhlIG9wZXJhdGlvbiBpcyBhbiB1cGRhdGUuXG4gICAgICovICAgIHByZWNvbmRpdGlvbkZvclVwZGF0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnJlYWRWZXJzaW9ucy5nZXQodC50b1N0cmluZygpKTtcbiAgICAgICAgLy8gVGhlIGZpcnN0IHRpbWUgYSBkb2N1bWVudCBpcyB3cml0dGVuLCB3ZSB3YW50IHRvIHRha2UgaW50byBhY2NvdW50IHRoZVxuICAgICAgICAvLyByZWFkIHRpbWUgYW5kIGV4aXN0ZW5jZVxuICAgICAgICAgICAgICAgIGlmICghdGhpcy53cml0dGVuRG9jcy5oYXModC50b1N0cmluZygpKSAmJiBlKSB7XG4gICAgICAgICAgICBpZiAoZS5pc0VxdWFsKHJ0Lm1pbigpKSkgXG4gICAgICAgICAgICAvLyBUaGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdCwgc28gZmFpbCB0aGUgdHJhbnNhY3Rpb24uXG4gICAgICAgICAgICAvLyBUaGlzIGhhcyB0byBiZSB2YWxpZGF0ZWQgbG9jYWxseSBiZWNhdXNlIHlvdSBjYW4ndCBzZW5kIGFcbiAgICAgICAgICAgIC8vIHByZWNvbmRpdGlvbiB0aGF0IGEgZG9jdW1lbnQgZG9lcyBub3QgZXhpc3Qgd2l0aG91dCBjaGFuZ2luZyB0aGVcbiAgICAgICAgICAgIC8vIHNlbWFudGljcyBvZiB0aGUgYmFja2VuZCB3cml0ZSB0byBiZSBhbiBpbnNlcnQuIFRoaXMgaXMgdGhlIHJldmVyc2VcbiAgICAgICAgICAgIC8vIG9mIHdoYXQgd2Ugd2FudCwgc2luY2Ugd2Ugd2FudCB0byBhc3NlcnQgdGhhdCB0aGUgZG9jdW1lbnQgZG9lc24ndFxuICAgICAgICAgICAgLy8gZXhpc3QgYnV0IHRoZW4gc2VuZCB0aGUgdXBkYXRlIGFuZCBoYXZlIGl0IGZhaWwuIFNpbmNlIHdlIGNhbid0XG4gICAgICAgICAgICAvLyBleHByZXNzIHRoYXQgdG8gdGhlIGJhY2tlbmQsIHdlIGhhdmUgdG8gdmFsaWRhdGUgbG9jYWxseS5cbiAgICAgICAgICAgIC8vIE5vdGU6IHRoaXMgY2FuIGNoYW5nZSBvbmNlIHdlIGNhbiBzZW5kIHNlcGFyYXRlIHZlcmlmeSB3cml0ZXMgaW4gdGhlXG4gICAgICAgICAgICAvLyB0cmFuc2FjdGlvbi5cbiAgICAgICAgICAgIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJDYW4ndCB1cGRhdGUgYSBkb2N1bWVudCB0aGF0IGRvZXNuJ3QgZXhpc3QuXCIpO1xuICAgICAgICAgICAgLy8gRG9jdW1lbnQgZXhpc3RzLCBiYXNlIHByZWNvbmRpdGlvbiBvbiBkb2N1bWVudCB1cGRhdGUgdGltZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBGcy51cGRhdGVUaW1lKGUpO1xuICAgICAgICB9XG4gICAgICAgIC8vIERvY3VtZW50IHdhcyBub3QgcmVhZCwgc28gd2UganVzdCB1c2UgdGhlIHByZWNvbmRpdGlvbnMgZm9yIGEgYmxpbmRcbiAgICAgICAgLy8gdXBkYXRlLlxuICAgICAgICByZXR1cm4gRnMuZXhpc3RzKCEwKTtcbiAgICB9XG4gICAgd3JpdGUodCkge1xuICAgICAgICB0aGlzLmVuc3VyZUNvbW1pdE5vdENhbGxlZCgpLCB0aGlzLm11dGF0aW9ucy5wdXNoKHQpO1xuICAgIH1cbiAgICBlbnN1cmVDb21taXROb3RDYWxsZWQoKSB7fVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBUcmFuc2FjdGlvblJ1bm5lciBlbmNhcHN1bGF0ZXMgdGhlIGxvZ2ljIG5lZWRlZCB0byBydW4gYW5kIHJldHJ5IHRyYW5zYWN0aW9uc1xuICogd2l0aCBiYWNrb2ZmLlxuICovIGNsYXNzIENhIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZSA9IHQsIHRoaXMuZGF0YXN0b3JlID0gZSwgdGhpcy5vcHRpb25zID0gbiwgdGhpcy51cGRhdGVGdW5jdGlvbiA9IHMsIFxuICAgICAgICB0aGlzLmRlZmVycmVkID0gaSwgdGhpcy5CYyA9IG4ubWF4QXR0ZW1wdHMsIHRoaXMucW8gPSBuZXcgQnUodGhpcy5hc3luY1F1ZXVlLCBcInRyYW5zYWN0aW9uX3JldHJ5XCIgLyogVGltZXJJZC5UcmFuc2FjdGlvblJldHJ5ICovKTtcbiAgICB9XG4gICAgLyoqIFJ1bnMgdGhlIHRyYW5zYWN0aW9uIGFuZCBzZXRzIHRoZSByZXN1bHQgb24gZGVmZXJyZWQuICovICAgIHJ1bigpIHtcbiAgICAgICAgdGhpcy5CYyAtPSAxLCB0aGlzLkxjKCk7XG4gICAgfVxuICAgIExjKCkge1xuICAgICAgICB0aGlzLnFvLk5vKChhc3luYyAoKSA9PiB7XG4gICAgICAgICAgICBjb25zdCB0ID0gbmV3IERhKHRoaXMuZGF0YXN0b3JlKSwgZSA9IHRoaXMucWModCk7XG4gICAgICAgICAgICBlICYmIGUudGhlbigoZSA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IHQuY29tbWl0KCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLmRlZmVycmVkLnJlc29sdmUoZSk7XG4gICAgICAgICAgICAgICAgfSkpLmNhdGNoKCh0ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5VYyh0KTtcbiAgICAgICAgICAgICAgICB9KSkpKTtcbiAgICAgICAgICAgIH0pKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICAgICAgdGhpcy5VYyh0KTtcbiAgICAgICAgICAgIH0pKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBxYyh0KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy51cGRhdGVGdW5jdGlvbih0KTtcbiAgICAgICAgICAgIHJldHVybiAhRnQoZSkgJiYgZS5jYXRjaCAmJiBlLnRoZW4gPyBlIDogKHRoaXMuZGVmZXJyZWQucmVqZWN0KEVycm9yKFwiVHJhbnNhY3Rpb24gY2FsbGJhY2sgbXVzdCByZXR1cm4gYSBQcm9taXNlXCIpKSwgXG4gICAgICAgICAgICBudWxsKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgLy8gRG8gbm90IHJldHJ5IGVycm9ycyB0aHJvd24gYnkgdXNlciBwcm92aWRlZCB1cGRhdGVGdW5jdGlvbi5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLmRlZmVycmVkLnJlamVjdCh0KSwgbnVsbDtcbiAgICAgICAgfVxuICAgIH1cbiAgICBVYyh0KSB7XG4gICAgICAgIHRoaXMuQmMgPiAwICYmIHRoaXMuS2ModCkgPyAodGhpcy5CYyAtPSAxLCB0aGlzLmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoKCkgPT4gKHRoaXMuTGMoKSwgXG4gICAgICAgIFByb21pc2UucmVzb2x2ZSgpKSkpKSA6IHRoaXMuZGVmZXJyZWQucmVqZWN0KHQpO1xuICAgIH1cbiAgICBLYyh0KSB7XG4gICAgICAgIGlmIChcIkZpcmViYXNlRXJyb3JcIiA9PT0gdC5uYW1lKSB7XG4gICAgICAgICAgICAvLyBJbiB0cmFuc2FjdGlvbnMsIHRoZSBiYWNrZW5kIHdpbGwgZmFpbCBvdXRkYXRlZCByZWFkcyB3aXRoIEZBSUxFRF9QUkVDT05ESVRJT04gYW5kXG4gICAgICAgICAgICAvLyBub24tbWF0Y2hpbmcgZG9jdW1lbnQgdmVyc2lvbnMgd2l0aCBBQk9SVEVELiBUaGVzZSBlcnJvcnMgc2hvdWxkIGJlIHJldHJpZWQuXG4gICAgICAgICAgICBjb25zdCBlID0gdC5jb2RlO1xuICAgICAgICAgICAgcmV0dXJuIFwiYWJvcnRlZFwiID09PSBlIHx8IFwiZmFpbGVkLXByZWNvbmRpdGlvblwiID09PSBlIHx8IFwiYWxyZWFkeS1leGlzdHNcIiA9PT0gZSB8fCAhb2koZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogRmlyZXN0b3JlQ2xpZW50IGlzIGEgdG9wLWxldmVsIGNsYXNzIHRoYXQgY29uc3RydWN0cyBhbmQgb3ducyBhbGwgb2YgdGhlIC8vXG4gKiBwaWVjZXMgb2YgdGhlIGNsaWVudCBTREsgYXJjaGl0ZWN0dXJlLiBJdCBpcyByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIC8vXG4gKiBhc3luYyBxdWV1ZSB0aGF0IGlzIHNoYXJlZCBieSBhbGwgb2YgdGhlIG90aGVyIGNvbXBvbmVudHMgaW4gdGhlIHN5c3RlbS4gLy9cbiAqL1xuY2xhc3MgeGEge1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIFxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91cyBxdWV1ZSByZXNwb25zaWJsZSBmb3IgYWxsIG9mIG91ciBpbnRlcm5hbCBwcm9jZXNzaW5nLiBXaGVuXG4gICAgICogd2UgZ2V0IGluY29taW5nIHdvcmsgZnJvbSB0aGUgdXNlciAodmlhIHB1YmxpYyBBUEkpIG9yIHRoZSBuZXR3b3JrXG4gICAgICogKGluY29taW5nIEdSUEMgbWVzc2FnZXMpLCB3ZSBzaG91bGQgYWx3YXlzIHNjaGVkdWxlIG9udG8gdGhpcyBxdWV1ZS5cbiAgICAgKiBUaGlzIGVuc3VyZXMgYWxsIG9mIG91ciB3b3JrIGlzIHByb3Blcmx5IHNlcmlhbGl6ZWQgKGUuZy4gd2UgZG9uJ3RcbiAgICAgKiBzdGFydCBwcm9jZXNzaW5nIGEgbmV3IG9wZXJhdGlvbiB3aGlsZSB0aGUgcHJldmlvdXMgb25lIGlzIHdhaXRpbmcgZm9yXG4gICAgICogYW4gYXN5bmMgSS9PIHRvIGNvbXBsZXRlKS5cbiAgICAgKi9cbiAgICBuLCBzKSB7XG4gICAgICAgIHRoaXMuYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxzID0gZSwgdGhpcy5hc3luY1F1ZXVlID0gbiwgdGhpcy5kYXRhYmFzZUluZm8gPSBzLCBcbiAgICAgICAgdGhpcy51c2VyID0gVi5VTkFVVEhFTlRJQ0FURUQsIHRoaXMuY2xpZW50SWQgPSB0dC5BKCksIHRoaXMuYXV0aENyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBcbiAgICAgICAgdGhpcy5hcHBDaGVja0NyZWRlbnRpYWxMaXN0ZW5lciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCB0aGlzLmF1dGhDcmVkZW50aWFscy5zdGFydChuLCAoYXN5bmMgdCA9PiB7XG4gICAgICAgICAgICBOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiUmVjZWl2ZWQgdXNlcj1cIiwgdC51aWQpLCBhd2FpdCB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIodCksIFxuICAgICAgICAgICAgdGhpcy51c2VyID0gdDtcbiAgICAgICAgfSkpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc3RhcnQobiwgKHQgPT4gKE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJSZWNlaXZlZCBuZXcgYXBwIGNoZWNrIHRva2VuPVwiLCB0KSwgXG4gICAgICAgIHRoaXMuYXBwQ2hlY2tDcmVkZW50aWFsTGlzdGVuZXIodCwgdGhpcy51c2VyKSkpKTtcbiAgICB9XG4gICAgYXN5bmMgZ2V0Q29uZmlndXJhdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGFzeW5jUXVldWU6IHRoaXMuYXN5bmNRdWV1ZSxcbiAgICAgICAgICAgIGRhdGFiYXNlSW5mbzogdGhpcy5kYXRhYmFzZUluZm8sXG4gICAgICAgICAgICBjbGllbnRJZDogdGhpcy5jbGllbnRJZCxcbiAgICAgICAgICAgIGF1dGhDcmVkZW50aWFsczogdGhpcy5hdXRoQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBhcHBDaGVja0NyZWRlbnRpYWxzOiB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMsXG4gICAgICAgICAgICBpbml0aWFsVXNlcjogdGhpcy51c2VyLFxuICAgICAgICAgICAgbWF4Q29uY3VycmVudExpbWJvUmVzb2x1dGlvbnM6IDEwMFxuICAgICAgICB9O1xuICAgIH1cbiAgICBzZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFsTGlzdGVuZXIgPSB0O1xuICAgIH1cbiAgICBzZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIodCkge1xuICAgICAgICB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbExpc3RlbmVyID0gdDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQ2hlY2tzIHRoYXQgdGhlIGNsaWVudCBoYXMgbm90IGJlZW4gdGVybWluYXRlZC4gRW5zdXJlcyB0aGF0IG90aGVyIG1ldGhvZHMgb24gLy9cbiAgICAgKiB0aGlzIGNsYXNzIGNhbm5vdCBiZSBjYWxsZWQgYWZ0ZXIgdGhlIGNsaWVudCBpcyB0ZXJtaW5hdGVkLiAvL1xuICAgICAqLyAgICB2ZXJpZnlOb3RUZXJtaW5hdGVkKCkge1xuICAgICAgICBpZiAodGhpcy5hc3luY1F1ZXVlLmlzU2h1dHRpbmdEb3duKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiVGhlIGNsaWVudCBoYXMgYWxyZWFkeSBiZWVuIHRlcm1pbmF0ZWQuXCIpO1xuICAgIH1cbiAgICB0ZXJtaW5hdGUoKSB7XG4gICAgICAgIHRoaXMuYXN5bmNRdWV1ZS5lbnRlclJlc3RyaWN0ZWRNb2RlKCk7XG4gICAgICAgIGNvbnN0IHQgPSBuZXcgSztcbiAgICAgICAgcmV0dXJuIHRoaXMuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICB0aGlzLl9vbmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMuX29ubGluZUNvbXBvbmVudHMudGVybWluYXRlKCksIHRoaXMuX29mZmxpbmVDb21wb25lbnRzICYmIGF3YWl0IHRoaXMuX29mZmxpbmVDb21wb25lbnRzLnRlcm1pbmF0ZSgpLCBcbiAgICAgICAgICAgICAgICAvLyBUaGUgY3JlZGVudGlhbHMgcHJvdmlkZXIgbXVzdCBiZSB0ZXJtaW5hdGVkIGFmdGVyIHNodXR0aW5nIGRvd24gdGhlXG4gICAgICAgICAgICAgICAgLy8gUmVtb3RlU3RvcmUgYXMgaXQgd2lsbCBwcmV2ZW50IHRoZSBSZW1vdGVTdG9yZSBmcm9tIHJldHJpZXZpbmcgYXV0aFxuICAgICAgICAgICAgICAgIC8vIHRva2Vucy5cbiAgICAgICAgICAgICAgICB0aGlzLmF1dGhDcmVkZW50aWFscy5zaHV0ZG93bigpLCB0aGlzLmFwcENoZWNrQ3JlZGVudGlhbHMuc2h1dGRvd24oKSwgdC5yZXNvbHZlKCk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEVjKGUsIFwiRmFpbGVkIHRvIHNodXRkb3duIHBlcnNpc3RlbmNlXCIpO1xuICAgICAgICAgICAgICAgIHQucmVqZWN0KG4pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHQucHJvbWlzZTtcbiAgICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIE5hKHQsIGUpIHtcbiAgICB0LmFzeW5jUXVldWUudmVyaWZ5T3BlcmF0aW9uSW5Qcm9ncmVzcygpLCBOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiSW5pdGlhbGl6aW5nIE9mZmxpbmVDb21wb25lbnRQcm92aWRlclwiKTtcbiAgICBjb25zdCBuID0gYXdhaXQgdC5nZXRDb25maWd1cmF0aW9uKCk7XG4gICAgYXdhaXQgZS5pbml0aWFsaXplKG4pO1xuICAgIGxldCBzID0gbi5pbml0aWFsVXNlcjtcbiAgICB0LnNldENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lcigoYXN5bmMgdCA9PiB7XG4gICAgICAgIHMuaXNFcXVhbCh0KSB8fCAoYXdhaXQgaXUoZS5sb2NhbFN0b3JlLCB0KSwgcyA9IHQpO1xuICAgIH0pKSwgXG4gICAgLy8gV2hlbiBhIHVzZXIgY2FsbHMgY2xlYXJQZXJzaXN0ZW5jZSgpIGluIG9uZSBjbGllbnQsIGFsbCBvdGhlciBjbGllbnRzXG4gICAgLy8gbmVlZCB0byBiZSB0ZXJtaW5hdGVkIHRvIGFsbG93IHRoZSBkZWxldGUgdG8gc3VjY2VlZC5cbiAgICBlLnBlcnNpc3RlbmNlLnNldERhdGFiYXNlRGVsZXRlZExpc3RlbmVyKCgoKSA9PiB0LnRlcm1pbmF0ZSgpKSksIHQuX29mZmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuYXN5bmMgZnVuY3Rpb24ga2EodCwgZSkge1xuICAgIHQuYXN5bmNRdWV1ZS52ZXJpZnlPcGVyYXRpb25JblByb2dyZXNzKCk7XG4gICAgY29uc3QgbiA9IGF3YWl0ICRhKHQpO1xuICAgIE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJJbml0aWFsaXppbmcgT25saW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgY29uc3QgcyA9IGF3YWl0IHQuZ2V0Q29uZmlndXJhdGlvbigpO1xuICAgIGF3YWl0IGUuaW5pdGlhbGl6ZShuLCBzKSwgXG4gICAgLy8gVGhlIENyZWRlbnRpYWxDaGFuZ2VMaXN0ZW5lciBvZiB0aGUgb25saW5lIGNvbXBvbmVudCBwcm92aWRlciB0YWtlc1xuICAgIC8vIHByZWNlZGVuY2Ugb3ZlciB0aGUgb2ZmbGluZSBjb21wb25lbnQgcHJvdmlkZXIuXG4gICAgdC5zZXRDcmVkZW50aWFsQ2hhbmdlTGlzdGVuZXIoKHQgPT4gZ2MoZS5yZW1vdGVTdG9yZSwgdCkpKSwgdC5zZXRBcHBDaGVja1Rva2VuQ2hhbmdlTGlzdGVuZXIoKCh0LCBuKSA9PiBnYyhlLnJlbW90ZVN0b3JlLCBuKSkpLCBcbiAgICB0Ll9vbmxpbmVDb21wb25lbnRzID0gZTtcbn1cblxuLyoqXG4gKiBEZWNpZGVzIHdoZXRoZXIgdGhlIHByb3ZpZGVkIGVycm9yIGFsbG93cyB1cyB0byBncmFjZWZ1bGx5IGRpc2FibGVcbiAqIHBlcnNpc3RlbmNlIChhcyBvcHBvc2VkIHRvIGNyYXNoaW5nIHRoZSBjbGllbnQpLlxuICovIGZ1bmN0aW9uIE1hKHQpIHtcbiAgICByZXR1cm4gXCJGaXJlYmFzZUVycm9yXCIgPT09IHQubmFtZSA/IHQuY29kZSA9PT0gcS5GQUlMRURfUFJFQ09ORElUSU9OIHx8IHQuY29kZSA9PT0gcS5VTklNUExFTUVOVEVEIDogIShcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBET01FeGNlcHRpb24gJiYgdCBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbikgfHwgKFxuICAgIC8vIFdoZW4gdGhlIGJyb3dzZXIgaXMgb3V0IG9mIHF1b3RhIHdlIGNvdWxkIGdldCBlaXRoZXIgcXVvdGEgZXhjZWVkZWRcbiAgICAvLyBvciBhbiBhYm9ydGVkIGVycm9yIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBlcnJvciBoYXBwZW5lZCBkdXJpbmdcbiAgICAvLyBzY2hlbWEgbWlncmF0aW9uLlxuICAgIDIyID09PSB0LmNvZGUgfHwgMjAgPT09IHQuY29kZSB8fCBcbiAgICAvLyBGaXJlZm94IFByaXZhdGUgQnJvd3NpbmcgbW9kZSBkaXNhYmxlcyBJbmRleGVkRGIgYW5kIHJldHVybnNcbiAgICAvLyBJTlZBTElEX1NUQVRFIGZvciBhbnkgdXNhZ2UuXG4gICAgMTEgPT09IHQuY29kZSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uICRhKHQpIHtcbiAgICBpZiAoIXQuX29mZmxpbmVDb21wb25lbnRzKSBpZiAodC5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlcikge1xuICAgICAgICBOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgdXNlciBwcm92aWRlZCBPZmZsaW5lQ29tcG9uZW50UHJvdmlkZXJcIik7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBOYSh0LCB0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vZmZsaW5lKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IGU7XG4gICAgICAgICAgICBpZiAoIU1hKG4pKSB0aHJvdyBuO1xuICAgICAgICAgICAgTShcIkVycm9yIHVzaW5nIHVzZXIgcHJvdmlkZWQgY2FjaGUuIEZhbGxpbmcgYmFjayB0byBtZW1vcnkgY2FjaGU6IFwiICsgbiksIGF3YWl0IE5hKHQsIG5ldyBFYSk7XG4gICAgICAgIH1cbiAgICB9IGVsc2UgTihcIkZpcmVzdG9yZUNsaWVudFwiLCBcIlVzaW5nIGRlZmF1bHQgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBhd2FpdCBOYSh0LCBuZXcgRWEpO1xuICAgIHJldHVybiB0Ll9vZmZsaW5lQ29tcG9uZW50cztcbn1cblxuYXN5bmMgZnVuY3Rpb24gT2EodCkge1xuICAgIHJldHVybiB0Ll9vbmxpbmVDb21wb25lbnRzIHx8ICh0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyID8gKE4oXCJGaXJlc3RvcmVDbGllbnRcIiwgXCJVc2luZyB1c2VyIHByb3ZpZGVkIE9ubGluZUNvbXBvbmVudFByb3ZpZGVyXCIpLCBcbiAgICBhd2FpdCBrYSh0LCB0Ll91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyLl9vbmxpbmUpKSA6IChOKFwiRmlyZXN0b3JlQ2xpZW50XCIsIFwiVXNpbmcgZGVmYXVsdCBPbmxpbmVDb21wb25lbnRQcm92aWRlclwiKSwgXG4gICAgYXdhaXQga2EodCwgbmV3IFBhKSkpLCB0Ll9vbmxpbmVDb21wb25lbnRzO1xufVxuXG5mdW5jdGlvbiBGYSh0KSB7XG4gICAgcmV0dXJuICRhKHQpLnRoZW4oKHQgPT4gdC5wZXJzaXN0ZW5jZSkpO1xufVxuXG5mdW5jdGlvbiBCYSh0KSB7XG4gICAgcmV0dXJuICRhKHQpLnRoZW4oKHQgPT4gdC5sb2NhbFN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIExhKHQpIHtcbiAgICByZXR1cm4gT2EodCkudGhlbigodCA9PiB0LnJlbW90ZVN0b3JlKSk7XG59XG5cbmZ1bmN0aW9uIHFhKHQpIHtcbiAgICByZXR1cm4gT2EodCkudGhlbigodCA9PiB0LnN5bmNFbmdpbmUpKTtcbn1cblxuZnVuY3Rpb24gVWEodCkge1xuICAgIHJldHVybiBPYSh0KS50aGVuKCh0ID0+IHQuZGF0YXN0b3JlKSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIEthKHQpIHtcbiAgICBjb25zdCBlID0gYXdhaXQgT2EodCksIG4gPSBlLmV2ZW50TWFuYWdlcjtcbiAgICByZXR1cm4gbi5vbkxpc3RlbiA9IEdjLmJpbmQobnVsbCwgZS5zeW5jRW5naW5lKSwgbi5vblVubGlzdGVuID0gamMuYmluZChudWxsLCBlLnN5bmNFbmdpbmUpLCBcbiAgICBuO1xufVxuXG4vKiogRW5hYmxlcyB0aGUgbmV0d29yayBjb25uZWN0aW9uIGFuZCByZS1lbnF1ZXVlcyBhbGwgcGVuZGluZyBvcGVyYXRpb25zLiAqLyBmdW5jdGlvbiBHYSh0KSB7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIGNvbnN0IGUgPSBhd2FpdCBGYSh0KSwgbiA9IGF3YWl0IExhKHQpO1xuICAgICAgICByZXR1cm4gZS5zZXROZXR3b3JrRW5hYmxlZCghMCksIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBMKHQpO1xuICAgICAgICAgICAgcmV0dXJuIGUudnUuZGVsZXRlKDAgLyogT2ZmbGluZUNhdXNlLlVzZXJEaXNhYmxlZCAqLyksIHp1KGUpO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqIERpc2FibGVzIHRoZSBuZXR3b3JrIGNvbm5lY3Rpb24uIFBlbmRpbmcgb3BlcmF0aW9ucyB3aWxsIG5vdCBjb21wbGV0ZS4gKi8gZnVuY3Rpb24gUWEodCkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4ge1xuICAgICAgICBjb25zdCBlID0gYXdhaXQgRmEodCksIG4gPSBhd2FpdCBMYSh0KTtcbiAgICAgICAgcmV0dXJuIGUuc2V0TmV0d29ya0VuYWJsZWQoITEpLCBhc3luYyBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gTCh0KTtcbiAgICAgICAgICAgIGUudnUuYWRkKDAgLyogT2ZmbGluZUNhdXNlLlVzZXJEaXNhYmxlZCAqLyksIGF3YWl0IFd1KGUpLCBcbiAgICAgICAgICAgIC8vIFNldCB0aGUgT25saW5lU3RhdGUgdG8gT2ZmbGluZSBzbyBnZXQoKXMgcmV0dXJuIGZyb20gY2FjaGUsIGV0Yy5cbiAgICAgICAgICAgIGUuYnUuc2V0KFwiT2ZmbGluZVwiIC8qIE9ubGluZVN0YXRlLk9mZmxpbmUgKi8pO1xuICAgICAgICB9KG4pO1xuICAgIH0pKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gYWxsIHdyaXRlcyB0aGF0IHdlcmUgcGVuZGluZyBhdCB0aGUgdGltZVxuICogdGhpcyBtZXRob2Qgd2FzIGNhbGxlZCByZWNlaXZlZCBzZXJ2ZXIgYWNrbm93bGVkZ2VtZW50LiBBbiBhY2tub3dsZWRnZW1lbnRcbiAqIGNhbiBiZSBlaXRoZXIgYWNjZXB0YW5jZSBvciByZWplY3Rpb24uXG4gKi8gZnVuY3Rpb24gamEodCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG4ucGVyc2lzdGVuY2UucnVuVHJhbnNhY3Rpb24oXCJyZWFkIGRvY3VtZW50XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5sb2NhbERvY3VtZW50cy5nZXREb2N1bWVudCh0LCBlKSkpO1xuICAgICAgICAgICAgfSh0LCBlKTtcbiAgICAgICAgICAgIHMuaXNGb3VuZERvY3VtZW50KCkgPyBuLnJlc29sdmUocykgOiBzLmlzTm9Eb2N1bWVudCgpID8gbi5yZXNvbHZlKG51bGwpIDogbi5yZWplY3QobmV3IFUocS5VTkFWQUlMQUJMRSwgXCJGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gY2FjaGUuIChIb3dldmVyLCB0aGlzIGRvY3VtZW50IG1heSBleGlzdCBvbiB0aGUgc2VydmVyLiBSdW4gYWdhaW4gd2l0aG91dCBzZXR0aW5nICdzb3VyY2UnIGluIHRoZSBHZXRPcHRpb25zIHRvIGF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGRvY3VtZW50IGZyb20gdGhlIHNlcnZlci4pXCIpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgY29uc3QgcyA9IEVjKHQsIGBGYWlsZWQgdG8gZ2V0IGRvY3VtZW50ICcke2V9IGZyb20gY2FjaGVgKTtcbiAgICAgICAgICAgIG4ucmVqZWN0KHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICogUmV0cmlldmVzIGEgbGF0ZW5jeS1jb21wZW5zYXRlZCBkb2N1bWVudCBmcm9tIHRoZSBiYWNrZW5kIHZpYSBhXG4gKiBTbmFwc2hvdExpc3RlbmVyLlxuICovIChhd2FpdCBCYSh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiB6YSh0LCBlLCBuID0ge30pIHtcbiAgICBjb25zdCBzID0gbmV3IEs7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGNvbnN0IHIgPSBuZXcgVmEoe1xuICAgICAgICAgICAgbmV4dDogciA9PiB7XG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHF1ZXJ5IGZpcnN0IGJlZm9yZSBwYXNzaW5nIGV2ZW50IHRvIHVzZXIgdG8gYXZvaWRcbiAgICAgICAgICAgICAgICAvLyB1c2VyIGFjdGlvbnMgYWZmZWN0aW5nIHRoZSBub3cgc3RhbGUgcXVlcnkuXG4gICAgICAgICAgICAgICAgZS5lbnF1ZXVlQW5kRm9yZ2V0KCgoKSA9PiBTYyh0LCBvKSkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IHUgPSByLmRvY3MuaGFzKG4pO1xuICAgICAgICAgICAgICAgICF1ICYmIHIuZnJvbUNhY2hlID8gXG4gICAgICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiBJZiB3ZSdyZSBvbmxpbmUgYW5kIHRoZSBkb2N1bWVudCBkb2Vzbid0XG4gICAgICAgICAgICAgICAgLy8gZXhpc3QgdGhlbiB3ZSByZXNvbHZlIHdpdGggYSBkb2MuZXhpc3RzIHNldCB0byBmYWxzZS4gSWZcbiAgICAgICAgICAgICAgICAvLyB3ZSdyZSBvZmZsaW5lIGhvd2V2ZXIsIHdlIHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGlzXG4gICAgICAgICAgICAgICAgLy8gY2FzZS4gVHdvIG9wdGlvbnM6IDEpIENhY2hlIHRoZSBuZWdhdGl2ZSByZXNwb25zZSBmcm9tXG4gICAgICAgICAgICAgICAgLy8gdGhlIHNlcnZlciBzbyB3ZSBjYW4gZGVsaXZlciB0aGF0IGV2ZW4gd2hlbiB5b3UncmVcbiAgICAgICAgICAgICAgICAvLyBvZmZsaW5lIDIpIEFjdHVhbGx5IHJlamVjdCB0aGUgUHJvbWlzZSBpbiB0aGUgb25saW5lIGNhc2VcbiAgICAgICAgICAgICAgICAvLyBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgICAgICAgICAgICBpLnJlamVjdChuZXcgVShxLlVOQVZBSUxBQkxFLCBcIkZhaWxlZCB0byBnZXQgZG9jdW1lbnQgYmVjYXVzZSB0aGUgY2xpZW50IGlzIG9mZmxpbmUuXCIpKSA6IHUgJiYgci5mcm9tQ2FjaGUgJiYgcyAmJiBcInNlcnZlclwiID09PSBzLnNvdXJjZSA/IGkucmVqZWN0KG5ldyBVKHEuVU5BVkFJTEFCTEUsICdGYWlsZWQgdG8gZ2V0IGRvY3VtZW50IGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhpcyBkb2N1bWVudCBkb2VzIGV4aXN0IGluIHRoZSBsb2NhbCBjYWNoZS4gUnVuIGFnYWluIHdpdGhvdXQgc2V0dGluZyBzb3VyY2UgdG8gXCJzZXJ2ZXJcIiB0byByZXRyaWV2ZSB0aGUgY2FjaGVkIGRvY3VtZW50LiknKSkgOiBpLnJlc29sdmUocik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IHQgPT4gaS5yZWplY3QodClcbiAgICAgICAgfSksIG8gPSBuZXcgTmMoR24obi5wYXRoKSwgciwge1xuICAgICAgICAgICAgaW5jbHVkZU1ldGFkYXRhQ2hhbmdlczogITAsXG4gICAgICAgICAgICBLdTogITBcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBWYyh0LCBvKTtcbiAgICB9KGF3YWl0IEthKHQpLCB0LmFzeW5jUXVldWUsIGUsIG4sIHMpKSksIHMucHJvbWlzZTtcbn1cblxuZnVuY3Rpb24gV2EodCwgZSkge1xuICAgIGNvbnN0IG4gPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGFzeW5jIGZ1bmN0aW9uKHQsIGUsIG4pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBhd2FpdCBmdSh0LCBlLCBcbiAgICAgICAgICAgIC8qIHVzZVByZXZpb3VzUmVzdWx0cz0gKi8gITApLCBpID0gbmV3IExjKGUsIHMuaXIpLCByID0gaS5zYyhzLmRvY3VtZW50cyksIG8gPSBpLmFwcGx5Q2hhbmdlcyhyLCBcbiAgICAgICAgICAgIC8qIHVwZGF0ZUxpbWJvRG9jdW1lbnRzPSAqLyAhMSk7XG4gICAgICAgICAgICBuLnJlc29sdmUoby5zbmFwc2hvdCk7XG4gICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBFYyh0LCBgRmFpbGVkIHRvIGV4ZWN1dGUgcXVlcnkgJyR7ZX0gYWdhaW5zdCBjYWNoZWApO1xuICAgICAgICAgICAgbi5yZWplY3Qocyk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gKiBSZXRyaWV2ZXMgYSBsYXRlbmN5LWNvbXBlbnNhdGVkIHF1ZXJ5IHNuYXBzaG90IGZyb20gdGhlIGJhY2tlbmQgdmlhIGFcbiAqIFNuYXBzaG90TGlzdGVuZXIuXG4gKi8gKGF3YWl0IEJhKHQpLCBlLCBuKSkpLCBuLnByb21pc2U7XG59XG5cbmZ1bmN0aW9uIEhhKHQsIGUsIG4gPSB7fSkge1xuICAgIGNvbnN0IHMgPSBuZXcgSztcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGkpIHtcbiAgICAgICAgY29uc3QgciA9IG5ldyBWYSh7XG4gICAgICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgcXVlcnkgZmlyc3QgYmVmb3JlIHBhc3NpbmcgZXZlbnQgdG8gdXNlciB0byBhdm9pZFxuICAgICAgICAgICAgICAgIC8vIHVzZXIgYWN0aW9ucyBhZmZlY3RpbmcgdGhlIG5vdyBzdGFsZSBxdWVyeS5cbiAgICAgICAgICAgICAgICBlLmVucXVldWVBbmRGb3JnZXQoKCgpID0+IFNjKHQsIG8pKSksIG4uZnJvbUNhY2hlICYmIFwic2VydmVyXCIgPT09IHMuc291cmNlID8gaS5yZWplY3QobmV3IFUocS5VTkFWQUlMQUJMRSwgJ0ZhaWxlZCB0byBnZXQgZG9jdW1lbnRzIGZyb20gc2VydmVyLiAoSG93ZXZlciwgdGhlc2UgZG9jdW1lbnRzIG1heSBleGlzdCBpbiB0aGUgbG9jYWwgY2FjaGUuIFJ1biBhZ2FpbiB3aXRob3V0IHNldHRpbmcgc291cmNlIHRvIFwic2VydmVyXCIgdG8gcmV0cmlldmUgdGhlIGNhY2hlZCBkb2N1bWVudHMuKScpKSA6IGkucmVzb2x2ZShuKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogdCA9PiBpLnJlamVjdCh0KVxuICAgICAgICB9KSwgbyA9IG5ldyBOYyhuLCByLCB7XG4gICAgICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMCxcbiAgICAgICAgICAgIEt1OiAhMFxuICAgICAgICB9KTtcbiAgICAgICAgcmV0dXJuIFZjKHQsIG8pO1xuICAgIH0oYXdhaXQgS2EodCksIHQuYXN5bmNRdWV1ZSwgZSwgbiwgcykpKSwgcy5wcm9taXNlO1xufVxuXG5mdW5jdGlvbiBKYSh0LCBlKSB7XG4gICAgY29uc3QgbiA9IG5ldyBWYShlKTtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgTCh0KS5rdS5hZGQoZSksIFxuICAgICAgICAvLyBJbW1lZGlhdGVseSBmaXJlIGFuIGluaXRpYWwgZXZlbnQsIGluZGljYXRpbmcgYWxsIGV4aXN0aW5nIGxpc3RlbmVyc1xuICAgICAgICAvLyBhcmUgaW4tc3luYy5cbiAgICAgICAgZS5uZXh0KCk7XG4gICAgfShhd2FpdCBLYSh0KSwgbikpKSwgKCkgPT4ge1xuICAgICAgICBuLkRjKCksIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICBMKHQpLmt1LmRlbGV0ZShlKTtcbiAgICAgICAgfShhd2FpdCBLYSh0KSwgbikpKTtcbiAgICB9O1xufVxuXG4vKipcbiAqIFRha2VzIGFuIHVwZGF0ZUZ1bmN0aW9uIGluIHdoaWNoIGEgc2V0IG9mIHJlYWRzIGFuZCB3cml0ZXMgY2FuIGJlIHBlcmZvcm1lZFxuICogYXRvbWljYWxseS4gSW4gdGhlIHVwZGF0ZUZ1bmN0aW9uLCB0aGUgY2xpZW50IGNhbiByZWFkIGFuZCB3cml0ZSB2YWx1ZXNcbiAqIHVzaW5nIHRoZSBzdXBwbGllZCB0cmFuc2FjdGlvbiBvYmplY3QuIEFmdGVyIHRoZSB1cGRhdGVGdW5jdGlvbiwgYWxsXG4gKiBjaGFuZ2VzIHdpbGwgYmUgY29tbWl0dGVkLiBJZiBhIHJldHJ5YWJsZSBlcnJvciBvY2N1cnMgKGV4OiBzb21lIG90aGVyXG4gKiBjbGllbnQgaGFzIGNoYW5nZWQgYW55IG9mIHRoZSBkYXRhIHJlZmVyZW5jZWQpLCB0aGVuIHRoZSB1cGRhdGVGdW5jdGlvblxuICogd2lsbCBiZSBjYWxsZWQgYWdhaW4gYWZ0ZXIgYSBiYWNrb2ZmLiBJZiB0aGUgdXBkYXRlRnVuY3Rpb24gc3RpbGwgZmFpbHNcbiAqIGFmdGVyIGFsbCByZXRyaWVzLCB0aGVuIHRoZSB0cmFuc2FjdGlvbiB3aWxsIGJlIHJlamVjdGVkLlxuICpcbiAqIFRoZSB0cmFuc2FjdGlvbiBvYmplY3QgcGFzc2VkIHRvIHRoZSB1cGRhdGVGdW5jdGlvbiBjb250YWlucyBtZXRob2RzIGZvclxuICogYWNjZXNzaW5nIGRvY3VtZW50cyBhbmQgY29sbGVjdGlvbnMuIFVubGlrZSBvdGhlciBkYXRhc3RvcmUgYWNjZXNzLCBkYXRhXG4gKiBhY2Nlc3NlZCB3aXRoIHRoZSB0cmFuc2FjdGlvbiB3aWxsIG5vdCByZWZsZWN0IGxvY2FsIGNoYW5nZXMgdGhhdCBoYXZlIG5vdFxuICogYmVlbiBjb21taXR0ZWQuIEZvciB0aGlzIHJlYXNvbiwgaXQgaXMgcmVxdWlyZWQgdGhhdCBhbGwgcmVhZHMgYXJlXG4gKiBwZXJmb3JtZWQgYmVmb3JlIGFueSB3cml0ZXMuIFRyYW5zYWN0aW9ucyBtdXN0IGJlIHBlcmZvcm1lZCB3aGlsZSBvbmxpbmUuXG4gKi8gZnVuY3Rpb24gWWEodCwgZSwgbiwgcykge1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGxldCBuO1xuICAgICAgICBuID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgdCA/IGhpKCkuZW5jb2RlKHQpIDogdDtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgU2EodCwgZSk7XG4gICAgICAgIH0oZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBVaW50OEFycmF5KSByZXR1cm4gYmEodCwgZSk7XG4gICAgICAgICAgICBpZiAodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSByZXR1cm4gYmEobmV3IFVpbnQ4QXJyYXkodCksIGUpO1xuICAgICAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbSkgcmV0dXJuIHQuZ2V0UmVhZGVyKCk7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJTb3VyY2Ugb2YgYHRvQnl0ZVN0cmVhbVJlYWRlcmAgaGFzIHRvIGJlIGEgQXJyYXlCdWZmZXIgb3IgUmVhZGFibGVTdHJlYW1cIik7XG4gICAgICAgIH0obiksIGUpO1xuICAgIH0obiwgRnUoZSkpO1xuICAgIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB7XG4gICAgICAgIFRhKGF3YWl0IHFhKHQpLCBpLCBzKTtcbiAgICB9KSk7XG59XG5cbmZ1bmN0aW9uIFhhKHQsIGUpIHtcbiAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWUoKGFzeW5jICgpID0+IGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IEwodCk7XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiR2V0IG5hbWVkIHF1ZXJ5XCIsIFwicmVhZG9ubHlcIiwgKHQgPT4gbi5xcy5nZXROYW1lZFF1ZXJ5KHQsIGUpKSk7XG4gICAgfShhd2FpdCBCYSh0KSwgZSkpKTtcbn1cblxuZnVuY3Rpb24gWmEodCwgZSkge1xuICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZSgoYXN5bmMgKCkgPT4gYXN5bmMgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gTCh0KSwgcyA9IG4uaW5kZXhNYW5hZ2VyLCBpID0gW107XG4gICAgICAgIHJldHVybiBuLnBlcnNpc3RlbmNlLnJ1blRyYW5zYWN0aW9uKFwiQ29uZmlndXJlIGluZGV4ZXNcIiwgXCJyZWFkd3JpdGVcIiwgKHQgPT4gcy5nZXRGaWVsZEluZGV4ZXModCkubmV4dCgobiA9PiBcbiAgICAgICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAgICAgLyoqXG4gKiBDb21wYXJlcyB0d28gYXJyYXkgZm9yIGVxdWFsaXR5IHVzaW5nIGNvbXBhcmF0b3IuIFRoZSBtZXRob2QgY29tcHV0ZXMgdGhlXG4gKiBpbnRlcnNlY3Rpb24gYW5kIGludm9rZXMgYG9uQWRkYCBmb3IgZXZlcnkgZWxlbWVudCB0aGF0IGlzIGluIGBhZnRlcmAgYnV0IG5vdFxuICogYGJlZm9yZWAuIGBvblJlbW92ZWAgaXMgaW52b2tlZCBmb3IgZXZlcnkgZWxlbWVudCBpbiBgYmVmb3JlYCBidXQgbWlzc2luZ1xuICogZnJvbSBgYWZ0ZXJgLlxuICpcbiAqIFRoZSBtZXRob2QgY3JlYXRlcyBhIGNvcHkgb2YgYm90aCBgYmVmb3JlYCBhbmQgYGFmdGVyYCBhbmQgcnVucyBpbiBPKG4gbG9nXG4gKiBuKSwgd2hlcmUgbiBpcyB0aGUgc2l6ZSBvZiB0aGUgdHdvIGxpc3RzLlxuICpcbiAqIEBwYXJhbSBiZWZvcmUgLSBUaGUgZWxlbWVudHMgdGhhdCBleGlzdCBpbiB0aGUgb3JpZ2luYWwgYXJyYXkuXG4gKiBAcGFyYW0gYWZ0ZXIgLSBUaGUgZWxlbWVudHMgdG8gZGlmZiBhZ2FpbnN0IHRoZSBvcmlnaW5hbCBhcnJheS5cbiAqIEBwYXJhbSBjb21wYXJhdG9yIC0gVGhlIGNvbXBhcmF0b3IgZm9yIHRoZSBlbGVtZW50cyBpbiBiZWZvcmUgYW5kIGFmdGVyLlxuICogQHBhcmFtIG9uQWRkIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mIGBcbiAqIGFmdGVyYCBidXQgbm90IGBiZWZvcmVgLlxuICogQHBhcmFtIG9uUmVtb3ZlIC0gQSBmdW5jdGlvbiB0byBpbnZva2UgZm9yIGV2ZXJ5IGVsZW1lbnQgdGhhdCBpcyBwYXJ0IG9mXG4gKiBgYmVmb3JlYCBidXQgbm90IGBhZnRlcmAuXG4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSwgbiwgcywgaSkge1xuICAgICAgICAgICAgdCA9IFsgLi4udCBdLCBlID0gWyAuLi5lIF0sIHQuc29ydChuKSwgZS5zb3J0KG4pO1xuICAgICAgICAgICAgY29uc3QgciA9IHQubGVuZ3RoLCBvID0gZS5sZW5ndGg7XG4gICAgICAgICAgICBsZXQgdSA9IDAsIGMgPSAwO1xuICAgICAgICAgICAgZm9yICg7dSA8IG8gJiYgYyA8IHI7ICkge1xuICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBuKHRbY10sIGVbdV0pO1xuICAgICAgICAgICAgICAgIHIgPCAwID8gXG4gICAgICAgICAgICAgICAgLy8gVGhlIGVsZW1lbnQgd2FzIHJlbW92ZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZFxuICAgICAgICAgICAgICAgIC8vIHdhbGt0aHJvdWdoIGlzIG9ubHkgaW4gYGJlZm9yZWAuXG4gICAgICAgICAgICAgICAgaSh0W2MrK10pIDogciA+IDAgPyBcbiAgICAgICAgICAgICAgICAvLyBUaGUgZWxlbWVudCB3YXMgYWRkZWQgaWYgdGhlIG5leHQgZWxlbWVudCBpbiBvdXIgb3JkZXJlZCB3YWxrdGhyb3VnaFxuICAgICAgICAgICAgICAgIC8vIGlzIG9ubHkgaW4gYGFmdGVyYC5cbiAgICAgICAgICAgICAgICBzKGVbdSsrXSkgOiAodSsrLCBjKyspO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZm9yICg7dSA8IG87ICkgcyhlW3UrK10pO1xuICAgICAgICAgICAgZm9yICg7YyA8IHI7ICkgaSh0W2MrK10pO1xuICAgICAgICB9KG4sIGUsIHd0LCAoZSA9PiB7XG4gICAgICAgICAgICBpLnB1c2gocy5hZGRGaWVsZEluZGV4KHQsIGUpKTtcbiAgICAgICAgfSksIChlID0+IHtcbiAgICAgICAgICAgIGkucHVzaChzLmRlbGV0ZUZpZWxkSW5kZXgodCwgZSkpO1xuICAgICAgICB9KSkpKS5uZXh0KCgoKSA9PiBSdC53YWl0Rm9yKGkpKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvLyBUaGUgZm9ybWF0IG9mIHRoZSBMb2NhbFN0b3JhZ2Uga2V5IHRoYXQgc3RvcmVzIHRoZSBjbGllbnQgc3RhdGUgaXM6XG4gICAgLy8gICAgIGZpcmVzdG9yZV9jbGllbnRzXzxwZXJzaXN0ZW5jZV9wcmVmaXg+XzxpbnN0YW5jZV9rZXk+XG4gICAgKGF3YWl0IEJhKHQpLCBlKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDb21wYXJlcyB0d28gYEV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9uc2Agb2JqZWN0cyBmb3IgZXF1YWxpdHkuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIG5ldyBgRXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zYCB3aXRoIHRoZSBzYW1lXG4gKiBvcHRpb24gdmFsdWVzIGFzIHRoZSBnaXZlbiBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gdGgodCkge1xuICAgIGNvbnN0IGUgPSB7fTtcbiAgICByZXR1cm4gdm9pZCAwICE9PSB0LnRpbWVvdXRTZWNvbmRzICYmIChlLnRpbWVvdXRTZWNvbmRzID0gdC50aW1lb3V0U2Vjb25kcyksIGU7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IGVoID0gbmV3IE1hcDtcblxuLyoqXG4gKiBBbiBpbnN0YW5jZSBtYXAgdGhhdCBlbnN1cmVzIG9ubHkgb25lIERhdGFzdG9yZSBleGlzdHMgcGVyIEZpcmVzdG9yZVxuICogaW5zdGFuY2UuXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG5mdW5jdGlvbiBuaCh0LCBlLCBuKSB7XG4gICAgaWYgKCFuKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgY2Fubm90IGJlIGNhbGxlZCB3aXRoIGFuIGVtcHR5ICR7ZX0uYCk7XG59XG5cbi8qKlxuICogVmFsaWRhdGVzIHRoYXQgdHdvIGJvb2xlYW4gb3B0aW9ucyBhcmUgbm90IHNldCBhdCB0aGUgc2FtZSB0aW1lLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gc2godCwgZSwgbiwgcykge1xuICAgIGlmICghMCA9PT0gZSAmJiAhMCA9PT0gcykgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgJHt0fSBhbmQgJHtufSBjYW5ub3QgYmUgdXNlZCB0b2dldGhlci5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgKGluZGljYXRlZCBieSB0aGUgZmFjdCBpdCBjb250YWluc1xuICogYW4gZXZlbiBudW1iZXJzIG9mIHNlZ21lbnRzKS5cbiAqLyBmdW5jdGlvbiBpaCh0KSB7XG4gICAgaWYgKCFodC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgcmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBWYWxpZGF0ZXMgdGhhdCBgcGF0aGAgcmVmZXJzIHRvIGEgY29sbGVjdGlvbiAoaW5kaWNhdGVkIGJ5IHRoZSBmYWN0IGl0XG4gKiBjb250YWlucyBhbiBvZGQgbnVtYmVycyBvZiBzZWdtZW50cykuXG4gKi8gZnVuY3Rpb24gcmgodCkge1xuICAgIGlmIChodC5pc0RvY3VtZW50S2V5KHQpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIGNvbGxlY3Rpb24gcmVmZXJlbmNlLiBDb2xsZWN0aW9uIHJlZmVyZW5jZXMgbXVzdCBoYXZlIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAke3R9IGhhcyAke3QubGVuZ3RofS5gKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgaXQncyBhIG5vbi1udWxsIG9iamVjdCB3aXRob3V0IGEgY3VzdG9tIHByb3RvdHlwZVxuICogKGkuZS4gZXhjbHVkZXMgQXJyYXksIERhdGUsIGV0Yy4pLlxuICovXG4vKiogUmV0dXJucyBhIHN0cmluZyBkZXNjcmliaW5nIHRoZSB0eXBlIC8gdmFsdWUgb2YgdGhlIHByb3ZpZGVkIGlucHV0LiAqL1xuZnVuY3Rpb24gb2godCkge1xuICAgIGlmICh2b2lkIDAgPT09IHQpIHJldHVybiBcInVuZGVmaW5lZFwiO1xuICAgIGlmIChudWxsID09PSB0KSByZXR1cm4gXCJudWxsXCI7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB0Lmxlbmd0aCA+IDIwICYmICh0ID0gYCR7dC5zdWJzdHJpbmcoMCwgMjApfS4uLmApLCBcbiAgICBKU09OLnN0cmluZ2lmeSh0KTtcbiAgICBpZiAoXCJudW1iZXJcIiA9PSB0eXBlb2YgdCB8fCBcImJvb2xlYW5cIiA9PSB0eXBlb2YgdCkgcmV0dXJuIFwiXCIgKyB0O1xuICAgIGlmIChcIm9iamVjdFwiID09IHR5cGVvZiB0KSB7XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgQXJyYXkpIHJldHVybiBcImFuIGFycmF5XCI7XG4gICAgICAgIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBcbiAgICAgICAgICAgIC8qKiB0cnkgdG8gZ2V0IHRoZSBjb25zdHJ1Y3RvciBuYW1lIGZvciBhbiBvYmplY3QuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHQuY29uc3RydWN0b3IpIHJldHVybiB0LmNvbnN0cnVjdG9yLm5hbWU7XG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvKipcbiAqIENhc3RzIGBvYmpgIHRvIGBUYCwgb3B0aW9uYWxseSB1bndyYXBwaW5nIENvbXBhdCB0eXBlcyB0byBleHBvc2UgdGhlXG4gKiB1bmRlcmx5aW5nIGluc3RhbmNlLiBUaHJvd3MgaWYgIGBvYmpgIGlzIG5vdCBhbiBpbnN0YW5jZSBvZiBgVGAuXG4gKlxuICogVGhpcyBjYXN0IGlzIHVzZWQgaW4gdGhlIExpdGUgYW5kIEZ1bGwgU0RLIHRvIHZlcmlmeSBpbnN0YW5jZSB0eXBlcyBmb3JcbiAqIGFyZ3VtZW50cyBwYXNzZWQgdG8gdGhlIHB1YmxpYyBBUEkuXG4gKiBAaW50ZXJuYWxcbiAqLyAodCk7XG4gICAgICAgICAgICByZXR1cm4gZSA/IGBhIGN1c3RvbSAke2V9IG9iamVjdGAgOiBcImFuIG9iamVjdFwiO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiBcImZ1bmN0aW9uXCIgPT0gdHlwZW9mIHQgPyBcImEgZnVuY3Rpb25cIiA6IE8oKTtcbn1cblxuZnVuY3Rpb24gdWgodCwgXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuZSkge1xuICAgIGlmIChcIl9kZWxlZ2F0ZVwiIGluIHQgJiYgKFxuICAgIC8vIFVud3JhcCBDb21wYXQgdHlwZXNcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIHQgPSB0Ll9kZWxlZ2F0ZSksICEodCBpbnN0YW5jZW9mIGUpKSB7XG4gICAgICAgIGlmIChlLm5hbWUgPT09IHQuY29uc3RydWN0b3IubmFtZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlR5cGUgZG9lcyBub3QgbWF0Y2ggdGhlIGV4cGVjdGVkIGluc3RhbmNlLiBEaWQgeW91IHBhc3MgYSByZWZlcmVuY2UgZnJvbSBhIGRpZmZlcmVudCBGaXJlc3RvcmUgU0RLP1wiKTtcbiAgICAgICAge1xuICAgICAgICAgICAgY29uc3QgbiA9IG9oKHQpO1xuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRXhwZWN0ZWQgdHlwZSAnJHtlLm5hbWV9JywgYnV0IGl0IHdhczogJHtufWApO1xuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0O1xufVxuXG5mdW5jdGlvbiBjaCh0LCBlKSB7XG4gICAgaWYgKGUgPD0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgRnVuY3Rpb24gJHt0fSgpIHJlcXVpcmVzIGEgcG9zaXRpdmUgbnVtYmVyLCBidXQgaXQgd2FzOiAke2V9LmApO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLy8gc2V0dGluZ3MoKSBkZWZhdWx0czpcbi8qKlxuICogQSBjb25jcmV0ZSB0eXBlIGRlc2NyaWJpbmcgYWxsIHRoZSB2YWx1ZXMgdGhhdCBjYW4gYmUgYXBwbGllZCB2aWEgYVxuICogdXNlci1zdXBwbGllZCBgRmlyZXN0b3JlU2V0dGluZ3NgIG9iamVjdC4gVGhpcyBpcyBhIHNlcGFyYXRlIHR5cGUgc28gdGhhdFxuICogZGVmYXVsdHMgY2FuIGJlIHN1cHBsaWVkIGFuZCB0aGUgdmFsdWUgY2FuIGJlIGNoZWNrZWQgZm9yIGVxdWFsaXR5LlxuICovXG5jbGFzcyBhaCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB2YXIgZSwgbjtcbiAgICAgICAgaWYgKHZvaWQgMCA9PT0gdC5ob3N0KSB7XG4gICAgICAgICAgICBpZiAodm9pZCAwICE9PSB0LnNzbCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkNhbid0IHByb3ZpZGUgc3NsIG9wdGlvbiBpZiBob3N0IG9wdGlvbiBpcyBub3Qgc2V0XCIpO1xuICAgICAgICAgICAgdGhpcy5ob3N0ID0gXCJmaXJlc3RvcmUuZ29vZ2xlYXBpcy5jb21cIiwgdGhpcy5zc2wgPSB0cnVlO1xuICAgICAgICB9IGVsc2UgdGhpcy5ob3N0ID0gdC5ob3N0LCB0aGlzLnNzbCA9IG51bGwgPT09IChlID0gdC5zc2wpIHx8IHZvaWQgMCA9PT0gZSB8fCBlO1xuICAgICAgICBpZiAodGhpcy5jcmVkZW50aWFscyA9IHQuY3JlZGVudGlhbHMsIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9ICEhdC5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCBcbiAgICAgICAgdGhpcy5jYWNoZSA9IHQubG9jYWxDYWNoZSwgdm9pZCAwID09PSB0LmNhY2hlU2l6ZUJ5dGVzKSB0aGlzLmNhY2hlU2l6ZUJ5dGVzID0gNDE5NDMwNDA7IGVsc2Uge1xuICAgICAgICAgICAgaWYgKC0xICE9PSB0LmNhY2hlU2l6ZUJ5dGVzICYmIHQuY2FjaGVTaXplQnl0ZXMgPCAxMDQ4NTc2KSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGVTaXplQnl0ZXMgbXVzdCBiZSBhdCBsZWFzdCAxMDQ4NTc2XCIpO1xuICAgICAgICAgICAgdGhpcy5jYWNoZVNpemVCeXRlcyA9IHQuY2FjaGVTaXplQnl0ZXM7XG4gICAgICAgIH1cbiAgICAgICAgc2goXCJleHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nXCIsIHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZywgXCJleHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmdcIiwgdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcpLCBcbiAgICAgICAgdGhpcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcsIHRoaXMuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyA/IHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gITEgOiB2b2lkIDAgPT09IHQuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID8gdGhpcy5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgPSB0cnVlIDogXG4gICAgICAgIC8vIEZvciBiYWNrd2FyZHMgY29tcGF0aWJpbGl0eSwgY29lcmNlIHRoZSB2YWx1ZSB0byBib29sZWFuIGV2ZW4gdGhvdWdoXG4gICAgICAgIC8vIHRoZSBUeXBlU2NyaXB0IGNvbXBpbGVyIGhhcyBuYXJyb3dlZCB0aGUgdHlwZSB0byBib29sZWFuIGFscmVhZHkuXG4gICAgICAgIC8vIG5vaW5zcGVjdGlvbiBQb2ludGxlc3NCb29sZWFuRXhwcmVzc2lvbkpTXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsQXV0b0RldGVjdExvbmdQb2xsaW5nID0gISF0LmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgXG4gICAgICAgIHRoaXMuZXhwZXJpbWVudGFsTG9uZ1BvbGxpbmdPcHRpb25zID0gdGgobnVsbCAhPT0gKG4gPSB0LmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucykgJiYgdm9pZCAwICE9PSBuID8gbiA6IHt9KSwgXG4gICAgICAgIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGlmICh2b2lkIDAgIT09IHQudGltZW91dFNlY29uZHMpIHtcbiAgICAgICAgICAgICAgICBpZiAoaXNOYU4odC50aW1lb3V0U2Vjb25kcykpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7dC50aW1lb3V0U2Vjb25kc30gKG11c3Qgbm90IGJlIE5hTilgKTtcbiAgICAgICAgICAgICAgICBpZiAodC50aW1lb3V0U2Vjb25kcyA8IDUpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7dC50aW1lb3V0U2Vjb25kc30gKG1pbmltdW0gYWxsb3dlZCB2YWx1ZSBpcyA1KWApO1xuICAgICAgICAgICAgICAgIGlmICh0LnRpbWVvdXRTZWNvbmRzID4gMzApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYGludmFsaWQgbG9uZyBwb2xsaW5nIHRpbWVvdXQ6ICR7dC50aW1lb3V0U2Vjb25kc30gKG1heGltdW0gYWxsb3dlZCB2YWx1ZSBpcyAzMClgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgICAgICAvKipcbiAqIFRoZSBDbG91ZCBGaXJlc3RvcmUgc2VydmljZSBpbnRlcmZhY2UuXG4gKlxuICogRG8gbm90IGNhbGwgdGhpcyBjb25zdHJ1Y3RvciBkaXJlY3RseS4gSW5zdGVhZCwgdXNlIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS5cbiAqLyAodGhpcy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpLCB0aGlzLnVzZUZldGNoU3RyZWFtcyA9ICEhdC51c2VGZXRjaFN0cmVhbXM7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ob3N0ID09PSB0Lmhvc3QgJiYgdGhpcy5zc2wgPT09IHQuc3NsICYmIHRoaXMuY3JlZGVudGlhbHMgPT09IHQuY3JlZGVudGlhbHMgJiYgdGhpcy5jYWNoZVNpemVCeXRlcyA9PT0gdC5jYWNoZVNpemVCeXRlcyAmJiB0aGlzLmV4cGVyaW1lbnRhbEZvcmNlTG9uZ1BvbGxpbmcgPT09IHQuZXhwZXJpbWVudGFsRm9yY2VMb25nUG9sbGluZyAmJiB0aGlzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZyA9PT0gdC5leHBlcmltZW50YWxBdXRvRGV0ZWN0TG9uZ1BvbGxpbmcgJiYgKGUgPSB0aGlzLmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucywgXG4gICAgICAgIG4gPSB0LmV4cGVyaW1lbnRhbExvbmdQb2xsaW5nT3B0aW9ucywgZS50aW1lb3V0U2Vjb25kcyA9PT0gbi50aW1lb3V0U2Vjb25kcykgJiYgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzID09PSB0Lmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgJiYgdGhpcy51c2VGZXRjaFN0cmVhbXMgPT09IHQudXNlRmV0Y2hTdHJlYW1zO1xuICAgICAgICB2YXIgZSwgbjtcbiAgICB9XG59XG5cbmNsYXNzIGhoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMpIHtcbiAgICAgICAgdGhpcy5fYXV0aENyZWRlbnRpYWxzID0gdCwgdGhpcy5fYXBwQ2hlY2tDcmVkZW50aWFscyA9IGUsIHRoaXMuX2RhdGFiYXNlSWQgPSBuLCBcbiAgICAgICAgdGhpcy5fYXBwID0gcywgXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBXaGV0aGVyIGl0J3MgYSBGaXJlc3RvcmUgb3IgRmlyZXN0b3JlIExpdGUgaW5zdGFuY2UuXG4gICAgICAgICAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcImZpcmVzdG9yZS1saXRlXCIsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gXCIobGl0ZSlcIiwgdGhpcy5fc2V0dGluZ3MgPSBuZXcgYWgoe30pLCBcbiAgICAgICAgdGhpcy5fc2V0dGluZ3NGcm96ZW4gPSAhMTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBhc3NvY2lhdGVkIHdpdGggdGhpcyBgRmlyZXN0b3JlYCBzZXJ2aWNlXG4gICAgICogaW5zdGFuY2UuXG4gICAgICovICAgIGdldCBhcHAoKSB7XG4gICAgICAgIGlmICghdGhpcy5fYXBwKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiRmlyZXN0b3JlIHdhcyBub3QgaW5pdGlhbGl6ZWQgdXNpbmcgdGhlIEZpcmViYXNlIFNESy4gJ2FwcCcgaXMgbm90IGF2YWlsYWJsZVwiKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2FwcDtcbiAgICB9XG4gICAgZ2V0IF9pbml0aWFsaXplZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuO1xuICAgIH1cbiAgICBnZXQgX3Rlcm1pbmF0ZWQoKSB7XG4gICAgICAgIHJldHVybiB2b2lkIDAgIT09IHRoaXMuX3Rlcm1pbmF0ZVRhc2s7XG4gICAgfVxuICAgIF9zZXRTZXR0aW5ncyh0KSB7XG4gICAgICAgIGlmICh0aGlzLl9zZXR0aW5nc0Zyb3plbikgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIGl0cyBzZXR0aW5ncyBjYW4gbm8gbG9uZ2VyIGJlIGNoYW5nZWQuIFlvdSBjYW4gb25seSBtb2RpZnkgc2V0dGluZ3MgYmVmb3JlIGNhbGxpbmcgYW55IG90aGVyIG1ldGhvZHMgb24gYSBGaXJlc3RvcmUgb2JqZWN0LlwiKTtcbiAgICAgICAgdGhpcy5fc2V0dGluZ3MgPSBuZXcgYWgodCksIHZvaWQgMCAhPT0gdC5jcmVkZW50aWFscyAmJiAodGhpcy5fYXV0aENyZWRlbnRpYWxzID0gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgaWYgKCF0KSByZXR1cm4gbmV3IFE7XG4gICAgICAgICAgICBzd2l0Y2ggKHQudHlwZSkge1xuICAgICAgICAgICAgICBjYXNlIFwiZmlyc3RQYXJ0eVwiOlxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgSCh0LnNlc3Npb25JbmRleCB8fCBcIjBcIiwgdC5pYW1Ub2tlbiB8fCBudWxsLCB0LmF1dGhUb2tlbkZhY3RvcnkgfHwgbnVsbCk7XG5cbiAgICAgICAgICAgICAgY2FzZSBcInByb3ZpZGVyXCI6XG4gICAgICAgICAgICAgICAgcmV0dXJuIHQuY2xpZW50O1xuXG4gICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIm1ha2VBdXRoQ3JlZGVudGlhbHNQcm92aWRlciBmYWlsZWQgZHVlIHRvIGludmFsaWQgY3JlZGVudGlhbCB0eXBlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQuY3JlZGVudGlhbHMpKTtcbiAgICB9XG4gICAgX2dldFNldHRpbmdzKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc2V0dGluZ3M7XG4gICAgfVxuICAgIF9mcmVlemVTZXR0aW5ncygpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3NldHRpbmdzRnJvemVuID0gITAsIHRoaXMuX3NldHRpbmdzO1xuICAgIH1cbiAgICBfZGVsZXRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGVybWluYXRlVGFzayB8fCAodGhpcy5fdGVybWluYXRlVGFzayA9IHRoaXMuX3Rlcm1pbmF0ZSgpKSwgdGhpcy5fdGVybWluYXRlVGFzaztcbiAgICB9XG4gICAgLyoqIFJldHVybnMgYSBKU09OLXNlcmlhbGl6YWJsZSByZXByZXNlbnRhdGlvbiBvZiB0aGlzIGBGaXJlc3RvcmVgIGluc3RhbmNlLiAqLyAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBhcHA6IHRoaXMuX2FwcCxcbiAgICAgICAgICAgIGRhdGFiYXNlSWQ6IHRoaXMuX2RhdGFiYXNlSWQsXG4gICAgICAgICAgICBzZXR0aW5nczogdGhpcy5fc2V0dGluZ3NcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGVybWluYXRlcyBhbGwgY29tcG9uZW50cyB1c2VkIGJ5IHRoaXMgY2xpZW50LiBTdWJjbGFzc2VzIGNhbiBvdmVycmlkZVxuICAgICAqIHRoaXMgbWV0aG9kIHRvIGNsZWFuIHVwIHRoZWlyIG93biBkZXBlbmRlbmNpZXMsIGJ1dCBtdXN0IGFsc28gY2FsbCB0aGlzXG4gICAgICogbWV0aG9kLlxuICAgICAqXG4gICAgICogT25seSBldmVyIGNhbGxlZCBvbmNlLlxuICAgICAqLyAgICBfdGVybWluYXRlKCkge1xuICAgICAgICAvKipcbiAqIFJlbW92ZXMgYWxsIGNvbXBvbmVudHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBwcm92aWRlZCBpbnN0YW5jZS4gTXVzdCBiZSBjYWxsZWRcbiAqIHdoZW4gdGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIGlzIHRlcm1pbmF0ZWQuXG4gKi9cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQpIHtcbiAgICAgICAgICAgIGNvbnN0IGUgPSBlaC5nZXQodCk7XG4gICAgICAgICAgICBlICYmIChOKFwiQ29tcG9uZW50UHJvdmlkZXJcIiwgXCJSZW1vdmluZyBEYXRhc3RvcmVcIiksIGVoLmRlbGV0ZSh0KSwgZS50ZXJtaW5hdGUoKSk7XG4gICAgICAgIH0odGhpcyksIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBNb2RpZnkgdGhpcyBpbnN0YW5jZSB0byBjb21tdW5pY2F0ZSB3aXRoIHRoZSBDbG91ZCBGaXJlc3RvcmUgZW11bGF0b3IuXG4gKlxuICogTm90ZTogVGhpcyBtdXN0IGJlIGNhbGxlZCBiZWZvcmUgdGhpcyBpbnN0YW5jZSBoYXMgYmVlbiB1c2VkIHRvIGRvIGFueVxuICogb3BlcmF0aW9ucy5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gVGhlIGBGaXJlc3RvcmVgIGluc3RhbmNlIHRvIGNvbmZpZ3VyZSB0byBjb25uZWN0IHRvIHRoZVxuICogZW11bGF0b3IuXG4gKiBAcGFyYW0gaG9zdCAtIHRoZSBlbXVsYXRvciBob3N0IChleDogbG9jYWxob3N0KS5cbiAqIEBwYXJhbSBwb3J0IC0gdGhlIGVtdWxhdG9yIHBvcnQgKGV4OiA5MDAwKS5cbiAqIEBwYXJhbSBvcHRpb25zLm1vY2tVc2VyVG9rZW4gLSB0aGUgbW9jayBhdXRoIHRva2VuIHRvIHVzZSBmb3IgdW5pdCB0ZXN0aW5nXG4gKiBTZWN1cml0eSBSdWxlcy5cbiAqLyBmdW5jdGlvbiBsaCh0LCBlLCBuLCBzID0ge30pIHtcbiAgICB2YXIgaTtcbiAgICBjb25zdCByID0gKHQgPSB1aCh0LCBoaCkpLl9nZXRTZXR0aW5ncygpLCBvID0gYCR7ZX06JHtufWA7XG4gICAgaWYgKFwiZmlyZXN0b3JlLmdvb2dsZWFwaXMuY29tXCIgIT09IHIuaG9zdCAmJiByLmhvc3QgIT09IG8gJiYgTShcIkhvc3QgaGFzIGJlZW4gc2V0IGluIGJvdGggc2V0dGluZ3MoKSBhbmQgY29ubmVjdEZpcmVzdG9yZUVtdWxhdG9yKCksIGVtdWxhdG9yIGhvc3Qgd2lsbCBiZSB1c2VkLlwiKSwgXG4gICAgdC5fc2V0U2V0dGluZ3MoT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCByKSwge1xuICAgICAgICBob3N0OiBvLFxuICAgICAgICBzc2w6ICExXG4gICAgfSkpLCBzLm1vY2tVc2VyVG9rZW4pIHtcbiAgICAgICAgbGV0IGUsIG47XG4gICAgICAgIGlmIChcInN0cmluZ1wiID09IHR5cGVvZiBzLm1vY2tVc2VyVG9rZW4pIGUgPSBzLm1vY2tVc2VyVG9rZW4sIG4gPSBWLk1PQ0tfVVNFUjsgZWxzZSB7XG4gICAgICAgICAgICAvLyBMZXQgY3JlYXRlTW9ja1VzZXJUb2tlbiB2YWxpZGF0ZSBmaXJzdCAoY2F0Y2hlcyBjb21tb24gbWlzdGFrZXMgbGlrZVxuICAgICAgICAgICAgLy8gaW52YWxpZCBmaWVsZCBcInVpZFwiIGFuZCBtaXNzaW5nIGZpZWxkIFwic3ViXCIgLyBcInVzZXJfaWRcIi4pXG4gICAgICAgICAgICBlID0gY3JlYXRlTW9ja1VzZXJUb2tlbihzLm1vY2tVc2VyVG9rZW4sIG51bGwgPT09IChpID0gdC5fYXBwKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLm9wdGlvbnMucHJvamVjdElkKTtcbiAgICAgICAgICAgIGNvbnN0IHIgPSBzLm1vY2tVc2VyVG9rZW4uc3ViIHx8IHMubW9ja1VzZXJUb2tlbi51c2VyX2lkO1xuICAgICAgICAgICAgaWYgKCFyKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwibW9ja1VzZXJUb2tlbiBtdXN0IGNvbnRhaW4gJ3N1Yicgb3IgJ3VzZXJfaWQnIGZpZWxkIVwiKTtcbiAgICAgICAgICAgIG4gPSBuZXcgVihyKTtcbiAgICAgICAgfVxuICAgICAgICB0Ll9hdXRoQ3JlZGVudGlhbHMgPSBuZXcgaihuZXcgRyhlLCBuKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBIGBEb2N1bWVudFJlZmVyZW5jZWAgcmVmZXJzIHRvIGEgZG9jdW1lbnQgbG9jYXRpb24gaW4gYSBGaXJlc3RvcmUgZGF0YWJhc2VcbiAqIGFuZCBjYW4gYmUgdXNlZCB0byB3cml0ZSwgcmVhZCwgb3IgbGlzdGVuIHRvIHRoZSBsb2NhdGlvbi4gVGhlIGRvY3VtZW50IGF0XG4gKiB0aGUgcmVmZXJlbmNlZCBsb2NhdGlvbiBtYXkgb3IgbWF5IG5vdCBleGlzdC5cbiAqLyBjbGFzcyBmaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiZG9jdW1lbnRcIiwgdGhpcy5maXJlc3RvcmUgPSB0O1xuICAgIH1cbiAgICBnZXQgX3BhdGgoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9rZXkucGF0aDtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGRvY3VtZW50J3MgaWRlbnRpZmllciB3aXRoaW4gaXRzIGNvbGxlY3Rpb24uXG4gICAgICovICAgIGdldCBpZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBkb2N1bWVudCAocmVsYXRpdmVcbiAgICAgKiB0byB0aGUgcm9vdCBvZiB0aGUgZGF0YWJhc2UpLlxuICAgICAqLyAgICBnZXQgcGF0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2tleS5wYXRoLmNhbm9uaWNhbFN0cmluZygpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgY29sbGVjdGlvbiB0aGlzIGBEb2N1bWVudFJlZmVyZW5jZWAgYmVsb25ncyB0by5cbiAgICAgKi8gICAgZ2V0IHBhcmVudCgpIHtcbiAgICAgICAgcmV0dXJuIG5ldyB3aCh0aGlzLmZpcmVzdG9yZSwgdGhpcy5jb252ZXJ0ZXIsIHRoaXMuX2tleS5wYXRoLnBvcExhc3QoKSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGZoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9rZXkpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeWAgcmVmZXJzIHRvIGEgcXVlcnkgd2hpY2ggeW91IGNhbiByZWFkIG9yIGxpc3RlbiB0by4gWW91IGNhbiBhbHNvXG4gKiBjb25zdHJ1Y3QgcmVmaW5lZCBgUXVlcnlgIG9iamVjdHMgYnkgYWRkaW5nIGZpbHRlcnMgYW5kIG9yZGVyaW5nLlxuICovIGNsYXNzIGRoIHtcbiAgICAvLyBUaGlzIGlzIHRoZSBsaXRlIHZlcnNpb24gb2YgdGhlIFF1ZXJ5IGNsYXNzIGluIHRoZSBtYWluIFNESy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBcbiAgICAvKipcbiAgICAgKiBJZiBwcm92aWRlZCwgdGhlIGBGaXJlc3RvcmVEYXRhQ29udmVydGVyYCBhc3NvY2lhdGVkIHdpdGggdGhpcyBpbnN0YW5jZS5cbiAgICAgKi9cbiAgICBlLCBuKSB7XG4gICAgICAgIHRoaXMuY29udmVydGVyID0gZSwgdGhpcy5fcXVlcnkgPSBuLCBcbiAgICAgICAgLyoqIFRoZSB0eXBlIG9mIHRoaXMgRmlyZXN0b3JlIHJlZmVyZW5jZS4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJxdWVyeVwiLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IGRoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9xdWVyeSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYENvbGxlY3Rpb25SZWZlcmVuY2VgIG9iamVjdCBjYW4gYmUgdXNlZCBmb3IgYWRkaW5nIGRvY3VtZW50cywgZ2V0dGluZ1xuICogZG9jdW1lbnQgcmVmZXJlbmNlcywgYW5kIHF1ZXJ5aW5nIGZvciBkb2N1bWVudHMgKHVzaW5nIHtAbGluayAocXVlcnk6MSl9KS5cbiAqLyBjbGFzcyB3aCBleHRlbmRzIGRoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIodCwgZSwgR24obikpLCB0aGlzLl9wYXRoID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIEZpcmVzdG9yZSByZWZlcmVuY2UuICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwiY29sbGVjdGlvblwiO1xuICAgIH1cbiAgICAvKiogVGhlIGNvbGxlY3Rpb24ncyBpZGVudGlmaWVyLiAqLyAgICBnZXQgaWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeS5wYXRoLmxhc3RTZWdtZW50KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEEgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgcGF0aCBvZiB0aGUgcmVmZXJlbmNlZCBjb2xsZWN0aW9uIChyZWxhdGl2ZVxuICAgICAqIHRvIHRoZSByb290IG9mIHRoZSBkYXRhYmFzZSkuXG4gICAgICovICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcXVlcnkucGF0aC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQSByZWZlcmVuY2UgdG8gdGhlIGNvbnRhaW5pbmcgYERvY3VtZW50UmVmZXJlbmNlYCBpZiB0aGlzIGlzIGFcbiAgICAgKiBzdWJjb2xsZWN0aW9uLiBJZiB0aGlzIGlzbid0IGEgc3ViY29sbGVjdGlvbiwgdGhlIHJlZmVyZW5jZSBpcyBudWxsLlxuICAgICAqLyAgICBnZXQgcGFyZW50KCkge1xuICAgICAgICBjb25zdCB0ID0gdGhpcy5fcGF0aC5wb3BMYXN0KCk7XG4gICAgICAgIHJldHVybiB0LmlzRW1wdHkoKSA/IG51bGwgOiBuZXcgZmgodGhpcy5maXJlc3RvcmUsIFxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIG5ldyBodCh0KSk7XG4gICAgfVxuICAgIHdpdGhDb252ZXJ0ZXIodCkge1xuICAgICAgICByZXR1cm4gbmV3IHdoKHRoaXMuZmlyZXN0b3JlLCB0LCB0aGlzLl9wYXRoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIF9oKHQsIGUsIC4uLm4pIHtcbiAgICBpZiAodCA9IGdldE1vZHVsYXJJbnN0YW5jZSh0KSwgbmgoXCJjb2xsZWN0aW9uXCIsIFwicGF0aFwiLCBlKSwgdCBpbnN0YW5jZW9mIGhoKSB7XG4gICAgICAgIGNvbnN0IHMgPSB1dC5mcm9tU3RyaW5nKGUsIC4uLm4pO1xuICAgICAgICByZXR1cm4gcmgocyksIG5ldyB3aCh0LCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIHMpO1xuICAgIH1cbiAgICB7XG4gICAgICAgIGlmICghKHQgaW5zdGFuY2VvZiBmaCB8fCB0IGluc3RhbmNlb2Ygd2gpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRXhwZWN0ZWQgZmlyc3QgYXJndW1lbnQgdG8gY29sbGVjdGlvbigpIHRvIGJlIGEgQ29sbGVjdGlvblJlZmVyZW5jZSwgYSBEb2N1bWVudFJlZmVyZW5jZSBvciBGaXJlYmFzZUZpcmVzdG9yZVwiKTtcbiAgICAgICAgY29uc3QgcyA9IHQuX3BhdGguY2hpbGQodXQuZnJvbVN0cmluZyhlLCAuLi5uKSk7XG4gICAgICAgIHJldHVybiByaChzKSwgbmV3IHdoKHQuZmlyZXN0b3JlLCBcbiAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsLCBzKTtcbiAgICB9XG59XG5cbi8vIFRPRE8oZmlyZXN0b3JlbGl0ZSk6IENvbnNpZGVyIHVzaW5nIEVycm9yRmFjdG9yeSAtXG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmlyZWJhc2UvZmlyZWJhc2UtanMtc2RrL2Jsb2IvMDEzMWUxZi9wYWNrYWdlcy91dGlsL3NyYy9lcnJvcnMudHMjTDEwNlxuLyoqXG4gKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgbmV3IGBRdWVyeWAgaW5zdGFuY2UgdGhhdCBpbmNsdWRlcyBhbGwgZG9jdW1lbnRzIGluIHRoZVxuICogZGF0YWJhc2UgdGhhdCBhcmUgY29udGFpbmVkIGluIGEgY29sbGVjdGlvbiBvciBzdWJjb2xsZWN0aW9uIHdpdGggdGhlXG4gKiBnaXZlbiBgY29sbGVjdGlvbklkYC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIHJvb3QgYEZpcmVzdG9yZWAgaW5zdGFuY2UuXG4gKiBAcGFyYW0gY29sbGVjdGlvbklkIC0gSWRlbnRpZmllcyB0aGUgY29sbGVjdGlvbnMgdG8gcXVlcnkgb3Zlci4gRXZlcnlcbiAqIGNvbGxlY3Rpb24gb3Igc3ViY29sbGVjdGlvbiB3aXRoIHRoaXMgSUQgYXMgdGhlIGxhc3Qgc2VnbWVudCBvZiBpdHMgcGF0aFxuICogd2lsbCBiZSBpbmNsdWRlZC4gQ2Fubm90IGNvbnRhaW4gYSBzbGFzaC5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIGBRdWVyeWAuXG4gKi8gZnVuY3Rpb24gbWgodCwgZSkge1xuICAgIGlmICh0ID0gdWgodCwgaGgpLCBuaChcImNvbGxlY3Rpb25Hcm91cFwiLCBcImNvbGxlY3Rpb24gaWRcIiwgZSksIGUuaW5kZXhPZihcIi9cIikgPj0gMCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBjb2xsZWN0aW9uIElEICcke2V9JyBwYXNzZWQgdG8gZnVuY3Rpb24gY29sbGVjdGlvbkdyb3VwKCkuIENvbGxlY3Rpb24gSURzIG11c3Qgbm90IGNvbnRhaW4gJy8nLmApO1xuICAgIHJldHVybiBuZXcgZGgodCwgXG4gICAgLyogY29udmVydGVyPSAqLyBudWxsLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVW4odXQuZW1wdHlQYXRoKCksIHQpO1xuICAgIH0oZSkpO1xufVxuXG5mdW5jdGlvbiBnaCh0LCBlLCAuLi5uKSB7XG4gICAgaWYgKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIFxuICAgIC8vIFdlIGFsbG93IG9taXNzaW9uIG9mICdwYXRoU3RyaW5nJyBidXQgZXhwbGljaXRseSBwcm9oaWJpdCBwYXNzaW5nIGluIGJvdGhcbiAgICAvLyAndW5kZWZpbmVkJyBhbmQgJ251bGwnLlxuICAgIDEgPT09IGFyZ3VtZW50cy5sZW5ndGggJiYgKGUgPSB0dC5BKCkpLCBuaChcImRvY1wiLCBcInBhdGhcIiwgZSksIHQgaW5zdGFuY2VvZiBoaCkge1xuICAgICAgICBjb25zdCBzID0gdXQuZnJvbVN0cmluZyhlLCAuLi5uKTtcbiAgICAgICAgcmV0dXJuIGloKHMpLCBuZXcgZmgodCwgXG4gICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgbmV3IGh0KHMpKTtcbiAgICB9XG4gICAge1xuICAgICAgICBpZiAoISh0IGluc3RhbmNlb2YgZmggfHwgdCBpbnN0YW5jZW9mIHdoKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkV4cGVjdGVkIGZpcnN0IGFyZ3VtZW50IHRvIGNvbGxlY3Rpb24oKSB0byBiZSBhIENvbGxlY3Rpb25SZWZlcmVuY2UsIGEgRG9jdW1lbnRSZWZlcmVuY2Ugb3IgRmlyZWJhc2VGaXJlc3RvcmVcIik7XG4gICAgICAgIGNvbnN0IHMgPSB0Ll9wYXRoLmNoaWxkKHV0LmZyb21TdHJpbmcoZSwgLi4ubikpO1xuICAgICAgICByZXR1cm4gaWgocyksIG5ldyBmaCh0LmZpcmVzdG9yZSwgdCBpbnN0YW5jZW9mIHdoID8gdC5jb252ZXJ0ZXIgOiBudWxsLCBuZXcgaHQocykpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHJlZmVyZW5jZXMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSByZWZlcmVuY2UgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSByaWdodCAtIEEgcmVmZXJlbmNlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB0cnVlIGlmIHRoZSByZWZlcmVuY2VzIHBvaW50IHRvIHRoZSBzYW1lIGxvY2F0aW9uIGluIHRoZSBzYW1lXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UuXG4gKi8gZnVuY3Rpb24geWgodCwgZSkge1xuICAgIHJldHVybiB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpLCBlID0gZ2V0TW9kdWxhckluc3RhbmNlKGUpLCAodCBpbnN0YW5jZW9mIGZoIHx8IHQgaW5zdGFuY2VvZiB3aCkgJiYgKGUgaW5zdGFuY2VvZiBmaCB8fCBlIGluc3RhbmNlb2Ygd2gpICYmICh0LmZpcmVzdG9yZSA9PT0gZS5maXJlc3RvcmUgJiYgdC5wYXRoID09PSBlLnBhdGggJiYgdC5jb252ZXJ0ZXIgPT09IGUuY29udmVydGVyKTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIHByb3ZpZGVkIHF1ZXJpZXMgcG9pbnQgdG8gdGhlIHNhbWUgY29sbGVjdGlvbiBhbmQgYXBwbHlcbiAqIHRoZSBzYW1lIGNvbnN0cmFpbnRzLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBgUXVlcnlgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBBIGBRdWVyeWAgdG8gY29tcGFyZS5cbiAqIEByZXR1cm5zIHRydWUgaWYgdGhlIHJlZmVyZW5jZXMgcG9pbnQgdG8gdGhlIHNhbWUgbG9jYXRpb24gaW4gdGhlIHNhbWVcbiAqIEZpcmVzdG9yZSBkYXRhYmFzZS5cbiAqLyBmdW5jdGlvbiBwaCh0LCBlKSB7XG4gICAgcmV0dXJuIHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCksIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSksIHQgaW5zdGFuY2VvZiBkaCAmJiBlIGluc3RhbmNlb2YgZGggJiYgKHQuZmlyZXN0b3JlID09PSBlLmZpcmVzdG9yZSAmJiBabih0Ll9xdWVyeSwgZS5fcXVlcnkpICYmIHQuY29udmVydGVyID09PSBlLmNvbnZlcnRlcik7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNsYXNzIEloIHtcbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgLy8gVGhlIGxhc3QgcHJvbWlzZSBpbiB0aGUgcXVldWUuXG4gICAgICAgIHRoaXMuR2MgPSBQcm9taXNlLnJlc29sdmUoKSwgXG4gICAgICAgIC8vIEEgbGlzdCBvZiByZXRyeWFibGUgb3BlcmF0aW9ucy4gUmV0cnlhYmxlIG9wZXJhdGlvbnMgYXJlIHJ1biBpbiBvcmRlciBhbmRcbiAgICAgICAgLy8gcmV0cmllZCB3aXRoIGJhY2tvZmYuXG4gICAgICAgIHRoaXMuUWMgPSBbXSwgXG4gICAgICAgIC8vIElzIHRoaXMgQXN5bmNRdWV1ZSBiZWluZyBzaHV0IGRvd24/IE9uY2UgaXQgaXMgc2V0IHRvIHRydWUsIGl0IHdpbGwgbm90XG4gICAgICAgIC8vIGJlIGNoYW5nZWQgYWdhaW4uXG4gICAgICAgIHRoaXMuamMgPSAhMSwgXG4gICAgICAgIC8vIE9wZXJhdGlvbnMgc2NoZWR1bGVkIHRvIGJlIHF1ZXVlZCBpbiB0aGUgZnV0dXJlLiBPcGVyYXRpb25zIGFyZVxuICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IHJlbW92ZWQgYWZ0ZXIgdGhleSBhcmUgcnVuIG9yIGNhbmNlbGVkLlxuICAgICAgICB0aGlzLnpjID0gW10sIFxuICAgICAgICAvLyB2aXNpYmxlIGZvciB0ZXN0aW5nXG4gICAgICAgIHRoaXMuV2MgPSBudWxsLCBcbiAgICAgICAgLy8gRmxhZyBzZXQgd2hpbGUgdGhlcmUncyBhbiBvdXRzdGFuZGluZyBBc3luY1F1ZXVlIG9wZXJhdGlvbiwgdXNlZCBmb3JcbiAgICAgICAgLy8gYXNzZXJ0aW9uIHNhbml0eS1jaGVja3MuXG4gICAgICAgIHRoaXMuSGMgPSAhMSwgXG4gICAgICAgIC8vIEVuYWJsZWQgZHVyaW5nIHNodXRkb3duIG9uIFNhZmFyaSB0byBwcmV2ZW50IGZ1dHVyZSBhY2Nlc3MgdG8gSW5kZXhlZERCLlxuICAgICAgICB0aGlzLkpjID0gITEsIFxuICAgICAgICAvLyBMaXN0IG9mIFRpbWVySWRzIHRvIGZhc3QtZm9yd2FyZCBkZWxheXMgZm9yLlxuICAgICAgICB0aGlzLlljID0gW10sIFxuICAgICAgICAvLyBCYWNrb2ZmIHRpbWVyIHVzZWQgdG8gc2NoZWR1bGUgcmV0cmllcyBmb3IgcmV0cnlhYmxlIG9wZXJhdGlvbnNcbiAgICAgICAgdGhpcy5xbyA9IG5ldyBCdSh0aGlzLCBcImFzeW5jX3F1ZXVlX3JldHJ5XCIgLyogVGltZXJJZC5Bc3luY1F1ZXVlUmV0cnkgKi8pLCBcbiAgICAgICAgLy8gVmlzaWJpbGl0eSBoYW5kbGVyIHRoYXQgdHJpZ2dlcnMgYW4gaW1tZWRpYXRlIHJldHJ5IG9mIGFsbCByZXRyeWFibGVcbiAgICAgICAgLy8gb3BlcmF0aW9ucy4gTWVhbnQgdG8gc3BlZWQgdXAgcmVjb3Zlcnkgd2hlbiB3ZSByZWdhaW4gZmlsZSBzeXN0ZW0gYWNjZXNzXG4gICAgICAgIC8vIGFmdGVyIHBhZ2UgY29tZXMgaW50byBmb3JlZ3JvdW5kLlxuICAgICAgICB0aGlzLlhjID0gKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgdCA9IE91KCk7XG4gICAgICAgICAgICB0ICYmIE4oXCJBc3luY1F1ZXVlXCIsIFwiVmlzaWJpbGl0eSBzdGF0ZSBjaGFuZ2VkIHRvIFwiICsgdC52aXNpYmlsaXR5U3RhdGUpLCB0aGlzLnFvLk1vKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHQgPSBPdSgpO1xuICAgICAgICB0ICYmIFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgdC5hZGRFdmVudExpc3RlbmVyICYmIHQuYWRkRXZlbnRMaXN0ZW5lcihcInZpc2liaWxpdHljaGFuZ2VcIiwgdGhpcy5YYyk7XG4gICAgfVxuICAgIGdldCBpc1NodXR0aW5nRG93bigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuamM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEFkZHMgYSBuZXcgb3BlcmF0aW9uIHRvIHRoZSBxdWV1ZSB3aXRob3V0IHdhaXRpbmcgZm9yIGl0IHRvIGNvbXBsZXRlIChpLmUuXG4gICAgICogd2UgaWdub3JlIHRoZSBQcm9taXNlIHJlc3VsdCkuXG4gICAgICovICAgIGVucXVldWVBbmRGb3JnZXQodCkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMuZW5xdWV1ZSh0KTtcbiAgICB9XG4gICAgZW5xdWV1ZUFuZEZvcmdldEV2ZW5XaGlsZVJlc3RyaWN0ZWQodCkge1xuICAgICAgICB0aGlzLlpjKCksIFxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWZsb2F0aW5nLXByb21pc2VzXG4gICAgICAgIHRoaXMudGEodCk7XG4gICAgfVxuICAgIGVudGVyUmVzdHJpY3RlZE1vZGUodCkge1xuICAgICAgICBpZiAoIXRoaXMuamMpIHtcbiAgICAgICAgICAgIHRoaXMuamMgPSAhMCwgdGhpcy5KYyA9IHQgfHwgITE7XG4gICAgICAgICAgICBjb25zdCBlID0gT3UoKTtcbiAgICAgICAgICAgIGUgJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBlLnJlbW92ZUV2ZW50TGlzdGVuZXIgJiYgZS5yZW1vdmVFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLCB0aGlzLlhjKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbnF1ZXVlKHQpIHtcbiAgICAgICAgaWYgKHRoaXMuWmMoKSwgdGhpcy5qYykgXG4gICAgICAgIC8vIFJldHVybiBhIFByb21pc2Ugd2hpY2ggbmV2ZXIgcmVzb2x2ZXMuXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgoKCkgPT4ge30pKTtcbiAgICAgICAgLy8gQ3JlYXRlIGEgZGVmZXJyZWQgUHJvbWlzZSB0aGF0IHdlIGNhbiByZXR1cm4gdG8gdGhlIGNhbGxlZS4gVGhpc1xuICAgICAgICAvLyBhbGxvd3MgdXMgdG8gcmV0dXJuIGEgXCJoYW5naW5nIFByb21pc2VcIiBvbmx5IHRvIHRoZSBjYWxsZWUgYW5kIHN0aWxsXG4gICAgICAgIC8vIGFkdmFuY2UgdGhlIHF1ZXVlIGV2ZW4gd2hlbiB0aGUgb3BlcmF0aW9uIGlzIG5vdCBydW4uXG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IG5ldyBLO1xuICAgICAgICByZXR1cm4gdGhpcy50YSgoKCkgPT4gdGhpcy5qYyAmJiB0aGlzLkpjID8gUHJvbWlzZS5yZXNvbHZlKCkgOiAodCgpLnRoZW4oZS5yZXNvbHZlLCBlLnJlamVjdCksIFxuICAgICAgICBlLnByb21pc2UpKSkudGhlbigoKCkgPT4gZS5wcm9taXNlKSk7XG4gICAgfVxuICAgIGVucXVldWVSZXRyeWFibGUodCkge1xuICAgICAgICB0aGlzLmVucXVldWVBbmRGb3JnZXQoKCgpID0+ICh0aGlzLlFjLnB1c2godCksIHRoaXMuZWEoKSkpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUnVucyB0aGUgbmV4dCBvcGVyYXRpb24gZnJvbSB0aGUgcmV0cnlhYmxlIHF1ZXVlLiBJZiB0aGUgb3BlcmF0aW9uIGZhaWxzLFxuICAgICAqIHJlc2NoZWR1bGVzIHdpdGggYmFja29mZi5cbiAgICAgKi8gICAgYXN5bmMgZWEoKSB7XG4gICAgICAgIGlmICgwICE9PSB0aGlzLlFjLmxlbmd0aCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLlFjWzBdKCksIHRoaXMuUWMuc2hpZnQoKSwgdGhpcy5xby5yZXNldCgpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIGlmICghRHQodCkpIHRocm93IHQ7XG4gLy8gRmFpbHVyZSB3aWxsIGJlIGhhbmRsZWQgYnkgQXN5bmNRdWV1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBOKFwiQXN5bmNRdWV1ZVwiLCBcIk9wZXJhdGlvbiBmYWlsZWQgd2l0aCByZXRyeWFibGUgZXJyb3I6IFwiICsgdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLlFjLmxlbmd0aCA+IDAgJiYgXG4gICAgICAgICAgICAvLyBJZiB0aGVyZSBhcmUgYWRkaXRpb25hbCBvcGVyYXRpb25zLCB3ZSByZS1zY2hlZHVsZSBgcmV0cnlOZXh0T3AoKWAuXG4gICAgICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSB0byBydW4gcmV0cnlhYmxlIG9wZXJhdGlvbnMgdGhhdCBmYWlsZWQgZHVyaW5nXG4gICAgICAgICAgICAvLyB0aGVpciBpbml0aWFsIGF0dGVtcHQgc2luY2Ugd2UgZG9uJ3Qga25vdyB3aGV0aGVyIHRoZXkgYXJlIGFscmVhZHlcbiAgICAgICAgICAgIC8vIGVucXVldWVkLiBJZiwgZm9yIGV4YW1wbGUsIGBvcDFgLCBgb3AyYCwgYG9wM2AgYXJlIGVucXVldWVkIGFuZCBgb3AxYFxuICAgICAgICAgICAgLy8gbmVlZHMgdG8gIGJlIHJlLXJ1biwgd2Ugd2lsbCBydW4gYG9wMWAsIGBvcDFgLCBgb3AyYCB1c2luZyB0aGVcbiAgICAgICAgICAgIC8vIGFscmVhZHkgZW5xdWV1ZWQgY2FsbHMgdG8gYHJldHJ5TmV4dE9wKClgLiBgb3AzKClgIHdpbGwgdGhlbiBydW4gaW4gdGhlXG4gICAgICAgICAgICAvLyBjYWxsIHNjaGVkdWxlZCBoZXJlLlxuICAgICAgICAgICAgLy8gU2luY2UgYGJhY2tvZmZBbmRSdW4oKWAgY2FuY2VscyBhbiBleGlzdGluZyBiYWNrb2ZmIGFuZCBzY2hlZHVsZXMgYVxuICAgICAgICAgICAgLy8gbmV3IGJhY2tvZmYgb24gZXZlcnkgY2FsbCwgdGhlcmUgaXMgb25seSBldmVyIGEgc2luZ2xlIGFkZGl0aW9uYWxcbiAgICAgICAgICAgIC8vIG9wZXJhdGlvbiBpbiB0aGUgcXVldWUuXG4gICAgICAgICAgICB0aGlzLnFvLk5vKCgoKSA9PiB0aGlzLmVhKCkpKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICB0YSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLkdjLnRoZW4oKCgpID0+ICh0aGlzLkhjID0gITAsIHQoKS5jYXRjaCgodCA9PiB7XG4gICAgICAgICAgICB0aGlzLldjID0gdCwgdGhpcy5IYyA9ICExO1xuICAgICAgICAgICAgY29uc3QgZSA9IFxuICAgICAgICAgICAgLyoqXG4gKiBDaHJvbWUgaW5jbHVkZXMgRXJyb3IubWVzc2FnZSBpbiBFcnJvci5zdGFjay4gT3RoZXIgYnJvd3NlcnMgZG8gbm90LlxuICogVGhpcyByZXR1cm5zIGV4cGVjdGVkIG91dHB1dCBvZiBtZXNzYWdlICsgc3RhY2sgd2hlbiBhdmFpbGFibGUuXG4gKiBAcGFyYW0gZXJyb3IgLSBFcnJvciBvciBGaXJlc3RvcmVFcnJvclxuICovXG4gICAgICAgICAgICBmdW5jdGlvbih0KSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSB0Lm1lc3NhZ2UgfHwgXCJcIjtcbiAgICAgICAgICAgICAgICB0LnN0YWNrICYmIChlID0gdC5zdGFjay5pbmNsdWRlcyh0Lm1lc3NhZ2UpID8gdC5zdGFjayA6IHQubWVzc2FnZSArIFwiXFxuXCIgKyB0LnN0YWNrKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovICh0KTtcbiAgICAgICAgICAgIC8vIFJlLXRocm93IHRoZSBlcnJvciBzbyB0aGF0IHRoaXMudGFpbCBiZWNvbWVzIGEgcmVqZWN0ZWQgUHJvbWlzZSBhbmRcbiAgICAgICAgICAgIC8vIGFsbCBmdXJ0aGVyIGF0dGVtcHRzIHRvIGNoYWluICh2aWEgLnRoZW4pIHdpbGwganVzdCBzaG9ydC1jaXJjdWl0XG4gICAgICAgICAgICAvLyBhbmQgcmV0dXJuIHRoZSByZWplY3RlZCBQcm9taXNlLlxuICAgICAgICAgICAgdGhyb3cgayhcIklOVEVSTkFMIFVOSEFORExFRCBFUlJPUjogXCIsIGUpLCB0O1xuICAgICAgICB9KSkudGhlbigodCA9PiAodGhpcy5IYyA9ICExLCB0KSkpKSkpO1xuICAgICAgICByZXR1cm4gdGhpcy5HYyA9IGUsIGU7XG4gICAgfVxuICAgIGVucXVldWVBZnRlckRlbGF5KHQsIGUsIG4pIHtcbiAgICAgICAgdGhpcy5aYygpLCBcbiAgICAgICAgLy8gRmFzdC1mb3J3YXJkIGRlbGF5cyBmb3IgdGltZXJJZHMgdGhhdCBoYXZlIGJlZW4gb3ZlcnJpZGVuLlxuICAgICAgICB0aGlzLlljLmluZGV4T2YodCkgPiAtMSAmJiAoZSA9IDApO1xuICAgICAgICBjb25zdCBzID0gVGMuY3JlYXRlQW5kU2NoZWR1bGUodGhpcywgdCwgZSwgbiwgKHQgPT4gdGhpcy5uYSh0KSkpO1xuICAgICAgICByZXR1cm4gdGhpcy56Yy5wdXNoKHMpLCBzO1xuICAgIH1cbiAgICBaYygpIHtcbiAgICAgICAgdGhpcy5XYyAmJiBPKCk7XG4gICAgfVxuICAgIHZlcmlmeU9wZXJhdGlvbkluUHJvZ3Jlc3MoKSB7fVxuICAgIC8qKlxuICAgICAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcXVldWVkIHRhc2tzIGFyZSBmaW5pc2hlZCBleGVjdXRpbmcuIERlbGF5ZWRcbiAgICAgKiBvcGVyYXRpb25zIGFyZSBub3QgcnVuLlxuICAgICAqLyAgICBhc3luYyBzYSgpIHtcbiAgICAgICAgLy8gT3BlcmF0aW9ucyBpbiB0aGUgcXVldWUgcHJpb3IgdG8gZHJhaW5pbmcgbWF5IGhhdmUgZW5xdWV1ZWQgYWRkaXRpb25hbFxuICAgICAgICAvLyBvcGVyYXRpb25zLiBLZWVwIGRyYWluaW5nIHRoZSBxdWV1ZSB1bnRpbCB0aGUgdGFpbCBpcyBubyBsb25nZXIgYWR2YW5jZWQsXG4gICAgICAgIC8vIHdoaWNoIGluZGljYXRlcyB0aGF0IG5vIG1vcmUgbmV3IG9wZXJhdGlvbnMgd2VyZSBlbnF1ZXVlZCBhbmQgdGhhdCBhbGxcbiAgICAgICAgLy8gb3BlcmF0aW9ucyB3ZXJlIGV4ZWN1dGVkLlxuICAgICAgICBsZXQgdDtcbiAgICAgICAgZG8ge1xuICAgICAgICAgICAgdCA9IHRoaXMuR2MsIGF3YWl0IHQ7XG4gICAgICAgIH0gd2hpbGUgKHQgIT09IHRoaXMuR2MpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IERldGVybWluZSBpZiBhIGRlbGF5ZWQgb3BlcmF0aW9uIHdpdGggYSBwYXJ0aWN1bGFyIFRpbWVySWRcbiAgICAgKiBleGlzdHMuXG4gICAgICovICAgIGlhKHQpIHtcbiAgICAgICAgZm9yIChjb25zdCBlIG9mIHRoaXMuemMpIGlmIChlLnRpbWVySWQgPT09IHQpIHJldHVybiAhMDtcbiAgICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFJ1bnMgc29tZSBvciBhbGwgZGVsYXllZCBvcGVyYXRpb25zIGVhcmx5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGxhc3RUaW1lcklkIC0gRGVsYXllZCBvcGVyYXRpb25zIHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhpcyBUaW1lcklkXG4gICAgICogd2lsbCBiZSBkcmFpbmVkLiBQYXNzIFRpbWVySWQuQWxsIHRvIHJ1biBhbGwgZGVsYXllZCBvcGVyYXRpb25zLlxuICAgICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIG9uY2UgYWxsIG9wZXJhdGlvbnMgaGF2ZSBiZWVuIHJ1bi5cbiAgICAgKi8gICAgcmEodCkge1xuICAgICAgICAvLyBOb3RlIHRoYXQgZHJhaW5pbmcgbWF5IGdlbmVyYXRlIG1vcmUgZGVsYXllZCBvcHMsIHNvIHdlIGRvIHRoYXQgZmlyc3QuXG4gICAgICAgIHJldHVybiB0aGlzLnNhKCkudGhlbigoKCkgPT4ge1xuICAgICAgICAgICAgLy8gUnVuIG9wcyBpbiB0aGUgc2FtZSBvcmRlciB0aGV5J2QgcnVuIGlmIHRoZXkgcmFuIG5hdHVyYWxseS5cbiAgICAgICAgICAgIHRoaXMuemMuc29ydCgoKHQsIGUpID0+IHQudGFyZ2V0VGltZU1zIC0gZS50YXJnZXRUaW1lTXMpKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgZSBvZiB0aGlzLnpjKSBpZiAoZS5za2lwRGVsYXkoKSwgXCJhbGxcIiAvKiBUaW1lcklkLkFsbCAqLyAhPT0gdCAmJiBlLnRpbWVySWQgPT09IHQpIGJyZWFrO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2EoKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBGb3IgVGVzdHM6IFNraXAgYWxsIHN1YnNlcXVlbnQgZGVsYXlzIGZvciBhIHRpbWVyIGlkLlxuICAgICAqLyAgICBvYSh0KSB7XG4gICAgICAgIHRoaXMuWWMucHVzaCh0KTtcbiAgICB9XG4gICAgLyoqIENhbGxlZCBvbmNlIGEgRGVsYXllZE9wZXJhdGlvbiBpcyBydW4gb3IgY2FuY2VsZWQuICovICAgIG5hKHQpIHtcbiAgICAgICAgLy8gTk9URTogaW5kZXhPZiAvIHNsaWNlIGFyZSBPKG4pLCBidXQgZGVsYXllZE9wZXJhdGlvbnMgaXMgZXhwZWN0ZWQgdG8gYmUgc21hbGwuXG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLnpjLmluZGV4T2YodCk7XG4gICAgICAgIHRoaXMuemMuc3BsaWNlKGUsIDEpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gVGgodCkge1xuICAgIC8qKlxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXG4gKiBtZXRob2RzLlxuICovXG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKFwib2JqZWN0XCIgIT0gdHlwZW9mIHQgfHwgbnVsbCA9PT0gdCkgcmV0dXJuICExO1xuICAgICAgICBjb25zdCBuID0gdDtcbiAgICAgICAgZm9yIChjb25zdCB0IG9mIGUpIGlmICh0IGluIG4gJiYgXCJmdW5jdGlvblwiID09IHR5cGVvZiBuW3RdKSByZXR1cm4gITA7XG4gICAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gICAgLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbiAgICAvKipcbiAqIFJlcHJlc2VudHMgdGhlIHRhc2sgb2YgbG9hZGluZyBhIEZpcmVzdG9yZSBidW5kbGUuIEl0IHByb3ZpZGVzIHByb2dyZXNzIG9mIGJ1bmRsZVxuICogbG9hZGluZywgYXMgd2VsbCBhcyB0YXNrIGNvbXBsZXRpb24gYW5kIGVycm9yIGV2ZW50cy5cbiAqXG4gKiBUaGUgQVBJIGlzIGNvbXBhdGlibGUgd2l0aCBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPmAuXG4gKi8gKHQsIFsgXCJuZXh0XCIsIFwiZXJyb3JcIiwgXCJjb21wbGV0ZVwiIF0pO1xufVxuXG5jbGFzcyBFaCB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIgPSB7fSwgdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlciA9IG5ldyBLLCB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB7XG4gICAgICAgICAgICB0YXNrU3RhdGU6IFwiUnVubmluZ1wiLFxuICAgICAgICAgICAgdG90YWxCeXRlczogMCxcbiAgICAgICAgICAgIHRvdGFsRG9jdW1lbnRzOiAwLFxuICAgICAgICAgICAgYnl0ZXNMb2FkZWQ6IDAsXG4gICAgICAgICAgICBkb2N1bWVudHNMb2FkZWQ6IDBcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmVnaXN0ZXJzIGZ1bmN0aW9ucyB0byBsaXN0ZW4gdG8gYnVuZGxlIGxvYWRpbmcgcHJvZ3Jlc3MgZXZlbnRzLlxuICAgICAqIEBwYXJhbSBuZXh0IC0gQ2FsbGVkIHdoZW4gdGhlcmUgaXMgYSBwcm9ncmVzcyB1cGRhdGUgZnJvbSBidW5kbGUgbG9hZGluZy4gVHlwaWNhbGx5IGBuZXh0YCBjYWxscyBvY2N1clxuICAgICAqICAgZWFjaCB0aW1lIGEgRmlyZXN0b3JlIGRvY3VtZW50IGlzIGxvYWRlZCBmcm9tIHRoZSBidW5kbGUuXG4gICAgICogQHBhcmFtIGVycm9yIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy4gVGhlIHRhc2sgYWJvcnRzIGFmdGVyIHJlcG9ydGluZyB0aGVcbiAgICAgKiAgIGVycm9yLCBhbmQgdGhlcmUgc2hvdWxkIGJlIG5vIG1vcmUgdXBkYXRlcyBhZnRlciB0aGlzLlxuICAgICAqIEBwYXJhbSBjb21wbGV0ZSAtIENhbGxlZCB3aGVuIHRoZSBsb2FkaW5nIHRhc2sgaXMgY29tcGxldGUuXG4gICAgICovICAgIG9uUHJvZ3Jlc3ModCwgZSwgbikge1xuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyID0ge1xuICAgICAgICAgICAgbmV4dDogdCxcbiAgICAgICAgICAgIGVycm9yOiBlLFxuICAgICAgICAgICAgY29tcGxldGU6IG5cbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogSW1wbGVtZW50cyB0aGUgYFByb21pc2U8TG9hZEJ1bmRsZVRhc2tQcm9ncmVzcz4uY2F0Y2hgIGludGVyZmFjZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvblJlamVjdGVkIC0gQ2FsbGVkIHdoZW4gYW4gZXJyb3Igb2NjdXJzIGR1cmluZyBidW5kbGUgbG9hZGluZy5cbiAgICAgKi8gICAgY2F0Y2godCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGFza0NvbXBsZXRpb25SZXNvbHZlci5wcm9taXNlLmNhdGNoKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBJbXBsZW1lbnRzIHRoZSBgUHJvbWlzZTxMb2FkQnVuZGxlVGFza1Byb2dyZXNzPi50aGVuYCBpbnRlcmZhY2UuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb25GdWxmaWxsZWQgLSBDYWxsZWQgb24gdGhlIGNvbXBsZXRpb24gb2YgdGhlIGxvYWRpbmcgdGFzayB3aXRoIGEgZmluYWwgYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIHVwZGF0ZS5cbiAgICAgKiAgIFRoZSB1cGRhdGUgd2lsbCBhbHdheXMgaGF2ZSBpdHMgYHRhc2tTdGF0ZWAgc2V0IHRvIGBcIlN1Y2Nlc3NcImAuXG4gICAgICogQHBhcmFtIG9uUmVqZWN0ZWQgLSBDYWxsZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgZHVyaW5nIGJ1bmRsZSBsb2FkaW5nLlxuICAgICAqLyAgICB0aGVuKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucHJvbWlzZS50aGVuKHQsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhbGwgb2JzZXJ2ZXJzIHRoYXQgYnVuZGxlIGxvYWRpbmcgaGFzIGNvbXBsZXRlZCwgd2l0aCBhIHByb3ZpZGVkXG4gICAgICogYExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3NgIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovICAgIF9jb21wbGV0ZVdpdGgodCkge1xuICAgICAgICB0aGlzLl91cGRhdGVQcm9ncmVzcyh0KSwgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5jb21wbGV0ZSAmJiB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmNvbXBsZXRlKCksIFxuICAgICAgICB0aGlzLl90YXNrQ29tcGxldGlvblJlc29sdmVyLnJlc29sdmUodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIE5vdGlmaWVzIGFsbCBvYnNlcnZlcnMgdGhhdCBidW5kbGUgbG9hZGluZyBoYXMgZmFpbGVkLCB3aXRoIGEgcHJvdmlkZWRcbiAgICAgKiBgRXJyb3JgIGFzIHRoZSByZWFzb24uXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfZmFpbFdpdGgodCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MudGFza1N0YXRlID0gXCJFcnJvclwiLCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHRoaXMuX2xhc3RQcm9ncmVzcyksIFxuICAgICAgICB0aGlzLl9wcm9ncmVzc09ic2VydmVyLmVycm9yICYmIHRoaXMuX3Byb2dyZXNzT2JzZXJ2ZXIuZXJyb3IodCksIHRoaXMuX3Rhc2tDb21wbGV0aW9uUmVzb2x2ZXIucmVqZWN0KHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBOb3RpZmllcyBhIHByb2dyZXNzIHVwZGF0ZSBvZiBsb2FkaW5nIGEgYnVuZGxlLlxuICAgICAqIEBwYXJhbSBwcm9ncmVzcyAtIFRoZSBuZXcgcHJvZ3Jlc3MuXG4gICAgICpcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqLyAgICBfdXBkYXRlUHJvZ3Jlc3ModCkge1xuICAgICAgICB0aGlzLl9sYXN0UHJvZ3Jlc3MgPSB0LCB0aGlzLl9wcm9ncmVzc09ic2VydmVyLm5leHQgJiYgdGhpcy5fcHJvZ3Jlc3NPYnNlcnZlci5uZXh0KHQpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29uc3RhbnQgdXNlZCB0byBpbmRpY2F0ZSB0aGUgTFJVIGdhcmJhZ2UgY29sbGVjdGlvbiBzaG91bGQgYmUgZGlzYWJsZWQuXG4gKiBTZXQgdGhpcyB2YWx1ZSBhcyB0aGUgYGNhY2hlU2l6ZUJ5dGVzYCBvbiB0aGUgc2V0dGluZ3MgcGFzc2VkIHRvIHRoZVxuICoge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gY29uc3QgQWggPSAtMTtcblxuLyoqXG4gKiBUaGUgQ2xvdWQgRmlyZXN0b3JlIHNlcnZpY2UgaW50ZXJmYWNlLlxuICpcbiAqIERvIG5vdCBjYWxsIHRoaXMgY29uc3RydWN0b3IgZGlyZWN0bHkuIEluc3RlYWQsIHVzZSB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKi8gY2xhc3MgdmggZXh0ZW5kcyBoaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHN1cGVyKHQsIGUsIG4sIHMpLCBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIFdoZXRoZXIgaXQncyBhIHtAbGluayBGaXJlc3RvcmV9IG9yIEZpcmVzdG9yZSBMaXRlIGluc3RhbmNlLlxuICAgICAgICAgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJmaXJlc3RvcmVcIiwgdGhpcy5fcXVldWUgPSBuZXcgSWgsIHRoaXMuX3BlcnNpc3RlbmNlS2V5ID0gKG51bGwgPT0gcyA/IHZvaWQgMCA6IHMubmFtZSkgfHwgXCJbREVGQVVMVF1cIjtcbiAgICB9XG4gICAgX3Rlcm1pbmF0ZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ZpcmVzdG9yZUNsaWVudCB8fCBcbiAgICAgICAgLy8gVGhlIGNsaWVudCBtdXN0IGJlIGluaXRpYWxpemVkIHRvIGVuc3VyZSB0aGF0IGFsbCBzdWJzZXF1ZW50IEFQSVxuICAgICAgICAvLyB1c2FnZSB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuICAgICAgICBWaCh0aGlzKSwgdGhpcy5fZmlyZXN0b3JlQ2xpZW50LnRlcm1pbmF0ZSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBJbml0aWFsaXplcyBhIG5ldyBpbnN0YW5jZSBvZiB7QGxpbmsgRmlyZXN0b3JlfSB3aXRoIHRoZSBwcm92aWRlZCBzZXR0aW5ncy5cbiAqIENhbiBvbmx5IGJlIGNhbGxlZCBiZWZvcmUgYW55IG90aGVyIGZ1bmN0aW9uLCBpbmNsdWRpbmdcbiAqIHtAbGluayAoZ2V0RmlyZXN0b3JlOjEpfS4gSWYgdGhlIGN1c3RvbSBzZXR0aW5ncyBhcmUgZW1wdHksIHRoaXMgZnVuY3Rpb24gaXNcbiAqIGVxdWl2YWxlbnQgdG8gY2FsbGluZyB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKlxuICogQHBhcmFtIGFwcCAtIFRoZSB7QGxpbmsgQGZpcmViYXNlL2FwcCNGaXJlYmFzZUFwcH0gd2l0aCB3aGljaCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogYmUgYXNzb2NpYXRlZC5cbiAqIEBwYXJhbSBzZXR0aW5ncyAtIEEgc2V0dGluZ3Mgb2JqZWN0IHRvIGNvbmZpZ3VyZSB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKiBAcGFyYW0gZGF0YWJhc2VJZCAtIFRoZSBuYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqIEByZXR1cm5zIEEgbmV3bHkgaW5pdGlhbGl6ZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKi8gZnVuY3Rpb24gUmgodCwgZSwgbikge1xuICAgIG4gfHwgKG4gPSBcIihkZWZhdWx0KVwiKTtcbiAgICBjb25zdCBzID0gX2dldFByb3ZpZGVyKHQsIFwiZmlyZXN0b3JlXCIpO1xuICAgIGlmIChzLmlzSW5pdGlhbGl6ZWQobikpIHtcbiAgICAgICAgY29uc3QgdCA9IHMuZ2V0SW1tZWRpYXRlKHtcbiAgICAgICAgICAgIGlkZW50aWZpZXI6IG5cbiAgICAgICAgfSksIGkgPSBzLmdldE9wdGlvbnMobik7XG4gICAgICAgIGlmIChkZWVwRXF1YWwoaSwgZSkpIHJldHVybiB0O1xuICAgICAgICB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIGhhcyBhbHJlYWR5IGJlZW4gY2FsbGVkIHdpdGggZGlmZmVyZW50IG9wdGlvbnMuIFRvIGF2b2lkIHRoaXMgZXJyb3IsIGNhbGwgaW5pdGlhbGl6ZUZpcmVzdG9yZSgpIHdpdGggdGhlIHNhbWUgb3B0aW9ucyBhcyB3aGVuIGl0IHdhcyBvcmlnaW5hbGx5IGNhbGxlZCwgb3IgY2FsbCBnZXRGaXJlc3RvcmUoKSB0byByZXR1cm4gdGhlIGFscmVhZHkgaW5pdGlhbGl6ZWQgaW5zdGFuY2UuXCIpO1xuICAgIH1cbiAgICBpZiAodm9pZCAwICE9PSBlLmNhY2hlU2l6ZUJ5dGVzICYmIHZvaWQgMCAhPT0gZS5sb2NhbENhY2hlKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiY2FjaGUgYW5kIGNhY2hlU2l6ZUJ5dGVzIGNhbm5vdCBiZSBzcGVjaWZpZWQgYXQgdGhlIHNhbWUgdGltZSBhcyBjYWNoZVNpemVCeXRlcyB3aWxsYmUgZGVwcmVjYXRlZC4gSW5zdGVhZCwgc3BlY2lmeSB0aGUgY2FjaGUgc2l6ZSBpbiB0aGUgY2FjaGUgb2JqZWN0XCIpO1xuICAgIGlmICh2b2lkIDAgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgLTEgIT09IGUuY2FjaGVTaXplQnl0ZXMgJiYgZS5jYWNoZVNpemVCeXRlcyA8IDEwNDg1NzYpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJjYWNoZVNpemVCeXRlcyBtdXN0IGJlIGF0IGxlYXN0IDEwNDg1NzZcIik7XG4gICAgcmV0dXJuIHMuaW5pdGlhbGl6ZSh7XG4gICAgICAgIG9wdGlvbnM6IGUsXG4gICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogblxuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBQaChlLCBuKSB7XG4gICAgY29uc3QgcyA9IFwib2JqZWN0XCIgPT0gdHlwZW9mIGUgPyBlIDogZ2V0QXBwKCksIGkgPSBcInN0cmluZ1wiID09IHR5cGVvZiBlID8gZSA6IG4gfHwgXCIoZGVmYXVsdClcIiwgciA9IF9nZXRQcm92aWRlcihzLCBcImZpcmVzdG9yZVwiKS5nZXRJbW1lZGlhdGUoe1xuICAgICAgICBpZGVudGlmaWVyOiBpXG4gICAgfSk7XG4gICAgaWYgKCFyLl9pbml0aWFsaXplZCkge1xuICAgICAgICBjb25zdCB0ID0gZ2V0RGVmYXVsdEVtdWxhdG9ySG9zdG5hbWVBbmRQb3J0KFwiZmlyZXN0b3JlXCIpO1xuICAgICAgICB0ICYmIGxoKHIsIC4uLnQpO1xuICAgIH1cbiAgICByZXR1cm4gcjtcbn1cblxuLyoqXG4gKiBAaW50ZXJuYWxcbiAqLyBmdW5jdGlvbiBiaCh0KSB7XG4gICAgcmV0dXJuIHQuX2ZpcmVzdG9yZUNsaWVudCB8fCBWaCh0KSwgdC5fZmlyZXN0b3JlQ2xpZW50LnZlcmlmeU5vdFRlcm1pbmF0ZWQoKSwgdC5fZmlyZXN0b3JlQ2xpZW50O1xufVxuXG5mdW5jdGlvbiBWaCh0KSB7XG4gICAgdmFyIGUsIG4sIHM7XG4gICAgY29uc3QgaSA9IHQuX2ZyZWV6ZVNldHRpbmdzKCksIHIgPSBmdW5jdGlvbih0LCBlLCBuLCBzKSB7XG4gICAgICAgIHJldHVybiBuZXcgJGUodCwgZSwgbiwgcy5ob3N0LCBzLnNzbCwgcy5leHBlcmltZW50YWxGb3JjZUxvbmdQb2xsaW5nLCBzLmV4cGVyaW1lbnRhbEF1dG9EZXRlY3RMb25nUG9sbGluZywgdGgocy5leHBlcmltZW50YWxMb25nUG9sbGluZ09wdGlvbnMpLCBzLnVzZUZldGNoU3RyZWFtcyk7XG4gICAgfSh0Ll9kYXRhYmFzZUlkLCAobnVsbCA9PT0gKGUgPSB0Ll9hcHApIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUub3B0aW9ucy5hcHBJZCkgfHwgXCJcIiwgdC5fcGVyc2lzdGVuY2VLZXksIGkpO1xuICAgIHQuX2ZpcmVzdG9yZUNsaWVudCA9IG5ldyB4YSh0Ll9hdXRoQ3JlZGVudGlhbHMsIHQuX2FwcENoZWNrQ3JlZGVudGlhbHMsIHQuX3F1ZXVlLCByKSwgXG4gICAgKG51bGwgPT09IChuID0gaS5jYWNoZSkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyKSAmJiAobnVsbCA9PT0gKHMgPSBpLmNhY2hlKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlcikgJiYgKHQuX2ZpcmVzdG9yZUNsaWVudC5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciA9IHtcbiAgICAgICAgX29mZmxpbmVLaW5kOiBpLmNhY2hlLmtpbmQsXG4gICAgICAgIF9vZmZsaW5lOiBpLmNhY2hlLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIsXG4gICAgICAgIF9vbmxpbmU6IGkuY2FjaGUuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyXG4gICAgfSk7XG59XG5cbi8qKlxuICogQXR0ZW1wdHMgdG8gZW5hYmxlIHBlcnNpc3RlbnQgc3RvcmFnZSwgaWYgcG9zc2libGUuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgYmVmb3JlIGFueSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW5cbiAqIHtAbGluayBpbml0aWFsaXplRmlyZXN0b3JlfSwge0BsaW5rIChnZXRGaXJlc3RvcmU6MSl9IG9yXG4gKiB7QGxpbmsgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZX0uXG4gKlxuICogSWYgdGhpcyBmYWlscywgYGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlKClgIHdpbGwgcmVqZWN0IHRoZSBwcm9taXNlIGl0XG4gKiByZXR1cm5zLiBOb3RlIHRoYXQgZXZlbiBhZnRlciB0aGlzIGZhaWx1cmUsIHRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB3aWxsXG4gKiByZW1haW4gdXNhYmxlLCBob3dldmVyIG9mZmxpbmUgcGVyc2lzdGVuY2Ugd2lsbCBiZSBkaXNhYmxlZC5cbiAqXG4gKiBUaGVyZSBhcmUgc2V2ZXJhbCByZWFzb25zIHdoeSB0aGlzIGNhbiBmYWlsLCB3aGljaCBjYW4gYmUgaWRlbnRpZmllZCBieVxuICogdGhlIGBjb2RlYCBvbiB0aGUgZXJyb3IuXG4gKlxuICogICAqIGZhaWxlZC1wcmVjb25kaXRpb246IFRoZSBhcHAgaXMgYWxyZWFkeSBvcGVuIGluIGFub3RoZXIgYnJvd3NlciB0YWIuXG4gKiAgICogdW5pbXBsZW1lbnRlZDogVGhlIGJyb3dzZXIgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIG9mZmxpbmVcbiAqICAgICBwZXJzaXN0ZW5jZSBpbXBsZW1lbnRhdGlvbi5cbiAqXG4gKiBQZXJzaXN0ZW5jZSBjYW5ub3QgYmUgdXNlZCBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byBlbmFibGUgcGVyc2lzdGVuY2UgZm9yLlxuICogQHBhcmFtIHBlcnNpc3RlbmNlU2V0dGluZ3MgLSBPcHRpb25hbCBzZXR0aW5ncyBvYmplY3QgdG8gY29uZmlndXJlXG4gKiBwZXJzaXN0ZW5jZS5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudCBzdG9yYWdlLlxuICogQGRlcHJlY2F0ZWQgVGhpcyBmdW5jdGlvbiB3aWxsIGJlIHJlbW92ZWQgaW4gYSBmdXR1cmUgbWFqb3IgcmVsZWFzZS4gSW5zdGVhZCwgc2V0XG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIGFuIGluc3RhbmNlIG9mIGBJbmRleGVkRGJMb2NhbENhY2hlYCB0b1xuICogdHVybiBvbiBJbmRleGVkRGIgY2FjaGUuIENhbGxpbmcgdGhpcyBmdW5jdGlvbiB3aGVuIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWBcbiAqIGlzIGFscmVhZHkgc3BlY2lmaWVkIHdpbGwgdGhyb3cgYW4gZXhjZXB0aW9uLlxuICovIGZ1bmN0aW9uIFNoKHQsIGUpIHtcbiAgICBCaCh0ID0gdWgodCwgdmgpKTtcbiAgICBjb25zdCBuID0gYmgodCk7XG4gICAgaWYgKG4uX3VuaW5pdGlhbGl6ZWRDb21wb25lbnRzUHJvdmlkZXIpIHRocm93IG5ldyBVKHEuRkFJTEVEX1BSRUNPTkRJVElPTiwgXCJTREsgY2FjaGUgaXMgYWxyZWFkeSBzcGVjaWZpZWQuXCIpO1xuICAgIE0oXCJlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSgpIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLCB5b3UgY2FuIHVzZSBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIGluc3RlYWQuXCIpO1xuICAgIGNvbnN0IHMgPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBpID0gbmV3IFBhO1xuICAgIHJldHVybiBDaChuLCBpLCBuZXcgdmEoaSwgcy5jYWNoZVNpemVCeXRlcywgbnVsbCA9PSBlID8gdm9pZCAwIDogZS5mb3JjZU93bmVyc2hpcCkpO1xufVxuXG4vKipcbiAqIEF0dGVtcHRzIHRvIGVuYWJsZSBtdWx0aS10YWIgcGVyc2lzdGVudCBzdG9yYWdlLCBpZiBwb3NzaWJsZS4gSWYgZW5hYmxlZFxuICogYWNyb3NzIGFsbCB0YWJzLCBhbGwgb3BlcmF0aW9ucyBzaGFyZSBhY2Nlc3MgdG8gbG9jYWwgcGVyc2lzdGVuY2UsIGluY2x1ZGluZ1xuICogc2hhcmVkIGV4ZWN1dGlvbiBvZiBxdWVyaWVzIGFuZCBsYXRlbmN5LWNvbXBlbnNhdGVkIGxvY2FsIGRvY3VtZW50IHVwZGF0ZXNcbiAqIGFjcm9zcyBhbGwgY29ubmVjdGVkIGluc3RhbmNlcy5cbiAqXG4gKiBJZiB0aGlzIGZhaWxzLCBgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCB3aWxsIHJlamVjdCB0aGUgcHJvbWlzZVxuICogaXQgcmV0dXJucy4gTm90ZSB0aGF0IGV2ZW4gYWZ0ZXIgdGhpcyBmYWlsdXJlLCB0aGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2Ugd2lsbFxuICogcmVtYWluIHVzYWJsZSwgaG93ZXZlciBvZmZsaW5lIHBlcnNpc3RlbmNlIHdpbGwgYmUgZGlzYWJsZWQuXG4gKlxuICogVGhlcmUgYXJlIHNldmVyYWwgcmVhc29ucyB3aHkgdGhpcyBjYW4gZmFpbCwgd2hpY2ggY2FuIGJlIGlkZW50aWZpZWQgYnlcbiAqIHRoZSBgY29kZWAgb24gdGhlIGVycm9yLlxuICpcbiAqICAgKiBmYWlsZWQtcHJlY29uZGl0aW9uOiBUaGUgYXBwIGlzIGFscmVhZHkgb3BlbiBpbiBhbm90aGVyIGJyb3dzZXIgdGFiIGFuZFxuICogICAgIG11bHRpLXRhYiBpcyBub3QgZW5hYmxlZC5cbiAqICAgKiB1bmltcGxlbWVudGVkOiBUaGUgYnJvd3NlciBpcyBpbmNvbXBhdGlibGUgd2l0aCB0aGUgb2ZmbGluZVxuICogICAgIHBlcnNpc3RlbmNlIGltcGxlbWVudGF0aW9uLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gZW5hYmxlIHBlcnNpc3RlbmNlIGZvci5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHRoYXQgcmVwcmVzZW50cyBzdWNjZXNzZnVsbHkgZW5hYmxpbmcgcGVyc2lzdGVudFxuICogc3RvcmFnZS5cbiAqIEBkZXByZWNhdGVkIFRoaXMgZnVuY3Rpb24gd2lsbCBiZSByZW1vdmVkIGluIGEgZnV0dXJlIG1ham9yIHJlbGVhc2UuIEluc3RlYWQsIHNldFxuICogYEZpcmVzdG9yZVNldHRpbmdzLmNhY2hlYCB0byBhbiBpbnN0YW5jZSBvZiBgSW5kZXhlZERiTG9jYWxDYWNoZWAgdG9cbiAqIHR1cm4gb24gaW5kZXhlZGRiIGNhY2hlLiBDYWxsaW5nIHRoaXMgZnVuY3Rpb24gd2hlbiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgXG4gKiBpcyBhbHJlYWR5IHNwZWNpZmllZCB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbi5cbiAqLyBmdW5jdGlvbiBEaCh0KSB7XG4gICAgQmgodCA9IHVoKHQsIHZoKSk7XG4gICAgY29uc3QgZSA9IGJoKHQpO1xuICAgIGlmIChlLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiU0RLIGNhY2hlIGlzIGFscmVhZHkgc3BlY2lmaWVkLlwiKTtcbiAgICBNKFwiZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiB0aGUgZnV0dXJlLCB5b3UgY2FuIHVzZSBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIGluc3RlYWQuXCIpO1xuICAgIGNvbnN0IG4gPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBzID0gbmV3IFBhO1xuICAgIHJldHVybiBDaChlLCBzLCBuZXcgUmEocywgbi5jYWNoZVNpemVCeXRlcykpO1xufVxuXG4vKipcbiAqIFJlZ2lzdGVycyBib3RoIHRoZSBgT2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyYCBhbmQgYE9ubGluZUNvbXBvbmVudFByb3ZpZGVyYC5cbiAqIElmIHRoZSBvcGVyYXRpb24gZmFpbHMgd2l0aCBhIHJlY292ZXJhYmxlIGVycm9yIChzZWVcbiAqIGBjYW5SZWNvdmVyRnJvbUluZGV4ZWREYkVycm9yKClgIGJlbG93KSwgdGhlIHJldHVybmVkIFByb21pc2UgaXMgcmVqZWN0ZWRcbiAqIGJ1dCB0aGUgY2xpZW50IHJlbWFpbnMgdXNhYmxlLlxuICovIGZ1bmN0aW9uIENoKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gbmV3IEs7XG4gICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlKChhc3luYyAoKSA9PiB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBhd2FpdCBOYSh0LCBuKSwgYXdhaXQga2EodCwgZSksIHMucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdDtcbiAgICAgICAgICAgIGlmICghTWEoZSkpIHRocm93IGU7XG4gICAgICAgICAgICBNKFwiRXJyb3IgZW5hYmxpbmcgaW5kZXhlZGRiIGNhY2hlLiBGYWxsaW5nIGJhY2sgdG8gbWVtb3J5IGNhY2hlOiBcIiArIGUpLCBzLnJlamVjdChlKTtcbiAgICAgICAgfVxuICAgIH0pKS50aGVuKCgoKSA9PiBzLnByb21pc2UpKTtcbn1cblxuLyoqXG4gKiBDbGVhcnMgdGhlIHBlcnNpc3RlbnQgc3RvcmFnZS4gVGhpcyBpbmNsdWRlcyBwZW5kaW5nIHdyaXRlcyBhbmQgY2FjaGVkXG4gKiBkb2N1bWVudHMuXG4gKlxuICogTXVzdCBiZSBjYWxsZWQgd2hpbGUgdGhlIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGlzIG5vdCBzdGFydGVkIChhZnRlciB0aGUgYXBwIGlzXG4gKiB0ZXJtaW5hdGVkIG9yIHdoZW4gdGhlIGFwcCBpcyBmaXJzdCBpbml0aWFsaXplZCkuIE9uIHN0YXJ0dXAsIHRoaXMgZnVuY3Rpb25cbiAqIG11c3QgYmUgY2FsbGVkIGJlZm9yZSBvdGhlciBmdW5jdGlvbnMgKG90aGVyIHRoYW4ge0BsaW5rXG4gKiBpbml0aWFsaXplRmlyZXN0b3JlfSBvciB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0pKS4gSWYgdGhlIHtAbGluayBGaXJlc3RvcmV9XG4gKiBpbnN0YW5jZSBpcyBzdGlsbCBydW5uaW5nLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIHdpdGggdGhlIGVycm9yIGNvZGVcbiAqIG9mIGBmYWlsZWQtcHJlY29uZGl0aW9uYC5cbiAqXG4gKiBOb3RlOiBgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSgpYCBpcyBwcmltYXJpbHkgaW50ZW5kZWQgdG8gaGVscCB3cml0ZVxuICogcmVsaWFibGUgdGVzdHMgdGhhdCB1c2UgQ2xvdWQgRmlyZXN0b3JlLiBJdCB1c2VzIGFuIGVmZmljaWVudCBtZWNoYW5pc20gZm9yXG4gKiBkcm9wcGluZyBleGlzdGluZyBkYXRhIGJ1dCBkb2VzIG5vdCBhdHRlbXB0IHRvIHNlY3VyZWx5IG92ZXJ3cml0ZSBvclxuICogb3RoZXJ3aXNlIG1ha2UgY2FjaGVkIGRhdGEgdW5yZWNvdmVyYWJsZS4gRm9yIGFwcGxpY2F0aW9ucyB0aGF0IGFyZSBzZW5zaXRpdmVcbiAqIHRvIHRoZSBkaXNjbG9zdXJlIG9mIGNhY2hlZCBkYXRhIGluIGJldHdlZW4gdXNlciBzZXNzaW9ucywgd2Ugc3Ryb25nbHlcbiAqIHJlY29tbWVuZCBub3QgZW5hYmxpbmcgcGVyc2lzdGVuY2UgYXQgYWxsLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gY2xlYXIgcGVyc2lzdGVuY2UgZm9yLlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBwZXJzaXN0ZW50IHN0b3JhZ2UgaXNcbiAqIGNsZWFyZWQuIE90aGVyd2lzZSwgdGhlIHByb21pc2UgaXMgcmVqZWN0ZWQgd2l0aCBhbiBlcnJvci5cbiAqLyBmdW5jdGlvbiB4aCh0KSB7XG4gICAgaWYgKHQuX2luaXRpYWxpemVkICYmICF0Ll90ZXJtaW5hdGVkKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiUGVyc2lzdGVuY2UgY2FuIG9ubHkgYmUgY2xlYXJlZCBiZWZvcmUgYSBGaXJlc3RvcmUgaW5zdGFuY2UgaXMgaW5pdGlhbGl6ZWQgb3IgYWZ0ZXIgaXQgaXMgdGVybWluYXRlZC5cIik7XG4gICAgY29uc3QgZSA9IG5ldyBLO1xuICAgIHJldHVybiB0Ll9xdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0RXZlbldoaWxlUmVzdHJpY3RlZCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgYXdhaXQgYXN5bmMgZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgICAgIGlmICghYnQuRCgpKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZSA9IHQgKyBcIm1haW5cIjtcbiAgICAgICAgICAgICAgICBhd2FpdCBidC5kZWxldGUoZSk7XG4gICAgICAgICAgICB9KFpvKHQuX2RhdGFiYXNlSWQsIHQuX3BlcnNpc3RlbmNlS2V5KSksIGUucmVzb2x2ZSgpO1xuICAgICAgICB9IGNhdGNoICh0KSB7XG4gICAgICAgICAgICBlLnJlamVjdCh0KTtcbiAgICAgICAgfVxuICAgIH0pKSwgZS5wcm9taXNlO1xufVxuXG4vKipcbiAqIFdhaXRzIHVudGlsIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgZm9yIHRoZSBhY3RpdmUgdXNlciBoYXZlIGJlZW5cbiAqIGFja25vd2xlZGdlZCBieSB0aGUgYmFja2VuZC5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcyBpbW1lZGlhdGVseSBpZiB0aGVyZSBhcmUgbm8gb3V0c3RhbmRpbmcgd3JpdGVzLlxuICogT3RoZXJ3aXNlLCB0aGUgcHJvbWlzZSB3YWl0cyBmb3IgYWxsIHByZXZpb3VzbHkgaXNzdWVkIHdyaXRlcyAoaW5jbHVkaW5nXG4gKiB0aG9zZSB3cml0dGVuIGluIGEgcHJldmlvdXMgYXBwIHNlc3Npb24pLCBidXQgaXQgZG9lcyBub3Qgd2FpdCBmb3Igd3JpdGVzXG4gKiB0aGF0IHdlcmUgYWRkZWQgYWZ0ZXIgdGhlIGZ1bmN0aW9uIGlzIGNhbGxlZC4gSWYgeW91IHdhbnQgdG8gd2FpdCBmb3JcbiAqIGFkZGl0aW9uYWwgd3JpdGVzLCBjYWxsIGB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpYCBhZ2Fpbi5cbiAqXG4gKiBBbnkgb3V0c3RhbmRpbmcgYHdhaXRGb3JQZW5kaW5nV3JpdGVzKClgIHByb21pc2VzIGFyZSByZWplY3RlZCBkdXJpbmcgdXNlclxuICogY2hhbmdlcy5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB3aGljaCByZXNvbHZlcyB3aGVuIGFsbCBjdXJyZW50bHkgcGVuZGluZyB3cml0ZXMgaGF2ZSBiZWVuXG4gKiBhY2tub3dsZWRnZWQgYnkgdGhlIGJhY2tlbmQuXG4gKi8gZnVuY3Rpb24gTmgodCkge1xuICAgIHJldHVybiBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBuZXcgSztcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBaYyhhd2FpdCBxYSh0KSwgZSkpKSwgZS5wcm9taXNlO1xuICAgIH0oYmgodCA9IHVoKHQsIHZoKSkpO1xufVxuXG4vKipcbiAqIFJlLWVuYWJsZXMgdXNlIG9mIHRoZSBuZXR3b3JrIGZvciB0aGlzIHtAbGluayBGaXJlc3RvcmV9IGluc3RhbmNlIGFmdGVyIGEgcHJpb3JcbiAqIGNhbGwgdG8ge0BsaW5rIGRpc2FibGVOZXR3b3JrfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZW5hYmxlZC5cbiAqLyBmdW5jdGlvbiBraCh0KSB7XG4gICAgcmV0dXJuIEdhKGJoKHQgPSB1aCh0LCB2aCkpKTtcbn1cblxuLyoqXG4gKiBEaXNhYmxlcyBuZXR3b3JrIHVzYWdlIGZvciB0aGlzIGluc3RhbmNlLiBJdCBjYW4gYmUgcmUtZW5hYmxlZCB2aWEge0BsaW5rXG4gKiBlbmFibGVOZXR3b3JrfS4gV2hpbGUgdGhlIG5ldHdvcmsgaXMgZGlzYWJsZWQsIGFueSBzbmFwc2hvdCBsaXN0ZW5lcnMsXG4gKiBgZ2V0RG9jKClgIG9yIGBnZXREb2NzKClgIGNhbGxzIHdpbGwgcmV0dXJuIHJlc3VsdHMgZnJvbSBjYWNoZSwgYW5kIGFueSB3cml0ZVxuICogb3BlcmF0aW9ucyB3aWxsIGJlIHF1ZXVlZCB1bnRpbCB0aGUgbmV0d29yayBpcyByZXN0b3JlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIG9uY2UgdGhlIG5ldHdvcmsgaGFzIGJlZW4gZGlzYWJsZWQuXG4gKi8gZnVuY3Rpb24gTWgodCkge1xuICAgIHJldHVybiBRYShiaCh0ID0gdWgodCwgdmgpKSk7XG59XG5cbi8qKlxuICogVGVybWluYXRlcyB0aGUgcHJvdmlkZWQge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UuXG4gKlxuICogQWZ0ZXIgY2FsbGluZyBgdGVybWluYXRlKClgIG9ubHkgdGhlIGBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlKClgIGZ1bmN0aW9uXG4gKiBtYXkgYmUgdXNlZC4gQW55IG90aGVyIGZ1bmN0aW9uIHdpbGwgdGhyb3cgYSBgRmlyZXN0b3JlRXJyb3JgLlxuICpcbiAqIFRvIHJlc3RhcnQgYWZ0ZXIgdGVybWluYXRpb24sIGNyZWF0ZSBhIG5ldyBpbnN0YW5jZSBvZiBGaXJlYmFzZUZpcmVzdG9yZSB3aXRoXG4gKiB7QGxpbmsgKGdldEZpcmVzdG9yZToxKX0uXG4gKlxuICogVGVybWluYXRpb24gZG9lcyBub3QgY2FuY2VsIGFueSBwZW5kaW5nIHdyaXRlcywgYW5kIGFueSBwcm9taXNlcyB0aGF0IGFyZVxuICogYXdhaXRpbmcgYSByZXNwb25zZSBmcm9tIHRoZSBzZXJ2ZXIgd2lsbCBub3QgYmUgcmVzb2x2ZWQuIElmIHlvdSBoYXZlXG4gKiBwZXJzaXN0ZW5jZSBlbmFibGVkLCB0aGUgbmV4dCB0aW1lIHlvdSBzdGFydCB0aGlzIGluc3RhbmNlLCBpdCB3aWxsIHJlc3VtZVxuICogc2VuZGluZyB0aGVzZSB3cml0ZXMgdG8gdGhlIHNlcnZlci5cbiAqXG4gKiBOb3RlOiBVbmRlciBub3JtYWwgY2lyY3Vtc3RhbmNlcywgY2FsbGluZyBgdGVybWluYXRlKClgIGlzIG5vdCByZXF1aXJlZC4gVGhpc1xuICogZnVuY3Rpb24gaXMgdXNlZnVsIG9ubHkgd2hlbiB5b3Ugd2FudCB0byBmb3JjZSB0aGlzIGluc3RhbmNlIHRvIHJlbGVhc2UgYWxsXG4gKiBvZiBpdHMgcmVzb3VyY2VzIG9yIGluIGNvbWJpbmF0aW9uIHdpdGggYGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoKWAgdG9cbiAqIGVuc3VyZSB0aGF0IGFsbCBsb2NhbCBzdGF0ZSBpcyBkZXN0cm95ZWQgYmV0d2VlbiB0ZXN0IHJ1bnMuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgdGhhdCBpcyByZXNvbHZlZCB3aGVuIHRoZSBpbnN0YW5jZSBoYXMgYmVlbiBzdWNjZXNzZnVsbHlcbiAqIHRlcm1pbmF0ZWQuXG4gKi8gZnVuY3Rpb24gJGgodCkge1xuICAgIHJldHVybiBfcmVtb3ZlU2VydmljZUluc3RhbmNlKHQuYXBwLCBcImZpcmVzdG9yZVwiLCB0Ll9kYXRhYmFzZUlkLmRhdGFiYXNlKSwgdC5fZGVsZXRlKCk7XG59XG5cbi8qKlxuICogTG9hZHMgYSBGaXJlc3RvcmUgYnVuZGxlIGludG8gdGhlIGxvY2FsIGNhY2hlLlxuICpcbiAqIEBwYXJhbSBmaXJlc3RvcmUgLSBUaGUge0BsaW5rIEZpcmVzdG9yZX0gaW5zdGFuY2UgdG8gbG9hZCBidW5kbGVzIGZvci5cbiAqIEBwYXJhbSBidW5kbGVEYXRhIC0gQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgYnVuZGxlIHRvIGJlIGxvYWRlZC4gVmFsaWRcbiAqIG9iamVjdHMgYXJlIGBBcnJheUJ1ZmZlcmAsIGBSZWFkYWJsZVN0cmVhbTxVaW50OEFycmF5PmAgb3IgYHN0cmluZ2AuXG4gKlxuICogQHJldHVybnMgQSBgTG9hZEJ1bmRsZVRhc2tgIG9iamVjdCwgd2hpY2ggbm90aWZpZXMgY2FsbGVycyB3aXRoIHByb2dyZXNzXG4gKiB1cGRhdGVzLCBhbmQgY29tcGxldGlvbiBvciBlcnJvciBldmVudHMuIEl0IGNhbiBiZSB1c2VkIGFzIGFcbiAqIGBQcm9taXNlPExvYWRCdW5kbGVUYXNrUHJvZ3Jlc3M+YC5cbiAqLyBmdW5jdGlvbiBPaCh0LCBlKSB7XG4gICAgY29uc3QgbiA9IGJoKHQgPSB1aCh0LCB2aCkpLCBzID0gbmV3IEVoO1xuICAgIHJldHVybiBZYShuLCB0Ll9kYXRhYmFzZUlkLCBlLCBzKSwgcztcbn1cblxuLyoqXG4gKiBSZWFkcyBhIEZpcmVzdG9yZSB7QGxpbmsgUXVlcnl9IGZyb20gbG9jYWwgY2FjaGUsIGlkZW50aWZpZWQgYnkgdGhlIGdpdmVuXG4gKiBuYW1lLlxuICpcbiAqIFRoZSBuYW1lZCBxdWVyaWVzIGFyZSBwYWNrYWdlZCAgaW50byBidW5kbGVzIG9uIHRoZSBzZXJ2ZXIgc2lkZSAoYWxvbmdcbiAqIHdpdGggcmVzdWx0aW5nIGRvY3VtZW50cyksIGFuZCBsb2FkZWQgdG8gbG9jYWwgY2FjaGUgdXNpbmcgYGxvYWRCdW5kbGVgLiBPbmNlXG4gKiBpbiBsb2NhbCBjYWNoZSwgdXNlIHRoaXMgbWV0aG9kIHRvIGV4dHJhY3QgYSB7QGxpbmsgUXVlcnl9IGJ5IG5hbWUuXG4gKlxuICogQHBhcmFtIGZpcmVzdG9yZSAtIFRoZSB7QGxpbmsgRmlyZXN0b3JlfSBpbnN0YW5jZSB0byByZWFkIHRoZSBxdWVyeSBmcm9tLlxuICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgcXVlcnkuXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IGlzIHJlc29sdmVkIHdpdGggdGhlIFF1ZXJ5IG9yIGBudWxsYC5cbiAqLyBmdW5jdGlvbiBGaCh0LCBlKSB7XG4gICAgcmV0dXJuIFhhKGJoKHQgPSB1aCh0LCB2aCkpLCBlKS50aGVuKChlID0+IGUgPyBuZXcgZGgodCwgbnVsbCwgZS5xdWVyeSkgOiBudWxsKSk7XG59XG5cbmZ1bmN0aW9uIEJoKHQpIHtcbiAgICBpZiAodC5faW5pdGlhbGl6ZWQgfHwgdC5fdGVybWluYXRlZCkgdGhyb3cgbmV3IFUocS5GQUlMRURfUFJFQ09ORElUSU9OLCBcIkZpcmVzdG9yZSBoYXMgYWxyZWFkeSBiZWVuIHN0YXJ0ZWQgYW5kIHBlcnNpc3RlbmNlIGNhbiBubyBsb25nZXIgYmUgZW5hYmxlZC4gWW91IGNhbiBvbmx5IGVuYWJsZSBwZXJzaXN0ZW5jZSBiZWZvcmUgY2FsbGluZyBhbnkgb3RoZXIgbWV0aG9kcyBvbiBhIEZpcmVzdG9yZSBvYmplY3QuXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjIgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVwcmVzZW50cyBhbiBhZ2dyZWdhdGlvbiB0aGF0IGNhbiBiZSBwZXJmb3JtZWQgYnkgRmlyZXN0b3JlLlxuICovXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXVudXNlZC12YXJzXG5jbGFzcyBMaCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlIGEgbmV3IEFnZ3JlZ2F0ZUZpZWxkPFQ+XG4gICAgICogQHBhcmFtIF9hZ2dyZWdhdGVUeXBlIFNwZWNpZmllcyB0aGUgdHlwZSBvZiBhZ2dyZWdhdGlvbiBvcGVyYXRpb24gdG8gcGVyZm9ybS5cbiAgICAgKiBAcGFyYW0gX2ludGVybmFsRmllbGRQYXRoIE9wdGlvbmFsbHkgc3BlY2lmaWVzIHRoZSBmaWVsZCB0aGF0IGlzIGFnZ3JlZ2F0ZWQuXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoXG4gICAgLy8gVE9ETyAoc3VtL2F2ZykgbWFrZSBhZ2dyZWdhdGVUeXBlIHB1YmxpYyB3aGVuIHRoZSBmZWF0dXJlIGlzIHN1cHBvcnRlZFxuICAgIHQgPSBcImNvdW50XCIsIGUpIHtcbiAgICAgICAgdGhpcy5fYWdncmVnYXRlVHlwZSA9IHQsIHRoaXMuX2ludGVybmFsRmllbGRQYXRoID0gZSwgXG4gICAgICAgIC8qKiBBIHR5cGUgc3RyaW5nIHRvIHVuaXF1ZWx5IGlkZW50aWZ5IGluc3RhbmNlcyBvZiB0aGlzIGNsYXNzLiAqL1xuICAgICAgICB0aGlzLnR5cGUgPSBcIkFnZ3JlZ2F0ZUZpZWxkXCI7XG4gICAgfVxufVxuXG4vKipcbiAqIFRoZSByZXN1bHRzIG9mIGV4ZWN1dGluZyBhbiBhZ2dyZWdhdGlvbiBxdWVyeS5cbiAqLyBjbGFzcyBxaCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fZGF0YSA9IG4sIFxuICAgICAgICAvKiogQSB0eXBlIHN0cmluZyB0byB1bmlxdWVseSBpZGVudGlmeSBpbnN0YW5jZXMgb2YgdGhpcyBjbGFzcy4gKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJBZ2dyZWdhdGVRdWVyeVNuYXBzaG90XCIsIHRoaXMucXVlcnkgPSB0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRoZSByZXN1bHRzIG9mIHRoZSBhZ2dyZWdhdGlvbnMgcGVyZm9ybWVkIG92ZXIgdGhlIHVuZGVybHlpbmdcbiAgICAgKiBxdWVyeS5cbiAgICAgKlxuICAgICAqIFRoZSBrZXlzIG9mIHRoZSByZXR1cm5lZCBvYmplY3Qgd2lsbCBiZSB0aGUgc2FtZSBhcyB0aG9zZSBvZiB0aGVcbiAgICAgKiBgQWdncmVnYXRlU3BlY2Agb2JqZWN0IHNwZWNpZmllZCB0byB0aGUgYWdncmVnYXRpb24gbWV0aG9kLCBhbmQgdGhlIHZhbHVlc1xuICAgICAqIHdpbGwgYmUgdGhlIGNvcnJlc3BvbmRpbmcgYWdncmVnYXRpb24gcmVzdWx0LlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIHJlc3VsdHMgb2YgdGhlIGFnZ3JlZ2F0aW9ucyBwZXJmb3JtZWQgb3ZlciB0aGUgdW5kZXJseWluZ1xuICAgICAqIHF1ZXJ5LlxuICAgICAqLyAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydE9iamVjdE1hcCh0aGlzLl9kYXRhKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEFuIGltbXV0YWJsZSBvYmplY3QgcmVwcmVzZW50aW5nIGFuIGFycmF5IG9mIGJ5dGVzLlxuICovIGNsYXNzIFVoIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5fYnl0ZVN0cmluZyA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgYEJ5dGVzYCBvYmplY3QgZnJvbSB0aGUgZ2l2ZW4gQmFzZTY0IHN0cmluZywgY29udmVydGluZyBpdCB0b1xuICAgICAqIGJ5dGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIGJhc2U2NCAtIFRoZSBCYXNlNjQgc3RyaW5nIHVzZWQgdG8gY3JlYXRlIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgc3RhdGljIGZyb21CYXNlNjRTdHJpbmcodCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVaChWZS5mcm9tQmFzZTY0U3RyaW5nKHQpKTtcbiAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkZhaWxlZCB0byBjb25zdHJ1Y3QgZGF0YSBmcm9tIEJhc2U2NCBzdHJpbmc6IFwiICsgdCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBgQnl0ZXNgIG9iamVjdCBmcm9tIHRoZSBnaXZlbiBVaW50OEFycmF5LlxuICAgICAqXG4gICAgICogQHBhcmFtIGFycmF5IC0gVGhlIFVpbnQ4QXJyYXkgdXNlZCB0byBjcmVhdGUgdGhlIGBCeXRlc2Agb2JqZWN0LlxuICAgICAqLyAgICBzdGF0aWMgZnJvbVVpbnQ4QXJyYXkodCkge1xuICAgICAgICByZXR1cm4gbmV3IFVoKFZlLmZyb21VaW50OEFycmF5KHQpKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyB0aGUgdW5kZXJseWluZyBieXRlcyBhcyBhIEJhc2U2NC1lbmNvZGVkIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIFRoZSBCYXNlNjQtZW5jb2RlZCBzdHJpbmcgY3JlYXRlZCBmcm9tIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9CYXNlNjQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9ieXRlU3RyaW5nLnRvQmFzZTY0KCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdGhlIHVuZGVybHlpbmcgYnl0ZXMgaW4gYSBuZXcgYFVpbnQ4QXJyYXlgLlxuICAgICAqXG4gICAgICogQHJldHVybnMgVGhlIFVpbnQ4QXJyYXkgY3JlYXRlZCBmcm9tIHRoZSBgQnl0ZXNgIG9iamVjdC5cbiAgICAgKi8gICAgdG9VaW50OEFycmF5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fYnl0ZVN0cmluZy50b1VpbnQ4QXJyYXkoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyBBIHN0cmluZyByZXByZXNlbnRhdGlvbiBvZiB0aGUgYEJ5dGVzYCBvYmplY3QuXG4gICAgICovICAgIHRvU3RyaW5nKCkge1xuICAgICAgICByZXR1cm4gXCJCeXRlcyhiYXNlNjQ6IFwiICsgdGhpcy50b0Jhc2U2NCgpICsgXCIpXCI7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBCeXRlc2Agb2JqZWN0IGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEJ5dGVzYCBvYmplY3QgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgQnl0ZXNgIG9iamVjdCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2J5dGVTdHJpbmcuaXNFcXVhbCh0Ll9ieXRlU3RyaW5nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgYEZpZWxkUGF0aGAgcmVmZXJzIHRvIGEgZmllbGQgaW4gYSBkb2N1bWVudC4gVGhlIHBhdGggbWF5IGNvbnNpc3Qgb2YgYVxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhXG4gKiBsaXN0IG9mIGZpZWxkIG5hbWVzIChyZWZlcnJpbmcgdG8gYSBuZXN0ZWQgZmllbGQgaW4gdGhlIGRvY3VtZW50KS5cbiAqXG4gKiBDcmVhdGUgYSBgRmllbGRQYXRoYCBieSBwcm92aWRpbmcgZmllbGQgbmFtZXMuIElmIG1vcmUgdGhhbiBvbmUgZmllbGRcbiAqIG5hbWUgaXMgcHJvdmlkZWQsIHRoZSBwYXRoIHdpbGwgcG9pbnQgdG8gYSBuZXN0ZWQgZmllbGQgaW4gYSBkb2N1bWVudC5cbiAqLyBjbGFzcyBLaCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIGBGaWVsZFBhdGhgIGZyb20gdGhlIHByb3ZpZGVkIGZpZWxkIG5hbWVzLiBJZiBtb3JlIHRoYW4gb25lIGZpZWxkXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxuICAgICAqXG4gICAgICogQHBhcmFtIGZpZWxkTmFtZXMgLSBBIGxpc3Qgb2YgZmllbGQgbmFtZXMuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IoLi4udCkge1xuICAgICAgICBmb3IgKGxldCBlID0gMDsgZSA8IHQubGVuZ3RoOyArK2UpIGlmICgwID09PSB0W2VdLmxlbmd0aCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgZmllbGQgbmFtZSBhdCBhcmd1bWVudCAkKGkgKyAxKS4gRmllbGQgbmFtZXMgbXVzdCBub3QgYmUgZW1wdHkuXCIpO1xuICAgICAgICB0aGlzLl9pbnRlcm5hbFBhdGggPSBuZXcgYXQodCk7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBGaWVsZFBhdGhgIGlzIGVxdWFsIHRvIHRoZSBwcm92aWRlZCBvbmUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgYEZpZWxkUGF0aGAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgRmllbGRQYXRoYCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2ludGVybmFsUGF0aC5pc0VxdWFsKHQuX2ludGVybmFsUGF0aCk7XG4gICAgfVxufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHNlbnRpbmVsIGBGaWVsZFBhdGhgIHRvIHJlZmVyIHRvIHRoZSBJRCBvZiBhIGRvY3VtZW50LlxuICogSXQgY2FuIGJlIHVzZWQgaW4gcXVlcmllcyB0byBzb3J0IG9yIGZpbHRlciBieSB0aGUgZG9jdW1lbnQgSUQuXG4gKi8gZnVuY3Rpb24gR2goKSB7XG4gICAgcmV0dXJuIG5ldyBLaChcIl9fbmFtZV9fXCIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBTZW50aW5lbCB2YWx1ZXMgdGhhdCBjYW4gYmUgdXNlZCB3aGVuIHdyaXRpbmcgZG9jdW1lbnQgZmllbGRzIHdpdGggYHNldCgpYFxuICogb3IgYHVwZGF0ZSgpYC5cbiAqLyBjbGFzcyBRaCB7XG4gICAgLyoqXG4gICAgICogQHBhcmFtIF9tZXRob2ROYW1lIC0gVGhlIHB1YmxpYyBBUEkgZW5kcG9pbnQgdGhhdCByZXR1cm5zIHRoaXMgY2xhc3MuXG4gICAgICogQGhpZGVjb25zdHJ1Y3RvclxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQpIHtcbiAgICAgICAgdGhpcy5fbWV0aG9kTmFtZSA9IHQ7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBBbiBpbW11dGFibGUgb2JqZWN0IHJlcHJlc2VudGluZyBhIGdlb2dyYXBoaWMgbG9jYXRpb24gaW4gRmlyZXN0b3JlLiBUaGVcbiAqIGxvY2F0aW9uIGlzIHJlcHJlc2VudGVkIGFzIGxhdGl0dWRlL2xvbmdpdHVkZSBwYWlyLlxuICpcbiAqIExhdGl0dWRlIHZhbHVlcyBhcmUgaW4gdGhlIHJhbmdlIG9mIFstOTAsIDkwXS5cbiAqIExvbmdpdHVkZSB2YWx1ZXMgYXJlIGluIHRoZSByYW5nZSBvZiBbLTE4MCwgMTgwXS5cbiAqLyBjbGFzcyBqaCB7XG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBpbW11dGFibGUgYEdlb1BvaW50YCBvYmplY3Qgd2l0aCB0aGUgcHJvdmlkZWQgbGF0aXR1ZGUgYW5kXG4gICAgICogbG9uZ2l0dWRlIHZhbHVlcy5cbiAgICAgKiBAcGFyYW0gbGF0aXR1ZGUgLSBUaGUgbGF0aXR1ZGUgYXMgbnVtYmVyIGJldHdlZW4gLTkwIGFuZCA5MC5cbiAgICAgKiBAcGFyYW0gbG9uZ2l0dWRlIC0gVGhlIGxvbmdpdHVkZSBhcyBudW1iZXIgYmV0d2VlbiAtMTgwIGFuZCAxODAuXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBpZiAoIWlzRmluaXRlKHQpIHx8IHQgPCAtOTAgfHwgdCA+IDkwKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiTGF0aXR1ZGUgbXVzdCBiZSBhIG51bWJlciBiZXR3ZWVuIC05MCBhbmQgOTAsIGJ1dCB3YXM6IFwiICsgdCk7XG4gICAgICAgIGlmICghaXNGaW5pdGUoZSkgfHwgZSA8IC0xODAgfHwgZSA+IDE4MCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkxvbmdpdHVkZSBtdXN0IGJlIGEgbnVtYmVyIGJldHdlZW4gLTE4MCBhbmQgMTgwLCBidXQgd2FzOiBcIiArIGUpO1xuICAgICAgICB0aGlzLl9sYXQgPSB0LCB0aGlzLl9sb25nID0gZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGxhdGl0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxhdGl0dWRlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbGF0O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBUaGUgbG9uZ2l0dWRlIG9mIHRoaXMgYEdlb1BvaW50YCBpbnN0YW5jZS5cbiAgICAgKi8gICAgZ2V0IGxvbmdpdHVkZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvbmc7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGBHZW9Qb2ludGAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgR2VvUG9pbnRgIHRvIGNvbXBhcmUgYWdhaW5zdC5cbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoaXMgYEdlb1BvaW50YCBpcyBlcXVhbCB0byB0aGUgcHJvdmlkZWQgb25lLlxuICAgICAqLyAgICBpc0VxdWFsKHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhdCA9PT0gdC5fbGF0ICYmIHRoaXMuX2xvbmcgPT09IHQuX2xvbmc7XG4gICAgfVxuICAgIC8qKiBSZXR1cm5zIGEgSlNPTi1zZXJpYWxpemFibGUgcmVwcmVzZW50YXRpb24gb2YgdGhpcyBHZW9Qb2ludC4gKi8gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgbGF0aXR1ZGU6IHRoaXMuX2xhdCxcbiAgICAgICAgICAgIGxvbmdpdHVkZTogdGhpcy5fbG9uZ1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBBY3R1YWxseSBwcml2YXRlIHRvIEpTIGNvbnN1bWVycyBvZiBvdXIgQVBJLCBzbyB0aGlzIGZ1bmN0aW9uIGlzIHByZWZpeGVkXG4gICAgICogd2l0aCBhbiB1bmRlcnNjb3JlLlxuICAgICAqLyAgICBfY29tcGFyZVRvKHQpIHtcbiAgICAgICAgcmV0dXJuIGV0KHRoaXMuX2xhdCwgdC5fbGF0KSB8fCBldCh0aGlzLl9sb25nLCB0Ll9sb25nKTtcbiAgICB9XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGNvbnN0IHpoID0gL15fXy4qX18kLztcblxuLyoqIFRoZSByZXN1bHQgb2YgcGFyc2luZyBkb2N1bWVudCBkYXRhIChlLmcuIGZvciBhIHNldERhdGEgY2FsbCkuICovIGNsYXNzIFdoIHtcbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuZGF0YSA9IHQsIHRoaXMuZmllbGRNYXNrID0gZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBuO1xuICAgIH1cbiAgICB0b011dGF0aW9uKHQsIGUpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuZmllbGRNYXNrID8gbmV3IHpzKHQsIHRoaXMuZGF0YSwgdGhpcy5maWVsZE1hc2ssIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKSA6IG5ldyBqcyh0LCB0aGlzLmRhdGEsIGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zKTtcbiAgICB9XG59XG5cbi8qKiBUaGUgcmVzdWx0IG9mIHBhcnNpbmcgXCJ1cGRhdGVcIiBkYXRhIChpLmUuIGZvciBhbiB1cGRhdGVEYXRhIGNhbGwpLiAqLyBjbGFzcyBIaCB7XG4gICAgY29uc3RydWN0b3IodCwgXG4gICAgLy8gVGhlIGZpZWxkTWFzayBkb2VzIG5vdCBpbmNsdWRlIGRvY3VtZW50IHRyYW5zZm9ybXMuXG4gICAgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGEgPSB0LCB0aGlzLmZpZWxkTWFzayA9IGUsIHRoaXMuZmllbGRUcmFuc2Zvcm1zID0gbjtcbiAgICB9XG4gICAgdG9NdXRhdGlvbih0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgenModCwgdGhpcy5kYXRhLCB0aGlzLmZpZWxkTWFzaywgZSwgdGhpcy5maWVsZFRyYW5zZm9ybXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gSmgodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIFVzZXJEYXRhU291cmNlLlNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMiAvKiBVc2VyRGF0YVNvdXJjZS5NZXJnZVNldCAqLyA6XG4gLy8gZmFsbCB0aHJvdWdoXG4gICAgICAgICAgICAgIGNhc2UgMSAvKiBVc2VyRGF0YVNvdXJjZS5VcGRhdGUgKi8gOlxuICAgICAgICByZXR1cm4gITA7XG5cbiAgICAgIGNhc2UgMyAvKiBVc2VyRGF0YVNvdXJjZS5Bcmd1bWVudCAqLyA6XG4gICAgICBjYXNlIDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyA6XG4gICAgICAgIHJldHVybiAhMTtcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgdGhyb3cgTygpO1xuICAgIH1cbn1cblxuLyoqIEEgXCJjb250ZXh0XCIgb2JqZWN0IHBhc3NlZCBhcm91bmQgd2hpbGUgcGFyc2luZyB1c2VyIGRhdGEuICovIGNsYXNzIFloIHtcbiAgICAvKipcbiAgICAgKiBJbml0aWFsaXplcyBhIFBhcnNlQ29udGV4dCB3aXRoIHRoZSBnaXZlbiBzb3VyY2UgYW5kIHBhdGguXG4gICAgICpcbiAgICAgKiBAcGFyYW0gc2V0dGluZ3MgLSBUaGUgc2V0dGluZ3MgZm9yIHRoZSBwYXJzZXIuXG4gICAgICogQHBhcmFtIGRhdGFiYXNlSWQgLSBUaGUgZGF0YWJhc2UgSUQgb2YgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZS5cbiAgICAgKiBAcGFyYW0gc2VyaWFsaXplciAtIFRoZSBzZXJpYWxpemVyIHRvIHVzZSB0byBnZW5lcmF0ZSB0aGUgVmFsdWUgcHJvdG8uXG4gICAgICogQHBhcmFtIGlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgLSBXaGV0aGVyIHRvIGlnbm9yZSB1bmRlZmluZWQgcHJvcGVydGllc1xuICAgICAqIHJhdGhlciB0aGFuIHRocm93LlxuICAgICAqIEBwYXJhbSBmaWVsZFRyYW5zZm9ybXMgLSBBIG11dGFibGUgbGlzdCBvZiBmaWVsZCB0cmFuc2Zvcm1zIGVuY291bnRlcmVkXG4gICAgICogd2hpbGUgcGFyc2luZyB0aGUgZGF0YS5cbiAgICAgKiBAcGFyYW0gZmllbGRNYXNrIC0gQSBtdXRhYmxlIGxpc3Qgb2YgZmllbGQgcGF0aHMgZW5jb3VudGVyZWQgd2hpbGUgcGFyc2luZ1xuICAgICAqIHRoZSBkYXRhLlxuICAgICAqXG4gICAgICogVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3csIHNvIHBhdGggY2FuIGJlXG4gICAgICogbnVsbCB0byBpbmRpY2F0ZSB0aGUgY29udGV4dCByZXByZXNlbnRzIGFueSBsb2NhdGlvbiB3aXRoaW4gYW4gYXJyYXkgKGluXG4gICAgICogd2hpY2ggY2FzZSBjZXJ0YWluIGZlYXR1cmVzIHdpbGwgbm90IHdvcmsgYW5kIGVycm9ycyB3aWxsIGJlIHNvbWV3aGF0XG4gICAgICogY29tcHJvbWlzZWQpLlxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IHQsIHRoaXMuZGF0YWJhc2VJZCA9IGUsIHRoaXMuc2VyaWFsaXplciA9IG4sIHRoaXMuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyA9IHMsIFxuICAgICAgICAvLyBNaW5vciBoYWNrOiBJZiBmaWVsZFRyYW5zZm9ybXMgaXMgdW5kZWZpbmVkLCB3ZSBhc3N1bWUgdGhpcyBpcyBhblxuICAgICAgICAvLyBleHRlcm5hbCBjYWxsIGFuZCB3ZSBuZWVkIHRvIHZhbGlkYXRlIHRoZSBlbnRpcmUgcGF0aC5cbiAgICAgICAgdm9pZCAwID09PSBpICYmIHRoaXMudWEoKSwgdGhpcy5maWVsZFRyYW5zZm9ybXMgPSBpIHx8IFtdLCB0aGlzLmZpZWxkTWFzayA9IHIgfHwgW107XG4gICAgfVxuICAgIGdldCBwYXRoKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5ncy5wYXRoO1xuICAgIH1cbiAgICBnZXQgY2EoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmNhO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyBhIG5ldyBjb250ZXh0IHdpdGggdGhlIHNwZWNpZmllZCBzZXR0aW5ncyBvdmVyd3JpdHRlbi4gKi8gICAgYWEodCkge1xuICAgICAgICByZXR1cm4gbmV3IFloKE9iamVjdC5hc3NpZ24oT2JqZWN0LmFzc2lnbih7fSwgdGhpcy5zZXR0aW5ncyksIHQpLCB0aGlzLmRhdGFiYXNlSWQsIHRoaXMuc2VyaWFsaXplciwgdGhpcy5pZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzLCB0aGlzLmZpZWxkVHJhbnNmb3JtcywgdGhpcy5maWVsZE1hc2spO1xuICAgIH1cbiAgICBoYSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKGUgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2hpbGQodCksIHMgPSB0aGlzLmFhKHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICBsYTogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzLmZhKHQpLCBzO1xuICAgIH1cbiAgICBkYSh0KSB7XG4gICAgICAgIHZhciBlO1xuICAgICAgICBjb25zdCBuID0gbnVsbCA9PT0gKGUgPSB0aGlzLnBhdGgpIHx8IHZvaWQgMCA9PT0gZSA/IHZvaWQgMCA6IGUuY2hpbGQodCksIHMgPSB0aGlzLmFhKHtcbiAgICAgICAgICAgIHBhdGg6IG4sXG4gICAgICAgICAgICBsYTogITFcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybiBzLnVhKCksIHM7XG4gICAgfVxuICAgIHdhKHQpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogV2UgZG9uJ3Qgc3VwcG9ydCBhcnJheSBwYXRocyByaWdodCBub3c7IHNvIG1ha2UgcGF0aFxuICAgICAgICAvLyB1bmRlZmluZWQuXG4gICAgICAgIHJldHVybiB0aGlzLmFhKHtcbiAgICAgICAgICAgIHBhdGg6IHZvaWQgMCxcbiAgICAgICAgICAgIGxhOiAhMFxuICAgICAgICB9KTtcbiAgICB9XG4gICAgX2EodCkge1xuICAgICAgICByZXR1cm4gZ2wodCwgdGhpcy5zZXR0aW5ncy5tZXRob2ROYW1lLCB0aGlzLnNldHRpbmdzLm1hIHx8ICExLCB0aGlzLnBhdGgsIHRoaXMuc2V0dGluZ3MuZ2EpO1xuICAgIH1cbiAgICAvKiogUmV0dXJucyAndHJ1ZScgaWYgJ2ZpZWxkUGF0aCcgd2FzIHRyYXZlcnNlZCB3aGVuIGNyZWF0aW5nIHRoaXMgY29udGV4dC4gKi8gICAgY29udGFpbnModCkge1xuICAgICAgICByZXR1cm4gdm9pZCAwICE9PSB0aGlzLmZpZWxkTWFzay5maW5kKChlID0+IHQuaXNQcmVmaXhPZihlKSkpIHx8IHZvaWQgMCAhPT0gdGhpcy5maWVsZFRyYW5zZm9ybXMuZmluZCgoZSA9PiB0LmlzUHJlZml4T2YoZS5maWVsZCkpKTtcbiAgICB9XG4gICAgdWEoKSB7XG4gICAgICAgIC8vIFRPRE8oYi8zNDg3MTEzMSk6IFJlbW92ZSBudWxsIGNoZWNrIG9uY2Ugd2UgaGF2ZSBwcm9wZXIgcGF0aHMgZm9yIGZpZWxkc1xuICAgICAgICAvLyB3aXRoaW4gYXJyYXlzLlxuICAgICAgICBpZiAodGhpcy5wYXRoKSBmb3IgKGxldCB0ID0gMDsgdCA8IHRoaXMucGF0aC5sZW5ndGg7IHQrKykgdGhpcy5mYSh0aGlzLnBhdGguZ2V0KHQpKTtcbiAgICB9XG4gICAgZmEodCkge1xuICAgICAgICBpZiAoMCA9PT0gdC5sZW5ndGgpIHRocm93IHRoaXMuX2EoXCJEb2N1bWVudCBmaWVsZHMgbXVzdCBub3QgYmUgZW1wdHlcIik7XG4gICAgICAgIGlmIChKaCh0aGlzLmNhKSAmJiB6aC50ZXN0KHQpKSB0aHJvdyB0aGlzLl9hKCdEb2N1bWVudCBmaWVsZHMgY2Fubm90IGJlZ2luIGFuZCBlbmQgd2l0aCBcIl9fXCInKTtcbiAgICB9XG59XG5cbi8qKlxuICogSGVscGVyIGZvciBwYXJzaW5nIHJhdyB1c2VyIGlucHV0IChwcm92aWRlZCB2aWEgdGhlIEFQSSkgaW50byBpbnRlcm5hbCBtb2RlbFxuICogY2xhc3Nlcy5cbiAqLyBjbGFzcyBYaCB7XG4gICAgY29uc3RydWN0b3IodCwgZSwgbikge1xuICAgICAgICB0aGlzLmRhdGFiYXNlSWQgPSB0LCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMgPSBlLCB0aGlzLnNlcmlhbGl6ZXIgPSBuIHx8IEZ1KHQpO1xuICAgIH1cbiAgICAvKiogQ3JlYXRlcyBhIG5ldyB0b3AtbGV2ZWwgcGFyc2UgY29udGV4dC4gKi8gICAgeWEodCwgZSwgbiwgcyA9ICExKSB7XG4gICAgICAgIHJldHVybiBuZXcgWWgoe1xuICAgICAgICAgICAgY2E6IHQsXG4gICAgICAgICAgICBtZXRob2ROYW1lOiBlLFxuICAgICAgICAgICAgZ2E6IG4sXG4gICAgICAgICAgICBwYXRoOiBhdC5lbXB0eVBhdGgoKSxcbiAgICAgICAgICAgIGxhOiAhMSxcbiAgICAgICAgICAgIG1hOiBzXG4gICAgICAgIH0sIHRoaXMuZGF0YWJhc2VJZCwgdGhpcy5zZXJpYWxpemVyLCB0aGlzLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gWmgodCkge1xuICAgIGNvbnN0IGUgPSB0Ll9mcmVlemVTZXR0aW5ncygpLCBuID0gRnUodC5fZGF0YWJhc2VJZCk7XG4gICAgcmV0dXJuIG5ldyBYaCh0Ll9kYXRhYmFzZUlkLCAhIWUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcywgbik7XG59XG5cbi8qKiBQYXJzZSBkb2N1bWVudCBkYXRhIGZyb20gYSBzZXQoKSBjYWxsLiAqLyBmdW5jdGlvbiB0bCh0LCBlLCBuLCBzLCBpLCByID0ge30pIHtcbiAgICBjb25zdCBvID0gdC55YShyLm1lcmdlIHx8IHIubWVyZ2VGaWVsZHMgPyAyIC8qIFVzZXJEYXRhU291cmNlLk1lcmdlU2V0ICovIDogMCAvKiBVc2VyRGF0YVNvdXJjZS5TZXQgKi8gLCBlLCBuLCBpKTtcbiAgICBkbChcIkRhdGEgbXVzdCBiZSBhbiBvYmplY3QsIGJ1dCBpdCB3YXM6XCIsIG8sIHMpO1xuICAgIGNvbnN0IHUgPSBsbChzLCBvKTtcbiAgICBsZXQgYywgYTtcbiAgICBpZiAoci5tZXJnZSkgYyA9IG5ldyBSZShvLmZpZWxkTWFzayksIGEgPSBvLmZpZWxkVHJhbnNmb3JtczsgZWxzZSBpZiAoci5tZXJnZUZpZWxkcykge1xuICAgICAgICBjb25zdCB0ID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBvZiByLm1lcmdlRmllbGRzKSB7XG4gICAgICAgICAgICBjb25zdCBpID0gd2woZSwgcywgbik7XG4gICAgICAgICAgICBpZiAoIW8uY29udGFpbnMoaSkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEZpZWxkICcke2l9JyBpcyBzcGVjaWZpZWQgaW4geW91ciBmaWVsZCBtYXNrIGJ1dCBtaXNzaW5nIGZyb20geW91ciBpbnB1dCBkYXRhLmApO1xuICAgICAgICAgICAgeWwodCwgaSkgfHwgdC5wdXNoKGkpO1xuICAgICAgICB9XG4gICAgICAgIGMgPSBuZXcgUmUodCksIGEgPSBvLmZpZWxkVHJhbnNmb3Jtcy5maWx0ZXIoKHQgPT4gYy5jb3ZlcnModC5maWVsZCkpKTtcbiAgICB9IGVsc2UgYyA9IG51bGwsIGEgPSBvLmZpZWxkVHJhbnNmb3JtcztcbiAgICByZXR1cm4gbmV3IFdoKG5ldyB1bih1KSwgYywgYSk7XG59XG5cbmNsYXNzIGVsIGV4dGVuZHMgUWgge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgaWYgKDIgLyogVXNlckRhdGFTb3VyY2UuTWVyZ2VTZXQgKi8gIT09IHQuY2EpIHRocm93IDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovID09PSB0LmNhID8gdC5fYShgJHt0aGlzLl9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGFwcGVhciBhdCB0aGUgdG9wIGxldmVsIG9mIHlvdXIgdXBkYXRlIGRhdGFgKSA6IHQuX2EoYCR7dGhpcy5fbWV0aG9kTmFtZX0oKSBjYW5ub3QgYmUgdXNlZCB3aXRoIHNldCgpIHVubGVzcyB5b3UgcGFzcyB7bWVyZ2U6dHJ1ZX1gKTtcbiAgICAgICAgLy8gTm8gdHJhbnNmb3JtIHRvIGFkZCBmb3IgYSBkZWxldGUsIGJ1dCB3ZSBuZWVkIHRvIGFkZCBpdCB0byBvdXJcbiAgICAgICAgLy8gZmllbGRNYXNrIHNvIGl0IGdldHMgZGVsZXRlZC5cbiAgICAgICAgcmV0dXJuIHQuZmllbGRNYXNrLnB1c2godC5wYXRoKSwgbnVsbDtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0IGluc3RhbmNlb2YgZWw7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBjaGlsZCBjb250ZXh0IGZvciBwYXJzaW5nIFNlcmlhbGl6YWJsZUZpZWxkVmFsdWVzLlxuICpcbiAqIFRoaXMgaXMgZGlmZmVyZW50IHRoYW4gY2FsbGluZyBgUGFyc2VDb250ZXh0LmNvbnRleHRXaXRoYCBiZWNhdXNlIGl0IGtlZXBzXG4gKiB0aGUgZmllbGRUcmFuc2Zvcm1zIGFuZCBmaWVsZE1hc2sgc2VwYXJhdGUuXG4gKlxuICogVGhlIGNyZWF0ZWQgY29udGV4dCBoYXMgaXRzIGBkYXRhU291cmNlYCBzZXQgdG8gYFVzZXJEYXRhU291cmNlLkFyZ3VtZW50YC5cbiAqIEFsdGhvdWdoIHRoZXNlIHZhbHVlcyBhcmUgdXNlZCB3aXRoIHdyaXRlcywgYW55IGVsZW1lbnRzIGluIHRoZXNlIEZpZWxkVmFsdWVzXG4gKiBhcmUgbm90IGNvbnNpZGVyZWQgd3JpdGVzIHNpbmNlIHRoZXkgY2Fubm90IGNvbnRhaW4gYW55IEZpZWxkVmFsdWUgc2VudGluZWxzLFxuICogZXRjLlxuICpcbiAqIEBwYXJhbSBmaWVsZFZhbHVlIC0gVGhlIHNlbnRpbmVsIEZpZWxkVmFsdWUgZm9yIHdoaWNoIHRvIGNyZWF0ZSBhIGNoaWxkXG4gKiAgICAgY29udGV4dC5cbiAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIHBhcmVudCBjb250ZXh0LlxuICogQHBhcmFtIGFycmF5RWxlbWVudCAtIFdoZXRoZXIgb3Igbm90IHRoZSBGaWVsZFZhbHVlIGhhcyBhbiBhcnJheS5cbiAqLyBmdW5jdGlvbiBubCh0LCBlLCBuKSB7XG4gICAgcmV0dXJuIG5ldyBZaCh7XG4gICAgICAgIGNhOiAzIC8qIFVzZXJEYXRhU291cmNlLkFyZ3VtZW50ICovICxcbiAgICAgICAgZ2E6IGUuc2V0dGluZ3MuZ2EsXG4gICAgICAgIG1ldGhvZE5hbWU6IHQuX21ldGhvZE5hbWUsXG4gICAgICAgIGxhOiBuXG4gICAgfSwgZS5kYXRhYmFzZUlkLCBlLnNlcmlhbGl6ZXIsIGUuaWdub3JlVW5kZWZpbmVkUHJvcGVydGllcyk7XG59XG5cbmNsYXNzIHNsIGV4dGVuZHMgUWgge1xuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBNcyh0LnBhdGgsIG5ldyBicyk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICByZXR1cm4gdCBpbnN0YW5jZW9mIHNsO1xuICAgIH1cbn1cblxuY2xhc3MgaWwgZXh0ZW5kcyBRaCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5wYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5sKHRoaXMsIHQsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMucGEubWFwKCh0ID0+IGhsKHQsIGUpKSksIHMgPSBuZXcgVnMobik7XG4gICAgICAgIHJldHVybiBuZXcgTXModC5wYXRoLCBzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuY2xhc3MgcmwgZXh0ZW5kcyBRaCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5wYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5sKHRoaXMsIHQsIFxuICAgICAgICAvKmFycmF5PSovICEwKSwgbiA9IHRoaXMucGEubWFwKCh0ID0+IGhsKHQsIGUpKSksIHMgPSBuZXcgRHMobik7XG4gICAgICAgIHJldHVybiBuZXcgTXModC5wYXRoLCBzKTtcbiAgICB9XG4gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIC8vIFRPRE8obXJzY2htaWR0KTogSW1wbGVtZW50IGlzRXF1YWxzXG4gICAgICAgIHJldHVybiB0aGlzID09PSB0O1xuICAgIH1cbn1cblxuY2xhc3Mgb2wgZXh0ZW5kcyBRaCB7XG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcih0KSwgdGhpcy5JYSA9IGU7XG4gICAgfVxuICAgIF90b0ZpZWxkVHJhbnNmb3JtKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IG5ldyB4cyh0LnNlcmlhbGl6ZXIsIEVzKHQuc2VyaWFsaXplciwgdGhpcy5JYSkpO1xuICAgICAgICByZXR1cm4gbmV3IE1zKHQucGF0aCwgZSk7XG4gICAgfVxuICAgIGlzRXF1YWwodCkge1xuICAgICAgICAvLyBUT0RPKG1yc2NobWlkdCk6IEltcGxlbWVudCBpc0VxdWFsc1xuICAgICAgICByZXR1cm4gdGhpcyA9PT0gdDtcbiAgICB9XG59XG5cbi8qKiBQYXJzZSB1cGRhdGUgZGF0YSBmcm9tIGFuIHVwZGF0ZSgpIGNhbGwuICovIGZ1bmN0aW9uIHVsKHQsIGUsIG4sIHMpIHtcbiAgICBjb25zdCBpID0gdC55YSgxIC8qIFVzZXJEYXRhU291cmNlLlVwZGF0ZSAqLyAsIGUsIG4pO1xuICAgIGRsKFwiRGF0YSBtdXN0IGJlIGFuIG9iamVjdCwgYnV0IGl0IHdhczpcIiwgaSwgcyk7XG4gICAgY29uc3QgciA9IFtdLCBvID0gdW4uZW1wdHkoKTtcbiAgICBnZShzLCAoKHQsIHMpID0+IHtcbiAgICAgICAgY29uc3QgdSA9IG1sKGUsIHQsIG4pO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgcyA9IGdldE1vZHVsYXJJbnN0YW5jZShzKTtcbiAgICAgICAgY29uc3QgYyA9IGkuZGEodSk7XG4gICAgICAgIGlmIChzIGluc3RhbmNlb2YgZWwpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgci5wdXNoKHUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBobChzLCBjKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAoci5wdXNoKHUpLCBvLnNldCh1LCB0KSk7XG4gICAgICAgIH1cbiAgICB9KSk7XG4gICAgY29uc3QgdSA9IG5ldyBSZShyKTtcbiAgICByZXR1cm4gbmV3IEhoKG8sIHUsIGkuZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqIFBhcnNlIHVwZGF0ZSBkYXRhIGZyb20gYSBsaXN0IG9mIGZpZWxkL3ZhbHVlIGFyZ3VtZW50cy4gKi8gZnVuY3Rpb24gY2wodCwgZSwgbiwgcywgaSwgcikge1xuICAgIGNvbnN0IG8gPSB0LnlhKDEgLyogVXNlckRhdGFTb3VyY2UuVXBkYXRlICovICwgZSwgbiksIHUgPSBbIHdsKGUsIHMsIG4pIF0sIGMgPSBbIGkgXTtcbiAgICBpZiAoci5sZW5ndGggJSAyICE9IDApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEZ1bmN0aW9uICR7ZX0oKSBuZWVkcyB0byBiZSBjYWxsZWQgd2l0aCBhbiBldmVuIG51bWJlciBvZiBhcmd1bWVudHMgdGhhdCBhbHRlcm5hdGUgYmV0d2VlbiBmaWVsZCBuYW1lcyBhbmQgdmFsdWVzLmApO1xuICAgIGZvciAobGV0IHQgPSAwOyB0IDwgci5sZW5ndGg7IHQgKz0gMikgdS5wdXNoKHdsKGUsIHJbdF0pKSwgYy5wdXNoKHJbdCArIDFdKTtcbiAgICBjb25zdCBhID0gW10sIGggPSB1bi5lbXB0eSgpO1xuICAgIC8vIFdlIGl0ZXJhdGUgaW4gcmV2ZXJzZSBvcmRlciB0byBwaWNrIHRoZSBsYXN0IHZhbHVlIGZvciBhIGZpZWxkIGlmIHRoZVxuICAgIC8vIHVzZXIgc3BlY2lmaWVkIHRoZSBmaWVsZCBtdWx0aXBsZSB0aW1lcy5cbiAgICBmb3IgKGxldCB0ID0gdS5sZW5ndGggLSAxOyB0ID49IDA7IC0tdCkgaWYgKCF5bChhLCB1W3RdKSkge1xuICAgICAgICBjb25zdCBlID0gdVt0XTtcbiAgICAgICAgbGV0IG4gPSBjW3RdO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbiA9IGdldE1vZHVsYXJJbnN0YW5jZShuKTtcbiAgICAgICAgY29uc3QgcyA9IG8uZGEoZSk7XG4gICAgICAgIGlmIChuIGluc3RhbmNlb2YgZWwpIFxuICAgICAgICAvLyBBZGQgaXQgdG8gdGhlIGZpZWxkIG1hc2ssIGJ1dCBkb24ndCBhZGQgYW55dGhpbmcgdG8gdXBkYXRlRGF0YS5cbiAgICAgICAgYS5wdXNoKGUpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBobChuLCBzKTtcbiAgICAgICAgICAgIG51bGwgIT0gdCAmJiAoYS5wdXNoKGUpLCBoLnNldChlLCB0KSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgbCA9IG5ldyBSZShhKTtcbiAgICByZXR1cm4gbmV3IEhoKGgsIGwsIG8uZmllbGRUcmFuc2Zvcm1zKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIFwicXVlcnkgdmFsdWVcIiAoZS5nLiB2YWx1ZSBpbiBhIHdoZXJlIGZpbHRlciBvciBhIHZhbHVlIGluIGEgY3Vyc29yXG4gKiBib3VuZCkuXG4gKlxuICogQHBhcmFtIGFsbG93QXJyYXlzIC0gV2hldGhlciB0aGUgcXVlcnkgdmFsdWUgaXMgYW4gYXJyYXkgdGhhdCBtYXkgZGlyZWN0bHlcbiAqIGNvbnRhaW4gYWRkaXRpb25hbCBhcnJheXMgKGUuZy4gdGhlIG9wZXJhbmQgb2YgYW4gYGluYCBxdWVyeSkuXG4gKi8gZnVuY3Rpb24gYWwodCwgZSwgbiwgcyA9ICExKSB7XG4gICAgcmV0dXJuIGhsKG4sIHQueWEocyA/IDQgLyogVXNlckRhdGFTb3VyY2UuQXJyYXlBcmd1bWVudCAqLyA6IDMgLyogVXNlckRhdGFTb3VyY2UuQXJndW1lbnQgKi8gLCBlKSk7XG59XG5cbi8qKlxuICogUGFyc2VzIHVzZXIgZGF0YSB0byBQcm90b2J1ZiBWYWx1ZXMuXG4gKlxuICogQHBhcmFtIGlucHV0IC0gRGF0YSB0byBiZSBwYXJzZWQuXG4gKiBAcGFyYW0gY29udGV4dCAtIEEgY29udGV4dCBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBjdXJyZW50IHBhdGggYmVpbmcgcGFyc2VkLFxuICogdGhlIHNvdXJjZSBvZiB0aGUgZGF0YSBiZWluZyBwYXJzZWQsIGV0Yy5cbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWUsIG9yIG51bGwgaWYgdGhlIHZhbHVlIHdhcyBhIEZpZWxkVmFsdWUgc2VudGluZWxcbiAqIHRoYXQgc2hvdWxkIG5vdCBiZSBpbmNsdWRlZCBpbiB0aGUgcmVzdWx0aW5nIHBhcnNlZCBkYXRhLlxuICovIGZ1bmN0aW9uIGhsKHQsIGUpIHtcbiAgICBpZiAoZmwoXG4gICAgLy8gVW53cmFwIHRoZSBBUEkgdHlwZSBmcm9tIHRoZSBDb21wYXQgU0RLLiBUaGlzIHdpbGwgcmV0dXJuIHRoZSBBUEkgdHlwZVxuICAgIC8vIGZyb20gZmlyZXN0b3JlLWV4cC5cbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSkgcmV0dXJuIGRsKFwiVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6XCIsIGUsIHQpLCBsbCh0LCBlKTtcbiAgICBpZiAodCBpbnN0YW5jZW9mIFFoKSBcbiAgICAvLyBGaWVsZFZhbHVlcyB1c3VhbGx5IHBhcnNlIGludG8gdHJhbnNmb3JtcyAoZXhjZXB0IGRlbGV0ZUZpZWxkKCkpXG4gICAgLy8gaW4gd2hpY2ggY2FzZSB3ZSBkbyBub3Qgd2FudCB0byBpbmNsdWRlIHRoaXMgZmllbGQgaW4gb3VyIHBhcnNlZCBkYXRhXG4gICAgLy8gKGFzIGRvaW5nIHNvIHdpbGwgb3ZlcndyaXRlIHRoZSBmaWVsZCBkaXJlY3RseSBwcmlvciB0byB0aGUgdHJhbnNmb3JtXG4gICAgLy8gdHJ5aW5nIHRvIHRyYW5zZm9ybSBpdCkuIFNvIHdlIGRvbid0IGFkZCB0aGlzIGxvY2F0aW9uIHRvXG4gICAgLy8gY29udGV4dC5maWVsZE1hc2sgYW5kIHdlIHJldHVybiBudWxsIGFzIG91ciBwYXJzaW5nIHJlc3VsdC5cbiAgICAvKipcbiAqIFwiUGFyc2VzXCIgdGhlIHByb3ZpZGVkIEZpZWxkVmFsdWVJbXBsLCBhZGRpbmcgYW55IG5lY2Vzc2FyeSB0cmFuc2Zvcm1zIHRvXG4gKiBjb250ZXh0LmZpZWxkVHJhbnNmb3Jtcy5cbiAqL1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIC8vIFNlbnRpbmVscyBhcmUgb25seSBzdXBwb3J0ZWQgd2l0aCB3cml0ZXMsIGFuZCBub3Qgd2l0aGluIGFycmF5cy5cbiAgICAgICAgaWYgKCFKaChlLmNhKSkgdGhyb3cgZS5fYShgJHt0Ll9tZXRob2ROYW1lfSgpIGNhbiBvbmx5IGJlIHVzZWQgd2l0aCB1cGRhdGUoKSBhbmQgc2V0KClgKTtcbiAgICAgICAgaWYgKCFlLnBhdGgpIHRocm93IGUuX2EoYCR7dC5fbWV0aG9kTmFtZX0oKSBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBpbnNpZGUgYXJyYXlzYCk7XG4gICAgICAgIGNvbnN0IG4gPSB0Ll90b0ZpZWxkVHJhbnNmb3JtKGUpO1xuICAgICAgICBuICYmIGUuZmllbGRUcmFuc2Zvcm1zLnB1c2gobik7XG4gICAgfVxuICAgIC8qKlxuICogSGVscGVyIHRvIHBhcnNlIGEgc2NhbGFyIHZhbHVlIChpLmUuIG5vdCBhbiBPYmplY3QsIEFycmF5LCBvciBGaWVsZFZhbHVlKVxuICpcbiAqIEByZXR1cm5zIFRoZSBwYXJzZWQgdmFsdWVcbiAqLyAodCwgZSksIG51bGw7XG4gICAgaWYgKHZvaWQgMCA9PT0gdCAmJiBlLmlnbm9yZVVuZGVmaW5lZFByb3BlcnRpZXMpIFxuICAgIC8vIElmIHRoZSBpbnB1dCBpcyB1bmRlZmluZWQgaXQgY2FuIG5ldmVyIHBhcnRpY2lwYXRlIGluIHRoZSBmaWVsZE1hc2ssIHNvXG4gICAgLy8gZG9uJ3QgaGFuZGxlIHRoaXMgYmVsb3cuIElmIGBpZ25vcmVVbmRlZmluZWRQcm9wZXJ0aWVzYCBpcyBmYWxzZSxcbiAgICAvLyBgcGFyc2VTY2FsYXJWYWx1ZWAgd2lsbCByZWplY3QgYW4gdW5kZWZpbmVkIHZhbHVlLlxuICAgIHJldHVybiBudWxsO1xuICAgIGlmIChcbiAgICAvLyBJZiBjb250ZXh0LnBhdGggaXMgbnVsbCB3ZSBhcmUgaW5zaWRlIGFuIGFycmF5IGFuZCB3ZSBkb24ndCBzdXBwb3J0XG4gICAgLy8gZmllbGQgbWFzayBwYXRocyBtb3JlIGdyYW51bGFyIHRoYW4gdGhlIHRvcC1sZXZlbCBhcnJheS5cbiAgICBlLnBhdGggJiYgZS5maWVsZE1hc2sucHVzaChlLnBhdGgpLCB0IGluc3RhbmNlb2YgQXJyYXkpIHtcbiAgICAgICAgLy8gVE9ETyhiLzM0ODcxMTMxKTogSW5jbHVkZSB0aGUgcGF0aCBjb250YWluaW5nIHRoZSBhcnJheSBpbiB0aGUgZXJyb3JcbiAgICAgICAgLy8gbWVzc2FnZS5cbiAgICAgICAgLy8gSW4gdGhlIGNhc2Ugb2YgSU4gcXVlcmllcywgdGhlIHBhcnNlZCBkYXRhIGlzIGFuIGFycmF5IChyZXByZXNlbnRpbmdcbiAgICAgICAgLy8gdGhlIHNldCBvZiB2YWx1ZXMgdG8gYmUgaW5jbHVkZWQgZm9yIHRoZSBJTiBxdWVyeSkgdGhhdCBtYXkgZGlyZWN0bHlcbiAgICAgICAgLy8gY29udGFpbiBhZGRpdGlvbmFsIGFycmF5cyAoZWFjaCByZXByZXNlbnRpbmcgYW4gaW5kaXZpZHVhbCBmaWVsZFxuICAgICAgICAvLyB2YWx1ZSksIHNvIHdlIGRpc2FibGUgdGhpcyB2YWxpZGF0aW9uLlxuICAgICAgICBpZiAoZS5zZXR0aW5ncy5sYSAmJiA0IC8qIFVzZXJEYXRhU291cmNlLkFycmF5QXJndW1lbnQgKi8gIT09IGUuY2EpIHRocm93IGUuX2EoXCJOZXN0ZWQgYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkXCIpO1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgY29uc3QgbiA9IFtdO1xuICAgICAgICAgICAgbGV0IHMgPSAwO1xuICAgICAgICAgICAgZm9yIChjb25zdCBpIG9mIHQpIHtcbiAgICAgICAgICAgICAgICBsZXQgdCA9IGhsKGksIGUud2EocykpO1xuICAgICAgICAgICAgICAgIG51bGwgPT0gdCAmJiAoXG4gICAgICAgICAgICAgICAgLy8gSnVzdCBpbmNsdWRlIG51bGxzIGluIHRoZSBhcnJheSBmb3IgZmllbGRzIGJlaW5nIHJlcGxhY2VkIHdpdGggYVxuICAgICAgICAgICAgICAgIC8vIHNlbnRpbmVsLlxuICAgICAgICAgICAgICAgIHQgPSB7XG4gICAgICAgICAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgICAgICAgICB9KSwgbi5wdXNoKHQpLCBzKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGFycmF5VmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfSh0LCBlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgaWYgKG51bGwgPT09ICh0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpKSkgcmV0dXJuIHtcbiAgICAgICAgICAgIG51bGxWYWx1ZTogXCJOVUxMX1ZBTFVFXCJcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwibnVtYmVyXCIgPT0gdHlwZW9mIHQpIHJldHVybiBFcyhlLnNlcmlhbGl6ZXIsIHQpO1xuICAgICAgICBpZiAoXCJib29sZWFuXCIgPT0gdHlwZW9mIHQpIHJldHVybiB7XG4gICAgICAgICAgICBib29sZWFuVmFsdWU6IHRcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIHQpIHJldHVybiB7XG4gICAgICAgICAgICBzdHJpbmdWYWx1ZTogdFxuICAgICAgICB9O1xuICAgICAgICBpZiAodCBpbnN0YW5jZW9mIERhdGUpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBpdC5mcm9tRGF0ZSh0KTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IERpKGUuc2VyaWFsaXplciwgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBpdCkge1xuICAgICAgICAgICAgLy8gRmlyZXN0b3JlIGJhY2tlbmQgdHJ1bmNhdGVzIHByZWNpc2lvbiBkb3duIHRvIG1pY3Jvc2Vjb25kcy4gVG8gZW5zdXJlXG4gICAgICAgICAgICAvLyBvZmZsaW5lIG1vZGUgd29ya3MgdGhlIHNhbWUgd2l0aCByZWdhcmRzIHRvIHRydW5jYXRpb24sIHBlcmZvcm0gdGhlXG4gICAgICAgICAgICAvLyB0cnVuY2F0aW9uIGltbWVkaWF0ZWx5IHdpdGhvdXQgd2FpdGluZyBmb3IgdGhlIGJhY2tlbmQgdG8gZG8gdGhhdC5cbiAgICAgICAgICAgIGNvbnN0IG4gPSBuZXcgaXQodC5zZWNvbmRzLCAxZTMgKiBNYXRoLmZsb29yKHQubmFub3NlY29uZHMgLyAxZTMpKTtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdGltZXN0YW1wVmFsdWU6IERpKGUuc2VyaWFsaXplciwgbilcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHQgaW5zdGFuY2VvZiBqaCkgcmV0dXJuIHtcbiAgICAgICAgICAgIGdlb1BvaW50VmFsdWU6IHtcbiAgICAgICAgICAgICAgICBsYXRpdHVkZTogdC5sYXRpdHVkZSxcbiAgICAgICAgICAgICAgICBsb25naXR1ZGU6IHQubG9uZ2l0dWRlXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgVWgpIHJldHVybiB7XG4gICAgICAgICAgICBieXRlc1ZhbHVlOiBDaShlLnNlcmlhbGl6ZXIsIHQuX2J5dGVTdHJpbmcpXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0IGluc3RhbmNlb2YgZmgpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSBlLmRhdGFiYXNlSWQsIHMgPSB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZDtcbiAgICAgICAgICAgIGlmICghcy5pc0VxdWFsKG4pKSB0aHJvdyBlLl9hKGBEb2N1bWVudCByZWZlcmVuY2UgaXMgZm9yIGRhdGFiYXNlICR7cy5wcm9qZWN0SWR9LyR7cy5kYXRhYmFzZX0gYnV0IHNob3VsZCBiZSBmb3IgZGF0YWJhc2UgJHtuLnByb2plY3RJZH0vJHtuLmRhdGFiYXNlfWApO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICByZWZlcmVuY2VWYWx1ZToga2kodC5maXJlc3RvcmUuX2RhdGFiYXNlSWQgfHwgZS5kYXRhYmFzZUlkLCB0Ll9rZXkucGF0aClcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZS5fYShgVW5zdXBwb3J0ZWQgZmllbGQgdmFsdWU6ICR7b2godCl9YCk7XG4gICAgfVxuICAgIC8qKlxuICogQ2hlY2tzIHdoZXRoZXIgYW4gb2JqZWN0IGxvb2tzIGxpa2UgYSBKU09OIG9iamVjdCB0aGF0IHNob3VsZCBiZSBjb252ZXJ0ZWRcbiAqIGludG8gYSBzdHJ1Y3QuIE5vcm1hbCBjbGFzcy9wcm90b3R5cGUgaW5zdGFuY2VzIGFyZSBjb25zaWRlcmVkIHRvIGxvb2sgbGlrZVxuICogSlNPTiBvYmplY3RzIHNpbmNlIHRoZXkgc2hvdWxkIGJlIGNvbnZlcnRlZCB0byBhIHN0cnVjdCB2YWx1ZS4gQXJyYXlzLCBEYXRlcyxcbiAqIEdlb1BvaW50cywgZXRjLiBhcmUgbm90IGNvbnNpZGVyZWQgdG8gbG9vayBsaWtlIEpTT04gb2JqZWN0cyBzaW5jZSB0aGV5IG1hcFxuICogdG8gc3BlY2lmaWMgRmllbGRWYWx1ZSB0eXBlcyBvdGhlciB0aGFuIE9iamVjdFZhbHVlLlxuICovICh0LCBlKTtcbn1cblxuZnVuY3Rpb24gbGwodCwgZSkge1xuICAgIGNvbnN0IG4gPSB7fTtcbiAgICByZXR1cm4geWUodCkgPyBcbiAgICAvLyBJZiB3ZSBlbmNvdW50ZXIgYW4gZW1wdHkgb2JqZWN0LCB3ZSBleHBsaWNpdGx5IGFkZCBpdCB0byB0aGUgdXBkYXRlXG4gICAgLy8gbWFzayB0byBlbnN1cmUgdGhhdCB0aGUgc2VydmVyIGNyZWF0ZXMgYSBtYXAgZW50cnkuXG4gICAgZS5wYXRoICYmIGUucGF0aC5sZW5ndGggPiAwICYmIGUuZmllbGRNYXNrLnB1c2goZS5wYXRoKSA6IGdlKHQsICgodCwgcykgPT4ge1xuICAgICAgICBjb25zdCBpID0gaGwocywgZS5oYSh0KSk7XG4gICAgICAgIG51bGwgIT0gaSAmJiAoblt0XSA9IGkpO1xuICAgIH0pKSwge1xuICAgICAgICBtYXBWYWx1ZToge1xuICAgICAgICAgICAgZmllbGRzOiBuXG4gICAgICAgIH1cbiAgICB9O1xufVxuXG5mdW5jdGlvbiBmbCh0KSB7XG4gICAgcmV0dXJuICEoXCJvYmplY3RcIiAhPSB0eXBlb2YgdCB8fCBudWxsID09PSB0IHx8IHQgaW5zdGFuY2VvZiBBcnJheSB8fCB0IGluc3RhbmNlb2YgRGF0ZSB8fCB0IGluc3RhbmNlb2YgaXQgfHwgdCBpbnN0YW5jZW9mIGpoIHx8IHQgaW5zdGFuY2VvZiBVaCB8fCB0IGluc3RhbmNlb2YgZmggfHwgdCBpbnN0YW5jZW9mIFFoKTtcbn1cblxuZnVuY3Rpb24gZGwodCwgZSwgbikge1xuICAgIGlmICghZmwobikgfHwgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgcmV0dXJuIFwib2JqZWN0XCIgPT0gdHlwZW9mIHQgJiYgbnVsbCAhPT0gdCAmJiAoT2JqZWN0LmdldFByb3RvdHlwZU9mKHQpID09PSBPYmplY3QucHJvdG90eXBlIHx8IG51bGwgPT09IE9iamVjdC5nZXRQcm90b3R5cGVPZih0KSk7XG4gICAgfShuKSkge1xuICAgICAgICBjb25zdCBzID0gb2gobik7XG4gICAgICAgIHRocm93IFwiYW4gb2JqZWN0XCIgPT09IHMgPyBlLl9hKHQgKyBcIiBhIGN1c3RvbSBvYmplY3RcIikgOiBlLl9hKHQgKyBcIiBcIiArIHMpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBmcm9tRG90U2VwYXJhdGVkU3RyaW5nKCkgYnV0IHdyYXBzIGFueSBlcnJvciB0aHJvd24uXG4gKi8gZnVuY3Rpb24gd2wodCwgZSwgbikge1xuICAgIGlmICgoXG4gICAgLy8gSWYgcmVxdWlyZWQsIHJlcGxhY2UgdGhlIEZpZWxkUGF0aCBDb21wYXQgY2xhc3Mgd2l0aCB3aXRoIHRoZSBmaXJlc3RvcmUtZXhwXG4gICAgLy8gRmllbGRQYXRoLlxuICAgIGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIGluc3RhbmNlb2YgS2gpIHJldHVybiBlLl9pbnRlcm5hbFBhdGg7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIGUpIHJldHVybiBtbCh0LCBlKTtcbiAgICB0aHJvdyBnbChcIkZpZWxkIHBhdGggYXJndW1lbnRzIG11c3QgYmUgb2YgdHlwZSBzdHJpbmcgb3IgXCIsIHQsIFxuICAgIC8qIGhhc0NvbnZlcnRlcj0gKi8gITEsIFxuICAgIC8qIHBhdGg9ICovIHZvaWQgMCwgbik7XG59XG5cbi8qKlxuICogTWF0Y2hlcyBhbnkgY2hhcmFjdGVycyBpbiBhIGZpZWxkIHBhdGggc3RyaW5nIHRoYXQgYXJlIHJlc2VydmVkLlxuICovIGNvbnN0IF9sID0gbmV3IFJlZ0V4cChcIlt+XFxcXCovXFxcXFtcXFxcXV1cIik7XG5cbi8qKlxuICogV3JhcHMgZnJvbURvdFNlcGFyYXRlZFN0cmluZyB3aXRoIGFuIGVycm9yIG1lc3NhZ2UgYWJvdXQgdGhlIG1ldGhvZCB0aGF0XG4gKiB3YXMgdGhyb3duLlxuICogQHBhcmFtIG1ldGhvZE5hbWUgLSBUaGUgcHVibGljbHkgdmlzaWJsZSBtZXRob2QgbmFtZVxuICogQHBhcmFtIHBhdGggLSBUaGUgZG90LXNlcGFyYXRlZCBzdHJpbmcgZm9ybSBvZiBhIGZpZWxkIHBhdGggd2hpY2ggd2lsbCBiZVxuICogc3BsaXQgb24gZG90cy5cbiAqIEBwYXJhbSB0YXJnZXREb2MgLSBUaGUgZG9jdW1lbnQgYWdhaW5zdCB3aGljaCB0aGUgZmllbGQgcGF0aCB3aWxsIGJlXG4gKiBldmFsdWF0ZWQuXG4gKi8gZnVuY3Rpb24gbWwodCwgZSwgbikge1xuICAgIGlmIChlLnNlYXJjaChfbCkgPj0gMCkgdGhyb3cgZ2woYEludmFsaWQgZmllbGQgcGF0aCAoJHtlfSkuIFBhdGhzIG11c3Qgbm90IGNvbnRhaW4gJ34nLCAnKicsICcvJywgJ1snLCBvciAnXSdgLCB0LCBcbiAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAvKiBwYXRoPSAqLyB2b2lkIDAsIG4pO1xuICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBuZXcgS2goLi4uZS5zcGxpdChcIi5cIikpLl9pbnRlcm5hbFBhdGg7XG4gICAgfSBjYXRjaCAocykge1xuICAgICAgICB0aHJvdyBnbChgSW52YWxpZCBmaWVsZCBwYXRoICgke2V9KS4gUGF0aHMgbXVzdCBub3QgYmUgZW1wdHksIGJlZ2luIHdpdGggJy4nLCBlbmQgd2l0aCAnLicsIG9yIGNvbnRhaW4gJy4uJ2AsIHQsIFxuICAgICAgICAvKiBoYXNDb252ZXJ0ZXI9ICovICExLCBcbiAgICAgICAgLyogcGF0aD0gKi8gdm9pZCAwLCBuKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGdsKHQsIGUsIG4sIHMsIGkpIHtcbiAgICBjb25zdCByID0gcyAmJiAhcy5pc0VtcHR5KCksIG8gPSB2b2lkIDAgIT09IGk7XG4gICAgbGV0IHUgPSBgRnVuY3Rpb24gJHtlfSgpIGNhbGxlZCB3aXRoIGludmFsaWQgZGF0YWA7XG4gICAgbiAmJiAodSArPSBcIiAodmlhIGB0b0ZpcmVzdG9yZSgpYClcIiksIHUgKz0gXCIuIFwiO1xuICAgIGxldCBjID0gXCJcIjtcbiAgICByZXR1cm4gKHIgfHwgbykgJiYgKGMgKz0gXCIgKGZvdW5kXCIsIHIgJiYgKGMgKz0gYCBpbiBmaWVsZCAke3N9YCksIG8gJiYgKGMgKz0gYCBpbiBkb2N1bWVudCAke2l9YCksIFxuICAgIGMgKz0gXCIpXCIpLCBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIHUgKyB0ICsgYyk7XG59XG5cbi8qKiBDaGVja3MgYGhheXN0YWNrYCBpZiBGaWVsZFBhdGggYG5lZWRsZWAgaXMgcHJlc2VudC4gUnVucyBpbiBPKG4pLiAqLyBmdW5jdGlvbiB5bCh0LCBlKSB7XG4gICAgcmV0dXJuIHQuc29tZSgodCA9PiB0LmlzRXF1YWwoZSkpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyIEZpcmVzdG9yZVxuICogZGF0YWJhc2UuIFRoZSBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvXG4gKiBnZXQgYSBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBGb3IgYSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwb2ludHMgdG8gYSBub24tZXhpc3RpbmcgZG9jdW1lbnQsIGFueSBkYXRhXG4gKiBhY2Nlc3Mgd2lsbCByZXR1cm4gJ3VuZGVmaW5lZCcuIFlvdSBjYW4gdXNlIHRoZSBgZXhpc3RzKClgIG1ldGhvZCB0b1xuICogZXhwbGljaXRseSB2ZXJpZnkgYSBkb2N1bWVudCdzIGV4aXN0ZW5jZS5cbiAqLyBjbGFzcyBwbCB7XG4gICAgLy8gTm90ZTogVGhpcyBjbGFzcyBpcyBzdHJpcHBlZCBkb3duIHZlcnNpb24gb2YgdGhlIERvY3VtZW50U25hcHNob3QgaW5cbiAgICAvLyB0aGUgbGVnYWN5IFNESy4gVGhlIGNoYW5nZXMgYXJlOlxuICAgIC8vIC0gTm8gc3VwcG9ydCBmb3IgU25hcHNob3RNZXRhZGF0YS5cbiAgICAvLyAtIE5vIHN1cHBvcnQgZm9yIFNuYXBzaG90T3B0aW9ucy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciBwcm90ZWN0ZWQgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gZSwgdGhpcy5fa2V5ID0gbiwgdGhpcy5fZG9jdW1lbnQgPSBzLCBcbiAgICAgICAgdGhpcy5fY29udmVydGVyID0gaTtcbiAgICB9XG4gICAgLyoqIFByb3BlcnR5IG9mIHRoZSBgRG9jdW1lbnRTbmFwc2hvdGAgdGhhdCBwcm92aWRlcyB0aGUgZG9jdW1lbnQncyBJRC4gKi8gICAgZ2V0IGlkKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fa2V5LnBhdGgubGFzdFNlZ21lbnQoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogVGhlIGBEb2N1bWVudFJlZmVyZW5jZWAgZm9yIHRoZSBkb2N1bWVudCBpbmNsdWRlZCBpbiB0aGUgYERvY3VtZW50U25hcHNob3RgLlxuICAgICAqLyAgICBnZXQgcmVmKCkge1xuICAgICAgICByZXR1cm4gbmV3IGZoKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fY29udmVydGVyLCB0aGlzLl9rZXkpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBTaWduYWxzIHdoZXRoZXIgb3Igbm90IHRoZSBkb2N1bWVudCBhdCB0aGUgc25hcHNob3QncyBsb2NhdGlvbiBleGlzdHMuXG4gICAgICpcbiAgICAgKiBAcmV0dXJucyB0cnVlIGlmIHRoZSBkb2N1bWVudCBleGlzdHMuXG4gICAgICovICAgIGV4aXN0cygpIHtcbiAgICAgICAgcmV0dXJuIG51bGwgIT09IHRoaXMuX2RvY3VtZW50O1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXRyaWV2ZXMgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgYXMgYW4gYE9iamVjdGAuIFJldHVybnMgYHVuZGVmaW5lZGAgaWZcbiAgICAgKiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQgb3IgYHVuZGVmaW5lZGBcbiAgICAgKiBpZiB0aGUgZG9jdW1lbnQgZG9lc24ndCBleGlzdC5cbiAgICAgKi8gICAgZGF0YSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fY29udmVydGVyKSB7XG4gICAgICAgICAgICAgICAgLy8gV2Ugb25seSB3YW50IHRvIHVzZSB0aGUgY29udmVydGVyIGFuZCBjcmVhdGUgYSBuZXcgRG9jdW1lbnRTbmFwc2hvdFxuICAgICAgICAgICAgICAgIC8vIGlmIGEgY29udmVydGVyIGhhcyBiZWVuIHByb3ZpZGVkLlxuICAgICAgICAgICAgICAgIGNvbnN0IHQgPSBuZXcgSWwodGhpcy5fZmlyZXN0b3JlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fa2V5LCB0aGlzLl9kb2N1bWVudCwgXG4gICAgICAgICAgICAgICAgLyogY29udmVydGVyPSAqLyBudWxsKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY29udmVydGVyLmZyb21GaXJlc3RvcmUodCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKHRoaXMuX2RvY3VtZW50LmRhdGEudmFsdWUpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGBmaWVsZFBhdGhgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IG9yIGZpZWxkIGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZmllbGRQYXRoIC0gVGhlIHBhdGggKGZvciBleGFtcGxlICdmb28nIG9yICdmb28uYmFyJykgdG8gYSBzcGVjaWZpY1xuICAgICAqIGZpZWxkLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KHQpIHtcbiAgICAgICAgaWYgKHRoaXMuX2RvY3VtZW50KSB7XG4gICAgICAgICAgICBjb25zdCBlID0gdGhpcy5fZG9jdW1lbnQuZGF0YS5maWVsZChUbChcIkRvY3VtZW50U25hcHNob3QuZ2V0XCIsIHQpKTtcbiAgICAgICAgICAgIGlmIChudWxsICE9PSBlKSByZXR1cm4gdGhpcy5fdXNlckRhdGFXcml0ZXIuY29udmVydFZhbHVlKGUpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbnMgZGF0YSByZWFkIGZyb20gYSBkb2N1bWVudCBpbiB5b3VyXG4gKiBGaXJlc3RvcmUgZGF0YWJhc2UgYXMgcGFydCBvZiBhIHF1ZXJ5LiBUaGUgZG9jdW1lbnQgaXMgZ3VhcmFudGVlZCB0byBleGlzdFxuICogYW5kIGl0cyBkYXRhIGNhbiBiZSBleHRyYWN0ZWQgd2l0aCBgLmRhdGEoKWAgb3IgYC5nZXQoPGZpZWxkPilgIHRvIGdldCBhXG4gKiBzcGVjaWZpYyBmaWVsZC5cbiAqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIG9mZmVycyB0aGUgc2FtZSBBUEkgc3VyZmFjZSBhcyBhXG4gKiBgRG9jdW1lbnRTbmFwc2hvdGAuIFNpbmNlIHF1ZXJ5IHJlc3VsdHMgY29udGFpbiBvbmx5IGV4aXN0aW5nIGRvY3VtZW50cywgdGhlXG4gKiBgZXhpc3RzYCBwcm9wZXJ0eSB3aWxsIGFsd2F5cyBiZSB0cnVlIGFuZCBgZGF0YSgpYCB3aWxsIG5ldmVyIHJldHVyblxuICogJ3VuZGVmaW5lZCcuXG4gKi8gY2xhc3MgSWwgZXh0ZW5kcyBwbCB7XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLlxuICAgICAqXG4gICAgICogQG92ZXJyaWRlXG4gICAgICogQHJldHVybnMgQW4gYE9iamVjdGAgY29udGFpbmluZyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudC5cbiAgICAgKi9cbiAgICBkYXRhKCkge1xuICAgICAgICByZXR1cm4gc3VwZXIuZGF0YSgpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdGhhdCBjYWxscyBgZnJvbURvdFNlcGFyYXRlZFN0cmluZygpYCBidXQgd3JhcHMgYW55IGVycm9yIHRocm93bi5cbiAqLyBmdW5jdGlvbiBUbCh0LCBlKSB7XG4gICAgcmV0dXJuIFwic3RyaW5nXCIgPT0gdHlwZW9mIGUgPyBtbCh0LCBlKSA6IGUgaW5zdGFuY2VvZiBLaCA/IGUuX2ludGVybmFsUGF0aCA6IGUuX2RlbGVnYXRlLl9pbnRlcm5hbFBhdGg7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIGZ1bmN0aW9uIEVsKHQpIHtcbiAgICBpZiAoXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8gPT09IHQubGltaXRUeXBlICYmIDAgPT09IHQuZXhwbGljaXRPcmRlckJ5Lmxlbmd0aCkgdGhyb3cgbmV3IFUocS5VTklNUExFTUVOVEVELCBcImxpbWl0VG9MYXN0KCkgcXVlcmllcyByZXF1aXJlIHNwZWNpZnlpbmcgYXQgbGVhc3Qgb25lIG9yZGVyQnkoKSBjbGF1c2VcIik7XG59XG5cbi8qKlxuICogQW4gYEFwcGxpYWJsZUNvbnN0cmFpbnRgIGlzIGFuIGFic3RyYWN0aW9uIG9mIGEgY29uc3RyYWludCB0aGF0IGNhbiBiZSBhcHBsaWVkXG4gKiB0byBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqLyBjbGFzcyBBbCB7fVxuXG4vKipcbiAqIEEgYFF1ZXJ5Q29uc3RyYWludGAgaXMgdXNlZCB0byBuYXJyb3cgdGhlIHNldCBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnkgYVxuICogRmlyZXN0b3JlIHF1ZXJ5LiBgUXVlcnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIHdoZXJlfSxcbiAqIHtAbGluayBvcmRlckJ5fSwge0BsaW5rIChzdGFydEF0OjEpfSwge0BsaW5rIChzdGFydEFmdGVyOjEpfSwge0BsaW5rXG4gKiAoZW5kQmVmb3JlOjEpfSwge0BsaW5rIChlbmRBdDoxKX0sIHtAbGluayBsaW1pdH0sIHtAbGluayBsaW1pdFRvTGFzdH0gYW5kXG4gKiBjYW4gdGhlbiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXRcbiAqIGFsc28gY29udGFpbnMgdGhpcyBgUXVlcnlDb25zdHJhaW50YC5cbiAqLyBjbGFzcyB2bCBleHRlbmRzIEFsIHt9XG5cbmZ1bmN0aW9uIFJsKHQsIGUsIC4uLm4pIHtcbiAgICBsZXQgcyA9IFtdO1xuICAgIGUgaW5zdGFuY2VvZiBBbCAmJiBzLnB1c2goZSksIHMgPSBzLmNvbmNhdChuKSwgZnVuY3Rpb24odCkge1xuICAgICAgICBjb25zdCBlID0gdC5maWx0ZXIoKHQgPT4gdCBpbnN0YW5jZW9mIFZsKSkubGVuZ3RoLCBuID0gdC5maWx0ZXIoKHQgPT4gdCBpbnN0YW5jZW9mIFBsKSkubGVuZ3RoO1xuICAgICAgICBpZiAoZSA+IDEgfHwgZSA+IDAgJiYgbiA+IDApIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkUXVlcnkuIFdoZW4gdXNpbmcgY29tcG9zaXRlIGZpbHRlcnMsIHlvdSBjYW5ub3QgdXNlIG1vcmUgdGhhbiBvbmUgZmlsdGVyIGF0IHRoZSB0b3AgbGV2ZWwuIENvbnNpZGVyIG5lc3RpbmcgdGhlIG11bHRpcGxlIGZpbHRlcnMgd2l0aGluIGFuIGBhbmQoLi4uKWAgc3RhdGVtZW50LiBGb3IgZXhhbXBsZTogY2hhbmdlIGBxdWVyeShxdWVyeSwgd2hlcmUoLi4uKSwgb3IoLi4uKSlgIHRvIGBxdWVyeShxdWVyeSwgYW5kKHdoZXJlKC4uLiksIG9yKC4uLikpKWAuXCIpO1xuICAgIH1cbiAgICAvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuICAgIC8qKlxuICogQ29udmVydHMgRmlyZXN0b3JlJ3MgaW50ZXJuYWwgdHlwZXMgdG8gdGhlIEphdmFTY3JpcHQgdHlwZXMgdGhhdCB3ZSBleHBvc2VcbiAqIHRvIHRoZSB1c2VyLlxuICpcbiAqIEBpbnRlcm5hbFxuICovIChzKTtcbiAgICBmb3IgKGNvbnN0IGUgb2YgcykgdCA9IGUuX2FwcGx5KHQpO1xuICAgIHJldHVybiB0O1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RmllbGRGaWx0ZXJDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieVxuICogYSBGaXJlc3RvcmUgcXVlcnkgYnkgZmlsdGVyaW5nIG9uIG9uZSBvciBtb3JlIGRvY3VtZW50IGZpZWxkcy5cbiAqIGBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludGBzIGFyZSBjcmVhdGVkIGJ5IGludm9raW5nIHtAbGluayB3aGVyZX0gYW5kIGNhbiB0aGVuXG4gKiBiZSBwYXNzZWQgdG8ge0BsaW5rIChxdWVyeToxKX0gdG8gY3JlYXRlIGEgbmV3IHF1ZXJ5IGluc3RhbmNlIHRoYXQgYWxzbyBjb250YWluc1xuICogdGhpcyBgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnRgLlxuICovIGNsYXNzIFBsIGV4dGVuZHMgdmwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUsIG4pIHtcbiAgICAgICAgc3VwZXIoKSwgdGhpcy5fZmllbGQgPSB0LCB0aGlzLl9vcCA9IGUsIHRoaXMuX3ZhbHVlID0gbiwgXG4gICAgICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICAgICAgdGhpcy50eXBlID0gXCJ3aGVyZVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZSh0LCBlLCBuKSB7XG4gICAgICAgIHJldHVybiBuZXcgUGwodCwgZSwgbik7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLl9wYXJzZSh0KTtcbiAgICAgICAgcmV0dXJuIFFsKHQuX3F1ZXJ5LCBlKSwgbmV3IGRoKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgWW4odC5fcXVlcnksIGUpKTtcbiAgICB9XG4gICAgX3BhcnNlKHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFpoKHQuZmlyZXN0b3JlKSwgbiA9IGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIsIG8pIHtcbiAgICAgICAgICAgIGxldCB1O1xuICAgICAgICAgICAgaWYgKGkuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgaWYgKFwiYXJyYXktY29udGFpbnNcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOUyAqLyA9PT0gciB8fCBcImFycmF5LWNvbnRhaW5zLWFueVwiIC8qIE9wZXJhdG9yLkFSUkFZX0NPTlRBSU5TX0FOWSAqLyA9PT0gcikgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gWW91IGNhbid0IHBlcmZvcm0gJyR7cn0nIHF1ZXJpZXMgb24gZG9jdW1lbnRJZCgpLmApO1xuICAgICAgICAgICAgICAgIGlmIChcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gPT09IHIgfHwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gPT09IHIpIHtcbiAgICAgICAgICAgICAgICAgICAgR2wobywgcik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGUgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIG8pIGUucHVzaChLbChzLCB0LCBuKSk7XG4gICAgICAgICAgICAgICAgICAgIHUgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBhcnJheVZhbHVlOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWVzOiBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIHUgPSBLbChzLCB0LCBvKTtcbiAgICAgICAgICAgIH0gZWxzZSBcImluXCIgLyogT3BlcmF0b3IuSU4gKi8gIT09IHIgJiYgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gIT09IHIgJiYgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gIT09IHIgfHwgR2wobywgciksIFxuICAgICAgICAgICAgdSA9IGFsKG4sIGUsIG8sIFxuICAgICAgICAgICAgLyogYWxsb3dBcnJheXM9ICovIFwiaW5cIiAvKiBPcGVyYXRvci5JTiAqLyA9PT0gciB8fCBcIm5vdC1pblwiIC8qIE9wZXJhdG9yLk5PVF9JTiAqLyA9PT0gcik7XG4gICAgICAgICAgICByZXR1cm4gbW4uY3JlYXRlKGksIHIsIHUpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBcIndoZXJlXCIsIGUsIHQuZmlyZXN0b3JlLl9kYXRhYmFzZUlkLCB0aGlzLl9maWVsZCwgdGhpcy5fb3AsIHRoaXMuX3ZhbHVlKTtcbiAgICAgICAgcmV0dXJuIG47XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9IHRoYXQgZW5mb3JjZXMgdGhhdCBkb2N1bWVudHNcbiAqIG11c3QgY29udGFpbiB0aGUgc3BlY2lmaWVkIGZpZWxkIGFuZCB0aGF0IHRoZSB2YWx1ZSBzaG91bGQgc2F0aXNmeSB0aGVcbiAqIHJlbGF0aW9uIGNvbnN0cmFpbnQgcHJvdmlkZWQuXG4gKlxuICogQHBhcmFtIGZpZWxkUGF0aCAtIFRoZSBwYXRoIHRvIGNvbXBhcmVcbiAqIEBwYXJhbSBvcFN0ciAtIFRoZSBvcGVyYXRpb24gc3RyaW5nIChlLmcgXCImbHQ7XCIsIFwiJmx0Oz1cIiwgXCI9PVwiLCBcIiZsdDtcIixcbiAqICAgXCImbHQ7PVwiLCBcIiE9XCIpLlxuICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIGZvciBjb21wYXJpc29uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIGJsKHQsIGUsIG4pIHtcbiAgICBjb25zdCBzID0gZSwgaSA9IFRsKFwid2hlcmVcIiwgdCk7XG4gICAgcmV0dXJuIFBsLl9jcmVhdGUoaSwgcywgbik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50YCBpcyB1c2VkIHRvIG5hcnJvdyB0aGUgc2V0IG9mIGRvY3VtZW50c1xuICogcmV0dXJuZWQgYnkgYSBGaXJlc3RvcmUgcXVlcnkgYnkgcGVyZm9ybWluZyB0aGUgbG9naWNhbCBPUiBvciBBTkQgb2YgbXVsdGlwbGVcbiAqIHtAbGluayBRdWVyeUZpZWxkRmlsdGVyQ29uc3RyYWludH1zIG9yIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9cy5cbiAqIGBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnRgcyBhcmUgY3JlYXRlZCBieSBpbnZva2luZyB7QGxpbmsgb3J9IG9yXG4gKiB7QGxpbmsgYW5kfSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeVxuICogaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoZSBgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBWbCBleHRlbmRzIEFsIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgdCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzID0gZTtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUodCwgZSkge1xuICAgICAgICByZXR1cm4gbmV3IFZsKHQsIGUpO1xuICAgIH1cbiAgICBfcGFyc2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5fcXVlcnlDb25zdHJhaW50cy5tYXAoKGUgPT4gZS5fcGFyc2UodCkpKS5maWx0ZXIoKHQgPT4gdC5nZXRGaWx0ZXJzKCkubGVuZ3RoID4gMCkpO1xuICAgICAgICByZXR1cm4gMSA9PT0gZS5sZW5ndGggPyBlWzBdIDogZ24uY3JlYXRlKGUsIHRoaXMuX2dldE9wZXJhdG9yKCkpO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5fcGFyc2UodCk7XG4gICAgICAgIHJldHVybiAwID09PSBlLmdldEZpbHRlcnMoKS5sZW5ndGggPyB0IDogKGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIGxldCBuID0gdDtcbiAgICAgICAgICAgIGNvbnN0IHMgPSBlLmdldEZsYXR0ZW5lZEZpbHRlcnMoKTtcbiAgICAgICAgICAgIGZvciAoY29uc3QgdCBvZiBzKSBRbChuLCB0KSwgbiA9IFluKG4sIHQpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENoZWNrcyBpZiBhbnkgb2YgdGhlIHByb3ZpZGVkIGZpbHRlciBvcGVyYXRvcnMgYXJlIGluY2x1ZGVkIGluIHRoZSBnaXZlbiBsaXN0IG9mIGZpbHRlcnMgYW5kXG4gICAgICAgIC8vIHJldHVybnMgdGhlIGZpcnN0IG9uZSB0aGF0IGlzLCBvciBudWxsIGlmIG5vbmUgYXJlLlxuICAgICAgICAodC5fcXVlcnksIGUpLCBuZXcgZGgodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBZbih0Ll9xdWVyeSwgZSkpKTtcbiAgICB9XG4gICAgX2dldFF1ZXJ5Q29uc3RyYWludHMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9xdWVyeUNvbnN0cmFpbnRzO1xuICAgIH1cbiAgICBfZ2V0T3BlcmF0b3IoKSB7XG4gICAgICAgIHJldHVybiBcImFuZFwiID09PSB0aGlzLnR5cGUgPyBcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyA6IFwib3JcIiAvKiBDb21wb3NpdGVPcGVyYXRvci5PUiAqLztcbiAgICB9XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIG5ldyB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fSB0aGF0IGlzIGEgZGlzanVuY3Rpb24gb2ZcbiAqIHRoZSBnaXZlbiBmaWx0ZXIgY29uc3RyYWludHMuIEEgZGlzanVuY3Rpb24gZmlsdGVyIGluY2x1ZGVzIGEgZG9jdW1lbnQgaWYgaXRcbiAqIHNhdGlzZmllcyBhbnkgb2YgdGhlIGdpdmVuIGZpbHRlcnMuXG4gKlxuICogQHBhcmFtIHF1ZXJ5Q29uc3RyYWludHMgLSBPcHRpb25hbC4gVGhlIGxpc3Qgb2ZcbiAqIHtAbGluayBRdWVyeUZpbHRlckNvbnN0cmFpbnR9cyB0byBwZXJmb3JtIGEgZGlzanVuY3Rpb24gZm9yLiBUaGVzZSBtdXN0IGJlXG4gKiBjcmVhdGVkIHdpdGggY2FsbHMgdG8ge0BsaW5rIHdoZXJlfSwge0BsaW5rIG9yfSwgb3Ige0BsaW5rIGFuZH0uXG4gKiBAcmV0dXJucyBUaGUgbmV3bHkgY3JlYXRlZCB7QGxpbmsgUXVlcnlDb21wb3NpdGVGaWx0ZXJDb25zdHJhaW50fS5cbiAqLyBmdW5jdGlvbiBTbCguLi50KSB7XG4gICAgLy8gT25seSBzdXBwb3J0IFF1ZXJ5RmlsdGVyQ29uc3RyYWludHNcbiAgICByZXR1cm4gdC5mb3JFYWNoKCh0ID0+IHpsKFwib3JcIiwgdCkpKSwgVmwuX2NyZWF0ZShcIm9yXCIgLyogQ29tcG9zaXRlT3BlcmF0b3IuT1IgKi8gLCB0KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGEgbmV3IHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9IHRoYXQgaXMgYSBjb25qdW5jdGlvbiBvZlxuICogdGhlIGdpdmVuIGZpbHRlciBjb25zdHJhaW50cy4gQSBjb25qdW5jdGlvbiBmaWx0ZXIgaW5jbHVkZXMgYSBkb2N1bWVudCBpZiBpdFxuICogc2F0aXNmaWVzIGFsbCBvZiB0aGUgZ2l2ZW4gZmlsdGVycy5cbiAqXG4gKiBAcGFyYW0gcXVlcnlDb25zdHJhaW50cyAtIE9wdGlvbmFsLiBUaGUgbGlzdCBvZlxuICoge0BsaW5rIFF1ZXJ5RmlsdGVyQ29uc3RyYWludH1zIHRvIHBlcmZvcm0gYSBjb25qdW5jdGlvbiBmb3IuIFRoZXNlIG11c3QgYmVcbiAqIGNyZWF0ZWQgd2l0aCBjYWxscyB0byB7QGxpbmsgd2hlcmV9LCB7QGxpbmsgb3J9LCBvciB7QGxpbmsgYW5kfS5cbiAqIEByZXR1cm5zIFRoZSBuZXdseSBjcmVhdGVkIHtAbGluayBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIERsKC4uLnQpIHtcbiAgICAvLyBPbmx5IHN1cHBvcnQgUXVlcnlGaWx0ZXJDb25zdHJhaW50c1xuICAgIHJldHVybiB0LmZvckVhY2goKHQgPT4gemwoXCJhbmRcIiwgdCkpKSwgVmwuX2NyZWF0ZShcImFuZFwiIC8qIENvbXBvc2l0ZU9wZXJhdG9yLkFORCAqLyAsIHQpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgIGlzIHVzZWQgdG8gc29ydCB0aGUgc2V0IG9mIGRvY3VtZW50cyByZXR1cm5lZCBieSBhXG4gKiBGaXJlc3RvcmUgcXVlcnkuIGBRdWVyeU9yZGVyQnlDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmdcbiAqIHtAbGluayBvcmRlckJ5fSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ldyBxdWVyeVxuICogaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnRgLlxuICpcbiAqIE5vdGU6IERvY3VtZW50cyB0aGF0IGRvIG5vdCBjb250YWluIHRoZSBvcmRlckJ5IGZpZWxkIHdpbGwgbm90IGJlIHByZXNlbnQgaW5cbiAqIHRoZSBxdWVyeSByZXN1bHQuXG4gKi8gY2xhc3MgQ2wgZXh0ZW5kcyB2bCB7XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovXG4gICAgY29uc3RydWN0b3IodCwgZSkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLl9maWVsZCA9IHQsIHRoaXMuX2RpcmVjdGlvbiA9IGUsIFxuICAgICAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgICAgIHRoaXMudHlwZSA9IFwib3JkZXJCeVwiO1xuICAgIH1cbiAgICBzdGF0aWMgX2NyZWF0ZSh0LCBlKSB7XG4gICAgICAgIHJldHVybiBuZXcgQ2wodCwgZSk7XG4gICAgfVxuICAgIF9hcHBseSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgICAgICBpZiAobnVsbCAhPT0gdC5zdGFydEF0KSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiSW52YWxpZCBxdWVyeS4gWW91IG11c3Qgbm90IGNhbGwgc3RhcnRBdCgpIG9yIHN0YXJ0QWZ0ZXIoKSBiZWZvcmUgY2FsbGluZyBvcmRlckJ5KCkuXCIpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IHQuZW5kQXQpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJJbnZhbGlkIHF1ZXJ5LiBZb3UgbXVzdCBub3QgY2FsbCBlbmRBdCgpIG9yIGVuZEJlZm9yZSgpIGJlZm9yZSBjYWxsaW5nIG9yZGVyQnkoKS5cIik7XG4gICAgICAgICAgICBjb25zdCBzID0gbmV3IGRuKGUsIG4pO1xuICAgICAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgICAgICBpZiAobnVsbCA9PT0gam4odCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyB0aGUgZmlyc3Qgb3JkZXIgYnkuIEl0IG11c3QgbWF0Y2ggYW55IGluZXF1YWxpdHkuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB6bih0KTtcbiAgICAgICAgICAgICAgICAgICAgbnVsbCAhPT0gbiAmJiBqbCh0LCBuLCBlLmZpZWxkKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KHQsIHMpLCBzO1xuICAgICAgICB9XG4gICAgICAgIC8qKlxuICogQ3JlYXRlIGEgYEJvdW5kYCBmcm9tIGEgcXVlcnkgYW5kIGEgZG9jdW1lbnQuXG4gKlxuICogTm90ZSB0aGF0IHRoZSBgQm91bmRgIHdpbGwgYWx3YXlzIGluY2x1ZGUgdGhlIGtleSBvZiB0aGUgZG9jdW1lbnRcbiAqIGFuZCBzbyBvbmx5IHRoZSBwcm92aWRlZCBkb2N1bWVudCB3aWxsIGNvbXBhcmUgZXF1YWwgdG8gdGhlIHJldHVybmVkXG4gKiBwb3NpdGlvbi5cbiAqXG4gKiBXaWxsIHRocm93IGlmIHRoZSBkb2N1bWVudCBkb2VzIG5vdCBjb250YWluIGFsbCBmaWVsZHMgb2YgdGhlIG9yZGVyIGJ5XG4gKiBvZiB0aGUgcXVlcnkgb3IgaWYgYW55IG9mIHRoZSBmaWVsZHMgaW4gdGhlIG9yZGVyIGJ5IGFyZSBhbiB1bmNvbW1pdHRlZFxuICogc2VydmVyIHRpbWVzdGFtcC5cbiAqLyAodC5fcXVlcnksIHRoaXMuX2ZpZWxkLCB0aGlzLl9kaXJlY3Rpb24pO1xuICAgICAgICByZXR1cm4gbmV3IGRoKHQuZmlyZXN0b3JlLCB0LmNvbnZlcnRlciwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgLy8gVE9ETyhkaW1vbmQpOiB2YWxpZGF0ZSB0aGF0IG9yZGVyQnkgZG9lcyBub3QgbGlzdCB0aGUgc2FtZSBrZXkgdHdpY2UuXG4gICAgICAgICAgICBjb25zdCBuID0gdC5leHBsaWNpdE9yZGVyQnkuY29uY2F0KFsgZSBdKTtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgbiwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCB0LnN0YXJ0QXQsIHQuZW5kQXQpO1xuICAgICAgICB9KHQuX3F1ZXJ5LCBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlPcmRlckJ5Q29uc3RyYWludH0gdGhhdCBzb3J0cyB0aGUgcXVlcnkgcmVzdWx0IGJ5IHRoZVxuICogc3BlY2lmaWVkIGZpZWxkLCBvcHRpb25hbGx5IGluIGRlc2NlbmRpbmcgb3JkZXIgaW5zdGVhZCBvZiBhc2NlbmRpbmcuXG4gKlxuICogTm90ZTogRG9jdW1lbnRzIHRoYXQgZG8gbm90IGNvbnRhaW4gdGhlIHNwZWNpZmllZCBmaWVsZCB3aWxsIG5vdCBiZSBwcmVzZW50XG4gKiBpbiB0aGUgcXVlcnkgcmVzdWx0LlxuICpcbiAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgZmllbGQgdG8gc29ydCBieS5cbiAqIEBwYXJhbSBkaXJlY3Rpb25TdHIgLSBPcHRpb25hbCBkaXJlY3Rpb24gdG8gc29ydCBieSAoJ2FzYycgb3IgJ2Rlc2MnKS4gSWZcbiAqIG5vdCBzcGVjaWZpZWQsIG9yZGVyIHdpbGwgYmUgYXNjZW5kaW5nLlxuICogQHJldHVybnMgVGhlIGNyZWF0ZWQge0BsaW5rIFF1ZXJ5T3JkZXJCeUNvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIHhsKHQsIGUgPSBcImFzY1wiKSB7XG4gICAgY29uc3QgbiA9IGUsIHMgPSBUbChcIm9yZGVyQnlcIiwgdCk7XG4gICAgcmV0dXJuIENsLl9jcmVhdGUocywgbik7XG59XG5cbi8qKlxuICogQSBgUXVlcnlMaW1pdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gbGltaXQgdGhlIG51bWJlciBvZiBkb2N1bWVudHMgcmV0dXJuZWQgYnlcbiAqIGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5TGltaXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIGxpbWl0fSBvclxuICoge0BsaW5rIGxpbWl0VG9MYXN0fSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ld1xuICogcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5TGltaXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBObCBleHRlbmRzIHZsIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgdCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLl9saW1pdCA9IGUsIHRoaXMuX2xpbWl0VHlwZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBObCh0LCBlLCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBkaCh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIFhuKHQuX3F1ZXJ5LCB0aGlzLl9saW1pdCwgdGhpcy5fbGltaXRUeXBlKSk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9IHRoYXQgb25seSByZXR1cm5zIHRoZSBmaXJzdCBtYXRjaGluZ1xuICogZG9jdW1lbnRzLlxuICpcbiAqIEBwYXJhbSBsaW1pdCAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiBpdGVtcyB0byByZXR1cm4uXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCB7QGxpbmsgUXVlcnlMaW1pdENvbnN0cmFpbnR9LlxuICovIGZ1bmN0aW9uIGtsKHQpIHtcbiAgICByZXR1cm4gY2goXCJsaW1pdFwiLCB0KSwgTmwuX2NyZWF0ZShcImxpbWl0XCIsIHQsIFwiRlwiIC8qIExpbWl0VHlwZS5GaXJzdCAqLyk7XG59XG5cbi8qKlxuICogQ3JlYXRlcyBhIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0gdGhhdCBvbmx5IHJldHVybnMgdGhlIGxhc3QgbWF0Y2hpbmdcbiAqIGRvY3VtZW50cy5cbiAqXG4gKiBZb3UgbXVzdCBzcGVjaWZ5IGF0IGxlYXN0IG9uZSBgb3JkZXJCeWAgY2xhdXNlIGZvciBgbGltaXRUb0xhc3RgIHF1ZXJpZXMsXG4gKiBvdGhlcndpc2UgYW4gZXhjZXB0aW9uIHdpbGwgYmUgdGhyb3duIGR1cmluZyBleGVjdXRpb24uXG4gKlxuICogQHBhcmFtIGxpbWl0IC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIGl0ZW1zIHRvIHJldHVybi5cbiAqIEByZXR1cm5zIFRoZSBjcmVhdGVkIHtAbGluayBRdWVyeUxpbWl0Q29uc3RyYWludH0uXG4gKi8gZnVuY3Rpb24gTWwodCkge1xuICAgIHJldHVybiBjaChcImxpbWl0VG9MYXN0XCIsIHQpLCBObC5fY3JlYXRlKFwibGltaXRUb0xhc3RcIiwgdCwgXCJMXCIgLyogTGltaXRUeXBlLkxhc3QgKi8pO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgIGlzIHVzZWQgdG8gZXhjbHVkZSBkb2N1bWVudHMgZnJvbSB0aGUgc3RhcnQgb2YgYVxuICogcmVzdWx0IHNldCByZXR1cm5lZCBieSBhIEZpcmVzdG9yZSBxdWVyeS5cbiAqIGBRdWVyeVN0YXJ0QXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIChzdGFydEF0OjEpfSBvclxuICoge0BsaW5rIChzdGFydEFmdGVyOjEpfSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhXG4gKiBuZXcgcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5U3RhcnRBdENvbnN0cmFpbnRgLlxuICovIGNsYXNzICRsIGV4dGVuZHMgdmwge1xuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKFxuICAgIC8qKiBUaGUgdHlwZSBvZiB0aGlzIHF1ZXJ5IGNvbnN0cmFpbnQgKi9cbiAgICB0LCBlLCBuKSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMudHlwZSA9IHQsIHRoaXMuX2RvY09yRmllbGRzID0gZSwgdGhpcy5faW5jbHVzaXZlID0gbjtcbiAgICB9XG4gICAgc3RhdGljIF9jcmVhdGUodCwgZSwgbikge1xuICAgICAgICByZXR1cm4gbmV3ICRsKHQsIGUsIG4pO1xuICAgIH1cbiAgICBfYXBwbHkodCkge1xuICAgICAgICBjb25zdCBlID0gVWwodCwgdGhpcy50eXBlLCB0aGlzLl9kb2NPckZpZWxkcywgdGhpcy5faW5jbHVzaXZlKTtcbiAgICAgICAgcmV0dXJuIG5ldyBkaCh0LmZpcmVzdG9yZSwgdC5jb252ZXJ0ZXIsIGZ1bmN0aW9uKHQsIGUpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVW4odC5wYXRoLCB0LmNvbGxlY3Rpb25Hcm91cCwgdC5leHBsaWNpdE9yZGVyQnkuc2xpY2UoKSwgdC5maWx0ZXJzLnNsaWNlKCksIHQubGltaXQsIHQubGltaXRUeXBlLCBlLCB0LmVuZEF0KTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gT2woLi4udCkge1xuICAgIHJldHVybiAkbC5fY3JlYXRlKFwic3RhcnRBdFwiLCB0LCBcbiAgICAvKmluY2x1c2l2ZT0qLyAhMCk7XG59XG5cbmZ1bmN0aW9uIEZsKC4uLnQpIHtcbiAgICByZXR1cm4gJGwuX2NyZWF0ZShcInN0YXJ0QWZ0ZXJcIiwgdCwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITEpO1xufVxuXG4vKipcbiAqIEEgYFF1ZXJ5RW5kQXRDb25zdHJhaW50YCBpcyB1c2VkIHRvIGV4Y2x1ZGUgZG9jdW1lbnRzIGZyb20gdGhlIGVuZCBvZiBhXG4gKiByZXN1bHQgc2V0IHJldHVybmVkIGJ5IGEgRmlyZXN0b3JlIHF1ZXJ5LlxuICogYFF1ZXJ5RW5kQXRDb25zdHJhaW50YHMgYXJlIGNyZWF0ZWQgYnkgaW52b2tpbmcge0BsaW5rIChlbmRBdDoxKX0gb3JcbiAqIHtAbGluayAoZW5kQmVmb3JlOjEpfSBhbmQgY2FuIHRoZW4gYmUgcGFzc2VkIHRvIHtAbGluayAocXVlcnk6MSl9IHRvIGNyZWF0ZSBhIG5ld1xuICogcXVlcnkgaW5zdGFuY2UgdGhhdCBhbHNvIGNvbnRhaW5zIHRoaXMgYFF1ZXJ5RW5kQXRDb25zdHJhaW50YC5cbiAqLyBjbGFzcyBCbCBleHRlbmRzIHZsIHtcbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi9cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAvKiogVGhlIHR5cGUgb2YgdGhpcyBxdWVyeSBjb25zdHJhaW50ICovXG4gICAgdCwgZSwgbikge1xuICAgICAgICBzdXBlcigpLCB0aGlzLnR5cGUgPSB0LCB0aGlzLl9kb2NPckZpZWxkcyA9IGUsIHRoaXMuX2luY2x1c2l2ZSA9IG47XG4gICAgfVxuICAgIHN0YXRpYyBfY3JlYXRlKHQsIGUsIG4pIHtcbiAgICAgICAgcmV0dXJuIG5ldyBCbCh0LCBlLCBuKTtcbiAgICB9XG4gICAgX2FwcGx5KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IFVsKHQsIHRoaXMudHlwZSwgdGhpcy5fZG9jT3JGaWVsZHMsIHRoaXMuX2luY2x1c2l2ZSk7XG4gICAgICAgIHJldHVybiBuZXcgZGgodC5maXJlc3RvcmUsIHQuY29udmVydGVyLCBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgICAgICByZXR1cm4gbmV3IFVuKHQucGF0aCwgdC5jb2xsZWN0aW9uR3JvdXAsIHQuZXhwbGljaXRPcmRlckJ5LnNsaWNlKCksIHQuZmlsdGVycy5zbGljZSgpLCB0LmxpbWl0LCB0LmxpbWl0VHlwZSwgdC5zdGFydEF0LCBlKTtcbiAgICAgICAgfSh0Ll9xdWVyeSwgZSkpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gTGwoLi4udCkge1xuICAgIHJldHVybiBCbC5fY3JlYXRlKFwiZW5kQmVmb3JlXCIsIHQsIFxuICAgIC8qaW5jbHVzaXZlPSovICExKTtcbn1cblxuZnVuY3Rpb24gcWwoLi4udCkge1xuICAgIHJldHVybiBCbC5fY3JlYXRlKFwiZW5kQXRcIiwgdCwgXG4gICAgLyppbmNsdXNpdmU9Ki8gITApO1xufVxuXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGNyZWF0ZSBhIGJvdW5kIGZyb20gYSBkb2N1bWVudCBvciBmaWVsZHMgKi8gZnVuY3Rpb24gVWwodCwgZSwgbiwgcykge1xuICAgIGlmIChuWzBdID0gZ2V0TW9kdWxhckluc3RhbmNlKG5bMF0pLCBuWzBdIGluc3RhbmNlb2YgcGwpIHJldHVybiBmdW5jdGlvbih0LCBlLCBuLCBzLCBpKSB7XG4gICAgICAgIGlmICghcykgdGhyb3cgbmV3IFUocS5OT1RfRk9VTkQsIGBDYW4ndCB1c2UgYSBEb2N1bWVudFNuYXBzaG90IHRoYXQgZG9lc24ndCBleGlzdCBmb3IgJHtufSgpLmApO1xuICAgICAgICBjb25zdCByID0gW107XG4gICAgICAgIC8vIEJlY2F1c2UgcGVvcGxlIGV4cGVjdCB0byBjb250aW51ZS9lbmQgYSBxdWVyeSBhdCB0aGUgZXhhY3QgZG9jdW1lbnRcbiAgICAgICAgLy8gcHJvdmlkZWQsIHdlIG5lZWQgdG8gdXNlIHRoZSBpbXBsaWNpdCBzb3J0IG9yZGVyIHJhdGhlciB0aGFuIHRoZSBleHBsaWNpdFxuICAgICAgICAvLyBzb3J0IG9yZGVyLCBiZWNhdXNlIGl0J3MgZ3VhcmFudGVlZCB0byBjb250YWluIHRoZSBkb2N1bWVudCBrZXkuIFRoYXQgd2F5XG4gICAgICAgIC8vIHRoZSBwb3NpdGlvbiBiZWNvbWVzIHVuYW1iaWd1b3VzIGFuZCB0aGUgcXVlcnkgY29udGludWVzL2VuZHMgZXhhY3RseSBhdFxuICAgICAgICAvLyB0aGUgcHJvdmlkZWQgZG9jdW1lbnQuIFdpdGhvdXQgdGhlIGtleSAoYnkgdXNpbmcgdGhlIGV4cGxpY2l0IHNvcnRcbiAgICAgICAgLy8gb3JkZXJzKSwgbXVsdGlwbGUgZG9jdW1lbnRzIGNvdWxkIG1hdGNoIHRoZSBwb3NpdGlvbiwgeWllbGRpbmcgZHVwbGljYXRlXG4gICAgICAgIC8vIHJlc3VsdHMuXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBuIG9mIEhuKHQpKSBpZiAobi5maWVsZC5pc0tleUZpZWxkKCkpIHIucHVzaChXZShlLCBzLmtleSkpOyBlbHNlIHtcbiAgICAgICAgICAgIGNvbnN0IHQgPSBzLmRhdGEuZmllbGQobi5maWVsZCk7XG4gICAgICAgICAgICBpZiAoTmUodCkpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgJ0ludmFsaWQgcXVlcnkuIFlvdSBhcmUgdHJ5aW5nIHRvIHN0YXJ0IG9yIGVuZCBhIHF1ZXJ5IHVzaW5nIGEgZG9jdW1lbnQgZm9yIHdoaWNoIHRoZSBmaWVsZCBcIicgKyBuLmZpZWxkICsgJ1wiIGlzIGFuIHVuY29tbWl0dGVkIHNlcnZlciB0aW1lc3RhbXAuIChTaW5jZSB0aGUgdmFsdWUgb2YgdGhpcyBmaWVsZCBpcyB1bmtub3duLCB5b3UgY2Fubm90IHN0YXJ0L2VuZCBhIHF1ZXJ5IHdpdGggaXQuKScpO1xuICAgICAgICAgICAgaWYgKG51bGwgPT09IHQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCB0ID0gbi5maWVsZC5jYW5vbmljYWxTdHJpbmcoKTtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgYXJlIHRyeWluZyB0byBzdGFydCBvciBlbmQgYSBxdWVyeSB1c2luZyBhIGRvY3VtZW50IGZvciB3aGljaCB0aGUgZmllbGQgJyR7dH0nICh1c2VkIGFzIHRoZSBvcmRlckJ5KSBkb2VzIG5vdCBleGlzdC5gKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHIucHVzaCh0KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3IGhuKHIsIGkpO1xuICAgIH1cbiAgICAvKipcbiAqIENvbnZlcnRzIGEgbGlzdCBvZiBmaWVsZCB2YWx1ZXMgdG8gYSBgQm91bmRgIGZvciB0aGUgZ2l2ZW4gcXVlcnkuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgZSwgblswXS5fZG9jdW1lbnQsIHMpO1xuICAgIHtcbiAgICAgICAgY29uc3QgaSA9IFpoKHQuZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKHQsIGUsIG4sIHMsIGksIHIpIHtcbiAgICAgICAgICAgIC8vIFVzZSBleHBsaWNpdCBvcmRlciBieSdzIGJlY2F1c2UgaXQgaGFzIHRvIG1hdGNoIHRoZSBxdWVyeSB0aGUgdXNlciBtYWRlXG4gICAgICAgICAgICBjb25zdCBvID0gdC5leHBsaWNpdE9yZGVyQnk7XG4gICAgICAgICAgICBpZiAoaS5sZW5ndGggPiBvLmxlbmd0aCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgVG9vIG1hbnkgYXJndW1lbnRzIHByb3ZpZGVkIHRvICR7c30oKS4gVGhlIG51bWJlciBvZiBhcmd1bWVudHMgbXVzdCBiZSBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gdGhlIG51bWJlciBvZiBvcmRlckJ5KCkgY2xhdXNlc2ApO1xuICAgICAgICAgICAgY29uc3QgdSA9IFtdO1xuICAgICAgICAgICAgZm9yIChsZXQgciA9IDA7IHIgPCBpLmxlbmd0aDsgcisrKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgYyA9IGlbcl07XG4gICAgICAgICAgICAgICAgaWYgKG9bcl0uZmllbGQuaXNLZXlGaWVsZCgpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChcInN0cmluZ1wiICE9IHR5cGVvZiBjKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBFeHBlY3RlZCBhIHN0cmluZyBmb3IgZG9jdW1lbnQgSUQgaW4gJHtzfSgpLCBidXQgZ290IGEgJHt0eXBlb2YgY31gKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFXbih0KSAmJiAtMSAhPT0gYy5pbmRleE9mKFwiL1wiKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCBiZSBhIHBsYWluIGRvY3VtZW50IElELCBidXQgJyR7Y30nIGNvbnRhaW5zIGEgc2xhc2guYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG4gPSB0LnBhdGguY2hpbGQodXQuZnJvbVN0cmluZyhjKSk7XG4gICAgICAgICAgICAgICAgICAgIGlmICghaHQuaXNEb2N1bWVudEtleShuKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYW5kIG9yZGVyaW5nIGJ5IGRvY3VtZW50SWQoKSwgdGhlIHZhbHVlIHBhc3NlZCB0byAke3N9KCkgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7bn0nIGlzIG5vdCBiZWNhdXNlIGl0IGNvbnRhaW5zIGFuIG9kZCBudW1iZXIgb2Ygc2VnbWVudHMuYCk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBuZXcgaHQobik7XG4gICAgICAgICAgICAgICAgICAgIHUucHVzaChXZShlLCBpKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdCA9IGFsKG4sIHMsIGMpO1xuICAgICAgICAgICAgICAgICAgICB1LnB1c2godCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG5ldyBobih1LCByKTtcbiAgICAgICAgfVxuICAgICAgICAvKipcbiAqIFBhcnNlcyB0aGUgZ2l2ZW4gYGRvY3VtZW50SWRWYWx1ZWAgaW50byBhIGBSZWZlcmVuY2VWYWx1ZWAsIHRocm93aW5nXG4gKiBhcHByb3ByaWF0ZSBlcnJvcnMgaWYgdGhlIHZhbHVlIGlzIGFueXRoaW5nIG90aGVyIHRoYW4gYSBgRG9jdW1lbnRSZWZlcmVuY2VgXG4gKiBvciBgc3RyaW5nYCwgb3IgaWYgdGhlIHN0cmluZyBpcyBtYWxmb3JtZWQuXG4gKi8gKHQuX3F1ZXJ5LCB0LmZpcmVzdG9yZS5fZGF0YWJhc2VJZCwgaSwgZSwgbiwgcyk7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBLbCh0LCBlLCBuKSB7XG4gICAgaWYgKFwic3RyaW5nXCIgPT0gdHlwZW9mIChuID0gZ2V0TW9kdWxhckluc3RhbmNlKG4pKSkge1xuICAgICAgICBpZiAoXCJcIiA9PT0gbikgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIkludmFsaWQgcXVlcnkuIFdoZW4gcXVlcnlpbmcgd2l0aCBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSB2YWxpZCBkb2N1bWVudCBJRCwgYnV0IGl0IHdhcyBhbiBlbXB0eSBzdHJpbmcuXCIpO1xuICAgICAgICBpZiAoIVduKGUpICYmIC0xICE9PSBuLmluZGV4T2YoXCIvXCIpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIGEgY29sbGVjdGlvbiBieSBkb2N1bWVudElkKCksIHlvdSBtdXN0IHByb3ZpZGUgYSBwbGFpbiBkb2N1bWVudCBJRCwgYnV0ICcke259JyBjb250YWlucyBhICcvJyBjaGFyYWN0ZXIuYCk7XG4gICAgICAgIGNvbnN0IHMgPSBlLnBhdGguY2hpbGQodXQuZnJvbVN0cmluZyhuKSk7XG4gICAgICAgIGlmICghaHQuaXNEb2N1bWVudEtleShzKSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gV2hlbiBxdWVyeWluZyBhIGNvbGxlY3Rpb24gZ3JvdXAgYnkgZG9jdW1lbnRJZCgpLCB0aGUgdmFsdWUgcHJvdmlkZWQgbXVzdCByZXN1bHQgaW4gYSB2YWxpZCBkb2N1bWVudCBwYXRoLCBidXQgJyR7c30nIGlzIG5vdCBiZWNhdXNlIGl0IGhhcyBhbiBvZGQgbnVtYmVyIG9mIHNlZ21lbnRzICgke3MubGVuZ3RofSkuYCk7XG4gICAgICAgIHJldHVybiBXZSh0LCBuZXcgaHQocykpO1xuICAgIH1cbiAgICBpZiAobiBpbnN0YW5jZW9mIGZoKSByZXR1cm4gV2UodCwgbi5fa2V5KTtcbiAgICB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBXaGVuIHF1ZXJ5aW5nIHdpdGggZG9jdW1lbnRJZCgpLCB5b3UgbXVzdCBwcm92aWRlIGEgdmFsaWQgc3RyaW5nIG9yIGEgRG9jdW1lbnRSZWZlcmVuY2UsIGJ1dCBpdCB3YXM6ICR7b2gobil9LmApO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlcyB0aGF0IHRoZSB2YWx1ZSBwYXNzZWQgaW50byBhIGRpc2p1bmN0aXZlIGZpbHRlciBzYXRpc2ZpZXMgYWxsXG4gKiBhcnJheSByZXF1aXJlbWVudHMuXG4gKi8gZnVuY3Rpb24gR2wodCwgZSkge1xuICAgIGlmICghQXJyYXkuaXNBcnJheSh0KSB8fCAwID09PSB0Lmxlbmd0aCkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBRdWVyeS4gQSBub24tZW1wdHkgYXJyYXkgaXMgcmVxdWlyZWQgZm9yICcke2UudG9TdHJpbmcoKX0nIGZpbHRlcnMuYCk7XG59XG5cbi8qKlxuICogR2l2ZW4gYW4gb3BlcmF0b3IsIHJldHVybnMgdGhlIHNldCBvZiBvcGVyYXRvcnMgdGhhdCBjYW5ub3QgYmUgdXNlZCB3aXRoIGl0LlxuICpcbiAqIFRoaXMgaXMgbm90IGEgY29tcHJlaGVuc2l2ZSBjaGVjaywgYW5kIHRoaXMgZnVuY3Rpb24gc2hvdWxkIGJlIHJlbW92ZWQgaW4gdGhlXG4gKiBsb25nIHRlcm0uIFZhbGlkYXRpb25zIHNob3VsZCBvY2N1ciBpbiB0aGUgRmlyZXN0b3JlIGJhY2tlbmQuXG4gKlxuICogT3BlcmF0b3JzIGluIGEgcXVlcnkgbXVzdCBhZGhlcmUgdG8gdGhlIGZvbGxvd2luZyBzZXQgb2YgcnVsZXM6XG4gKiAxLiBPbmx5IG9uZSBpbmVxdWFsaXR5IHBlciBxdWVyeS5cbiAqIDIuIGBOT1RfSU5gIGNhbm5vdCBiZSB1c2VkIHdpdGggYXJyYXksIGRpc2p1bmN0aXZlLCBvciBgTk9UX0VRVUFMYCBvcGVyYXRvcnMuXG4gKi8gZnVuY3Rpb24gUWwodCwgZSkge1xuICAgIGlmIChlLmlzSW5lcXVhbGl0eSgpKSB7XG4gICAgICAgIGNvbnN0IG4gPSB6bih0KSwgcyA9IGUuZmllbGQ7XG4gICAgICAgIGlmIChudWxsICE9PSBuICYmICFuLmlzRXF1YWwocykpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgYEludmFsaWQgcXVlcnkuIEFsbCB3aGVyZSBmaWx0ZXJzIHdpdGggYW4gaW5lcXVhbGl0eSAoPCwgPD0sICE9LCBub3QtaW4sID4sIG9yID49KSBtdXN0IGJlIG9uIHRoZSBzYW1lIGZpZWxkLiBCdXQgeW91IGhhdmUgaW5lcXVhbGl0eSBmaWx0ZXJzIG9uICcke24udG9TdHJpbmcoKX0nIGFuZCAnJHtzLnRvU3RyaW5nKCl9J2ApO1xuICAgICAgICBjb25zdCBpID0gam4odCk7XG4gICAgICAgIG51bGwgIT09IGkgJiYgamwodCwgcywgaSk7XG4gICAgfVxuICAgIGNvbnN0IG4gPSBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGZvciAoY29uc3QgbiBvZiB0KSBmb3IgKGNvbnN0IHQgb2Ygbi5nZXRGbGF0dGVuZWRGaWx0ZXJzKCkpIGlmIChlLmluZGV4T2YodC5vcCkgPj0gMCkgcmV0dXJuIHQub3A7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH0odC5maWx0ZXJzLCBmdW5jdGlvbih0KSB7XG4gICAgICAgIHN3aXRjaCAodCkge1xuICAgICAgICAgIGNhc2UgXCIhPVwiIC8qIE9wZXJhdG9yLk5PVF9FUVVBTCAqLyA6XG4gICAgICAgICAgICByZXR1cm4gWyBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gXTtcblxuICAgICAgICAgIGNhc2UgXCJhcnJheS1jb250YWlucy1hbnlcIiAvKiBPcGVyYXRvci5BUlJBWV9DT05UQUlOU19BTlkgKi8gOlxuICAgICAgICAgIGNhc2UgXCJpblwiIC8qIE9wZXJhdG9yLklOICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIF07XG5cbiAgICAgICAgICBjYXNlIFwibm90LWluXCIgLyogT3BlcmF0b3IuTk9UX0lOICovIDpcbiAgICAgICAgICAgIHJldHVybiBbIFwiYXJyYXktY29udGFpbnMtYW55XCIgLyogT3BlcmF0b3IuQVJSQVlfQ09OVEFJTlNfQU5ZICovICwgXCJpblwiIC8qIE9wZXJhdG9yLklOICovICwgXCJub3QtaW5cIiAvKiBPcGVyYXRvci5OT1RfSU4gKi8gLCBcIiE9XCIgLyogT3BlcmF0b3IuTk9UX0VRVUFMICovIF07XG5cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgICB9XG4gICAgfShlLm9wKSk7XG4gICAgaWYgKG51bGwgIT09IG4pIFxuICAgIC8vIFNwZWNpYWwgY2FzZSB3aGVuIGl0J3MgYSBkdXBsaWNhdGUgb3AgdG8gZ2l2ZSBhIHNsaWdodGx5IGNsZWFyZXIgZXJyb3IgbWVzc2FnZS5cbiAgICB0aHJvdyBuID09PSBlLm9wID8gbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBgSW52YWxpZCBxdWVyeS4gWW91IGNhbm5vdCB1c2UgbW9yZSB0aGFuIG9uZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXIuYCkgOiBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgY2Fubm90IHVzZSAnJHtlLm9wLnRvU3RyaW5nKCl9JyBmaWx0ZXJzIHdpdGggJyR7bi50b1N0cmluZygpfScgZmlsdGVycy5gKTtcbn1cblxuZnVuY3Rpb24gamwodCwgZSwgbikge1xuICAgIGlmICghbi5pc0VxdWFsKGUpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBJbnZhbGlkIHF1ZXJ5LiBZb3UgaGF2ZSBhIHdoZXJlIGZpbHRlciB3aXRoIGFuIGluZXF1YWxpdHkgKDwsIDw9LCAhPSwgbm90LWluLCA+LCBvciA+PSkgb24gZmllbGQgJyR7ZS50b1N0cmluZygpfScgYW5kIHNvIHlvdSBtdXN0IGFsc28gdXNlICcke2UudG9TdHJpbmcoKX0nIGFzIHlvdXIgZmlyc3QgYXJndW1lbnQgdG8gb3JkZXJCeSgpLCBidXQgeW91ciBmaXJzdCBvcmRlckJ5KCkgaXMgb24gZmllbGQgJyR7bi50b1N0cmluZygpfScgaW5zdGVhZC5gKTtcbn1cblxuZnVuY3Rpb24gemwodCwgZSkge1xuICAgIGlmICghKGUgaW5zdGFuY2VvZiBQbCB8fCBlIGluc3RhbmNlb2YgVmwpKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIGBGdW5jdGlvbiAke3R9KCkgcmVxdWlyZXMgQXBwbGlhYmxlQ29uc3RyYWludHMgY3JlYXRlZCB3aXRoIGEgY2FsbCB0byAnd2hlcmUoLi4uKScsICdvciguLi4pJywgb3IgJ2FuZCguLi4pJy5gKTtcbn1cblxuY2xhc3MgV2wge1xuICAgIGNvbnZlcnRWYWx1ZSh0LCBlID0gXCJub25lXCIpIHtcbiAgICAgICAgc3dpdGNoIChMZSh0KSkge1xuICAgICAgICAgIGNhc2UgMCAvKiBUeXBlT3JkZXIuTnVsbFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuXG4gICAgICAgICAgY2FzZSAxIC8qIFR5cGVPcmRlci5Cb29sZWFuVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHQuYm9vbGVhblZhbHVlO1xuXG4gICAgICAgICAgY2FzZSAyIC8qIFR5cGVPcmRlci5OdW1iZXJWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gQ2UodC5pbnRlZ2VyVmFsdWUgfHwgdC5kb3VibGVWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDMgLyogVHlwZU9yZGVyLlRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAodC50aW1lc3RhbXBWYWx1ZSk7XG5cbiAgICAgICAgICBjYXNlIDQgLyogVHlwZU9yZGVyLlNlcnZlclRpbWVzdGFtcFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSk7XG5cbiAgICAgICAgICBjYXNlIDUgLyogVHlwZU9yZGVyLlN0cmluZ1ZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0LnN0cmluZ1ZhbHVlO1xuXG4gICAgICAgICAgY2FzZSA2IC8qIFR5cGVPcmRlci5CbG9iVmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydEJ5dGVzKHhlKHQuYnl0ZXNWYWx1ZSkpO1xuXG4gICAgICAgICAgY2FzZSA3IC8qIFR5cGVPcmRlci5SZWZWYWx1ZSAqLyA6XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb252ZXJ0UmVmZXJlbmNlKHQucmVmZXJlbmNlVmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA4IC8qIFR5cGVPcmRlci5HZW9Qb2ludFZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRHZW9Qb2ludCh0Lmdlb1BvaW50VmFsdWUpO1xuXG4gICAgICAgICAgY2FzZSA5IC8qIFR5cGVPcmRlci5BcnJheVZhbHVlICovIDpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRBcnJheSh0LmFycmF5VmFsdWUsIGUpO1xuXG4gICAgICAgICAgY2FzZSAxMCAvKiBUeXBlT3JkZXIuT2JqZWN0VmFsdWUgKi8gOlxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udmVydE9iamVjdCh0Lm1hcFZhbHVlLCBlKTtcblxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICB0aHJvdyBPKCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgY29udmVydE9iamVjdCh0LCBlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRPYmplY3RNYXAodC5maWVsZHMsIGUpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBAaW50ZXJuYWxcbiAgICAgKi8gICAgY29udmVydE9iamVjdE1hcCh0LCBlID0gXCJub25lXCIpIHtcbiAgICAgICAgY29uc3QgbiA9IHt9O1xuICAgICAgICByZXR1cm4gZ2UodCwgKCh0LCBzKSA9PiB7XG4gICAgICAgICAgICBuW3RdID0gdGhpcy5jb252ZXJ0VmFsdWUocywgZSk7XG4gICAgICAgIH0pKSwgbjtcbiAgICB9XG4gICAgY29udmVydEdlb1BvaW50KHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBqaChDZSh0LmxhdGl0dWRlKSwgQ2UodC5sb25naXR1ZGUpKTtcbiAgICB9XG4gICAgY29udmVydEFycmF5KHQsIGUpIHtcbiAgICAgICAgcmV0dXJuICh0LnZhbHVlcyB8fCBbXSkubWFwKCh0ID0+IHRoaXMuY29udmVydFZhbHVlKHQsIGUpKSk7XG4gICAgfVxuICAgIGNvbnZlcnRTZXJ2ZXJUaW1lc3RhbXAodCwgZSkge1xuICAgICAgICBzd2l0Y2ggKGUpIHtcbiAgICAgICAgICBjYXNlIFwicHJldmlvdXNcIjpcbiAgICAgICAgICAgIGNvbnN0IG4gPSBrZSh0KTtcbiAgICAgICAgICAgIHJldHVybiBudWxsID09IG4gPyBudWxsIDogdGhpcy5jb252ZXJ0VmFsdWUobiwgZSk7XG5cbiAgICAgICAgICBjYXNlIFwiZXN0aW1hdGVcIjpcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnZlcnRUaW1lc3RhbXAoTWUodCkpO1xuXG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnZlcnRUaW1lc3RhbXAodCkge1xuICAgICAgICBjb25zdCBlID0gRGUodCk7XG4gICAgICAgIHJldHVybiBuZXcgaXQoZS5zZWNvbmRzLCBlLm5hbm9zKTtcbiAgICB9XG4gICAgY29udmVydERvY3VtZW50S2V5KHQsIGUpIHtcbiAgICAgICAgY29uc3QgbiA9IHV0LmZyb21TdHJpbmcodCk7XG4gICAgICAgIEYodXIobikpO1xuICAgICAgICBjb25zdCBzID0gbmV3IE9lKG4uZ2V0KDEpLCBuLmdldCgzKSksIGkgPSBuZXcgaHQobi5wb3BGaXJzdCg1KSk7XG4gICAgICAgIHJldHVybiBzLmlzRXF1YWwoZSkgfHwgXG4gICAgICAgIC8vIFRPRE8oYi82NDEzMDIwMik6IFNvbWVob3cgc3VwcG9ydCBmb3JlaWduIHJlZmVyZW5jZXMuXG4gICAgICAgIGsoYERvY3VtZW50ICR7aX0gY29udGFpbnMgYSBkb2N1bWVudCByZWZlcmVuY2Ugd2l0aGluIGEgZGlmZmVyZW50IGRhdGFiYXNlICgke3MucHJvamVjdElkfS8ke3MuZGF0YWJhc2V9KSB3aGljaCBpcyBub3Qgc3VwcG9ydGVkLiBJdCB3aWxsIGJlIHRyZWF0ZWQgYXMgYSByZWZlcmVuY2UgaW4gdGhlIGN1cnJlbnQgZGF0YWJhc2UgKCR7ZS5wcm9qZWN0SWR9LyR7ZS5kYXRhYmFzZX0pIGluc3RlYWQuYCksIFxuICAgICAgICBpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ29udmVydHMgY3VzdG9tIG1vZGVsIG9iamVjdCBvZiB0eXBlIFQgaW50byBgRG9jdW1lbnREYXRhYCBieSBhcHBseWluZyB0aGVcbiAqIGNvbnZlcnRlciBpZiBpdCBleGlzdHMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIHdoZW4gY29udmVydGluZyB1c2VyIG9iamVjdHMgdG8gYERvY3VtZW50RGF0YWBcbiAqIGJlY2F1c2Ugd2Ugd2FudCB0byBwcm92aWRlIHRoZSB1c2VyIHdpdGggYSBtb3JlIHNwZWNpZmljIGVycm9yIG1lc3NhZ2UgaWZcbiAqIHRoZWlyIGBzZXQoKWAgb3IgZmFpbHMgZHVlIHRvIGludmFsaWQgZGF0YSBvcmlnaW5hdGluZyBmcm9tIGEgYHRvRmlyZXN0b3JlKClgXG4gKiBjYWxsLlxuICovIGZ1bmN0aW9uIEhsKHQsIGUsIG4pIHtcbiAgICBsZXQgcztcbiAgICAvLyBDYXN0IHRvIGBhbnlgIGluIG9yZGVyIHRvIHNhdGlzZnkgdGhlIHVuaW9uIHR5cGUgY29uc3RyYWludCBvblxuICAgIC8vIHRvRmlyZXN0b3JlKCkuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICByZXR1cm4gcyA9IHQgPyBuICYmIChuLm1lcmdlIHx8IG4ubWVyZ2VGaWVsZHMpID8gdC50b0ZpcmVzdG9yZShlLCBuKSA6IHQudG9GaXJlc3RvcmUoZSkgOiBlLCBcbiAgICBzO1xufVxuXG5jbGFzcyBKbCBleHRlbmRzIFdsIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHN1cGVyKCksIHRoaXMuZmlyZXN0b3JlID0gdDtcbiAgICB9XG4gICAgY29udmVydEJ5dGVzKHQpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBVaCh0KTtcbiAgICB9XG4gICAgY29udmVydFJlZmVyZW5jZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleSh0LCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XG4gICAgICAgIHJldHVybiBuZXcgZmgodGhpcy5maXJlc3RvcmUsIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCwgZSk7XG4gICAgfVxufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDcmVhdGUgYW4gQWdncmVnYXRlRmllbGQgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcHV0ZSB0aGUgc3VtIG9mXG4gKiBhIHNwZWNpZmllZCBmaWVsZCBvdmVyIGEgcmFuZ2Ugb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIGEgcXVlcnkuXG4gKiBAcGFyYW0gZmllbGQgU3BlY2lmaWVzIHRoZSBmaWVsZCB0byBzdW0gYWNyb3NzIHRoZSByZXN1bHQgc2V0LlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIFlsKHQpIHtcbiAgICByZXR1cm4gbmV3IExoKFwic3VtXCIsIHdsKFwic3VtXCIsIHQpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gQWdncmVnYXRlRmllbGQgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcHV0ZSB0aGUgYXZlcmFnZSBvZlxuICogYSBzcGVjaWZpZWQgZmllbGQgb3ZlciBhIHJhbmdlIG9mIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiBhIHF1ZXJ5LlxuICogQHBhcmFtIGZpZWxkIFNwZWNpZmllcyB0aGUgZmllbGQgdG8gYXZlcmFnZSBhY3Jvc3MgdGhlIHJlc3VsdCBzZXQuXG4gKiBAaW50ZXJuYWwgVE9ETyAoc3VtL2F2ZykgcmVtb3ZlIHdoZW4gcHVibGljXG4gKi8gZnVuY3Rpb24gWGwodCkge1xuICAgIHJldHVybiBuZXcgTGgoXCJhdmdcIiwgd2woXCJhdmVyYWdlXCIsIHQpKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gQWdncmVnYXRlRmllbGQgb2JqZWN0IHRoYXQgY2FuIGJlIHVzZWQgdG8gY29tcHV0ZSB0aGUgY291bnQgb2ZcbiAqIGRvY3VtZW50cyBpbiB0aGUgcmVzdWx0IHNldCBvZiBhIHF1ZXJ5LlxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIFpsKCkge1xuICAgIHJldHVybiBuZXcgTGgoXCJjb3VudFwiKTtcbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0d28gJ0FnZ3JlZ2F0ZUZpZWxkYCBpbnN0YW5jZXMgZm9yIGVxdWFsaXR5LlxuICpcbiAqIEBwYXJhbSBsZWZ0IENvbXBhcmUgdGhpcyBBZ2dyZWdhdGVGaWVsZCB0byB0aGUgYHJpZ2h0YC5cbiAqIEBwYXJhbSByaWdodCBDb21wYXJlIHRoaXMgQWdncmVnYXRlRmllbGQgdG8gdGhlIGBsZWZ0YC5cbiAqIEBpbnRlcm5hbCBUT0RPIChzdW0vYXZnKSByZW1vdmUgd2hlbiBwdWJsaWNcbiAqLyBmdW5jdGlvbiB0Zih0LCBlKSB7XG4gICAgdmFyIG4sIHM7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBMaCAmJiBlIGluc3RhbmNlb2YgTGggJiYgdC5fYWdncmVnYXRlVHlwZSA9PT0gZS5fYWdncmVnYXRlVHlwZSAmJiAobnVsbCA9PT0gKG4gPSB0Ll9pbnRlcm5hbEZpZWxkUGF0aCkgfHwgdm9pZCAwID09PSBuID8gdm9pZCAwIDogbi5jYW5vbmljYWxTdHJpbmcoKSkgPT09IChudWxsID09PSAocyA9IGUuX2ludGVybmFsRmllbGRQYXRoKSB8fCB2b2lkIDAgPT09IHMgPyB2b2lkIDAgOiBzLmNhbm9uaWNhbFN0cmluZygpKTtcbn1cblxuLyoqXG4gKiBDb21wYXJlcyB0d28gYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIGluc3RhbmNlcyBmb3IgZXF1YWxpdHkuXG4gKlxuICogVHdvIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCBpbnN0YW5jZXMgYXJlIGNvbnNpZGVyZWQgXCJlcXVhbFwiIGlmIHRoZXkgaGF2ZVxuICogdW5kZXJseWluZyBxdWVyaWVzIHRoYXQgY29tcGFyZSBlcXVhbCwgYW5kIHRoZSBzYW1lIGRhdGEuXG4gKlxuICogQHBhcmFtIGxlZnQgLSBUaGUgZmlyc3QgYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0gcmlnaHQgLSBUaGUgc2Vjb25kIGBBZ2dyZWdhdGVRdWVyeVNuYXBzaG90YCB0byBjb21wYXJlLlxuICpcbiAqIEByZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgXCJlcXVhbFwiLCBhcyBkZWZpbmVkIGFib3ZlLCBvciBgZmFsc2VgXG4gKiBvdGhlcndpc2UuXG4gKi8gZnVuY3Rpb24gZWYodCwgZSkge1xuICAgIHJldHVybiBwaCh0LnF1ZXJ5LCBlLnF1ZXJ5KSAmJiBkZWVwRXF1YWwodC5kYXRhKCksIGUuZGF0YSgpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogTWV0YWRhdGEgYWJvdXQgYSBzbmFwc2hvdCwgZGVzY3JpYmluZyB0aGUgc3RhdGUgb2YgdGhlIHNuYXBzaG90LlxuICovIGNsYXNzIG5mIHtcbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgdGhpcy5oYXNQZW5kaW5nV3JpdGVzID0gdCwgdGhpcy5mcm9tQ2FjaGUgPSBlO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBgU25hcHNob3RNZXRhZGF0YWAgdG8gY29tcGFyZSBhZ2FpbnN0LlxuICAgICAqIEByZXR1cm5zIHRydWUgaWYgdGhpcyBgU25hcHNob3RNZXRhZGF0YWAgaXMgZXF1YWwgdG8gdGhlIHByb3ZpZGVkIG9uZS5cbiAgICAgKi8gICAgaXNFcXVhbCh0KSB7XG4gICAgICAgIHJldHVybiB0aGlzLmhhc1BlbmRpbmdXcml0ZXMgPT09IHQuaGFzUGVuZGluZ1dyaXRlcyAmJiB0aGlzLmZyb21DYWNoZSA9PT0gdC5mcm9tQ2FjaGU7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91ciBGaXJlc3RvcmVcbiAqIGRhdGFiYXNlLiBUaGUgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0b1xuICogZ2V0IGEgc3BlY2lmaWMgZmllbGQuXG4gKlxuICogRm9yIGEgYERvY3VtZW50U25hcHNob3RgIHRoYXQgcG9pbnRzIHRvIGEgbm9uLWV4aXN0aW5nIGRvY3VtZW50LCBhbnkgZGF0YVxuICogYWNjZXNzIHdpbGwgcmV0dXJuICd1bmRlZmluZWQnLiBZb3UgY2FuIHVzZSB0aGUgYGV4aXN0cygpYCBtZXRob2QgdG9cbiAqIGV4cGxpY2l0bHkgdmVyaWZ5IGEgZG9jdW1lbnQncyBleGlzdGVuY2UuXG4gKi8gY2xhc3Mgc2YgZXh0ZW5kcyBwbCB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgcHJvdGVjdGVkICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcywgaSwgcikge1xuICAgICAgICBzdXBlcih0LCBlLCBuLCBzLCByKSwgdGhpcy5fZmlyZXN0b3JlID0gdCwgdGhpcy5fZmlyZXN0b3JlSW1wbCA9IHQsIHRoaXMubWV0YWRhdGEgPSBpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIHdoZXRoZXIgb3Igbm90IHRoZSBkYXRhIGV4aXN0cy4gVHJ1ZSBpZiB0aGUgZG9jdW1lbnQgZXhpc3RzLlxuICAgICAqLyAgICBleGlzdHMoKSB7XG4gICAgICAgIHJldHVybiBzdXBlci5leGlzdHMoKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0cmlldmVzIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IGFzIGFuIGBPYmplY3RgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBgc2VydmVyVGltZXN0YW1wKClgIHZhbHVlcyB0aGF0IGhhdmUgbm90IHlldCBiZWVuXG4gICAgICogc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlIHdpbGwgYmUgcmV0dXJuZWQgYXMgYG51bGxgLiBZb3UgY2FuIG92ZXJyaWRlXG4gICAgICogdGhpcyBieSBwYXNzaW5nIGFuIG9wdGlvbnMgb2JqZWN0LlxuICAgICAqXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IGRhdGEgaXMgcmV0cmlldmVkIGZyb21cbiAgICAgKiB0aGUgc25hcHNob3QgKGZvciBleGFtcGxlIHRoZSBkZXNpcmVkIGJlaGF2aW9yIGZvciBzZXJ2ZXIgdGltZXN0YW1wcyB0aGF0XG4gICAgICogaGF2ZSBub3QgeWV0IGJlZW4gc2V0IHRvIHRoZWlyIGZpbmFsIHZhbHVlKS5cbiAgICAgKiBAcmV0dXJucyBBbiBgT2JqZWN0YCBjb250YWluaW5nIGFsbCBmaWVsZHMgaW4gdGhlIGRvY3VtZW50IG9yIGB1bmRlZmluZWRgIGlmXG4gICAgICogdGhlIGRvY3VtZW50IGRvZXNuJ3QgZXhpc3QuXG4gICAgICovICAgIGRhdGEodCA9IHt9KSB7XG4gICAgICAgIGlmICh0aGlzLl9kb2N1bWVudCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2NvbnZlcnRlcikge1xuICAgICAgICAgICAgICAgIC8vIFdlIG9ubHkgd2FudCB0byB1c2UgdGhlIGNvbnZlcnRlciBhbmQgY3JlYXRlIGEgbmV3IERvY3VtZW50U25hcHNob3RcbiAgICAgICAgICAgICAgICAvLyBpZiBhIGNvbnZlcnRlciBoYXMgYmVlbiBwcm92aWRlZC5cbiAgICAgICAgICAgICAgICBjb25zdCBlID0gbmV3IHJmKHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHRoaXMuX2tleSwgdGhpcy5fZG9jdW1lbnQsIHRoaXMubWV0YWRhdGEsIFxuICAgICAgICAgICAgICAgIC8qIGNvbnZlcnRlcj0gKi8gbnVsbCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2NvbnZlcnRlci5mcm9tRmlyZXN0b3JlKGUsIHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJEYXRhV3JpdGVyLmNvbnZlcnRWYWx1ZSh0aGlzLl9kb2N1bWVudC5kYXRhLnZhbHVlLCB0LnNlcnZlclRpbWVzdGFtcHMpO1xuICAgICAgICB9XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyB0aGUgZmllbGQgc3BlY2lmaWVkIGJ5IGBmaWVsZFBhdGhgLiBSZXR1cm5zIGB1bmRlZmluZWRgIGlmIHRoZVxuICAgICAqIGRvY3VtZW50IG9yIGZpZWxkIGRvZXNuJ3QgZXhpc3QuXG4gICAgICpcbiAgICAgKiBCeSBkZWZhdWx0LCBhIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdGhhdCBoYXMgbm90IHlldCBiZWVuIHNldCB0b1xuICAgICAqIGl0cyBmaW5hbCB2YWx1ZSB3aWxsIGJlIHJldHVybmVkIGFzIGBudWxsYC4gWW91IGNhbiBvdmVycmlkZSB0aGlzIGJ5XG4gICAgICogcGFzc2luZyBhbiBvcHRpb25zIG9iamVjdC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBmaWVsZFBhdGggLSBUaGUgcGF0aCAoZm9yIGV4YW1wbGUgJ2Zvbycgb3IgJ2Zvby5iYXInKSB0byBhIHNwZWNpZmljXG4gICAgICogZmllbGQuXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBBbiBvcHRpb25zIG9iamVjdCB0byBjb25maWd1cmUgaG93IHRoZSBmaWVsZCBpcyByZXRyaWV2ZWRcbiAgICAgKiBmcm9tIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzXG4gICAgICogdGhhdCBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIFRoZSBkYXRhIGF0IHRoZSBzcGVjaWZpZWQgZmllbGQgbG9jYXRpb24gb3IgdW5kZWZpbmVkIGlmIG5vIHN1Y2hcbiAgICAgKiBmaWVsZCBleGlzdHMgaW4gdGhlIGRvY3VtZW50LlxuICAgICAqL1xuICAgIC8vIFdlIGFyZSB1c2luZyBgYW55YCBoZXJlIHRvIGF2b2lkIGFuIGV4cGxpY2l0IGNhc3QgYnkgb3VyIHVzZXJzLlxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgZ2V0KHQsIGUgPSB7fSkge1xuICAgICAgICBpZiAodGhpcy5fZG9jdW1lbnQpIHtcbiAgICAgICAgICAgIGNvbnN0IG4gPSB0aGlzLl9kb2N1bWVudC5kYXRhLmZpZWxkKFRsKFwiRG9jdW1lbnRTbmFwc2hvdC5nZXRcIiwgdCkpO1xuICAgICAgICAgICAgaWYgKG51bGwgIT09IG4pIHJldHVybiB0aGlzLl91c2VyRGF0YVdyaXRlci5jb252ZXJ0VmFsdWUobiwgZS5zZXJ2ZXJUaW1lc3RhbXBzKTtcbiAgICAgICAgfVxuICAgIH1cbn1cblxuLyoqXG4gKiBBIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGNvbnRhaW5zIGRhdGEgcmVhZCBmcm9tIGEgZG9jdW1lbnQgaW4geW91clxuICogRmlyZXN0b3JlIGRhdGFiYXNlIGFzIHBhcnQgb2YgYSBxdWVyeS4gVGhlIGRvY3VtZW50IGlzIGd1YXJhbnRlZWQgdG8gZXhpc3RcbiAqIGFuZCBpdHMgZGF0YSBjYW4gYmUgZXh0cmFjdGVkIHdpdGggYC5kYXRhKClgIG9yIGAuZ2V0KDxmaWVsZD4pYCB0byBnZXQgYVxuICogc3BlY2lmaWMgZmllbGQuXG4gKlxuICogQSBgUXVlcnlEb2N1bWVudFNuYXBzaG90YCBvZmZlcnMgdGhlIHNhbWUgQVBJIHN1cmZhY2UgYXMgYVxuICogYERvY3VtZW50U25hcHNob3RgLiBTaW5jZSBxdWVyeSByZXN1bHRzIGNvbnRhaW4gb25seSBleGlzdGluZyBkb2N1bWVudHMsIHRoZVxuICogYGV4aXN0c2AgcHJvcGVydHkgd2lsbCBhbHdheXMgYmUgdHJ1ZSBhbmQgYGRhdGEoKWAgd2lsbCBuZXZlciByZXR1cm5cbiAqICd1bmRlZmluZWQnLlxuICovIGNsYXNzIHJmIGV4dGVuZHMgc2Yge1xuICAgIC8qKlxuICAgICAqIFJldHJpZXZlcyBhbGwgZmllbGRzIGluIHRoZSBkb2N1bWVudCBhcyBhbiBgT2JqZWN0YC5cbiAgICAgKlxuICAgICAqIEJ5IGRlZmF1bHQsIGBzZXJ2ZXJUaW1lc3RhbXAoKWAgdmFsdWVzIHRoYXQgaGF2ZSBub3QgeWV0IGJlZW5cbiAgICAgKiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUgd2lsbCBiZSByZXR1cm5lZCBhcyBgbnVsbGAuIFlvdSBjYW4gb3ZlcnJpZGVcbiAgICAgKiB0aGlzIGJ5IHBhc3NpbmcgYW4gb3B0aW9ucyBvYmplY3QuXG4gICAgICpcbiAgICAgKiBAb3ZlcnJpZGVcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBob3cgZGF0YSBpcyByZXRyaWV2ZWQgZnJvbVxuICAgICAqIHRoZSBzbmFwc2hvdCAoZm9yIGV4YW1wbGUgdGhlIGRlc2lyZWQgYmVoYXZpb3IgZm9yIHNlcnZlciB0aW1lc3RhbXBzIHRoYXRcbiAgICAgKiBoYXZlIG5vdCB5ZXQgYmVlbiBzZXQgdG8gdGhlaXIgZmluYWwgdmFsdWUpLlxuICAgICAqIEByZXR1cm5zIEFuIGBPYmplY3RgIGNvbnRhaW5pbmcgYWxsIGZpZWxkcyBpbiB0aGUgZG9jdW1lbnQuXG4gICAgICovXG4gICAgZGF0YSh0ID0ge30pIHtcbiAgICAgICAgcmV0dXJuIHN1cGVyLmRhdGEodCk7XG4gICAgfVxufVxuXG4vKipcbiAqIEEgYFF1ZXJ5U25hcHNob3RgIGNvbnRhaW5zIHplcm8gb3IgbW9yZSBgRG9jdW1lbnRTbmFwc2hvdGAgb2JqZWN0c1xuICogcmVwcmVzZW50aW5nIHRoZSByZXN1bHRzIG9mIGEgcXVlcnkuIFRoZSBkb2N1bWVudHMgY2FuIGJlIGFjY2Vzc2VkIGFzIGFuXG4gKiBhcnJheSB2aWEgdGhlIGBkb2NzYCBwcm9wZXJ0eSBvciBlbnVtZXJhdGVkIHVzaW5nIHRoZSBgZm9yRWFjaGAgbWV0aG9kLiBUaGVcbiAqIG51bWJlciBvZiBkb2N1bWVudHMgY2FuIGJlIGRldGVybWluZWQgdmlhIHRoZSBgZW1wdHlgIGFuZCBgc2l6ZWBcbiAqIHByb3BlcnRpZXMuXG4gKi8gY2xhc3Mgb2Yge1xuICAgIC8qKiBAaGlkZWNvbnN0cnVjdG9yICovXG4gICAgY29uc3RydWN0b3IodCwgZSwgbiwgcykge1xuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSB0LCB0aGlzLl91c2VyRGF0YVdyaXRlciA9IGUsIHRoaXMuX3NuYXBzaG90ID0gcywgdGhpcy5tZXRhZGF0YSA9IG5ldyBuZihzLmhhc1BlbmRpbmdXcml0ZXMsIHMuZnJvbUNhY2hlKSwgXG4gICAgICAgIHRoaXMucXVlcnkgPSBuO1xuICAgIH1cbiAgICAvKiogQW4gYXJyYXkgb2YgYWxsIHRoZSBkb2N1bWVudHMgaW4gdGhlIGBRdWVyeVNuYXBzaG90YC4gKi8gICAgZ2V0IGRvY3MoKSB7XG4gICAgICAgIGNvbnN0IHQgPSBbXTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9yRWFjaCgoZSA9PiB0LnB1c2goZSkpKSwgdDtcbiAgICB9XG4gICAgLyoqIFRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBzaXplKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fc25hcHNob3QuZG9jcy5zaXplO1xuICAgIH1cbiAgICAvKiogVHJ1ZSBpZiB0aGVyZSBhcmUgbm8gZG9jdW1lbnRzIGluIHRoZSBgUXVlcnlTbmFwc2hvdGAuICovICAgIGdldCBlbXB0eSgpIHtcbiAgICAgICAgcmV0dXJuIDAgPT09IHRoaXMuc2l6ZTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogRW51bWVyYXRlcyBhbGwgb2YgdGhlIGRvY3VtZW50cyBpbiB0aGUgYFF1ZXJ5U25hcHNob3RgLlxuICAgICAqXG4gICAgICogQHBhcmFtIGNhbGxiYWNrIC0gQSBjYWxsYmFjayB0byBiZSBjYWxsZWQgd2l0aCBhIGBRdWVyeURvY3VtZW50U25hcHNob3RgIGZvclxuICAgICAqIGVhY2ggZG9jdW1lbnQgaW4gdGhlIHNuYXBzaG90LlxuICAgICAqIEBwYXJhbSB0aGlzQXJnIC0gVGhlIGB0aGlzYCBiaW5kaW5nIGZvciB0aGUgY2FsbGJhY2suXG4gICAgICovICAgIGZvckVhY2godCwgZSkge1xuICAgICAgICB0aGlzLl9zbmFwc2hvdC5kb2NzLmZvckVhY2goKG4gPT4ge1xuICAgICAgICAgICAgdC5jYWxsKGUsIG5ldyByZih0aGlzLl9maXJlc3RvcmUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBuLmtleSwgbiwgbmV3IG5mKHRoaXMuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmtleSksIHRoaXMuX3NuYXBzaG90LmZyb21DYWNoZSksIHRoaXMucXVlcnkuY29udmVydGVyKSk7XG4gICAgICAgIH0pKTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhbiBhcnJheSBvZiB0aGUgZG9jdW1lbnRzIGNoYW5nZXMgc2luY2UgdGhlIGxhc3Qgc25hcHNob3QuIElmIHRoaXNcbiAgICAgKiBpcyB0aGUgZmlyc3Qgc25hcHNob3QsIGFsbCBkb2N1bWVudHMgd2lsbCBiZSBpbiB0aGUgbGlzdCBhcyAnYWRkZWQnXG4gICAgICogY2hhbmdlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gYFNuYXBzaG90TGlzdGVuT3B0aW9uc2AgdGhhdCBjb250cm9sIHdoZXRoZXIgbWV0YWRhdGEtb25seVxuICAgICAqIGNoYW5nZXMgKGkuZS4gb25seSBgRG9jdW1lbnRTbmFwc2hvdC5tZXRhZGF0YWAgY2hhbmdlZCkgc2hvdWxkIHRyaWdnZXJcbiAgICAgKiBzbmFwc2hvdCBldmVudHMuXG4gICAgICovICAgIGRvY0NoYW5nZXModCA9IHt9KSB7XG4gICAgICAgIGNvbnN0IGUgPSAhIXQuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlcztcbiAgICAgICAgaWYgKGUgJiYgdGhpcy5fc25hcHNob3QuZXhjbHVkZXNNZXRhZGF0YUNoYW5nZXMpIHRocm93IG5ldyBVKHEuSU5WQUxJRF9BUkdVTUVOVCwgXCJUbyBpbmNsdWRlIG1ldGFkYXRhIGNoYW5nZXMgd2l0aCB5b3VyIGRvY3VtZW50IGNoYW5nZXMsIHlvdSBtdXN0IGFsc28gcGFzcyB7IGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6dHJ1ZSB9IHRvIG9uU25hcHNob3QoKS5cIik7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRDaGFuZ2VzICYmIHRoaXMuX2NhY2hlZENoYW5nZXNJbmNsdWRlTWV0YWRhdGFDaGFuZ2VzID09PSBlIHx8ICh0aGlzLl9jYWNoZWRDaGFuZ2VzID0gXG4gICAgICAgIC8qKiBDYWxjdWxhdGVzIHRoZSBhcnJheSBvZiBgRG9jdW1lbnRDaGFuZ2VgcyBmb3IgYSBnaXZlbiBgVmlld1NuYXBzaG90YC4gKi9cbiAgICAgICAgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKHQuX3NuYXBzaG90Lm9sZERvY3MuaXNFbXB0eSgpKSB7XG4gICAgICAgICAgICAgICAgbGV0IGUgPSAwO1xuICAgICAgICAgICAgICAgIHJldHVybiB0Ll9zbmFwc2hvdC5kb2NDaGFuZ2VzLm1hcCgobiA9PiB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHMgPSBuZXcgcmYodC5fZmlyZXN0b3JlLCB0Ll91c2VyRGF0YVdyaXRlciwgbi5kb2Mua2V5LCBuLmRvYywgbmV3IG5mKHQuX3NuYXBzaG90Lm11dGF0ZWRLZXlzLmhhcyhuLmRvYy5rZXkpLCB0Ll9zbmFwc2hvdC5mcm9tQ2FjaGUpLCB0LnF1ZXJ5LmNvbnZlcnRlcik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuLmRvYywge1xuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJhZGRlZFwiLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jOiBzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkSW5kZXg6IC0xLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3SW5kZXg6IGUrK1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvLyBBIGBEb2N1bWVudFNldGAgdGhhdCBpcyB1cGRhdGVkIGluY3JlbWVudGFsbHkgYXMgY2hhbmdlcyBhcmUgYXBwbGllZCB0byB1c2VcbiAgICAgICAgICAgICAgICAvLyB0byBsb29rdXAgdGhlIGluZGV4IG9mIGEgZG9jdW1lbnQuXG4gICAgICAgICAgICAgICAgbGV0IG4gPSB0Ll9zbmFwc2hvdC5vbGREb2NzO1xuICAgICAgICAgICAgICAgIHJldHVybiB0Ll9zbmFwc2hvdC5kb2NDaGFuZ2VzLmZpbHRlcigodCA9PiBlIHx8IDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyAhPT0gdC50eXBlKSkubWFwKChlID0+IHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcyA9IG5ldyByZih0Ll9maXJlc3RvcmUsIHQuX3VzZXJEYXRhV3JpdGVyLCBlLmRvYy5rZXksIGUuZG9jLCBuZXcgbmYodC5fc25hcHNob3QubXV0YXRlZEtleXMuaGFzKGUuZG9jLmtleSksIHQuX3NuYXBzaG90LmZyb21DYWNoZSksIHQucXVlcnkuY29udmVydGVyKTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGkgPSAtMSwgciA9IC0xO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMCAvKiBDaGFuZ2VUeXBlLkFkZGVkICovICE9PSBlLnR5cGUgJiYgKGkgPSBuLmluZGV4T2YoZS5kb2Mua2V5KSwgbiA9IG4uZGVsZXRlKGUuZG9jLmtleSkpLCBcbiAgICAgICAgICAgICAgICAgICAgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gIT09IGUudHlwZSAmJiAobiA9IG4uYWRkKGUuZG9jKSwgciA9IG4uaW5kZXhPZihlLmRvYy5rZXkpKSwgXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IHVmKGUudHlwZSksXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2M6IHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRJbmRleDogaSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0luZGV4OiByXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHRoaXMsIGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzSW5jbHVkZU1ldGFkYXRhQ2hhbmdlcyA9IGUpLCB0aGlzLl9jYWNoZWRDaGFuZ2VzO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gdWYodCkge1xuICAgIHN3aXRjaCAodCkge1xuICAgICAgY2FzZSAwIC8qIENoYW5nZVR5cGUuQWRkZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJhZGRlZFwiO1xuXG4gICAgICBjYXNlIDIgLyogQ2hhbmdlVHlwZS5Nb2RpZmllZCAqLyA6XG4gICAgICBjYXNlIDMgLyogQ2hhbmdlVHlwZS5NZXRhZGF0YSAqLyA6XG4gICAgICAgIHJldHVybiBcIm1vZGlmaWVkXCI7XG5cbiAgICAgIGNhc2UgMSAvKiBDaGFuZ2VUeXBlLlJlbW92ZWQgKi8gOlxuICAgICAgICByZXR1cm4gXCJyZW1vdmVkXCI7XG5cbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBPKCk7XG4gICAgfVxufVxuXG4vLyBUT0RPKGZpcmVzdG9yZWV4cCk6IEFkZCB0ZXN0cyBmb3Igc25hcHNob3RFcXVhbCB3aXRoIGRpZmZlcmVudCBzbmFwc2hvdFxuLy8gbWV0YWRhdGFcbi8qKlxuICogUmV0dXJucyB0cnVlIGlmIHRoZSBwcm92aWRlZCBzbmFwc2hvdHMgYXJlIGVxdWFsLlxuICpcbiAqIEBwYXJhbSBsZWZ0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHJpZ2h0IC0gQSBzbmFwc2hvdCB0byBjb21wYXJlLlxuICogQHJldHVybnMgdHJ1ZSBpZiB0aGUgc25hcHNob3RzIGFyZSBlcXVhbC5cbiAqLyBmdW5jdGlvbiBjZih0LCBlKSB7XG4gICAgcmV0dXJuIHQgaW5zdGFuY2VvZiBzZiAmJiBlIGluc3RhbmNlb2Ygc2YgPyB0Ll9maXJlc3RvcmUgPT09IGUuX2ZpcmVzdG9yZSAmJiB0Ll9rZXkuaXNFcXVhbChlLl9rZXkpICYmIChudWxsID09PSB0Ll9kb2N1bWVudCA/IG51bGwgPT09IGUuX2RvY3VtZW50IDogdC5fZG9jdW1lbnQuaXNFcXVhbChlLl9kb2N1bWVudCkpICYmIHQuX2NvbnZlcnRlciA9PT0gZS5fY29udmVydGVyIDogdCBpbnN0YW5jZW9mIG9mICYmIGUgaW5zdGFuY2VvZiBvZiAmJiAodC5fZmlyZXN0b3JlID09PSBlLl9maXJlc3RvcmUgJiYgcGgodC5xdWVyeSwgZS5xdWVyeSkgJiYgdC5tZXRhZGF0YS5pc0VxdWFsKGUubWV0YWRhdGEpICYmIHQuX3NuYXBzaG90LmlzRXF1YWwoZS5fc25hcHNob3QpKTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYC5cbiAqXG4gKiBOb3RlOiBgZ2V0RG9jKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnkgd2FpdGluZ1xuICogZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmIHlvdSBhcmVcbiAqIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvciwgaW52b2tlXG4gKiB7QGxpbmsgZ2V0RG9jRnJvbUNhY2hlfSBvciB7QGxpbmsgZ2V0RG9jRnJvbVNlcnZlcn0uXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIFRoZSByZWZlcmVuY2Ugb2YgdGhlIGRvY3VtZW50IHRvIGZldGNoLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRTbmFwc2hvdGAgY29udGFpbmluZyB0aGVcbiAqIGN1cnJlbnQgZG9jdW1lbnQgY29udGVudHMuXG4gKi8gZnVuY3Rpb24gYWYodCkge1xuICAgIHQgPSB1aCh0LCBmaCk7XG4gICAgY29uc3QgZSA9IHVoKHQuZmlyZXN0b3JlLCB2aCk7XG4gICAgcmV0dXJuIHphKGJoKGUpLCB0Ll9rZXkpLnRoZW4oKG4gPT4gQWYoZSwgdCwgbikpKTtcbn1cblxuY2xhc3MgaGYgZXh0ZW5kcyBXbCB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBzdXBlcigpLCB0aGlzLmZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIGNvbnZlcnRCeXRlcyh0KSB7XG4gICAgICAgIHJldHVybiBuZXcgVWgodCk7XG4gICAgfVxuICAgIGNvbnZlcnRSZWZlcmVuY2UodCkge1xuICAgICAgICBjb25zdCBlID0gdGhpcy5jb252ZXJ0RG9jdW1lbnRLZXkodCwgdGhpcy5maXJlc3RvcmUuX2RhdGFiYXNlSWQpO1xuICAgICAgICByZXR1cm4gbmV3IGZoKHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwsIGUpO1xuICAgIH1cbn1cblxuLyoqXG4gKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhpcyBgRG9jdW1lbnRSZWZlcmVuY2VgIGZyb20gY2FjaGUuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBkb2N1bWVudCBpcyBub3QgY3VycmVudGx5IGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCByZXNvbHZlZCB3aXRoIGEgYERvY3VtZW50U25hcHNob3RgIGNvbnRhaW5pbmcgdGhlXG4gKiBjdXJyZW50IGRvY3VtZW50IGNvbnRlbnRzLlxuICovIGZ1bmN0aW9uIGxmKHQpIHtcbiAgICB0ID0gdWgodCwgZmgpO1xuICAgIGNvbnN0IGUgPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCBuID0gYmgoZSksIHMgPSBuZXcgaGYoZSk7XG4gICAgcmV0dXJuIGphKG4sIHQuX2tleSkudGhlbigobiA9PiBuZXcgc2YoZSwgcywgdC5fa2V5LCBuLCBuZXcgbmYobnVsbCAhPT0gbiAmJiBuLmhhc0xvY2FsTXV0YXRpb25zLCBcbiAgICAvKiBmcm9tQ2FjaGU9ICovICEwKSwgdC5jb252ZXJ0ZXIpKSk7XG59XG5cbi8qKlxuICogUmVhZHMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoaXMgYERvY3VtZW50UmVmZXJlbmNlYCBmcm9tIHRoZSBzZXJ2ZXIuXG4gKiBSZXR1cm5zIGFuIGVycm9yIGlmIHRoZSBuZXR3b3JrIGlzIG5vdCBhdmFpbGFibGUuXG4gKlxuICogQHJldHVybnMgQSBgUHJvbWlzZWAgcmVzb2x2ZWQgd2l0aCBhIGBEb2N1bWVudFNuYXBzaG90YCBjb250YWluaW5nIHRoZVxuICogY3VycmVudCBkb2N1bWVudCBjb250ZW50cy5cbiAqLyBmdW5jdGlvbiBmZih0KSB7XG4gICAgdCA9IHVoKHQsIGZoKTtcbiAgICBjb25zdCBlID0gdWgodC5maXJlc3RvcmUsIHZoKTtcbiAgICByZXR1cm4gemEoYmgoZSksIHQuX2tleSwge1xuICAgICAgICBzb3VyY2U6IFwic2VydmVyXCJcbiAgICB9KS50aGVuKChuID0+IEFmKGUsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgLlxuICpcbiAqIE5vdGU6IGBnZXREb2NzKClgIGF0dGVtcHRzIHRvIHByb3ZpZGUgdXAtdG8tZGF0ZSBkYXRhIHdoZW4gcG9zc2libGUgYnlcbiAqIHdhaXRpbmcgZm9yIGRhdGEgZnJvbSB0aGUgc2VydmVyLCBidXQgaXQgbWF5IHJldHVybiBjYWNoZWQgZGF0YSBvciBmYWlsIGlmXG4gKiB5b3UgYXJlIG9mZmxpbmUgYW5kIHRoZSBzZXJ2ZXIgY2Fubm90IGJlIHJlYWNoZWQuIFRvIHNwZWNpZnkgdGhpcyBiZWhhdmlvcixcbiAqIGludm9rZSB7QGxpbmsgZ2V0RG9jc0Zyb21DYWNoZX0gb3Ige0BsaW5rIGdldERvY3NGcm9tU2VydmVyfS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gZGYodCkge1xuICAgIHQgPSB1aCh0LCBkaCk7XG4gICAgY29uc3QgZSA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIG4gPSBiaChlKSwgcyA9IG5ldyBoZihlKTtcbiAgICByZXR1cm4gRWwodC5fcXVlcnkpLCBIYShuLCB0Ll9xdWVyeSkudGhlbigobiA9PiBuZXcgb2YoZSwgcywgdCwgbikpKTtcbn1cblxuLyoqXG4gKiBFeGVjdXRlcyB0aGUgcXVlcnkgYW5kIHJldHVybnMgdGhlIHJlc3VsdHMgYXMgYSBgUXVlcnlTbmFwc2hvdGAgZnJvbSBjYWNoZS5cbiAqIFJldHVybnMgYW4gZW1wdHkgcmVzdWx0IHNldCBpZiBubyBkb2N1bWVudHMgbWF0Y2hpbmcgdGhlIHF1ZXJ5IGFyZSBjdXJyZW50bHlcbiAqIGNhY2hlZC5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gd2YodCkge1xuICAgIHQgPSB1aCh0LCBkaCk7XG4gICAgY29uc3QgZSA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIG4gPSBiaChlKSwgcyA9IG5ldyBoZihlKTtcbiAgICByZXR1cm4gV2EobiwgdC5fcXVlcnkpLnRoZW4oKG4gPT4gbmV3IG9mKGUsIHMsIHQsIG4pKSk7XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIHF1ZXJ5IGFuZCByZXR1cm5zIHRoZSByZXN1bHRzIGFzIGEgYFF1ZXJ5U25hcHNob3RgIGZyb20gdGhlXG4gKiBzZXJ2ZXIuIFJldHVybnMgYW4gZXJyb3IgaWYgdGhlIG5ldHdvcmsgaXMgbm90IGF2YWlsYWJsZS5cbiAqXG4gKiBAcmV0dXJucyBBIGBQcm9taXNlYCB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgcmVzdWx0cyBvZiB0aGUgcXVlcnkuXG4gKi8gZnVuY3Rpb24gX2YodCkge1xuICAgIHQgPSB1aCh0LCBkaCk7XG4gICAgY29uc3QgZSA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIG4gPSBiaChlKSwgcyA9IG5ldyBoZihlKTtcbiAgICByZXR1cm4gSGEobiwgdC5fcXVlcnksIHtcbiAgICAgICAgc291cmNlOiBcInNlcnZlclwiXG4gICAgfSkudGhlbigobiA9PiBuZXcgb2YoZSwgcywgdCwgbikpKTtcbn1cblxuZnVuY3Rpb24gbWYodCwgZSwgbikge1xuICAgIHQgPSB1aCh0LCBmaCk7XG4gICAgY29uc3QgcyA9IHVoKHQuZmlyZXN0b3JlLCB2aCksIGkgPSBIbCh0LmNvbnZlcnRlciwgZSwgbik7XG4gICAgcmV0dXJuIEVmKHMsIFsgdGwoWmgocyksIFwic2V0RG9jXCIsIHQuX2tleSwgaSwgbnVsbCAhPT0gdC5jb252ZXJ0ZXIsIG4pLnRvTXV0YXRpb24odC5fa2V5LCBGcy5ub25lKCkpIF0pO1xufVxuXG5mdW5jdGlvbiBnZih0LCBlLCBuLCAuLi5zKSB7XG4gICAgdCA9IHVoKHQsIGZoKTtcbiAgICBjb25zdCBpID0gdWgodC5maXJlc3RvcmUsIHZoKSwgciA9IFpoKGkpO1xuICAgIGxldCBvO1xuICAgIG8gPSBcInN0cmluZ1wiID09IHR5cGVvZiAoXG4gICAgLy8gRm9yIENvbXBhdCB0eXBlcywgd2UgaGF2ZSB0byBcImV4dHJhY3RcIiB0aGUgdW5kZXJseWluZyB0eXBlcyBiZWZvcmVcbiAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgZSA9IGdldE1vZHVsYXJJbnN0YW5jZShlKSkgfHwgZSBpbnN0YW5jZW9mIEtoID8gY2wociwgXCJ1cGRhdGVEb2NcIiwgdC5fa2V5LCBlLCBuLCBzKSA6IHVsKHIsIFwidXBkYXRlRG9jXCIsIHQuX2tleSwgZSk7XG4gICAgcmV0dXJuIEVmKGksIFsgby50b011dGF0aW9uKHQuX2tleSwgRnMuZXhpc3RzKCEwKSkgXSk7XG59XG5cbi8qKlxuICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHNwZWNpZmllZCBgRG9jdW1lbnRSZWZlcmVuY2VgLlxuICpcbiAqIEBwYXJhbSByZWZlcmVuY2UgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gZGVsZXRlLlxuICogQHJldHVybnMgQSBQcm9taXNlIHJlc29sdmVkIG9uY2UgdGhlIGRvY3VtZW50IGhhcyBiZWVuIHN1Y2Nlc3NmdWxseVxuICogZGVsZXRlZCBmcm9tIHRoZSBiYWNrZW5kIChub3RlIHRoYXQgaXQgd29uJ3QgcmVzb2x2ZSB3aGlsZSB5b3UncmUgb2ZmbGluZSkuXG4gKi8gZnVuY3Rpb24geWYodCkge1xuICAgIHJldHVybiBFZih1aCh0LmZpcmVzdG9yZSwgdmgpLCBbIG5ldyBZcyh0Ll9rZXksIEZzLm5vbmUoKSkgXSk7XG59XG5cbi8qKlxuICogQWRkIGEgbmV3IGRvY3VtZW50IHRvIHNwZWNpZmllZCBgQ29sbGVjdGlvblJlZmVyZW5jZWAgd2l0aCB0aGUgZ2l2ZW4gZGF0YSxcbiAqIGFzc2lnbmluZyBpdCBhIGRvY3VtZW50IElEIGF1dG9tYXRpY2FsbHkuXG4gKlxuICogQHBhcmFtIHJlZmVyZW5jZSAtIEEgcmVmZXJlbmNlIHRvIHRoZSBjb2xsZWN0aW9uIHRvIGFkZCB0aGlzIGRvY3VtZW50IHRvLlxuICogQHBhcmFtIGRhdGEgLSBBbiBPYmplY3QgY29udGFpbmluZyB0aGUgZGF0YSBmb3IgdGhlIG5ldyBkb2N1bWVudC5cbiAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIHdpdGggYSBgRG9jdW1lbnRSZWZlcmVuY2VgIHBvaW50aW5nIHRvIHRoZVxuICogbmV3bHkgY3JlYXRlZCBkb2N1bWVudCBhZnRlciBpdCBoYXMgYmVlbiB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIChOb3RlIHRoYXQgaXRcbiAqIHdvbid0IHJlc29sdmUgd2hpbGUgeW91J3JlIG9mZmxpbmUpLlxuICovIGZ1bmN0aW9uIHBmKHQsIGUpIHtcbiAgICBjb25zdCBuID0gdWgodC5maXJlc3RvcmUsIHZoKSwgcyA9IGdoKHQpLCBpID0gSGwodC5jb252ZXJ0ZXIsIGUpO1xuICAgIHJldHVybiBFZihuLCBbIHRsKFpoKHQuZmlyZXN0b3JlKSwgXCJhZGREb2NcIiwgcy5fa2V5LCBpLCBudWxsICE9PSB0LmNvbnZlcnRlciwge30pLnRvTXV0YXRpb24ocy5fa2V5LCBGcy5leGlzdHMoITEpKSBdKS50aGVuKCgoKSA9PiBzKSk7XG59XG5cbmZ1bmN0aW9uIElmKHQsIC4uLmUpIHtcbiAgICB2YXIgbiwgcywgaTtcbiAgICB0ID0gZ2V0TW9kdWxhckluc3RhbmNlKHQpO1xuICAgIGxldCByID0ge1xuICAgICAgICBpbmNsdWRlTWV0YWRhdGFDaGFuZ2VzOiAhMVxuICAgIH0sIG8gPSAwO1xuICAgIFwib2JqZWN0XCIgIT0gdHlwZW9mIGVbb10gfHwgVGgoZVtvXSkgfHwgKHIgPSBlW29dLCBvKyspO1xuICAgIGNvbnN0IHUgPSB7XG4gICAgICAgIGluY2x1ZGVNZXRhZGF0YUNoYW5nZXM6IHIuaW5jbHVkZU1ldGFkYXRhQ2hhbmdlc1xuICAgIH07XG4gICAgaWYgKFRoKGVbb10pKSB7XG4gICAgICAgIGNvbnN0IHQgPSBlW29dO1xuICAgICAgICBlW29dID0gbnVsbCA9PT0gKG4gPSB0Lm5leHQpIHx8IHZvaWQgMCA9PT0gbiA/IHZvaWQgMCA6IG4uYmluZCh0KSwgZVtvICsgMV0gPSBudWxsID09PSAocyA9IHQuZXJyb3IpIHx8IHZvaWQgMCA9PT0gcyA/IHZvaWQgMCA6IHMuYmluZCh0KSwgXG4gICAgICAgIGVbbyArIDJdID0gbnVsbCA9PT0gKGkgPSB0LmNvbXBsZXRlKSB8fCB2b2lkIDAgPT09IGkgPyB2b2lkIDAgOiBpLmJpbmQodCk7XG4gICAgfVxuICAgIGxldCBjLCBhLCBoO1xuICAgIGlmICh0IGluc3RhbmNlb2YgZmgpIGEgPSB1aCh0LmZpcmVzdG9yZSwgdmgpLCBoID0gR24odC5fa2V5LnBhdGgpLCBjID0ge1xuICAgICAgICBuZXh0OiBuID0+IHtcbiAgICAgICAgICAgIGVbb10gJiYgZVtvXShBZihhLCB0LCBuKSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBlW28gKyAxXSxcbiAgICAgICAgY29tcGxldGU6IGVbbyArIDJdXG4gICAgfTsgZWxzZSB7XG4gICAgICAgIGNvbnN0IG4gPSB1aCh0LCBkaCk7XG4gICAgICAgIGEgPSB1aChuLmZpcmVzdG9yZSwgdmgpLCBoID0gbi5fcXVlcnk7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgaGYoYSk7XG4gICAgICAgIGMgPSB7XG4gICAgICAgICAgICBuZXh0OiB0ID0+IHtcbiAgICAgICAgICAgICAgICBlW29dICYmIGVbb10obmV3IG9mKGEsIHMsIG4sIHQpKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZVtvICsgMV0sXG4gICAgICAgICAgICBjb21wbGV0ZTogZVtvICsgMl1cbiAgICAgICAgfSwgRWwodC5fcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbiwgcykge1xuICAgICAgICBjb25zdCBpID0gbmV3IFZhKHMpLCByID0gbmV3IE5jKGUsIGksIG4pO1xuICAgICAgICByZXR1cm4gdC5hc3luY1F1ZXVlLmVucXVldWVBbmRGb3JnZXQoKGFzeW5jICgpID0+IFZjKGF3YWl0IEthKHQpLCByKSkpLCAoKSA9PiB7XG4gICAgICAgICAgICBpLkRjKCksIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiBTYyhhd2FpdCBLYSh0KSwgcikpKTtcbiAgICAgICAgfTtcbiAgICB9KGJoKGEpLCBoLCB1LCBjKTtcbn1cblxuZnVuY3Rpb24gVGYodCwgZSkge1xuICAgIHJldHVybiBKYShiaCh0ID0gdWgodCwgdmgpKSwgVGgoZSkgPyBlIDoge1xuICAgICAgICBuZXh0OiBlXG4gICAgfSk7XG59XG5cbi8qKlxuICogTG9jYWxseSB3cml0ZXMgYG11dGF0aW9uc2Agb24gdGhlIGFzeW5jIHF1ZXVlLlxuICogQGludGVybmFsXG4gKi8gZnVuY3Rpb24gRWYodCwgZSkge1xuICAgIHJldHVybiBmdW5jdGlvbih0LCBlKSB7XG4gICAgICAgIGNvbnN0IG4gPSBuZXcgSztcbiAgICAgICAgcmV0dXJuIHQuYXN5bmNRdWV1ZS5lbnF1ZXVlQW5kRm9yZ2V0KChhc3luYyAoKSA9PiB6Yyhhd2FpdCBxYSh0KSwgZSwgbikpKSwgbi5wcm9taXNlO1xuICAgIH0oYmgodCksIGUpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGEge0BsaW5rIFZpZXdTbmFwc2hvdH0gdGhhdCBjb250YWlucyB0aGUgc2luZ2xlIGRvY3VtZW50IHNwZWNpZmllZCBieSBgcmVmYFxuICogdG8gYSB7QGxpbmsgRG9jdW1lbnRTbmFwc2hvdH0uXG4gKi8gZnVuY3Rpb24gQWYodCwgZSwgbikge1xuICAgIGNvbnN0IHMgPSBuLmRvY3MuZ2V0KGUuX2tleSksIGkgPSBuZXcgaGYodCk7XG4gICAgcmV0dXJuIG5ldyBzZih0LCBpLCBlLl9rZXksIHMsIG5ldyBuZihuLmhhc1BlbmRpbmdXcml0ZXMsIG4uZnJvbUNhY2hlKSwgZS5jb252ZXJ0ZXIpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBDYWxjdWxhdGVzIHRoZSBudW1iZXIgb2YgZG9jdW1lbnRzIGluIHRoZSByZXN1bHQgc2V0IG9mIHRoZSBnaXZlbiBxdWVyeSxcbiAqIHdpdGhvdXQgYWN0dWFsbHkgZG93bmxvYWRpbmcgdGhlIGRvY3VtZW50cy5cbiAqXG4gKiBVc2luZyB0aGlzIGZ1bmN0aW9uIHRvIGNvdW50IHRoZSBkb2N1bWVudHMgaXMgZWZmaWNpZW50IGJlY2F1c2Ugb25seSB0aGVcbiAqIGZpbmFsIGNvdW50LCBub3QgdGhlIGRvY3VtZW50cycgZGF0YSwgaXMgZG93bmxvYWRlZC4gVGhpcyBmdW5jdGlvbiBjYW4gZXZlblxuICogY291bnQgdGhlIGRvY3VtZW50cyBpZiB0aGUgcmVzdWx0IHNldCB3b3VsZCBiZSBwcm9oaWJpdGl2ZWx5IGxhcmdlIHRvXG4gKiBkb3dubG9hZCBlbnRpcmVseSAoZS5nLiB0aG91c2FuZHMgb2YgZG9jdW1lbnRzKS5cbiAqXG4gKiBUaGUgcmVzdWx0IHJlY2VpdmVkIGZyb20gdGhlIHNlcnZlciBpcyBwcmVzZW50ZWQsIHVuYWx0ZXJlZCwgd2l0aG91dFxuICogY29uc2lkZXJpbmcgYW55IGxvY2FsIHN0YXRlLiBUaGF0IGlzLCBkb2N1bWVudHMgaW4gdGhlIGxvY2FsIGNhY2hlIGFyZSBub3RcbiAqIHRha2VuIGludG8gY29uc2lkZXJhdGlvbiwgbmVpdGhlciBhcmUgbG9jYWwgbW9kaWZpY2F0aW9ucyBub3QgeWV0XG4gKiBzeW5jaHJvbml6ZWQgd2l0aCB0aGUgc2VydmVyLiBQcmV2aW91c2x5LWRvd25sb2FkZWQgcmVzdWx0cywgaWYgYW55LCBhcmUgbm90XG4gKiB1c2VkOiBldmVyeSByZXF1ZXN0IHVzaW5nIHRoaXMgc291cmNlIG5lY2Vzc2FyaWx5IGludm9sdmVzIGEgcm91bmQgdHJpcCB0b1xuICogdGhlIHNlcnZlci5cbiAqXG4gKiBAcGFyYW0gcXVlcnkgLSBUaGUgcXVlcnkgd2hvc2UgcmVzdWx0IHNldCBzaXplIHRvIGNhbGN1bGF0ZS5cbiAqIEByZXR1cm5zIEEgUHJvbWlzZSB0aGF0IHdpbGwgYmUgcmVzb2x2ZWQgd2l0aCB0aGUgY291bnQ7IHRoZSBjb3VudCBjYW4gYmVcbiAqIHJldHJpZXZlZCBmcm9tIGBzbmFwc2hvdC5kYXRhKCkuY291bnRgLCB3aGVyZSBgc25hcHNob3RgIGlzIHRoZVxuICogYEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RgIHRvIHdoaWNoIHRoZSByZXR1cm5lZCBQcm9taXNlIHJlc29sdmVzLlxuICovIGZ1bmN0aW9uIHZmKHQpIHtcbiAgICByZXR1cm4gUmYodCwge1xuICAgICAgICBjb3VudDogWmwoKVxuICAgIH0pO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZXMgdGhlIHNwZWNpZmllZCBhZ2dyZWdhdGlvbnMgb3ZlciB0aGUgZG9jdW1lbnRzIGluIHRoZSByZXN1bHRcbiAqIHNldCBvZiB0aGUgZ2l2ZW4gcXVlcnksIHdpdGhvdXQgYWN0dWFsbHkgZG93bmxvYWRpbmcgdGhlIGRvY3VtZW50cy5cbiAqXG4gKiBVc2luZyB0aGlzIGZ1bmN0aW9uIHRvIHBlcmZvcm0gYWdncmVnYXRpb25zIGlzIGVmZmljaWVudCBiZWNhdXNlIG9ubHkgdGhlXG4gKiBmaW5hbCBhZ2dyZWdhdGlvbiB2YWx1ZXMsIG5vdCB0aGUgZG9jdW1lbnRzJyBkYXRhLCBpcyBkb3dubG9hZGVkLiBUaGlzXG4gKiBmdW5jdGlvbiBjYW4gZXZlbiBwZXJmb3JtIGFnZ3JlZ2F0aW9ucyBvZiB0aGUgZG9jdW1lbnRzIGlmIHRoZSByZXN1bHQgc2V0XG4gKiB3b3VsZCBiZSBwcm9oaWJpdGl2ZWx5IGxhcmdlIHRvIGRvd25sb2FkIGVudGlyZWx5IChlLmcuIHRob3VzYW5kcyBvZiBkb2N1bWVudHMpLlxuICpcbiAqIFRoZSByZXN1bHQgcmVjZWl2ZWQgZnJvbSB0aGUgc2VydmVyIGlzIHByZXNlbnRlZCwgdW5hbHRlcmVkLCB3aXRob3V0XG4gKiBjb25zaWRlcmluZyBhbnkgbG9jYWwgc3RhdGUuIFRoYXQgaXMsIGRvY3VtZW50cyBpbiB0aGUgbG9jYWwgY2FjaGUgYXJlIG5vdFxuICogdGFrZW4gaW50byBjb25zaWRlcmF0aW9uLCBuZWl0aGVyIGFyZSBsb2NhbCBtb2RpZmljYXRpb25zIG5vdCB5ZXRcbiAqIHN5bmNocm9uaXplZCB3aXRoIHRoZSBzZXJ2ZXIuIFByZXZpb3VzbHktZG93bmxvYWRlZCByZXN1bHRzLCBpZiBhbnksIGFyZSBub3RcbiAqIHVzZWQ6IGV2ZXJ5IHJlcXVlc3QgdXNpbmcgdGhpcyBzb3VyY2UgbmVjZXNzYXJpbHkgaW52b2x2ZXMgYSByb3VuZCB0cmlwIHRvXG4gKiB0aGUgc2VydmVyLlxuICpcbiAqIEBwYXJhbSBxdWVyeSBUaGUgcXVlcnkgd2hvc2UgcmVzdWx0IHNldCB0byBhZ2dyZWdhdGUgb3Zlci5cbiAqIEBwYXJhbSBhZ2dyZWdhdGVTcGVjIEFuIGBBZ2dyZWdhdGVTcGVjYCBvYmplY3QgdGhhdCBzcGVjaWZpZXMgdGhlIGFnZ3JlZ2F0ZXNcbiAqIHRvIHBlcmZvcm0gb3ZlciB0aGUgcmVzdWx0IHNldC4gVGhlIEFnZ3JlZ2F0ZVNwZWMgc3BlY2lmaWVzIGFsaWFzZXMgZm9yIGVhY2hcbiAqIGFnZ3JlZ2F0ZSwgd2hpY2ggY2FuIGJlIHVzZWQgdG8gcmV0cmlldmUgdGhlIGFnZ3JlZ2F0ZSByZXN1bHQuXG4gKiBAZXhhbXBsZVxuICogYGBgdHlwZXNjcmlwdFxuICogY29uc3QgYWdncmVnYXRlU25hcHNob3QgPSBhd2FpdCBnZXRBZ2dyZWdhdGVGcm9tU2VydmVyKHF1ZXJ5LCB7XG4gKiAgIGNvdW50T2ZEb2NzOiBjb3VudCgpLFxuICogICB0b3RhbEhvdXJzOiBzdW0oJ2hvdXJzJyksXG4gKiAgIGF2ZXJhZ2VTY29yZTogYXZlcmFnZSgnc2NvcmUnKVxuICogfSk7XG4gKlxuICogY29uc3QgY291bnRPZkRvY3M6IG51bWJlciA9IGFnZ3JlZ2F0ZVNuYXBzaG90LmRhdGEoKS5jb3VudE9mRG9jcztcbiAqIGNvbnN0IHRvdGFsSG91cnM6IG51bWJlciA9IGFnZ3JlZ2F0ZVNuYXBzaG90LmRhdGEoKS50b3RhbEhvdXJzO1xuICogY29uc3QgYXZlcmFnZVNjb3JlOiBudW1iZXIgfCBudWxsID0gYWdncmVnYXRlU25hcHNob3QuZGF0YSgpLmF2ZXJhZ2VTY29yZTtcbiAqIGBgYFxuICogQGludGVybmFsIFRPRE8gKHN1bS9hdmcpIHJlbW92ZSB3aGVuIHB1YmxpY1xuICovIGZ1bmN0aW9uIFJmKHQsIGUpIHtcbiAgICBjb25zdCBuID0gdWgodC5maXJlc3RvcmUsIHZoKSwgcyA9IGJoKG4pLCBpID0gZnVuY3Rpb24odCwgZSkge1xuICAgICAgICBjb25zdCBuID0gW107XG4gICAgICAgIGZvciAoY29uc3QgcyBpbiB0KSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCwgcykgJiYgbi5wdXNoKGUodFtzXSwgcywgdCkpO1xuICAgICAgICByZXR1cm4gbjtcbiAgICB9KGUsICgodCwgZSkgPT4gbmV3IG5pKGUsIHQuX2FnZ3JlZ2F0ZVR5cGUsIHQuX2ludGVybmFsRmllbGRQYXRoKSkpO1xuICAgIC8vIFJ1biB0aGUgYWdncmVnYXRpb24gYW5kIGNvbnZlcnQgdGhlIHJlc3VsdHNcbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IEs7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgLy8gVE9ETyAoc3VtL2F2Zykgc2hvdWxkIHdlIHVwZGF0ZSB0aGlzIHRvIHVzZSB0aGUgZXZlbnQgbWFuYWdlcj9cbiAgICAgICAgICAgIC8vIEltcGxlbWVudCBhbmQgY2FsbCBleGVjdXRlQWdncmVnYXRlUXVlcnlWaWFTbmFwc2hvdExpc3RlbmVyLCBzaW1pbGFyXG4gICAgICAgICAgICAvLyB0byB0aGUgaW1wbGVtZW50YXRpb24gaW4gZmlyZXN0b3JlQ2xpZW50R2V0RG9jdW1lbnRzVmlhU25hcHNob3RMaXN0ZW5lclxuICAgICAgICAgICAgLy8gYWJvdmVcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gVE9ETyhiLzI3NzYyODM4NCk6IGNoZWNrIGBjYW5Vc2VOZXR3b3JrKClgIGFuZCBoYW5kbGUgbXVsdGktdGFiLlxuICAgICAgICAgICAgICAgIGNvbnN0IGkgPSBhd2FpdCBVYSh0KTtcbiAgICAgICAgICAgICAgICBzLnJlc29sdmUoR3UoaSwgZSwgbikpO1xuICAgICAgICAgICAgfSBjYXRjaCAodCkge1xuICAgICAgICAgICAgICAgIHMucmVqZWN0KHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KSksIHMucHJvbWlzZTtcbiAgICB9KHMsIHQuX3F1ZXJ5LCBpKS50aGVuKChlID0+IFxuICAgIC8qKlxuICogQ29udmVydHMgdGhlIGNvcmUgYWdncmVncmF0aW9uIHJlc3VsdCB0byBhbiBgQWdncmVnYXRlUXVlcnlTbmFwc2hvdGBcbiAqIHRoYXQgY2FuIGJlIHJldHVybmVkIHRvIHRoZSBjb25zdW1lci5cbiAqIEBwYXJhbSBxdWVyeVxuICogQHBhcmFtIGFnZ3JlZ2F0ZVJlc3VsdCBDb3JlIGFnZ3JlZ2F0aW9uIHJlc3VsdFxuICogQGludGVybmFsXG4gKi9cbiAgICBmdW5jdGlvbih0LCBlLCBuKSB7XG4gICAgICAgIGNvbnN0IHMgPSBuZXcgaGYodCk7XG4gICAgICAgIHJldHVybiBuZXcgcWgoZSwgcywgbik7XG4gICAgfVxuICAgIC8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIzIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovIChuLCB0LCBlKSkpO1xufVxuXG5jbGFzcyBQZiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIm1lbW9yeVwiLCB0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBQYSwgKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuZ2FyYmFnZUNvbGxlY3RvcikgPyB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSB0LmdhcmJhZ2VDb2xsZWN0b3IuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA6IHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBFYTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBiZiB7XG4gICAgY29uc3RydWN0b3IodCkge1xuICAgICAgICBsZXQgZTtcbiAgICAgICAgdGhpcy5raW5kID0gXCJwZXJzaXN0ZW50XCIsIChudWxsID09IHQgPyB2b2lkIDAgOiB0LnRhYk1hbmFnZXIpID8gKHQudGFiTWFuYWdlci5faW5pdGlhbGl6ZSh0KSwgXG4gICAgICAgIGUgPSB0LnRhYk1hbmFnZXIpIDogKGUgPSAkZih2b2lkIDApLCBlLl9pbml0aWFsaXplKHQpKSwgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBlLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciwgXG4gICAgICAgIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IGUuX29mZmxpbmVDb21wb25lbnRQcm92aWRlcjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG5jbGFzcyBWZiB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5RWFnZXJcIiwgdGhpcy5fb2ZmbGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IEVhO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG59XG5cbmNsYXNzIFNmIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMua2luZCA9IFwibWVtb3J5THJ1XCIsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBBYSh0KTtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYE1lbW9yeUVhZ2VyR2FyYmFnZUNvbGxlY3RvcmAuIFRoaXMgaXMgYWxzbyB0aGVcbiAqIGRlZmF1bHQgZ2FyYmFnZSBjb2xsZWN0b3IgdW5sZXNzIGl0IGlzIGV4cGxpY2l0bHkgc3BlY2lmaWVkIG90aGVyd2lzZS5cbiAqLyBmdW5jdGlvbiBEZigpIHtcbiAgICByZXR1cm4gbmV3IFZmO1xufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYE1lbW9yeUxydUdhcmJhZ2VDb2xsZWN0b3JgLlxuICpcbiAqIEEgdGFyZ2V0IHNpemUgY2FuIGJlIHNwZWNpZmllZCBhcyBwYXJ0IG9mIHRoZSBzZXR0aW5nIHBhcmFtZXRlci4gVGhlXG4gKiBjb2xsZWN0b3Igd2lsbCBzdGFydCBkZWxldGluZyBkb2N1bWVudHMgb25jZSB0aGUgY2FjaGUgc2l6ZSBleGNlZWRzXG4gKiB0aGUgZ2l2ZW4gc2l6ZS4gVGhlIGRlZmF1bHQgY2FjaGUgc2l6ZSBpcyA0ME1CICg0MCAqIDEwMjQgKiAxMDI0IGJ5dGVzKS5cbiAqLyBmdW5jdGlvbiBDZih0KSB7XG4gICAgcmV0dXJuIG5ldyBTZihudWxsID09IHQgPyB2b2lkIDAgOiB0LmNhY2hlU2l6ZUJ5dGVzKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBNZW1vcnlMb2NhbENhY2hlYC4gVGhlIGluc3RhbmNlIGNhbiBiZSBzZXQgdG9cbiAqIGBGaXJlc3RvcmVTZXR0aW5ncy5jYWNoZWAgdG8gdGVsbCB0aGUgU0RLIHdoaWNoIGNhY2hlIGxheWVyIHRvIHVzZS5cbiAqLyBmdW5jdGlvbiB4Zih0KSB7XG4gICAgcmV0dXJuIG5ldyBQZih0KTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TG9jYWxDYWNoZWAuIFRoZSBpbnN0YW5jZSBjYW4gYmUgc2V0IHRvXG4gKiBgRmlyZXN0b3JlU2V0dGluZ3MuY2FjaGVgIHRvIHRlbGwgdGhlIFNESyB3aGljaCBjYWNoZSBsYXllciB0byB1c2UuXG4gKlxuICogUGVyc2lzdGVudCBjYWNoZSBjYW5ub3QgYmUgdXNlZCBpbiBhIE5vZGUuanMgZW52aXJvbm1lbnQuXG4gKi8gZnVuY3Rpb24gTmYodCkge1xuICAgIHJldHVybiBuZXcgYmYodCk7XG59XG5cbmNsYXNzIGtmIHtcbiAgICBjb25zdHJ1Y3Rvcih0KSB7XG4gICAgICAgIHRoaXMuZm9yY2VPd25lcnNoaXAgPSB0LCB0aGlzLmtpbmQgPSBcInBlcnNpc3RlbnRTaW5nbGVUYWJcIjtcbiAgICB9XG4gICAgdG9KU09OKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAga2luZDogdGhpcy5raW5kXG4gICAgICAgIH07XG4gICAgfVxuICAgIC8qKlxuICAgICAqIEBpbnRlcm5hbFxuICAgICAqLyAgICBfaW5pdGlhbGl6ZSh0KSB7XG4gICAgICAgIHRoaXMuX29ubGluZUNvbXBvbmVudFByb3ZpZGVyID0gbmV3IFBhLCB0aGlzLl9vZmZsaW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgdmEodGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIsIG51bGwgPT0gdCA/IHZvaWQgMCA6IHQuY2FjaGVTaXplQnl0ZXMsIHRoaXMuZm9yY2VPd25lcnNoaXApO1xuICAgIH1cbn1cblxuY2xhc3MgTWYge1xuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmtpbmQgPSBcIlBlcnNpc3RlbnRNdWx0aXBsZVRhYlwiO1xuICAgIH1cbiAgICB0b0pTT04oKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBraW5kOiB0aGlzLmtpbmRcbiAgICAgICAgfTtcbiAgICB9XG4gICAgLyoqXG4gICAgICogQGludGVybmFsXG4gICAgICovICAgIF9pbml0aWFsaXplKHQpIHtcbiAgICAgICAgdGhpcy5fb25saW5lQ29tcG9uZW50UHJvdmlkZXIgPSBuZXcgUGEsIHRoaXMuX29mZmxpbmVDb21wb25lbnRQcm92aWRlciA9IG5ldyBSYSh0aGlzLl9vbmxpbmVDb21wb25lbnRQcm92aWRlciwgbnVsbCA9PSB0ID8gdm9pZCAwIDogdC5jYWNoZVNpemVCeXRlcyk7XG4gICAgfVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYW4gaW5zdGFuY2Ugb2YgYFBlcnNpc3RlbnRTaW5nbGVUYWJNYW5hZ2VyYC5cbiAqXG4gKiBAcGFyYW0gc2V0dGluZ3MgQ29uZmlndXJlcyB0aGUgY3JlYXRlZCB0YWIgbWFuYWdlci5cbiAqLyBmdW5jdGlvbiAkZih0KSB7XG4gICAgcmV0dXJuIG5ldyBrZihudWxsID09IHQgPyB2b2lkIDAgOiB0LmZvcmNlT3duZXJzaGlwKTtcbn1cblxuLyoqXG4gKiBDcmVhdGVzIGFuIGluc3RhbmNlIG9mIGBQZXJzaXN0ZW50TXVsdGlwbGVUYWJNYW5hZ2VyYC5cbiAqLyBmdW5jdGlvbiBPZigpIHtcbiAgICByZXR1cm4gbmV3IE1mO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMiBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBjb25zdCBGZiA9IHtcbiAgICBtYXhBdHRlbXB0czogNVxufTtcblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQSB3cml0ZSBiYXRjaCwgdXNlZCB0byBwZXJmb3JtIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZSBhdG9taWMgdW5pdC5cbiAqXG4gKiBBIGBXcml0ZUJhdGNoYCBvYmplY3QgY2FuIGJlIGFjcXVpcmVkIGJ5IGNhbGxpbmcge0BsaW5rIHdyaXRlQmF0Y2h9LiBJdFxuICogcHJvdmlkZXMgbWV0aG9kcyBmb3IgYWRkaW5nIHdyaXRlcyB0byB0aGUgd3JpdGUgYmF0Y2guIE5vbmUgb2YgdGhlIHdyaXRlc1xuICogd2lsbCBiZSBjb21taXR0ZWQgKG9yIHZpc2libGUgbG9jYWxseSkgdW50aWwge0BsaW5rIFdyaXRlQmF0Y2guY29tbWl0fSBpc1xuICogY2FsbGVkLlxuICovXG5jbGFzcyBCZiB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX2NvbW1pdEhhbmRsZXIgPSBlLCB0aGlzLl9tdXRhdGlvbnMgPSBbXSwgdGhpcy5fY29tbWl0dGVkID0gITEsIFxuICAgICAgICB0aGlzLl9kYXRhUmVhZGVyID0gWmgodCk7XG4gICAgfVxuICAgIHNldCh0LCBlLCBuKSB7XG4gICAgICAgIHRoaXMuX3ZlcmlmeU5vdENvbW1pdHRlZCgpO1xuICAgICAgICBjb25zdCBzID0gTGYodCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IEhsKHMuY29udmVydGVyLCBlLCBuKSwgciA9IHRsKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC5zZXRcIiwgcy5fa2V5LCBpLCBudWxsICE9PSBzLmNvbnZlcnRlciwgbik7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMucHVzaChyLnRvTXV0YXRpb24ocy5fa2V5LCBGcy5ub25lKCkpKSwgdGhpcztcbiAgICB9XG4gICAgdXBkYXRlKHQsIGUsIG4sIC4uLnMpIHtcbiAgICAgICAgdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCk7XG4gICAgICAgIGNvbnN0IGkgPSBMZih0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBLaCA/IGNsKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlLCBuLCBzKSA6IHVsKHRoaXMuX2RhdGFSZWFkZXIsIFwiV3JpdGVCYXRjaC51cGRhdGVcIiwgaS5fa2V5LCBlKSwgXG4gICAgICAgIHRoaXMuX211dGF0aW9ucy5wdXNoKHIudG9NdXRhdGlvbihpLl9rZXksIEZzLmV4aXN0cyghMCkpKSwgdGhpcztcbiAgICB9XG4gICAgLyoqXG4gICAgICogRGVsZXRlcyB0aGUgZG9jdW1lbnQgcmVmZXJyZWQgdG8gYnkgdGhlIHByb3ZpZGVkIHtAbGluayBEb2N1bWVudFJlZmVyZW5jZX0uXG4gICAgICpcbiAgICAgKiBAcGFyYW0gZG9jdW1lbnRSZWYgLSBBIHJlZmVyZW5jZSB0byB0aGUgZG9jdW1lbnQgdG8gYmUgZGVsZXRlZC5cbiAgICAgKiBAcmV0dXJucyBUaGlzIGBXcml0ZUJhdGNoYCBpbnN0YW5jZS4gVXNlZCBmb3IgY2hhaW5pbmcgbWV0aG9kIGNhbGxzLlxuICAgICAqLyAgICBkZWxldGUodCkge1xuICAgICAgICB0aGlzLl92ZXJpZnlOb3RDb21taXR0ZWQoKTtcbiAgICAgICAgY29uc3QgZSA9IExmKHQsIHRoaXMuX2ZpcmVzdG9yZSk7XG4gICAgICAgIHJldHVybiB0aGlzLl9tdXRhdGlvbnMgPSB0aGlzLl9tdXRhdGlvbnMuY29uY2F0KG5ldyBZcyhlLl9rZXksIEZzLm5vbmUoKSkpLCB0aGlzO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBDb21taXRzIGFsbCBvZiB0aGUgd3JpdGVzIGluIHRoaXMgd3JpdGUgYmF0Y2ggYXMgYSBzaW5nbGUgYXRvbWljIHVuaXQuXG4gICAgICpcbiAgICAgKiBUaGUgcmVzdWx0IG9mIHRoZXNlIHdyaXRlcyB3aWxsIG9ubHkgYmUgcmVmbGVjdGVkIGluIGRvY3VtZW50IHJlYWRzIHRoYXRcbiAgICAgKiBvY2N1ciBhZnRlciB0aGUgcmV0dXJuZWQgcHJvbWlzZSByZXNvbHZlcy4gSWYgdGhlIGNsaWVudCBpcyBvZmZsaW5lLCB0aGVcbiAgICAgKiB3cml0ZSBmYWlscy4gSWYgeW91IHdvdWxkIGxpa2UgdG8gc2VlIGxvY2FsIG1vZGlmaWNhdGlvbnMgb3IgYnVmZmVyIHdyaXRlc1xuICAgICAqIHVudGlsIHRoZSBjbGllbnQgaXMgb25saW5lLCB1c2UgdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cbiAgICAgKlxuICAgICAqIEByZXR1cm5zIEEgYFByb21pc2VgIHJlc29sdmVkIG9uY2UgYWxsIG9mIHRoZSB3cml0ZXMgaW4gdGhlIGJhdGNoIGhhdmUgYmVlblxuICAgICAqIHN1Y2Nlc3NmdWxseSB3cml0dGVuIHRvIHRoZSBiYWNrZW5kIGFzIGFuIGF0b21pYyB1bml0IChub3RlIHRoYXQgaXQgd29uJ3RcbiAgICAgKiByZXNvbHZlIHdoaWxlIHlvdSdyZSBvZmZsaW5lKS5cbiAgICAgKi8gICAgY29tbWl0KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdmVyaWZ5Tm90Q29tbWl0dGVkKCksIHRoaXMuX2NvbW1pdHRlZCA9ICEwLCB0aGlzLl9tdXRhdGlvbnMubGVuZ3RoID4gMCA/IHRoaXMuX2NvbW1pdEhhbmRsZXIodGhpcy5fbXV0YXRpb25zKSA6IFByb21pc2UucmVzb2x2ZSgpO1xuICAgIH1cbiAgICBfdmVyaWZ5Tm90Q29tbWl0dGVkKCkge1xuICAgICAgICBpZiAodGhpcy5fY29tbWl0dGVkKSB0aHJvdyBuZXcgVShxLkZBSUxFRF9QUkVDT05ESVRJT04sIFwiQSB3cml0ZSBiYXRjaCBjYW4gbm8gbG9uZ2VyIGJlIHVzZWQgYWZ0ZXIgY29tbWl0KCkgaGFzIGJlZW4gY2FsbGVkLlwiKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIExmKHQsIGUpIHtcbiAgICBpZiAoKHQgPSBnZXRNb2R1bGFySW5zdGFuY2UodCkpLmZpcmVzdG9yZSAhPT0gZSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIlByb3ZpZGVkIGRvY3VtZW50IHJlZmVyZW5jZSBpcyBmcm9tIGEgZGlmZmVyZW50IEZpcmVzdG9yZSBpbnN0YW5jZS5cIik7XG4gICAgcmV0dXJuIHQ7XG59XG5cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vLyBUT0RPKG1yc2NobWlkdCkgQ29uc2lkZXIgdXNpbmcgYEJhc2VUcmFuc2FjdGlvbmAgYXMgdGhlIGJhc2UgY2xhc3MgaW4gdGhlXG4vLyBsZWdhY3kgU0RLLlxuLyoqXG4gKiBBIHJlZmVyZW5jZSB0byBhIHRyYW5zYWN0aW9uLlxuICpcbiAqIFRoZSBgVHJhbnNhY3Rpb25gIG9iamVjdCBwYXNzZWQgdG8gYSB0cmFuc2FjdGlvbidzIGB1cGRhdGVGdW5jdGlvbmAgcHJvdmlkZXNcbiAqIHRoZSBtZXRob2RzIHRvIHJlYWQgYW5kIHdyaXRlIGRhdGEgd2l0aGluIHRoZSB0cmFuc2FjdGlvbiBjb250ZXh0LiBTZWVcbiAqIHtAbGluayBydW5UcmFuc2FjdGlvbn0uXG4gKi9cbi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxuICovXG4vKipcbiAqIEEgcmVmZXJlbmNlIHRvIGEgdHJhbnNhY3Rpb24uXG4gKlxuICogVGhlIGBUcmFuc2FjdGlvbmAgb2JqZWN0IHBhc3NlZCB0byBhIHRyYW5zYWN0aW9uJ3MgYHVwZGF0ZUZ1bmN0aW9uYCBwcm92aWRlc1xuICogdGhlIG1ldGhvZHMgdG8gcmVhZCBhbmQgd3JpdGUgZGF0YSB3aXRoaW4gdGhlIHRyYW5zYWN0aW9uIGNvbnRleHQuIFNlZVxuICoge0BsaW5rIHJ1blRyYW5zYWN0aW9ufS5cbiAqL1xuY2xhc3MgcWYgZXh0ZW5kcyBjbGFzcyB7XG4gICAgLyoqIEBoaWRlY29uc3RydWN0b3IgKi9cbiAgICBjb25zdHJ1Y3Rvcih0LCBlKSB7XG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IHQsIHRoaXMuX3RyYW5zYWN0aW9uID0gZSwgdGhpcy5fZGF0YVJlYWRlciA9IFpoKHQpO1xuICAgIH1cbiAgICAvKipcbiAgICAgKiBSZWFkcyB0aGUgZG9jdW1lbnQgcmVmZXJlbmNlZCBieSB0aGUgcHJvdmlkZWQge0BsaW5rIERvY3VtZW50UmVmZXJlbmNlfS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSBkb2N1bWVudFJlZiAtIEEgcmVmZXJlbmNlIHRvIHRoZSBkb2N1bWVudCB0byBiZSByZWFkLlxuICAgICAqIEByZXR1cm5zIEEgYERvY3VtZW50U25hcHNob3RgIHdpdGggdGhlIHJlYWQgZGF0YS5cbiAgICAgKi8gICAgZ2V0KHQpIHtcbiAgICAgICAgY29uc3QgZSA9IExmKHQsIHRoaXMuX2ZpcmVzdG9yZSksIG4gPSBuZXcgSmwodGhpcy5fZmlyZXN0b3JlKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RyYW5zYWN0aW9uLmxvb2t1cChbIGUuX2tleSBdKS50aGVuKCh0ID0+IHtcbiAgICAgICAgICAgIGlmICghdCB8fCAxICE9PSB0Lmxlbmd0aCkgcmV0dXJuIE8oKTtcbiAgICAgICAgICAgIGNvbnN0IHMgPSB0WzBdO1xuICAgICAgICAgICAgaWYgKHMuaXNGb3VuZERvY3VtZW50KCkpIHJldHVybiBuZXcgcGwodGhpcy5fZmlyZXN0b3JlLCBuLCBzLmtleSwgcywgZS5jb252ZXJ0ZXIpO1xuICAgICAgICAgICAgaWYgKHMuaXNOb0RvY3VtZW50KCkpIHJldHVybiBuZXcgcGwodGhpcy5fZmlyZXN0b3JlLCBuLCBlLl9rZXksIG51bGwsIGUuY29udmVydGVyKTtcbiAgICAgICAgICAgIHRocm93IE8oKTtcbiAgICAgICAgfSkpO1xuICAgIH1cbiAgICBzZXQodCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gTGYodCwgdGhpcy5fZmlyZXN0b3JlKSwgaSA9IEhsKHMuY29udmVydGVyLCBlLCBuKSwgciA9IHRsKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24uc2V0XCIsIHMuX2tleSwgaSwgbnVsbCAhPT0gcy5jb252ZXJ0ZXIsIG4pO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uc2V0KHMuX2tleSwgciksIHRoaXM7XG4gICAgfVxuICAgIHVwZGF0ZSh0LCBlLCBuLCAuLi5zKSB7XG4gICAgICAgIGNvbnN0IGkgPSBMZih0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICAvLyBGb3IgQ29tcGF0IHR5cGVzLCB3ZSBoYXZlIHRvIFwiZXh0cmFjdFwiIHRoZSB1bmRlcmx5aW5nIHR5cGVzIGJlZm9yZVxuICAgICAgICAvLyBwZXJmb3JtaW5nIHZhbGlkYXRpb24uXG4gICAgICAgICAgICAgICAgbGV0IHI7XG4gICAgICAgIHJldHVybiByID0gXCJzdHJpbmdcIiA9PSB0eXBlb2YgKGUgPSBnZXRNb2R1bGFySW5zdGFuY2UoZSkpIHx8IGUgaW5zdGFuY2VvZiBLaCA/IGNsKHRoaXMuX2RhdGFSZWFkZXIsIFwiVHJhbnNhY3Rpb24udXBkYXRlXCIsIGkuX2tleSwgZSwgbiwgcykgOiB1bCh0aGlzLl9kYXRhUmVhZGVyLCBcIlRyYW5zYWN0aW9uLnVwZGF0ZVwiLCBpLl9rZXksIGUpLCBcbiAgICAgICAgdGhpcy5fdHJhbnNhY3Rpb24udXBkYXRlKGkuX2tleSwgciksIHRoaXM7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIERlbGV0ZXMgdGhlIGRvY3VtZW50IHJlZmVycmVkIHRvIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIGRlbGV0ZWQuXG4gICAgICogQHJldHVybnMgVGhpcyBgVHJhbnNhY3Rpb25gIGluc3RhbmNlLiBVc2VkIGZvciBjaGFpbmluZyBtZXRob2QgY2FsbHMuXG4gICAgICovICAgIGRlbGV0ZSh0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBMZih0LCB0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gdGhpcy5fdHJhbnNhY3Rpb24uZGVsZXRlKGUuX2tleSksIHRoaXM7XG4gICAgfVxufSB7XG4gICAgLy8gVGhpcyBjbGFzcyBpbXBsZW1lbnRzIHRoZSBzYW1lIGxvZ2ljIGFzIHRoZSBUcmFuc2FjdGlvbiBBUEkgaW4gdGhlIExpdGUgU0RLXG4gICAgLy8gYnV0IGlzIHN1YmNsYXNzZWQgaW4gb3JkZXIgdG8gcmV0dXJuIGl0cyBvd24gRG9jdW1lbnRTbmFwc2hvdCB0eXBlcy5cbiAgICAvKiogQGhpZGVjb25zdHJ1Y3RvciAqL1xuICAgIGNvbnN0cnVjdG9yKHQsIGUpIHtcbiAgICAgICAgc3VwZXIodCwgZSksIHRoaXMuX2ZpcmVzdG9yZSA9IHQ7XG4gICAgfVxuICAgIC8qKlxuICAgICAqIFJlYWRzIHRoZSBkb2N1bWVudCByZWZlcmVuY2VkIGJ5IHRoZSBwcm92aWRlZCB7QGxpbmsgRG9jdW1lbnRSZWZlcmVuY2V9LlxuICAgICAqXG4gICAgICogQHBhcmFtIGRvY3VtZW50UmVmIC0gQSByZWZlcmVuY2UgdG8gdGhlIGRvY3VtZW50IHRvIGJlIHJlYWQuXG4gICAgICogQHJldHVybnMgQSBgRG9jdW1lbnRTbmFwc2hvdGAgd2l0aCB0aGUgcmVhZCBkYXRhLlxuICAgICAqLyAgICBnZXQodCkge1xuICAgICAgICBjb25zdCBlID0gTGYodCwgdGhpcy5fZmlyZXN0b3JlKSwgbiA9IG5ldyBoZih0aGlzLl9maXJlc3RvcmUpO1xuICAgICAgICByZXR1cm4gc3VwZXIuZ2V0KHQpLnRoZW4oKHQgPT4gbmV3IHNmKHRoaXMuX2ZpcmVzdG9yZSwgbiwgZS5fa2V5LCB0Ll9kb2N1bWVudCwgbmV3IG5mKFxuICAgICAgICAvKiBoYXNQZW5kaW5nV3JpdGVzPSAqLyAhMSwgXG4gICAgICAgIC8qIGZyb21DYWNoZT0gKi8gITEpLCBlLmNvbnZlcnRlcikpKTtcbiAgICB9XG59XG5cbi8qKlxuICogRXhlY3V0ZXMgdGhlIGdpdmVuIGB1cGRhdGVGdW5jdGlvbmAgYW5kIHRoZW4gYXR0ZW1wdHMgdG8gY29tbWl0IHRoZSBjaGFuZ2VzXG4gKiBhcHBsaWVkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb24uIElmIGFueSBkb2N1bWVudCByZWFkIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGhhcyBjaGFuZ2VkLCBDbG91ZCBGaXJlc3RvcmUgcmV0cmllcyB0aGUgYHVwZGF0ZUZ1bmN0aW9uYC4gSWYgaXQgZmFpbHMgdG9cbiAqIGNvbW1pdCBhZnRlciA1IGF0dGVtcHRzLCB0aGUgdHJhbnNhY3Rpb24gZmFpbHMuXG4gKlxuICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHRyYW5zYWN0aW9uIGlzIDUwMC5cbiAqXG4gKiBAcGFyYW0gZmlyZXN0b3JlIC0gQSByZWZlcmVuY2UgdG8gdGhlIEZpcmVzdG9yZSBkYXRhYmFzZSB0byBydW4gdGhpc1xuICogdHJhbnNhY3Rpb24gYWdhaW5zdC5cbiAqIEBwYXJhbSB1cGRhdGVGdW5jdGlvbiAtIFRoZSBmdW5jdGlvbiB0byBleGVjdXRlIHdpdGhpbiB0aGUgdHJhbnNhY3Rpb25cbiAqIGNvbnRleHQuXG4gKiBAcGFyYW0gb3B0aW9ucyAtIEFuIG9wdGlvbnMgb2JqZWN0IHRvIGNvbmZpZ3VyZSBtYXhpbXVtIG51bWJlciBvZiBhdHRlbXB0cyB0b1xuICogY29tbWl0LlxuICogQHJldHVybnMgSWYgdGhlIHRyYW5zYWN0aW9uIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkgb3Igd2FzIGV4cGxpY2l0bHkgYWJvcnRlZFxuICogKHRoZSBgdXBkYXRlRnVuY3Rpb25gIHJldHVybmVkIGEgZmFpbGVkIHByb21pc2UpLCB0aGUgcHJvbWlzZSByZXR1cm5lZCBieSB0aGVcbiAqIGB1cGRhdGVGdW5jdGlvbiBgaXMgcmV0dXJuZWQgaGVyZS4gT3RoZXJ3aXNlLCBpZiB0aGUgdHJhbnNhY3Rpb24gZmFpbGVkLCBhXG4gKiByZWplY3RlZCBwcm9taXNlIHdpdGggdGhlIGNvcnJlc3BvbmRpbmcgZmFpbHVyZSBlcnJvciBpcyByZXR1cm5lZC5cbiAqLyBmdW5jdGlvbiBVZih0LCBlLCBuKSB7XG4gICAgdCA9IHVoKHQsIHZoKTtcbiAgICBjb25zdCBzID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBGZiksIG4pO1xuICAgICFmdW5jdGlvbih0KSB7XG4gICAgICAgIGlmICh0Lm1heEF0dGVtcHRzIDwgMSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIk1heCBhdHRlbXB0cyBtdXN0IGJlIGF0IGxlYXN0IDFcIik7XG4gICAgfShzKTtcbiAgICByZXR1cm4gZnVuY3Rpb24odCwgZSwgbikge1xuICAgICAgICBjb25zdCBzID0gbmV3IEs7XG4gICAgICAgIHJldHVybiB0LmFzeW5jUXVldWUuZW5xdWV1ZUFuZEZvcmdldCgoYXN5bmMgKCkgPT4ge1xuICAgICAgICAgICAgY29uc3QgaSA9IGF3YWl0IFVhKHQpO1xuICAgICAgICAgICAgbmV3IENhKHQuYXN5bmNRdWV1ZSwgaSwgbiwgZSwgcykucnVuKCk7XG4gICAgICAgIH0pKSwgcy5wcm9taXNlO1xuICAgIH0oYmgodCksIChuID0+IGUobmV3IHFmKHQsIG4pKSksIHMpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyoqXG4gKiBSZXR1cm5zIGEgc2VudGluZWwgZm9yIHVzZSB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gb3JcbiAqIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gd2l0aCBge21lcmdlOiB0cnVlfWAgdG8gbWFyayBhIGZpZWxkIGZvciBkZWxldGlvbi5cbiAqLyBmdW5jdGlvbiBLZigpIHtcbiAgICByZXR1cm4gbmV3IGVsKFwiZGVsZXRlRmllbGRcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNlbnRpbmVsIHVzZWQgd2l0aCB7QGxpbmsgQGZpcmViYXNlL2ZpcmVzdG9yZS9saXRlIyhzZXREb2M6MSl9IG9yIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdG9cbiAqIGluY2x1ZGUgYSBzZXJ2ZXItZ2VuZXJhdGVkIHRpbWVzdGFtcCBpbiB0aGUgd3JpdHRlbiBkYXRhLlxuICovIGZ1bmN0aW9uIEdmKCkge1xuICAgIHJldHVybiBuZXcgc2woXCJzZXJ2ZXJUaW1lc3RhbXBcIik7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHVuaW9uIHRoZSBnaXZlbiBlbGVtZW50cyB3aXRoIGFueSBhcnJheVxuICogdmFsdWUgdGhhdCBhbHJlYWR5IGV4aXN0cyBvbiB0aGUgc2VydmVyLiBFYWNoIHNwZWNpZmllZCBlbGVtZW50IHRoYXQgZG9lc24ndFxuICogYWxyZWFkeSBleGlzdCBpbiB0aGUgYXJyYXkgd2lsbCBiZSBhZGRlZCB0byB0aGUgZW5kLiBJZiB0aGUgZmllbGQgYmVpbmdcbiAqIG1vZGlmaWVkIGlzIG5vdCBhbHJlYWR5IGFuIGFycmF5IGl0IHdpbGwgYmUgb3ZlcndyaXR0ZW4gd2l0aCBhbiBhcnJheVxuICogY29udGFpbmluZyBleGFjdGx5IHRoZSBzcGVjaWZpZWQgZWxlbWVudHMuXG4gKlxuICogQHBhcmFtIGVsZW1lbnRzIC0gVGhlIGVsZW1lbnRzIHRvIHVuaW9uIGludG8gdGhlIGFycmF5LlxuICogQHJldHVybnMgVGhlIGBGaWVsZFZhbHVlYCBzZW50aW5lbCBmb3IgdXNlIGluIGEgY2FsbCB0byBgc2V0RG9jKClgIG9yXG4gKiBgdXBkYXRlRG9jKClgLlxuICovIGZ1bmN0aW9uIFFmKC4uLnQpIHtcbiAgICAvLyBOT1RFOiBXZSBkb24ndCBhY3R1YWxseSBwYXJzZSB0aGUgZGF0YSB1bnRpbCBpdCdzIHVzZWQgaW4gc2V0KCkgb3JcbiAgICAvLyB1cGRhdGUoKSBzaW5jZSB3ZSdkIG5lZWQgdGhlIEZpcmVzdG9yZSBpbnN0YW5jZSB0byBkbyB0aGlzLlxuICAgIHJldHVybiBuZXcgaWwoXCJhcnJheVVuaW9uXCIsIHQpO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBzcGVjaWFsIHZhbHVlIHRoYXQgY2FuIGJlIHVzZWQgd2l0aCB7QGxpbmsgKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiB1cGRhdGVEb2M6MX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIHJlbW92ZSB0aGUgZ2l2ZW4gZWxlbWVudHMgZnJvbSBhbnlcbiAqIGFycmF5IHZhbHVlIHRoYXQgYWxyZWFkeSBleGlzdHMgb24gdGhlIHNlcnZlci4gQWxsIGluc3RhbmNlcyBvZiBlYWNoIGVsZW1lbnRcbiAqIHNwZWNpZmllZCB3aWxsIGJlIHJlbW92ZWQgZnJvbSB0aGUgYXJyYXkuIElmIHRoZSBmaWVsZCBiZWluZyBtb2RpZmllZCBpcyBub3RcbiAqIGFscmVhZHkgYW4gYXJyYXkgaXQgd2lsbCBiZSBvdmVyd3JpdHRlbiB3aXRoIGFuIGVtcHR5IGFycmF5LlxuICpcbiAqIEBwYXJhbSBlbGVtZW50cyAtIFRoZSBlbGVtZW50cyB0byByZW1vdmUgZnJvbSB0aGUgYXJyYXkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWBcbiAqLyBmdW5jdGlvbiBqZiguLi50KSB7XG4gICAgLy8gTk9URTogV2UgZG9uJ3QgYWN0dWFsbHkgcGFyc2UgdGhlIGRhdGEgdW50aWwgaXQncyB1c2VkIGluIHNldCgpIG9yXG4gICAgLy8gdXBkYXRlKCkgc2luY2Ugd2UnZCBuZWVkIHRoZSBGaXJlc3RvcmUgaW5zdGFuY2UgdG8gZG8gdGhpcy5cbiAgICByZXR1cm4gbmV3IHJsKFwiYXJyYXlSZW1vdmVcIiwgdCk7XG59XG5cbi8qKlxuICogUmV0dXJucyBhIHNwZWNpYWwgdmFsdWUgdGhhdCBjYW4gYmUgdXNlZCB3aXRoIHtAbGluayBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHNldERvYzoxKX0gb3Ige0BsaW5rXG4gKiBAZmlyZWJhc2UvZmlyZXN0b3JlL2xpdGUjKHVwZGF0ZURvYzoxKX0gdGhhdCB0ZWxscyB0aGUgc2VydmVyIHRvIGluY3JlbWVudCB0aGUgZmllbGQncyBjdXJyZW50IHZhbHVlIGJ5XG4gKiB0aGUgZ2l2ZW4gdmFsdWUuXG4gKlxuICogSWYgZWl0aGVyIHRoZSBvcGVyYW5kIG9yIHRoZSBjdXJyZW50IGZpZWxkIHZhbHVlIHVzZXMgZmxvYXRpbmcgcG9pbnRcbiAqIHByZWNpc2lvbiwgYWxsIGFyaXRobWV0aWMgZm9sbG93cyBJRUVFIDc1NCBzZW1hbnRpY3MuIElmIGJvdGggdmFsdWVzIGFyZVxuICogaW50ZWdlcnMsIHZhbHVlcyBvdXRzaWRlIG9mIEphdmFTY3JpcHQncyBzYWZlIG51bWJlciByYW5nZVxuICogKGBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUmAgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYCkgYXJlIGFsc28gc3ViamVjdCB0b1xuICogcHJlY2lzaW9uIGxvc3MuIEZ1cnRoZXJtb3JlLCBvbmNlIHByb2Nlc3NlZCBieSB0aGUgRmlyZXN0b3JlIGJhY2tlbmQsIGFsbFxuICogaW50ZWdlciBvcGVyYXRpb25zIGFyZSBjYXBwZWQgYmV0d2VlbiAtMl42MyBhbmQgMl42My0xLlxuICpcbiAqIElmIHRoZSBjdXJyZW50IGZpZWxkIHZhbHVlIGlzIG5vdCBvZiB0eXBlIGBudW1iZXJgLCBvciBpZiB0aGUgZmllbGQgZG9lcyBub3RcbiAqIHlldCBleGlzdCwgdGhlIHRyYW5zZm9ybWF0aW9uIHNldHMgdGhlIGZpZWxkIHRvIHRoZSBnaXZlbiB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0gbiAtIFRoZSB2YWx1ZSB0byBpbmNyZW1lbnQgYnkuXG4gKiBAcmV0dXJucyBUaGUgYEZpZWxkVmFsdWVgIHNlbnRpbmVsIGZvciB1c2UgaW4gYSBjYWxsIHRvIGBzZXREb2MoKWAgb3JcbiAqIGB1cGRhdGVEb2MoKWBcbiAqLyBmdW5jdGlvbiB6Zih0KSB7XG4gICAgcmV0dXJuIG5ldyBvbChcImluY3JlbWVudFwiLCB0KTtcbn1cblxuLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbi8qKlxuICogQ3JlYXRlcyBhIHdyaXRlIGJhdGNoLCB1c2VkIGZvciBwZXJmb3JtaW5nIG11bHRpcGxlIHdyaXRlcyBhcyBhIHNpbmdsZVxuICogYXRvbWljIG9wZXJhdGlvbi4gVGhlIG1heGltdW0gbnVtYmVyIG9mIHdyaXRlcyBhbGxvd2VkIGluIGEgc2luZ2xlIHtAbGluayBXcml0ZUJhdGNofVxuICogaXMgNTAwLlxuICpcbiAqIFVubGlrZSB0cmFuc2FjdGlvbnMsIHdyaXRlIGJhdGNoZXMgYXJlIHBlcnNpc3RlZCBvZmZsaW5lIGFuZCB0aGVyZWZvcmUgYXJlXG4gKiBwcmVmZXJhYmxlIHdoZW4geW91IGRvbid0IG5lZWQgdG8gY29uZGl0aW9uIHlvdXIgd3JpdGVzIG9uIHJlYWQgZGF0YS5cbiAqXG4gKiBAcmV0dXJucyBBIHtAbGluayBXcml0ZUJhdGNofSB0aGF0IGNhbiBiZSB1c2VkIHRvIGF0b21pY2FsbHkgZXhlY3V0ZSBtdWx0aXBsZVxuICogd3JpdGVzLlxuICovIGZ1bmN0aW9uIFdmKHQpIHtcbiAgICByZXR1cm4gYmgodCA9IHVoKHQsIHZoKSksIG5ldyBCZih0LCAoZSA9PiBFZih0LCBlKSkpO1xufVxuXG4vKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXG4gKlxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxuICpcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqLyBmdW5jdGlvbiBIZih0LCBlKSB7XG4gICAgdmFyIG47XG4gICAgY29uc3QgcyA9IGJoKHQgPSB1aCh0LCB2aCkpO1xuICAgIGlmICghcy5fdW5pbml0aWFsaXplZENvbXBvbmVudHNQcm92aWRlciB8fCBcIm1lbW9yeVwiID09PSAobnVsbCA9PT0gKG4gPSBzLl91bmluaXRpYWxpemVkQ29tcG9uZW50c1Byb3ZpZGVyKSB8fCB2b2lkIDAgPT09IG4gPyB2b2lkIDAgOiBuLl9vZmZsaW5lS2luZCkpIFxuICAgIC8vIFBPUlRJTkcgTk9URTogV2UgZG9uJ3QgcmV0dXJuIGFuIGVycm9yIGlmIHRoZSB1c2VyIGhhcyBub3QgZW5hYmxlZFxuICAgIC8vIHBlcnNpc3RlbmNlIHNpbmNlIGBlbmFibGVJbmRleGVkZGJQZXJzaXN0ZW5jZSgpYCBjYW4gZmFpbCBvbiB0aGUgV2ViLlxuICAgIHJldHVybiBNKFwiQ2Fubm90IGVuYWJsZSBpbmRleGVzIHdoZW4gcGVyc2lzdGVuY2UgaXMgZGlzYWJsZWRcIiksIFByb21pc2UucmVzb2x2ZSgpO1xuICAgIGNvbnN0IGkgPSBmdW5jdGlvbih0KSB7XG4gICAgICAgIGNvbnN0IGUgPSBcInN0cmluZ1wiID09IHR5cGVvZiB0ID8gZnVuY3Rpb24odCkge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh0KTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKHQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsIFwiRmFpbGVkIHRvIHBhcnNlIEpTT046IFwiICsgKG51bGwgPT0gdCA/IHZvaWQgMCA6IHQubWVzc2FnZSkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KHQpIDogdCwgbiA9IFtdO1xuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShlLmluZGV4ZXMpKSBmb3IgKGNvbnN0IHQgb2YgZS5pbmRleGVzKSB7XG4gICAgICAgICAgICBjb25zdCBlID0gSmYodCwgXCJjb2xsZWN0aW9uR3JvdXBcIiksIHMgPSBbXTtcbiAgICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHQuZmllbGRzKSkgZm9yIChjb25zdCBlIG9mIHQuZmllbGRzKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgdCA9IG1sKFwic2V0SW5kZXhDb25maWd1cmF0aW9uXCIsIEpmKGUsIFwiZmllbGRQYXRoXCIpKTtcbiAgICAgICAgICAgICAgICBcIkNPTlRBSU5TXCIgPT09IGUuYXJyYXlDb25maWcgPyBzLnB1c2gobmV3IF90KHQsIDIgLyogSW5kZXhLaW5kLkNPTlRBSU5TICovKSkgOiBcIkFTQ0VORElOR1wiID09PSBlLm9yZGVyID8gcy5wdXNoKG5ldyBfdCh0LCAwIC8qIEluZGV4S2luZC5BU0NFTkRJTkcgKi8pKSA6IFwiREVTQ0VORElOR1wiID09PSBlLm9yZGVyICYmIHMucHVzaChuZXcgX3QodCwgMSAvKiBJbmRleEtpbmQuREVTQ0VORElORyAqLykpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbi5wdXNoKG5ldyBsdChsdC5VTktOT1dOX0lELCBlLCBzLCBndC5lbXB0eSgpKSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG47XG4gICAgfShlKTtcbiAgICByZXR1cm4gWmEocywgaSk7XG59XG5cbmZ1bmN0aW9uIEpmKHQsIGUpIHtcbiAgICBpZiAoXCJzdHJpbmdcIiAhPSB0eXBlb2YgdFtlXSkgdGhyb3cgbmV3IFUocS5JTlZBTElEX0FSR1VNRU5ULCBcIk1pc3Npbmcgc3RyaW5nIHZhbHVlIGZvcjogXCIgKyBlKTtcbiAgICByZXR1cm4gdFtlXTtcbn1cblxuLyoqXG4gKiBDbG91ZCBGaXJlc3RvcmVcbiAqXG4gKiBAcGFja2FnZURvY3VtZW50YXRpb25cbiAqLyAhZnVuY3Rpb24odCwgZSA9ICEwKSB7XG4gICAgIWZ1bmN0aW9uKHQpIHtcbiAgICAgICAgUyA9IHQ7XG4gICAgfShTREtfVkVSU0lPTiksIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KFwiZmlyZXN0b3JlXCIsICgodCwge2luc3RhbmNlSWRlbnRpZmllcjogbiwgb3B0aW9uczogc30pID0+IHtcbiAgICAgICAgY29uc3QgaSA9IHQuZ2V0UHJvdmlkZXIoXCJhcHBcIikuZ2V0SW1tZWRpYXRlKCksIHIgPSBuZXcgdmgobmV3IHoodC5nZXRQcm92aWRlcihcImF1dGgtaW50ZXJuYWxcIikpLCBuZXcgWSh0LmdldFByb3ZpZGVyKFwiYXBwLWNoZWNrLWludGVybmFsXCIpKSwgZnVuY3Rpb24odCwgZSkge1xuICAgICAgICAgICAgaWYgKCFPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmFwcGx5KHQub3B0aW9ucywgWyBcInByb2plY3RJZFwiIF0pKSB0aHJvdyBuZXcgVShxLklOVkFMSURfQVJHVU1FTlQsICdcInByb2plY3RJZFwiIG5vdCBwcm92aWRlZCBpbiBmaXJlYmFzZS5pbml0aWFsaXplQXBwLicpO1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBPZSh0Lm9wdGlvbnMucHJvamVjdElkLCBlKTtcbiAgICAgICAgfShpLCBuKSwgaSk7XG4gICAgICAgIHJldHVybiBzID0gT2JqZWN0LmFzc2lnbih7XG4gICAgICAgICAgICB1c2VGZXRjaFN0cmVhbXM6IGVcbiAgICAgICAgfSwgcyksIHIuX3NldFNldHRpbmdzKHMpLCByO1xuICAgIH0pLCBcIlBVQkxJQ1wiKS5zZXRNdWx0aXBsZUluc3RhbmNlcyghMCkpLCByZWdpc3RlclZlcnNpb24oYiwgXCIzLjEzLjBcIiwgdCksIFxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXG4gICAgcmVnaXN0ZXJWZXJzaW9uKGIsIFwiMy4xMy4wXCIsIFwiZXNtMjAxN1wiKTtcbn0oKTtcblxuZXhwb3J0IHsgV2wgYXMgQWJzdHJhY3RVc2VyRGF0YVdyaXRlciwgTGggYXMgQWdncmVnYXRlRmllbGQsIHFoIGFzIEFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3QsIFVoIGFzIEJ5dGVzLCBBaCBhcyBDQUNIRV9TSVpFX1VOTElNSVRFRCwgd2ggYXMgQ29sbGVjdGlvblJlZmVyZW5jZSwgZmggYXMgRG9jdW1lbnRSZWZlcmVuY2UsIHNmIGFzIERvY3VtZW50U25hcHNob3QsIEtoIGFzIEZpZWxkUGF0aCwgUWggYXMgRmllbGRWYWx1ZSwgdmggYXMgRmlyZXN0b3JlLCBVIGFzIEZpcmVzdG9yZUVycm9yLCBqaCBhcyBHZW9Qb2ludCwgRWggYXMgTG9hZEJ1bmRsZVRhc2ssIGRoIGFzIFF1ZXJ5LCBWbCBhcyBRdWVyeUNvbXBvc2l0ZUZpbHRlckNvbnN0cmFpbnQsIHZsIGFzIFF1ZXJ5Q29uc3RyYWludCwgcmYgYXMgUXVlcnlEb2N1bWVudFNuYXBzaG90LCBCbCBhcyBRdWVyeUVuZEF0Q29uc3RyYWludCwgUGwgYXMgUXVlcnlGaWVsZEZpbHRlckNvbnN0cmFpbnQsIE5sIGFzIFF1ZXJ5TGltaXRDb25zdHJhaW50LCBDbCBhcyBRdWVyeU9yZGVyQnlDb25zdHJhaW50LCBvZiBhcyBRdWVyeVNuYXBzaG90LCAkbCBhcyBRdWVyeVN0YXJ0QXRDb25zdHJhaW50LCBuZiBhcyBTbmFwc2hvdE1ldGFkYXRhLCBpdCBhcyBUaW1lc3RhbXAsIHFmIGFzIFRyYW5zYWN0aW9uLCBCZiBhcyBXcml0ZUJhdGNoLCBPZSBhcyBfRGF0YWJhc2VJZCwgaHQgYXMgX0RvY3VtZW50S2V5LCBYIGFzIF9FbXB0eUFwcENoZWNrVG9rZW5Qcm92aWRlciwgUSBhcyBfRW1wdHlBdXRoQ3JlZGVudGlhbHNQcm92aWRlciwgYXQgYXMgX0ZpZWxkUGF0aCwgY2kgYXMgX1Rlc3RpbmdIb29rcywgdWggYXMgX2Nhc3QsIEIgYXMgX2RlYnVnQXNzZXJ0LCBiZSBhcyBfaXNCYXNlNjRBdmFpbGFibGUsIE0gYXMgX2xvZ1dhcm4sIHNoIGFzIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyLCBwZiBhcyBhZGREb2MsIHRmIGFzIGFnZ3JlZ2F0ZUZpZWxkRXF1YWwsIGVmIGFzIGFnZ3JlZ2F0ZVF1ZXJ5U25hcHNob3RFcXVhbCwgRGwgYXMgYW5kLCBqZiBhcyBhcnJheVJlbW92ZSwgUWYgYXMgYXJyYXlVbmlvbiwgWGwgYXMgYXZlcmFnZSwgeGggYXMgY2xlYXJJbmRleGVkRGJQZXJzaXN0ZW5jZSwgX2ggYXMgY29sbGVjdGlvbiwgbWggYXMgY29sbGVjdGlvbkdyb3VwLCBsaCBhcyBjb25uZWN0RmlyZXN0b3JlRW11bGF0b3IsIFpsIGFzIGNvdW50LCB5ZiBhcyBkZWxldGVEb2MsIEtmIGFzIGRlbGV0ZUZpZWxkLCBNaCBhcyBkaXNhYmxlTmV0d29yaywgZ2ggYXMgZG9jLCBHaCBhcyBkb2N1bWVudElkLCBTaCBhcyBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSwgRGggYXMgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZSwga2ggYXMgZW5hYmxlTmV0d29yaywgcWwgYXMgZW5kQXQsIExsIGFzIGVuZEJlZm9yZSwgYmggYXMgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgRWYgYXMgZXhlY3V0ZVdyaXRlLCBSZiBhcyBnZXRBZ2dyZWdhdGVGcm9tU2VydmVyLCB2ZiBhcyBnZXRDb3VudEZyb21TZXJ2ZXIsIGFmIGFzIGdldERvYywgbGYgYXMgZ2V0RG9jRnJvbUNhY2hlLCBmZiBhcyBnZXREb2NGcm9tU2VydmVyLCBkZiBhcyBnZXREb2NzLCB3ZiBhcyBnZXREb2NzRnJvbUNhY2hlLCBfZiBhcyBnZXREb2NzRnJvbVNlcnZlciwgUGggYXMgZ2V0RmlyZXN0b3JlLCB6ZiBhcyBpbmNyZW1lbnQsIFJoIGFzIGluaXRpYWxpemVGaXJlc3RvcmUsIGtsIGFzIGxpbWl0LCBNbCBhcyBsaW1pdFRvTGFzdCwgT2ggYXMgbG9hZEJ1bmRsZSwgRGYgYXMgbWVtb3J5RWFnZXJHYXJiYWdlQ29sbGVjdG9yLCB4ZiBhcyBtZW1vcnlMb2NhbENhY2hlLCBDZiBhcyBtZW1vcnlMcnVHYXJiYWdlQ29sbGVjdG9yLCBGaCBhcyBuYW1lZFF1ZXJ5LCBJZiBhcyBvblNuYXBzaG90LCBUZiBhcyBvblNuYXBzaG90c0luU3luYywgU2wgYXMgb3IsIHhsIGFzIG9yZGVyQnksIE5mIGFzIHBlcnNpc3RlbnRMb2NhbENhY2hlLCBPZiBhcyBwZXJzaXN0ZW50TXVsdGlwbGVUYWJNYW5hZ2VyLCAkZiBhcyBwZXJzaXN0ZW50U2luZ2xlVGFiTWFuYWdlciwgUmwgYXMgcXVlcnksIHBoIGFzIHF1ZXJ5RXF1YWwsIHloIGFzIHJlZkVxdWFsLCBVZiBhcyBydW5UcmFuc2FjdGlvbiwgR2YgYXMgc2VydmVyVGltZXN0YW1wLCBtZiBhcyBzZXREb2MsIEhmIGFzIHNldEluZGV4Q29uZmlndXJhdGlvbiwgeCBhcyBzZXRMb2dMZXZlbCwgY2YgYXMgc25hcHNob3RFcXVhbCwgRmwgYXMgc3RhcnRBZnRlciwgT2wgYXMgc3RhcnRBdCwgWWwgYXMgc3VtLCAkaCBhcyB0ZXJtaW5hdGUsIGdmIGFzIHVwZGF0ZURvYywgTmggYXMgd2FpdEZvclBlbmRpbmdXcml0ZXMsIGJsIGFzIHdoZXJlLCBXZiBhcyB3cml0ZUJhdGNoIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiY29uc3QgaW5zdGFuY2VPZkFueSA9IChvYmplY3QsIGNvbnN0cnVjdG9ycykgPT4gY29uc3RydWN0b3JzLnNvbWUoKGMpID0+IG9iamVjdCBpbnN0YW5jZW9mIGMpO1xuXG5sZXQgaWRiUHJveHlhYmxlVHlwZXM7XG5sZXQgY3Vyc29yQWR2YW5jZU1ldGhvZHM7XG4vLyBUaGlzIGlzIGEgZnVuY3Rpb24gdG8gcHJldmVudCBpdCB0aHJvd2luZyB1cCBpbiBub2RlIGVudmlyb25tZW50cy5cbmZ1bmN0aW9uIGdldElkYlByb3h5YWJsZVR5cGVzKCkge1xuICAgIHJldHVybiAoaWRiUHJveHlhYmxlVHlwZXMgfHxcbiAgICAgICAgKGlkYlByb3h5YWJsZVR5cGVzID0gW1xuICAgICAgICAgICAgSURCRGF0YWJhc2UsXG4gICAgICAgICAgICBJREJPYmplY3RTdG9yZSxcbiAgICAgICAgICAgIElEQkluZGV4LFxuICAgICAgICAgICAgSURCQ3Vyc29yLFxuICAgICAgICAgICAgSURCVHJhbnNhY3Rpb24sXG4gICAgICAgIF0pKTtcbn1cbi8vIFRoaXMgaXMgYSBmdW5jdGlvbiB0byBwcmV2ZW50IGl0IHRocm93aW5nIHVwIGluIG5vZGUgZW52aXJvbm1lbnRzLlxuZnVuY3Rpb24gZ2V0Q3Vyc29yQWR2YW5jZU1ldGhvZHMoKSB7XG4gICAgcmV0dXJuIChjdXJzb3JBZHZhbmNlTWV0aG9kcyB8fFxuICAgICAgICAoY3Vyc29yQWR2YW5jZU1ldGhvZHMgPSBbXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmFkdmFuY2UsXG4gICAgICAgICAgICBJREJDdXJzb3IucHJvdG90eXBlLmNvbnRpbnVlLFxuICAgICAgICAgICAgSURCQ3Vyc29yLnByb3RvdHlwZS5jb250aW51ZVByaW1hcnlLZXksXG4gICAgICAgIF0pKTtcbn1cbmNvbnN0IGN1cnNvclJlcXVlc3RNYXAgPSBuZXcgV2Vha01hcCgpO1xuY29uc3QgdHJhbnNhY3Rpb25Eb25lTWFwID0gbmV3IFdlYWtNYXAoKTtcbmNvbnN0IHRyYW5zYWN0aW9uU3RvcmVOYW1lc01hcCA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCB0cmFuc2Zvcm1DYWNoZSA9IG5ldyBXZWFrTWFwKCk7XG5jb25zdCByZXZlcnNlVHJhbnNmb3JtQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xuZnVuY3Rpb24gcHJvbWlzaWZ5UmVxdWVzdChyZXF1ZXN0KSB7XG4gICAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgY29uc3QgdW5saXN0ZW4gPSAoKSA9PiB7XG4gICAgICAgICAgICByZXF1ZXN0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3N1Y2Nlc3MnLCBzdWNjZXNzKTtcbiAgICAgICAgICAgIHJlcXVlc3QucmVtb3ZlRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSAoKSA9PiB7XG4gICAgICAgICAgICByZXNvbHZlKHdyYXAocmVxdWVzdC5yZXN1bHQpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHJlcXVlc3QuZXJyb3IpO1xuICAgICAgICAgICAgdW5saXN0ZW4oKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdzdWNjZXNzJywgc3VjY2Vzcyk7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcignZXJyb3InLCBlcnJvcik7XG4gICAgfSk7XG4gICAgcHJvbWlzZVxuICAgICAgICAudGhlbigodmFsdWUpID0+IHtcbiAgICAgICAgLy8gU2luY2UgY3Vyc29yaW5nIHJldXNlcyB0aGUgSURCUmVxdWVzdCAoKnNpZ2gqKSwgd2UgY2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbFxuICAgICAgICAvLyAoc2VlIHdyYXBGdW5jdGlvbikuXG4gICAgICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQkN1cnNvcikge1xuICAgICAgICAgICAgY3Vyc29yUmVxdWVzdE1hcC5zZXQodmFsdWUsIHJlcXVlc3QpO1xuICAgICAgICB9XG4gICAgICAgIC8vIENhdGNoaW5nIHRvIGF2b2lkIFwiVW5jYXVnaHQgUHJvbWlzZSBleGNlcHRpb25zXCJcbiAgICB9KVxuICAgICAgICAuY2F0Y2goKCkgPT4geyB9KTtcbiAgICAvLyBUaGlzIG1hcHBpbmcgZXhpc3RzIGluIHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBidXQgZG9lc24ndCBkb2Vzbid0IGV4aXN0IGluIHRyYW5zZm9ybUNhY2hlLiBUaGlzXG4gICAgLy8gaXMgYmVjYXVzZSB3ZSBjcmVhdGUgbWFueSBwcm9taXNlcyBmcm9tIGEgc2luZ2xlIElEQlJlcXVlc3QuXG4gICAgcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLnNldChwcm9taXNlLCByZXF1ZXN0KTtcbiAgICByZXR1cm4gcHJvbWlzZTtcbn1cbmZ1bmN0aW9uIGNhY2hlRG9uZVByb21pc2VGb3JUcmFuc2FjdGlvbih0eCkge1xuICAgIC8vIEVhcmx5IGJhaWwgaWYgd2UndmUgYWxyZWFkeSBjcmVhdGVkIGEgZG9uZSBwcm9taXNlIGZvciB0aGlzIHRyYW5zYWN0aW9uLlxuICAgIGlmICh0cmFuc2FjdGlvbkRvbmVNYXAuaGFzKHR4KSlcbiAgICAgICAgcmV0dXJuO1xuICAgIGNvbnN0IGRvbmUgPSBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIGNvbnN0IHVubGlzdGVuID0gKCkgPT4ge1xuICAgICAgICAgICAgdHgucmVtb3ZlRXZlbnRMaXN0ZW5lcignY29tcGxldGUnLCBjb21wbGV0ZSk7XG4gICAgICAgICAgICB0eC5yZW1vdmVFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgICAgIHR4LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgZXJyb3IpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zdCBjb21wbGV0ZSA9ICgpID0+IHtcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIGNvbnN0IGVycm9yID0gKCkgPT4ge1xuICAgICAgICAgICAgcmVqZWN0KHR4LmVycm9yIHx8IG5ldyBET01FeGNlcHRpb24oJ0Fib3J0RXJyb3InLCAnQWJvcnRFcnJvcicpKTtcbiAgICAgICAgICAgIHVubGlzdGVuKCk7XG4gICAgICAgIH07XG4gICAgICAgIHR4LmFkZEV2ZW50TGlzdGVuZXIoJ2NvbXBsZXRlJywgY29tcGxldGUpO1xuICAgICAgICB0eC5hZGRFdmVudExpc3RlbmVyKCdlcnJvcicsIGVycm9yKTtcbiAgICAgICAgdHguYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCBlcnJvcik7XG4gICAgfSk7XG4gICAgLy8gQ2FjaGUgaXQgZm9yIGxhdGVyIHJldHJpZXZhbC5cbiAgICB0cmFuc2FjdGlvbkRvbmVNYXAuc2V0KHR4LCBkb25lKTtcbn1cbmxldCBpZGJQcm94eVRyYXBzID0ge1xuICAgIGdldCh0YXJnZXQsIHByb3AsIHJlY2VpdmVyKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbikge1xuICAgICAgICAgICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgdHJhbnNhY3Rpb24uZG9uZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnZG9uZScpXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRyYW5zYWN0aW9uRG9uZU1hcC5nZXQodGFyZ2V0KTtcbiAgICAgICAgICAgIC8vIFBvbHlmaWxsIGZvciBvYmplY3RTdG9yZU5hbWVzIGJlY2F1c2Ugb2YgRWRnZS5cbiAgICAgICAgICAgIGlmIChwcm9wID09PSAnb2JqZWN0U3RvcmVOYW1lcycpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGFyZ2V0Lm9iamVjdFN0b3JlTmFtZXMgfHwgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLmdldCh0YXJnZXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gTWFrZSB0eC5zdG9yZSByZXR1cm4gdGhlIG9ubHkgc3RvcmUgaW4gdGhlIHRyYW5zYWN0aW9uLCBvciB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIG1hbnkuXG4gICAgICAgICAgICBpZiAocHJvcCA9PT0gJ3N0b3JlJykge1xuICAgICAgICAgICAgICAgIHJldHVybiByZWNlaXZlci5vYmplY3RTdG9yZU5hbWVzWzFdXG4gICAgICAgICAgICAgICAgICAgID8gdW5kZWZpbmVkXG4gICAgICAgICAgICAgICAgICAgIDogcmVjZWl2ZXIub2JqZWN0U3RvcmUocmVjZWl2ZXIub2JqZWN0U3RvcmVOYW1lc1swXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy8gRWxzZSB0cmFuc2Zvcm0gd2hhdGV2ZXIgd2UgZ2V0IGJhY2suXG4gICAgICAgIHJldHVybiB3cmFwKHRhcmdldFtwcm9wXSk7XG4gICAgfSxcbiAgICBzZXQodGFyZ2V0LCBwcm9wLCB2YWx1ZSkge1xuICAgICAgICB0YXJnZXRbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSxcbiAgICBoYXModGFyZ2V0LCBwcm9wKSB7XG4gICAgICAgIGlmICh0YXJnZXQgaW5zdGFuY2VvZiBJREJUcmFuc2FjdGlvbiAmJlxuICAgICAgICAgICAgKHByb3AgPT09ICdkb25lJyB8fCBwcm9wID09PSAnc3RvcmUnKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHByb3AgaW4gdGFyZ2V0O1xuICAgIH0sXG59O1xuZnVuY3Rpb24gcmVwbGFjZVRyYXBzKGNhbGxiYWNrKSB7XG4gICAgaWRiUHJveHlUcmFwcyA9IGNhbGxiYWNrKGlkYlByb3h5VHJhcHMpO1xufVxuZnVuY3Rpb24gd3JhcEZ1bmN0aW9uKGZ1bmMpIHtcbiAgICAvLyBEdWUgdG8gZXhwZWN0ZWQgb2JqZWN0IGVxdWFsaXR5ICh3aGljaCBpcyBlbmZvcmNlZCBieSB0aGUgY2FjaGluZyBpbiBgd3JhcGApLCB3ZVxuICAgIC8vIG9ubHkgY3JlYXRlIG9uZSBuZXcgZnVuYyBwZXIgZnVuYy5cbiAgICAvLyBFZGdlIGRvZXNuJ3Qgc3VwcG9ydCBvYmplY3RTdG9yZU5hbWVzIChib29vKSwgc28gd2UgcG9seWZpbGwgaXQgaGVyZS5cbiAgICBpZiAoZnVuYyA9PT0gSURCRGF0YWJhc2UucHJvdG90eXBlLnRyYW5zYWN0aW9uICYmXG4gICAgICAgICEoJ29iamVjdFN0b3JlTmFtZXMnIGluIElEQlRyYW5zYWN0aW9uLnByb3RvdHlwZSkpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChzdG9yZU5hbWVzLCAuLi5hcmdzKSB7XG4gICAgICAgICAgICBjb25zdCB0eCA9IGZ1bmMuY2FsbCh1bndyYXAodGhpcyksIHN0b3JlTmFtZXMsIC4uLmFyZ3MpO1xuICAgICAgICAgICAgdHJhbnNhY3Rpb25TdG9yZU5hbWVzTWFwLnNldCh0eCwgc3RvcmVOYW1lcy5zb3J0ID8gc3RvcmVOYW1lcy5zb3J0KCkgOiBbc3RvcmVOYW1lc10pO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAodHgpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICAvLyBDdXJzb3IgbWV0aG9kcyBhcmUgc3BlY2lhbCwgYXMgdGhlIGJlaGF2aW91ciBpcyBhIGxpdHRsZSBtb3JlIGRpZmZlcmVudCB0byBzdGFuZGFyZCBJREIuIEluXG4gICAgLy8gSURCLCB5b3UgYWR2YW5jZSB0aGUgY3Vyc29yIGFuZCB3YWl0IGZvciBhIG5ldyAnc3VjY2Vzcycgb24gdGhlIElEQlJlcXVlc3QgdGhhdCBnYXZlIHlvdSB0aGVcbiAgICAvLyBjdXJzb3IuIEl0J3Mga2luZGEgbGlrZSBhIHByb21pc2UgdGhhdCBjYW4gcmVzb2x2ZSB3aXRoIG1hbnkgdmFsdWVzLiBUaGF0IGRvZXNuJ3QgbWFrZSBzZW5zZVxuICAgIC8vIHdpdGggcmVhbCBwcm9taXNlcywgc28gZWFjaCBhZHZhbmNlIG1ldGhvZHMgcmV0dXJucyBhIG5ldyBwcm9taXNlIGZvciB0aGUgY3Vyc29yIG9iamVjdCwgb3JcbiAgICAvLyB1bmRlZmluZWQgaWYgdGhlIGVuZCBvZiB0aGUgY3Vyc29yIGhhcyBiZWVuIHJlYWNoZWQuXG4gICAgaWYgKGdldEN1cnNvckFkdmFuY2VNZXRob2RzKCkuaW5jbHVkZXMoZnVuYykpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uICguLi5hcmdzKSB7XG4gICAgICAgICAgICAvLyBDYWxsaW5nIHRoZSBvcmlnaW5hbCBmdW5jdGlvbiB3aXRoIHRoZSBwcm94eSBhcyAndGhpcycgY2F1c2VzIElMTEVHQUwgSU5WT0NBVElPTiwgc28gd2UgdXNlXG4gICAgICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICAgICAgZnVuYy5hcHBseSh1bndyYXAodGhpcyksIGFyZ3MpO1xuICAgICAgICAgICAgcmV0dXJuIHdyYXAoY3Vyc29yUmVxdWVzdE1hcC5nZXQodGhpcykpO1xuICAgICAgICB9O1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gKC4uLmFyZ3MpIHtcbiAgICAgICAgLy8gQ2FsbGluZyB0aGUgb3JpZ2luYWwgZnVuY3Rpb24gd2l0aCB0aGUgcHJveHkgYXMgJ3RoaXMnIGNhdXNlcyBJTExFR0FMIElOVk9DQVRJT04sIHNvIHdlIHVzZVxuICAgICAgICAvLyB0aGUgb3JpZ2luYWwgb2JqZWN0LlxuICAgICAgICByZXR1cm4gd3JhcChmdW5jLmFwcGx5KHVud3JhcCh0aGlzKSwgYXJncykpO1xuICAgIH07XG59XG5mdW5jdGlvbiB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJylcbiAgICAgICAgcmV0dXJuIHdyYXBGdW5jdGlvbih2YWx1ZSk7XG4gICAgLy8gVGhpcyBkb2Vzbid0IHJldHVybiwgaXQganVzdCBjcmVhdGVzIGEgJ2RvbmUnIHByb21pc2UgZm9yIHRoZSB0cmFuc2FjdGlvbixcbiAgICAvLyB3aGljaCBpcyBsYXRlciByZXR1cm5lZCBmb3IgdHJhbnNhY3Rpb24uZG9uZSAoc2VlIGlkYk9iamVjdEhhbmRsZXIpLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlRyYW5zYWN0aW9uKVxuICAgICAgICBjYWNoZURvbmVQcm9taXNlRm9yVHJhbnNhY3Rpb24odmFsdWUpO1xuICAgIGlmIChpbnN0YW5jZU9mQW55KHZhbHVlLCBnZXRJZGJQcm94eWFibGVUeXBlcygpKSlcbiAgICAgICAgcmV0dXJuIG5ldyBQcm94eSh2YWx1ZSwgaWRiUHJveHlUcmFwcyk7XG4gICAgLy8gUmV0dXJuIHRoZSBzYW1lIHZhbHVlIGJhY2sgaWYgd2UncmUgbm90IGdvaW5nIHRvIHRyYW5zZm9ybSBpdC5cbiAgICByZXR1cm4gdmFsdWU7XG59XG5mdW5jdGlvbiB3cmFwKHZhbHVlKSB7XG4gICAgLy8gV2Ugc29tZXRpbWVzIGdlbmVyYXRlIG11bHRpcGxlIHByb21pc2VzIGZyb20gYSBzaW5nbGUgSURCUmVxdWVzdCAoZWcgd2hlbiBjdXJzb3JpbmcpLCBiZWNhdXNlXG4gICAgLy8gSURCIGlzIHdlaXJkIGFuZCBhIHNpbmdsZSBJREJSZXF1ZXN0IGNhbiB5aWVsZCBtYW55IHJlc3BvbnNlcywgc28gdGhlc2UgY2FuJ3QgYmUgY2FjaGVkLlxuICAgIGlmICh2YWx1ZSBpbnN0YW5jZW9mIElEQlJlcXVlc3QpXG4gICAgICAgIHJldHVybiBwcm9taXNpZnlSZXF1ZXN0KHZhbHVlKTtcbiAgICAvLyBJZiB3ZSd2ZSBhbHJlYWR5IHRyYW5zZm9ybWVkIHRoaXMgdmFsdWUgYmVmb3JlLCByZXVzZSB0aGUgdHJhbnNmb3JtZWQgdmFsdWUuXG4gICAgLy8gVGhpcyBpcyBmYXN0ZXIsIGJ1dCBpdCBhbHNvIHByb3ZpZGVzIG9iamVjdCBlcXVhbGl0eS5cbiAgICBpZiAodHJhbnNmb3JtQ2FjaGUuaGFzKHZhbHVlKSlcbiAgICAgICAgcmV0dXJuIHRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG4gICAgY29uc3QgbmV3VmFsdWUgPSB0cmFuc2Zvcm1DYWNoYWJsZVZhbHVlKHZhbHVlKTtcbiAgICAvLyBOb3QgYWxsIHR5cGVzIGFyZSB0cmFuc2Zvcm1lZC5cbiAgICAvLyBUaGVzZSBtYXkgYmUgcHJpbWl0aXZlIHR5cGVzLCBzbyB0aGV5IGNhbid0IGJlIFdlYWtNYXAga2V5cy5cbiAgICBpZiAobmV3VmFsdWUgIT09IHZhbHVlKSB7XG4gICAgICAgIHRyYW5zZm9ybUNhY2hlLnNldCh2YWx1ZSwgbmV3VmFsdWUpO1xuICAgICAgICByZXZlcnNlVHJhbnNmb3JtQ2FjaGUuc2V0KG5ld1ZhbHVlLCB2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBuZXdWYWx1ZTtcbn1cbmNvbnN0IHVud3JhcCA9ICh2YWx1ZSkgPT4gcmV2ZXJzZVRyYW5zZm9ybUNhY2hlLmdldCh2YWx1ZSk7XG5cbmV4cG9ydCB7IHJldmVyc2VUcmFuc2Zvcm1DYWNoZSBhcyBhLCBpbnN0YW5jZU9mQW55IGFzIGksIHJlcGxhY2VUcmFwcyBhcyByLCB1bndyYXAgYXMgdSwgd3JhcCBhcyB3IH07XG4iLCJpbXBvcnQgeyB3IGFzIHdyYXAsIHIgYXMgcmVwbGFjZVRyYXBzIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5leHBvcnQgeyB1IGFzIHVud3JhcCwgdyBhcyB3cmFwIH0gZnJvbSAnLi93cmFwLWlkYi12YWx1ZS5qcyc7XG5cbi8qKlxuICogT3BlbiBhIGRhdGFiYXNlLlxuICpcbiAqIEBwYXJhbSBuYW1lIE5hbWUgb2YgdGhlIGRhdGFiYXNlLlxuICogQHBhcmFtIHZlcnNpb24gU2NoZW1hIHZlcnNpb24uXG4gKiBAcGFyYW0gY2FsbGJhY2tzIEFkZGl0aW9uYWwgY2FsbGJhY2tzLlxuICovXG5mdW5jdGlvbiBvcGVuREIobmFtZSwgdmVyc2lvbiwgeyBibG9ja2VkLCB1cGdyYWRlLCBibG9ja2luZywgdGVybWluYXRlZCB9ID0ge30pIHtcbiAgICBjb25zdCByZXF1ZXN0ID0gaW5kZXhlZERCLm9wZW4obmFtZSwgdmVyc2lvbik7XG4gICAgY29uc3Qgb3BlblByb21pc2UgPSB3cmFwKHJlcXVlc3QpO1xuICAgIGlmICh1cGdyYWRlKSB7XG4gICAgICAgIHJlcXVlc3QuYWRkRXZlbnRMaXN0ZW5lcigndXBncmFkZW5lZWRlZCcsIChldmVudCkgPT4ge1xuICAgICAgICAgICAgdXBncmFkZSh3cmFwKHJlcXVlc3QucmVzdWx0KSwgZXZlbnQub2xkVmVyc2lvbiwgZXZlbnQubmV3VmVyc2lvbiwgd3JhcChyZXF1ZXN0LnRyYW5zYWN0aW9uKSwgZXZlbnQpO1xuICAgICAgICB9KTtcbiAgICB9XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50Lm5ld1ZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIG9wZW5Qcm9taXNlXG4gICAgICAgIC50aGVuKChkYikgPT4ge1xuICAgICAgICBpZiAodGVybWluYXRlZClcbiAgICAgICAgICAgIGRiLmFkZEV2ZW50TGlzdGVuZXIoJ2Nsb3NlJywgKCkgPT4gdGVybWluYXRlZCgpKTtcbiAgICAgICAgaWYgKGJsb2NraW5nKSB7XG4gICAgICAgICAgICBkYi5hZGRFdmVudExpc3RlbmVyKCd2ZXJzaW9uY2hhbmdlJywgKGV2ZW50KSA9PiBibG9ja2luZyhldmVudC5vbGRWZXJzaW9uLCBldmVudC5uZXdWZXJzaW9uLCBldmVudCkpO1xuICAgICAgICB9XG4gICAgfSlcbiAgICAgICAgLmNhdGNoKCgpID0+IHsgfSk7XG4gICAgcmV0dXJuIG9wZW5Qcm9taXNlO1xufVxuLyoqXG4gKiBEZWxldGUgYSBkYXRhYmFzZS5cbiAqXG4gKiBAcGFyYW0gbmFtZSBOYW1lIG9mIHRoZSBkYXRhYmFzZS5cbiAqL1xuZnVuY3Rpb24gZGVsZXRlREIobmFtZSwgeyBibG9ja2VkIH0gPSB7fSkge1xuICAgIGNvbnN0IHJlcXVlc3QgPSBpbmRleGVkREIuZGVsZXRlRGF0YWJhc2UobmFtZSk7XG4gICAgaWYgKGJsb2NrZWQpIHtcbiAgICAgICAgcmVxdWVzdC5hZGRFdmVudExpc3RlbmVyKCdibG9ja2VkJywgKGV2ZW50KSA9PiBibG9ja2VkKFxuICAgICAgICAvLyBDYXN0aW5nIGR1ZSB0byBodHRwczovL2dpdGh1Yi5jb20vbWljcm9zb2Z0L1R5cGVTY3JpcHQtRE9NLWxpYi1nZW5lcmF0b3IvcHVsbC8xNDA1XG4gICAgICAgIGV2ZW50Lm9sZFZlcnNpb24sIGV2ZW50KSk7XG4gICAgfVxuICAgIHJldHVybiB3cmFwKHJlcXVlc3QpLnRoZW4oKCkgPT4gdW5kZWZpbmVkKTtcbn1cblxuY29uc3QgcmVhZE1ldGhvZHMgPSBbJ2dldCcsICdnZXRLZXknLCAnZ2V0QWxsJywgJ2dldEFsbEtleXMnLCAnY291bnQnXTtcbmNvbnN0IHdyaXRlTWV0aG9kcyA9IFsncHV0JywgJ2FkZCcsICdkZWxldGUnLCAnY2xlYXInXTtcbmNvbnN0IGNhY2hlZE1ldGhvZHMgPSBuZXcgTWFwKCk7XG5mdW5jdGlvbiBnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB7XG4gICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSURCRGF0YWJhc2UgJiZcbiAgICAgICAgIShwcm9wIGluIHRhcmdldCkgJiZcbiAgICAgICAgdHlwZW9mIHByb3AgPT09ICdzdHJpbmcnKSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjYWNoZWRNZXRob2RzLmdldChwcm9wKSlcbiAgICAgICAgcmV0dXJuIGNhY2hlZE1ldGhvZHMuZ2V0KHByb3ApO1xuICAgIGNvbnN0IHRhcmdldEZ1bmNOYW1lID0gcHJvcC5yZXBsYWNlKC9Gcm9tSW5kZXgkLywgJycpO1xuICAgIGNvbnN0IHVzZUluZGV4ID0gcHJvcCAhPT0gdGFyZ2V0RnVuY05hbWU7XG4gICAgY29uc3QgaXNXcml0ZSA9IHdyaXRlTWV0aG9kcy5pbmNsdWRlcyh0YXJnZXRGdW5jTmFtZSk7XG4gICAgaWYgKFxuICAgIC8vIEJhaWwgaWYgdGhlIHRhcmdldCBkb2Vzbid0IGV4aXN0IG9uIHRoZSB0YXJnZXQuIEVnLCBnZXRBbGwgaXNuJ3QgaW4gRWRnZS5cbiAgICAhKHRhcmdldEZ1bmNOYW1lIGluICh1c2VJbmRleCA/IElEQkluZGV4IDogSURCT2JqZWN0U3RvcmUpLnByb3RvdHlwZSkgfHxcbiAgICAgICAgIShpc1dyaXRlIHx8IHJlYWRNZXRob2RzLmluY2x1ZGVzKHRhcmdldEZ1bmNOYW1lKSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBtZXRob2QgPSBhc3luYyBmdW5jdGlvbiAoc3RvcmVOYW1lLCAuLi5hcmdzKSB7XG4gICAgICAgIC8vIGlzV3JpdGUgPyAncmVhZHdyaXRlJyA6IHVuZGVmaW5lZCBnemlwcHMgYmV0dGVyLCBidXQgZmFpbHMgaW4gRWRnZSA6KFxuICAgICAgICBjb25zdCB0eCA9IHRoaXMudHJhbnNhY3Rpb24oc3RvcmVOYW1lLCBpc1dyaXRlID8gJ3JlYWR3cml0ZScgOiAncmVhZG9ubHknKTtcbiAgICAgICAgbGV0IHRhcmdldCA9IHR4LnN0b3JlO1xuICAgICAgICBpZiAodXNlSW5kZXgpXG4gICAgICAgICAgICB0YXJnZXQgPSB0YXJnZXQuaW5kZXgoYXJncy5zaGlmdCgpKTtcbiAgICAgICAgLy8gTXVzdCByZWplY3QgaWYgb3AgcmVqZWN0cy5cbiAgICAgICAgLy8gSWYgaXQncyBhIHdyaXRlIG9wZXJhdGlvbiwgbXVzdCByZWplY3QgaWYgdHguZG9uZSByZWplY3RzLlxuICAgICAgICAvLyBNdXN0IHJlamVjdCB3aXRoIG9wIHJlamVjdGlvbiBmaXJzdC5cbiAgICAgICAgLy8gTXVzdCByZXNvbHZlIHdpdGggb3AgdmFsdWUuXG4gICAgICAgIC8vIE11c3QgaGFuZGxlIGJvdGggcHJvbWlzZXMgKG5vIHVuaGFuZGxlZCByZWplY3Rpb25zKVxuICAgICAgICByZXR1cm4gKGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgICAgIHRhcmdldFt0YXJnZXRGdW5jTmFtZV0oLi4uYXJncyksXG4gICAgICAgICAgICBpc1dyaXRlICYmIHR4LmRvbmUsXG4gICAgICAgIF0pKVswXTtcbiAgICB9O1xuICAgIGNhY2hlZE1ldGhvZHMuc2V0KHByb3AsIG1ldGhvZCk7XG4gICAgcmV0dXJuIG1ldGhvZDtcbn1cbnJlcGxhY2VUcmFwcygob2xkVHJhcHMpID0+ICh7XG4gICAgLi4ub2xkVHJhcHMsXG4gICAgZ2V0OiAodGFyZ2V0LCBwcm9wLCByZWNlaXZlcikgPT4gZ2V0TWV0aG9kKHRhcmdldCwgcHJvcCkgfHwgb2xkVHJhcHMuZ2V0KHRhcmdldCwgcHJvcCwgcmVjZWl2ZXIpLFxuICAgIGhhczogKHRhcmdldCwgcHJvcCkgPT4gISFnZXRNZXRob2QodGFyZ2V0LCBwcm9wKSB8fCBvbGRUcmFwcy5oYXModGFyZ2V0LCBwcm9wKSxcbn0pKTtcblxuZXhwb3J0IHsgZGVsZXRlREIsIG9wZW5EQiB9O1xuIiwiaW1wb3J0IHsgQ29tcG9uZW50LCBDb21wb25lbnRDb250YWluZXIgfSBmcm9tICdAZmlyZWJhc2UvY29tcG9uZW50JztcbmltcG9ydCB7IExvZ2dlciwgc2V0VXNlckxvZ0hhbmRsZXIsIHNldExvZ0xldmVsIGFzIHNldExvZ0xldmVsJDEgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcbmltcG9ydCB7IEVycm9yRmFjdG9yeSwgZ2V0RGVmYXVsdEFwcENvbmZpZywgZGVlcEVxdWFsLCBGaXJlYmFzZUVycm9yLCBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZywgaXNJbmRleGVkREJBdmFpbGFibGUsIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5leHBvcnQgeyBGaXJlYmFzZUVycm9yIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgb3BlbkRCIH0gZnJvbSAnaWRiJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgUGxhdGZvcm1Mb2dnZXJTZXJ2aWNlSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIpIHtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgIH1cclxuICAgIC8vIEluIGluaXRpYWwgaW1wbGVtZW50YXRpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgYnkgaW5zdGFsbGF0aW9ucyBvblxyXG4gICAgLy8gYXV0aCB0b2tlbiByZWZyZXNoLCBhbmQgaW5zdGFsbGF0aW9ucyB3aWxsIHNlbmQgdGhpcyBzdHJpbmcuXHJcbiAgICBnZXRQbGF0Zm9ybUluZm9TdHJpbmcoKSB7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJzID0gdGhpcy5jb250YWluZXIuZ2V0UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgLy8gTG9vcCB0aHJvdWdoIHByb3ZpZGVycyBhbmQgZ2V0IGxpYnJhcnkvdmVyc2lvbiBwYWlycyBmcm9tIGFueSB0aGF0IGFyZVxyXG4gICAgICAgIC8vIHZlcnNpb24gY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXJzXHJcbiAgICAgICAgICAgIC5tYXAocHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICBpZiAoaXNWZXJzaW9uU2VydmljZVByb3ZpZGVyKHByb3ZpZGVyKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2VydmljZSA9IHByb3ZpZGVyLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3NlcnZpY2UubGlicmFyeX0vJHtzZXJ2aWNlLnZlcnNpb259YDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZpbHRlcihsb2dTdHJpbmcgPT4gbG9nU3RyaW5nKVxyXG4gICAgICAgICAgICAuam9pbignICcpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gcHJvdmlkZXIgY2hlY2sgaWYgdGhpcyBwcm92aWRlciBwcm92aWRlcyBhIFZlcnNpb25TZXJ2aWNlXHJcbiAqXHJcbiAqIE5PVEU6IFVzaW5nIFByb3ZpZGVyPCdhcHAtdmVyc2lvbic+IGlzIGEgaGFjayB0byBpbmRpY2F0ZSB0aGF0IHRoZSBwcm92aWRlclxyXG4gKiBwcm92aWRlcyBWZXJzaW9uU2VydmljZS4gVGhlIHByb3ZpZGVyIGlzIG5vdCBuZWNlc3NhcmlseSBhICdhcHAtdmVyc2lvbidcclxuICogcHJvdmlkZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1ZlcnNpb25TZXJ2aWNlUHJvdmlkZXIocHJvdmlkZXIpIHtcclxuICAgIGNvbnN0IGNvbXBvbmVudCA9IHByb3ZpZGVyLmdldENvbXBvbmVudCgpO1xyXG4gICAgcmV0dXJuIChjb21wb25lbnQgPT09IG51bGwgfHwgY29tcG9uZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjb21wb25lbnQudHlwZSkgPT09IFwiVkVSU0lPTlwiIC8qIENvbXBvbmVudFR5cGUuVkVSU0lPTiAqLztcclxufVxuXG5jb25zdCBuYW1lJG8gPSBcIkBmaXJlYmFzZS9hcHBcIjtcbmNvbnN0IHZlcnNpb24kMSA9IFwiMC45LjEzXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAnKTtcblxuY29uc3QgbmFtZSRuID0gXCJAZmlyZWJhc2UvYXBwLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJG0gPSBcIkBmaXJlYmFzZS9hbmFseXRpY3MtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkbCA9IFwiQGZpcmViYXNlL2FuYWx5dGljc1wiO1xuXG5jb25zdCBuYW1lJGsgPSBcIkBmaXJlYmFzZS9hcHAtY2hlY2stY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkaiA9IFwiQGZpcmViYXNlL2FwcC1jaGVja1wiO1xuXG5jb25zdCBuYW1lJGkgPSBcIkBmaXJlYmFzZS9hdXRoXCI7XG5cbmNvbnN0IG5hbWUkaCA9IFwiQGZpcmViYXNlL2F1dGgtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkZyA9IFwiQGZpcmViYXNlL2RhdGFiYXNlXCI7XG5cbmNvbnN0IG5hbWUkZiA9IFwiQGZpcmViYXNlL2RhdGFiYXNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGUgPSBcIkBmaXJlYmFzZS9mdW5jdGlvbnNcIjtcblxuY29uc3QgbmFtZSRkID0gXCJAZmlyZWJhc2UvZnVuY3Rpb25zLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJGMgPSBcIkBmaXJlYmFzZS9pbnN0YWxsYXRpb25zXCI7XG5cbmNvbnN0IG5hbWUkYiA9IFwiQGZpcmViYXNlL2luc3RhbGxhdGlvbnMtY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkYSA9IFwiQGZpcmViYXNlL21lc3NhZ2luZ1wiO1xuXG5jb25zdCBuYW1lJDkgPSBcIkBmaXJlYmFzZS9tZXNzYWdpbmctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkOCA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlXCI7XG5cbmNvbnN0IG5hbWUkNyA9IFwiQGZpcmViYXNlL3BlcmZvcm1hbmNlLWNvbXBhdFwiO1xuXG5jb25zdCBuYW1lJDYgPSBcIkBmaXJlYmFzZS9yZW1vdGUtY29uZmlnXCI7XG5cbmNvbnN0IG5hbWUkNSA9IFwiQGZpcmViYXNlL3JlbW90ZS1jb25maWctY29tcGF0XCI7XG5cbmNvbnN0IG5hbWUkNCA9IFwiQGZpcmViYXNlL3N0b3JhZ2VcIjtcblxuY29uc3QgbmFtZSQzID0gXCJAZmlyZWJhc2Uvc3RvcmFnZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSQyID0gXCJAZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IG5hbWUkMSA9IFwiQGZpcmViYXNlL2ZpcmVzdG9yZS1jb21wYXRcIjtcblxuY29uc3QgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbmNvbnN0IHZlcnNpb24gPSBcIjkuMjMuMFwiO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgYXBwIG5hbWVcclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBERUZBVUxUX0VOVFJZX05BTUUgPSAnW0RFRkFVTFRdJztcclxuY29uc3QgUExBVEZPUk1fTE9HX1NUUklORyA9IHtcclxuICAgIFtuYW1lJG9dOiAnZmlyZS1jb3JlJyxcclxuICAgIFtuYW1lJG5dOiAnZmlyZS1jb3JlLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRsXTogJ2ZpcmUtYW5hbHl0aWNzJyxcclxuICAgIFtuYW1lJG1dOiAnZmlyZS1hbmFseXRpY3MtY29tcGF0JyxcclxuICAgIFtuYW1lJGpdOiAnZmlyZS1hcHAtY2hlY2snLFxyXG4gICAgW25hbWUka106ICdmaXJlLWFwcC1jaGVjay1jb21wYXQnLFxyXG4gICAgW25hbWUkaV06ICdmaXJlLWF1dGgnLFxyXG4gICAgW25hbWUkaF06ICdmaXJlLWF1dGgtY29tcGF0JyxcclxuICAgIFtuYW1lJGddOiAnZmlyZS1ydGRiJyxcclxuICAgIFtuYW1lJGZdOiAnZmlyZS1ydGRiLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRlXTogJ2ZpcmUtZm4nLFxyXG4gICAgW25hbWUkZF06ICdmaXJlLWZuLWNvbXBhdCcsXHJcbiAgICBbbmFtZSRjXTogJ2ZpcmUtaWlkJyxcclxuICAgIFtuYW1lJGJdOiAnZmlyZS1paWQtY29tcGF0JyxcclxuICAgIFtuYW1lJGFdOiAnZmlyZS1mY20nLFxyXG4gICAgW25hbWUkOV06ICdmaXJlLWZjbS1jb21wYXQnLFxyXG4gICAgW25hbWUkOF06ICdmaXJlLXBlcmYnLFxyXG4gICAgW25hbWUkN106ICdmaXJlLXBlcmYtY29tcGF0JyxcclxuICAgIFtuYW1lJDZdOiAnZmlyZS1yYycsXHJcbiAgICBbbmFtZSQ1XTogJ2ZpcmUtcmMtY29tcGF0JyxcclxuICAgIFtuYW1lJDRdOiAnZmlyZS1nY3MnLFxyXG4gICAgW25hbWUkM106ICdmaXJlLWdjcy1jb21wYXQnLFxyXG4gICAgW25hbWUkMl06ICdmaXJlLWZzdCcsXHJcbiAgICBbbmFtZSQxXTogJ2ZpcmUtZnN0LWNvbXBhdCcsXHJcbiAgICAnZmlyZS1qcyc6ICdmaXJlLWpzJyxcclxuICAgIFtuYW1lXTogJ2ZpcmUtanMtYWxsJ1xyXG59O1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogQGludGVybmFsXHJcbiAqL1xyXG5jb25zdCBfYXBwcyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIFJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICpcclxuICogQGludGVybmFsXHJcbiAqL1xyXG4vLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG5jb25zdCBfY29tcG9uZW50cyA9IG5ldyBNYXAoKTtcclxuLyoqXHJcbiAqIEBwYXJhbSBjb21wb25lbnQgLSB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhcHAuY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBsb2dnZXIuZGVidWcoYENvbXBvbmVudCAke2NvbXBvbmVudC5uYW1lfSBmYWlsZWQgdG8gcmVnaXN0ZXIgd2l0aCBGaXJlYmFzZUFwcCAke2FwcC5uYW1lfWAsIGUpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChhcHAsIGNvbXBvbmVudCkge1xyXG4gICAgYXBwLmNvbnRhaW5lci5hZGRPck92ZXJ3cml0ZUNvbXBvbmVudChjb21wb25lbnQpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gY29tcG9uZW50IC0gdGhlIGNvbXBvbmVudCB0byByZWdpc3RlclxyXG4gKiBAcmV0dXJucyB3aGV0aGVyIG9yIG5vdCB0aGUgY29tcG9uZW50IGlzIHJlZ2lzdGVyZWQgc3VjY2Vzc2Z1bGx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX3JlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgaWYgKF9jb21wb25lbnRzLmhhcyhjb21wb25lbnROYW1lKSkge1xyXG4gICAgICAgIGxvZ2dlci5kZWJ1ZyhgVGhlcmUgd2VyZSBtdWx0aXBsZSBhdHRlbXB0cyB0byByZWdpc3RlciBjb21wb25lbnQgJHtjb21wb25lbnROYW1lfS5gKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBfY29tcG9uZW50cy5zZXQoY29tcG9uZW50TmFtZSwgY29tcG9uZW50KTtcclxuICAgIC8vIGFkZCB0aGUgY29tcG9uZW50IHRvIGV4aXN0aW5nIGFwcCBpbnN0YW5jZXNcclxuICAgIGZvciAoY29uc3QgYXBwIG9mIF9hcHBzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgX2FkZENvbXBvbmVudChhcHAsIGNvbXBvbmVudCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG4vKipcclxuICpcclxuICogQHBhcmFtIGFwcCAtIEZpcmViYXNlQXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSBuYW1lIC0gc2VydmljZSBuYW1lXHJcbiAqXHJcbiAqIEByZXR1cm5zIHRoZSBwcm92aWRlciBmb3IgdGhlIHNlcnZpY2Ugd2l0aCB0aGUgbWF0Y2hpbmcgbmFtZVxyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpIHtcclxuICAgIGNvbnN0IGhlYXJ0YmVhdENvbnRyb2xsZXIgPSBhcHAuY29udGFpbmVyXHJcbiAgICAgICAgLmdldFByb3ZpZGVyKCdoZWFydGJlYXQnKVxyXG4gICAgICAgIC5nZXRJbW1lZGlhdGUoeyBvcHRpb25hbDogdHJ1ZSB9KTtcclxuICAgIGlmIChoZWFydGJlYXRDb250cm9sbGVyKSB7XHJcbiAgICAgICAgdm9pZCBoZWFydGJlYXRDb250cm9sbGVyLnRyaWdnZXJIZWFydGJlYXQoKTtcclxuICAgIH1cclxuICAgIHJldHVybiBhcHAuY29udGFpbmVyLmdldFByb3ZpZGVyKG5hbWUpO1xyXG59XHJcbi8qKlxyXG4gKlxyXG4gKiBAcGFyYW0gYXBwIC0gRmlyZWJhc2VBcHAgaW5zdGFuY2VcclxuICogQHBhcmFtIG5hbWUgLSBzZXJ2aWNlIG5hbWVcclxuICogQHBhcmFtIGluc3RhbmNlSWRlbnRpZmllciAtIHNlcnZpY2UgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIHRoZSBzZXJ2aWNlIHN1cHBvcnRzIG11bHRpcGxlIGluc3RhbmNlc1xyXG4gKlxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmZ1bmN0aW9uIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UoYXBwLCBuYW1lLCBpbnN0YW5jZUlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgIF9nZXRQcm92aWRlcihhcHAsIG5hbWUpLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxufVxyXG4vKipcclxuICogVGVzdCBvbmx5XHJcbiAqXHJcbiAqIEBpbnRlcm5hbFxyXG4gKi9cclxuZnVuY3Rpb24gX2NsZWFyQ29tcG9uZW50cygpIHtcclxuICAgIF9jb21wb25lbnRzLmNsZWFyKCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgRVJST1JTID0ge1xyXG4gICAgW1wibm8tYXBwXCIgLyogQXBwRXJyb3IuTk9fQVBQICovXTogXCJObyBGaXJlYmFzZSBBcHAgJ3skYXBwTmFtZX0nIGhhcyBiZWVuIGNyZWF0ZWQgLSBcIiArXHJcbiAgICAgICAgJ2NhbGwgaW5pdGlhbGl6ZUFwcCgpIGZpcnN0JyxcclxuICAgIFtcImJhZC1hcHAtbmFtZVwiIC8qIEFwcEVycm9yLkJBRF9BUFBfTkFNRSAqL106IFwiSWxsZWdhbCBBcHAgbmFtZTogJ3skYXBwTmFtZX1cIixcclxuICAgIFtcImR1cGxpY2F0ZS1hcHBcIiAvKiBBcHBFcnJvci5EVVBMSUNBVEVfQVBQICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZXhpc3RzIHdpdGggZGlmZmVyZW50IG9wdGlvbnMgb3IgY29uZmlnXCIsXHJcbiAgICBbXCJhcHAtZGVsZXRlZFwiIC8qIEFwcEVycm9yLkFQUF9ERUxFVEVEICovXTogXCJGaXJlYmFzZSBBcHAgbmFtZWQgJ3skYXBwTmFtZX0nIGFscmVhZHkgZGVsZXRlZFwiLFxyXG4gICAgW1wibm8tb3B0aW9uc1wiIC8qIEFwcEVycm9yLk5PX09QVElPTlMgKi9dOiAnTmVlZCB0byBwcm92aWRlIG9wdGlvbnMsIHdoZW4gbm90IGJlaW5nIGRlcGxveWVkIHRvIGhvc3RpbmcgdmlhIHNvdXJjZS4nLFxyXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nLFxyXG4gICAgW1wiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0xPR19BUkdVTUVOVCAqL106ICdGaXJzdCBhcmd1bWVudCB0byBgb25Mb2dgIG11c3QgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLicsXHJcbiAgICBbXCJpZGItb3BlblwiIC8qIEFwcEVycm9yLklEQl9PUEVOICovXTogJ0Vycm9yIHRocm93biB3aGVuIG9wZW5pbmcgSW5kZXhlZERCLiBPcmlnaW5hbCBlcnJvcjogeyRvcmlnaW5hbEVycm9yTWVzc2FnZX0uJyxcclxuICAgIFtcImlkYi1nZXRcIiAvKiBBcHBFcnJvci5JREJfR0VUICovXTogJ0Vycm9yIHRocm93biB3aGVuIHJlYWRpbmcgZnJvbSBJbmRleGVkREIuIE9yaWdpbmFsIGVycm9yOiB7JG9yaWdpbmFsRXJyb3JNZXNzYWdlfS4nLFxyXG4gICAgW1wiaWRiLXNldFwiIC8qIEFwcEVycm9yLklEQl9XUklURSAqL106ICdFcnJvciB0aHJvd24gd2hlbiB3cml0aW5nIHRvIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LicsXHJcbiAgICBbXCJpZGItZGVsZXRlXCIgLyogQXBwRXJyb3IuSURCX0RFTEVURSAqL106ICdFcnJvciB0aHJvd24gd2hlbiBkZWxldGluZyBmcm9tIEluZGV4ZWREQi4gT3JpZ2luYWwgZXJyb3I6IHskb3JpZ2luYWxFcnJvck1lc3NhZ2V9LidcclxufTtcclxuY29uc3QgRVJST1JfRkFDVE9SWSA9IG5ldyBFcnJvckZhY3RvcnkoJ2FwcCcsICdGaXJlYmFzZScsIEVSUk9SUyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIEZpcmViYXNlQXBwSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcikge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMuX29wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCBvcHRpb25zKTtcclxuICAgICAgICB0aGlzLl9jb25maWcgPSBPYmplY3QuYXNzaWduKHt9LCBjb25maWcpO1xyXG4gICAgICAgIHRoaXMuX25hbWUgPSBjb25maWcubmFtZTtcclxuICAgICAgICB0aGlzLl9hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPVxyXG4gICAgICAgICAgICBjb25maWcuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDb21wb25lbnQobmV3IENvbXBvbmVudCgnYXBwJywgKCkgPT4gdGhpcywgXCJQVUJMSUNcIiAvKiBDb21wb25lbnRUeXBlLlBVQkxJQyAqLykpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICB0aGlzLmNoZWNrRGVzdHJveWVkKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDtcclxuICAgIH1cclxuICAgIHNldCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQodmFsKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHRoaXMuX2F1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIGdldCBuYW1lKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fbmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHRoaXMuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fb3B0aW9ucztcclxuICAgIH1cclxuICAgIGdldCBjb25maWcoKSB7XHJcbiAgICAgICAgdGhpcy5jaGVja0Rlc3Ryb3llZCgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb25maWc7XHJcbiAgICB9XHJcbiAgICBnZXQgY29udGFpbmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9jb250YWluZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNEZWxldGVkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9pc0RlbGV0ZWQ7XHJcbiAgICB9XHJcbiAgICBzZXQgaXNEZWxldGVkKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2lzRGVsZXRlZCA9IHZhbDtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBmdW5jdGlvbiB3aWxsIHRocm93IGFuIEVycm9yIGlmIHRoZSBBcHAgaGFzIGFscmVhZHkgYmVlbiBkZWxldGVkIC1cclxuICAgICAqIHVzZSBiZWZvcmUgcGVyZm9ybWluZyBBUEkgYWN0aW9ucyBvbiB0aGUgQXBwLlxyXG4gICAgICovXHJcbiAgICBjaGVja0Rlc3Ryb3llZCgpIHtcclxuICAgICAgICBpZiAodGhpcy5pc0RlbGV0ZWQpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJhcHAtZGVsZXRlZFwiIC8qIEFwcEVycm9yLkFQUF9ERUxFVEVEICovLCB7IGFwcE5hbWU6IHRoaXMuX25hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBUaGUgY3VycmVudCBTREsgdmVyc2lvbi5cclxuICpcclxuICogQHB1YmxpY1xyXG4gKi9cclxuY29uc3QgU0RLX1ZFUlNJT04gPSB2ZXJzaW9uO1xyXG5mdW5jdGlvbiBpbml0aWFsaXplQXBwKF9vcHRpb25zLCByYXdDb25maWcgPSB7fSkge1xyXG4gICAgbGV0IG9wdGlvbnMgPSBfb3B0aW9ucztcclxuICAgIGlmICh0eXBlb2YgcmF3Q29uZmlnICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgIGNvbnN0IG5hbWUgPSByYXdDb25maWc7XHJcbiAgICAgICAgcmF3Q29uZmlnID0geyBuYW1lIH07XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25maWcgPSBPYmplY3QuYXNzaWduKHsgbmFtZTogREVGQVVMVF9FTlRSWV9OQU1FLCBhdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQ6IGZhbHNlIH0sIHJhd0NvbmZpZyk7XHJcbiAgICBjb25zdCBuYW1lID0gY29uZmlnLm5hbWU7XHJcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnIHx8ICFuYW1lKSB7XHJcbiAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJiYWQtYXBwLW5hbWVcIiAvKiBBcHBFcnJvci5CQURfQVBQX05BTUUgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogU3RyaW5nKG5hbWUpXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvcHRpb25zIHx8IChvcHRpb25zID0gZ2V0RGVmYXVsdEFwcENvbmZpZygpKTtcclxuICAgIGlmICghb3B0aW9ucykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tb3B0aW9uc1wiIC8qIEFwcEVycm9yLk5PX09QVElPTlMgKi8pO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZXhpc3RpbmdBcHAgPSBfYXBwcy5nZXQobmFtZSk7XHJcbiAgICBpZiAoZXhpc3RpbmdBcHApIHtcclxuICAgICAgICAvLyByZXR1cm4gdGhlIGV4aXN0aW5nIGFwcCBpZiBvcHRpb25zIGFuZCBjb25maWcgZGVlcCBlcXVhbCB0aGUgb25lcyBpbiB0aGUgZXhpc3RpbmcgYXBwLlxyXG4gICAgICAgIGlmIChkZWVwRXF1YWwob3B0aW9ucywgZXhpc3RpbmdBcHAub3B0aW9ucykgJiZcclxuICAgICAgICAgICAgZGVlcEVxdWFsKGNvbmZpZywgZXhpc3RpbmdBcHAuY29uZmlnKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhpc3RpbmdBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImR1cGxpY2F0ZS1hcHBcIiAvKiBBcHBFcnJvci5EVVBMSUNBVEVfQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgY29udGFpbmVyID0gbmV3IENvbXBvbmVudENvbnRhaW5lcihuYW1lKTtcclxuICAgIGZvciAoY29uc3QgY29tcG9uZW50IG9mIF9jb21wb25lbnRzLnZhbHVlcygpKSB7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbmV3QXBwID0gbmV3IEZpcmViYXNlQXBwSW1wbChvcHRpb25zLCBjb25maWcsIGNvbnRhaW5lcik7XHJcbiAgICBfYXBwcy5zZXQobmFtZSwgbmV3QXBwKTtcclxuICAgIHJldHVybiBuZXdBcHA7XHJcbn1cclxuLyoqXHJcbiAqIFJldHJpZXZlcyBhIHtAbGluayBAZmlyZWJhc2UvYXBwI0ZpcmViYXNlQXBwfSBpbnN0YW5jZS5cclxuICpcclxuICogV2hlbiBjYWxsZWQgd2l0aCBubyBhcmd1bWVudHMsIHRoZSBkZWZhdWx0IGFwcCBpcyByZXR1cm5lZC4gV2hlbiBhbiBhcHAgbmFtZVxyXG4gKiBpcyBwcm92aWRlZCwgdGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoYXQgbmFtZSBpcyByZXR1cm5lZC5cclxuICpcclxuICogQW4gZXhjZXB0aW9uIGlzIHRocm93biBpZiB0aGUgYXBwIGJlaW5nIHJldHJpZXZlZCBoYXMgbm90IHlldCBiZWVuXHJcbiAqIGluaXRpYWxpemVkLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiB0aGUgZGVmYXVsdCBhcHBcclxuICogY29uc3QgYXBwID0gZ2V0QXBwKCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIC8vIFJldHVybiBhIG5hbWVkIGFwcFxyXG4gKiBjb25zdCBvdGhlckFwcCA9IGdldEFwcChcIm90aGVyQXBwXCIpO1xyXG4gKiBgYGBcclxuICpcclxuICogQHBhcmFtIG5hbWUgLSBPcHRpb25hbCBuYW1lIG9mIHRoZSBhcHAgdG8gcmV0dXJuLiBJZiBubyBuYW1lIGlzXHJcbiAqICAgcHJvdmlkZWQsIHRoZSBkZWZhdWx0IGlzIGBcIltERUZBVUxUXVwiYC5cclxuICpcclxuICogQHJldHVybnMgVGhlIGFwcCBjb3JyZXNwb25kaW5nIHRvIHRoZSBwcm92aWRlZCBhcHAgbmFtZS5cclxuICogICBJZiBubyBhcHAgbmFtZSBpcyBwcm92aWRlZCwgdGhlIGRlZmF1bHQgYXBwIGlzIHJldHVybmVkLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHAobmFtZSA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgY29uc3QgYXBwID0gX2FwcHMuZ2V0KG5hbWUpO1xyXG4gICAgaWYgKCFhcHAgJiYgbmFtZSA9PT0gREVGQVVMVF9FTlRSWV9OQU1FICYmIGdldERlZmF1bHRBcHBDb25maWcoKSkge1xyXG4gICAgICAgIHJldHVybiBpbml0aWFsaXplQXBwKCk7XHJcbiAgICB9XHJcbiAgICBpZiAoIWFwcCkge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwibm8tYXBwXCIgLyogQXBwRXJyb3IuTk9fQVBQICovLCB7IGFwcE5hbWU6IG5hbWUgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXBwO1xyXG59XHJcbi8qKlxyXG4gKiBBIChyZWFkLW9ubHkpIGFycmF5IG9mIGFsbCBpbml0aWFsaXplZCBhcHBzLlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgcmV0dXJuIEFycmF5LmZyb20oX2FwcHMudmFsdWVzKCkpO1xyXG59XHJcbi8qKlxyXG4gKiBSZW5kZXJzIHRoaXMgYXBwIHVudXNhYmxlIGFuZCBmcmVlcyB0aGUgcmVzb3VyY2VzIG9mIGFsbCBhc3NvY2lhdGVkXHJcbiAqIHNlcnZpY2VzLlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBgYGBqYXZhc2NyaXB0XHJcbiAqIGRlbGV0ZUFwcChhcHApXHJcbiAqICAgLnRoZW4oZnVuY3Rpb24oKSB7XHJcbiAqICAgICBjb25zb2xlLmxvZyhcIkFwcCBkZWxldGVkIHN1Y2Nlc3NmdWxseVwiKTtcclxuICogICB9KVxyXG4gKiAgIC5jYXRjaChmdW5jdGlvbihlcnJvcikge1xyXG4gKiAgICAgY29uc29sZS5sb2coXCJFcnJvciBkZWxldGluZyBhcHA6XCIsIGVycm9yKTtcclxuICogICB9KTtcclxuICogYGBgXHJcbiAqXHJcbiAqIEBwdWJsaWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGRlbGV0ZUFwcChhcHApIHtcclxuICAgIGNvbnN0IG5hbWUgPSBhcHAubmFtZTtcclxuICAgIGlmIChfYXBwcy5oYXMobmFtZSkpIHtcclxuICAgICAgICBfYXBwcy5kZWxldGUobmFtZSk7XHJcbiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoYXBwLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXJzKClcclxuICAgICAgICAgICAgLm1hcChwcm92aWRlciA9PiBwcm92aWRlci5kZWxldGUoKSkpO1xyXG4gICAgICAgIGFwcC5pc0RlbGV0ZWQgPSB0cnVlO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZWdpc3RlcnMgYSBsaWJyYXJ5J3MgbmFtZSBhbmQgdmVyc2lvbiBmb3IgcGxhdGZvcm0gbG9nZ2luZyBwdXJwb3Nlcy5cclxuICogQHBhcmFtIGxpYnJhcnkgLSBOYW1lIG9mIDFwIG9yIDNwIGxpYnJhcnkgKGUuZy4gZmlyZXN0b3JlLCBhbmd1bGFyZmlyZSlcclxuICogQHBhcmFtIHZlcnNpb24gLSBDdXJyZW50IHZlcnNpb24gb2YgdGhhdCBsaWJyYXJ5LlxyXG4gKiBAcGFyYW0gdmFyaWFudCAtIEJ1bmRsZSB2YXJpYW50LCBlLmcuLCBub2RlLCBybiwgZXRjLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlclZlcnNpb24obGlicmFyeUtleU9yTmFtZSwgdmVyc2lvbiwgdmFyaWFudCkge1xyXG4gICAgdmFyIF9hO1xyXG4gICAgLy8gVE9ETzogV2UgY2FuIHVzZSB0aGlzIGNoZWNrIHRvIHdoaXRlbGlzdCBzdHJpbmdzIHdoZW4vaWYgd2Ugc2V0IHVwXHJcbiAgICAvLyBhIGdvb2Qgd2hpdGVsaXN0IHN5c3RlbS5cclxuICAgIGxldCBsaWJyYXJ5ID0gKF9hID0gUExBVEZPUk1fTE9HX1NUUklOR1tsaWJyYXJ5S2V5T3JOYW1lXSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogbGlicmFyeUtleU9yTmFtZTtcclxuICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgbGlicmFyeSArPSBgLSR7dmFyaWFudH1gO1xyXG4gICAgfVxyXG4gICAgY29uc3QgbGlicmFyeU1pc21hdGNoID0gbGlicmFyeS5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgY29uc3QgdmVyc2lvbk1pc21hdGNoID0gdmVyc2lvbi5tYXRjaCgvXFxzfFxcLy8pO1xyXG4gICAgaWYgKGxpYnJhcnlNaXNtYXRjaCB8fCB2ZXJzaW9uTWlzbWF0Y2gpIHtcclxuICAgICAgICBjb25zdCB3YXJuaW5nID0gW1xyXG4gICAgICAgICAgICBgVW5hYmxlIHRvIHJlZ2lzdGVyIGxpYnJhcnkgXCIke2xpYnJhcnl9XCIgd2l0aCB2ZXJzaW9uIFwiJHt2ZXJzaW9ufVwiOmBcclxuICAgICAgICBdO1xyXG4gICAgICAgIGlmIChsaWJyYXJ5TWlzbWF0Y2gpIHtcclxuICAgICAgICAgICAgd2FybmluZy5wdXNoKGBsaWJyYXJ5IG5hbWUgXCIke2xpYnJhcnl9XCIgY29udGFpbnMgaWxsZWdhbCBjaGFyYWN0ZXJzICh3aGl0ZXNwYWNlIG9yIFwiL1wiKWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAobGlicmFyeU1pc21hdGNoICYmIHZlcnNpb25NaXNtYXRjaCkge1xyXG4gICAgICAgICAgICB3YXJuaW5nLnB1c2goJ2FuZCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodmVyc2lvbk1pc21hdGNoKSB7XHJcbiAgICAgICAgICAgIHdhcm5pbmcucHVzaChgdmVyc2lvbiBuYW1lIFwiJHt2ZXJzaW9ufVwiIGNvbnRhaW5zIGlsbGVnYWwgY2hhcmFjdGVycyAod2hpdGVzcGFjZSBvciBcIi9cIilgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbG9nZ2VyLndhcm4od2FybmluZy5qb2luKCcgJykpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIF9yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KGAke2xpYnJhcnl9LXZlcnNpb25gLCAoKSA9PiAoeyBsaWJyYXJ5LCB2ZXJzaW9uIH0pLCBcIlZFUlNJT05cIiAvKiBDb21wb25lbnRUeXBlLlZFUlNJT04gKi8pKTtcclxufVxyXG4vKipcclxuICogU2V0cyBsb2cgaGFuZGxlciBmb3IgYWxsIEZpcmViYXNlIFNES3MuXHJcbiAqIEBwYXJhbSBsb2dDYWxsYmFjayAtIEFuIG9wdGlvbmFsIGN1c3RvbSBsb2cgaGFuZGxlciB0aGF0IGV4ZWN1dGVzIHVzZXIgY29kZSB3aGVuZXZlclxyXG4gKiB0aGUgRmlyZWJhc2UgU0RLIG1ha2VzIGEgbG9nZ2luZyBjYWxsLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBvbkxvZyhsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgaWYgKGxvZ0NhbGxiYWNrICE9PSBudWxsICYmIHR5cGVvZiBsb2dDYWxsYmFjayAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaW52YWxpZC1sb2ctYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0xPR19BUkdVTUVOVCAqLyk7XHJcbiAgICB9XHJcbiAgICBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucyk7XHJcbn1cclxuLyoqXHJcbiAqIFNldHMgbG9nIGxldmVsIGZvciBhbGwgRmlyZWJhc2UgU0RLcy5cclxuICpcclxuICogQWxsIG9mIHRoZSBsb2cgdHlwZXMgYWJvdmUgdGhlIGN1cnJlbnQgbG9nIGxldmVsIGFyZSBjYXB0dXJlZCAoaS5lLiBpZlxyXG4gKiB5b3Ugc2V0IHRoZSBsb2cgbGV2ZWwgdG8gYGluZm9gLCBlcnJvcnMgYXJlIGxvZ2dlZCwgYnV0IGBkZWJ1Z2AgYW5kXHJcbiAqIGB2ZXJib3NlYCBsb2dzIGFyZSBub3QpLlxyXG4gKlxyXG4gKiBAcHVibGljXHJcbiAqL1xyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsb2dMZXZlbCkge1xyXG4gICAgc2V0TG9nTGV2ZWwkMShsb2dMZXZlbCk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgREJfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtZGF0YWJhc2UnO1xyXG5jb25zdCBEQl9WRVJTSU9OID0gMTtcclxuY29uc3QgU1RPUkVfTkFNRSA9ICdmaXJlYmFzZS1oZWFydGJlYXQtc3RvcmUnO1xyXG5sZXQgZGJQcm9taXNlID0gbnVsbDtcclxuZnVuY3Rpb24gZ2V0RGJQcm9taXNlKCkge1xyXG4gICAgaWYgKCFkYlByb21pc2UpIHtcclxuICAgICAgICBkYlByb21pc2UgPSBvcGVuREIoREJfTkFNRSwgREJfVkVSU0lPTiwge1xyXG4gICAgICAgICAgICB1cGdyYWRlOiAoZGIsIG9sZFZlcnNpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIFdlIGRvbid0IHVzZSAnYnJlYWsnIGluIHRoaXMgc3dpdGNoIHN0YXRlbWVudCwgdGhlIGZhbGwtdGhyb3VnaFxyXG4gICAgICAgICAgICAgICAgLy8gYmVoYXZpb3IgaXMgd2hhdCB3ZSB3YW50LCBiZWNhdXNlIGlmIHRoZXJlIGFyZSBtdWx0aXBsZSB2ZXJzaW9ucyBiZXR3ZWVuXHJcbiAgICAgICAgICAgICAgICAvLyB0aGUgb2xkIHZlcnNpb24gYW5kIHRoZSBjdXJyZW50IHZlcnNpb24sIHdlIHdhbnQgQUxMIHRoZSBtaWdyYXRpb25zXHJcbiAgICAgICAgICAgICAgICAvLyB0aGF0IGNvcnJlc3BvbmQgdG8gdGhvc2UgdmVyc2lvbnMgdG8gcnVuLCBub3Qgb25seSB0aGUgbGFzdCBvbmUuXHJcbiAgICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZGVmYXVsdC1jYXNlXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9sZFZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRiLmNyZWF0ZU9iamVjdFN0b3JlKFNUT1JFX05BTUUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgICAgIHRocm93IEVSUk9SX0ZBQ1RPUlkuY3JlYXRlKFwiaWRiLW9wZW5cIiAvKiBBcHBFcnJvci5JREJfT1BFTiAqLywge1xyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxFcnJvck1lc3NhZ2U6IGUubWVzc2FnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBkYlByb21pc2U7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gcmVhZEhlYXJ0YmVhdHNGcm9tSW5kZXhlZERCKGFwcCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGRiXHJcbiAgICAgICAgICAgIC50cmFuc2FjdGlvbihTVE9SRV9OQU1FKVxyXG4gICAgICAgICAgICAub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSlcclxuICAgICAgICAgICAgLmdldChjb21wdXRlS2V5KGFwcCkpO1xyXG4gICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvcikge1xyXG4gICAgICAgICAgICBsb2dnZXIud2FybihlLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgaWRiR2V0RXJyb3IgPSBFUlJPUl9GQUNUT1JZLmNyZWF0ZShcImlkYi1nZXRcIiAvKiBBcHBFcnJvci5JREJfR0VUICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGlkYkdldEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5hc3luYyBmdW5jdGlvbiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQihhcHAsIGhlYXJ0YmVhdE9iamVjdCkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBkYiA9IGF3YWl0IGdldERiUHJvbWlzZSgpO1xyXG4gICAgICAgIGNvbnN0IHR4ID0gZGIudHJhbnNhY3Rpb24oU1RPUkVfTkFNRSwgJ3JlYWR3cml0ZScpO1xyXG4gICAgICAgIGNvbnN0IG9iamVjdFN0b3JlID0gdHgub2JqZWN0U3RvcmUoU1RPUkVfTkFNRSk7XHJcbiAgICAgICAgYXdhaXQgb2JqZWN0U3RvcmUucHV0KGhlYXJ0YmVhdE9iamVjdCwgY29tcHV0ZUtleShhcHApKTtcclxuICAgICAgICBhd2FpdCB0eC5kb25lO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpIHtcclxuICAgICAgICAgICAgbG9nZ2VyLndhcm4oZS5tZXNzYWdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkdldEVycm9yID0gRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpZGItc2V0XCIgLyogQXBwRXJyb3IuSURCX1dSSVRFICovLCB7XHJcbiAgICAgICAgICAgICAgICBvcmlnaW5hbEVycm9yTWVzc2FnZTogZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxvZ2dlci53YXJuKGlkYkdldEVycm9yLm1lc3NhZ2UpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjb21wdXRlS2V5KGFwcCkge1xyXG4gICAgcmV0dXJuIGAke2FwcC5uYW1lfSEke2FwcC5vcHRpb25zLmFwcElkfWA7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgTUFYX0hFQURFUl9CWVRFUyA9IDEwMjQ7XHJcbi8vIDMwIGRheXNcclxuY29uc3QgU1RPUkVEX0hFQVJUQkVBVF9SRVRFTlRJT05fTUFYX01JTExJUyA9IDMwICogMjQgKiA2MCAqIDYwICogMTAwMDtcclxuY2xhc3MgSGVhcnRiZWF0U2VydmljZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW4tbWVtb3J5IGNhY2hlIGZvciBoZWFydGJlYXRzLCB1c2VkIGJ5IGdldEhlYXJ0YmVhdHNIZWFkZXIoKSB0byBnZW5lcmF0ZVxyXG4gICAgICAgICAqIHRoZSBoZWFkZXIgc3RyaW5nLlxyXG4gICAgICAgICAqIFN0b3JlcyBvbmUgcmVjb3JkIHBlciBkYXRlLiBUaGlzIHdpbGwgYmUgY29uc29saWRhdGVkIGludG8gdGhlIHN0YW5kYXJkXHJcbiAgICAgICAgICogZm9ybWF0IG9mIG9uZSByZWNvcmQgcGVyIHVzZXIgYWdlbnQgc3RyaW5nIGJlZm9yZSBiZWluZyBzZW50IGFzIGEgaGVhZGVyLlxyXG4gICAgICAgICAqIFBvcHVsYXRlZCBmcm9tIGluZGV4ZWREQiB3aGVuIHRoZSBjb250cm9sbGVyIGlzIGluc3RhbnRpYXRlZCBhbmQgc2hvdWxkXHJcbiAgICAgICAgICogYmUga2VwdCBpbiBzeW5jIHdpdGggaW5kZXhlZERCLlxyXG4gICAgICAgICAqIExlYXZlIHB1YmxpYyBmb3IgZWFzaWVyIHRlc3RpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gbnVsbDtcclxuICAgICAgICBjb25zdCBhcHAgPSB0aGlzLmNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgdGhpcy5fc3RvcmFnZSA9IG5ldyBIZWFydGJlYXRTdG9yYWdlSW1wbChhcHApO1xyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZVByb21pc2UgPSB0aGlzLl9zdG9yYWdlLnJlYWQoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQ2FsbGVkIHRvIHJlcG9ydCBhIGhlYXJ0YmVhdC4gVGhlIGZ1bmN0aW9uIHdpbGwgZ2VuZXJhdGVcclxuICAgICAqIGEgSGVhcnRiZWF0c0J5VXNlckFnZW50IG9iamVjdCwgdXBkYXRlIGhlYXJ0YmVhdHNDYWNoZSwgYW5kIHBlcnNpc3QgaXRcclxuICAgICAqIHRvIEluZGV4ZWREQi5cclxuICAgICAqIE5vdGUgdGhhdCB3ZSBvbmx5IHN0b3JlIG9uZSBoZWFydGJlYXQgcGVyIGRheS4gU28gaWYgYSBoZWFydGJlYXQgZm9yIHRvZGF5IGlzXHJcbiAgICAgKiBhbHJlYWR5IGxvZ2dlZCwgc3Vic2VxdWVudCBjYWxscyB0byB0aGlzIGZ1bmN0aW9uIGluIHRoZSBzYW1lIGRheSB3aWxsIGJlIGlnbm9yZWQuXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRyaWdnZXJIZWFydGJlYXQoKSB7XHJcbiAgICAgICAgY29uc3QgcGxhdGZvcm1Mb2dnZXIgPSB0aGlzLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIoJ3BsYXRmb3JtLWxvZ2dlcicpXHJcbiAgICAgICAgICAgIC5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAvLyBUaGlzIGlzIHRoZSBcIkZpcmViYXNlIHVzZXIgYWdlbnRcIiBzdHJpbmcgZnJvbSB0aGUgcGxhdGZvcm0gbG9nZ2VyXHJcbiAgICAgICAgLy8gc2VydmljZSwgbm90IHRoZSBicm93c2VyIHVzZXIgYWdlbnQuXHJcbiAgICAgICAgY29uc3QgYWdlbnQgPSBwbGF0Zm9ybUxvZ2dlci5nZXRQbGF0Zm9ybUluZm9TdHJpbmcoKTtcclxuICAgICAgICBjb25zdCBkYXRlID0gZ2V0VVRDRGF0ZVN0cmluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlID0gYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRG8gbm90IHN0b3JlIGEgaGVhcnRiZWF0IGlmIG9uZSBpcyBhbHJlYWR5IHN0b3JlZCBmb3IgdGhpcyBkYXlcclxuICAgICAgICAvLyBvciBpZiBhIGhlYWRlciBoYXMgYWxyZWFkeSBiZWVuIHNlbnQgdG9kYXkuXHJcbiAgICAgICAgaWYgKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPT09IGRhdGUgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMuc29tZShzaW5nbGVEYXRlSGVhcnRiZWF0ID0+IHNpbmdsZURhdGVIZWFydGJlYXQuZGF0ZSA9PT0gZGF0ZSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVGhlcmUgaXMgbm8gZW50cnkgZm9yIHRoaXMgZGF0ZS4gQ3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMucHVzaCh7IGRhdGUsIGFnZW50IH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBSZW1vdmUgZW50cmllcyBvbGRlciB0aGFuIDMwIGRheXMuXHJcbiAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMgPSB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cy5maWx0ZXIoc2luZ2xlRGF0ZUhlYXJ0YmVhdCA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGhiVGltZXN0YW1wID0gbmV3IERhdGUoc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKS52YWx1ZU9mKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XHJcbiAgICAgICAgICAgIHJldHVybiBub3cgLSBoYlRpbWVzdGFtcCA8PSBTVE9SRURfSEVBUlRCRUFUX1JFVEVOVElPTl9NQVhfTUlMTElTO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlLm92ZXJ3cml0ZSh0aGlzLl9oZWFydGJlYXRzQ2FjaGUpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXR1cm5zIGEgYmFzZTY0IGVuY29kZWQgc3RyaW5nIHdoaWNoIGNhbiBiZSBhdHRhY2hlZCB0byB0aGUgaGVhcnRiZWF0LXNwZWNpZmljIGhlYWRlciBkaXJlY3RseS5cclxuICAgICAqIEl0IGFsc28gY2xlYXJzIGFsbCBoZWFydGJlYXRzIGZyb20gbWVtb3J5IGFzIHdlbGwgYXMgaW4gSW5kZXhlZERCLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IENvbnN1bWluZyBwcm9kdWN0IFNES3Mgc2hvdWxkIG5vdCBzZW5kIHRoZSBoZWFkZXIgaWYgdGhpcyBtZXRob2RcclxuICAgICAqIHJldHVybnMgYW4gZW1wdHkgc3RyaW5nLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRIZWFydGJlYXRzSGVhZGVyKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5faGVhcnRiZWF0c0NhY2hlUHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgaXQncyBzdGlsbCBudWxsIG9yIHRoZSBhcnJheSBpcyBlbXB0eSwgdGhlcmUgaXMgbm8gZGF0YSB0byBzZW5kLlxyXG4gICAgICAgIGlmICh0aGlzLl9oZWFydGJlYXRzQ2FjaGUgPT09IG51bGwgfHxcclxuICAgICAgICAgICAgdGhpcy5faGVhcnRiZWF0c0NhY2hlLmhlYXJ0YmVhdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgZGF0ZSA9IGdldFVUQ0RhdGVTdHJpbmcoKTtcclxuICAgICAgICAvLyBFeHRyYWN0IGFzIG1hbnkgaGVhcnRiZWF0cyBmcm9tIHRoZSBjYWNoZSBhcyB3aWxsIGZpdCB1bmRlciB0aGUgc2l6ZSBsaW1pdC5cclxuICAgICAgICBjb25zdCB7IGhlYXJ0YmVhdHNUb1NlbmQsIHVuc2VudEVudHJpZXMgfSA9IGV4dHJhY3RIZWFydGJlYXRzRm9ySGVhZGVyKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzKTtcclxuICAgICAgICBjb25zdCBoZWFkZXJTdHJpbmcgPSBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhKU09OLnN0cmluZ2lmeSh7IHZlcnNpb246IDIsIGhlYXJ0YmVhdHM6IGhlYXJ0YmVhdHNUb1NlbmQgfSkpO1xyXG4gICAgICAgIC8vIFN0b3JlIGxhc3Qgc2VudCBkYXRlIHRvIHByZXZlbnQgYW5vdGhlciBiZWluZyBsb2dnZWQvc2VudCBmb3IgdGhlIHNhbWUgZGF5LlxyXG4gICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5sYXN0U2VudEhlYXJ0YmVhdERhdGUgPSBkYXRlO1xyXG4gICAgICAgIGlmICh1bnNlbnRFbnRyaWVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy8gU3RvcmUgYW55IHVuc2VudCBlbnRyaWVzIGlmIHRoZXkgZXhpc3QuXHJcbiAgICAgICAgICAgIHRoaXMuX2hlYXJ0YmVhdHNDYWNoZS5oZWFydGJlYXRzID0gdW5zZW50RW50cmllcztcclxuICAgICAgICAgICAgLy8gVGhpcyBzZWVtcyBtb3JlIGxpa2VseSB0aGFuIGVtcHR5aW5nIHRoZSBhcnJheSAoYmVsb3cpIHRvIGxlYWQgdG8gc29tZSBvZGQgc3RhdGVcclxuICAgICAgICAgICAgLy8gc2luY2UgdGhlIGNhY2hlIGlzbid0IGVtcHR5IGFuZCB0aGlzIHdpbGwgYmUgY2FsbGVkIGFnYWluIG9uIHRoZSBuZXh0IHJlcXVlc3QsXHJcbiAgICAgICAgICAgIC8vIGFuZCBpcyBwcm9iYWJseSBzYWZlc3QgaWYgd2UgYXdhaXQgaXQuXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuX3N0b3JhZ2Uub3ZlcndyaXRlKHRoaXMuX2hlYXJ0YmVhdHNDYWNoZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9oZWFydGJlYXRzQ2FjaGUuaGVhcnRiZWF0cyA9IFtdO1xyXG4gICAgICAgICAgICAvLyBEbyBub3Qgd2FpdCBmb3IgdGhpcywgdG8gcmVkdWNlIGxhdGVuY3kuXHJcbiAgICAgICAgICAgIHZvaWQgdGhpcy5fc3RvcmFnZS5vdmVyd3JpdGUodGhpcy5faGVhcnRiZWF0c0NhY2hlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhlYWRlclN0cmluZztcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRVVENEYXRlU3RyaW5nKCkge1xyXG4gICAgY29uc3QgdG9kYXkgPSBuZXcgRGF0ZSgpO1xyXG4gICAgLy8gUmV0dXJucyBkYXRlIGZvcm1hdCAnWVlZWS1NTS1ERCdcclxuICAgIHJldHVybiB0b2RheS50b0lTT1N0cmluZygpLnN1YnN0cmluZygwLCAxMCk7XHJcbn1cclxuZnVuY3Rpb24gZXh0cmFjdEhlYXJ0YmVhdHNGb3JIZWFkZXIoaGVhcnRiZWF0c0NhY2hlLCBtYXhTaXplID0gTUFYX0hFQURFUl9CWVRFUykge1xyXG4gICAgLy8gSGVhcnRiZWF0cyBncm91cGVkIGJ5IHVzZXIgYWdlbnQgaW4gdGhlIHN0YW5kYXJkIGZvcm1hdCB0byBiZSBzZW50IGluXHJcbiAgICAvLyB0aGUgaGVhZGVyLlxyXG4gICAgY29uc3QgaGVhcnRiZWF0c1RvU2VuZCA9IFtdO1xyXG4gICAgLy8gU2luZ2xlIGRhdGUgZm9ybWF0IGhlYXJ0YmVhdHMgdGhhdCBhcmUgbm90IHNlbnQuXHJcbiAgICBsZXQgdW5zZW50RW50cmllcyA9IGhlYXJ0YmVhdHNDYWNoZS5zbGljZSgpO1xyXG4gICAgZm9yIChjb25zdCBzaW5nbGVEYXRlSGVhcnRiZWF0IG9mIGhlYXJ0YmVhdHNDYWNoZSkge1xyXG4gICAgICAgIC8vIExvb2sgZm9yIGFuIGV4aXN0aW5nIGVudHJ5IHdpdGggdGhlIHNhbWUgdXNlciBhZ2VudC5cclxuICAgICAgICBjb25zdCBoZWFydGJlYXRFbnRyeSA9IGhlYXJ0YmVhdHNUb1NlbmQuZmluZChoYiA9PiBoYi5hZ2VudCA9PT0gc2luZ2xlRGF0ZUhlYXJ0YmVhdC5hZ2VudCk7XHJcbiAgICAgICAgaWYgKCFoZWFydGJlYXRFbnRyeSkge1xyXG4gICAgICAgICAgICAvLyBJZiBubyBlbnRyeSBmb3IgdGhpcyB1c2VyIGFnZW50IGV4aXN0cywgY3JlYXRlIG9uZS5cclxuICAgICAgICAgICAgaGVhcnRiZWF0c1RvU2VuZC5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGFnZW50OiBzaW5nbGVEYXRlSGVhcnRiZWF0LmFnZW50LFxyXG4gICAgICAgICAgICAgICAgZGF0ZXM6IFtzaW5nbGVEYXRlSGVhcnRiZWF0LmRhdGVdXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoY291bnRCeXRlcyhoZWFydGJlYXRzVG9TZW5kKSA+IG1heFNpemUpIHtcclxuICAgICAgICAgICAgICAgIC8vIElmIHRoZSBoZWFkZXIgd291bGQgZXhjZWVkIG1heCBzaXplLCByZW1vdmUgdGhlIGFkZGVkIGhlYXJ0YmVhdFxyXG4gICAgICAgICAgICAgICAgLy8gZW50cnkgYW5kIHN0b3AgYWRkaW5nIHRvIHRoZSBoZWFkZXIuXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzVG9TZW5kLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGhlYXJ0YmVhdEVudHJ5LmRhdGVzLnB1c2goc2luZ2xlRGF0ZUhlYXJ0YmVhdC5kYXRlKTtcclxuICAgICAgICAgICAgLy8gSWYgdGhlIGhlYWRlciB3b3VsZCBleGNlZWQgbWF4IHNpemUsIHJlbW92ZSB0aGUgYWRkZWQgZGF0ZVxyXG4gICAgICAgICAgICAvLyBhbmQgc3RvcCBhZGRpbmcgdG8gdGhlIGhlYWRlci5cclxuICAgICAgICAgICAgaWYgKGNvdW50Qnl0ZXMoaGVhcnRiZWF0c1RvU2VuZCkgPiBtYXhTaXplKSB7XHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRFbnRyeS5kYXRlcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFBvcCB1bnNlbnQgZW50cnkgZnJvbSBxdWV1ZS4gKFNraXBwZWQgaWYgYWRkaW5nIHRoZSBlbnRyeSBleGNlZWRlZFxyXG4gICAgICAgIC8vIHF1b3RhIGFuZCB0aGUgbG9vcCBicmVha3MgZWFybHkuKVxyXG4gICAgICAgIHVuc2VudEVudHJpZXMgPSB1bnNlbnRFbnRyaWVzLnNsaWNlKDEpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBoZWFydGJlYXRzVG9TZW5kLFxyXG4gICAgICAgIHVuc2VudEVudHJpZXNcclxuICAgIH07XHJcbn1cclxuY2xhc3MgSGVhcnRiZWF0U3RvcmFnZUltcGwge1xyXG4gICAgY29uc3RydWN0b3IoYXBwKSB7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5fY2FuVXNlSW5kZXhlZERCUHJvbWlzZSA9IHRoaXMucnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgcnVuSW5kZXhlZERCRW52aXJvbm1lbnRDaGVjaygpIHtcclxuICAgICAgICBpZiAoIWlzSW5kZXhlZERCQXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHZhbGlkYXRlSW5kZXhlZERCT3BlbmFibGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdHJ1ZSlcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoKSA9PiBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWFkIGFsbCBoZWFydGJlYXRzLlxyXG4gICAgICovXHJcbiAgICBhc3luYyByZWFkKCkge1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHsgaGVhcnRiZWF0czogW10gfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlkYkhlYXJ0YmVhdE9iamVjdCA9IGF3YWl0IHJlYWRIZWFydGJlYXRzRnJvbUluZGV4ZWREQih0aGlzLmFwcCk7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGJIZWFydGJlYXRPYmplY3QgfHwgeyBoZWFydGJlYXRzOiBbXSB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIG92ZXJ3cml0ZSB0aGUgc3RvcmFnZSB3aXRoIHRoZSBwcm92aWRlZCBoZWFydGJlYXRzXHJcbiAgICBhc3luYyBvdmVyd3JpdGUoaGVhcnRiZWF0c09iamVjdCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBjb25zdCBjYW5Vc2VJbmRleGVkREIgPSBhd2FpdCB0aGlzLl9jYW5Vc2VJbmRleGVkREJQcm9taXNlO1xyXG4gICAgICAgIGlmICghY2FuVXNlSW5kZXhlZERCKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdCA9IGF3YWl0IHRoaXMucmVhZCgpO1xyXG4gICAgICAgICAgICByZXR1cm4gd3JpdGVIZWFydGJlYXRzVG9JbmRleGVkREIodGhpcy5hcHAsIHtcclxuICAgICAgICAgICAgICAgIGxhc3RTZW50SGVhcnRiZWF0RGF0ZTogKF9hID0gaGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IGV4aXN0aW5nSGVhcnRiZWF0c09iamVjdC5sYXN0U2VudEhlYXJ0YmVhdERhdGUsXHJcbiAgICAgICAgICAgICAgICBoZWFydGJlYXRzOiBoZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gYWRkIGhlYXJ0YmVhdHNcclxuICAgIGFzeW5jIGFkZChoZWFydGJlYXRzT2JqZWN0KSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IGNhblVzZUluZGV4ZWREQiA9IGF3YWl0IHRoaXMuX2NhblVzZUluZGV4ZWREQlByb21pc2U7XHJcbiAgICAgICAgaWYgKCFjYW5Vc2VJbmRleGVkREIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0ID0gYXdhaXQgdGhpcy5yZWFkKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB3cml0ZUhlYXJ0YmVhdHNUb0luZGV4ZWREQih0aGlzLmFwcCwge1xyXG4gICAgICAgICAgICAgICAgbGFzdFNlbnRIZWFydGJlYXREYXRlOiAoX2EgPSBoZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZXhpc3RpbmdIZWFydGJlYXRzT2JqZWN0Lmxhc3RTZW50SGVhcnRiZWF0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGhlYXJ0YmVhdHM6IFtcclxuICAgICAgICAgICAgICAgICAgICAuLi5leGlzdGluZ0hlYXJ0YmVhdHNPYmplY3QuaGVhcnRiZWF0cyxcclxuICAgICAgICAgICAgICAgICAgICAuLi5oZWFydGJlYXRzT2JqZWN0LmhlYXJ0YmVhdHNcclxuICAgICAgICAgICAgICAgIF1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBDYWxjdWxhdGUgYnl0ZXMgb2YgYSBIZWFydGJlYXRzQnlVc2VyQWdlbnQgYXJyYXkgYWZ0ZXIgYmVpbmcgd3JhcHBlZFxyXG4gKiBpbiBhIHBsYXRmb3JtIGxvZ2dpbmcgaGVhZGVyIEpTT04gb2JqZWN0LCBzdHJpbmdpZmllZCwgYW5kIGNvbnZlcnRlZFxyXG4gKiB0byBiYXNlIDY0LlxyXG4gKi9cclxuZnVuY3Rpb24gY291bnRCeXRlcyhoZWFydGJlYXRzQ2FjaGUpIHtcclxuICAgIC8vIGJhc2U2NCBoYXMgYSByZXN0cmljdGVkIHNldCBvZiBjaGFyYWN0ZXJzLCBhbGwgb2Ygd2hpY2ggc2hvdWxkIGJlIDEgYnl0ZS5cclxuICAgIHJldHVybiBiYXNlNjR1cmxFbmNvZGVXaXRob3V0UGFkZGluZyhcclxuICAgIC8vIGhlYXJ0YmVhdHNDYWNoZSB3cmFwcGVyIHByb3BlcnRpZXNcclxuICAgIEpTT04uc3RyaW5naWZ5KHsgdmVyc2lvbjogMiwgaGVhcnRiZWF0czogaGVhcnRiZWF0c0NhY2hlIH0pKS5sZW5ndGg7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICBfcmVnaXN0ZXJDb21wb25lbnQobmV3IENvbXBvbmVudCgncGxhdGZvcm0tbG9nZ2VyJywgY29udGFpbmVyID0+IG5ldyBQbGF0Zm9ybUxvZ2dlclNlcnZpY2VJbXBsKGNvbnRhaW5lciksIFwiUFJJVkFURVwiIC8qIENvbXBvbmVudFR5cGUuUFJJVkFURSAqLykpO1xyXG4gICAgX3JlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2hlYXJ0YmVhdCcsIGNvbnRhaW5lciA9PiBuZXcgSGVhcnRiZWF0U2VydmljZUltcGwoY29udGFpbmVyKSwgXCJQUklWQVRFXCIgLyogQ29tcG9uZW50VHlwZS5QUklWQVRFICovKSk7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUkbywgdmVyc2lvbiQxLCB2YXJpYW50KTtcclxuICAgIC8vIEJVSUxEX1RBUkdFVCB3aWxsIGJlIHJlcGxhY2VkIGJ5IHZhbHVlcyBsaWtlIGVzbTUsIGVzbTIwMTcsIGNqczUsIGV0YyBkdXJpbmcgdGhlIGNvbXBpbGF0aW9uXHJcbiAgICByZWdpc3RlclZlcnNpb24obmFtZSRvLCB2ZXJzaW9uJDEsICdlc20yMDE3Jyk7XHJcbiAgICAvLyBSZWdpc3RlciBwbGF0Zm9ybSBTREsgaWRlbnRpZmllciAobm8gdmVyc2lvbikuXHJcbiAgICByZWdpc3RlclZlcnNpb24oJ2ZpcmUtanMnLCAnJyk7XHJcbn1cblxuLyoqXHJcbiAqIEZpcmViYXNlIEFwcFxyXG4gKlxyXG4gKiBAcmVtYXJrcyBUaGlzIHBhY2thZ2UgY29vcmRpbmF0ZXMgdGhlIGNvbW11bmljYXRpb24gYmV0d2VlbiB0aGUgZGlmZmVyZW50IEZpcmViYXNlIGNvbXBvbmVudHNcclxuICogQHBhY2thZ2VEb2N1bWVudGF0aW9uXHJcbiAqL1xyXG5yZWdpc3RlckNvcmVDb21wb25lbnRzKCcnKTtcblxuZXhwb3J0IHsgU0RLX1ZFUlNJT04sIERFRkFVTFRfRU5UUllfTkFNRSBhcyBfREVGQVVMVF9FTlRSWV9OQU1FLCBfYWRkQ29tcG9uZW50LCBfYWRkT3JPdmVyd3JpdGVDb21wb25lbnQsIF9hcHBzLCBfY2xlYXJDb21wb25lbnRzLCBfY29tcG9uZW50cywgX2dldFByb3ZpZGVyLCBfcmVnaXN0ZXJDb21wb25lbnQsIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UsIGRlbGV0ZUFwcCwgZ2V0QXBwLCBnZXRBcHBzLCBpbml0aWFsaXplQXBwLCBvbkxvZywgcmVnaXN0ZXJWZXJzaW9uLCBzZXRMb2dMZXZlbCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsInZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9O1xuXG52YXIgZXNtID0ge307XG5cbi8qXG5cbiBDb3B5cmlnaHQgVGhlIENsb3N1cmUgTGlicmFyeSBBdXRob3JzLlxuIFNQRFgtTGljZW5zZS1JZGVudGlmaWVyOiBBcGFjaGUtMi4wXG4qL1xuXG52YXIgayxnb29nPWdvb2d8fHt9LGw9Y29tbW9uanNHbG9iYWx8fHNlbGY7ZnVuY3Rpb24gYWEoYSl7dmFyIGI9dHlwZW9mIGE7Yj1cIm9iamVjdFwiIT1iP2I6YT9BcnJheS5pc0FycmF5KGEpP1wiYXJyYXlcIjpiOlwibnVsbFwiO3JldHVybiBcImFycmF5XCI9PWJ8fFwib2JqZWN0XCI9PWImJlwibnVtYmVyXCI9PXR5cGVvZiBhLmxlbmd0aH1mdW5jdGlvbiBwKGEpe3ZhciBiPXR5cGVvZiBhO3JldHVybiBcIm9iamVjdFwiPT1iJiZudWxsIT1hfHxcImZ1bmN0aW9uXCI9PWJ9ZnVuY3Rpb24gYmEoYSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChhLGNhKSYmYVtjYV18fChhW2NhXT0rK2RhKX12YXIgY2E9XCJjbG9zdXJlX3VpZF9cIisoMUU5Kk1hdGgucmFuZG9tKCk+Pj4wKSxkYT0wO2Z1bmN0aW9uIGVhKGEsYixjKXtyZXR1cm4gYS5jYWxsLmFwcGx5KGEuYmluZCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gZmEoYSxiLGMpe2lmKCFhKXRocm93IEVycm9yKCk7aWYoMjxhcmd1bWVudHMubGVuZ3RoKXt2YXIgZD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMik7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGU9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKTtBcnJheS5wcm90b3R5cGUudW5zaGlmdC5hcHBseShlLGQpO3JldHVybiBhLmFwcGx5KGIsZSl9fXJldHVybiBmdW5jdGlvbigpe3JldHVybiBhLmFwcGx5KGIsYXJndW1lbnRzKX19ZnVuY3Rpb24gcShhLGIsYyl7RnVuY3Rpb24ucHJvdG90eXBlLmJpbmQmJi0xIT1GdW5jdGlvbi5wcm90b3R5cGUuYmluZC50b1N0cmluZygpLmluZGV4T2YoXCJuYXRpdmUgY29kZVwiKT9xPWVhOnE9ZmE7cmV0dXJuIHEuYXBwbHkobnVsbCxhcmd1bWVudHMpfVxuZnVuY3Rpb24gaGEoYSxiKXt2YXIgYz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9Yy5zbGljZSgpO2QucHVzaC5hcHBseShkLGFyZ3VtZW50cyk7cmV0dXJuIGEuYXBwbHkodGhpcyxkKX19ZnVuY3Rpb24gcihhLGIpe2Z1bmN0aW9uIGMoKXt9Yy5wcm90b3R5cGU9Yi5wcm90b3R5cGU7YS4kPWIucHJvdG90eXBlO2EucHJvdG90eXBlPW5ldyBjO2EucHJvdG90eXBlLmNvbnN0cnVjdG9yPWE7YS5hYz1mdW5jdGlvbihkLGUsZil7Zm9yKHZhciBoPUFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMiksbj0yO248YXJndW1lbnRzLmxlbmd0aDtuKyspaFtuLTJdPWFyZ3VtZW50c1tuXTtyZXR1cm4gYi5wcm90b3R5cGVbZV0uYXBwbHkoZCxoKX07fWZ1bmN0aW9uIHYoKXt0aGlzLnM9dGhpcy5zO3RoaXMubz10aGlzLm87fXZhciBpYT0wO3YucHJvdG90eXBlLnM9ITE7di5wcm90b3R5cGUuc2E9ZnVuY3Rpb24oKXtpZighdGhpcy5zJiYodGhpcy5zPSEwLHRoaXMuTigpLDAhPWlhKSl7YmEodGhpcyk7fX07di5wcm90b3R5cGUuTj1mdW5jdGlvbigpe2lmKHRoaXMubylmb3IoO3RoaXMuby5sZW5ndGg7KXRoaXMuby5zaGlmdCgpKCk7fTtjb25zdCBrYT1BcnJheS5wcm90b3R5cGUuaW5kZXhPZj9mdW5jdGlvbihhLGIpe3JldHVybiBBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKGEsYix2b2lkIDApfTpmdW5jdGlvbihhLGIpe2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlyZXR1cm4gXCJzdHJpbmdcIiE9PXR5cGVvZiBifHwxIT1iLmxlbmd0aD8tMTphLmluZGV4T2YoYiwwKTtmb3IobGV0IGM9MDtjPGEubGVuZ3RoO2MrKylpZihjIGluIGEmJmFbY109PT1iKXJldHVybiBjO3JldHVybiAtMX07ZnVuY3Rpb24gbWEoYSl7Y29uc3QgYj1hLmxlbmd0aDtpZigwPGIpe2NvbnN0IGM9QXJyYXkoYik7Zm9yKGxldCBkPTA7ZDxiO2QrKyljW2RdPWFbZF07cmV0dXJuIGN9cmV0dXJuIFtdfVxuZnVuY3Rpb24gbmEoYSxiKXtmb3IobGV0IGM9MTtjPGFyZ3VtZW50cy5sZW5ndGg7YysrKXtjb25zdCBkPWFyZ3VtZW50c1tjXTtpZihhYShkKSl7Y29uc3QgZT1hLmxlbmd0aHx8MCxmPWQubGVuZ3RofHwwO2EubGVuZ3RoPWUrZjtmb3IobGV0IGg9MDtoPGY7aCsrKWFbZStoXT1kW2hdO31lbHNlIGEucHVzaChkKTt9fWZ1bmN0aW9uIHcoYSxiKXt0aGlzLnR5cGU9YTt0aGlzLmc9dGhpcy50YXJnZXQ9Yjt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITE7fXcucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITA7fTt2YXIgb2E9ZnVuY3Rpb24oKXtpZighbC5hZGRFdmVudExpc3RlbmVyfHwhT2JqZWN0LmRlZmluZVByb3BlcnR5KXJldHVybiAhMTt2YXIgYT0hMSxiPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSh7fSxcInBhc3NpdmVcIix7Z2V0OmZ1bmN0aW9uKCl7YT0hMDt9fSk7dHJ5e2wuYWRkRXZlbnRMaXN0ZW5lcihcInRlc3RcIiwoKT0+e30sYiksbC5yZW1vdmVFdmVudExpc3RlbmVyKFwidGVzdFwiLCgpPT57fSxiKTt9Y2F0Y2goYyl7fXJldHVybiBhfSgpO2Z1bmN0aW9uIHgoYSl7cmV0dXJuIC9eW1xcc1xceGEwXSokLy50ZXN0KGEpfWZ1bmN0aW9uIHBhKCl7dmFyIGE9bC5uYXZpZ2F0b3I7cmV0dXJuIGEmJihhPWEudXNlckFnZW50KT9hOlwiXCJ9ZnVuY3Rpb24geShhKXtyZXR1cm4gLTEhPXBhKCkuaW5kZXhPZihhKX1mdW5jdGlvbiBxYShhKXtxYVtcIiBcIl0oYSk7cmV0dXJuIGF9cWFbXCIgXCJdPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiByYShhLGIpe3ZhciBjPXNhO3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYyxhKT9jW2FdOmNbYV09YihhKX12YXIgdGE9eShcIk9wZXJhXCIpLHo9eShcIlRyaWRlbnRcIil8fHkoXCJNU0lFXCIpLHVhPXkoXCJFZGdlXCIpLHZhPXVhfHx6LHdhPXkoXCJHZWNrb1wiKSYmISgtMSE9cGEoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJ3ZWJraXRcIikmJiF5KFwiRWRnZVwiKSkmJiEoeShcIlRyaWRlbnRcIil8fHkoXCJNU0lFXCIpKSYmIXkoXCJFZGdlXCIpLHhhPS0xIT1wYSgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIndlYmtpdFwiKSYmIXkoXCJFZGdlXCIpO2Z1bmN0aW9uIHlhKCl7dmFyIGE9bC5kb2N1bWVudDtyZXR1cm4gYT9hLmRvY3VtZW50TW9kZTp2b2lkIDB9dmFyIHphO1xuYTp7dmFyIEFhPVwiXCIsQmE9ZnVuY3Rpb24oKXt2YXIgYT1wYSgpO2lmKHdhKXJldHVybiAvcnY6KFteXFwpO10rKShcXCl8OykvLmV4ZWMoYSk7aWYodWEpcmV0dXJuIC9FZGdlXFwvKFtcXGRcXC5dKykvLmV4ZWMoYSk7aWYoeilyZXR1cm4gL1xcYig/Ok1TSUV8cnYpWzogXShbXlxcKTtdKykoXFwpfDspLy5leGVjKGEpO2lmKHhhKXJldHVybiAvV2ViS2l0XFwvKFxcUyspLy5leGVjKGEpO2lmKHRhKXJldHVybiAvKD86VmVyc2lvbilbIFxcL10/KFxcUyspLy5leGVjKGEpfSgpO0JhJiYoQWE9QmE/QmFbMV06XCJcIik7aWYoeil7dmFyIENhPXlhKCk7aWYobnVsbCE9Q2EmJkNhPnBhcnNlRmxvYXQoQWEpKXt6YT1TdHJpbmcoQ2EpO2JyZWFrIGF9fXphPUFhO312YXIgRGE7aWYobC5kb2N1bWVudCYmeil7dmFyIEVhPXlhKCk7RGE9RWE/RWE6cGFyc2VJbnQoemEsMTApfHx2b2lkIDA7fWVsc2UgRGE9dm9pZCAwO3ZhciBGYT1EYTtmdW5jdGlvbiBBKGEsYil7dy5jYWxsKHRoaXMsYT9hLnR5cGU6XCJcIik7dGhpcy5yZWxhdGVkVGFyZ2V0PXRoaXMuZz10aGlzLnRhcmdldD1udWxsO3RoaXMuYnV0dG9uPXRoaXMuc2NyZWVuWT10aGlzLnNjcmVlblg9dGhpcy5jbGllbnRZPXRoaXMuY2xpZW50WD0wO3RoaXMua2V5PVwiXCI7dGhpcy5tZXRhS2V5PXRoaXMuc2hpZnRLZXk9dGhpcy5hbHRLZXk9dGhpcy5jdHJsS2V5PSExO3RoaXMuc3RhdGU9bnVsbDt0aGlzLnBvaW50ZXJJZD0wO3RoaXMucG9pbnRlclR5cGU9XCJcIjt0aGlzLmk9bnVsbDtpZihhKXt2YXIgYz10aGlzLnR5cGU9YS50eXBlLGQ9YS5jaGFuZ2VkVG91Y2hlcyYmYS5jaGFuZ2VkVG91Y2hlcy5sZW5ndGg/YS5jaGFuZ2VkVG91Y2hlc1swXTpudWxsO3RoaXMudGFyZ2V0PWEudGFyZ2V0fHxhLnNyY0VsZW1lbnQ7dGhpcy5nPWI7aWYoYj1hLnJlbGF0ZWRUYXJnZXQpe2lmKHdhKXthOnt0cnl7cWEoYi5ub2RlTmFtZSk7dmFyIGU9ITA7YnJlYWsgYX1jYXRjaChmKXt9ZT1cbiExO31lfHwoYj1udWxsKTt9fWVsc2UgXCJtb3VzZW92ZXJcIj09Yz9iPWEuZnJvbUVsZW1lbnQ6XCJtb3VzZW91dFwiPT1jJiYoYj1hLnRvRWxlbWVudCk7dGhpcy5yZWxhdGVkVGFyZ2V0PWI7ZD8odGhpcy5jbGllbnRYPXZvaWQgMCE9PWQuY2xpZW50WD9kLmNsaWVudFg6ZC5wYWdlWCx0aGlzLmNsaWVudFk9dm9pZCAwIT09ZC5jbGllbnRZP2QuY2xpZW50WTpkLnBhZ2VZLHRoaXMuc2NyZWVuWD1kLnNjcmVlblh8fDAsdGhpcy5zY3JlZW5ZPWQuc2NyZWVuWXx8MCk6KHRoaXMuY2xpZW50WD12b2lkIDAhPT1hLmNsaWVudFg/YS5jbGllbnRYOmEucGFnZVgsdGhpcy5jbGllbnRZPXZvaWQgMCE9PWEuY2xpZW50WT9hLmNsaWVudFk6YS5wYWdlWSx0aGlzLnNjcmVlblg9YS5zY3JlZW5YfHwwLHRoaXMuc2NyZWVuWT1hLnNjcmVlbll8fDApO3RoaXMuYnV0dG9uPWEuYnV0dG9uO3RoaXMua2V5PWEua2V5fHxcIlwiO3RoaXMuY3RybEtleT1hLmN0cmxLZXk7dGhpcy5hbHRLZXk9YS5hbHRLZXk7dGhpcy5zaGlmdEtleT1cbmEuc2hpZnRLZXk7dGhpcy5tZXRhS2V5PWEubWV0YUtleTt0aGlzLnBvaW50ZXJJZD1hLnBvaW50ZXJJZHx8MDt0aGlzLnBvaW50ZXJUeXBlPVwic3RyaW5nXCI9PT10eXBlb2YgYS5wb2ludGVyVHlwZT9hLnBvaW50ZXJUeXBlOkdhW2EucG9pbnRlclR5cGVdfHxcIlwiO3RoaXMuc3RhdGU9YS5zdGF0ZTt0aGlzLmk9YTthLmRlZmF1bHRQcmV2ZW50ZWQmJkEuJC5oLmNhbGwodGhpcyk7fX1yKEEsdyk7dmFyIEdhPXsyOlwidG91Y2hcIiwzOlwicGVuXCIsNDpcIm1vdXNlXCJ9O0EucHJvdG90eXBlLmg9ZnVuY3Rpb24oKXtBLiQuaC5jYWxsKHRoaXMpO3ZhciBhPXRoaXMuaTthLnByZXZlbnREZWZhdWx0P2EucHJldmVudERlZmF1bHQoKTphLnJldHVyblZhbHVlPSExO307dmFyIEhhPVwiY2xvc3VyZV9saXN0ZW5hYmxlX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKTt2YXIgSWE9MDtmdW5jdGlvbiBKYShhLGIsYyxkLGUpe3RoaXMubGlzdGVuZXI9YTt0aGlzLnByb3h5PW51bGw7dGhpcy5zcmM9Yjt0aGlzLnR5cGU9Yzt0aGlzLmNhcHR1cmU9ISFkO3RoaXMubGE9ZTt0aGlzLmtleT0rK0lhO3RoaXMuZmE9dGhpcy5pYT0hMTt9ZnVuY3Rpb24gS2EoYSl7YS5mYT0hMDthLmxpc3RlbmVyPW51bGw7YS5wcm94eT1udWxsO2Euc3JjPW51bGw7YS5sYT1udWxsO31mdW5jdGlvbiBOYShhLGIsYyl7Zm9yKGNvbnN0IGQgaW4gYSliLmNhbGwoYyxhW2RdLGQsYSk7fWZ1bmN0aW9uIE9hKGEsYil7Zm9yKGNvbnN0IGMgaW4gYSliLmNhbGwodm9pZCAwLGFbY10sYyxhKTt9ZnVuY3Rpb24gUGEoYSl7Y29uc3QgYj17fTtmb3IoY29uc3QgYyBpbiBhKWJbY109YVtjXTtyZXR1cm4gYn1jb25zdCBRYT1cImNvbnN0cnVjdG9yIGhhc093blByb3BlcnR5IGlzUHJvdG90eXBlT2YgcHJvcGVydHlJc0VudW1lcmFibGUgdG9Mb2NhbGVTdHJpbmcgdG9TdHJpbmcgdmFsdWVPZlwiLnNwbGl0KFwiIFwiKTtmdW5jdGlvbiBSYShhLGIpe2xldCBjLGQ7Zm9yKGxldCBlPTE7ZTxhcmd1bWVudHMubGVuZ3RoO2UrKyl7ZD1hcmd1bWVudHNbZV07Zm9yKGMgaW4gZClhW2NdPWRbY107Zm9yKGxldCBmPTA7ZjxRYS5sZW5ndGg7ZisrKWM9UWFbZl0sT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGQsYykmJihhW2NdPWRbY10pO319ZnVuY3Rpb24gU2EoYSl7dGhpcy5zcmM9YTt0aGlzLmc9e307dGhpcy5oPTA7fVNhLnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oYSxiLGMsZCxlKXt2YXIgZj1hLnRvU3RyaW5nKCk7YT10aGlzLmdbZl07YXx8KGE9dGhpcy5nW2ZdPVtdLHRoaXMuaCsrKTt2YXIgaD1UYShhLGIsZCxlKTstMTxoPyhiPWFbaF0sY3x8KGIuaWE9ITEpKTooYj1uZXcgSmEoYix0aGlzLnNyYyxmLCEhZCxlKSxiLmlhPWMsYS5wdXNoKGIpKTtyZXR1cm4gYn07ZnVuY3Rpb24gVWEoYSxiKXt2YXIgYz1iLnR5cGU7aWYoYyBpbiBhLmcpe3ZhciBkPWEuZ1tjXSxlPWthKGQsYiksZjsoZj0wPD1lKSYmQXJyYXkucHJvdG90eXBlLnNwbGljZS5jYWxsKGQsZSwxKTtmJiYoS2EoYiksMD09YS5nW2NdLmxlbmd0aCYmKGRlbGV0ZSBhLmdbY10sYS5oLS0pKTt9fVxuZnVuY3Rpb24gVGEoYSxiLGMsZCl7Zm9yKHZhciBlPTA7ZTxhLmxlbmd0aDsrK2Upe3ZhciBmPWFbZV07aWYoIWYuZmEmJmYubGlzdGVuZXI9PWImJmYuY2FwdHVyZT09ISFjJiZmLmxhPT1kKXJldHVybiBlfXJldHVybiAtMX12YXIgVmE9XCJjbG9zdXJlX2xtX1wiKygxRTYqTWF0aC5yYW5kb20oKXwwKSxXYT17fTtmdW5jdGlvbiBZYShhLGIsYyxkLGUpe2lmKGQmJmQub25jZSlyZXR1cm4gWmEoYSxiLGMsZCxlKTtpZihBcnJheS5pc0FycmF5KGIpKXtmb3IodmFyIGY9MDtmPGIubGVuZ3RoO2YrKylZYShhLGJbZl0sYyxkLGUpO3JldHVybiBudWxsfWM9JGEoYyk7cmV0dXJuIGEmJmFbSGFdP2EuTyhiLGMscChkKT8hIWQuY2FwdHVyZTohIWQsZSk6YWIoYSxiLGMsITEsZCxlKX1cbmZ1bmN0aW9uIGFiKGEsYixjLGQsZSxmKXtpZighYil0aHJvdyBFcnJvcihcIkludmFsaWQgZXZlbnQgdHlwZVwiKTt2YXIgaD1wKGUpPyEhZS5jYXB0dXJlOiEhZSxuPWJiKGEpO258fChhW1ZhXT1uPW5ldyBTYShhKSk7Yz1uLmFkZChiLGMsZCxoLGYpO2lmKGMucHJveHkpcmV0dXJuIGM7ZD1jYigpO2MucHJveHk9ZDtkLnNyYz1hO2QubGlzdGVuZXI9YztpZihhLmFkZEV2ZW50TGlzdGVuZXIpb2F8fChlPWgpLHZvaWQgMD09PWUmJihlPSExKSxhLmFkZEV2ZW50TGlzdGVuZXIoYi50b1N0cmluZygpLGQsZSk7ZWxzZSBpZihhLmF0dGFjaEV2ZW50KWEuYXR0YWNoRXZlbnQoZGIoYi50b1N0cmluZygpKSxkKTtlbHNlIGlmKGEuYWRkTGlzdGVuZXImJmEucmVtb3ZlTGlzdGVuZXIpYS5hZGRMaXN0ZW5lcihkKTtlbHNlIHRocm93IEVycm9yKFwiYWRkRXZlbnRMaXN0ZW5lciBhbmQgYXR0YWNoRXZlbnQgYXJlIHVuYXZhaWxhYmxlLlwiKTtyZXR1cm4gY31cbmZ1bmN0aW9uIGNiKCl7ZnVuY3Rpb24gYShjKXtyZXR1cm4gYi5jYWxsKGEuc3JjLGEubGlzdGVuZXIsYyl9Y29uc3QgYj1lYjtyZXR1cm4gYX1mdW5jdGlvbiBaYShhLGIsYyxkLGUpe2lmKEFycmF5LmlzQXJyYXkoYikpe2Zvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKVphKGEsYltmXSxjLGQsZSk7cmV0dXJuIG51bGx9Yz0kYShjKTtyZXR1cm4gYSYmYVtIYV0/YS5QKGIsYyxwKGQpPyEhZC5jYXB0dXJlOiEhZCxlKTphYihhLGIsYywhMCxkLGUpfVxuZnVuY3Rpb24gZmIoYSxiLGMsZCxlKXtpZihBcnJheS5pc0FycmF5KGIpKWZvcih2YXIgZj0wO2Y8Yi5sZW5ndGg7ZisrKWZiKGEsYltmXSxjLGQsZSk7ZWxzZSAoZD1wKGQpPyEhZC5jYXB0dXJlOiEhZCxjPSRhKGMpLGEmJmFbSGFdKT8oYT1hLmksYj1TdHJpbmcoYikudG9TdHJpbmcoKSxiIGluIGEuZyYmKGY9YS5nW2JdLGM9VGEoZixjLGQsZSksLTE8YyYmKEthKGZbY10pLEFycmF5LnByb3RvdHlwZS5zcGxpY2UuY2FsbChmLGMsMSksMD09Zi5sZW5ndGgmJihkZWxldGUgYS5nW2JdLGEuaC0tKSkpKTphJiYoYT1iYihhKSkmJihiPWEuZ1tiLnRvU3RyaW5nKCldLGE9LTEsYiYmKGE9VGEoYixjLGQsZSkpLChjPS0xPGE/YlthXTpudWxsKSYmZ2IoYykpO31cbmZ1bmN0aW9uIGdiKGEpe2lmKFwibnVtYmVyXCIhPT10eXBlb2YgYSYmYSYmIWEuZmEpe3ZhciBiPWEuc3JjO2lmKGImJmJbSGFdKVVhKGIuaSxhKTtlbHNlIHt2YXIgYz1hLnR5cGUsZD1hLnByb3h5O2IucmVtb3ZlRXZlbnRMaXN0ZW5lcj9iLnJlbW92ZUV2ZW50TGlzdGVuZXIoYyxkLGEuY2FwdHVyZSk6Yi5kZXRhY2hFdmVudD9iLmRldGFjaEV2ZW50KGRiKGMpLGQpOmIuYWRkTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXImJmIucmVtb3ZlTGlzdGVuZXIoZCk7KGM9YmIoYikpPyhVYShjLGEpLDA9PWMuaCYmKGMuc3JjPW51bGwsYltWYV09bnVsbCkpOkthKGEpO319fWZ1bmN0aW9uIGRiKGEpe3JldHVybiBhIGluIFdhP1dhW2FdOldhW2FdPVwib25cIithfWZ1bmN0aW9uIGViKGEsYil7aWYoYS5mYSlhPSEwO2Vsc2Uge2I9bmV3IEEoYix0aGlzKTt2YXIgYz1hLmxpc3RlbmVyLGQ9YS5sYXx8YS5zcmM7YS5pYSYmZ2IoYSk7YT1jLmNhbGwoZCxiKTt9cmV0dXJuIGF9XG5mdW5jdGlvbiBiYihhKXthPWFbVmFdO3JldHVybiBhIGluc3RhbmNlb2YgU2E/YTpudWxsfXZhciBoYj1cIl9fY2xvc3VyZV9ldmVudHNfZm5fXCIrKDFFOSpNYXRoLnJhbmRvbSgpPj4+MCk7ZnVuY3Rpb24gJGEoYSl7aWYoXCJmdW5jdGlvblwiPT09dHlwZW9mIGEpcmV0dXJuIGE7YVtoYl18fChhW2hiXT1mdW5jdGlvbihiKXtyZXR1cm4gYS5oYW5kbGVFdmVudChiKX0pO3JldHVybiBhW2hiXX1mdW5jdGlvbiBCKCl7di5jYWxsKHRoaXMpO3RoaXMuaT1uZXcgU2EodGhpcyk7dGhpcy5TPXRoaXM7dGhpcy5KPW51bGw7fXIoQix2KTtCLnByb3RvdHlwZVtIYV09ITA7Qi5wcm90b3R5cGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbihhLGIsYyxkKXtmYih0aGlzLGEsYixjLGQpO307XG5mdW5jdGlvbiBDKGEsYil7dmFyIGMsZD1hLko7aWYoZClmb3IoYz1bXTtkO2Q9ZC5KKWMucHVzaChkKTthPWEuUztkPWIudHlwZXx8YjtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpYj1uZXcgdyhiLGEpO2Vsc2UgaWYoYiBpbnN0YW5jZW9mIHcpYi50YXJnZXQ9Yi50YXJnZXR8fGE7ZWxzZSB7dmFyIGU9YjtiPW5ldyB3KGQsYSk7UmEoYixlKTt9ZT0hMDtpZihjKWZvcih2YXIgZj1jLmxlbmd0aC0xOzA8PWY7Zi0tKXt2YXIgaD1iLmc9Y1tmXTtlPWliKGgsZCwhMCxiKSYmZTt9aD1iLmc9YTtlPWliKGgsZCwhMCxiKSYmZTtlPWliKGgsZCwhMSxiKSYmZTtpZihjKWZvcihmPTA7ZjxjLmxlbmd0aDtmKyspaD1iLmc9Y1tmXSxlPWliKGgsZCwhMSxiKSYmZTt9XG5CLnByb3RvdHlwZS5OPWZ1bmN0aW9uKCl7Qi4kLk4uY2FsbCh0aGlzKTtpZih0aGlzLmkpe3ZhciBhPXRoaXMuaSxjO2ZvcihjIGluIGEuZyl7Zm9yKHZhciBkPWEuZ1tjXSxlPTA7ZTxkLmxlbmd0aDtlKyspS2EoZFtlXSk7ZGVsZXRlIGEuZ1tjXTthLmgtLTt9fXRoaXMuSj1udWxsO307Qi5wcm90b3R5cGUuTz1mdW5jdGlvbihhLGIsYyxkKXtyZXR1cm4gdGhpcy5pLmFkZChTdHJpbmcoYSksYiwhMSxjLGQpfTtCLnByb3RvdHlwZS5QPWZ1bmN0aW9uKGEsYixjLGQpe3JldHVybiB0aGlzLmkuYWRkKFN0cmluZyhhKSxiLCEwLGMsZCl9O1xuZnVuY3Rpb24gaWIoYSxiLGMsZCl7Yj1hLmkuZ1tTdHJpbmcoYildO2lmKCFiKXJldHVybiAhMDtiPWIuY29uY2F0KCk7Zm9yKHZhciBlPSEwLGY9MDtmPGIubGVuZ3RoOysrZil7dmFyIGg9YltmXTtpZihoJiYhaC5mYSYmaC5jYXB0dXJlPT1jKXt2YXIgbj1oLmxpc3RlbmVyLHQ9aC5sYXx8aC5zcmM7aC5pYSYmVWEoYS5pLGgpO2U9ITEhPT1uLmNhbGwodCxkKSYmZTt9fXJldHVybiBlJiYhZC5kZWZhdWx0UHJldmVudGVkfXZhciBqYj1sLkpTT04uc3RyaW5naWZ5O2NsYXNzIGtie2NvbnN0cnVjdG9yKGEsYil7dGhpcy5pPWE7dGhpcy5qPWI7dGhpcy5oPTA7dGhpcy5nPW51bGw7fWdldCgpe2xldCBhOzA8dGhpcy5oPyh0aGlzLmgtLSxhPXRoaXMuZyx0aGlzLmc9YS5uZXh0LGEubmV4dD1udWxsKTphPXRoaXMuaSgpO3JldHVybiBhfX1mdW5jdGlvbiBsYigpe3ZhciBhPW1iO2xldCBiPW51bGw7YS5nJiYoYj1hLmcsYS5nPWEuZy5uZXh0LGEuZ3x8KGEuaD1udWxsKSxiLm5leHQ9bnVsbCk7cmV0dXJuIGJ9Y2xhc3MgbmJ7Y29uc3RydWN0b3IoKXt0aGlzLmg9dGhpcy5nPW51bGw7fWFkZChhLGIpe2NvbnN0IGM9b2IuZ2V0KCk7Yy5zZXQoYSxiKTt0aGlzLmg/dGhpcy5oLm5leHQ9Yzp0aGlzLmc9Yzt0aGlzLmg9Yzt9fXZhciBvYj1uZXcga2IoKCk9Pm5ldyBwYixhPT5hLnJlc2V0KCkpO2NsYXNzIHBie2NvbnN0cnVjdG9yKCl7dGhpcy5uZXh0PXRoaXMuZz10aGlzLmg9bnVsbDt9c2V0KGEsYil7dGhpcy5oPWE7dGhpcy5nPWI7dGhpcy5uZXh0PW51bGw7fXJlc2V0KCl7dGhpcy5uZXh0PXRoaXMuZz10aGlzLmg9bnVsbDt9fWZ1bmN0aW9uIHFiKGEpe3ZhciBiPTE7YT1hLnNwbGl0KFwiOlwiKTtjb25zdCBjPVtdO2Zvcig7MDxiJiZhLmxlbmd0aDspYy5wdXNoKGEuc2hpZnQoKSksYi0tO2EubGVuZ3RoJiZjLnB1c2goYS5qb2luKFwiOlwiKSk7cmV0dXJuIGN9ZnVuY3Rpb24gcmIoYSl7bC5zZXRUaW1lb3V0KCgpPT57dGhyb3cgYTt9LDApO31sZXQgc2IsdGI9ITEsbWI9bmV3IG5iLHZiPSgpPT57Y29uc3QgYT1sLlByb21pc2UucmVzb2x2ZSh2b2lkIDApO3NiPSgpPT57YS50aGVuKHViKTt9O307dmFyIHViPSgpPT57Zm9yKHZhciBhO2E9bGIoKTspe3RyeXthLmguY2FsbChhLmcpO31jYXRjaChjKXtyYihjKTt9dmFyIGI9b2I7Yi5qKGEpOzEwMD5iLmgmJihiLmgrKyxhLm5leHQ9Yi5nLGIuZz1hKTt9dGI9ITE7fTtmdW5jdGlvbiB3YihhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLmg9YXx8MTt0aGlzLmc9Ynx8bDt0aGlzLmo9cSh0aGlzLnFiLHRoaXMpO3RoaXMubD1EYXRlLm5vdygpO31yKHdiLEIpO2s9d2IucHJvdG90eXBlO2suZ2E9ITE7ay5UPW51bGw7ay5xYj1mdW5jdGlvbigpe2lmKHRoaXMuZ2Epe3ZhciBhPURhdGUubm93KCktdGhpcy5sOzA8YSYmYTwuOCp0aGlzLmg/dGhpcy5UPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgtYSk6KHRoaXMuVCYmKHRoaXMuZy5jbGVhclRpbWVvdXQodGhpcy5UKSx0aGlzLlQ9bnVsbCksQyh0aGlzLFwidGlja1wiKSx0aGlzLmdhJiYoeGIodGhpcyksdGhpcy5zdGFydCgpKSk7fX07ay5zdGFydD1mdW5jdGlvbigpe3RoaXMuZ2E9ITA7dGhpcy5UfHwodGhpcy5UPXRoaXMuZy5zZXRUaW1lb3V0KHRoaXMuaix0aGlzLmgpLHRoaXMubD1EYXRlLm5vdygpKTt9O1xuZnVuY3Rpb24geGIoYSl7YS5nYT0hMTthLlQmJihhLmcuY2xlYXJUaW1lb3V0KGEuVCksYS5UPW51bGwpO31rLk49ZnVuY3Rpb24oKXt3Yi4kLk4uY2FsbCh0aGlzKTt4Yih0aGlzKTtkZWxldGUgdGhpcy5nO307ZnVuY3Rpb24geWIoYSxiLGMpe2lmKFwiZnVuY3Rpb25cIj09PXR5cGVvZiBhKWMmJihhPXEoYSxjKSk7ZWxzZSBpZihhJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBhLmhhbmRsZUV2ZW50KWE9cShhLmhhbmRsZUV2ZW50LGEpO2Vsc2UgdGhyb3cgRXJyb3IoXCJJbnZhbGlkIGxpc3RlbmVyIGFyZ3VtZW50XCIpO3JldHVybiAyMTQ3NDgzNjQ3PE51bWJlcihiKT8tMTpsLnNldFRpbWVvdXQoYSxifHwwKX1mdW5jdGlvbiB6YihhKXthLmc9eWIoKCk9PnthLmc9bnVsbDthLmkmJihhLmk9ITEsemIoYSkpO30sYS5qKTtjb25zdCBiPWEuaDthLmg9bnVsbDthLm0uYXBwbHkobnVsbCxiKTt9Y2xhc3MgQWIgZXh0ZW5kcyB2e2NvbnN0cnVjdG9yKGEsYil7c3VwZXIoKTt0aGlzLm09YTt0aGlzLmo9Yjt0aGlzLmg9bnVsbDt0aGlzLmk9ITE7dGhpcy5nPW51bGw7fWwoYSl7dGhpcy5oPWFyZ3VtZW50czt0aGlzLmc/dGhpcy5pPSEwOnpiKHRoaXMpO31OKCl7c3VwZXIuTigpO3RoaXMuZyYmKGwuY2xlYXJUaW1lb3V0KHRoaXMuZyksdGhpcy5nPW51bGwsdGhpcy5pPSExLHRoaXMuaD1udWxsKTt9fWZ1bmN0aW9uIEJiKGEpe3YuY2FsbCh0aGlzKTt0aGlzLmg9YTt0aGlzLmc9e307fXIoQmIsdik7dmFyIENiPVtdO2Z1bmN0aW9uIERiKGEsYixjLGQpe0FycmF5LmlzQXJyYXkoYyl8fChjJiYoQ2JbMF09Yy50b1N0cmluZygpKSxjPUNiKTtmb3IodmFyIGU9MDtlPGMubGVuZ3RoO2UrKyl7dmFyIGY9WWEoYixjW2VdLGR8fGEuaGFuZGxlRXZlbnQsITEsYS5ofHxhKTtpZighZilicmVhazthLmdbZi5rZXldPWY7fX1mdW5jdGlvbiBGYihhKXtOYShhLmcsZnVuY3Rpb24oYixjKXt0aGlzLmcuaGFzT3duUHJvcGVydHkoYykmJmdiKGIpO30sYSk7YS5nPXt9O31CYi5wcm90b3R5cGUuTj1mdW5jdGlvbigpe0JiLiQuTi5jYWxsKHRoaXMpO0ZiKHRoaXMpO307QmIucHJvdG90eXBlLmhhbmRsZUV2ZW50PWZ1bmN0aW9uKCl7dGhyb3cgRXJyb3IoXCJFdmVudEhhbmRsZXIuaGFuZGxlRXZlbnQgbm90IGltcGxlbWVudGVkXCIpO307ZnVuY3Rpb24gR2IoKXt0aGlzLmc9ITA7fUdiLnByb3RvdHlwZS5FYT1mdW5jdGlvbigpe3RoaXMuZz0hMTt9O2Z1bmN0aW9uIEhiKGEsYixjLGQsZSxmKXthLmluZm8oZnVuY3Rpb24oKXtpZihhLmcpaWYoZil7dmFyIGg9XCJcIjtmb3IodmFyIG49Zi5zcGxpdChcIiZcIiksdD0wO3Q8bi5sZW5ndGg7dCsrKXt2YXIgbT1uW3RdLnNwbGl0KFwiPVwiKTtpZigxPG0ubGVuZ3RoKXt2YXIgdT1tWzBdO209bVsxXTt2YXIgTD11LnNwbGl0KFwiX1wiKTtoPTI8PUwubGVuZ3RoJiZcInR5cGVcIj09TFsxXT9oKyh1K1wiPVwiK20rXCImXCIpOmgrKHUrXCI9cmVkYWN0ZWQmXCIpO319fWVsc2UgaD1udWxsO2Vsc2UgaD1mO3JldHVybiBcIlhNTEhUVFAgUkVRIChcIitkK1wiKSBbYXR0ZW1wdCBcIitlK1wiXTogXCIrYitcIlxcblwiK2MrXCJcXG5cIitofSk7fVxuZnVuY3Rpb24gSWIoYSxiLGMsZCxlLGYsaCl7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiWE1MSFRUUCBSRVNQIChcIitkK1wiKSBbIGF0dGVtcHQgXCIrZStcIl06IFwiK2IrXCJcXG5cIitjK1wiXFxuXCIrZitcIiBcIitofSk7fWZ1bmN0aW9uIEQoYSxiLGMsZCl7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiWE1MSFRUUCBURVhUIChcIitiK1wiKTogXCIrSmIoYSxjKSsoZD9cIiBcIitkOlwiXCIpfSk7fWZ1bmN0aW9uIEtiKGEsYil7YS5pbmZvKGZ1bmN0aW9uKCl7cmV0dXJuIFwiVElNRU9VVDogXCIrYn0pO31HYi5wcm90b3R5cGUuaW5mbz1mdW5jdGlvbigpe307XG5mdW5jdGlvbiBKYihhLGIpe2lmKCFhLmcpcmV0dXJuIGI7aWYoIWIpcmV0dXJuIG51bGw7dHJ5e3ZhciBjPUpTT04ucGFyc2UoYik7aWYoYylmb3IoYT0wO2E8Yy5sZW5ndGg7YSsrKWlmKEFycmF5LmlzQXJyYXkoY1thXSkpe3ZhciBkPWNbYV07aWYoISgyPmQubGVuZ3RoKSl7dmFyIGU9ZFsxXTtpZihBcnJheS5pc0FycmF5KGUpJiYhKDE+ZS5sZW5ndGgpKXt2YXIgZj1lWzBdO2lmKFwibm9vcFwiIT1mJiZcInN0b3BcIiE9ZiYmXCJjbG9zZVwiIT1mKWZvcih2YXIgaD0xO2g8ZS5sZW5ndGg7aCsrKWVbaF09XCJcIjt9fX1yZXR1cm4gamIoYyl9Y2F0Y2gobil7cmV0dXJuIGJ9fXZhciBFPXt9LExiPW51bGw7ZnVuY3Rpb24gTWIoKXtyZXR1cm4gTGI9TGJ8fG5ldyBCfUUuVGE9XCJzZXJ2ZXJyZWFjaGFiaWxpdHlcIjtmdW5jdGlvbiBOYihhKXt3LmNhbGwodGhpcyxFLlRhLGEpO31yKE5iLHcpO2Z1bmN0aW9uIE9iKGEpe2NvbnN0IGI9TWIoKTtDKGIsbmV3IE5iKGIpKTt9RS5TVEFUX0VWRU5UPVwic3RhdGV2ZW50XCI7ZnVuY3Rpb24gUGIoYSxiKXt3LmNhbGwodGhpcyxFLlNUQVRfRVZFTlQsYSk7dGhpcy5zdGF0PWI7fXIoUGIsdyk7ZnVuY3Rpb24gRihhKXtjb25zdCBiPU1iKCk7QyhiLG5ldyBQYihiLGEpKTt9RS5VYT1cInRpbWluZ2V2ZW50XCI7ZnVuY3Rpb24gUWIoYSxiKXt3LmNhbGwodGhpcyxFLlVhLGEpO3RoaXMuc2l6ZT1iO31yKFFiLHcpO1xuZnVuY3Rpb24gUmIoYSxiKXtpZihcImZ1bmN0aW9uXCIhPT10eXBlb2YgYSl0aHJvdyBFcnJvcihcIkZuIG11c3Qgbm90IGJlIG51bGwgYW5kIG11c3QgYmUgYSBmdW5jdGlvblwiKTtyZXR1cm4gbC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YSgpO30sYil9dmFyIFNiPXtOT19FUlJPUjowLHJiOjEsRWI6MixEYjozLHliOjQsQ2I6NSxGYjo2LFFhOjcsVElNRU9VVDo4LEliOjl9O3ZhciBUYj17d2I6XCJjb21wbGV0ZVwiLFNiOlwic3VjY2Vzc1wiLFJhOlwiZXJyb3JcIixRYTpcImFib3J0XCIsS2I6XCJyZWFkeVwiLExiOlwicmVhZHlzdGF0ZWNoYW5nZVwiLFRJTUVPVVQ6XCJ0aW1lb3V0XCIsR2I6XCJpbmNyZW1lbnRhbGRhdGFcIixKYjpcInByb2dyZXNzXCIsemI6XCJkb3dubG9hZHByb2dyZXNzXCIsJGI6XCJ1cGxvYWRwcm9ncmVzc1wifTtmdW5jdGlvbiBVYigpe31VYi5wcm90b3R5cGUuaD1udWxsO2Z1bmN0aW9uIFZiKGEpe3JldHVybiBhLmh8fChhLmg9YS5pKCkpfWZ1bmN0aW9uIFdiKCl7fXZhciBYYj17T1BFTjpcImFcIix2YjpcImJcIixSYTpcImNcIixIYjpcImRcIn07ZnVuY3Rpb24gWWIoKXt3LmNhbGwodGhpcyxcImRcIik7fXIoWWIsdyk7ZnVuY3Rpb24gWmIoKXt3LmNhbGwodGhpcyxcImNcIik7fXIoWmIsdyk7dmFyICRiO2Z1bmN0aW9uIGFjKCl7fXIoYWMsVWIpO2FjLnByb3RvdHlwZS5nPWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBYTUxIdHRwUmVxdWVzdH07YWMucHJvdG90eXBlLmk9ZnVuY3Rpb24oKXtyZXR1cm4ge319OyRiPW5ldyBhYztmdW5jdGlvbiBiYyhhLGIsYyxkKXt0aGlzLmw9YTt0aGlzLmo9Yjt0aGlzLm09Yzt0aGlzLlc9ZHx8MTt0aGlzLlU9bmV3IEJiKHRoaXMpO3RoaXMuUD1jYzthPXZhPzEyNTp2b2lkIDA7dGhpcy5WPW5ldyB3YihhKTt0aGlzLkk9bnVsbDt0aGlzLmk9ITE7dGhpcy5zPXRoaXMuQT10aGlzLnY9dGhpcy5MPXRoaXMuRz10aGlzLlk9dGhpcy5CPW51bGw7dGhpcy5GPVtdO3RoaXMuZz1udWxsO3RoaXMuQz0wO3RoaXMubz10aGlzLnU9bnVsbDt0aGlzLmNhPS0xO3RoaXMuSj0hMTt0aGlzLk89MDt0aGlzLk09bnVsbDt0aGlzLmJhPXRoaXMuSz10aGlzLmFhPXRoaXMuUz0hMTt0aGlzLmg9bmV3IGRjO31mdW5jdGlvbiBkYygpe3RoaXMuaT1udWxsO3RoaXMuZz1cIlwiO3RoaXMuaD0hMTt9dmFyIGNjPTQ1RTMsZWM9e30sZmM9e307az1iYy5wcm90b3R5cGU7ay5zZXRUaW1lb3V0PWZ1bmN0aW9uKGEpe3RoaXMuUD1hO307XG5mdW5jdGlvbiBnYyhhLGIsYyl7YS5MPTE7YS52PWhjKEcoYikpO2Eucz1jO2EuUz0hMDtpYyhhLG51bGwpO31mdW5jdGlvbiBpYyhhLGIpe2EuRz1EYXRlLm5vdygpO2pjKGEpO2EuQT1HKGEudik7dmFyIGM9YS5BLGQ9YS5XO0FycmF5LmlzQXJyYXkoZCl8fChkPVtTdHJpbmcoZCldKTtrYyhjLmksXCJ0XCIsZCk7YS5DPTA7Yz1hLmwuSjthLmg9bmV3IGRjO2EuZz1sYyhhLmwsYz9iOm51bGwsIWEucyk7MDxhLk8mJihhLk09bmV3IEFiKHEoYS5QYSxhLGEuZyksYS5PKSk7RGIoYS5VLGEuZyxcInJlYWR5c3RhdGVjaGFuZ2VcIixhLm5iKTtiPWEuST9QYShhLkkpOnt9O2Eucz8oYS51fHwoYS51PVwiUE9TVFwiKSxiW1wiQ29udGVudC1UeXBlXCJdPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsYS5nLmhhKGEuQSxhLnUsYS5zLGIpKTooYS51PVwiR0VUXCIsYS5nLmhhKGEuQSxhLnUsbnVsbCxiKSk7T2IoKTtIYihhLmosYS51LGEuQSxhLm0sYS5XLGEucyk7fVxuay5uYj1mdW5jdGlvbihhKXthPWEudGFyZ2V0O2NvbnN0IGI9dGhpcy5NO2ImJjM9PUgoYSk/Yi5sKCk6dGhpcy5QYShhKTt9O1xuay5QYT1mdW5jdGlvbihhKXt0cnl7aWYoYT09dGhpcy5nKWE6e2NvbnN0IHU9SCh0aGlzLmcpO3ZhciBiPXRoaXMuZy5JYSgpO2NvbnN0IEw9dGhpcy5nLmRhKCk7aWYoISgzPnUpJiYoMyE9dXx8dmF8fHRoaXMuZyYmKHRoaXMuaC5ofHx0aGlzLmcuamEoKXx8bWModGhpcy5nKSkpKXt0aGlzLkp8fDQhPXV8fDc9PWJ8fCg4PT1ifHwwPj1MP09iKDMpOk9iKDIpKTtuYyh0aGlzKTt2YXIgYz10aGlzLmcuZGEoKTt0aGlzLmNhPWM7YjppZihvYyh0aGlzKSl7dmFyIGQ9bWModGhpcy5nKTthPVwiXCI7dmFyIGU9ZC5sZW5ndGgsZj00PT1IKHRoaXMuZyk7aWYoIXRoaXMuaC5pKXtpZihcInVuZGVmaW5lZFwiPT09dHlwZW9mIFRleHREZWNvZGVyKXtJKHRoaXMpO3BjKHRoaXMpO3ZhciBoPVwiXCI7YnJlYWsgYn10aGlzLmguaT1uZXcgbC5UZXh0RGVjb2Rlcjt9Zm9yKGI9MDtiPGU7YisrKXRoaXMuaC5oPSEwLGErPXRoaXMuaC5pLmRlY29kZShkW2JdLHtzdHJlYW06ZiYmYj09ZS0xfSk7ZC5zcGxpY2UoMCxcbmUpO3RoaXMuaC5nKz1hO3RoaXMuQz0wO2g9dGhpcy5oLmc7fWVsc2UgaD10aGlzLmcuamEoKTt0aGlzLmk9MjAwPT1jO0liKHRoaXMuaix0aGlzLnUsdGhpcy5BLHRoaXMubSx0aGlzLlcsdSxjKTtpZih0aGlzLmkpe2lmKHRoaXMuYWEmJiF0aGlzLkspe2I6e2lmKHRoaXMuZyl7dmFyIG4sdD10aGlzLmc7aWYoKG49dC5nP3QuZy5nZXRSZXNwb25zZUhlYWRlcihcIlgtSFRUUC1Jbml0aWFsLVJlc3BvbnNlXCIpOm51bGwpJiYheChuKSl7dmFyIG09bjticmVhayBifX1tPW51bGw7fWlmKGM9bSlEKHRoaXMuaix0aGlzLm0sYyxcIkluaXRpYWwgaGFuZHNoYWtlIHJlc3BvbnNlIHZpYSBYLUhUVFAtSW5pdGlhbC1SZXNwb25zZVwiKSx0aGlzLks9ITAscWModGhpcyxjKTtlbHNlIHt0aGlzLmk9ITE7dGhpcy5vPTM7RigxMik7SSh0aGlzKTtwYyh0aGlzKTticmVhayBhfX10aGlzLlM/KHJjKHRoaXMsdSxoKSx2YSYmdGhpcy5pJiYzPT11JiYoRGIodGhpcy5VLHRoaXMuVixcInRpY2tcIix0aGlzLm1iKSxcbnRoaXMuVi5zdGFydCgpKSk6KEQodGhpcy5qLHRoaXMubSxoLG51bGwpLHFjKHRoaXMsaCkpOzQ9PXUmJkkodGhpcyk7dGhpcy5pJiYhdGhpcy5KJiYoND09dT9zYyh0aGlzLmwsdGhpcyk6KHRoaXMuaT0hMSxqYyh0aGlzKSkpO31lbHNlIHRjKHRoaXMuZyksNDAwPT1jJiYwPGguaW5kZXhPZihcIlVua25vd24gU0lEXCIpPyh0aGlzLm89MyxGKDEyKSk6KHRoaXMubz0wLEYoMTMpKSxJKHRoaXMpLHBjKHRoaXMpO319fWNhdGNoKHUpe31maW5hbGx5e319O2Z1bmN0aW9uIG9jKGEpe3JldHVybiBhLmc/XCJHRVRcIj09YS51JiYyIT1hLkwmJmEubC5IYTohMX1cbmZ1bmN0aW9uIHJjKGEsYixjKXtsZXQgZD0hMCxlO2Zvcig7IWEuSiYmYS5DPGMubGVuZ3RoOylpZihlPXVjKGEsYyksZT09ZmMpezQ9PWImJihhLm89NCxGKDE0KSxkPSExKTtEKGEuaixhLm0sbnVsbCxcIltJbmNvbXBsZXRlIFJlc3BvbnNlXVwiKTticmVha31lbHNlIGlmKGU9PWVjKXthLm89NDtGKDE1KTtEKGEuaixhLm0sYyxcIltJbnZhbGlkIENodW5rXVwiKTtkPSExO2JyZWFrfWVsc2UgRChhLmosYS5tLGUsbnVsbCkscWMoYSxlKTtvYyhhKSYmZSE9ZmMmJmUhPWVjJiYoYS5oLmc9XCJcIixhLkM9MCk7NCE9Ynx8MCE9Yy5sZW5ndGh8fGEuaC5ofHwoYS5vPTEsRigxNiksZD0hMSk7YS5pPWEuaSYmZDtkPzA8Yy5sZW5ndGgmJiFhLmJhJiYoYS5iYT0hMCxiPWEubCxiLmc9PWEmJmIuY2EmJiFiLk0mJihiLmwuaW5mbyhcIkdyZWF0LCBubyBidWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQuIEJ5dGVzIHJlY2VpdmVkOiBcIitjLmxlbmd0aCksdmMoYiksYi5NPSEwLEYoMTEpKSk6KEQoYS5qLGEubSxcbmMsXCJbSW52YWxpZCBDaHVua2VkIFJlc3BvbnNlXVwiKSxJKGEpLHBjKGEpKTt9ay5tYj1mdW5jdGlvbigpe2lmKHRoaXMuZyl7dmFyIGE9SCh0aGlzLmcpLGI9dGhpcy5nLmphKCk7dGhpcy5DPGIubGVuZ3RoJiYobmModGhpcykscmModGhpcyxhLGIpLHRoaXMuaSYmNCE9YSYmamModGhpcykpO319O2Z1bmN0aW9uIHVjKGEsYil7dmFyIGM9YS5DLGQ9Yi5pbmRleE9mKFwiXFxuXCIsYyk7aWYoLTE9PWQpcmV0dXJuIGZjO2M9TnVtYmVyKGIuc3Vic3RyaW5nKGMsZCkpO2lmKGlzTmFOKGMpKXJldHVybiBlYztkKz0xO2lmKGQrYz5iLmxlbmd0aClyZXR1cm4gZmM7Yj1iLnNsaWNlKGQsZCtjKTthLkM9ZCtjO3JldHVybiBifWsuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5KPSEwO0kodGhpcyk7fTtmdW5jdGlvbiBqYyhhKXthLlk9RGF0ZS5ub3coKSthLlA7d2MoYSxhLlApO31cbmZ1bmN0aW9uIHdjKGEsYil7aWYobnVsbCE9YS5CKXRocm93IEVycm9yKFwiV2F0Y2hEb2cgdGltZXIgbm90IG51bGxcIik7YS5CPVJiKHEoYS5sYixhKSxiKTt9ZnVuY3Rpb24gbmMoYSl7YS5CJiYobC5jbGVhclRpbWVvdXQoYS5CKSxhLkI9bnVsbCk7fWsubGI9ZnVuY3Rpb24oKXt0aGlzLkI9bnVsbDtjb25zdCBhPURhdGUubm93KCk7MDw9YS10aGlzLlk/KEtiKHRoaXMuaix0aGlzLkEpLDIhPXRoaXMuTCYmKE9iKCksRigxNykpLEkodGhpcyksdGhpcy5vPTIscGModGhpcykpOndjKHRoaXMsdGhpcy5ZLWEpO307ZnVuY3Rpb24gcGMoYSl7MD09YS5sLkh8fGEuSnx8c2MoYS5sLGEpO31mdW5jdGlvbiBJKGEpe25jKGEpO3ZhciBiPWEuTTtiJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBiLnNhJiZiLnNhKCk7YS5NPW51bGw7eGIoYS5WKTtGYihhLlUpO2EuZyYmKGI9YS5nLGEuZz1udWxsLGIuYWJvcnQoKSxiLnNhKCkpO31cbmZ1bmN0aW9uIHFjKGEsYil7dHJ5e3ZhciBjPWEubDtpZigwIT1jLkgmJihjLmc9PWF8fHhjKGMuaSxhKSkpaWYoIWEuSyYmeGMoYy5pLGEpJiYzPT1jLkgpe3RyeXt2YXIgZD1jLkphLmcucGFyc2UoYik7fWNhdGNoKG0pe2Q9bnVsbDt9aWYoQXJyYXkuaXNBcnJheShkKSYmMz09ZC5sZW5ndGgpe3ZhciBlPWQ7aWYoMD09ZVswXSlhOntpZighYy51KXtpZihjLmcpaWYoYy5nLkcrM0UzPGEuRyl5YyhjKSx6YyhjKTtlbHNlIGJyZWFrIGE7QWMoYyk7RigxOCk7fX1lbHNlIGMuRmE9ZVsxXSwwPGMuRmEtYy5WJiYzNzUwMD5lWzJdJiZjLkcmJjA9PWMuQSYmIWMudiYmKGMudj1SYihxKGMuaWIsYyksNkUzKSk7aWYoMT49QmMoYy5pKSYmYy5vYSl7dHJ5e2Mub2EoKTt9Y2F0Y2gobSl7fWMub2E9dm9pZCAwO319ZWxzZSBKKGMsMTEpO31lbHNlIGlmKChhLkt8fGMuZz09YSkmJnljKGMpLCF4KGIpKWZvcihlPWMuSmEuZy5wYXJzZShiKSxiPTA7YjxlLmxlbmd0aDtiKyspe2xldCBtPWVbYl07Yy5WPVxubVswXTttPW1bMV07aWYoMj09Yy5IKWlmKFwiY1wiPT1tWzBdKXtjLks9bVsxXTtjLnBhPW1bMl07Y29uc3QgdT1tWzNdO251bGwhPXUmJihjLnJhPXUsYy5sLmluZm8oXCJWRVI9XCIrYy5yYSkpO2NvbnN0IEw9bVs0XTtudWxsIT1MJiYoYy5HYT1MLGMubC5pbmZvKFwiU1ZFUj1cIitjLkdhKSk7Y29uc3QgTGE9bVs1XTtudWxsIT1MYSYmXCJudW1iZXJcIj09PXR5cGVvZiBMYSYmMDxMYSYmKGQ9MS41KkxhLGMuTD1kLGMubC5pbmZvKFwiYmFja0NoYW5uZWxSZXF1ZXN0VGltZW91dE1zXz1cIitkKSk7ZD1jO2NvbnN0IGxhPWEuZztpZihsYSl7Y29uc3QgTWE9bGEuZz9sYS5nLmdldFJlc3BvbnNlSGVhZGVyKFwiWC1DbGllbnQtV2lyZS1Qcm90b2NvbFwiKTpudWxsO2lmKE1hKXt2YXIgZj1kLmk7Zi5nfHwtMT09TWEuaW5kZXhPZihcInNwZHlcIikmJi0xPT1NYS5pbmRleE9mKFwicXVpY1wiKSYmLTE9PU1hLmluZGV4T2YoXCJoMlwiKXx8KGYuaj1mLmwsZi5nPW5ldyBTZXQsZi5oJiYoQ2MoZixmLmgpLGYuaD1udWxsKSk7fWlmKGQuRil7Y29uc3QgRWI9XG5sYS5nP2xhLmcuZ2V0UmVzcG9uc2VIZWFkZXIoXCJYLUhUVFAtU2Vzc2lvbi1JZFwiKTpudWxsO0ViJiYoZC5EYT1FYixLKGQuSSxkLkYsRWIpKTt9fWMuSD0zO2MuaCYmYy5oLkJhKCk7Yy5jYSYmKGMuUz1EYXRlLm5vdygpLWEuRyxjLmwuaW5mbyhcIkhhbmRzaGFrZSBSVFQ6IFwiK2MuUytcIm1zXCIpKTtkPWM7dmFyIGg9YTtkLndhPURjKGQsZC5KP2QucGE6bnVsbCxkLlkpO2lmKGguSyl7RWMoZC5pLGgpO3ZhciBuPWgsdD1kLkw7dCYmbi5zZXRUaW1lb3V0KHQpO24uQiYmKG5jKG4pLGpjKG4pKTtkLmc9aDt9ZWxzZSBGYyhkKTswPGMuai5sZW5ndGgmJkdjKGMpO31lbHNlIFwic3RvcFwiIT1tWzBdJiZcImNsb3NlXCIhPW1bMF18fEooYyw3KTtlbHNlIDM9PWMuSCYmKFwic3RvcFwiPT1tWzBdfHxcImNsb3NlXCI9PW1bMF0/XCJzdG9wXCI9PW1bMF0/SihjLDcpOkhjKGMpOlwibm9vcFwiIT1tWzBdJiZjLmgmJmMuaC5BYShtKSxjLkE9MCk7fU9iKDQpO31jYXRjaChtKXt9fWZ1bmN0aW9uIEljKGEpe2lmKGEuWiYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5aKXJldHVybiBhLlooKTtpZihcInVuZGVmaW5lZFwiIT09dHlwZW9mIE1hcCYmYSBpbnN0YW5jZW9mIE1hcHx8XCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBTZXQmJmEgaW5zdGFuY2VvZiBTZXQpcmV0dXJuIEFycmF5LmZyb20oYS52YWx1ZXMoKSk7aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKXJldHVybiBhLnNwbGl0KFwiXCIpO2lmKGFhKGEpKXtmb3IodmFyIGI9W10sYz1hLmxlbmd0aCxkPTA7ZDxjO2QrKyliLnB1c2goYVtkXSk7cmV0dXJuIGJ9Yj1bXTtjPTA7Zm9yKGQgaW4gYSliW2MrK109YVtkXTtyZXR1cm4gYn1cbmZ1bmN0aW9uIEpjKGEpe2lmKGEudGEmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGEudGEpcmV0dXJuIGEudGEoKTtpZighYS5afHxcImZ1bmN0aW9uXCIhPXR5cGVvZiBhLlope2lmKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgTWFwJiZhIGluc3RhbmNlb2YgTWFwKXJldHVybiBBcnJheS5mcm9tKGEua2V5cygpKTtpZighKFwidW5kZWZpbmVkXCIhPT10eXBlb2YgU2V0JiZhIGluc3RhbmNlb2YgU2V0KSl7aWYoYWEoYSl8fFwic3RyaW5nXCI9PT10eXBlb2YgYSl7dmFyIGI9W107YT1hLmxlbmd0aDtmb3IodmFyIGM9MDtjPGE7YysrKWIucHVzaChjKTtyZXR1cm4gYn1iPVtdO2M9MDtmb3IoY29uc3QgZCBpbiBhKWJbYysrXT1kO3JldHVybiBifX19XG5mdW5jdGlvbiBLYyhhLGIpe2lmKGEuZm9yRWFjaCYmXCJmdW5jdGlvblwiPT10eXBlb2YgYS5mb3JFYWNoKWEuZm9yRWFjaChiLHZvaWQgMCk7ZWxzZSBpZihhYShhKXx8XCJzdHJpbmdcIj09PXR5cGVvZiBhKUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoYSxiLHZvaWQgMCk7ZWxzZSBmb3IodmFyIGM9SmMoYSksZD1JYyhhKSxlPWQubGVuZ3RoLGY9MDtmPGU7ZisrKWIuY2FsbCh2b2lkIDAsZFtmXSxjJiZjW2ZdLGEpO312YXIgTGM9UmVnRXhwKFwiXig/OihbXjovPyMuXSspOik/KD86Ly8oPzooW15cXFxcXFxcXC8/I10qKUApPyhbXlxcXFxcXFxcLz8jXSo/KSg/OjooWzAtOV0rKSk/KD89W1xcXFxcXFxcLz8jXXwkKSk/KFtePyNdKyk/KD86XFxcXD8oW14jXSopKT8oPzojKFtcXFxcc1xcXFxTXSopKT8kXCIpO2Z1bmN0aW9uIE1jKGEsYil7aWYoYSl7YT1hLnNwbGl0KFwiJlwiKTtmb3IodmFyIGM9MDtjPGEubGVuZ3RoO2MrKyl7dmFyIGQ9YVtjXS5pbmRleE9mKFwiPVwiKSxlPW51bGw7aWYoMDw9ZCl7dmFyIGY9YVtjXS5zdWJzdHJpbmcoMCxkKTtlPWFbY10uc3Vic3RyaW5nKGQrMSk7fWVsc2UgZj1hW2NdO2IoZixlP2RlY29kZVVSSUNvbXBvbmVudChlLnJlcGxhY2UoL1xcKy9nLFwiIFwiKSk6XCJcIik7fX19ZnVuY3Rpb24gTShhKXt0aGlzLmc9dGhpcy5zPXRoaXMuaj1cIlwiO3RoaXMubT1udWxsO3RoaXMubz10aGlzLmw9XCJcIjt0aGlzLmg9ITE7aWYoYSBpbnN0YW5jZW9mIE0pe3RoaXMuaD1hLmg7TmModGhpcyxhLmopO3RoaXMucz1hLnM7dGhpcy5nPWEuZztPYyh0aGlzLGEubSk7dGhpcy5sPWEubDt2YXIgYj1hLmk7dmFyIGM9bmV3IFBjO2MuaT1iLmk7Yi5nJiYoYy5nPW5ldyBNYXAoYi5nKSxjLmg9Yi5oKTtRYyh0aGlzLGMpO3RoaXMubz1hLm87fWVsc2UgYSYmKGI9U3RyaW5nKGEpLm1hdGNoKExjKSk/KHRoaXMuaD0hMSxOYyh0aGlzLGJbMV18fFwiXCIsITApLHRoaXMucz1SYyhiWzJdfHxcIlwiKSx0aGlzLmc9UmMoYlszXXx8XCJcIiwhMCksT2ModGhpcyxiWzRdKSx0aGlzLmw9UmMoYls1XXx8XCJcIiwhMCksUWModGhpcyxiWzZdfHxcIlwiLCEwKSx0aGlzLm89UmMoYls3XXx8XCJcIikpOih0aGlzLmg9ITEsdGhpcy5pPW5ldyBQYyhudWxsLHRoaXMuaCkpO31cbk0ucHJvdG90eXBlLnRvU3RyaW5nPWZ1bmN0aW9uKCl7dmFyIGE9W10sYj10aGlzLmo7YiYmYS5wdXNoKFNjKGIsVGMsITApLFwiOlwiKTt2YXIgYz10aGlzLmc7aWYoY3x8XCJmaWxlXCI9PWIpYS5wdXNoKFwiLy9cIiksKGI9dGhpcy5zKSYmYS5wdXNoKFNjKGIsVGMsITApLFwiQFwiKSxhLnB1c2goZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhjKSkucmVwbGFjZSgvJTI1KFswLTlhLWZBLUZdezJ9KS9nLFwiJSQxXCIpKSxjPXRoaXMubSxudWxsIT1jJiZhLnB1c2goXCI6XCIsU3RyaW5nKGMpKTtpZihjPXRoaXMubCl0aGlzLmcmJlwiL1wiIT1jLmNoYXJBdCgwKSYmYS5wdXNoKFwiL1wiKSxhLnB1c2goU2MoYyxcIi9cIj09Yy5jaGFyQXQoMCk/VWM6VmMsITApKTsoYz10aGlzLmkudG9TdHJpbmcoKSkmJmEucHVzaChcIj9cIixjKTsoYz10aGlzLm8pJiZhLnB1c2goXCIjXCIsU2MoYyxXYykpO3JldHVybiBhLmpvaW4oXCJcIil9O2Z1bmN0aW9uIEcoYSl7cmV0dXJuIG5ldyBNKGEpfVxuZnVuY3Rpb24gTmMoYSxiLGMpe2Euaj1jP1JjKGIsITApOmI7YS5qJiYoYS5qPWEuai5yZXBsYWNlKC86JC8sXCJcIikpO31mdW5jdGlvbiBPYyhhLGIpe2lmKGIpe2I9TnVtYmVyKGIpO2lmKGlzTmFOKGIpfHwwPmIpdGhyb3cgRXJyb3IoXCJCYWQgcG9ydCBudW1iZXIgXCIrYik7YS5tPWI7fWVsc2UgYS5tPW51bGw7fWZ1bmN0aW9uIFFjKGEsYixjKXtiIGluc3RhbmNlb2YgUGM/KGEuaT1iLFhjKGEuaSxhLmgpKTooY3x8KGI9U2MoYixZYykpLGEuaT1uZXcgUGMoYixhLmgpKTt9ZnVuY3Rpb24gSyhhLGIsYyl7YS5pLnNldChiLGMpO31mdW5jdGlvbiBoYyhhKXtLKGEsXCJ6eFwiLE1hdGguZmxvb3IoMjE0NzQ4MzY0OCpNYXRoLnJhbmRvbSgpKS50b1N0cmluZygzNikrTWF0aC5hYnMoTWF0aC5mbG9vcigyMTQ3NDgzNjQ4Kk1hdGgucmFuZG9tKCkpXkRhdGUubm93KCkpLnRvU3RyaW5nKDM2KSk7cmV0dXJuIGF9XG5mdW5jdGlvbiBSYyhhLGIpe3JldHVybiBhP2I/ZGVjb2RlVVJJKGEucmVwbGFjZSgvJTI1L2csXCIlMjUyNVwiKSk6ZGVjb2RlVVJJQ29tcG9uZW50KGEpOlwiXCJ9ZnVuY3Rpb24gU2MoYSxiLGMpe3JldHVybiBcInN0cmluZ1wiPT09dHlwZW9mIGE/KGE9ZW5jb2RlVVJJKGEpLnJlcGxhY2UoYixaYyksYyYmKGE9YS5yZXBsYWNlKC8lMjUoWzAtOWEtZkEtRl17Mn0pL2csXCIlJDFcIikpLGEpOm51bGx9ZnVuY3Rpb24gWmMoYSl7YT1hLmNoYXJDb2RlQXQoMCk7cmV0dXJuIFwiJVwiKyhhPj40JjE1KS50b1N0cmluZygxNikrKGEmMTUpLnRvU3RyaW5nKDE2KX12YXIgVGM9L1sjXFwvXFw/QF0vZyxWYz0vWyNcXD86XS9nLFVjPS9bI1xcP10vZyxZYz0vWyNcXD9AXS9nLFdjPS8jL2c7ZnVuY3Rpb24gUGMoYSxiKXt0aGlzLmg9dGhpcy5nPW51bGw7dGhpcy5pPWF8fG51bGw7dGhpcy5qPSEhYjt9XG5mdW5jdGlvbiBOKGEpe2EuZ3x8KGEuZz1uZXcgTWFwLGEuaD0wLGEuaSYmTWMoYS5pLGZ1bmN0aW9uKGIsYyl7YS5hZGQoZGVjb2RlVVJJQ29tcG9uZW50KGIucmVwbGFjZSgvXFwrL2csXCIgXCIpKSxjKTt9KSk7fWs9UGMucHJvdG90eXBlO2suYWRkPWZ1bmN0aW9uKGEsYil7Tih0aGlzKTt0aGlzLmk9bnVsbDthPU8odGhpcyxhKTt2YXIgYz10aGlzLmcuZ2V0KGEpO2N8fHRoaXMuZy5zZXQoYSxjPVtdKTtjLnB1c2goYik7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtmdW5jdGlvbiAkYyhhLGIpe04oYSk7Yj1PKGEsYik7YS5nLmhhcyhiKSYmKGEuaT1udWxsLGEuaC09YS5nLmdldChiKS5sZW5ndGgsYS5nLmRlbGV0ZShiKSk7fWZ1bmN0aW9uIGFkKGEsYil7TihhKTtiPU8oYSxiKTtyZXR1cm4gYS5nLmhhcyhiKX1cbmsuZm9yRWFjaD1mdW5jdGlvbihhLGIpe04odGhpcyk7dGhpcy5nLmZvckVhY2goZnVuY3Rpb24oYyxkKXtjLmZvckVhY2goZnVuY3Rpb24oZSl7YS5jYWxsKGIsZSxkLHRoaXMpO30sdGhpcyk7fSx0aGlzKTt9O2sudGE9ZnVuY3Rpb24oKXtOKHRoaXMpO2NvbnN0IGE9QXJyYXkuZnJvbSh0aGlzLmcudmFsdWVzKCkpLGI9QXJyYXkuZnJvbSh0aGlzLmcua2V5cygpKSxjPVtdO2ZvcihsZXQgZD0wO2Q8Yi5sZW5ndGg7ZCsrKXtjb25zdCBlPWFbZF07Zm9yKGxldCBmPTA7ZjxlLmxlbmd0aDtmKyspYy5wdXNoKGJbZF0pO31yZXR1cm4gY307ay5aPWZ1bmN0aW9uKGEpe04odGhpcyk7bGV0IGI9W107aWYoXCJzdHJpbmdcIj09PXR5cGVvZiBhKWFkKHRoaXMsYSkmJihiPWIuY29uY2F0KHRoaXMuZy5nZXQoTyh0aGlzLGEpKSkpO2Vsc2Uge2E9QXJyYXkuZnJvbSh0aGlzLmcudmFsdWVzKCkpO2ZvcihsZXQgYz0wO2M8YS5sZW5ndGg7YysrKWI9Yi5jb25jYXQoYVtjXSk7fXJldHVybiBifTtcbmsuc2V0PWZ1bmN0aW9uKGEsYil7Tih0aGlzKTt0aGlzLmk9bnVsbDthPU8odGhpcyxhKTthZCh0aGlzLGEpJiYodGhpcy5oLT10aGlzLmcuZ2V0KGEpLmxlbmd0aCk7dGhpcy5nLnNldChhLFtiXSk7dGhpcy5oKz0xO3JldHVybiB0aGlzfTtrLmdldD1mdW5jdGlvbihhLGIpe2lmKCFhKXJldHVybiBiO2E9dGhpcy5aKGEpO3JldHVybiAwPGEubGVuZ3RoP1N0cmluZyhhWzBdKTpifTtmdW5jdGlvbiBrYyhhLGIsYyl7JGMoYSxiKTswPGMubGVuZ3RoJiYoYS5pPW51bGwsYS5nLnNldChPKGEsYiksbWEoYykpLGEuaCs9Yy5sZW5ndGgpO31cbmsudG9TdHJpbmc9ZnVuY3Rpb24oKXtpZih0aGlzLmkpcmV0dXJuIHRoaXMuaTtpZighdGhpcy5nKXJldHVybiBcIlwiO2NvbnN0IGE9W10sYj1BcnJheS5mcm9tKHRoaXMuZy5rZXlzKCkpO2Zvcih2YXIgYz0wO2M8Yi5sZW5ndGg7YysrKXt2YXIgZD1iW2NdO2NvbnN0IGY9ZW5jb2RlVVJJQ29tcG9uZW50KFN0cmluZyhkKSksaD10aGlzLlooZCk7Zm9yKGQ9MDtkPGgubGVuZ3RoO2QrKyl7dmFyIGU9ZjtcIlwiIT09aFtkXSYmKGUrPVwiPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoaFtkXSkpKTthLnB1c2goZSk7fX1yZXR1cm4gdGhpcy5pPWEuam9pbihcIiZcIil9O2Z1bmN0aW9uIE8oYSxiKXtiPVN0cmluZyhiKTthLmomJihiPWIudG9Mb3dlckNhc2UoKSk7cmV0dXJuIGJ9XG5mdW5jdGlvbiBYYyhhLGIpe2ImJiFhLmomJihOKGEpLGEuaT1udWxsLGEuZy5mb3JFYWNoKGZ1bmN0aW9uKGMsZCl7dmFyIGU9ZC50b0xvd2VyQ2FzZSgpO2QhPWUmJigkYyh0aGlzLGQpLGtjKHRoaXMsZSxjKSk7fSxhKSk7YS5qPWI7fXZhciBiZD1jbGFzc3tjb25zdHJ1Y3RvcihhLGIpe3RoaXMuZz1hO3RoaXMubWFwPWI7fX07ZnVuY3Rpb24gY2QoYSl7dGhpcy5sPWF8fGRkO2wuUGVyZm9ybWFuY2VOYXZpZ2F0aW9uVGltaW5nPyhhPWwucGVyZm9ybWFuY2UuZ2V0RW50cmllc0J5VHlwZShcIm5hdmlnYXRpb25cIiksYT0wPGEubGVuZ3RoJiYoXCJocVwiPT1hWzBdLm5leHRIb3BQcm90b2NvbHx8XCJoMlwiPT1hWzBdLm5leHRIb3BQcm90b2NvbCkpOmE9ISEobC5nJiZsLmcuS2EmJmwuZy5LYSgpJiZsLmcuS2EoKS5lYyk7dGhpcy5qPWE/dGhpcy5sOjE7dGhpcy5nPW51bGw7MTx0aGlzLmomJih0aGlzLmc9bmV3IFNldCk7dGhpcy5oPW51bGw7dGhpcy5pPVtdO312YXIgZGQ9MTA7ZnVuY3Rpb24gZWQoYSl7cmV0dXJuIGEuaD8hMDphLmc/YS5nLnNpemU+PWEuajohMX1mdW5jdGlvbiBCYyhhKXtyZXR1cm4gYS5oPzE6YS5nP2EuZy5zaXplOjB9ZnVuY3Rpb24geGMoYSxiKXtyZXR1cm4gYS5oP2EuaD09YjphLmc/YS5nLmhhcyhiKTohMX1mdW5jdGlvbiBDYyhhLGIpe2EuZz9hLmcuYWRkKGIpOmEuaD1iO31cbmZ1bmN0aW9uIEVjKGEsYil7YS5oJiZhLmg9PWI/YS5oPW51bGw6YS5nJiZhLmcuaGFzKGIpJiZhLmcuZGVsZXRlKGIpO31jZC5wcm90b3R5cGUuY2FuY2VsPWZ1bmN0aW9uKCl7dGhpcy5pPWZkKHRoaXMpO2lmKHRoaXMuaCl0aGlzLmguY2FuY2VsKCksdGhpcy5oPW51bGw7ZWxzZSBpZih0aGlzLmcmJjAhPT10aGlzLmcuc2l6ZSl7Zm9yKGNvbnN0IGEgb2YgdGhpcy5nLnZhbHVlcygpKWEuY2FuY2VsKCk7dGhpcy5nLmNsZWFyKCk7fX07ZnVuY3Rpb24gZmQoYSl7aWYobnVsbCE9YS5oKXJldHVybiBhLmkuY29uY2F0KGEuaC5GKTtpZihudWxsIT1hLmcmJjAhPT1hLmcuc2l6ZSl7bGV0IGI9YS5pO2Zvcihjb25zdCBjIG9mIGEuZy52YWx1ZXMoKSliPWIuY29uY2F0KGMuRik7cmV0dXJuIGJ9cmV0dXJuIG1hKGEuaSl9dmFyIGdkPWNsYXNze3N0cmluZ2lmeShhKXtyZXR1cm4gbC5KU09OLnN0cmluZ2lmeShhLHZvaWQgMCl9cGFyc2UoYSl7cmV0dXJuIGwuSlNPTi5wYXJzZShhLHZvaWQgMCl9fTtmdW5jdGlvbiBoZCgpe3RoaXMuZz1uZXcgZ2Q7fWZ1bmN0aW9uIGlkKGEsYixjKXtjb25zdCBkPWN8fFwiXCI7dHJ5e0tjKGEsZnVuY3Rpb24oZSxmKXtsZXQgaD1lO3AoZSkmJihoPWpiKGUpKTtiLnB1c2goZCtmK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudChoKSk7fSk7fWNhdGNoKGUpe3Rocm93IGIucHVzaChkK1widHlwZT1cIitlbmNvZGVVUklDb21wb25lbnQoXCJfYmFkbWFwXCIpKSxlO319ZnVuY3Rpb24gamQoYSxiKXtjb25zdCBjPW5ldyBHYjtpZihsLkltYWdlKXtjb25zdCBkPW5ldyBJbWFnZTtkLm9ubG9hZD1oYShrZCxjLGQsXCJUZXN0TG9hZEltYWdlOiBsb2FkZWRcIiwhMCxiKTtkLm9uZXJyb3I9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogZXJyb3JcIiwhMSxiKTtkLm9uYWJvcnQ9aGEoa2QsYyxkLFwiVGVzdExvYWRJbWFnZTogYWJvcnRcIiwhMSxiKTtkLm9udGltZW91dD1oYShrZCxjLGQsXCJUZXN0TG9hZEltYWdlOiB0aW1lb3V0XCIsITEsYik7bC5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoZC5vbnRpbWVvdXQpZC5vbnRpbWVvdXQoKTt9LDFFNCk7ZC5zcmM9YTt9ZWxzZSBiKCExKTt9ZnVuY3Rpb24ga2QoYSxiLGMsZCxlKXt0cnl7Yi5vbmxvYWQ9bnVsbCxiLm9uZXJyb3I9bnVsbCxiLm9uYWJvcnQ9bnVsbCxiLm9udGltZW91dD1udWxsLGUoZCk7fWNhdGNoKGYpe319ZnVuY3Rpb24gbGQoYSl7dGhpcy5sPWEuZmN8fG51bGw7dGhpcy5qPWEub2J8fCExO31yKGxkLFViKTtsZC5wcm90b3R5cGUuZz1mdW5jdGlvbigpe3JldHVybiBuZXcgbWQodGhpcy5sLHRoaXMuail9O2xkLnByb3RvdHlwZS5pPWZ1bmN0aW9uKGEpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBhfX0oe30pO2Z1bmN0aW9uIG1kKGEsYil7Qi5jYWxsKHRoaXMpO3RoaXMuRj1hO3RoaXMudT1iO3RoaXMubT12b2lkIDA7dGhpcy5yZWFkeVN0YXRlPW5kO3RoaXMuc3RhdHVzPTA7dGhpcy5yZXNwb25zZVR5cGU9dGhpcy5yZXNwb25zZVRleHQ9dGhpcy5yZXNwb25zZT10aGlzLnN0YXR1c1RleHQ9XCJcIjt0aGlzLm9ucmVhZHlzdGF0ZWNoYW5nZT1udWxsO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLmg9bnVsbDt0aGlzLkM9XCJHRVRcIjt0aGlzLkI9XCJcIjt0aGlzLmc9ITE7dGhpcy5BPXRoaXMuaj10aGlzLmw9bnVsbDt9cihtZCxCKTt2YXIgbmQ9MDtrPW1kLnByb3RvdHlwZTtcbmsub3Blbj1mdW5jdGlvbihhLGIpe2lmKHRoaXMucmVhZHlTdGF0ZSE9bmQpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwiRXJyb3IgcmVvcGVuaW5nIGEgY29ubmVjdGlvblwiKTt0aGlzLkM9YTt0aGlzLkI9Yjt0aGlzLnJlYWR5U3RhdGU9MTtvZCh0aGlzKTt9O2suc2VuZD1mdW5jdGlvbihhKXtpZigxIT10aGlzLnJlYWR5U3RhdGUpdGhyb3cgdGhpcy5hYm9ydCgpLEVycm9yKFwibmVlZCB0byBjYWxsIG9wZW4oKSBmaXJzdC4gXCIpO3RoaXMuZz0hMDtjb25zdCBiPXtoZWFkZXJzOnRoaXMudixtZXRob2Q6dGhpcy5DLGNyZWRlbnRpYWxzOnRoaXMubSxjYWNoZTp2b2lkIDB9O2EmJihiLmJvZHk9YSk7KHRoaXMuRnx8bCkuZmV0Y2gobmV3IFJlcXVlc3QodGhpcy5CLGIpKS50aGVuKHRoaXMuJGEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO307XG5rLmFib3J0PWZ1bmN0aW9uKCl7dGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1cIlwiO3RoaXMudj1uZXcgSGVhZGVyczt0aGlzLnN0YXR1cz0wO3RoaXMuaiYmdGhpcy5qLmNhbmNlbChcIlJlcXVlc3Qgd2FzIGFib3J0ZWQuXCIpLmNhdGNoKCgpPT57fSk7MTw9dGhpcy5yZWFkeVN0YXRlJiZ0aGlzLmcmJjQhPXRoaXMucmVhZHlTdGF0ZSYmKHRoaXMuZz0hMSxwZCh0aGlzKSk7dGhpcy5yZWFkeVN0YXRlPW5kO307XG5rLiRhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyYmKHRoaXMubD1hLHRoaXMuaHx8KHRoaXMuc3RhdHVzPXRoaXMubC5zdGF0dXMsdGhpcy5zdGF0dXNUZXh0PXRoaXMubC5zdGF0dXNUZXh0LHRoaXMuaD1hLmhlYWRlcnMsdGhpcy5yZWFkeVN0YXRlPTIsb2QodGhpcykpLHRoaXMuZyYmKHRoaXMucmVhZHlTdGF0ZT0zLG9kKHRoaXMpLHRoaXMuZykpKWlmKFwiYXJyYXlidWZmZXJcIj09PXRoaXMucmVzcG9uc2VUeXBlKWEuYXJyYXlCdWZmZXIoKS50aGVuKHRoaXMuWWEuYmluZCh0aGlzKSx0aGlzLmthLmJpbmQodGhpcykpO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9PXR5cGVvZiBsLlJlYWRhYmxlU3RyZWFtJiZcImJvZHlcImluIGEpe3RoaXMuaj1hLmJvZHkuZ2V0UmVhZGVyKCk7aWYodGhpcy51KXtpZih0aGlzLnJlc3BvbnNlVHlwZSl0aHJvdyBFcnJvcigncmVzcG9uc2VUeXBlIG11c3QgYmUgZW1wdHkgZm9yIFwic3RyZWFtQmluYXJ5Q2h1bmtzXCIgbW9kZSByZXNwb25zZXMuJyk7dGhpcy5yZXNwb25zZT1cbltdO31lbHNlIHRoaXMucmVzcG9uc2U9dGhpcy5yZXNwb25zZVRleHQ9XCJcIix0aGlzLkE9bmV3IFRleHREZWNvZGVyO3FkKHRoaXMpO31lbHNlIGEudGV4dCgpLnRoZW4odGhpcy5aYS5iaW5kKHRoaXMpLHRoaXMua2EuYmluZCh0aGlzKSk7fTtmdW5jdGlvbiBxZChhKXthLmoucmVhZCgpLnRoZW4oYS5YYS5iaW5kKGEpKS5jYXRjaChhLmthLmJpbmQoYSkpO31rLlhhPWZ1bmN0aW9uKGEpe2lmKHRoaXMuZyl7aWYodGhpcy51JiZhLnZhbHVlKXRoaXMucmVzcG9uc2UucHVzaChhLnZhbHVlKTtlbHNlIGlmKCF0aGlzLnUpe3ZhciBiPWEudmFsdWU/YS52YWx1ZTpuZXcgVWludDhBcnJheSgwKTtpZihiPXRoaXMuQS5kZWNvZGUoYix7c3RyZWFtOiFhLmRvbmV9KSl0aGlzLnJlc3BvbnNlPXRoaXMucmVzcG9uc2VUZXh0Kz1iO31hLmRvbmU/cGQodGhpcyk6b2QodGhpcyk7Mz09dGhpcy5yZWFkeVN0YXRlJiZxZCh0aGlzKTt9fTtcbmsuWmE9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodGhpcy5yZXNwb25zZT10aGlzLnJlc3BvbnNlVGV4dD1hLHBkKHRoaXMpKTt9O2suWWE9ZnVuY3Rpb24oYSl7dGhpcy5nJiYodGhpcy5yZXNwb25zZT1hLHBkKHRoaXMpKTt9O2sua2E9ZnVuY3Rpb24oKXt0aGlzLmcmJnBkKHRoaXMpO307ZnVuY3Rpb24gcGQoYSl7YS5yZWFkeVN0YXRlPTQ7YS5sPW51bGw7YS5qPW51bGw7YS5BPW51bGw7b2QoYSk7fWsuc2V0UmVxdWVzdEhlYWRlcj1mdW5jdGlvbihhLGIpe3RoaXMudi5hcHBlbmQoYSxiKTt9O2suZ2V0UmVzcG9uc2VIZWFkZXI9ZnVuY3Rpb24oYSl7cmV0dXJuIHRoaXMuaD90aGlzLmguZ2V0KGEudG9Mb3dlckNhc2UoKSl8fFwiXCI6XCJcIn07XG5rLmdldEFsbFJlc3BvbnNlSGVhZGVycz1mdW5jdGlvbigpe2lmKCF0aGlzLmgpcmV0dXJuIFwiXCI7Y29uc3QgYT1bXSxiPXRoaXMuaC5lbnRyaWVzKCk7Zm9yKHZhciBjPWIubmV4dCgpOyFjLmRvbmU7KWM9Yy52YWx1ZSxhLnB1c2goY1swXStcIjogXCIrY1sxXSksYz1iLm5leHQoKTtyZXR1cm4gYS5qb2luKFwiXFxyXFxuXCIpfTtmdW5jdGlvbiBvZChhKXthLm9ucmVhZHlzdGF0ZWNoYW5nZSYmYS5vbnJlYWR5c3RhdGVjaGFuZ2UuY2FsbChhKTt9T2JqZWN0LmRlZmluZVByb3BlcnR5KG1kLnByb3RvdHlwZSxcIndpdGhDcmVkZW50aWFsc1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gXCJpbmNsdWRlXCI9PT10aGlzLm19LHNldDpmdW5jdGlvbihhKXt0aGlzLm09YT9cImluY2x1ZGVcIjpcInNhbWUtb3JpZ2luXCI7fX0pO3ZhciByZD1sLkpTT04ucGFyc2U7ZnVuY3Rpb24gUChhKXtCLmNhbGwodGhpcyk7dGhpcy5oZWFkZXJzPW5ldyBNYXA7dGhpcy51PWF8fG51bGw7dGhpcy5oPSExO3RoaXMuQz10aGlzLmc9bnVsbDt0aGlzLkk9XCJcIjt0aGlzLm09MDt0aGlzLmo9XCJcIjt0aGlzLmw9dGhpcy5HPXRoaXMudj10aGlzLkY9ITE7dGhpcy5CPTA7dGhpcy5BPW51bGw7dGhpcy5LPXNkO3RoaXMuTD10aGlzLk09ITE7fXIoUCxCKTt2YXIgc2Q9XCJcIix0ZD0vXmh0dHBzPyQvaSx1ZD1bXCJQT1NUXCIsXCJQVVRcIl07az1QLnByb3RvdHlwZTtrLk9hPWZ1bmN0aW9uKGEpe3RoaXMuTT1hO307XG5rLmhhPWZ1bmN0aW9uKGEsYixjLGQpe2lmKHRoaXMuZyl0aHJvdyBFcnJvcihcIltnb29nLm5ldC5YaHJJb10gT2JqZWN0IGlzIGFjdGl2ZSB3aXRoIGFub3RoZXIgcmVxdWVzdD1cIit0aGlzLkkrXCI7IG5ld1VyaT1cIithKTtiPWI/Yi50b1VwcGVyQ2FzZSgpOlwiR0VUXCI7dGhpcy5JPWE7dGhpcy5qPVwiXCI7dGhpcy5tPTA7dGhpcy5GPSExO3RoaXMuaD0hMDt0aGlzLmc9dGhpcy51P3RoaXMudS5nKCk6JGIuZygpO3RoaXMuQz10aGlzLnU/VmIodGhpcy51KTpWYigkYik7dGhpcy5nLm9ucmVhZHlzdGF0ZWNoYW5nZT1xKHRoaXMuTGEsdGhpcyk7dHJ5e3RoaXMuRz0hMCx0aGlzLmcub3BlbihiLFN0cmluZyhhKSwhMCksdGhpcy5HPSExO31jYXRjaChmKXt2ZCh0aGlzLGYpO3JldHVybn1hPWN8fFwiXCI7Yz1uZXcgTWFwKHRoaXMuaGVhZGVycyk7aWYoZClpZihPYmplY3QuZ2V0UHJvdG90eXBlT2YoZCk9PT1PYmplY3QucHJvdG90eXBlKWZvcih2YXIgZSBpbiBkKWMuc2V0KGUsZFtlXSk7ZWxzZSBpZihcImZ1bmN0aW9uXCI9PT1cbnR5cGVvZiBkLmtleXMmJlwiZnVuY3Rpb25cIj09PXR5cGVvZiBkLmdldClmb3IoY29uc3QgZiBvZiBkLmtleXMoKSljLnNldChmLGQuZ2V0KGYpKTtlbHNlIHRocm93IEVycm9yKFwiVW5rbm93biBpbnB1dCB0eXBlIGZvciBvcHRfaGVhZGVyczogXCIrU3RyaW5nKGQpKTtkPUFycmF5LmZyb20oYy5rZXlzKCkpLmZpbmQoZj0+XCJjb250ZW50LXR5cGVcIj09Zi50b0xvd2VyQ2FzZSgpKTtlPWwuRm9ybURhdGEmJmEgaW5zdGFuY2VvZiBsLkZvcm1EYXRhOyEoMDw9a2EodWQsYikpfHxkfHxlfHxjLnNldChcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9dXRmLThcIik7Zm9yKGNvbnN0IFtmLGhdb2YgYyl0aGlzLmcuc2V0UmVxdWVzdEhlYWRlcihmLGgpO3RoaXMuSyYmKHRoaXMuZy5yZXNwb25zZVR5cGU9dGhpcy5LKTtcIndpdGhDcmVkZW50aWFsc1wiaW4gdGhpcy5nJiZ0aGlzLmcud2l0aENyZWRlbnRpYWxzIT09dGhpcy5NJiYodGhpcy5nLndpdGhDcmVkZW50aWFscz1cbnRoaXMuTSk7dHJ5e3dkKHRoaXMpLDA8dGhpcy5CJiYoKHRoaXMuTD14ZCh0aGlzLmcpKT8odGhpcy5nLnRpbWVvdXQ9dGhpcy5CLHRoaXMuZy5vbnRpbWVvdXQ9cSh0aGlzLnVhLHRoaXMpKTp0aGlzLkE9eWIodGhpcy51YSx0aGlzLkIsdGhpcykpLHRoaXMudj0hMCx0aGlzLmcuc2VuZChhKSx0aGlzLnY9ITE7fWNhdGNoKGYpe3ZkKHRoaXMsZik7fX07ZnVuY3Rpb24geGQoYSl7cmV0dXJuIHomJlwibnVtYmVyXCI9PT10eXBlb2YgYS50aW1lb3V0JiZ2b2lkIDAhPT1hLm9udGltZW91dH1rLnVhPWZ1bmN0aW9uKCl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdvb2cmJnRoaXMuZyYmKHRoaXMuaj1cIlRpbWVkIG91dCBhZnRlciBcIit0aGlzLkIrXCJtcywgYWJvcnRpbmdcIix0aGlzLm09OCxDKHRoaXMsXCJ0aW1lb3V0XCIpLHRoaXMuYWJvcnQoOCkpO307ZnVuY3Rpb24gdmQoYSxiKXthLmg9ITE7YS5nJiYoYS5sPSEwLGEuZy5hYm9ydCgpLGEubD0hMSk7YS5qPWI7YS5tPTU7eWQoYSk7emQoYSk7fVxuZnVuY3Rpb24geWQoYSl7YS5GfHwoYS5GPSEwLEMoYSxcImNvbXBsZXRlXCIpLEMoYSxcImVycm9yXCIpKTt9ay5hYm9ydD1mdW5jdGlvbihhKXt0aGlzLmcmJnRoaXMuaCYmKHRoaXMuaD0hMSx0aGlzLmw9ITAsdGhpcy5nLmFib3J0KCksdGhpcy5sPSExLHRoaXMubT1hfHw3LEModGhpcyxcImNvbXBsZXRlXCIpLEModGhpcyxcImFib3J0XCIpLHpkKHRoaXMpKTt9O2suTj1mdW5jdGlvbigpe3RoaXMuZyYmKHRoaXMuaCYmKHRoaXMuaD0hMSx0aGlzLmw9ITAsdGhpcy5nLmFib3J0KCksdGhpcy5sPSExKSx6ZCh0aGlzLCEwKSk7UC4kLk4uY2FsbCh0aGlzKTt9O2suTGE9ZnVuY3Rpb24oKXt0aGlzLnN8fCh0aGlzLkd8fHRoaXMudnx8dGhpcy5sP0FkKHRoaXMpOnRoaXMua2IoKSk7fTtrLmtiPWZ1bmN0aW9uKCl7QWQodGhpcyk7fTtcbmZ1bmN0aW9uIEFkKGEpe2lmKGEuaCYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGdvb2cmJighYS5DWzFdfHw0IT1IKGEpfHwyIT1hLmRhKCkpKWlmKGEudiYmND09SChhKSl5YihhLkxhLDAsYSk7ZWxzZSBpZihDKGEsXCJyZWFkeXN0YXRlY2hhbmdlXCIpLDQ9PUgoYSkpe2EuaD0hMTt0cnl7Y29uc3QgaD1hLmRhKCk7YTpzd2l0Y2goaCl7Y2FzZSAyMDA6Y2FzZSAyMDE6Y2FzZSAyMDI6Y2FzZSAyMDQ6Y2FzZSAyMDY6Y2FzZSAzMDQ6Y2FzZSAxMjIzOnZhciBiPSEwO2JyZWFrIGE7ZGVmYXVsdDpiPSExO312YXIgYztpZighKGM9Yikpe3ZhciBkO2lmKGQ9MD09PWgpe3ZhciBlPVN0cmluZyhhLkkpLm1hdGNoKExjKVsxXXx8bnVsbDshZSYmbC5zZWxmJiZsLnNlbGYubG9jYXRpb24mJihlPWwuc2VsZi5sb2NhdGlvbi5wcm90b2NvbC5zbGljZSgwLC0xKSk7ZD0hdGQudGVzdChlP2UudG9Mb3dlckNhc2UoKTpcIlwiKTt9Yz1kO31pZihjKUMoYSxcImNvbXBsZXRlXCIpLEMoYSxcInN1Y2Nlc3NcIik7ZWxzZSB7YS5tPVxuNjt0cnl7dmFyIGY9MjxIKGEpP2EuZy5zdGF0dXNUZXh0OlwiXCI7fWNhdGNoKG4pe2Y9XCJcIjt9YS5qPWYrXCIgW1wiK2EuZGEoKStcIl1cIjt5ZChhKTt9fWZpbmFsbHl7emQoYSk7fX19ZnVuY3Rpb24gemQoYSxiKXtpZihhLmcpe3dkKGEpO2NvbnN0IGM9YS5nLGQ9YS5DWzBdPygpPT57fTpudWxsO2EuZz1udWxsO2EuQz1udWxsO2J8fEMoYSxcInJlYWR5XCIpO3RyeXtjLm9ucmVhZHlzdGF0ZWNoYW5nZT1kO31jYXRjaChlKXt9fX1mdW5jdGlvbiB3ZChhKXthLmcmJmEuTCYmKGEuZy5vbnRpbWVvdXQ9bnVsbCk7YS5BJiYobC5jbGVhclRpbWVvdXQoYS5BKSxhLkE9bnVsbCk7fWsuaXNBY3RpdmU9ZnVuY3Rpb24oKXtyZXR1cm4gISF0aGlzLmd9O2Z1bmN0aW9uIEgoYSl7cmV0dXJuIGEuZz9hLmcucmVhZHlTdGF0ZTowfWsuZGE9ZnVuY3Rpb24oKXt0cnl7cmV0dXJuIDI8SCh0aGlzKT90aGlzLmcuc3RhdHVzOi0xfWNhdGNoKGEpe3JldHVybiAtMX19O1xuay5qYT1mdW5jdGlvbigpe3RyeXtyZXR1cm4gdGhpcy5nP3RoaXMuZy5yZXNwb25zZVRleHQ6XCJcIn1jYXRjaChhKXtyZXR1cm4gXCJcIn19O2suV2E9ZnVuY3Rpb24oYSl7aWYodGhpcy5nKXt2YXIgYj10aGlzLmcucmVzcG9uc2VUZXh0O2EmJjA9PWIuaW5kZXhPZihhKSYmKGI9Yi5zdWJzdHJpbmcoYS5sZW5ndGgpKTtyZXR1cm4gcmQoYil9fTtmdW5jdGlvbiBtYyhhKXt0cnl7aWYoIWEuZylyZXR1cm4gbnVsbDtpZihcInJlc3BvbnNlXCJpbiBhLmcpcmV0dXJuIGEuZy5yZXNwb25zZTtzd2l0Y2goYS5LKXtjYXNlIHNkOmNhc2UgXCJ0ZXh0XCI6cmV0dXJuIGEuZy5yZXNwb25zZVRleHQ7Y2FzZSBcImFycmF5YnVmZmVyXCI6aWYoXCJtb3pSZXNwb25zZUFycmF5QnVmZmVyXCJpbiBhLmcpcmV0dXJuIGEuZy5tb3pSZXNwb25zZUFycmF5QnVmZmVyfXJldHVybiBudWxsfWNhdGNoKGIpe3JldHVybiBudWxsfX1cbmZ1bmN0aW9uIHRjKGEpe2NvbnN0IGI9e307YT0oYS5nJiYyPD1IKGEpP2EuZy5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKXx8XCJcIjpcIlwiKS5zcGxpdChcIlxcclxcblwiKTtmb3IobGV0IGQ9MDtkPGEubGVuZ3RoO2QrKyl7aWYoeChhW2RdKSljb250aW51ZTt2YXIgYz1xYihhW2RdKTtjb25zdCBlPWNbMF07Yz1jWzFdO2lmKFwic3RyaW5nXCIhPT10eXBlb2YgYyljb250aW51ZTtjPWMudHJpbSgpO2NvbnN0IGY9YltlXXx8W107YltlXT1mO2YucHVzaChjKTt9T2EoYixmdW5jdGlvbihkKXtyZXR1cm4gZC5qb2luKFwiLCBcIil9KTt9ay5JYT1mdW5jdGlvbigpe3JldHVybiB0aGlzLm19O2suU2E9ZnVuY3Rpb24oKXtyZXR1cm4gXCJzdHJpbmdcIj09PXR5cGVvZiB0aGlzLmo/dGhpcy5qOlN0cmluZyh0aGlzLmopfTtmdW5jdGlvbiBCZChhKXtsZXQgYj1cIlwiO05hKGEsZnVuY3Rpb24oYyxkKXtiKz1kO2IrPVwiOlwiO2IrPWM7Yis9XCJcXHJcXG5cIjt9KTtyZXR1cm4gYn1mdW5jdGlvbiBDZChhLGIsYyl7YTp7Zm9yKGQgaW4gYyl7dmFyIGQ9ITE7YnJlYWsgYX1kPSEwO31kfHwoYz1CZChjKSxcInN0cmluZ1wiPT09dHlwZW9mIGE/KG51bGwhPWMmJmVuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoYykpKTpLKGEsYixjKSk7fWZ1bmN0aW9uIERkKGEsYixjKXtyZXR1cm4gYyYmYy5pbnRlcm5hbENoYW5uZWxQYXJhbXM/Yy5pbnRlcm5hbENoYW5uZWxQYXJhbXNbYV18fGI6Yn1cbmZ1bmN0aW9uIEVkKGEpe3RoaXMuR2E9MDt0aGlzLmo9W107dGhpcy5sPW5ldyBHYjt0aGlzLnBhPXRoaXMud2E9dGhpcy5JPXRoaXMuWT10aGlzLmc9dGhpcy5EYT10aGlzLkY9dGhpcy5uYT10aGlzLm89dGhpcy5VPXRoaXMucz1udWxsO3RoaXMuZmI9dGhpcy5XPTA7dGhpcy5jYj1EZChcImZhaWxGYXN0XCIsITEsYSk7dGhpcy5HPXRoaXMudj10aGlzLnU9dGhpcy5tPXRoaXMuaD1udWxsO3RoaXMuYWE9ITA7dGhpcy5GYT10aGlzLlY9LTE7dGhpcy5iYT10aGlzLkE9dGhpcy5DPTA7dGhpcy5hYj1EZChcImJhc2VSZXRyeURlbGF5TXNcIiw1RTMsYSk7dGhpcy5oYj1EZChcInJldHJ5RGVsYXlTZWVkTXNcIiwxRTQsYSk7dGhpcy5lYj1EZChcImZvcndhcmRDaGFubmVsTWF4UmV0cmllc1wiLDIsYSk7dGhpcy54YT1EZChcImZvcndhcmRDaGFubmVsUmVxdWVzdFRpbWVvdXRNc1wiLDJFNCxhKTt0aGlzLnZhPWEmJmEueG1sSHR0cEZhY3Rvcnl8fHZvaWQgMDt0aGlzLkhhPWEmJmEuZGN8fCExO3RoaXMuTD1cbnZvaWQgMDt0aGlzLko9YSYmYS5zdXBwb3J0c0Nyb3NzRG9tYWluWGhyfHwhMTt0aGlzLks9XCJcIjt0aGlzLmk9bmV3IGNkKGEmJmEuY29uY3VycmVudFJlcXVlc3RMaW1pdCk7dGhpcy5KYT1uZXcgaGQ7dGhpcy5QPWEmJmEuZmFzdEhhbmRzaGFrZXx8ITE7dGhpcy5PPWEmJmEuZW5jb2RlSW5pdE1lc3NhZ2VIZWFkZXJzfHwhMTt0aGlzLlAmJnRoaXMuTyYmKHRoaXMuTz0hMSk7dGhpcy5iYj1hJiZhLmJjfHwhMTthJiZhLkVhJiZ0aGlzLmwuRWEoKTthJiZhLmZvcmNlTG9uZ1BvbGxpbmcmJih0aGlzLmFhPSExKTt0aGlzLmNhPSF0aGlzLlAmJnRoaXMuYWEmJmEmJmEuZGV0ZWN0QnVmZmVyaW5nUHJveHl8fCExO3RoaXMucWE9dm9pZCAwO2EmJmEubG9uZ1BvbGxpbmdUaW1lb3V0JiYwPGEubG9uZ1BvbGxpbmdUaW1lb3V0JiYodGhpcy5xYT1hLmxvbmdQb2xsaW5nVGltZW91dCk7dGhpcy5vYT12b2lkIDA7dGhpcy5TPTA7dGhpcy5NPSExO3RoaXMubWE9dGhpcy5CPW51bGw7fWs9RWQucHJvdG90eXBlO1xuay5yYT04O2suSD0xO2Z1bmN0aW9uIEhjKGEpe0ZkKGEpO2lmKDM9PWEuSCl7dmFyIGI9YS5XKyssYz1HKGEuSSk7SyhjLFwiU0lEXCIsYS5LKTtLKGMsXCJSSURcIixiKTtLKGMsXCJUWVBFXCIsXCJ0ZXJtaW5hdGVcIik7R2QoYSxjKTtiPW5ldyBiYyhhLGEubCxiKTtiLkw9MjtiLnY9aGMoRyhjKSk7Yz0hMTtpZihsLm5hdmlnYXRvciYmbC5uYXZpZ2F0b3Iuc2VuZEJlYWNvbil0cnl7Yz1sLm5hdmlnYXRvci5zZW5kQmVhY29uKGIudi50b1N0cmluZygpLFwiXCIpO31jYXRjaChkKXt9IWMmJmwuSW1hZ2UmJigobmV3IEltYWdlKS5zcmM9Yi52LGM9ITApO2N8fChiLmc9bGMoYi5sLG51bGwpLGIuZy5oYShiLnYpKTtiLkc9RGF0ZS5ub3coKTtqYyhiKTt9SGQoYSk7fWZ1bmN0aW9uIHpjKGEpe2EuZyYmKHZjKGEpLGEuZy5jYW5jZWwoKSxhLmc9bnVsbCk7fVxuZnVuY3Rpb24gRmQoYSl7emMoYSk7YS51JiYobC5jbGVhclRpbWVvdXQoYS51KSxhLnU9bnVsbCk7eWMoYSk7YS5pLmNhbmNlbCgpO2EubSYmKFwibnVtYmVyXCI9PT10eXBlb2YgYS5tJiZsLmNsZWFyVGltZW91dChhLm0pLGEubT1udWxsKTt9ZnVuY3Rpb24gR2MoYSl7aWYoIWVkKGEuaSkmJiFhLm0pe2EubT0hMDt2YXIgYj1hLk5hO3NifHx2YigpO3RifHwoc2IoKSx0Yj0hMCk7bWIuYWRkKGIsYSk7YS5DPTA7fX1mdW5jdGlvbiBJZChhLGIpe2lmKEJjKGEuaSk+PWEuaS5qLShhLm0/MTowKSlyZXR1cm4gITE7aWYoYS5tKXJldHVybiBhLmo9Yi5GLmNvbmNhdChhLmopLCEwO2lmKDE9PWEuSHx8Mj09YS5IfHxhLkM+PShhLmNiPzA6YS5lYikpcmV0dXJuICExO2EubT1SYihxKGEuTmEsYSxiKSxKZChhLGEuQykpO2EuQysrO3JldHVybiAhMH1cbmsuTmE9ZnVuY3Rpb24oYSl7aWYodGhpcy5tKWlmKHRoaXMubT1udWxsLDE9PXRoaXMuSCl7aWYoIWEpe3RoaXMuVz1NYXRoLmZsb29yKDFFNSpNYXRoLnJhbmRvbSgpKTthPXRoaXMuVysrO2NvbnN0IGU9bmV3IGJjKHRoaXMsdGhpcy5sLGEpO2xldCBmPXRoaXMuczt0aGlzLlUmJihmPyhmPVBhKGYpLFJhKGYsdGhpcy5VKSk6Zj10aGlzLlUpO251bGwhPT10aGlzLm98fHRoaXMuT3x8KGUuST1mLGY9bnVsbCk7aWYodGhpcy5QKWE6e3ZhciBiPTA7Zm9yKHZhciBjPTA7Yzx0aGlzLmoubGVuZ3RoO2MrKyl7Yjp7dmFyIGQ9dGhpcy5qW2NdO2lmKFwiX19kYXRhX19cImluIGQubWFwJiYoZD1kLm1hcC5fX2RhdGFfXyxcInN0cmluZ1wiPT09dHlwZW9mIGQpKXtkPWQubGVuZ3RoO2JyZWFrIGJ9ZD12b2lkIDA7fWlmKHZvaWQgMD09PWQpYnJlYWs7Yis9ZDtpZig0MDk2PGIpe2I9YzticmVhayBhfWlmKDQwOTY9PT1ifHxjPT09dGhpcy5qLmxlbmd0aC0xKXtiPWMrMTticmVhayBhfX1iPTFFMzt9ZWxzZSBiPVxuMUUzO2I9S2QodGhpcyxlLGIpO2M9Ryh0aGlzLkkpO0soYyxcIlJJRFwiLGEpO0soYyxcIkNWRVJcIiwyMik7dGhpcy5GJiZLKGMsXCJYLUhUVFAtU2Vzc2lvbi1JZFwiLHRoaXMuRik7R2QodGhpcyxjKTtmJiYodGhpcy5PP2I9XCJoZWFkZXJzPVwiK2VuY29kZVVSSUNvbXBvbmVudChTdHJpbmcoQmQoZikpKStcIiZcIitiOnRoaXMubyYmQ2QoYyx0aGlzLm8sZikpO0NjKHRoaXMuaSxlKTt0aGlzLmJiJiZLKGMsXCJUWVBFXCIsXCJpbml0XCIpO3RoaXMuUD8oSyhjLFwiJHJlcVwiLGIpLEsoYyxcIlNJRFwiLFwibnVsbFwiKSxlLmFhPSEwLGdjKGUsYyxudWxsKSk6Z2MoZSxjLGIpO3RoaXMuSD0yO319ZWxzZSAzPT10aGlzLkgmJihhP0xkKHRoaXMsYSk6MD09dGhpcy5qLmxlbmd0aHx8ZWQodGhpcy5pKXx8TGQodGhpcykpO307XG5mdW5jdGlvbiBMZChhLGIpe3ZhciBjO2I/Yz1iLm06Yz1hLlcrKztjb25zdCBkPUcoYS5JKTtLKGQsXCJTSURcIixhLkspO0soZCxcIlJJRFwiLGMpO0soZCxcIkFJRFwiLGEuVik7R2QoYSxkKTthLm8mJmEucyYmQ2QoZCxhLm8sYS5zKTtjPW5ldyBiYyhhLGEubCxjLGEuQysxKTtudWxsPT09YS5vJiYoYy5JPWEucyk7YiYmKGEuaj1iLkYuY29uY2F0KGEuaikpO2I9S2QoYSxjLDFFMyk7Yy5zZXRUaW1lb3V0KE1hdGgucm91bmQoLjUqYS54YSkrTWF0aC5yb3VuZCguNSphLnhhKk1hdGgucmFuZG9tKCkpKTtDYyhhLmksYyk7Z2MoYyxkLGIpO31mdW5jdGlvbiBHZChhLGIpe2EubmEmJk5hKGEubmEsZnVuY3Rpb24oYyxkKXtLKGIsZCxjKTt9KTthLmgmJktjKHt9LGZ1bmN0aW9uKGMsZCl7SyhiLGQsYyk7fSk7fVxuZnVuY3Rpb24gS2QoYSxiLGMpe2M9TWF0aC5taW4oYS5qLmxlbmd0aCxjKTt2YXIgZD1hLmg/cShhLmguVmEsYS5oLGEpOm51bGw7YTp7dmFyIGU9YS5qO2xldCBmPS0xO2Zvcig7Oyl7Y29uc3QgaD1bXCJjb3VudD1cIitjXTstMT09Zj8wPGM/KGY9ZVswXS5nLGgucHVzaChcIm9mcz1cIitmKSk6Zj0wOmgucHVzaChcIm9mcz1cIitmKTtsZXQgbj0hMDtmb3IobGV0IHQ9MDt0PGM7dCsrKXtsZXQgbT1lW3RdLmc7Y29uc3QgdT1lW3RdLm1hcDttLT1mO2lmKDA+bSlmPU1hdGgubWF4KDAsZVt0XS5nLTEwMCksbj0hMTtlbHNlIHRyeXtpZCh1LGgsXCJyZXFcIittK1wiX1wiKTt9Y2F0Y2goTCl7ZCYmZCh1KTt9fWlmKG4pe2Q9aC5qb2luKFwiJlwiKTticmVhayBhfX19YT1hLmouc3BsaWNlKDAsYyk7Yi5GPWE7cmV0dXJuIGR9ZnVuY3Rpb24gRmMoYSl7aWYoIWEuZyYmIWEudSl7YS5iYT0xO3ZhciBiPWEuTWE7c2J8fHZiKCk7dGJ8fChzYigpLHRiPSEwKTttYi5hZGQoYixhKTthLkE9MDt9fVxuZnVuY3Rpb24gQWMoYSl7aWYoYS5nfHxhLnV8fDM8PWEuQSlyZXR1cm4gITE7YS5iYSsrO2EudT1SYihxKGEuTWEsYSksSmQoYSxhLkEpKTthLkErKztyZXR1cm4gITB9ay5NYT1mdW5jdGlvbigpe3RoaXMudT1udWxsO01kKHRoaXMpO2lmKHRoaXMuY2EmJiEodGhpcy5NfHxudWxsPT10aGlzLmd8fDA+PXRoaXMuUykpe3ZhciBhPTIqdGhpcy5TO3RoaXMubC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVyIGVuYWJsZWQ6IFwiK2EpO3RoaXMuQj1SYihxKHRoaXMuamIsdGhpcyksYSk7fX07ay5qYj1mdW5jdGlvbigpe3RoaXMuQiYmKHRoaXMuQj1udWxsLHRoaXMubC5pbmZvKFwiQlAgZGV0ZWN0aW9uIHRpbWVvdXQgcmVhY2hlZC5cIiksdGhpcy5sLmluZm8oXCJCdWZmZXJpbmcgcHJveHkgZGV0ZWN0ZWQgYW5kIHN3aXRjaCB0byBsb25nLXBvbGxpbmchXCIpLHRoaXMuRz0hMSx0aGlzLk09ITAsRigxMCksemModGhpcyksTWQodGhpcykpO307XG5mdW5jdGlvbiB2YyhhKXtudWxsIT1hLkImJihsLmNsZWFyVGltZW91dChhLkIpLGEuQj1udWxsKTt9ZnVuY3Rpb24gTWQoYSl7YS5nPW5ldyBiYyhhLGEubCxcInJwY1wiLGEuYmEpO251bGw9PT1hLm8mJihhLmcuST1hLnMpO2EuZy5PPTA7dmFyIGI9RyhhLndhKTtLKGIsXCJSSURcIixcInJwY1wiKTtLKGIsXCJTSURcIixhLkspO0soYixcIkFJRFwiLGEuVik7SyhiLFwiQ0lcIixhLkc/XCIwXCI6XCIxXCIpOyFhLkcmJmEucWEmJksoYixcIlRPXCIsYS5xYSk7SyhiLFwiVFlQRVwiLFwieG1saHR0cFwiKTtHZChhLGIpO2EubyYmYS5zJiZDZChiLGEubyxhLnMpO2EuTCYmYS5nLnNldFRpbWVvdXQoYS5MKTt2YXIgYz1hLmc7YT1hLnBhO2MuTD0xO2Mudj1oYyhHKGIpKTtjLnM9bnVsbDtjLlM9ITA7aWMoYyxhKTt9ay5pYj1mdW5jdGlvbigpe251bGwhPXRoaXMudiYmKHRoaXMudj1udWxsLHpjKHRoaXMpLEFjKHRoaXMpLEYoMTkpKTt9O1xuZnVuY3Rpb24geWMoYSl7bnVsbCE9YS52JiYobC5jbGVhclRpbWVvdXQoYS52KSxhLnY9bnVsbCk7fWZ1bmN0aW9uIHNjKGEsYil7dmFyIGM9bnVsbDtpZihhLmc9PWIpe3ljKGEpO3ZjKGEpO2EuZz1udWxsO3ZhciBkPTI7fWVsc2UgaWYoeGMoYS5pLGIpKWM9Yi5GLEVjKGEuaSxiKSxkPTE7ZWxzZSByZXR1cm47aWYoMCE9YS5IKWlmKGIuaSlpZigxPT1kKXtjPWIucz9iLnMubGVuZ3RoOjA7Yj1EYXRlLm5vdygpLWIuRzt2YXIgZT1hLkM7ZD1NYigpO0MoZCxuZXcgUWIoZCxjKSk7R2MoYSk7fWVsc2UgRmMoYSk7ZWxzZSBpZihlPWIubywzPT1lfHwwPT1lJiYwPGIuY2F8fCEoMT09ZCYmSWQoYSxiKXx8Mj09ZCYmQWMoYSkpKXN3aXRjaChjJiYwPGMubGVuZ3RoJiYoYj1hLmksYi5pPWIuaS5jb25jYXQoYykpLGUpe2Nhc2UgMTpKKGEsNSk7YnJlYWs7Y2FzZSA0OkooYSwxMCk7YnJlYWs7Y2FzZSAzOkooYSw2KTticmVhaztkZWZhdWx0OkooYSwyKTt9fVxuZnVuY3Rpb24gSmQoYSxiKXtsZXQgYz1hLmFiK01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSphLmhiKTthLmlzQWN0aXZlKCl8fChjKj0yKTtyZXR1cm4gYypifWZ1bmN0aW9uIEooYSxiKXthLmwuaW5mbyhcIkVycm9yIGNvZGUgXCIrYik7aWYoMj09Yil7dmFyIGM9bnVsbDthLmgmJihjPW51bGwpO3ZhciBkPXEoYS5wYixhKTtjfHwoYz1uZXcgTShcIi8vd3d3Lmdvb2dsZS5jb20vaW1hZ2VzL2NsZWFyZG90LmdpZlwiKSxsLmxvY2F0aW9uJiZcImh0dHBcIj09bC5sb2NhdGlvbi5wcm90b2NvbHx8TmMoYyxcImh0dHBzXCIpLGhjKGMpKTtqZChjLnRvU3RyaW5nKCksZCk7fWVsc2UgRigyKTthLkg9MDthLmgmJmEuaC56YShiKTtIZChhKTtGZChhKTt9ay5wYj1mdW5jdGlvbihhKXthPyh0aGlzLmwuaW5mbyhcIlN1Y2Nlc3NmdWxseSBwaW5nZWQgZ29vZ2xlLmNvbVwiKSxGKDIpKToodGhpcy5sLmluZm8oXCJGYWlsZWQgdG8gcGluZyBnb29nbGUuY29tXCIpLEYoMSkpO307XG5mdW5jdGlvbiBIZChhKXthLkg9MDthLm1hPVtdO2lmKGEuaCl7Y29uc3QgYj1mZChhLmkpO2lmKDAhPWIubGVuZ3RofHwwIT1hLmoubGVuZ3RoKW5hKGEubWEsYiksbmEoYS5tYSxhLmopLGEuaS5pLmxlbmd0aD0wLG1hKGEuaiksYS5qLmxlbmd0aD0wO2EuaC55YSgpO319ZnVuY3Rpb24gRGMoYSxiLGMpe3ZhciBkPWMgaW5zdGFuY2VvZiBNP0coYyk6bmV3IE0oYyk7aWYoXCJcIiE9ZC5nKWImJihkLmc9YitcIi5cIitkLmcpLE9jKGQsZC5tKTtlbHNlIHt2YXIgZT1sLmxvY2F0aW9uO2Q9ZS5wcm90b2NvbDtiPWI/YitcIi5cIitlLmhvc3RuYW1lOmUuaG9zdG5hbWU7ZT0rZS5wb3J0O3ZhciBmPW5ldyBNKG51bGwpO2QmJk5jKGYsZCk7YiYmKGYuZz1iKTtlJiZPYyhmLGUpO2MmJihmLmw9Yyk7ZD1mO31jPWEuRjtiPWEuRGE7YyYmYiYmSyhkLGMsYik7SyhkLFwiVkVSXCIsYS5yYSk7R2QoYSxkKTtyZXR1cm4gZH1cbmZ1bmN0aW9uIGxjKGEsYixjKXtpZihiJiYhYS5KKXRocm93IEVycm9yKFwiQ2FuJ3QgY3JlYXRlIHNlY29uZGFyeSBkb21haW4gY2FwYWJsZSBYaHJJbyBvYmplY3QuXCIpO2I9YyYmYS5IYSYmIWEudmE/bmV3IFAobmV3IGxkKHtvYjohMH0pKTpuZXcgUChhLnZhKTtiLk9hKGEuSik7cmV0dXJuIGJ9ay5pc0FjdGl2ZT1mdW5jdGlvbigpe3JldHVybiAhIXRoaXMuaCYmdGhpcy5oLmlzQWN0aXZlKHRoaXMpfTtmdW5jdGlvbiBOZCgpe31rPU5kLnByb3RvdHlwZTtrLkJhPWZ1bmN0aW9uKCl7fTtrLkFhPWZ1bmN0aW9uKCl7fTtrLnphPWZ1bmN0aW9uKCl7fTtrLnlhPWZ1bmN0aW9uKCl7fTtrLmlzQWN0aXZlPWZ1bmN0aW9uKCl7cmV0dXJuICEwfTtrLlZhPWZ1bmN0aW9uKCl7fTtmdW5jdGlvbiBPZCgpe2lmKHomJiEoMTA8PU51bWJlcihGYSkpKXRocm93IEVycm9yKFwiRW52aXJvbm1lbnRhbCBlcnJvcjogbm8gYXZhaWxhYmxlIHRyYW5zcG9ydC5cIik7fU9kLnByb3RvdHlwZS5nPWZ1bmN0aW9uKGEsYil7cmV0dXJuIG5ldyBRKGEsYil9O1xuZnVuY3Rpb24gUShhLGIpe0IuY2FsbCh0aGlzKTt0aGlzLmc9bmV3IEVkKGIpO3RoaXMubD1hO3RoaXMuaD1iJiZiLm1lc3NhZ2VVcmxQYXJhbXN8fG51bGw7YT1iJiZiLm1lc3NhZ2VIZWFkZXJzfHxudWxsO2ImJmIuY2xpZW50UHJvdG9jb2xIZWFkZXJSZXF1aXJlZCYmKGE/YVtcIlgtQ2xpZW50LVByb3RvY29sXCJdPVwid2ViY2hhbm5lbFwiOmE9e1wiWC1DbGllbnQtUHJvdG9jb2xcIjpcIndlYmNoYW5uZWxcIn0pO3RoaXMuZy5zPWE7YT1iJiZiLmluaXRNZXNzYWdlSGVhZGVyc3x8bnVsbDtiJiZiLm1lc3NhZ2VDb250ZW50VHlwZSYmKGE/YVtcIlgtV2ViQ2hhbm5lbC1Db250ZW50LVR5cGVcIl09Yi5tZXNzYWdlQ29udGVudFR5cGU6YT17XCJYLVdlYkNoYW5uZWwtQ29udGVudC1UeXBlXCI6Yi5tZXNzYWdlQ29udGVudFR5cGV9KTtiJiZiLkNhJiYoYT9hW1wiWC1XZWJDaGFubmVsLUNsaWVudC1Qcm9maWxlXCJdPWIuQ2E6YT17XCJYLVdlYkNoYW5uZWwtQ2xpZW50LVByb2ZpbGVcIjpiLkNhfSk7dGhpcy5nLlU9XG5hOyhhPWImJmIuY2MpJiYheChhKSYmKHRoaXMuZy5vPWEpO3RoaXMuQT1iJiZiLnN1cHBvcnRzQ3Jvc3NEb21haW5YaHJ8fCExO3RoaXMudj1iJiZiLnNlbmRSYXdKc29ufHwhMTsoYj1iJiZiLmh0dHBTZXNzaW9uSWRQYXJhbSkmJiF4KGIpJiYodGhpcy5nLkY9YixhPXRoaXMuaCxudWxsIT09YSYmYiBpbiBhJiYoYT10aGlzLmgsYiBpbiBhJiZkZWxldGUgYVtiXSkpO3RoaXMuaj1uZXcgUih0aGlzKTt9cihRLEIpO1EucHJvdG90eXBlLm09ZnVuY3Rpb24oKXt0aGlzLmcuaD10aGlzLmo7dGhpcy5BJiYodGhpcy5nLko9ITApO3ZhciBhPXRoaXMuZyxiPXRoaXMubCxjPXRoaXMuaHx8dm9pZCAwO0YoMCk7YS5ZPWI7YS5uYT1jfHx7fTthLkc9YS5hYTthLkk9RGMoYSxudWxsLGEuWSk7R2MoYSk7fTtRLnByb3RvdHlwZS5jbG9zZT1mdW5jdGlvbigpe0hjKHRoaXMuZyk7fTtcblEucHJvdG90eXBlLnU9ZnVuY3Rpb24oYSl7dmFyIGI9dGhpcy5nO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSl7dmFyIGM9e307Yy5fX2RhdGFfXz1hO2E9Yzt9ZWxzZSB0aGlzLnYmJihjPXt9LGMuX19kYXRhX189amIoYSksYT1jKTtiLmoucHVzaChuZXcgYmQoYi5mYisrLGEpKTszPT1iLkgmJkdjKGIpO307US5wcm90b3R5cGUuTj1mdW5jdGlvbigpe3RoaXMuZy5oPW51bGw7ZGVsZXRlIHRoaXMuajtIYyh0aGlzLmcpO2RlbGV0ZSB0aGlzLmc7US4kLk4uY2FsbCh0aGlzKTt9O1xuZnVuY3Rpb24gUGQoYSl7WWIuY2FsbCh0aGlzKTthLl9faGVhZGVyc19fJiYodGhpcy5oZWFkZXJzPWEuX19oZWFkZXJzX18sdGhpcy5zdGF0dXNDb2RlPWEuX19zdGF0dXNfXyxkZWxldGUgYS5fX2hlYWRlcnNfXyxkZWxldGUgYS5fX3N0YXR1c19fKTt2YXIgYj1hLl9fc21fXztpZihiKXthOntmb3IoY29uc3QgYyBpbiBiKXthPWM7YnJlYWsgYX1hPXZvaWQgMDt9aWYodGhpcy5pPWEpYT10aGlzLmksYj1udWxsIT09YiYmYSBpbiBiP2JbYV06dm9pZCAwO3RoaXMuZGF0YT1iO31lbHNlIHRoaXMuZGF0YT1hO31yKFBkLFliKTtmdW5jdGlvbiBRZCgpe1piLmNhbGwodGhpcyk7dGhpcy5zdGF0dXM9MTt9cihRZCxaYik7ZnVuY3Rpb24gUihhKXt0aGlzLmc9YTt9cihSLE5kKTtSLnByb3RvdHlwZS5CYT1mdW5jdGlvbigpe0ModGhpcy5nLFwiYVwiKTt9O1IucHJvdG90eXBlLkFhPWZ1bmN0aW9uKGEpe0ModGhpcy5nLG5ldyBQZChhKSk7fTtcblIucHJvdG90eXBlLnphPWZ1bmN0aW9uKGEpe0ModGhpcy5nLG5ldyBRZCgpKTt9O1IucHJvdG90eXBlLnlhPWZ1bmN0aW9uKCl7Qyh0aGlzLmcsXCJiXCIpO307ZnVuY3Rpb24gUmQoKXt0aGlzLmJsb2NrU2l6ZT0tMTt9ZnVuY3Rpb24gUygpe3RoaXMuYmxvY2tTaXplPS0xO3RoaXMuYmxvY2tTaXplPTY0O3RoaXMuZz1BcnJheSg0KTt0aGlzLm09QXJyYXkodGhpcy5ibG9ja1NpemUpO3RoaXMuaT10aGlzLmg9MDt0aGlzLnJlc2V0KCk7fXIoUyxSZCk7Uy5wcm90b3R5cGUucmVzZXQ9ZnVuY3Rpb24oKXt0aGlzLmdbMF09MTczMjU4NDE5Mzt0aGlzLmdbMV09NDAyMzIzMzQxNzt0aGlzLmdbMl09MjU2MjM4MzEwMjt0aGlzLmdbM109MjcxNzMzODc4O3RoaXMuaT10aGlzLmg9MDt9O1xuZnVuY3Rpb24gU2QoYSxiLGMpe2N8fChjPTApO3ZhciBkPUFycmF5KDE2KTtpZihcInN0cmluZ1wiPT09dHlwZW9mIGIpZm9yKHZhciBlPTA7MTY+ZTsrK2UpZFtlXT1iLmNoYXJDb2RlQXQoYysrKXxiLmNoYXJDb2RlQXQoYysrKTw8OHxiLmNoYXJDb2RlQXQoYysrKTw8MTZ8Yi5jaGFyQ29kZUF0KGMrKyk8PDI0O2Vsc2UgZm9yKGU9MDsxNj5lOysrZSlkW2VdPWJbYysrXXxiW2MrK108PDh8YltjKytdPDwxNnxiW2MrK108PDI0O2I9YS5nWzBdO2M9YS5nWzFdO2U9YS5nWzJdO3ZhciBmPWEuZ1szXTt2YXIgaD1iKyhmXmMmKGVeZikpK2RbMF0rMzYxNDA5MDM2MCY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbMV0rMzkwNTQwMjcxMCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTImNDI5NDk2NzI5NXxoPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzJdKzYwNjEwNTgxOSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO1xuaD1jKyhiXmUmKGZeYikpK2RbM10rMzI1MDQ0MTk2NiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZl5jJihlXmYpKStkWzRdKzQxMTg1NDgzOTkmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzVdKzEyMDAwODA0MjYmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFs2XSsyODIxNzM1OTU1JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7aD1jKyhiXmUmKGZeYikpK2RbN10rNDI0OTI2MTMxMyY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjImNDI5NDk2NzI5NXxoPj4+MTApO2g9YisoZl5jJihlXmYpKStkWzhdKzE3NzAwMzU0MTYmNDI5NDk2NzI5NTtiPWMrKGg8PDcmNDI5NDk2NzI5NXxoPj4+MjUpO2g9ZisoZV5iJihjXmUpKStkWzldKzIzMzY1NTI4NzkmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8XG5oPj4+MjApO2g9ZSsoY15mJihiXmMpKStkWzEwXSs0Mjk0OTI1MjMzJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNyY0Mjk0OTY3Mjk1fGg+Pj4xNSk7aD1jKyhiXmUmKGZeYikpK2RbMTFdKzIzMDQ1NjMxMzQmNDI5NDk2NzI5NTtjPWUrKGg8PDIyJjQyOTQ5NjcyOTV8aD4+PjEwKTtoPWIrKGZeYyYoZV5mKSkrZFsxMl0rMTgwNDYwMzY4MiY0Mjk0OTY3Mjk1O2I9YysoaDw8NyY0Mjk0OTY3Mjk1fGg+Pj4yNSk7aD1mKyhlXmImKGNeZSkpK2RbMTNdKzQyNTQ2MjYxOTUmNDI5NDk2NzI5NTtmPWIrKGg8PDEyJjQyOTQ5NjcyOTV8aD4+PjIwKTtoPWUrKGNeZiYoYl5jKSkrZFsxNF0rMjc5Mjk2NTAwNiY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTcmNDI5NDk2NzI5NXxoPj4+MTUpO2g9YysoYl5lJihmXmIpKStkWzE1XSsxMjM2NTM1MzI5JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMiY0Mjk0OTY3Mjk1fGg+Pj4xMCk7aD1iKyhlXmYmKGNeZSkpK2RbMV0rNDEyOTE3MDc4NiY0Mjk0OTY3Mjk1O2I9YysoaDw8XG41JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFs2XSszMjI1NDY1NjY0JjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFsxMV0rNjQzNzE3NzEzJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbMF0rMzkyMTA2OTk5NCY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoZV5mJihjXmUpKStkWzVdKzM1OTM0MDg2MDUmNDI5NDk2NzI5NTtiPWMrKGg8PDUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzEwXSszODAxNjA4MyY0Mjk0OTY3Mjk1O2Y9YisoaDw8OSY0Mjk0OTY3Mjk1fGg+Pj4yMyk7aD1lKyhiXmMmKGZeYikpK2RbMTVdKzM2MzQ0ODg5NjEmNDI5NDk2NzI5NTtlPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFs0XSszODg5NDI5NDQ4JjQyOTQ5NjcyOTU7Yz1cbmUrKGg8PDIwJjQyOTQ5NjcyOTV8aD4+PjEyKTtoPWIrKGVeZiYoY15lKSkrZFs5XSs1Njg0NDY0MzgmNDI5NDk2NzI5NTtiPWMrKGg8PDUmNDI5NDk2NzI5NXxoPj4+MjcpO2g9ZisoY15lJihiXmMpKStkWzE0XSszMjc1MTYzNjA2JjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFszXSs0MTA3NjAzMzM1JjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNCY0Mjk0OTY3Mjk1fGg+Pj4xOCk7aD1jKyhmXmImKGVeZikpK2RbOF0rMTE2MzUzMTUwMSY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoZV5mJihjXmUpKStkWzEzXSsyODUwMjg1ODI5JjQyOTQ5NjcyOTU7Yj1jKyhoPDw1JjQyOTQ5NjcyOTV8aD4+PjI3KTtoPWYrKGNeZSYoYl5jKSkrZFsyXSs0MjQzNTYzNTEyJjQyOTQ5NjcyOTU7Zj1iKyhoPDw5JjQyOTQ5NjcyOTV8aD4+PjIzKTtoPWUrKGJeYyYoZl5iKSkrZFs3XSsxNzM1MzI4NDczJjQyOTQ5NjcyOTU7XG5lPWYrKGg8PDE0JjQyOTQ5NjcyOTV8aD4+PjE4KTtoPWMrKGZeYiYoZV5mKSkrZFsxMl0rMjM2ODM1OTU2MiY0Mjk0OTY3Mjk1O2M9ZSsoaDw8MjAmNDI5NDk2NzI5NXxoPj4+MTIpO2g9YisoY15lXmYpK2RbNV0rNDI5NDU4ODczOCY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFs4XSsyMjcyMzkyODMzJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fGg+Pj4yMSk7aD1lKyhmXmJeYykrZFsxMV0rMTgzOTAzMDU2MiY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbMTRdKzQyNTk2NTc3NDAmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoY15lXmYpK2RbMV0rMjc2Mzk3NTIzNiY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFs0XSsxMjcyODkzMzUzJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fFxuaD4+PjIxKTtoPWUrKGZeYl5jKStkWzddKzQxMzk0Njk2NjQmNDI5NDk2NzI5NTtlPWYrKGg8PDE2JjQyOTQ5NjcyOTV8aD4+PjE2KTtoPWMrKGVeZl5iKStkWzEwXSszMjAwMjM2NjU2JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGNeZV5mKStkWzEzXSs2ODEyNzkxNzQmNDI5NDk2NzI5NTtiPWMrKGg8PDQmNDI5NDk2NzI5NXxoPj4+MjgpO2g9ZisoYl5jXmUpK2RbMF0rMzkzNjQzMDA3NCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTEmNDI5NDk2NzI5NXxoPj4+MjEpO2g9ZSsoZl5iXmMpK2RbM10rMzU3MjQ0NTMxNyY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTYmNDI5NDk2NzI5NXxoPj4+MTYpO2g9YysoZV5mXmIpK2RbNl0rNzYwMjkxODkmNDI5NDk2NzI5NTtjPWUrKGg8PDIzJjQyOTQ5NjcyOTV8aD4+PjkpO2g9YisoY15lXmYpK2RbOV0rMzY1NDYwMjgwOSY0Mjk0OTY3Mjk1O2I9YysoaDw8NCY0Mjk0OTY3Mjk1fGg+Pj4yOCk7aD1mKyhiXmNeZSkrZFsxMl0rXG4zODczMTUxNDYxJjQyOTQ5NjcyOTU7Zj1iKyhoPDwxMSY0Mjk0OTY3Mjk1fGg+Pj4yMSk7aD1lKyhmXmJeYykrZFsxNV0rNTMwNzQyNTIwJjQyOTQ5NjcyOTU7ZT1mKyhoPDwxNiY0Mjk0OTY3Mjk1fGg+Pj4xNik7aD1jKyhlXmZeYikrZFsyXSszMjk5NjI4NjQ1JjQyOTQ5NjcyOTU7Yz1lKyhoPDwyMyY0Mjk0OTY3Mjk1fGg+Pj45KTtoPWIrKGVeKGN8fmYpKStkWzBdKzQwOTYzMzY0NTImNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbN10rMTEyNjg5MTQxNSY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbMTRdKzI4Nzg2MTIzOTEmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzVdKzQyMzc1MzMyNDEmNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzEyXSsxNzAwNDg1NTcxJlxuNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbM10rMjM5OTk4MDY5MCY0Mjk0OTY3Mjk1O2Y9YisoaDw8MTAmNDI5NDk2NzI5NXxoPj4+MjIpO2g9ZSsoYl4oZnx+YykpK2RbMTBdKzQyOTM5MTU3NzMmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzFdKzIyNDAwNDQ0OTcmNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzhdKzE4NzMzMTMzNTkmNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbMTVdKzQyNjQzNTU1NTImNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzZdKzI3MzQ3Njg5MTYmNDI5NDk2NzI5NTtlPWYrKGg8PDE1JjQyOTQ5NjcyOTV8aD4+PjE3KTtoPWMrKGZeKGV8fmIpKStkWzEzXSsxMzA5MTUxNjQ5JlxuNDI5NDk2NzI5NTtjPWUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKTtoPWIrKGVeKGN8fmYpKStkWzRdKzQxNDk0NDQyMjYmNDI5NDk2NzI5NTtiPWMrKGg8PDYmNDI5NDk2NzI5NXxoPj4+MjYpO2g9ZisoY14oYnx+ZSkpK2RbMTFdKzMxNzQ3NTY5MTcmNDI5NDk2NzI5NTtmPWIrKGg8PDEwJjQyOTQ5NjcyOTV8aD4+PjIyKTtoPWUrKGJeKGZ8fmMpKStkWzJdKzcxODc4NzI1OSY0Mjk0OTY3Mjk1O2U9ZisoaDw8MTUmNDI5NDk2NzI5NXxoPj4+MTcpO2g9YysoZl4oZXx+YikpK2RbOV0rMzk1MTQ4MTc0NSY0Mjk0OTY3Mjk1O2EuZ1swXT1hLmdbMF0rYiY0Mjk0OTY3Mjk1O2EuZ1sxXT1hLmdbMV0rKGUrKGg8PDIxJjQyOTQ5NjcyOTV8aD4+PjExKSkmNDI5NDk2NzI5NTthLmdbMl09YS5nWzJdK2UmNDI5NDk2NzI5NTthLmdbM109YS5nWzNdK2YmNDI5NDk2NzI5NTt9XG5TLnByb3RvdHlwZS5qPWZ1bmN0aW9uKGEsYil7dm9pZCAwPT09YiYmKGI9YS5sZW5ndGgpO2Zvcih2YXIgYz1iLXRoaXMuYmxvY2tTaXplLGQ9dGhpcy5tLGU9dGhpcy5oLGY9MDtmPGI7KXtpZigwPT1lKWZvcig7Zjw9YzspU2QodGhpcyxhLGYpLGYrPXRoaXMuYmxvY2tTaXplO2lmKFwic3RyaW5nXCI9PT10eXBlb2YgYSlmb3IoO2Y8Yjspe2lmKGRbZSsrXT1hLmNoYXJDb2RlQXQoZisrKSxlPT10aGlzLmJsb2NrU2l6ZSl7U2QodGhpcyxkKTtlPTA7YnJlYWt9fWVsc2UgZm9yKDtmPGI7KWlmKGRbZSsrXT1hW2YrK10sZT09dGhpcy5ibG9ja1NpemUpe1NkKHRoaXMsZCk7ZT0wO2JyZWFrfX10aGlzLmg9ZTt0aGlzLmkrPWI7fTtcblMucHJvdG90eXBlLmw9ZnVuY3Rpb24oKXt2YXIgYT1BcnJheSgoNTY+dGhpcy5oP3RoaXMuYmxvY2tTaXplOjIqdGhpcy5ibG9ja1NpemUpLXRoaXMuaCk7YVswXT0xMjg7Zm9yKHZhciBiPTE7YjxhLmxlbmd0aC04OysrYilhW2JdPTA7dmFyIGM9OCp0aGlzLmk7Zm9yKGI9YS5sZW5ndGgtODtiPGEubGVuZ3RoOysrYilhW2JdPWMmMjU1LGMvPTI1Njt0aGlzLmooYSk7YT1BcnJheSgxNik7Zm9yKGI9Yz0wOzQ+YjsrK2IpZm9yKHZhciBkPTA7MzI+ZDtkKz04KWFbYysrXT10aGlzLmdbYl0+Pj5kJjI1NTtyZXR1cm4gYX07ZnVuY3Rpb24gVChhLGIpe3RoaXMuaD1iO2Zvcih2YXIgYz1bXSxkPSEwLGU9YS5sZW5ndGgtMTswPD1lO2UtLSl7dmFyIGY9YVtlXXwwO2QmJmY9PWJ8fChjW2VdPWYsZD0hMSk7fXRoaXMuZz1jO312YXIgc2E9e307ZnVuY3Rpb24gVGQoYSl7cmV0dXJuIC0xMjg8PWEmJjEyOD5hP3JhKGEsZnVuY3Rpb24oYil7cmV0dXJuIG5ldyBUKFtifDBdLDA+Yj8tMTowKX0pOm5ldyBUKFthfDBdLDA+YT8tMTowKX1mdW5jdGlvbiBVKGEpe2lmKGlzTmFOKGEpfHwhaXNGaW5pdGUoYSkpcmV0dXJuIFY7aWYoMD5hKXJldHVybiBXKFUoLWEpKTtmb3IodmFyIGI9W10sYz0xLGQ9MDthPj1jO2QrKyliW2RdPWEvY3wwLGMqPVVkO3JldHVybiBuZXcgVChiLDApfVxuZnVuY3Rpb24gVmQoYSxiKXtpZigwPT1hLmxlbmd0aCl0aHJvdyBFcnJvcihcIm51bWJlciBmb3JtYXQgZXJyb3I6IGVtcHR5IHN0cmluZ1wiKTtiPWJ8fDEwO2lmKDI+Ynx8MzY8Yil0aHJvdyBFcnJvcihcInJhZGl4IG91dCBvZiByYW5nZTogXCIrYik7aWYoXCItXCI9PWEuY2hhckF0KDApKXJldHVybiBXKFZkKGEuc3Vic3RyaW5nKDEpLGIpKTtpZigwPD1hLmluZGV4T2YoXCItXCIpKXRocm93IEVycm9yKCdudW1iZXIgZm9ybWF0IGVycm9yOiBpbnRlcmlvciBcIi1cIiBjaGFyYWN0ZXInKTtmb3IodmFyIGM9VShNYXRoLnBvdyhiLDgpKSxkPVYsZT0wO2U8YS5sZW5ndGg7ZSs9OCl7dmFyIGY9TWF0aC5taW4oOCxhLmxlbmd0aC1lKSxoPXBhcnNlSW50KGEuc3Vic3RyaW5nKGUsZStmKSxiKTs4PmY/KGY9VShNYXRoLnBvdyhiLGYpKSxkPWQuUihmKS5hZGQoVShoKSkpOihkPWQuUihjKSxkPWQuYWRkKFUoaCkpKTt9cmV0dXJuIGR9XG52YXIgVWQ9NDI5NDk2NzI5NixWPVRkKDApLFdkPVRkKDEpLFhkPVRkKDE2Nzc3MjE2KTtrPVQucHJvdG90eXBlO2suZWE9ZnVuY3Rpb24oKXtpZihYKHRoaXMpKXJldHVybiAtVyh0aGlzKS5lYSgpO2Zvcih2YXIgYT0wLGI9MSxjPTA7Yzx0aGlzLmcubGVuZ3RoO2MrKyl7dmFyIGQ9dGhpcy5EKGMpO2ErPSgwPD1kP2Q6VWQrZCkqYjtiKj1VZDt9cmV0dXJuIGF9O1xuay50b1N0cmluZz1mdW5jdGlvbihhKXthPWF8fDEwO2lmKDI+YXx8MzY8YSl0aHJvdyBFcnJvcihcInJhZGl4IG91dCBvZiByYW5nZTogXCIrYSk7aWYoWSh0aGlzKSlyZXR1cm4gXCIwXCI7aWYoWCh0aGlzKSlyZXR1cm4gXCItXCIrVyh0aGlzKS50b1N0cmluZyhhKTtmb3IodmFyIGI9VShNYXRoLnBvdyhhLDYpKSxjPXRoaXMsZD1cIlwiOzspe3ZhciBlPVlkKGMsYikuZztjPVpkKGMsZS5SKGIpKTt2YXIgZj0oKDA8Yy5nLmxlbmd0aD9jLmdbMF06Yy5oKT4+PjApLnRvU3RyaW5nKGEpO2M9ZTtpZihZKGMpKXJldHVybiBmK2Q7Zm9yKDs2PmYubGVuZ3RoOylmPVwiMFwiK2Y7ZD1mK2Q7fX07ay5EPWZ1bmN0aW9uKGEpe3JldHVybiAwPmE/MDphPHRoaXMuZy5sZW5ndGg/dGhpcy5nW2FdOnRoaXMuaH07ZnVuY3Rpb24gWShhKXtpZigwIT1hLmgpcmV0dXJuICExO2Zvcih2YXIgYj0wO2I8YS5nLmxlbmd0aDtiKyspaWYoMCE9YS5nW2JdKXJldHVybiAhMTtyZXR1cm4gITB9XG5mdW5jdGlvbiBYKGEpe3JldHVybiAtMT09YS5ofWsuWD1mdW5jdGlvbihhKXthPVpkKHRoaXMsYSk7cmV0dXJuIFgoYSk/LTE6WShhKT8wOjF9O2Z1bmN0aW9uIFcoYSl7Zm9yKHZhciBiPWEuZy5sZW5ndGgsYz1bXSxkPTA7ZDxiO2QrKyljW2RdPX5hLmdbZF07cmV0dXJuIChuZXcgVChjLH5hLmgpKS5hZGQoV2QpfWsuYWJzPWZ1bmN0aW9uKCl7cmV0dXJuIFgodGhpcyk/Vyh0aGlzKTp0aGlzfTtrLmFkZD1mdW5jdGlvbihhKXtmb3IodmFyIGI9TWF0aC5tYXgodGhpcy5nLmxlbmd0aCxhLmcubGVuZ3RoKSxjPVtdLGQ9MCxlPTA7ZTw9YjtlKyspe3ZhciBmPWQrKHRoaXMuRChlKSY2NTUzNSkrKGEuRChlKSY2NTUzNSksaD0oZj4+PjE2KSsodGhpcy5EKGUpPj4+MTYpKyhhLkQoZSk+Pj4xNik7ZD1oPj4+MTY7ZiY9NjU1MzU7aCY9NjU1MzU7Y1tlXT1oPDwxNnxmO31yZXR1cm4gbmV3IFQoYyxjW2MubGVuZ3RoLTFdJi0yMTQ3NDgzNjQ4Py0xOjApfTtcbmZ1bmN0aW9uIFpkKGEsYil7cmV0dXJuIGEuYWRkKFcoYikpfVxuay5SPWZ1bmN0aW9uKGEpe2lmKFkodGhpcyl8fFkoYSkpcmV0dXJuIFY7aWYoWCh0aGlzKSlyZXR1cm4gWChhKT9XKHRoaXMpLlIoVyhhKSk6VyhXKHRoaXMpLlIoYSkpO2lmKFgoYSkpcmV0dXJuIFcodGhpcy5SKFcoYSkpKTtpZigwPnRoaXMuWChYZCkmJjA+YS5YKFhkKSlyZXR1cm4gVSh0aGlzLmVhKCkqYS5lYSgpKTtmb3IodmFyIGI9dGhpcy5nLmxlbmd0aCthLmcubGVuZ3RoLGM9W10sZD0wO2Q8MipiO2QrKyljW2RdPTA7Zm9yKGQ9MDtkPHRoaXMuZy5sZW5ndGg7ZCsrKWZvcih2YXIgZT0wO2U8YS5nLmxlbmd0aDtlKyspe3ZhciBmPXRoaXMuRChkKT4+PjE2LGg9dGhpcy5EKGQpJjY1NTM1LG49YS5EKGUpPj4+MTYsdD1hLkQoZSkmNjU1MzU7Y1syKmQrMiplXSs9aCp0OyRkKGMsMipkKzIqZSk7Y1syKmQrMiplKzFdKz1mKnQ7JGQoYywyKmQrMiplKzEpO2NbMipkKzIqZSsxXSs9aCpuOyRkKGMsMipkKzIqZSsxKTtjWzIqZCsyKmUrMl0rPWYqbjskZChjLDIqZCsyKmUrMik7fWZvcihkPVxuMDtkPGI7ZCsrKWNbZF09Y1syKmQrMV08PDE2fGNbMipkXTtmb3IoZD1iO2Q8MipiO2QrKyljW2RdPTA7cmV0dXJuIG5ldyBUKGMsMCl9O2Z1bmN0aW9uICRkKGEsYil7Zm9yKDsoYVtiXSY2NTUzNSkhPWFbYl07KWFbYisxXSs9YVtiXT4+PjE2LGFbYl0mPTY1NTM1LGIrKzt9ZnVuY3Rpb24gYWUoYSxiKXt0aGlzLmc9YTt0aGlzLmg9Yjt9XG5mdW5jdGlvbiBZZChhLGIpe2lmKFkoYikpdGhyb3cgRXJyb3IoXCJkaXZpc2lvbiBieSB6ZXJvXCIpO2lmKFkoYSkpcmV0dXJuIG5ldyBhZShWLFYpO2lmKFgoYSkpcmV0dXJuIGI9WWQoVyhhKSxiKSxuZXcgYWUoVyhiLmcpLFcoYi5oKSk7aWYoWChiKSlyZXR1cm4gYj1ZZChhLFcoYikpLG5ldyBhZShXKGIuZyksYi5oKTtpZigzMDxhLmcubGVuZ3RoKXtpZihYKGEpfHxYKGIpKXRocm93IEVycm9yKFwic2xvd0RpdmlkZV8gb25seSB3b3JrcyB3aXRoIHBvc2l0aXZlIGludGVnZXJzLlwiKTtmb3IodmFyIGM9V2QsZD1iOzA+PWQuWChhKTspYz1iZShjKSxkPWJlKGQpO3ZhciBlPVooYywxKSxmPVooZCwxKTtkPVooZCwyKTtmb3IoYz1aKGMsMik7IVkoZCk7KXt2YXIgaD1mLmFkZChkKTswPj1oLlgoYSkmJihlPWUuYWRkKGMpLGY9aCk7ZD1aKGQsMSk7Yz1aKGMsMSk7fWI9WmQoYSxlLlIoYikpO3JldHVybiBuZXcgYWUoZSxiKX1mb3IoZT1WOzA8PWEuWChiKTspe2M9TWF0aC5tYXgoMSxNYXRoLmZsb29yKGEuZWEoKS9cbmIuZWEoKSkpO2Q9TWF0aC5jZWlsKE1hdGgubG9nKGMpL01hdGguTE4yKTtkPTQ4Pj1kPzE6TWF0aC5wb3coMixkLTQ4KTtmPVUoYyk7Zm9yKGg9Zi5SKGIpO1goaCl8fDA8aC5YKGEpOyljLT1kLGY9VShjKSxoPWYuUihiKTtZKGYpJiYoZj1XZCk7ZT1lLmFkZChmKTthPVpkKGEsaCk7fXJldHVybiBuZXcgYWUoZSxhKX1rLmdiPWZ1bmN0aW9uKGEpe3JldHVybiBZZCh0aGlzLGEpLmh9O2suYW5kPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCkmYS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaCZhLmgpfTtrLm9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCl8YS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaHxhLmgpfTtcbmsueG9yPWZ1bmN0aW9uKGEpe2Zvcih2YXIgYj1NYXRoLm1heCh0aGlzLmcubGVuZ3RoLGEuZy5sZW5ndGgpLGM9W10sZD0wO2Q8YjtkKyspY1tkXT10aGlzLkQoZCleYS5EKGQpO3JldHVybiBuZXcgVChjLHRoaXMuaF5hLmgpfTtmdW5jdGlvbiBiZShhKXtmb3IodmFyIGI9YS5nLmxlbmd0aCsxLGM9W10sZD0wO2Q8YjtkKyspY1tkXT1hLkQoZCk8PDF8YS5EKGQtMSk+Pj4zMTtyZXR1cm4gbmV3IFQoYyxhLmgpfWZ1bmN0aW9uIFooYSxiKXt2YXIgYz1iPj41O2IlPTMyO2Zvcih2YXIgZD1hLmcubGVuZ3RoLWMsZT1bXSxmPTA7ZjxkO2YrKyllW2ZdPTA8Yj9hLkQoZitjKT4+PmJ8YS5EKGYrYysxKTw8MzItYjphLkQoZitjKTtyZXR1cm4gbmV3IFQoZSxhLmgpfU9kLnByb3RvdHlwZS5jcmVhdGVXZWJDaGFubmVsPU9kLnByb3RvdHlwZS5nO1EucHJvdG90eXBlLnNlbmQ9US5wcm90b3R5cGUudTtRLnByb3RvdHlwZS5vcGVuPVEucHJvdG90eXBlLm07US5wcm90b3R5cGUuY2xvc2U9US5wcm90b3R5cGUuY2xvc2U7U2IuTk9fRVJST1I9MDtTYi5USU1FT1VUPTg7U2IuSFRUUF9FUlJPUj02O1RiLkNPTVBMRVRFPVwiY29tcGxldGVcIjtXYi5FdmVudFR5cGU9WGI7WGIuT1BFTj1cImFcIjtYYi5DTE9TRT1cImJcIjtYYi5FUlJPUj1cImNcIjtYYi5NRVNTQUdFPVwiZFwiO0IucHJvdG90eXBlLmxpc3Rlbj1CLnByb3RvdHlwZS5PO1AucHJvdG90eXBlLmxpc3Rlbk9uY2U9UC5wcm90b3R5cGUuUDtQLnByb3RvdHlwZS5nZXRMYXN0RXJyb3I9UC5wcm90b3R5cGUuU2E7UC5wcm90b3R5cGUuZ2V0TGFzdEVycm9yQ29kZT1QLnByb3RvdHlwZS5JYTtQLnByb3RvdHlwZS5nZXRTdGF0dXM9UC5wcm90b3R5cGUuZGE7UC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VKc29uPVAucHJvdG90eXBlLldhO1xuUC5wcm90b3R5cGUuZ2V0UmVzcG9uc2VUZXh0PVAucHJvdG90eXBlLmphO1AucHJvdG90eXBlLnNlbmQ9UC5wcm90b3R5cGUuaGE7UC5wcm90b3R5cGUuc2V0V2l0aENyZWRlbnRpYWxzPVAucHJvdG90eXBlLk9hO1MucHJvdG90eXBlLmRpZ2VzdD1TLnByb3RvdHlwZS5sO1MucHJvdG90eXBlLnJlc2V0PVMucHJvdG90eXBlLnJlc2V0O1MucHJvdG90eXBlLnVwZGF0ZT1TLnByb3RvdHlwZS5qO1QucHJvdG90eXBlLmFkZD1ULnByb3RvdHlwZS5hZGQ7VC5wcm90b3R5cGUubXVsdGlwbHk9VC5wcm90b3R5cGUuUjtULnByb3RvdHlwZS5tb2R1bG89VC5wcm90b3R5cGUuZ2I7VC5wcm90b3R5cGUuY29tcGFyZT1ULnByb3RvdHlwZS5YO1QucHJvdG90eXBlLnRvTnVtYmVyPVQucHJvdG90eXBlLmVhO1QucHJvdG90eXBlLnRvU3RyaW5nPVQucHJvdG90eXBlLnRvU3RyaW5nO1QucHJvdG90eXBlLmdldEJpdHM9VC5wcm90b3R5cGUuRDtULmZyb21OdW1iZXI9VTtULmZyb21TdHJpbmc9VmQ7XG52YXIgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCA9IGVzbS5jcmVhdGVXZWJDaGFubmVsVHJhbnNwb3J0PWZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBPZH07dmFyIGdldFN0YXRFdmVudFRhcmdldCA9IGVzbS5nZXRTdGF0RXZlbnRUYXJnZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gTWIoKX07dmFyIEVycm9yQ29kZSA9IGVzbS5FcnJvckNvZGU9U2I7dmFyIEV2ZW50VHlwZSA9IGVzbS5FdmVudFR5cGU9VGI7dmFyIEV2ZW50ID0gZXNtLkV2ZW50PUU7dmFyIFN0YXQgPSBlc20uU3RhdD17eGI6MCxBYjoxLEJiOjIsVWI6MyxaYjo0LFdiOjUsWGI6NixWYjo3LFRiOjgsWWI6OSxQUk9YWToxMCxOT1BST1hZOjExLFJiOjEyLE5iOjEzLE9iOjE0LE1iOjE1LFBiOjE2LFFiOjE3LHRiOjE4LHNiOjE5LHViOjIwfTt2YXIgRmV0Y2hYbWxIdHRwRmFjdG9yeSA9IGVzbS5GZXRjaFhtbEh0dHBGYWN0b3J5PWxkO3ZhciBXZWJDaGFubmVsID0gZXNtLldlYkNoYW5uZWw9V2I7dmFyIFhocklvID0gZXNtLlhocklvPVA7dmFyIE1kNSA9IGVzbS5NZDU9Uzt2YXIgSW50ZWdlciA9IGVzbS5JbnRlZ2VyPVQ7XG5cbmV4cG9ydCB7IEVycm9yQ29kZSwgRXZlbnQsIEV2ZW50VHlwZSwgRmV0Y2hYbWxIdHRwRmFjdG9yeSwgSW50ZWdlciwgTWQ1LCBTdGF0LCBXZWJDaGFubmVsLCBYaHJJbywgY3JlYXRlV2ViQ2hhbm5lbFRyYW5zcG9ydCwgZXNtIGFzIGRlZmF1bHQsIGdldFN0YXRFdmVudFRhcmdldCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsIi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxNyBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8qKlxyXG4gKiBBIGNvbnRhaW5lciBmb3IgYWxsIG9mIHRoZSBMb2dnZXIgaW5zdGFuY2VzXHJcbiAqL1xyXG5jb25zdCBpbnN0YW5jZXMgPSBbXTtcclxuLyoqXHJcbiAqIFRoZSBKUyBTREsgc3VwcG9ydHMgNSBsb2cgbGV2ZWxzIGFuZCBhbHNvIGFsbG93cyBhIHVzZXIgdGhlIGFiaWxpdHkgdG9cclxuICogc2lsZW5jZSB0aGUgbG9ncyBhbHRvZ2V0aGVyLlxyXG4gKlxyXG4gKiBUaGUgb3JkZXIgaXMgYSBmb2xsb3dzOlxyXG4gKiBERUJVRyA8IFZFUkJPU0UgPCBJTkZPIDwgV0FSTiA8IEVSUk9SXHJcbiAqXHJcbiAqIEFsbCBvZiB0aGUgbG9nIHR5cGVzIGFib3ZlIHRoZSBjdXJyZW50IGxvZyBsZXZlbCB3aWxsIGJlIGNhcHR1cmVkIChpLmUuIGlmXHJcbiAqIHlvdSBzZXQgdGhlIGxvZyBsZXZlbCB0byBgSU5GT2AsIGVycm9ycyB3aWxsIHN0aWxsIGJlIGxvZ2dlZCwgYnV0IGBERUJVR2AgYW5kXHJcbiAqIGBWRVJCT1NFYCBsb2dzIHdpbGwgbm90KVxyXG4gKi9cclxudmFyIExvZ0xldmVsO1xyXG4oZnVuY3Rpb24gKExvZ0xldmVsKSB7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkRFQlVHXCJdID0gMF0gPSBcIkRFQlVHXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlZFUkJPU0VcIl0gPSAxXSA9IFwiVkVSQk9TRVwiO1xyXG4gICAgTG9nTGV2ZWxbTG9nTGV2ZWxbXCJJTkZPXCJdID0gMl0gPSBcIklORk9cIjtcclxuICAgIExvZ0xldmVsW0xvZ0xldmVsW1wiV0FSTlwiXSA9IDNdID0gXCJXQVJOXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIkVSUk9SXCJdID0gNF0gPSBcIkVSUk9SXCI7XHJcbiAgICBMb2dMZXZlbFtMb2dMZXZlbFtcIlNJTEVOVFwiXSA9IDVdID0gXCJTSUxFTlRcIjtcclxufSkoTG9nTGV2ZWwgfHwgKExvZ0xldmVsID0ge30pKTtcclxuY29uc3QgbGV2ZWxTdHJpbmdUb0VudW0gPSB7XHJcbiAgICAnZGVidWcnOiBMb2dMZXZlbC5ERUJVRyxcclxuICAgICd2ZXJib3NlJzogTG9nTGV2ZWwuVkVSQk9TRSxcclxuICAgICdpbmZvJzogTG9nTGV2ZWwuSU5GTyxcclxuICAgICd3YXJuJzogTG9nTGV2ZWwuV0FSTixcclxuICAgICdlcnJvcic6IExvZ0xldmVsLkVSUk9SLFxyXG4gICAgJ3NpbGVudCc6IExvZ0xldmVsLlNJTEVOVFxyXG59O1xyXG4vKipcclxuICogVGhlIGRlZmF1bHQgbG9nIGxldmVsXHJcbiAqL1xyXG5jb25zdCBkZWZhdWx0TG9nTGV2ZWwgPSBMb2dMZXZlbC5JTkZPO1xyXG4vKipcclxuICogQnkgZGVmYXVsdCwgYGNvbnNvbGUuZGVidWdgIGlzIG5vdCBkaXNwbGF5ZWQgaW4gdGhlIGRldmVsb3BlciBjb25zb2xlIChpblxyXG4gKiBjaHJvbWUpLiBUbyBhdm9pZCBmb3JjaW5nIHVzZXJzIHRvIGhhdmUgdG8gb3B0LWluIHRvIHRoZXNlIGxvZ3MgdHdpY2VcclxuICogKGkuZS4gb25jZSBmb3IgZmlyZWJhc2UsIGFuZCBvbmNlIGluIHRoZSBjb25zb2xlKSwgd2UgYXJlIHNlbmRpbmcgYERFQlVHYFxyXG4gKiBsb2dzIHRvIHRoZSBgY29uc29sZS5sb2dgIGZ1bmN0aW9uLlxyXG4gKi9cclxuY29uc3QgQ29uc29sZU1ldGhvZCA9IHtcclxuICAgIFtMb2dMZXZlbC5ERUJVR106ICdsb2cnLFxyXG4gICAgW0xvZ0xldmVsLlZFUkJPU0VdOiAnbG9nJyxcclxuICAgIFtMb2dMZXZlbC5JTkZPXTogJ2luZm8nLFxyXG4gICAgW0xvZ0xldmVsLldBUk5dOiAnd2FybicsXHJcbiAgICBbTG9nTGV2ZWwuRVJST1JdOiAnZXJyb3InXHJcbn07XHJcbi8qKlxyXG4gKiBUaGUgZGVmYXVsdCBsb2cgaGFuZGxlciB3aWxsIGZvcndhcmQgREVCVUcsIFZFUkJPU0UsIElORk8sIFdBUk4sIGFuZCBFUlJPUlxyXG4gKiBtZXNzYWdlcyBvbiB0byB0aGVpciBjb3JyZXNwb25kaW5nIGNvbnNvbGUgY291bnRlcnBhcnRzIChpZiB0aGUgbG9nIG1ldGhvZFxyXG4gKiBpcyBzdXBwb3J0ZWQgYnkgdGhlIGN1cnJlbnQgbG9nIGxldmVsKVxyXG4gKi9cclxuY29uc3QgZGVmYXVsdExvZ0hhbmRsZXIgPSAoaW5zdGFuY2UsIGxvZ1R5cGUsIC4uLmFyZ3MpID0+IHtcclxuICAgIGlmIChsb2dUeXBlIDwgaW5zdGFuY2UubG9nTGV2ZWwpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XHJcbiAgICBjb25zdCBtZXRob2QgPSBDb25zb2xlTWV0aG9kW2xvZ1R5cGVdO1xyXG4gICAgaWYgKG1ldGhvZCkge1xyXG4gICAgICAgIGNvbnNvbGVbbWV0aG9kXShgWyR7bm93fV0gICR7aW5zdGFuY2UubmFtZX06YCwgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF0dGVtcHRlZCB0byBsb2cgYSBtZXNzYWdlIHdpdGggYW4gaW52YWxpZCBsb2dUeXBlICh2YWx1ZTogJHtsb2dUeXBlfSlgKTtcclxuICAgIH1cclxufTtcclxuY2xhc3MgTG9nZ2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogR2l2ZXMgeW91IGFuIGluc3RhbmNlIG9mIGEgTG9nZ2VyIHRvIGNhcHR1cmUgbWVzc2FnZXMgYWNjb3JkaW5nIHRvXHJcbiAgICAgKiBGaXJlYmFzZSdzIGxvZ2dpbmcgc2NoZW1lLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIHRoYXQgdGhlIGxvZ3Mgd2lsbCBiZSBhc3NvY2lhdGVkIHdpdGhcclxuICAgICAqL1xyXG4gICAgY29uc3RydWN0b3IobmFtZSkge1xyXG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGxvZyBsZXZlbCBvZiB0aGUgZ2l2ZW4gTG9nZ2VyIGluc3RhbmNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gZGVmYXVsdExvZ0xldmVsO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBtYWluIChpbnRlcm5hbCkgbG9nIGhhbmRsZXIgZm9yIHRoZSBMb2dnZXIgaW5zdGFuY2UuXHJcbiAgICAgICAgICogQ2FuIGJlIHNldCB0byBhIG5ldyBmdW5jdGlvbiBpbiBpbnRlcm5hbCBwYWNrYWdlIGNvZGUgYnV0IG5vdCBieSB1c2VyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSBkZWZhdWx0TG9nSGFuZGxlcjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgb3B0aW9uYWwsIGFkZGl0aW9uYWwsIHVzZXItZGVmaW5lZCBsb2cgaGFuZGxlciBmb3IgdGhlIExvZ2dlciBpbnN0YW5jZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2FwdHVyZSB0aGUgY3VycmVudCBpbnN0YW5jZSBmb3IgbGF0ZXIgdXNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5zdGFuY2VzLnB1c2godGhpcyk7XHJcbiAgICB9XHJcbiAgICBnZXQgbG9nTGV2ZWwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0xldmVsO1xyXG4gICAgfVxyXG4gICAgc2V0IGxvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIGlmICghKHZhbCBpbiBMb2dMZXZlbCkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihgSW52YWxpZCB2YWx1ZSBcIiR7dmFsfVwiIGFzc2lnbmVkIHRvIFxcYGxvZ0xldmVsXFxgYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLy8gV29ya2Fyb3VuZCBmb3Igc2V0dGVyL2dldHRlciBoYXZpbmcgdG8gYmUgdGhlIHNhbWUgdHlwZS5cclxuICAgIHNldExvZ0xldmVsKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX2xvZ0xldmVsID0gdHlwZW9mIHZhbCA9PT0gJ3N0cmluZycgPyBsZXZlbFN0cmluZ1RvRW51bVt2YWxdIDogdmFsO1xyXG4gICAgfVxyXG4gICAgZ2V0IGxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xvZ0hhbmRsZXI7XHJcbiAgICB9XHJcbiAgICBzZXQgbG9nSGFuZGxlcih2YWwpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHZhbCAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdWYWx1ZSBhc3NpZ25lZCB0byBgbG9nSGFuZGxlcmAgbXVzdCBiZSBhIGZ1bmN0aW9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgdXNlckxvZ0hhbmRsZXIoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3VzZXJMb2dIYW5kbGVyO1xyXG4gICAgfVxyXG4gICAgc2V0IHVzZXJMb2dIYW5kbGVyKHZhbCkge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyID0gdmFsO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGUgZnVuY3Rpb25zIGJlbG93IGFyZSBhbGwgYmFzZWQgb24gdGhlIGBjb25zb2xlYCBpbnRlcmZhY2VcclxuICAgICAqL1xyXG4gICAgZGVidWcoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkRFQlVHLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGxvZyguLi5hcmdzKSB7XHJcbiAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIgJiZcclxuICAgICAgICAgICAgdGhpcy5fdXNlckxvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuVkVSQk9TRSwgLi4uYXJncyk7XHJcbiAgICAgICAgdGhpcy5fbG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5WRVJCT1NFLCAuLi5hcmdzKTtcclxuICAgIH1cclxuICAgIGluZm8oLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLklORk8sIC4uLmFyZ3MpO1xyXG4gICAgICAgIHRoaXMuX2xvZ0hhbmRsZXIodGhpcywgTG9nTGV2ZWwuSU5GTywgLi4uYXJncyk7XHJcbiAgICB9XHJcbiAgICB3YXJuKC4uLmFyZ3MpIHtcclxuICAgICAgICB0aGlzLl91c2VyTG9nSGFuZGxlciAmJiB0aGlzLl91c2VyTG9nSGFuZGxlcih0aGlzLCBMb2dMZXZlbC5XQVJOLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLldBUk4sIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG4gICAgZXJyb3IoLi4uYXJncykge1xyXG4gICAgICAgIHRoaXMuX3VzZXJMb2dIYW5kbGVyICYmIHRoaXMuX3VzZXJMb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgICAgICB0aGlzLl9sb2dIYW5kbGVyKHRoaXMsIExvZ0xldmVsLkVSUk9SLCAuLi5hcmdzKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBzZXRMb2dMZXZlbChsZXZlbCkge1xyXG4gICAgaW5zdGFuY2VzLmZvckVhY2goaW5zdCA9PiB7XHJcbiAgICAgICAgaW5zdC5zZXRMb2dMZXZlbChsZXZlbCk7XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBzZXRVc2VyTG9nSGFuZGxlcihsb2dDYWxsYmFjaywgb3B0aW9ucykge1xyXG4gICAgZm9yIChjb25zdCBpbnN0YW5jZSBvZiBpbnN0YW5jZXMpIHtcclxuICAgICAgICBsZXQgY3VzdG9tTG9nTGV2ZWwgPSBudWxsO1xyXG4gICAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubGV2ZWwpIHtcclxuICAgICAgICAgICAgY3VzdG9tTG9nTGV2ZWwgPSBsZXZlbFN0cmluZ1RvRW51bVtvcHRpb25zLmxldmVsXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGxvZ0NhbGxiYWNrID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnVzZXJMb2dIYW5kbGVyID0gKGluc3RhbmNlLCBsZXZlbCwgLi4uYXJncykgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZSA9IGFyZ3NcclxuICAgICAgICAgICAgICAgICAgICAubWFwKGFyZyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFyZyA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgYXJnID09PSAnYm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFyZy50b1N0cmluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNlIGlmIChhcmcgaW5zdGFuY2VvZiBFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gYXJnLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KGFyZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGlnbm9yZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmlsdGVyKGFyZyA9PiBhcmcpXHJcbiAgICAgICAgICAgICAgICAgICAgLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgICAgIGlmIChsZXZlbCA+PSAoY3VzdG9tTG9nTGV2ZWwgIT09IG51bGwgJiYgY3VzdG9tTG9nTGV2ZWwgIT09IHZvaWQgMCA/IGN1c3RvbUxvZ0xldmVsIDogaW5zdGFuY2UubG9nTGV2ZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbG9nQ2FsbGJhY2soe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXZlbDogTG9nTGV2ZWxbbGV2ZWxdLnRvTG93ZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IGluc3RhbmNlLm5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cblxuZXhwb3J0IHsgTG9nTGV2ZWwsIExvZ2dlciwgc2V0TG9nTGV2ZWwsIHNldFVzZXJMb2dIYW5kbGVyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiaW1wb3J0IHsgRGVmZXJyZWQgfSBmcm9tICdAZmlyZWJhc2UvdXRpbCc7XG5cbi8qKlxyXG4gKiBDb21wb25lbnQgZm9yIHNlcnZpY2UgbmFtZSBULCBlLmcuIGBhdXRoYCwgYGF1dGgtaW50ZXJuYWxgXHJcbiAqL1xyXG5jbGFzcyBDb21wb25lbnQge1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIHB1YmxpYyBzZXJ2aWNlIG5hbWUsIGUuZy4gYXBwLCBhdXRoLCBmaXJlc3RvcmUsIGRhdGFiYXNlXHJcbiAgICAgKiBAcGFyYW0gaW5zdGFuY2VGYWN0b3J5IFNlcnZpY2UgZmFjdG9yeSByZXNwb25zaWJsZSBmb3IgY3JlYXRpbmcgdGhlIHB1YmxpYyBpbnRlcmZhY2VcclxuICAgICAqIEBwYXJhbSB0eXBlIHdoZXRoZXIgdGhlIHNlcnZpY2UgcHJvdmlkZWQgYnkgdGhlIGNvbXBvbmVudCBpcyBwdWJsaWMgb3IgcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lLCBpbnN0YW5jZUZhY3RvcnksIHR5cGUpIHtcclxuICAgICAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VGYWN0b3J5ID0gaW5zdGFuY2VGYWN0b3J5O1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IGZhbHNlO1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFByb3BlcnRpZXMgdG8gYmUgYWRkZWQgdG8gdGhlIHNlcnZpY2UgbmFtZXNwYWNlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSB7fTtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gXCJMQVpZXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuTEFaWSAqLztcclxuICAgICAgICB0aGlzLm9uSW5zdGFuY2VDcmVhdGVkID0gbnVsbDtcclxuICAgIH1cclxuICAgIHNldEluc3RhbnRpYXRpb25Nb2RlKG1vZGUpIHtcclxuICAgICAgICB0aGlzLmluc3RhbnRpYXRpb25Nb2RlID0gbW9kZTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldE11bHRpcGxlSW5zdGFuY2VzKG11bHRpcGxlSW5zdGFuY2VzKSB7XHJcbiAgICAgICAgdGhpcy5tdWx0aXBsZUluc3RhbmNlcyA9IG11bHRpcGxlSW5zdGFuY2VzO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgc2V0U2VydmljZVByb3BzKHByb3BzKSB7XHJcbiAgICAgICAgdGhpcy5zZXJ2aWNlUHJvcHMgPSBwcm9wcztcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHNldEluc3RhbmNlQ3JlYXRlZENhbGxiYWNrKGNhbGxiYWNrKSB7XHJcbiAgICAgICAgdGhpcy5vbkluc3RhbmNlQ3JlYXRlZCA9IGNhbGxiYWNrO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IERFRkFVTFRfRU5UUllfTkFNRSA9ICdbREVGQVVMVF0nO1xuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTkgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogUHJvdmlkZXIgZm9yIGluc3RhbmNlIGZvciBzZXJ2aWNlIG5hbWUgVCwgZS5nLiAnYXV0aCcsICdhdXRoLWludGVybmFsJ1xyXG4gKiBOYW1lU2VydmljZU1hcHBpbmdbVF0gaXMgYW4gYWxpYXMgZm9yIHRoZSB0eXBlIG9mIHRoZSBpbnN0YW5jZVxyXG4gKi9cclxuY2xhc3MgUHJvdmlkZXIge1xyXG4gICAgY29uc3RydWN0b3IobmFtZSwgY29udGFpbmVyKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGNvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZCA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmluc3RhbmNlc09wdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgdGhpcy5vbkluaXRDYWxsYmFja3MgPSBuZXcgTWFwKCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEEgcHJvdmlkZXIgY2FuIHByb3ZpZGUgbXVsaXRwbGUgaW5zdGFuY2VzIG9mIGEgc2VydmljZVxyXG4gICAgICogaWYgdGhpcy5jb21wb25lbnQubXVsdGlwbGVJbnN0YW5jZXMgaXMgdHJ1ZS5cclxuICAgICAqL1xyXG4gICAgZ2V0KGlkZW50aWZpZXIpIHtcclxuICAgICAgICAvLyBpZiBtdWx0aXBsZUluc3RhbmNlcyBpcyBub3Qgc3VwcG9ydGVkLCB1c2UgdGhlIGRlZmF1bHQgbmFtZVxyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCF0aGlzLmluc3RhbmNlc0RlZmVycmVkLmhhcyhub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgY29uc3QgZGVmZXJyZWQgPSBuZXcgRGVmZXJyZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGRlZmVycmVkKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgICAgIHRoaXMuc2hvdWxkQXV0b0luaXRpYWxpemUoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6ZSB0aGUgc2VydmljZSBpZiBpdCBjYW4gYmUgYXV0by1pbml0aWFsaXplZFxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplZElkZW50aWZpZXJcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShpbnN0YW5jZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIGdldCgpLCBpdCBzaG91bGQgbm90IGNhdXNlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYSBmYXRhbCBlcnJvci4gV2UganVzdCByZXR1cm4gdGhlIHVucmVzb2x2ZWQgcHJvbWlzZSBpbiB0aGlzIGNhc2UuXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKS5wcm9taXNlO1xyXG4gICAgfVxyXG4gICAgZ2V0SW1tZWRpYXRlKG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgLy8gaWYgbXVsdGlwbGVJbnN0YW5jZXMgaXMgbm90IHN1cHBvcnRlZCwgdXNlIHRoZSBkZWZhdWx0IG5hbWVcclxuICAgICAgICBjb25zdCBub3JtYWxpemVkSWRlbnRpZmllciA9IHRoaXMubm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5pZGVudGlmaWVyKTtcclxuICAgICAgICBjb25zdCBvcHRpb25hbCA9IChfYSA9IG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5vcHRpb25hbCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogZmFsc2U7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikgfHxcclxuICAgICAgICAgICAgdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRPckluaXRpYWxpemVTZXJ2aWNlKHtcclxuICAgICAgICAgICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbmFsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBJbiBjYXNlIGEgY29tcG9uZW50IGlzIG5vdCBpbml0aWFsaXplZCBhbmQgc2hvdWxkL2NhbiBub3QgYmUgYXV0by1pbml0aWFsaXplZCBhdCB0aGUgbW9tZW50LCByZXR1cm4gbnVsbCBpZiB0aGUgb3B0aW9uYWwgZmxhZyBpcyBzZXQsIG9yIHRocm93XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25hbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBFcnJvcihgU2VydmljZSAke3RoaXMubmFtZX0gaXMgbm90IGF2YWlsYWJsZWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0Q29tcG9uZW50KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbXBvbmVudDtcclxuICAgIH1cclxuICAgIHNldENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBpZiAoY29tcG9uZW50Lm5hbWUgIT09IHRoaXMubmFtZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgTWlzbWF0Y2hpbmcgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGZvciBQcm92aWRlciAke3RoaXMubmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmNvbXBvbmVudCkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50IGZvciAke3RoaXMubmFtZX0gaGFzIGFscmVhZHkgYmVlbiBwcm92aWRlZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNvbXBvbmVudCA9IGNvbXBvbmVudDtcclxuICAgICAgICAvLyByZXR1cm4gZWFybHkgd2l0aG91dCBhdHRlbXB0aW5nIHRvIGluaXRpYWxpemUgdGhlIGNvbXBvbmVudCBpZiB0aGUgY29tcG9uZW50IHJlcXVpcmVzIGV4cGxpY2l0IGluaXRpYWxpemF0aW9uIChjYWxsaW5nIGBQcm92aWRlci5pbml0aWFsaXplKClgKVxyXG4gICAgICAgIGlmICghdGhpcy5zaG91bGRBdXRvSW5pdGlhbGl6ZSgpKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYgdGhlIHNlcnZpY2UgaXMgZWFnZXIsIGluaXRpYWxpemUgdGhlIGRlZmF1bHQgaW5zdGFuY2VcclxuICAgICAgICBpZiAoaXNDb21wb25lbnRFYWdlcihjb21wb25lbnQpKSB7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoeyBpbnN0YW5jZUlkZW50aWZpZXI6IERFRkFVTFRfRU5UUllfTkFNRSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gd2hlbiB0aGUgaW5zdGFuY2UgZmFjdG9yeSBmb3IgYW4gZWFnZXIgQ29tcG9uZW50IHRocm93cyBhbiBleGNlcHRpb24gZHVyaW5nIHRoZSBlYWdlclxyXG4gICAgICAgICAgICAgICAgLy8gaW5pdGlhbGl6YXRpb24sIGl0IHNob3VsZCBub3QgY2F1c2UgYSBmYXRhbCBlcnJvci5cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IEludmVzdGlnYXRlIGlmIHdlIG5lZWQgdG8gbWFrZSBpdCBjb25maWd1cmFibGUsIGJlY2F1c2Ugc29tZSBjb21wb25lbnQgbWF5IHdhbnQgdG8gY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IgaW4gdGhpcyBjYXNlP1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIENyZWF0ZSBzZXJ2aWNlIGluc3RhbmNlcyBmb3IgdGhlIHBlbmRpbmcgcHJvbWlzZXMgYW5kIHJlc29sdmUgdGhlbVxyXG4gICAgICAgIC8vIE5PVEU6IGlmIHRoaXMubXVsdGlwbGVJbnN0YW5jZXMgaXMgZmFsc2UsIG9ubHkgdGhlIGRlZmF1bHQgaW5zdGFuY2Ugd2lsbCBiZSBjcmVhdGVkXHJcbiAgICAgICAgLy8gYW5kIGFsbCBwcm9taXNlcyB3aXRoIHJlc29sdmUgd2l0aCBpdCByZWdhcmRsZXNzIG9mIHRoZSBpZGVudGlmaWVyLlxyXG4gICAgICAgIGZvciAoY29uc3QgW2luc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2VEZWZlcnJlZF0gb2YgdGhpcy5pbnN0YW5jZXNEZWZlcnJlZC5lbnRyaWVzKCkpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gYGdldE9ySW5pdGlhbGl6ZVNlcnZpY2UoKWAgc2hvdWxkIGFsd2F5cyByZXR1cm4gYSB2YWxpZCBpbnN0YW5jZSBzaW5jZSBhIGNvbXBvbmVudCBpcyBndWFyYW50ZWVkLiB1c2UgISB0byBtYWtlIHR5cGVzY3JpcHQgaGFwcHkuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpbnN0YW5jZSA9IHRoaXMuZ2V0T3JJbml0aWFsaXplU2VydmljZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgaW5zdGFuY2VJZGVudGlmaWVyOiBub3JtYWxpemVkSWRlbnRpZmllclxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyB3aGVuIHRoZSBpbnN0YW5jZSBmYWN0b3J5IHRocm93cyBhbiBleGNlcHRpb24sIGl0IHNob3VsZCBub3QgY2F1c2VcclxuICAgICAgICAgICAgICAgIC8vIGEgZmF0YWwgZXJyb3IuIFdlIGp1c3QgbGVhdmUgdGhlIHByb21pc2UgdW5yZXNvbHZlZC5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNsZWFySW5zdGFuY2UoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzRGVmZXJyZWQuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgICAgIHRoaXMuaW5zdGFuY2VzT3B0aW9ucy5kZWxldGUoaWRlbnRpZmllcik7XHJcbiAgICAgICAgdGhpcy5pbnN0YW5jZXMuZGVsZXRlKGlkZW50aWZpZXIpO1xyXG4gICAgfVxyXG4gICAgLy8gYXBwLmRlbGV0ZSgpIHdpbGwgY2FsbCB0aGlzIG1ldGhvZCBvbiBldmVyeSBwcm92aWRlciB0byBkZWxldGUgdGhlIHNlcnZpY2VzXHJcbiAgICAvLyBUT0RPOiBzaG91bGQgd2UgbWFyayB0aGUgcHJvdmlkZXIgYXMgZGVsZXRlZD9cclxuICAgIGFzeW5jIGRlbGV0ZSgpIHtcclxuICAgICAgICBjb25zdCBzZXJ2aWNlcyA9IEFycmF5LmZyb20odGhpcy5pbnN0YW5jZXMudmFsdWVzKCkpO1xyXG4gICAgICAgIGF3YWl0IFByb21pc2UuYWxsKFtcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnSU5URVJOQUwnIGluIHNlcnZpY2UpIC8vIGxlZ2FjeSBzZXJ2aWNlc1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIC5tYXAoc2VydmljZSA9PiBzZXJ2aWNlLklOVEVSTkFMLmRlbGV0ZSgpKSxcclxuICAgICAgICAgICAgLi4uc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoc2VydmljZSA9PiAnX2RlbGV0ZScgaW4gc2VydmljZSkgLy8gbW9kdWxhcml6ZWQgc2VydmljZXNcclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICAubWFwKHNlcnZpY2UgPT4gc2VydmljZS5fZGVsZXRlKCkpXHJcbiAgICAgICAgXSk7XHJcbiAgICB9XHJcbiAgICBpc0NvbXBvbmVudFNldCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5jb21wb25lbnQgIT0gbnVsbDtcclxuICAgIH1cclxuICAgIGlzSW5pdGlhbGl6ZWQoaWRlbnRpZmllciA9IERFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmluc3RhbmNlcy5oYXMoaWRlbnRpZmllcik7XHJcbiAgICB9XHJcbiAgICBnZXRPcHRpb25zKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5pbnN0YW5jZXNPcHRpb25zLmdldChpZGVudGlmaWVyKSB8fCB7fTtcclxuICAgIH1cclxuICAgIGluaXRpYWxpemUob3B0cyA9IHt9KSB7XHJcbiAgICAgICAgY29uc3QgeyBvcHRpb25zID0ge30gfSA9IG9wdHM7XHJcbiAgICAgICAgY29uc3Qgbm9ybWFsaXplZElkZW50aWZpZXIgPSB0aGlzLm5vcm1hbGl6ZUluc3RhbmNlSWRlbnRpZmllcihvcHRzLmluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKHRoaXMuaXNJbml0aWFsaXplZChub3JtYWxpemVkSWRlbnRpZmllcikpIHtcclxuICAgICAgICAgICAgdGhyb3cgRXJyb3IoYCR7dGhpcy5uYW1lfSgke25vcm1hbGl6ZWRJZGVudGlmaWVyfSkgaGFzIGFscmVhZHkgYmVlbiBpbml0aWFsaXplZGApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXRoaXMuaXNDb21wb25lbnRTZXQoKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBFcnJvcihgQ29tcG9uZW50ICR7dGhpcy5uYW1lfSBoYXMgbm90IGJlZW4gcmVnaXN0ZXJlZCB5ZXRgKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29uc3QgaW5zdGFuY2UgPSB0aGlzLmdldE9ySW5pdGlhbGl6ZVNlcnZpY2Uoe1xyXG4gICAgICAgICAgICBpbnN0YW5jZUlkZW50aWZpZXI6IG5vcm1hbGl6ZWRJZGVudGlmaWVyLFxyXG4gICAgICAgICAgICBvcHRpb25zXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmVzb2x2ZSBhbnkgcGVuZGluZyBwcm9taXNlIHdhaXRpbmcgZm9yIHRoZSBzZXJ2aWNlIGluc3RhbmNlXHJcbiAgICAgICAgZm9yIChjb25zdCBbaW5zdGFuY2VJZGVudGlmaWVyLCBpbnN0YW5jZURlZmVycmVkXSBvZiB0aGlzLmluc3RhbmNlc0RlZmVycmVkLmVudHJpZXMoKSkge1xyXG4gICAgICAgICAgICBjb25zdCBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgICAgICAgICAgaWYgKG5vcm1hbGl6ZWRJZGVudGlmaWVyID09PSBub3JtYWxpemVkRGVmZXJyZWRJZGVudGlmaWVyKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZURlZmVycmVkLnJlc29sdmUoaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjYWxsYmFjayAtIGEgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGludm9rZWQgIGFmdGVyIHRoZSBwcm92aWRlciBoYXMgYmVlbiBpbml0aWFsaXplZCBieSBjYWxsaW5nIHByb3ZpZGVyLmluaXRpYWxpemUoKS5cclxuICAgICAqIFRoZSBmdW5jdGlvbiBpcyBpbnZva2VkIFNZTkNIUk9OT1VTTFksIHNvIGl0IHNob3VsZCBub3QgZXhlY3V0ZSBhbnkgbG9uZ3J1bm5pbmcgdGFza3MgaW4gb3JkZXIgdG8gbm90IGJsb2NrIHRoZSBwcm9ncmFtLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBpZGVudGlmaWVyIEFuIG9wdGlvbmFsIGluc3RhbmNlIGlkZW50aWZpZXJcclxuICAgICAqIEByZXR1cm5zIGEgZnVuY3Rpb24gdG8gdW5yZWdpc3RlciB0aGUgY2FsbGJhY2tcclxuICAgICAqL1xyXG4gICAgb25Jbml0KGNhbGxiYWNrLCBpZGVudGlmaWVyKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGNvbnN0IG5vcm1hbGl6ZWRJZGVudGlmaWVyID0gdGhpcy5ub3JtYWxpemVJbnN0YW5jZUlkZW50aWZpZXIoaWRlbnRpZmllcik7XHJcbiAgICAgICAgY29uc3QgZXhpc3RpbmdDYWxsYmFja3MgPSAoX2EgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQobm9ybWFsaXplZElkZW50aWZpZXIpKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiBuZXcgU2V0KCk7XHJcbiAgICAgICAgZXhpc3RpbmdDYWxsYmFja3MuYWRkKGNhbGxiYWNrKTtcclxuICAgICAgICB0aGlzLm9uSW5pdENhbGxiYWNrcy5zZXQobm9ybWFsaXplZElkZW50aWZpZXIsIGV4aXN0aW5nQ2FsbGJhY2tzKTtcclxuICAgICAgICBjb25zdCBleGlzdGluZ0luc3RhbmNlID0gdGhpcy5pbnN0YW5jZXMuZ2V0KG5vcm1hbGl6ZWRJZGVudGlmaWVyKTtcclxuICAgICAgICBpZiAoZXhpc3RpbmdJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICBjYWxsYmFjayhleGlzdGluZ0luc3RhbmNlLCBub3JtYWxpemVkSWRlbnRpZmllcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgICAgIGV4aXN0aW5nQ2FsbGJhY2tzLmRlbGV0ZShjYWxsYmFjayk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogSW52b2tlIG9uSW5pdCBjYWxsYmFja3Mgc3luY2hyb25vdXNseVxyXG4gICAgICogQHBhcmFtIGluc3RhbmNlIHRoZSBzZXJ2aWNlIGluc3RhbmNlYFxyXG4gICAgICovXHJcbiAgICBpbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGlkZW50aWZpZXIpIHtcclxuICAgICAgICBjb25zdCBjYWxsYmFja3MgPSB0aGlzLm9uSW5pdENhbGxiYWNrcy5nZXQoaWRlbnRpZmllcik7XHJcbiAgICAgICAgaWYgKCFjYWxsYmFja3MpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBmb3IgKGNvbnN0IGNhbGxiYWNrIG9mIGNhbGxiYWNrcykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2soaW5zdGFuY2UsIGlkZW50aWZpZXIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhdGNoIChfYSkge1xyXG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25Jbml0IGNhbGxiYWNrXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBnZXRPckluaXRpYWxpemVTZXJ2aWNlKHsgaW5zdGFuY2VJZGVudGlmaWVyLCBvcHRpb25zID0ge30gfSkge1xyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHRoaXMuaW5zdGFuY2VzLmdldChpbnN0YW5jZUlkZW50aWZpZXIpO1xyXG4gICAgICAgIGlmICghaW5zdGFuY2UgJiYgdGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSB0aGlzLmNvbXBvbmVudC5pbnN0YW5jZUZhY3RvcnkodGhpcy5jb250YWluZXIsIHtcclxuICAgICAgICAgICAgICAgIGluc3RhbmNlSWRlbnRpZmllcjogbm9ybWFsaXplSWRlbnRpZmllckZvckZhY3RvcnkoaW5zdGFuY2VJZGVudGlmaWVyKSxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnNcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTtcclxuICAgICAgICAgICAgdGhpcy5pbnN0YW5jZXNPcHRpb25zLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogSW52b2tlIG9uSW5pdCBsaXN0ZW5lcnMuXHJcbiAgICAgICAgICAgICAqIE5vdGUgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQgaXMgZGlmZmVyZW50LCB3aGljaCBpcyB1c2VkIGJ5IHRoZSBjb21wb25lbnQgY3JlYXRvcixcclxuICAgICAgICAgICAgICogd2hpbGUgb25Jbml0IGxpc3RlbmVycyBhcmUgcmVnaXN0ZXJlZCBieSBjb25zdW1lcnMgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgdGhpcy5pbnZva2VPbkluaXRDYWxsYmFja3MoaW5zdGFuY2UsIGluc3RhbmNlSWRlbnRpZmllcik7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBPcmRlciBpcyBpbXBvcnRhbnRcclxuICAgICAgICAgICAgICogb25JbnN0YW5jZUNyZWF0ZWQoKSBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIHRoaXMuaW5zdGFuY2VzLnNldChpbnN0YW5jZUlkZW50aWZpZXIsIGluc3RhbmNlKTsgd2hpY2hcclxuICAgICAgICAgICAgICogbWFrZXMgYGlzSW5pdGlhbGl6ZWQoKWAgcmV0dXJuIHRydWUuXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb21wb25lbnQub25JbnN0YW5jZUNyZWF0ZWQodGhpcy5jb250YWluZXIsIGluc3RhbmNlSWRlbnRpZmllciwgaW5zdGFuY2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKF9hKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWdub3JlIGVycm9ycyBpbiB0aGUgb25JbnN0YW5jZUNyZWF0ZWRDYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgbm9ybWFsaXplSW5zdGFuY2VJZGVudGlmaWVyKGlkZW50aWZpZXIgPSBERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICBpZiAodGhpcy5jb21wb25lbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gaWRlbnRpZmllciA6IERFRkFVTFRfRU5UUllfTkFNRTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBpZGVudGlmaWVyOyAvLyBhc3N1bWUgbXVsdGlwbGUgaW5zdGFuY2VzIGFyZSBzdXBwb3J0ZWQgYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgcHJvdmlkZWQuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc2hvdWxkQXV0b0luaXRpYWxpemUoKSB7XHJcbiAgICAgICAgcmV0dXJuICghIXRoaXMuY29tcG9uZW50ICYmXHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlICE9PSBcIkVYUExJQ0lUXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRVhQTElDSVQgKi8pO1xyXG4gICAgfVxyXG59XHJcbi8vIHVuZGVmaW5lZCBzaG91bGQgYmUgcGFzc2VkIHRvIHRoZSBzZXJ2aWNlIGZhY3RvcnkgZm9yIHRoZSBkZWZhdWx0IGluc3RhbmNlXHJcbmZ1bmN0aW9uIG5vcm1hbGl6ZUlkZW50aWZpZXJGb3JGYWN0b3J5KGlkZW50aWZpZXIpIHtcclxuICAgIHJldHVybiBpZGVudGlmaWVyID09PSBERUZBVUxUX0VOVFJZX05BTUUgPyB1bmRlZmluZWQgOiBpZGVudGlmaWVyO1xyXG59XHJcbmZ1bmN0aW9uIGlzQ29tcG9uZW50RWFnZXIoY29tcG9uZW50KSB7XHJcbiAgICByZXR1cm4gY29tcG9uZW50Lmluc3RhbnRpYXRpb25Nb2RlID09PSBcIkVBR0VSXCIgLyogSW5zdGFudGlhdGlvbk1vZGUuRUFHRVIgKi87XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIENvbXBvbmVudENvbnRhaW5lciB0aGF0IHByb3ZpZGVzIFByb3ZpZGVycyBmb3Igc2VydmljZSBuYW1lIFQsIGUuZy4gYGF1dGhgLCBgYXV0aC1pbnRlcm5hbGBcclxuICovXHJcbmNsYXNzIENvbXBvbmVudENvbnRhaW5lciB7XHJcbiAgICBjb25zdHJ1Y3RvcihuYW1lKSB7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnByb3ZpZGVycyA9IG5ldyBNYXAoKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBjb21wb25lbnQgQ29tcG9uZW50IGJlaW5nIGFkZGVkXHJcbiAgICAgKiBAcGFyYW0gb3ZlcndyaXRlIFdoZW4gYSBjb21wb25lbnQgd2l0aCB0aGUgc2FtZSBuYW1lIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCxcclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyB0cnVlOiBvdmVyd3JpdGUgdGhlIGV4aXN0aW5nIGNvbXBvbmVudCB3aXRoIHRoZSBuZXcgY29tcG9uZW50IGFuZCBjcmVhdGUgYSBuZXdcclxuICAgICAqIHByb3ZpZGVyIHdpdGggdGhlIG5ldyBjb21wb25lbnQuIEl0IGNhbiBiZSB1c2VmdWwgaW4gdGVzdHMgd2hlcmUgeW91IHdhbnQgdG8gdXNlIGRpZmZlcmVudCBtb2Nrc1xyXG4gICAgICogZm9yIGRpZmZlcmVudCB0ZXN0cy5cclxuICAgICAqIGlmIG92ZXJ3cml0ZSBpcyBmYWxzZTogdGhyb3cgYW4gZXhjZXB0aW9uXHJcbiAgICAgKi9cclxuICAgIGFkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuZ2V0UHJvdmlkZXIoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0NvbXBvbmVudFNldCgpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ29tcG9uZW50ICR7Y29tcG9uZW50Lm5hbWV9IGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZCB3aXRoICR7dGhpcy5uYW1lfWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwcm92aWRlci5zZXRDb21wb25lbnQoY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIGFkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gdGhpcy5nZXRQcm92aWRlcihjb21wb25lbnQubmFtZSk7XHJcbiAgICAgICAgaWYgKHByb3ZpZGVyLmlzQ29tcG9uZW50U2V0KCkpIHtcclxuICAgICAgICAgICAgLy8gZGVsZXRlIHRoZSBleGlzdGluZyBwcm92aWRlciBmcm9tIHRoZSBjb250YWluZXIsIHNvIHdlIGNhbiByZWdpc3RlciB0aGUgbmV3IGNvbXBvbmVudFxyXG4gICAgICAgICAgICB0aGlzLnByb3ZpZGVycy5kZWxldGUoY29tcG9uZW50Lm5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmFkZENvbXBvbmVudChjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgLyoqXHJcbiAgICAgKiBnZXRQcm92aWRlciBwcm92aWRlcyBhIHR5cGUgc2FmZSBpbnRlcmZhY2Ugd2hlcmUgaXQgY2FuIG9ubHkgYmUgY2FsbGVkIHdpdGggYSBmaWVsZCBuYW1lXHJcbiAgICAgKiBwcmVzZW50IGluIE5hbWVTZXJ2aWNlTWFwcGluZyBpbnRlcmZhY2UuXHJcbiAgICAgKlxyXG4gICAgICogRmlyZWJhc2UgU0RLcyBwcm92aWRpbmcgc2VydmljZXMgc2hvdWxkIGV4dGVuZCBOYW1lU2VydmljZU1hcHBpbmcgaW50ZXJmYWNlIHRvIHJlZ2lzdGVyXHJcbiAgICAgKiB0aGVtc2VsdmVzLlxyXG4gICAgICovXHJcbiAgICBnZXRQcm92aWRlcihuYW1lKSB7XHJcbiAgICAgICAgaWYgKHRoaXMucHJvdmlkZXJzLmhhcyhuYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnMuZ2V0KG5hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBjcmVhdGUgYSBQcm92aWRlciBmb3IgYSBzZXJ2aWNlIHRoYXQgaGFzbid0IHJlZ2lzdGVyZWQgd2l0aCBGaXJlYmFzZVxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gbmV3IFByb3ZpZGVyKG5hbWUsIHRoaXMpO1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJzLnNldChuYW1lLCBwcm92aWRlcik7XHJcbiAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgfVxyXG4gICAgZ2V0UHJvdmlkZXJzKCkge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMucHJvdmlkZXJzLnZhbHVlcygpKTtcclxuICAgIH1cclxufVxuXG5leHBvcnQgeyBDb21wb25lbnQsIENvbXBvbmVudENvbnRhaW5lciwgUHJvdmlkZXIgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iLCJpbXBvcnQgeyBFcnJvckZhY3RvcnksIGNvbnRhaW5zLCBkZWVwRXh0ZW5kLCBjcmVhdGVTdWJzY3JpYmUsIGlzQnJvd3NlciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0ICogYXMgbW9kdWxhckFQSXMgZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBfYWRkQ29tcG9uZW50LCBkZWxldGVBcHAsIF9ERUZBVUxUX0VOVFJZX05BTUUsIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCwgcmVnaXN0ZXJWZXJzaW9uIH0gZnJvbSAnQGZpcmViYXNlL2FwcCc7XG5pbXBvcnQgeyBMb2dnZXIgfSBmcm9tICdAZmlyZWJhc2UvbG9nZ2VyJztcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEdsb2JhbCBjb250ZXh0IG9iamVjdCBmb3IgYSBjb2xsZWN0aW9uIG9mIHNlcnZpY2VzIHVzaW5nXHJcbiAqIGEgc2hhcmVkIGF1dGhlbnRpY2F0aW9uIHN0YXRlLlxyXG4gKlxyXG4gKiBtYXJrZWQgYXMgaW50ZXJuYWwgYmVjYXVzZSBpdCByZWZlcmVuY2VzIGludGVybmFsIHR5cGVzIGV4cG9ydGVkIGZyb20gQGZpcmViYXNlL2FwcFxyXG4gKiBAaW50ZXJuYWxcclxuICovXHJcbmNsYXNzIEZpcmViYXNlQXBwSW1wbCB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUsIGZpcmViYXNlKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5maXJlYmFzZSA9IGZpcmViYXNlO1xyXG4gICAgICAgIC8vIGFkZCBpdHNlbGYgdG8gY29udGFpbmVyXHJcbiAgICAgICAgX2FkZENvbXBvbmVudChfZGVsZWdhdGUsIG5ldyBDb21wb25lbnQoJ2FwcC1jb21wYXQnLCAoKSA9PiB0aGlzLCBcIlBVQkxJQ1wiIC8qIENvbXBvbmVudFR5cGUuUFVCTElDICovKSk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBfZGVsZWdhdGUuY29udGFpbmVyO1xyXG4gICAgfVxyXG4gICAgZ2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuYXV0b21hdGljRGF0YUNvbGxlY3Rpb25FbmFibGVkO1xyXG4gICAgfVxyXG4gICAgc2V0IGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZCh2YWwpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQgPSB2YWw7XHJcbiAgICB9XHJcbiAgICBnZXQgbmFtZSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUubmFtZTtcclxuICAgIH1cclxuICAgIGdldCBvcHRpb25zKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5vcHRpb25zO1xyXG4gICAgfVxyXG4gICAgZGVsZXRlKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmZpcmViYXNlLklOVEVSTkFMLnJlbW92ZUFwcCh0aGlzLm5hbWUpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVsZXRlQXBwKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJuIGEgc2VydmljZSBpbnN0YW5jZSBhc3NvY2lhdGVkIHdpdGggdGhpcyBhcHAgKGNyZWF0aW5nIGl0XHJcbiAgICAgKiBvbiBkZW1hbmQpLCBpZGVudGlmaWVkIGJ5IHRoZSBwYXNzZWQgaW5zdGFuY2VJZGVudGlmaWVyLlxyXG4gICAgICpcclxuICAgICAqIE5PVEU6IEN1cnJlbnRseSBzdG9yYWdlIGFuZCBmdW5jdGlvbnMgYXJlIHRoZSBvbmx5IG9uZXMgdGhhdCBhcmUgbGV2ZXJhZ2luZyB0aGlzXHJcbiAgICAgKiBmdW5jdGlvbmFsaXR5LiBUaGV5IGludm9rZSBpdCBieSBjYWxsaW5nOlxyXG4gICAgICpcclxuICAgICAqIGBgYGphdmFzY3JpcHRcclxuICAgICAqIGZpcmViYXNlLmFwcCgpLnN0b3JhZ2UoJ1NUT1JBR0UgQlVDS0VUIElEJylcclxuICAgICAqIGBgYFxyXG4gICAgICpcclxuICAgICAqIFRoZSBzZXJ2aWNlIG5hbWUgaXMgcGFzc2VkIHRvIHRoaXMgYWxyZWFkeVxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9nZXRTZXJ2aWNlKG5hbWUsIGluc3RhbmNlSWRlbnRpZmllciA9IF9ERUZBVUxUX0VOVFJZX05BTUUpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuY2hlY2tEZXN0cm95ZWQoKTtcclxuICAgICAgICAvLyBJbml0aWFsaXplIGluc3RhbmNlIGlmIEluc3RhdGlhdGlvbk1vZGUgaXMgYEVYUExJQ0lUYC5cclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuX2RlbGVnYXRlLmNvbnRhaW5lci5nZXRQcm92aWRlcihuYW1lKTtcclxuICAgICAgICBpZiAoIXByb3ZpZGVyLmlzSW5pdGlhbGl6ZWQoKSAmJlxyXG4gICAgICAgICAgICAoKF9hID0gcHJvdmlkZXIuZ2V0Q29tcG9uZW50KCkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5pbnN0YW50aWF0aW9uTW9kZSkgPT09IFwiRVhQTElDSVRcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5FWFBMSUNJVCAqLykge1xyXG4gICAgICAgICAgICBwcm92aWRlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGdldEltbWVkaWF0ZSB3aWxsIGFsd2F5cyBzdWNjZWVkIGJlY2F1c2UgX2dldFNlcnZpY2UgaXMgb25seSBjYWxsZWQgZm9yIHJlZ2lzdGVyZWQgY29tcG9uZW50cy5cclxuICAgICAgICByZXR1cm4gcHJvdmlkZXIuZ2V0SW1tZWRpYXRlKHtcclxuICAgICAgICAgICAgaWRlbnRpZmllcjogaW5zdGFuY2VJZGVudGlmaWVyXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIFJlbW92ZSBhIHNlcnZpY2UgaW5zdGFuY2UgZnJvbSB0aGUgY2FjaGUsIHNvIHdlIHdpbGwgY3JlYXRlIGEgbmV3IGluc3RhbmNlIGZvciB0aGlzIHNlcnZpY2VcclxuICAgICAqIHdoZW4gcGVvcGxlIHRyeSB0byBnZXQgaXQgYWdhaW4uXHJcbiAgICAgKlxyXG4gICAgICogTk9URTogY3VycmVudGx5IG9ubHkgZmlyZXN0b3JlIHVzZXMgdGhpcyBmdW5jdGlvbmFsaXR5IHRvIHN1cHBvcnQgZmlyZXN0b3JlIHNodXRkb3duLlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBzZXJ2aWNlIG5hbWVcclxuICAgICAqIEBwYXJhbSBpbnN0YW5jZUlkZW50aWZpZXIgaW5zdGFuY2UgaWRlbnRpZmllciBpbiBjYXNlIG11bHRpcGxlIGluc3RhbmNlcyBhcmUgYWxsb3dlZFxyXG4gICAgICogQGludGVybmFsXHJcbiAgICAgKi9cclxuICAgIF9yZW1vdmVTZXJ2aWNlSW5zdGFuY2UobmFtZSwgaW5zdGFuY2VJZGVudGlmaWVyID0gX0RFRkFVTFRfRU5UUllfTkFNRSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmNvbnRhaW5lclxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICAuZ2V0UHJvdmlkZXIobmFtZSlcclxuICAgICAgICAgICAgLmNsZWFySW5zdGFuY2UoaW5zdGFuY2VJZGVudGlmaWVyKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIGNvbXBvbmVudCB0aGUgY29tcG9uZW50IGJlaW5nIGFkZGVkIHRvIHRoaXMgYXBwJ3MgY29udGFpbmVyXHJcbiAgICAgKiBAaW50ZXJuYWxcclxuICAgICAqL1xyXG4gICAgX2FkZENvbXBvbmVudChjb21wb25lbnQpIHtcclxuICAgICAgICBfYWRkQ29tcG9uZW50KHRoaXMuX2RlbGVnYXRlLCBjb21wb25lbnQpO1xyXG4gICAgfVxyXG4gICAgX2FkZE9yT3ZlcndyaXRlQ29tcG9uZW50KGNvbXBvbmVudCkge1xyXG4gICAgICAgIF9hZGRPck92ZXJ3cml0ZUNvbXBvbmVudCh0aGlzLl9kZWxlZ2F0ZSwgY29tcG9uZW50KTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBuYW1lOiB0aGlzLm5hbWUsXHJcbiAgICAgICAgICAgIGF1dG9tYXRpY0RhdGFDb2xsZWN0aW9uRW5hYmxlZDogdGhpcy5hdXRvbWF0aWNEYXRhQ29sbGVjdGlvbkVuYWJsZWQsXHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHRoaXMub3B0aW9uc1xyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuLy8gVE9ETzogaW52ZXN0aWdhdGUgd2h5IHRoZSBmb2xsb3dpbmcgbmVlZHMgdG8gYmUgY29tbWVudGVkIG91dFxyXG4vLyBQcmV2ZW50IGRlYWQtY29kZSBlbGltaW5hdGlvbiBvZiB0aGVzZSBtZXRob2RzIHcvbyBpbnZhbGlkIHByb3BlcnR5XHJcbi8vIGNvcHlpbmcuXHJcbi8vIChGaXJlYmFzZUFwcEltcGwucHJvdG90eXBlLm5hbWUgJiYgRmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZS5vcHRpb25zKSB8fFxyXG4vLyAgIEZpcmViYXNlQXBwSW1wbC5wcm90b3R5cGUuZGVsZXRlIHx8XHJcbi8vICAgY29uc29sZS5sb2coJ2RjJyk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEVSUk9SUyA9IHtcclxuICAgIFtcIm5vLWFwcFwiIC8qIEFwcEVycm9yLk5PX0FQUCAqL106IFwiTm8gRmlyZWJhc2UgQXBwICd7JGFwcE5hbWV9JyBoYXMgYmVlbiBjcmVhdGVkIC0gXCIgK1xyXG4gICAgICAgICdjYWxsIEZpcmViYXNlIEFwcC5pbml0aWFsaXplQXBwKCknLFxyXG4gICAgW1wiaW52YWxpZC1hcHAtYXJndW1lbnRcIiAvKiBBcHBFcnJvci5JTlZBTElEX0FQUF9BUkdVTUVOVCAqL106ICdmaXJlYmFzZS57JGFwcE5hbWV9KCkgdGFrZXMgZWl0aGVyIG5vIGFyZ3VtZW50IG9yIGEgJyArXHJcbiAgICAgICAgJ0ZpcmViYXNlIEFwcCBpbnN0YW5jZS4nXHJcbn07XHJcbmNvbnN0IEVSUk9SX0ZBQ1RPUlkgPSBuZXcgRXJyb3JGYWN0b3J5KCdhcHAtY29tcGF0JywgJ0ZpcmViYXNlJywgRVJST1JTKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIEJlY2F1c2UgYXV0aCBjYW4ndCBzaGFyZSBjb2RlIHdpdGggb3RoZXIgY29tcG9uZW50cywgd2UgYXR0YWNoIHRoZSB1dGlsaXR5IGZ1bmN0aW9uc1xyXG4gKiBpbiBhbiBpbnRlcm5hbCBuYW1lc3BhY2UgdG8gc2hhcmUgY29kZS5cclxuICogVGhpcyBmdW5jdGlvbiByZXR1cm4gYSBmaXJlYmFzZSBuYW1lc3BhY2Ugb2JqZWN0IHdpdGhvdXRcclxuICogYW55IHV0aWxpdHkgZnVuY3Rpb25zLCBzbyBpdCBjYW4gYmUgc2hhcmVkIGJldHdlZW4gdGhlIHJlZ3VsYXIgZmlyZWJhc2VOYW1lc3BhY2UgYW5kXHJcbiAqIHRoZSBsaXRlIHZlcnNpb24uXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVGaXJlYmFzZU5hbWVzcGFjZUNvcmUoZmlyZWJhc2VBcHBJbXBsKSB7XHJcbiAgICBjb25zdCBhcHBzID0ge307XHJcbiAgICAvLyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgLy8gY29uc3QgY29tcG9uZW50cyA9IG5ldyBNYXA8c3RyaW5nLCBDb21wb25lbnQ8YW55Pj4oKTtcclxuICAgIC8vIEEgbmFtZXNwYWNlIGlzIGEgcGxhaW4gSmF2YVNjcmlwdCBPYmplY3QuXHJcbiAgICBjb25zdCBuYW1lc3BhY2UgPSB7XHJcbiAgICAgICAgLy8gSGFjayB0byBwcmV2ZW50IEJhYmVsIGZyb20gbW9kaWZ5aW5nIHRoZSBvYmplY3QgcmV0dXJuZWRcclxuICAgICAgICAvLyBhcyB0aGUgZmlyZWJhc2UgbmFtZXNwYWNlLlxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBfX2VzTW9kdWxlOiB0cnVlLFxyXG4gICAgICAgIGluaXRpYWxpemVBcHA6IGluaXRpYWxpemVBcHBDb21wYXQsXHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIGFwcCxcclxuICAgICAgICByZWdpc3RlclZlcnNpb246IG1vZHVsYXJBUElzLnJlZ2lzdGVyVmVyc2lvbixcclxuICAgICAgICBzZXRMb2dMZXZlbDogbW9kdWxhckFQSXMuc2V0TG9nTGV2ZWwsXHJcbiAgICAgICAgb25Mb2c6IG1vZHVsYXJBUElzLm9uTG9nLFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHBzOiBudWxsLFxyXG4gICAgICAgIFNES19WRVJTSU9OOiBtb2R1bGFyQVBJcy5TREtfVkVSU0lPTixcclxuICAgICAgICBJTlRFUk5BTDoge1xyXG4gICAgICAgICAgICByZWdpc3RlckNvbXBvbmVudDogcmVnaXN0ZXJDb21wb25lbnRDb21wYXQsXHJcbiAgICAgICAgICAgIHJlbW92ZUFwcCxcclxuICAgICAgICAgICAgdXNlQXNTZXJ2aWNlLFxyXG4gICAgICAgICAgICBtb2R1bGFyQVBJc1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBJbmplY3QgYSBjaXJjdWxhciBkZWZhdWx0IGV4cG9ydCB0byBhbGxvdyBCYWJlbCB1c2VycyB3aG8gd2VyZSBwcmV2aW91c2x5XHJcbiAgICAvLyB1c2luZzpcclxuICAgIC8vXHJcbiAgICAvLyAgIGltcG9ydCBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XHJcbiAgICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJykuZGVmYXVsdDtcclxuICAgIC8vXHJcbiAgICAvLyBpbnN0ZWFkIG9mXHJcbiAgICAvL1xyXG4gICAgLy8gICBpbXBvcnQgKiBhcyBmaXJlYmFzZSBmcm9tICdmaXJlYmFzZSc7XHJcbiAgICAvLyAgIHdoaWNoIGJlY29tZXM6IHZhciBmaXJlYmFzZSA9IHJlcXVpcmUoJ2ZpcmViYXNlJyk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgbmFtZXNwYWNlWydkZWZhdWx0J10gPSBuYW1lc3BhY2U7XHJcbiAgICAvLyBmaXJlYmFzZS5hcHBzIGlzIGEgcmVhZC1vbmx5IGdldHRlci5cclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuYW1lc3BhY2UsICdhcHBzJywge1xyXG4gICAgICAgIGdldDogZ2V0QXBwc1xyXG4gICAgfSk7XHJcbiAgICAvKipcclxuICAgICAqIENhbGxlZCBieSBBcHAuZGVsZXRlKCkgLSBidXQgYmVmb3JlIGFueSBzZXJ2aWNlcyBhc3NvY2lhdGVkIHdpdGggdGhlIEFwcFxyXG4gICAgICogYXJlIGRlbGV0ZWQuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIHJlbW92ZUFwcChuYW1lKSB7XHJcbiAgICAgICAgZGVsZXRlIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgQXBwIG9iamVjdCBmb3IgYSBnaXZlbiBuYW1lIChvciBERUZBVUxUKS5cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gYXBwKG5hbWUpIHtcclxuICAgICAgICBuYW1lID0gbmFtZSB8fCBtb2R1bGFyQVBJcy5fREVGQVVMVF9FTlRSWV9OQU1FO1xyXG4gICAgICAgIGlmICghY29udGFpbnMoYXBwcywgbmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJuby1hcHBcIiAvKiBBcHBFcnJvci5OT19BUFAgKi8sIHsgYXBwTmFtZTogbmFtZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFwcHNbbmFtZV07XHJcbiAgICB9XHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBhcHBbJ0FwcCddID0gZmlyZWJhc2VBcHBJbXBsO1xyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBuZXcgQXBwIGluc3RhbmNlIChuYW1lIG11c3QgYmUgdW5pcXVlKS5cclxuICAgICAqXHJcbiAgICAgKiBUaGlzIGZ1bmN0aW9uIGlzIGlkZW1wb3RlbnQuIEl0IGNhbiBiZSBjYWxsZWQgbW9yZSB0aGFuIG9uY2UgYW5kIHJldHVybiB0aGUgc2FtZSBpbnN0YW5jZSB1c2luZyB0aGUgc2FtZSBvcHRpb25zIGFuZCBjb25maWcuXHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGluaXRpYWxpemVBcHBDb21wYXQob3B0aW9ucywgcmF3Q29uZmlnID0ge30pIHtcclxuICAgICAgICBjb25zdCBhcHAgPSBtb2R1bGFyQVBJcy5pbml0aWFsaXplQXBwKG9wdGlvbnMsIHJhd0NvbmZpZyk7XHJcbiAgICAgICAgaWYgKGNvbnRhaW5zKGFwcHMsIGFwcC5uYW1lKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gYXBwc1thcHAubmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGFwcENvbXBhdCA9IG5ldyBmaXJlYmFzZUFwcEltcGwoYXBwLCBuYW1lc3BhY2UpO1xyXG4gICAgICAgIGFwcHNbYXBwLm5hbWVdID0gYXBwQ29tcGF0O1xyXG4gICAgICAgIHJldHVybiBhcHBDb21wYXQ7XHJcbiAgICB9XHJcbiAgICAvKlxyXG4gICAgICogUmV0dXJuIGFuIGFycmF5IG9mIGFsbCB0aGUgbm9uLWRlbGV0ZWQgRmlyZWJhc2VBcHBzLlxyXG4gICAgICovXHJcbiAgICBmdW5jdGlvbiBnZXRBcHBzKCkge1xyXG4gICAgICAgIC8vIE1ha2UgYSBjb3B5IHNvIGNhbGxlciBjYW5ub3QgbXV0YXRlIHRoZSBhcHBzIGxpc3QuXHJcbiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKGFwcHMpLm1hcChuYW1lID0+IGFwcHNbbmFtZV0pO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRDb21wYXQoY29tcG9uZW50KSB7XHJcbiAgICAgICAgY29uc3QgY29tcG9uZW50TmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgICAgIGNvbnN0IGNvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0ID0gY29tcG9uZW50TmFtZS5yZXBsYWNlKCctY29tcGF0JywgJycpO1xyXG4gICAgICAgIGlmIChtb2R1bGFyQVBJcy5fcmVnaXN0ZXJDb21wb25lbnQoY29tcG9uZW50KSAmJlxyXG4gICAgICAgICAgICBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBDb21wb25lbnRUeXBlLlBVQkxJQyAqLykge1xyXG4gICAgICAgICAgICAvLyBjcmVhdGUgc2VydmljZSBuYW1lc3BhY2UgZm9yIHB1YmxpYyBjb21wb25lbnRzXHJcbiAgICAgICAgICAgIC8vIFRoZSBTZXJ2aWNlIG5hbWVzcGFjZSBpcyBhbiBhY2Nlc3NvciBmdW5jdGlvbiAuLi5cclxuICAgICAgICAgICAgY29uc3Qgc2VydmljZU5hbWVzcGFjZSA9IChhcHBBcmcgPSBhcHAoKSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgYXBwQXJnW2NvbXBvbmVudE5hbWVXaXRob3V0Q29tcGF0XSAhPT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEludmFsaWQgYXJndW1lbnQuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBoYXBwZW5zIGluIHRoZSBmb2xsb3dpbmcgY2FzZTogZmlyZWJhc2Uuc3RvcmFnZSgnZ3M6LycpXHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgRVJST1JfRkFDVE9SWS5jcmVhdGUoXCJpbnZhbGlkLWFwcC1hcmd1bWVudFwiIC8qIEFwcEVycm9yLklOVkFMSURfQVBQX0FSR1VNRU5UICovLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFwcE5hbWU6IGNvbXBvbmVudE5hbWVcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEZvcndhcmQgc2VydmljZSBpbnN0YW5jZSBsb29rdXAgdG8gdGhlIEZpcmViYXNlQXBwLlxyXG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgICAgIHJldHVybiBhcHBBcmdbY29tcG9uZW50TmFtZVdpdGhvdXRDb21wYXRdKCk7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIC4uLiBhbmQgYSBjb250YWluZXIgZm9yIHNlcnZpY2UtbGV2ZWwgcHJvcGVydGllcy5cclxuICAgICAgICAgICAgaWYgKGNvbXBvbmVudC5zZXJ2aWNlUHJvcHMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgZGVlcEV4dGVuZChzZXJ2aWNlTmFtZXNwYWNlLCBjb21wb25lbnQuc2VydmljZVByb3BzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxyXG4gICAgICAgICAgICBuYW1lc3BhY2VbY29tcG9uZW50TmFtZVdpdGhvdXRDb21wYXRdID0gc2VydmljZU5hbWVzcGFjZTtcclxuICAgICAgICAgICAgLy8gUGF0Y2ggdGhlIEZpcmViYXNlQXBwSW1wbCBwcm90b3R5cGVcclxuICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICAgICAgZmlyZWJhc2VBcHBJbXBsLnByb3RvdHlwZVtjb21wb25lbnROYW1lV2l0aG91dENvbXBhdF0gPVxyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogVGhlIGVzbGludCBkaXNhYmxlIGNhbiBiZSByZW1vdmVkIGFuZCB0aGUgJ2lnbm9yZVJlc3RBcmdzJ1xyXG4gICAgICAgICAgICAgICAgLy8gb3B0aW9uIGFkZGVkIHRvIHRoZSBuby1leHBsaWNpdC1hbnkgcnVsZSB3aGVuIEVTbGludCByZWxlYXNlcyBpdC5cclxuICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAoLi4uYXJncykge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlcnZpY2VGeG4gPSB0aGlzLl9nZXRTZXJ2aWNlLmJpbmQodGhpcywgY29tcG9uZW50TmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlcnZpY2VGeG4uYXBwbHkodGhpcywgY29tcG9uZW50Lm11bHRpcGxlSW5zdGFuY2VzID8gYXJncyA6IFtdKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb21wb25lbnQudHlwZSA9PT0gXCJQVUJMSUNcIiAvKiBDb21wb25lbnRUeXBlLlBVQkxJQyAqL1xyXG4gICAgICAgICAgICA/IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgICAgICAgICBuYW1lc3BhY2VbY29tcG9uZW50TmFtZVdpdGhvdXRDb21wYXRdXHJcbiAgICAgICAgICAgIDogbnVsbDtcclxuICAgIH1cclxuICAgIC8vIE1hcCB0aGUgcmVxdWVzdGVkIHNlcnZpY2UgdG8gYSByZWdpc3RlcmVkIHNlcnZpY2UgbmFtZVxyXG4gICAgLy8gKHVzZWQgdG8gbWFwIGF1dGggdG8gc2VydmVyQXV0aCBzZXJ2aWNlIHdoZW4gbmVlZGVkKS5cclxuICAgIGZ1bmN0aW9uIHVzZUFzU2VydmljZShhcHAsIG5hbWUpIHtcclxuICAgICAgICBpZiAobmFtZSA9PT0gJ3NlcnZlckF1dGgnKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB1c2VTZXJ2aWNlID0gbmFtZTtcclxuICAgICAgICByZXR1cm4gdXNlU2VydmljZTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYW1lc3BhY2U7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJldHVybiBhIGZpcmViYXNlIG5hbWVzcGFjZSBvYmplY3QuXHJcbiAqXHJcbiAqIEluIHByb2R1Y3Rpb24sIHRoaXMgd2lsbCBiZSBjYWxsZWQgZXhhY3RseSBvbmNlIGFuZCB0aGUgcmVzdWx0XHJcbiAqIGFzc2lnbmVkIHRvIHRoZSAnZmlyZWJhc2UnIGdsb2JhbC4gIEl0IG1heSBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXNcclxuICogaW4gdW5pdCB0ZXN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCkge1xyXG4gICAgY29uc3QgbmFtZXNwYWNlID0gY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2VDb3JlKEZpcmViYXNlQXBwSW1wbCk7XHJcbiAgICBuYW1lc3BhY2UuSU5URVJOQUwgPSBPYmplY3QuYXNzaWduKE9iamVjdC5hc3NpZ24oe30sIG5hbWVzcGFjZS5JTlRFUk5BTCksIHsgY3JlYXRlRmlyZWJhc2VOYW1lc3BhY2UsXHJcbiAgICAgICAgZXh0ZW5kTmFtZXNwYWNlLFxyXG4gICAgICAgIGNyZWF0ZVN1YnNjcmliZSxcclxuICAgICAgICBFcnJvckZhY3RvcnksXHJcbiAgICAgICAgZGVlcEV4dGVuZCB9KTtcclxuICAgIC8qKlxyXG4gICAgICogUGF0Y2ggdGhlIHRvcC1sZXZlbCBmaXJlYmFzZSBuYW1lc3BhY2Ugd2l0aCBhZGRpdGlvbmFsIHByb3BlcnRpZXMuXHJcbiAgICAgKlxyXG4gICAgICogZmlyZWJhc2UuSU5URVJOQUwuZXh0ZW5kTmFtZXNwYWNlKClcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZXh0ZW5kTmFtZXNwYWNlKHByb3BzKSB7XHJcbiAgICAgICAgZGVlcEV4dGVuZChuYW1lc3BhY2UsIHByb3BzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBuYW1lc3BhY2U7XHJcbn1cclxuY29uc3QgZmlyZWJhc2UkMSA9IGNyZWF0ZUZpcmViYXNlTmFtZXNwYWNlKCk7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAxOSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGxvZ2dlciA9IG5ldyBMb2dnZXIoJ0BmaXJlYmFzZS9hcHAtY29tcGF0Jyk7XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9hcHAtY29tcGF0XCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjIuMTNcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVnaXN0ZXJDb3JlQ29tcG9uZW50cyh2YXJpYW50KSB7XHJcbiAgICAvLyBSZWdpc3RlciBgYXBwYCBwYWNrYWdlLlxyXG4gICAgcmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sIHZhcmlhbnQpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbi8vIEZpcmViYXNlIExpdGUgZGV0ZWN0aW9uXHJcbi8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbmlmIChpc0Jyb3dzZXIoKSAmJiBzZWxmLmZpcmViYXNlICE9PSB1bmRlZmluZWQpIHtcclxuICAgIGxvZ2dlci53YXJuKGBcbiAgICBXYXJuaW5nOiBGaXJlYmFzZSBpcyBhbHJlYWR5IGRlZmluZWQgaW4gdGhlIGdsb2JhbCBzY29wZS4gUGxlYXNlIG1ha2Ugc3VyZVxuICAgIEZpcmViYXNlIGxpYnJhcnkgaXMgb25seSBsb2FkZWQgb25jZS5cbiAgYCk7XHJcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmVcclxuICAgIGNvbnN0IHNka1ZlcnNpb24gPSBzZWxmLmZpcmViYXNlLlNES19WRVJTSU9OO1xyXG4gICAgaWYgKHNka1ZlcnNpb24gJiYgc2RrVmVyc2lvbi5pbmRleE9mKCdMSVRFJykgPj0gMCkge1xyXG4gICAgICAgIGxvZ2dlci53YXJuKGBcbiAgICBXYXJuaW5nOiBZb3UgYXJlIHRyeWluZyB0byBsb2FkIEZpcmViYXNlIHdoaWxlIHVzaW5nIEZpcmViYXNlIFBlcmZvcm1hbmNlIHN0YW5kYWxvbmUgc2NyaXB0LlxuICAgIFlvdSBzaG91bGQgbG9hZCBGaXJlYmFzZSBQZXJmb3JtYW5jZSB3aXRoIHRoaXMgaW5zdGFuY2Ugb2YgRmlyZWJhc2UgdG8gYXZvaWQgbG9hZGluZyBkdXBsaWNhdGUgY29kZS5cbiAgICBgKTtcclxuICAgIH1cclxufVxyXG5jb25zdCBmaXJlYmFzZSA9IGZpcmViYXNlJDE7XHJcbnJlZ2lzdGVyQ29yZUNvbXBvbmVudHMoKTtcblxuZXhwb3J0IHsgZmlyZWJhc2UgYXMgZGVmYXVsdCB9O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguZXNtMjAxNy5qcy5tYXBcbiIsInZhciBnO1xuXG4vLyBUaGlzIHdvcmtzIGluIG5vbi1zdHJpY3QgbW9kZVxuZyA9IChmdW5jdGlvbigpIHtcblx0cmV0dXJuIHRoaXM7XG59KSgpO1xuXG50cnkge1xuXHQvLyBUaGlzIHdvcmtzIGlmIGV2YWwgaXMgYWxsb3dlZCAoc2VlIENTUClcblx0ZyA9IGcgfHwgbmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKTtcbn0gY2F0Y2ggKGUpIHtcblx0Ly8gVGhpcyB3b3JrcyBpZiB0aGUgd2luZG93IHJlZmVyZW5jZSBpcyBhdmFpbGFibGVcblx0aWYgKHR5cGVvZiB3aW5kb3cgPT09IFwib2JqZWN0XCIpIGcgPSB3aW5kb3c7XG59XG5cbi8vIGcgY2FuIHN0aWxsIGJlIHVuZGVmaW5lZCwgYnV0IG5vdGhpbmcgdG8gZG8gYWJvdXQgaXQuLi5cbi8vIFdlIHJldHVybiB1bmRlZmluZWQsIGluc3RlYWQgb2Ygbm90aGluZyBoZXJlLCBzbyBpdCdzXG4vLyBlYXNpZXIgdG8gaGFuZGxlIHRoaXMgY2FzZS4gaWYoIWdsb2JhbCkgeyAuLi59XG5cbm1vZHVsZS5leHBvcnRzID0gZztcbiIsIi8vIFVuaXF1ZSBJRCBjcmVhdGlvbiByZXF1aXJlcyBhIGhpZ2ggcXVhbGl0eSByYW5kb20gIyBnZW5lcmF0b3IuICBJbiB0aGVcbi8vIGJyb3dzZXIgdGhpcyBpcyBhIGxpdHRsZSBjb21wbGljYXRlZCBkdWUgdG8gdW5rbm93biBxdWFsaXR5IG9mIE1hdGgucmFuZG9tKClcbi8vIGFuZCBpbmNvbnNpc3RlbnQgc3VwcG9ydCBmb3IgdGhlIGBjcnlwdG9gIEFQSS4gIFdlIGRvIHRoZSBiZXN0IHdlIGNhbiB2aWFcbi8vIGZlYXR1cmUtZGV0ZWN0aW9uXG5cbi8vIGdldFJhbmRvbVZhbHVlcyBuZWVkcyB0byBiZSBpbnZva2VkIGluIGEgY29udGV4dCB3aGVyZSBcInRoaXNcIiBpcyBhIENyeXB0b1xuLy8gaW1wbGVtZW50YXRpb24uIEFsc28sIGZpbmQgdGhlIGNvbXBsZXRlIGltcGxlbWVudGF0aW9uIG9mIGNyeXB0byBvbiBJRTExLlxudmFyIGdldFJhbmRvbVZhbHVlcyA9ICh0eXBlb2YoY3J5cHRvKSAhPSAndW5kZWZpbmVkJyAmJiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzICYmIGNyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChjcnlwdG8pKSB8fFxuICAgICAgICAgICAgICAgICAgICAgICh0eXBlb2YobXNDcnlwdG8pICE9ICd1bmRlZmluZWQnICYmIHR5cGVvZiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzID09ICdmdW5jdGlvbicgJiYgbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pKTtcblxuaWYgKGdldFJhbmRvbVZhbHVlcykge1xuICAvLyBXSEFUV0cgY3J5cHRvIFJORyAtIGh0dHA6Ly93aWtpLndoYXR3Zy5vcmcvd2lraS9DcnlwdG9cbiAgdmFyIHJuZHM4ID0gbmV3IFVpbnQ4QXJyYXkoMTYpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cbiAgbW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiB3aGF0d2dSTkcoKSB7XG4gICAgZ2V0UmFuZG9tVmFsdWVzKHJuZHM4KTtcbiAgICByZXR1cm4gcm5kczg7XG4gIH07XG59IGVsc2Uge1xuICAvLyBNYXRoLnJhbmRvbSgpLWJhc2VkIChSTkcpXG4gIC8vXG4gIC8vIElmIGFsbCBlbHNlIGZhaWxzLCB1c2UgTWF0aC5yYW5kb20oKS4gIEl0J3MgZmFzdCwgYnV0IGlzIG9mIHVuc3BlY2lmaWVkXG4gIC8vIHF1YWxpdHkuXG4gIHZhciBybmRzID0gbmV3IEFycmF5KDE2KTtcblxuICBtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIG1hdGhSTkcoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIHI7IGkgPCAxNjsgaSsrKSB7XG4gICAgICBpZiAoKGkgJiAweDAzKSA9PT0gMCkgciA9IE1hdGgucmFuZG9tKCkgKiAweDEwMDAwMDAwMDtcbiAgICAgIHJuZHNbaV0gPSByID4+PiAoKGkgJiAweDAzKSA8PCAzKSAmIDB4ZmY7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJuZHM7XG4gIH07XG59XG4iLCIvKipcbiAqIENvbnZlcnQgYXJyYXkgb2YgMTYgYnl0ZSB2YWx1ZXMgdG8gVVVJRCBzdHJpbmcgZm9ybWF0IG9mIHRoZSBmb3JtOlxuICogWFhYWFhYWFgtWFhYWC1YWFhYLVhYWFgtWFhYWFhYWFhYWFhYXG4gKi9cbnZhciBieXRlVG9IZXggPSBbXTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyArK2kpIHtcbiAgYnl0ZVRvSGV4W2ldID0gKGkgKyAweDEwMCkudG9TdHJpbmcoMTYpLnN1YnN0cigxKTtcbn1cblxuZnVuY3Rpb24gYnl0ZXNUb1V1aWQoYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBvZmZzZXQgfHwgMDtcbiAgdmFyIGJ0aCA9IGJ5dGVUb0hleDtcbiAgLy8gam9pbiB1c2VkIHRvIGZpeCBtZW1vcnkgaXNzdWUgY2F1c2VkIGJ5IGNvbmNhdGVuYXRpb246IGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC92OC9pc3N1ZXMvZGV0YWlsP2lkPTMxNzUjYzRcbiAgcmV0dXJuIChbXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSwgJy0nLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV0sICctJyxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLCAnLScsXG4gICAgYnRoW2J1ZltpKytdXSwgYnRoW2J1ZltpKytdXSxcbiAgICBidGhbYnVmW2krK11dLCBidGhbYnVmW2krK11dLFxuICAgIGJ0aFtidWZbaSsrXV0sIGJ0aFtidWZbaSsrXV1cbiAgXSkuam9pbignJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYnl0ZXNUb1V1aWQ7XG4iLCIvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuZnVuY3Rpb24gZGVmYXVsdFNldFRpbW91dCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbmZ1bmN0aW9uIGRlZmF1bHRDbGVhclRpbWVvdXQgKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkJyk7XG59XG4oZnVuY3Rpb24gKCkge1xuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2Ygc2V0VGltZW91dCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IHNldFRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICAgICAgfVxuICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgY2FjaGVkU2V0VGltZW91dCA9IGRlZmF1bHRTZXRUaW1vdXQ7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGlmICh0eXBlb2YgY2xlYXJUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBkZWZhdWx0Q2xlYXJUaW1lb3V0O1xuICAgIH1cbn0gKCkpXG5mdW5jdGlvbiBydW5UaW1lb3V0KGZ1bikge1xuICAgIGlmIChjYWNoZWRTZXRUaW1lb3V0ID09PSBzZXRUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICAvLyBpZiBzZXRUaW1lb3V0IHdhc24ndCBhdmFpbGFibGUgYnV0IHdhcyBsYXR0ZXIgZGVmaW5lZFxuICAgIGlmICgoY2FjaGVkU2V0VGltZW91dCA9PT0gZGVmYXVsdFNldFRpbW91dCB8fCAhY2FjaGVkU2V0VGltZW91dCkgJiYgc2V0VGltZW91dCkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgcmV0dXJuIHNldFRpbWVvdXQoZnVuLCAwKTtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgLy8gd2hlbiB3aGVuIHNvbWVib2R5IGhhcyBzY3Jld2VkIHdpdGggc2V0VGltZW91dCBidXQgbm8gSS5FLiBtYWRkbmVzc1xuICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dChmdW4sIDApO1xuICAgIH0gY2F0Y2goZSl7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICAvLyBXaGVuIHdlIGFyZSBpbiBJLkUuIGJ1dCB0aGUgc2NyaXB0IGhhcyBiZWVuIGV2YWxlZCBzbyBJLkUuIGRvZXNuJ3QgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwobnVsbCwgZnVuLCAwKTtcbiAgICAgICAgfSBjYXRjaChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yXG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkU2V0VGltZW91dC5jYWxsKHRoaXMsIGZ1biwgMCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxufVxuZnVuY3Rpb24gcnVuQ2xlYXJUaW1lb3V0KG1hcmtlcikge1xuICAgIGlmIChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGNsZWFyVGltZW91dCkge1xuICAgICAgICAvL25vcm1hbCBlbnZpcm9tZW50cyBpbiBzYW5lIHNpdHVhdGlvbnNcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICAvLyBpZiBjbGVhclRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRDbGVhclRpbWVvdXQgPT09IGRlZmF1bHRDbGVhclRpbWVvdXQgfHwgIWNhY2hlZENsZWFyVGltZW91dCkgJiYgY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgcmV0dXJuIGNsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQobWFya2VyKTtcbiAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCAgdHJ1c3QgdGhlIGdsb2JhbCBvYmplY3Qgd2hlbiBjYWxsZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRDbGVhclRpbWVvdXQuY2FsbChudWxsLCBtYXJrZXIpO1xuICAgICAgICB9IGNhdGNoIChlKXtcbiAgICAgICAgICAgIC8vIHNhbWUgYXMgYWJvdmUgYnV0IHdoZW4gaXQncyBhIHZlcnNpb24gb2YgSS5FLiB0aGF0IG11c3QgaGF2ZSB0aGUgZ2xvYmFsIG9iamVjdCBmb3IgJ3RoaXMnLCBob3BmdWxseSBvdXIgY29udGV4dCBjb3JyZWN0IG90aGVyd2lzZSBpdCB3aWxsIHRocm93IGEgZ2xvYmFsIGVycm9yLlxuICAgICAgICAgICAgLy8gU29tZSB2ZXJzaW9ucyBvZiBJLkUuIGhhdmUgZGlmZmVyZW50IHJ1bGVzIGZvciBjbGVhclRpbWVvdXQgdnMgc2V0VGltZW91dFxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKHRoaXMsIG1hcmtlcik7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG59XG52YXIgcXVldWUgPSBbXTtcbnZhciBkcmFpbmluZyA9IGZhbHNlO1xudmFyIGN1cnJlbnRRdWV1ZTtcbnZhciBxdWV1ZUluZGV4ID0gLTE7XG5cbmZ1bmN0aW9uIGNsZWFuVXBOZXh0VGljaygpIHtcbiAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGlmIChjdXJyZW50UXVldWUubGVuZ3RoKSB7XG4gICAgICAgIHF1ZXVlID0gY3VycmVudFF1ZXVlLmNvbmNhdChxdWV1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICAgIGRyYWluUXVldWUoKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGRyYWluUXVldWUoKSB7XG4gICAgaWYgKGRyYWluaW5nKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHRpbWVvdXQgPSBydW5UaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG4gICAgZHJhaW5pbmcgPSB0cnVlO1xuXG4gICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB3aGlsZShsZW4pIHtcbiAgICAgICAgY3VycmVudFF1ZXVlID0gcXVldWU7XG4gICAgICAgIHF1ZXVlID0gW107XG4gICAgICAgIHdoaWxlICgrK3F1ZXVlSW5kZXggPCBsZW4pIHtcbiAgICAgICAgICAgIGlmIChjdXJyZW50UXVldWUpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuICAgICAgICBsZW4gPSBxdWV1ZS5sZW5ndGg7XG4gICAgfVxuICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG4gICAgZHJhaW5pbmcgPSBmYWxzZTtcbiAgICBydW5DbGVhclRpbWVvdXQodGltZW91dCk7XG59XG5cbnByb2Nlc3MubmV4dFRpY2sgPSBmdW5jdGlvbiAoZnVuKSB7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMSkge1xuICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IGFyZ3VtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG4gICAgICAgIH1cbiAgICB9XG4gICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcbiAgICBpZiAocXVldWUubGVuZ3RoID09PSAxICYmICFkcmFpbmluZykge1xuICAgICAgICBydW5UaW1lb3V0KGRyYWluUXVldWUpO1xuICAgIH1cbn07XG5cbi8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcbmZ1bmN0aW9uIEl0ZW0oZnVuLCBhcnJheSkge1xuICAgIHRoaXMuZnVuID0gZnVuO1xuICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcbn1cbkl0ZW0ucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcbn07XG5wcm9jZXNzLnRpdGxlID0gJ2Jyb3dzZXInO1xucHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcbnByb2Nlc3MuZW52ID0ge307XG5wcm9jZXNzLmFyZ3YgPSBbXTtcbnByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xucHJvY2Vzcy52ZXJzaW9ucyA9IHt9O1xuXG5mdW5jdGlvbiBub29wKCkge31cblxucHJvY2Vzcy5vbiA9IG5vb3A7XG5wcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3Mub25jZSA9IG5vb3A7XG5wcm9jZXNzLm9mZiA9IG5vb3A7XG5wcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlQWxsTGlzdGVuZXJzID0gbm9vcDtcbnByb2Nlc3MuZW1pdCA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRMaXN0ZW5lciA9IG5vb3A7XG5wcm9jZXNzLnByZXBlbmRPbmNlTGlzdGVuZXIgPSBub29wO1xuXG5wcm9jZXNzLmxpc3RlbmVycyA9IGZ1bmN0aW9uIChuYW1lKSB7IHJldHVybiBbXSB9XG5cbnByb2Nlc3MuYmluZGluZyA9IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcblxucHJvY2Vzcy5jd2QgPSBmdW5jdGlvbiAoKSB7IHJldHVybiAnLycgfTtcbnByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQnKTtcbn07XG5wcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuIiwiLypcbiAqIENvcHlyaWdodCAyMDE5IEdvb2dsZSBMTENcbiAqXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgaHR0cHM6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCAqIGFzIHV1aWQgZnJvbSBcInV1aWRcIjtcblxuaW1wb3J0IGZpcmViYXNlIGZyb20gXCJmaXJlYmFzZS9jb21wYXQvYXBwXCI7XG5pbXBvcnQgXCJmaXJlYmFzZS9jb21wYXQvYXV0aFwiO1xuaW1wb3J0IFwiZmlyZWJhc2UvY29tcGF0L2ZpcmVzdG9yZVwiO1xuaW1wb3J0IHsgZG9jLCBzZXREb2MsIG9uU25hcHNob3QgfSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCI7XG5cbmNvbnN0IFNIQVJEX0NPTExFQ1RJT05fSUQgPSBcIl9jb3VudGVyX3NoYXJkc19cIjtcbmNvbnN0IENPT0tJRV9OQU1FID0gXCJGSVJFU1RPUkVfQ09VTlRFUl9TSEFSRF9JRFwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvdW50ZXJTbmFwc2hvdCB7XG4gIGV4aXN0czogYm9vbGVhbjtcbiAgZGF0YTogKCkgPT4gbnVtYmVyO1xufVxuXG5leHBvcnQgY2xhc3MgQ291bnRlciB7XG4gIHByaXZhdGUgZGI6IGZpcmViYXNlLmZpcmVzdG9yZS5GaXJlc3RvcmUgPSBudWxsO1xuICBwcml2YXRlIHNoYXJkSWQgPSBcIlwiO1xuICBwcml2YXRlIHNoYXJkczogeyBba2V5OiBzdHJpbmddOiBudW1iZXIgfSA9IHt9O1xuICBwcml2YXRlIG5vdGlmeVByb21pc2U6IFByb21pc2U8dm9pZD4gPSBudWxsO1xuXG4gIC8qKlxuICAgKiBDb25zdHJ1Y3RzIGEgc2hhcmRlZCBjb3VudGVyIG9iamVjdCB0aGF0IHJlZmVyZW5jZXMgdG8gYSBmaWVsZFxuICAgKiBpbiBhIGRvY3VtZW50IHRoYXQgaXMgYSBjb3VudGVyLlxuICAgKlxuICAgKiBAcGFyYW0gZG9jIEEgcmVmZXJlbmNlIHRvIGEgZG9jdW1lbnQgd2l0aCBhIGNvdW50ZXIgZmllbGQuXG4gICAqIEBwYXJhbSBmaWVsZCBBIHBhdGggdG8gYSBjb3VudGVyIGZpZWxkIGluIHRoZSBhYm92ZSBkb2N1bWVudC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgZG9jOiBmaXJlYmFzZS5maXJlc3RvcmUuRG9jdW1lbnRSZWZlcmVuY2UsXG4gICAgcHJpdmF0ZSBmaWVsZDogc3RyaW5nXG4gICkge1xuICAgIHRoaXMuZGIgPSBkb2MuZmlyZXN0b3JlO1xuICAgIHRoaXMuc2hhcmRJZCA9IGdldFNoYXJkSWQoQ09PS0lFX05BTUUpO1xuXG4gICAgZmlyZWJhc2UuaW5pdGlhbGl6ZUFwcCh0aGlzLmRiLmFwcC5vcHRpb25zKTtcblxuICAgIGNvbnN0IHNoYXJkc1JlZiA9IGZpcmViYXNlXG4gICAgICAuZmlyZXN0b3JlKClcbiAgICAgIC5jb2xsZWN0aW9uKGRvYy5wYXRoICsgXCIvXCIgKyBTSEFSRF9DT0xMRUNUSU9OX0lEKTtcbiAgICB0aGlzLnNoYXJkc1tkb2MucGF0aF0gPSAwO1xuXG4gICAgdGhpcy5zaGFyZHNbc2hhcmRzUmVmLnBhdGggKyBcIi9cIiArIHRoaXMuc2hhcmRJZF0gPSAwO1xuICAgIHRoaXMuc2hhcmRzW3NoYXJkc1JlZi5wYXRoICsgXCIvXCIgKyBcIlxcdFwiICsgdGhpcy5zaGFyZElkLnNsaWNlKDAsIDQpXSA9IDA7XG4gICAgdGhpcy5zaGFyZHNbc2hhcmRzUmVmLnBhdGggKyBcIi9cIiArIFwiXFx0XFx0XCIgKyB0aGlzLnNoYXJkSWQuc2xpY2UoMCwgMyldID0gMDtcbiAgICB0aGlzLnNoYXJkc1tzaGFyZHNSZWYucGF0aCArIFwiL1wiICsgXCJcXHRcXHRcXHRcIiArIHRoaXMuc2hhcmRJZC5zbGljZSgwLCAyKV0gPSAwO1xuICAgIHRoaXMuc2hhcmRzW3NoYXJkc1JlZi5wYXRoICsgXCIvXCIgKyBcIlxcdFxcdFxcdFwiICsgdGhpcy5zaGFyZElkLnNsaWNlKDAsIDEpXSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBvZiB0aGUgY291bnRlci5cbiAgICpcbiAgICogQWxsIGxvY2FsIGluY3JlbWVudHMgd2lsbCBiZSByZWZsZWN0ZWQgaW4gdGhlIGNvdW50ZXIgZXZlbiBpZiB0aGUgbWFpblxuICAgKiBjb3VudGVyIGhhc24ndCBiZWVuIHVwZGF0ZWQgeWV0LlxuICAgKi9cbiAgcHVibGljIGFzeW5jIGdldChvcHRpb25zPzogZmlyZWJhc2UuZmlyZXN0b3JlLkdldE9wdGlvbnMpOiBQcm9taXNlPG51bWJlcj4ge1xuICAgIGNvbnN0IHZhbHVlUHJvbWlzZXMgPSBPYmplY3Qua2V5cyh0aGlzLnNoYXJkcykubWFwKGFzeW5jIChwYXRoKSA9PiB7XG4gICAgICBjb25zdCBzaGFyZCA9IGF3YWl0IHRoaXMuZGIuZG9jKHBhdGgpLmdldChvcHRpb25zKTtcbiAgICAgIHJldHVybiA8bnVtYmVyPnNoYXJkLmdldCh0aGlzLmZpZWxkKSB8fCAwO1xuICAgIH0pO1xuICAgIGNvbnN0IHZhbHVlcyA9IGF3YWl0IFByb21pc2UuYWxsKHZhbHVlUHJvbWlzZXMpO1xuICAgIHJldHVybiB2YWx1ZXMucmVkdWNlKChhLCBiKSA9PiBhICsgYiwgMCk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdGVuIHRvIGxhdGVuY3kgY29tcGVuc2F0ZWQgdmlldyBvZiB0aGUgY291bnRlci5cbiAgICpcbiAgICogQWxsIGxvY2FsIGluY3JlbWVudHMgdG8gdGhpcyBjb3VudGVyIHdpbGwgYmUgaW1tZWRpYXRlbHkgdmlzaWJsZSBpbiB0aGVcbiAgICogc25hcHNob3QuXG4gICAqL1xuICBwdWJsaWMgb25TbmFwc2hvdChvYnNlcnZhYmxlOiAobmV4dDogQ291bnRlclNuYXBzaG90KSA9PiB2b2lkKSB7XG4gICAgT2JqZWN0LmtleXModGhpcy5zaGFyZHMpLmZvckVhY2goKHBhdGgpID0+IHtcbiAgICAgIGNvbnN0IGRvY3VtZW50ID0gZmlyZWJhc2UuZmlyZXN0b3JlKCkuZG9jKHBhdGgpO1xuXG4gICAgICBvblNuYXBzaG90KGRvY3VtZW50LCAoc25hcDogZmlyZWJhc2UuZmlyZXN0b3JlLkRvY3VtZW50RGF0YSkgPT4ge1xuICAgICAgICB0aGlzLnNoYXJkc1tzbmFwLnJlZi5wYXRoXSA9IHNuYXAuZ2V0KHRoaXMuZmllbGQpIHx8IDA7XG4gICAgICAgIGlmICh0aGlzLm5vdGlmeVByb21pc2UgIT09IG51bGwpIHJldHVybjtcbiAgICAgICAgdGhpcy5ub3RpZnlQcm9taXNlID0gc2NoZWR1bGUoKCkgPT4ge1xuICAgICAgICAgIGNvbnN0IHN1bSA9IE9iamVjdC52YWx1ZXModGhpcy5zaGFyZHMpLnJlZHVjZSgoYSwgYikgPT4gYSArIGIsIDApO1xuICAgICAgICAgIG9ic2VydmFibGUoeyBleGlzdHM6IHRydWUsIGRhdGE6ICgpID0+IHN1bSB9KTtcbiAgICAgICAgICB0aGlzLm5vdGlmeVByb21pc2UgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEluY3JlbWVudCB0aGUgY291bnRlciBieSBhIGdpdmVuIHZhbHVlLlxuICAgKlxuICAgKiBlLmcuXG4gICAqIGNvbnN0IGNvdW50ZXIgPSBuZXcgc2hhcmRlZC5Db3VudGVyKGRiLmRvYyhcInBhdGgvZG9jdW1lbnRcIiksIFwiY291bnRlclwiKTtcbiAgICogY291bnRlci5pbmNyZW1lbnRCeSgxKTtcbiAgICovXG4gIHB1YmxpYyBpbmNyZW1lbnRCeSh2YWw6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBjb25zdCBpbmNyZW1lbnQ6IGFueSA9IGZpcmViYXNlLmZpcmVzdG9yZS5GaWVsZFZhbHVlLmluY3JlbWVudCh2YWwpO1xuICAgIGNvbnN0IHVwZGF0ZTogeyBba2V5OiBzdHJpbmddOiBhbnkgfSA9IHRoaXMuZmllbGRcbiAgICAgIC5zcGxpdChcIi5cIilcbiAgICAgIC5yZXZlcnNlKClcbiAgICAgIC5yZWR1Y2UoKHZhbHVlLCBuYW1lKSA9PiAoeyBbbmFtZV06IHZhbHVlIH0pLCBpbmNyZW1lbnQpO1xuXG4gICAgY29uc3Qgc2hhcmRSZWYgPSBmaXJlYmFzZVxuICAgICAgLmZpcmVzdG9yZSgpXG4gICAgICAuY29sbGVjdGlvbih0aGlzLmRvYy5wYXRoICsgXCIvXCIgKyBTSEFSRF9DT0xMRUNUSU9OX0lEKTtcblxuICAgIHJldHVybiBzZXREb2MoZG9jKHNoYXJkUmVmLCB0aGlzLnNoYXJkSWQpLCB1cGRhdGUsIHsgbWVyZ2U6IHRydWUgfSk7XG4gIH1cblxuICAvKipcbiAgICogQWNjZXNzIHRoZSBhc3NpZ25lZCBzaGFyZCBkaXJlY3RseS4gVXNlZnVsIHRvIHVwZGF0ZSBtdWx0aXBsZSBjb3VudGVyc1xuICAgKiBhdCB0aGUgc2FtZSB0aW1lLCBiYXRjaGVzIG9yIHRyYW5zYWN0aW9ucy5cbiAgICpcbiAgICogZS5nLlxuICAgKiBjb25zdCBjb3VudGVyID0gbmV3IHNoYXJkZWQuQ291bnRlcihkYi5kb2MoXCJwYXRoL2NvdW50ZXJcIiksIFwiXCIpO1xuICAgKiBjb25zdCBzaGFyZFJlZiA9IGNvdW50ZXIuc2hhcmQoKTtcbiAgICogc2hhcmRSZWYuc2V0KHtcImNvdW50ZXIxXCIsIGZpcmVzdG9yZS5GaWVsZFZhbHVlLkluY3JlbWVudCgxKSxcbiAgICogICAgICAgICAgICAgICBcImNvdW50ZXIyXCIsIGZpcmVzdG9yZS5GaWVsZFZhbHVlLkluY3JlbWVudCgxKSk7XG4gICAqL1xuICBwdWJsaWMgc2hhcmQoKTogZmlyZWJhc2UuZmlyZXN0b3JlLkRvY3VtZW50UmVmZXJlbmNlIHtcbiAgICByZXR1cm4gdGhpcy5kb2MuY29sbGVjdGlvbihTSEFSRF9DT0xMRUNUSU9OX0lEKS5kb2ModGhpcy5zaGFyZElkKTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBzY2hlZHVsZTxUPihmdW5jOiAoKSA9PiBUKTogUHJvbWlzZTxUPiB7XG4gIHJldHVybiBuZXcgUHJvbWlzZTxUPihhc3luYyAocmVzb2x2ZSkgPT4ge1xuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gZnVuYygpO1xuICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgIH0sIDApO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0U2hhcmRJZChjb29raWU6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHJlc3VsdCA9IG5ldyBSZWdFeHAoXG4gICAgXCIoPzpefDsgKVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KGNvb2tpZSkgKyBcIj0oW147XSopXCJcbiAgKS5leGVjKGRvY3VtZW50LmNvb2tpZSk7XG4gIGlmIChyZXN1bHQpIHJldHVybiByZXN1bHRbMV07XG5cbiAgY29uc3Qgc2hhcmRJZCA9IHV1aWQudjQoKTtcblxuICBjb25zdCBkYXRlID0gbmV3IERhdGUoKTtcbiAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpICsgMzAgKiAyNCAqIDYwICogNjAgKiAxMDAwKTtcbiAgY29uc3QgZXhwaXJlcyA9IFwiOyBleHBpcmVzPVwiICsgZGF0ZS50b1VUQ1N0cmluZygpO1xuXG4gIGRvY3VtZW50LmNvb2tpZSA9XG4gICAgZW5jb2RlVVJJQ29tcG9uZW50KGNvb2tpZSkgKyBcIj1cIiArIHNoYXJkSWQgKyBleHBpcmVzICsgXCI7IHBhdGg9L1wiO1xuICByZXR1cm4gc2hhcmRJZDtcbn1cbiIsInZhciB2MSA9IHJlcXVpcmUoJy4vdjEnKTtcbnZhciB2NCA9IHJlcXVpcmUoJy4vdjQnKTtcblxudmFyIHV1aWQgPSB2NDtcbnV1aWQudjEgPSB2MTtcbnV1aWQudjQgPSB2NDtcblxubW9kdWxlLmV4cG9ydHMgPSB1dWlkO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuLy8gKipgdjEoKWAgLSBHZW5lcmF0ZSB0aW1lLWJhc2VkIFVVSUQqKlxuLy9cbi8vIEluc3BpcmVkIGJ5IGh0dHBzOi8vZ2l0aHViLmNvbS9MaW9zSy9VVUlELmpzXG4vLyBhbmQgaHR0cDovL2RvY3MucHl0aG9uLm9yZy9saWJyYXJ5L3V1aWQuaHRtbFxuXG52YXIgX25vZGVJZDtcbnZhciBfY2xvY2tzZXE7XG5cbi8vIFByZXZpb3VzIHV1aWQgY3JlYXRpb24gdGltZVxudmFyIF9sYXN0TVNlY3MgPSAwO1xudmFyIF9sYXN0TlNlY3MgPSAwO1xuXG4vLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3V1aWRqcy91dWlkIGZvciBBUEkgZGV0YWlsc1xuZnVuY3Rpb24gdjEob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG4gIHZhciBiID0gYnVmIHx8IFtdO1xuXG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuICB2YXIgbm9kZSA9IG9wdGlvbnMubm9kZSB8fCBfbm9kZUlkO1xuICB2YXIgY2xvY2tzZXEgPSBvcHRpb25zLmNsb2Nrc2VxICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmNsb2Nrc2VxIDogX2Nsb2Nrc2VxO1xuXG4gIC8vIG5vZGUgYW5kIGNsb2Nrc2VxIG5lZWQgdG8gYmUgaW5pdGlhbGl6ZWQgdG8gcmFuZG9tIHZhbHVlcyBpZiB0aGV5J3JlIG5vdFxuICAvLyBzcGVjaWZpZWQuICBXZSBkbyB0aGlzIGxhemlseSB0byBtaW5pbWl6ZSBpc3N1ZXMgcmVsYXRlZCB0byBpbnN1ZmZpY2llbnRcbiAgLy8gc3lzdGVtIGVudHJvcHkuICBTZWUgIzE4OVxuICBpZiAobm9kZSA9PSBudWxsIHx8IGNsb2Nrc2VxID09IG51bGwpIHtcbiAgICB2YXIgc2VlZEJ5dGVzID0gcm5nKCk7XG4gICAgaWYgKG5vZGUgPT0gbnVsbCkge1xuICAgICAgLy8gUGVyIDQuNSwgY3JlYXRlIGFuZCA0OC1iaXQgbm9kZSBpZCwgKDQ3IHJhbmRvbSBiaXRzICsgbXVsdGljYXN0IGJpdCA9IDEpXG4gICAgICBub2RlID0gX25vZGVJZCA9IFtcbiAgICAgICAgc2VlZEJ5dGVzWzBdIHwgMHgwMSxcbiAgICAgICAgc2VlZEJ5dGVzWzFdLCBzZWVkQnl0ZXNbMl0sIHNlZWRCeXRlc1szXSwgc2VlZEJ5dGVzWzRdLCBzZWVkQnl0ZXNbNV1cbiAgICAgIF07XG4gICAgfVxuICAgIGlmIChjbG9ja3NlcSA9PSBudWxsKSB7XG4gICAgICAvLyBQZXIgNC4yLjIsIHJhbmRvbWl6ZSAoMTQgYml0KSBjbG9ja3NlcVxuICAgICAgY2xvY2tzZXEgPSBfY2xvY2tzZXEgPSAoc2VlZEJ5dGVzWzZdIDw8IDggfCBzZWVkQnl0ZXNbN10pICYgMHgzZmZmO1xuICAgIH1cbiAgfVxuXG4gIC8vIFVVSUQgdGltZXN0YW1wcyBhcmUgMTAwIG5hbm8tc2Vjb25kIHVuaXRzIHNpbmNlIHRoZSBHcmVnb3JpYW4gZXBvY2gsXG4gIC8vICgxNTgyLTEwLTE1IDAwOjAwKS4gIEpTTnVtYmVycyBhcmVuJ3QgcHJlY2lzZSBlbm91Z2ggZm9yIHRoaXMsIHNvXG4gIC8vIHRpbWUgaXMgaGFuZGxlZCBpbnRlcm5hbGx5IGFzICdtc2VjcycgKGludGVnZXIgbWlsbGlzZWNvbmRzKSBhbmQgJ25zZWNzJ1xuICAvLyAoMTAwLW5hbm9zZWNvbmRzIG9mZnNldCBmcm9tIG1zZWNzKSBzaW5jZSB1bml4IGVwb2NoLCAxOTcwLTAxLTAxIDAwOjAwLlxuICB2YXIgbXNlY3MgPSBvcHRpb25zLm1zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm1zZWNzIDogbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cbiAgLy8gUGVyIDQuMi4xLjIsIHVzZSBjb3VudCBvZiB1dWlkJ3MgZ2VuZXJhdGVkIGR1cmluZyB0aGUgY3VycmVudCBjbG9ja1xuICAvLyBjeWNsZSB0byBzaW11bGF0ZSBoaWdoZXIgcmVzb2x1dGlvbiBjbG9ja1xuICB2YXIgbnNlY3MgPSBvcHRpb25zLm5zZWNzICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLm5zZWNzIDogX2xhc3ROU2VjcyArIDE7XG5cbiAgLy8gVGltZSBzaW5jZSBsYXN0IHV1aWQgY3JlYXRpb24gKGluIG1zZWNzKVxuICB2YXIgZHQgPSAobXNlY3MgLSBfbGFzdE1TZWNzKSArIChuc2VjcyAtIF9sYXN0TlNlY3MpLzEwMDAwO1xuXG4gIC8vIFBlciA0LjIuMS4yLCBCdW1wIGNsb2Nrc2VxIG9uIGNsb2NrIHJlZ3Jlc3Npb25cbiAgaWYgKGR0IDwgMCAmJiBvcHRpb25zLmNsb2Nrc2VxID09PSB1bmRlZmluZWQpIHtcbiAgICBjbG9ja3NlcSA9IGNsb2Nrc2VxICsgMSAmIDB4M2ZmZjtcbiAgfVxuXG4gIC8vIFJlc2V0IG5zZWNzIGlmIGNsb2NrIHJlZ3Jlc3NlcyAobmV3IGNsb2Nrc2VxKSBvciB3ZSd2ZSBtb3ZlZCBvbnRvIGEgbmV3XG4gIC8vIHRpbWUgaW50ZXJ2YWxcbiAgaWYgKChkdCA8IDAgfHwgbXNlY3MgPiBfbGFzdE1TZWNzKSAmJiBvcHRpb25zLm5zZWNzID09PSB1bmRlZmluZWQpIHtcbiAgICBuc2VjcyA9IDA7XG4gIH1cblxuICAvLyBQZXIgNC4yLjEuMiBUaHJvdyBlcnJvciBpZiB0b28gbWFueSB1dWlkcyBhcmUgcmVxdWVzdGVkXG4gIGlmIChuc2VjcyA+PSAxMDAwMCkge1xuICAgIHRocm93IG5ldyBFcnJvcigndXVpZC52MSgpOiBDYW5cXCd0IGNyZWF0ZSBtb3JlIHRoYW4gMTBNIHV1aWRzL3NlYycpO1xuICB9XG5cbiAgX2xhc3RNU2VjcyA9IG1zZWNzO1xuICBfbGFzdE5TZWNzID0gbnNlY3M7XG4gIF9jbG9ja3NlcSA9IGNsb2Nrc2VxO1xuXG4gIC8vIFBlciA0LjEuNCAtIENvbnZlcnQgZnJvbSB1bml4IGVwb2NoIHRvIEdyZWdvcmlhbiBlcG9jaFxuICBtc2VjcyArPSAxMjIxOTI5MjgwMDAwMDtcblxuICAvLyBgdGltZV9sb3dgXG4gIHZhciB0bCA9ICgobXNlY3MgJiAweGZmZmZmZmYpICogMTAwMDAgKyBuc2VjcykgJSAweDEwMDAwMDAwMDtcbiAgYltpKytdID0gdGwgPj4+IDI0ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDE2ICYgMHhmZjtcbiAgYltpKytdID0gdGwgPj4+IDggJiAweGZmO1xuICBiW2krK10gPSB0bCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfbWlkYFxuICB2YXIgdG1oID0gKG1zZWNzIC8gMHgxMDAwMDAwMDAgKiAxMDAwMCkgJiAweGZmZmZmZmY7XG4gIGJbaSsrXSA9IHRtaCA+Pj4gOCAmIDB4ZmY7XG4gIGJbaSsrXSA9IHRtaCAmIDB4ZmY7XG5cbiAgLy8gYHRpbWVfaGlnaF9hbmRfdmVyc2lvbmBcbiAgYltpKytdID0gdG1oID4+PiAyNCAmIDB4ZiB8IDB4MTA7IC8vIGluY2x1ZGUgdmVyc2lvblxuICBiW2krK10gPSB0bWggPj4+IDE2ICYgMHhmZjtcblxuICAvLyBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGAgKFBlciA0LjIuMiAtIGluY2x1ZGUgdmFyaWFudClcbiAgYltpKytdID0gY2xvY2tzZXEgPj4+IDggfCAweDgwO1xuXG4gIC8vIGBjbG9ja19zZXFfbG93YFxuICBiW2krK10gPSBjbG9ja3NlcSAmIDB4ZmY7XG5cbiAgLy8gYG5vZGVgXG4gIGZvciAodmFyIG4gPSAwOyBuIDwgNjsgKytuKSB7XG4gICAgYltpICsgbl0gPSBub2RlW25dO1xuICB9XG5cbiAgcmV0dXJuIGJ1ZiA/IGJ1ZiA6IGJ5dGVzVG9VdWlkKGIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHYxO1xuIiwidmFyIHJuZyA9IHJlcXVpcmUoJy4vbGliL3JuZycpO1xudmFyIGJ5dGVzVG9VdWlkID0gcmVxdWlyZSgnLi9saWIvYnl0ZXNUb1V1aWQnKTtcblxuZnVuY3Rpb24gdjQob3B0aW9ucywgYnVmLCBvZmZzZXQpIHtcbiAgdmFyIGkgPSBidWYgJiYgb2Zmc2V0IHx8IDA7XG5cbiAgaWYgKHR5cGVvZihvcHRpb25zKSA9PSAnc3RyaW5nJykge1xuICAgIGJ1ZiA9IG9wdGlvbnMgPT09ICdiaW5hcnknID8gbmV3IEFycmF5KDE2KSA6IG51bGw7XG4gICAgb3B0aW9ucyA9IG51bGw7XG4gIH1cbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgdmFyIHJuZHMgPSBvcHRpb25zLnJhbmRvbSB8fCAob3B0aW9ucy5ybmcgfHwgcm5nKSgpO1xuXG4gIC8vIFBlciA0LjQsIHNldCBiaXRzIGZvciB2ZXJzaW9uIGFuZCBgY2xvY2tfc2VxX2hpX2FuZF9yZXNlcnZlZGBcbiAgcm5kc1s2XSA9IChybmRzWzZdICYgMHgwZikgfCAweDQwO1xuICBybmRzWzhdID0gKHJuZHNbOF0gJiAweDNmKSB8IDB4ODA7XG5cbiAgLy8gQ29weSBieXRlcyB0byBidWZmZXIsIGlmIHByb3ZpZGVkXG4gIGlmIChidWYpIHtcbiAgICBmb3IgKHZhciBpaSA9IDA7IGlpIDwgMTY7ICsraWkpIHtcbiAgICAgIGJ1ZltpICsgaWldID0gcm5kc1tpaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ1ZiB8fCBieXRlc1RvVXVpZChybmRzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB2NDtcbiIsImltcG9ydCBmaXJlYmFzZSBmcm9tICdAZmlyZWJhc2UvYXBwLWNvbXBhdCc7XG5leHBvcnQgeyBkZWZhdWx0IH0gZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuXG52YXIgbmFtZSA9IFwiZmlyZWJhc2VcIjtcbnZhciB2ZXJzaW9uID0gXCI5LjIzLjBcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZmlyZWJhc2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24sICdhcHAtY29tcGF0Jyk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgJ0BmaXJlYmFzZS9hdXRoLWNvbXBhdCc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuaW1wb3J0ICogYXMgZXhwIGZyb20gJ0BmaXJlYmFzZS9hdXRoL2ludGVybmFsJztcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJ0BmaXJlYmFzZS9jb21wb25lbnQnO1xuaW1wb3J0IHsgaXNCcm93c2VyRXh0ZW5zaW9uLCBnZXRVQSwgaXNSZWFjdE5hdGl2ZSwgaXNOb2RlLCBpc0luZGV4ZWREQkF2YWlsYWJsZSwgaXNJRSwgRmlyZWJhc2VFcnJvciB9IGZyb20gJ0BmaXJlYmFzZS91dGlsJztcblxudmFyIG5hbWUgPSBcIkBmaXJlYmFzZS9hdXRoLWNvbXBhdFwiO1xudmFyIHZlcnNpb24gPSBcIjAuNC4yXCI7XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IENPUkRPVkFfT05ERVZJQ0VSRUFEWV9USU1FT1VUX01TID0gMTAwMDtcclxuZnVuY3Rpb24gX2dldEN1cnJlbnRTY2hlbWUoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICByZXR1cm4gKChfYSA9IHNlbGYgPT09IG51bGwgfHwgc2VsZiA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZi5sb2NhdGlvbikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnByb3RvY29sKSB8fCBudWxsO1xyXG59XHJcbi8qKlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBjdXJyZW50IGVudmlyb25tZW50IGlzIGh0dHAgb3IgaHR0cHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNIdHRwT3JIdHRwcygpIHtcclxuICAgIHJldHVybiBfZ2V0Q3VycmVudFNjaGVtZSgpID09PSAnaHR0cDonIHx8IF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdodHRwczonO1xyXG59XHJcbi8qKlxyXG4gKiBAcGFyYW0gez9zdHJpbmc9fSB1YSBUaGUgdXNlciBhZ2VudC5cclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgYXBwIGlzIHJlbmRlcmVkIGluIGEgbW9iaWxlIGlPUyBvciBBbmRyb2lkXHJcbiAqICAgICBDb3Jkb3ZhIGVudmlyb25tZW50LlxyXG4gKi9cclxuZnVuY3Rpb24gX2lzQW5kcm9pZE9ySW9zQ29yZG92YVNjaGVtZSh1YSA9IGdldFVBKCkpIHtcclxuICAgIHJldHVybiAhISgoX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2ZpbGU6JyB8fFxyXG4gICAgICAgIF9nZXRDdXJyZW50U2NoZW1lKCkgPT09ICdpb25pYzonIHx8XHJcbiAgICAgICAgX2dldEN1cnJlbnRTY2hlbWUoKSA9PT0gJ2NhcGFjaXRvcjonKSAmJlxyXG4gICAgICAgIHVhLnRvTG93ZXJDYXNlKCkubWF0Y2goL2lwaG9uZXxpcGFkfGlwb2R8YW5kcm9pZC8pKTtcclxufVxyXG4vKipcclxuICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZW52aXJvbm1lbnQgaXMgYSBuYXRpdmUgZW52aXJvbm1lbnQsIHdoZXJlXHJcbiAqICAgICBDT1JTIGNoZWNrcyBkbyBub3QgYXBwbHkuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNOYXRpdmVFbnZpcm9ubWVudCgpIHtcclxuICAgIHJldHVybiBpc1JlYWN0TmF0aXZlKCkgfHwgaXNOb2RlKCk7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSB1c2VyIGFnZW50IGlzIElFMTEuXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgaXQgaXMgSUUxMS5cclxuICovXHJcbmZ1bmN0aW9uIF9pc0llMTEoKSB7XHJcbiAgICByZXR1cm4gaXNJRSgpICYmIChkb2N1bWVudCA9PT0gbnVsbCB8fCBkb2N1bWVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogZG9jdW1lbnQuZG9jdW1lbnRNb2RlKSA9PT0gMTE7XHJcbn1cclxuLyoqXHJcbiAqIENoZWNrcyB3aGV0aGVyIHRoZSB1c2VyIGFnZW50IGlzIEVkZ2UuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSB1c2VyQWdlbnQgVGhlIGJyb3dzZXIgdXNlciBhZ2VudCBzdHJpbmcuXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFRydWUgaWYgaXQgaXMgRWRnZS5cclxuICovXHJcbmZ1bmN0aW9uIF9pc0VkZ2UodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gL0VkZ2VcXC9cXGQrLy50ZXN0KHVhKTtcclxufVxyXG4vKipcclxuICogQHBhcmFtIHs/c3RyaW5nPX0gb3B0X3VzZXJBZ2VudCBUaGUgbmF2aWdhdG9yIHVzZXIgYWdlbnQuXHJcbiAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgbG9jYWwgc3RvcmFnZSBpcyBub3Qgc3luY2hyb25pemVkIGJldHdlZW4gYW4gaWZyYW1lXHJcbiAqICAgICBhbmQgYSBwb3B1cCBvZiB0aGUgc2FtZSBkb21haW4uXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNMb2NhbFN0b3JhZ2VOb3RTeW5jaHJvbml6ZWQodWEgPSBnZXRVQSgpKSB7XHJcbiAgICByZXR1cm4gX2lzSWUxMSgpIHx8IF9pc0VkZ2UodWEpO1xyXG59XHJcbi8qKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHdlYiBzdG9yYWdlIGlzIHN1cHBvcnRlZC4gKi9cclxuZnVuY3Rpb24gX2lzV2ViU3RvcmFnZVN1cHBvcnRlZCgpIHtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3Qgc3RvcmFnZSA9IHNlbGYubG9jYWxTdG9yYWdlO1xyXG4gICAgICAgIGNvbnN0IGtleSA9IGV4cC5fZ2VuZXJhdGVFdmVudElkKCk7XHJcbiAgICAgICAgaWYgKHN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgLy8gc2V0SXRlbSB3aWxsIHRocm93IGFuIGV4Y2VwdGlvbiBpZiB3ZSBjYW5ub3QgYWNjZXNzIFdlYlN0b3JhZ2UgKGUuZy4sXHJcbiAgICAgICAgICAgIC8vIFNhZmFyaSBpbiBwcml2YXRlIG1vZGUpLlxyXG4gICAgICAgICAgICBzdG9yYWdlWydzZXRJdGVtJ10oa2V5LCAnMScpO1xyXG4gICAgICAgICAgICBzdG9yYWdlWydyZW1vdmVJdGVtJ10oa2V5KTtcclxuICAgICAgICAgICAgLy8gRm9yIGJyb3dzZXJzIHdoZXJlIGlmcmFtZSB3ZWIgc3RvcmFnZSBkb2VzIG5vdCBzeW5jaHJvbml6ZSB3aXRoIGEgcG9wdXBcclxuICAgICAgICAgICAgLy8gb2YgdGhlIHNhbWUgZG9tYWluLCBpbmRleGVkREIgaXMgdXNlZCBmb3IgcGVyc2lzdGVudCBzdG9yYWdlLiBUaGVzZVxyXG4gICAgICAgICAgICAvLyBicm93c2VycyBpbmNsdWRlIElFMTEgYW5kIEVkZ2UuXHJcbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBpdCBpcyBzdXBwb3J0ZWQgKElFMTEgYW5kIEVkZ2UgcHJpdmF0ZSBtb2RlIGRvZXMgbm90IHN1cHBvcnRcclxuICAgICAgICAgICAgLy8gdGhhdCkuXHJcbiAgICAgICAgICAgIGlmIChfaXNMb2NhbFN0b3JhZ2VOb3RTeW5jaHJvbml6ZWQoKSkge1xyXG4gICAgICAgICAgICAgICAgLy8gSW4gc3VjaCBicm93c2VycywgaWYgaW5kZXhlZERCIGlzIG5vdCBzdXBwb3J0ZWQsIGFuIGlmcmFtZSBjYW5ub3QgYmVcclxuICAgICAgICAgICAgICAgIC8vIG5vdGlmaWVkIG9mIHRoZSBwb3B1cCBzaWduIGluIHJlc3VsdC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBpc0luZGV4ZWREQkF2YWlsYWJsZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgLy8gbG9jYWxTdG9yYWdlIGlzIG5vdCBhdmFpbGFibGUgZnJvbSBhIHdvcmtlci4gVGVzdCBhdmFpbGFiaWxpdHkgb2ZcclxuICAgICAgICAvLyBpbmRleGVkREIuXHJcbiAgICAgICAgcmV0dXJuIF9pc1dvcmtlcigpICYmIGlzSW5kZXhlZERCQXZhaWxhYmxlKCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn1cclxuLyoqXHJcbiAqIEBwYXJhbSB7P09iamVjdD19IGdsb2JhbCBUaGUgb3B0aW9uYWwgZ2xvYmFsIHNjb3BlLlxyXG4gKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIGN1cnJlbnQgZW52aXJvbm1lbnQgaXMgYSB3b3JrZXIuXHJcbiAqL1xyXG5mdW5jdGlvbiBfaXNXb3JrZXIoKSB7XHJcbiAgICAvLyBXb3JrZXJHbG9iYWxTY29wZSBvbmx5IGRlZmluZWQgaW4gd29ya2VyIGVudmlyb25tZW50LlxyXG4gICAgcmV0dXJuICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgICAgICdXb3JrZXJHbG9iYWxTY29wZScgaW4gZ2xvYmFsICYmXHJcbiAgICAgICAgJ2ltcG9ydFNjcmlwdHMnIGluIGdsb2JhbCk7XHJcbn1cclxuZnVuY3Rpb24gX2lzUG9wdXBSZWRpcmVjdFN1cHBvcnRlZCgpIHtcclxuICAgIHJldHVybiAoKF9pc0h0dHBPckh0dHBzKCkgfHxcclxuICAgICAgICBpc0Jyb3dzZXJFeHRlbnNpb24oKSB8fFxyXG4gICAgICAgIF9pc0FuZHJvaWRPcklvc0NvcmRvdmFTY2hlbWUoKSkgJiZcclxuICAgICAgICAvLyBSZWFjdCBOYXRpdmUgd2l0aCByZW1vdGUgZGVidWdnaW5nIHJlcG9ydHMgaXRzIGxvY2F0aW9uLnByb3RvY29sIGFzXHJcbiAgICAgICAgLy8gaHR0cC5cclxuICAgICAgICAhX2lzTmF0aXZlRW52aXJvbm1lbnQoKSAmJlxyXG4gICAgICAgIC8vIExvY2FsIHN0b3JhZ2UgaGFzIHRvIGJlIHN1cHBvcnRlZCBmb3IgYnJvd3NlciBwb3B1cCBhbmQgcmVkaXJlY3RcclxuICAgICAgICAvLyBvcGVyYXRpb25zIHRvIHdvcmsuXHJcbiAgICAgICAgX2lzV2ViU3RvcmFnZVN1cHBvcnRlZCgpICYmXHJcbiAgICAgICAgLy8gRE9NLCBwb3B1cHMgYW5kIHJlZGlyZWN0cyBhcmUgbm90IHN1cHBvcnRlZCB3aXRoaW4gYSB3b3JrZXIuXHJcbiAgICAgICAgIV9pc1dvcmtlcigpKTtcclxufVxyXG4vKiogUXVpY2sgY2hlY2sgdGhhdCBpbmRpY2F0ZXMgdGhlIHBsYXRmb3JtICptYXkqIGJlIENvcmRvdmEgKi9cclxuZnVuY3Rpb24gX2lzTGlrZWx5Q29yZG92YSgpIHtcclxuICAgIHJldHVybiBfaXNBbmRyb2lkT3JJb3NDb3Jkb3ZhU2NoZW1lKCkgJiYgdHlwZW9mIGRvY3VtZW50ICE9PSAndW5kZWZpbmVkJztcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfaXNDb3Jkb3ZhKCkge1xyXG4gICAgaWYgKCFfaXNMaWtlbHlDb3Jkb3ZhKCkpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XHJcbiAgICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIC8vIFdlJ3ZlIHdhaXRlZCBsb25nIGVub3VnaDsgdGhlIHRlbGx0YWxlIENvcmRvdmEgZXZlbnQgZGlkbid0IGhhcHBlblxyXG4gICAgICAgICAgICByZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9LCBDT1JET1ZBX09OREVWSUNFUkVBRFlfVElNRU9VVF9NUyk7XHJcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZGV2aWNlcmVhZHknLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpO1xyXG4gICAgICAgICAgICByZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuZnVuY3Rpb24gX2dldFNlbGZXaW5kb3coKSB7XHJcbiAgICByZXR1cm4gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiBudWxsO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IFBlcnNpc3RlbmNlID0ge1xyXG4gICAgTE9DQUw6ICdsb2NhbCcsXHJcbiAgICBOT05FOiAnbm9uZScsXHJcbiAgICBTRVNTSU9OOiAnc2Vzc2lvbidcclxufTtcclxuY29uc3QgX2Fzc2VydCQzID0gZXhwLl9hc3NlcnQ7XHJcbmNvbnN0IFBFUlNJU1RFTkNFX0tFWSA9ICdwZXJzaXN0ZW5jZSc7XHJcbi8qKlxyXG4gKiBWYWxpZGF0ZXMgdGhhdCBhbiBhcmd1bWVudCBpcyBhIHZhbGlkIHBlcnNpc3RlbmNlIHZhbHVlLiBJZiBhbiBpbnZhbGlkIHR5cGVcclxuICogaXMgc3BlY2lmaWVkLCBhbiBlcnJvciBpcyB0aHJvd24gc3luY2hyb25vdXNseS5cclxuICovXHJcbmZ1bmN0aW9uIF92YWxpZGF0ZVBlcnNpc3RlbmNlQXJndW1lbnQoYXV0aCwgcGVyc2lzdGVuY2UpIHtcclxuICAgIF9hc3NlcnQkMyhPYmplY3QudmFsdWVzKFBlcnNpc3RlbmNlKS5pbmNsdWRlcyhwZXJzaXN0ZW5jZSksIGF1dGgsIFwiaW52YWxpZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogZXhwLkF1dGhFcnJvckNvZGUuSU5WQUxJRF9QRVJTSVNURU5DRSAqLyk7XHJcbiAgICAvLyBWYWxpZGF0ZSBpZiB0aGUgc3BlY2lmaWVkIHR5cGUgaXMgc3VwcG9ydGVkIGluIHRoZSBjdXJyZW50IGVudmlyb25tZW50LlxyXG4gICAgaWYgKGlzUmVhY3ROYXRpdmUoKSkge1xyXG4gICAgICAgIC8vIFRoaXMgaXMgb25seSBzdXBwb3J0ZWQgaW4gYSBicm93c2VyLlxyXG4gICAgICAgIF9hc3NlcnQkMyhwZXJzaXN0ZW5jZSAhPT0gUGVyc2lzdGVuY2UuU0VTU0lPTiwgYXV0aCwgXCJ1bnN1cHBvcnRlZC1wZXJzaXN0ZW5jZS10eXBlXCIgLyogZXhwLkF1dGhFcnJvckNvZGUuVU5TVVBQT1JURURfUEVSU0lTVEVOQ0UgKi8pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGlmIChpc05vZGUoKSkge1xyXG4gICAgICAgIC8vIE9ubHkgbm9uZSBpcyBzdXBwb3J0ZWQgaW4gTm9kZS5qcy5cclxuICAgICAgICBfYXNzZXJ0JDMocGVyc2lzdGVuY2UgPT09IFBlcnNpc3RlbmNlLk5PTkUsIGF1dGgsIFwidW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIGV4cC5BdXRoRXJyb3JDb2RlLlVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoX2lzV29ya2VyKCkpIHtcclxuICAgICAgICAvLyBJbiBhIHdvcmtlciBlbnZpcm9ubWVudCwgZWl0aGVyIExPQ0FMIG9yIE5PTkUgYXJlIHN1cHBvcnRlZC5cclxuICAgICAgICAvLyBJZiBpbmRleGVkREIgbm90IHN1cHBvcnRlZCBhbmQgTE9DQUwgcHJvdmlkZWQsIHRocm93IGFuIGVycm9yXHJcbiAgICAgICAgX2Fzc2VydCQzKHBlcnNpc3RlbmNlID09PSBQZXJzaXN0ZW5jZS5OT05FIHx8XHJcbiAgICAgICAgICAgIChwZXJzaXN0ZW5jZSA9PT0gUGVyc2lzdGVuY2UuTE9DQUwgJiYgaXNJbmRleGVkREJBdmFpbGFibGUoKSksIGF1dGgsIFwidW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIGV4cC5BdXRoRXJyb3JDb2RlLlVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIGlzIHJlc3RyaWN0ZWQgYnkgd2hhdCB0aGUgYnJvd3NlciBzdXBwb3J0cy5cclxuICAgIF9hc3NlcnQkMyhwZXJzaXN0ZW5jZSA9PT0gUGVyc2lzdGVuY2UuTk9ORSB8fCBfaXNXZWJTdG9yYWdlU3VwcG9ydGVkKCksIGF1dGgsIFwidW5zdXBwb3J0ZWQtcGVyc2lzdGVuY2UtdHlwZVwiIC8qIGV4cC5BdXRoRXJyb3JDb2RlLlVOU1VQUE9SVEVEX1BFUlNJU1RFTkNFICovKTtcclxufVxyXG5hc3luYyBmdW5jdGlvbiBfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoYXV0aCkge1xyXG4gICAgYXdhaXQgYXV0aC5faW5pdGlhbGl6YXRpb25Qcm9taXNlO1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGdldFNlc3Npb25TdG9yYWdlSWZBdmFpbGFibGUoKTtcclxuICAgIGNvbnN0IGtleSA9IGV4cC5fcGVyc2lzdGVuY2VLZXlOYW1lKFBFUlNJU1RFTkNFX0tFWSwgYXV0aC5jb25maWcuYXBpS2V5LCBhdXRoLm5hbWUpO1xyXG4gICAgaWYgKHNlc3Npb24pIHtcclxuICAgICAgICBzZXNzaW9uLnNldEl0ZW0oa2V5LCBhdXRoLl9nZXRQZXJzaXN0ZW5jZSgpKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBfZ2V0UGVyc2lzdGVuY2VzRnJvbVJlZGlyZWN0KGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgY29uc3Qgc2Vzc2lvbiA9IGdldFNlc3Npb25TdG9yYWdlSWZBdmFpbGFibGUoKTtcclxuICAgIGlmICghc2Vzc2lvbikge1xyXG4gICAgICAgIHJldHVybiBbXTtcclxuICAgIH1cclxuICAgIGNvbnN0IGtleSA9IGV4cC5fcGVyc2lzdGVuY2VLZXlOYW1lKFBFUlNJU1RFTkNFX0tFWSwgYXBpS2V5LCBhcHBOYW1lKTtcclxuICAgIGNvbnN0IHBlcnNpc3RlbmNlID0gc2Vzc2lvbi5nZXRJdGVtKGtleSk7XHJcbiAgICBzd2l0Y2ggKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgY2FzZSBQZXJzaXN0ZW5jZS5OT05FOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cC5pbk1lbW9yeVBlcnNpc3RlbmNlXTtcclxuICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLkxPQ0FMOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cC5pbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlLCBleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZV07XHJcbiAgICAgICAgY2FzZSBQZXJzaXN0ZW5jZS5TRVNTSU9OOlxyXG4gICAgICAgICAgICByZXR1cm4gW2V4cC5icm93c2VyU2Vzc2lvblBlcnNpc3RlbmNlXTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICB9XHJcbn1cclxuLyoqIFJldHVybnMgc2Vzc2lvbiBzdG9yYWdlLCBvciBudWxsIGlmIHRoZSBwcm9wZXJ0eSBhY2Nlc3MgZXJyb3JzICovXHJcbmZ1bmN0aW9uIGdldFNlc3Npb25TdG9yYWdlSWZBdmFpbGFibGUoKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHJldHVybiAoKF9hID0gX2dldFNlbGZXaW5kb3coKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNlc3Npb25TdG9yYWdlKSB8fCBudWxsO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMjAgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5jb25zdCBfYXNzZXJ0JDIgPSBleHAuX2Fzc2VydDtcclxuLyoqIFBsYXRmb3JtLWFnbm9zdGljIHBvcHVwLXJlZGlyZWN0IHJlc29sdmVyICovXHJcbmNsYXNzIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAvLyBDcmVhdGUgYm90aCByZXNvbHZlcnMgZm9yIGR5bmFtaWMgcmVzb2x1dGlvbiBsYXRlclxyXG4gICAgICAgIHRoaXMuYnJvd3NlclJlc29sdmVyID0gZXhwLl9nZXRJbnN0YW5jZShleHAuYnJvd3NlclBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgdGhpcy5jb3Jkb3ZhUmVzb2x2ZXIgPSBleHAuX2dldEluc3RhbmNlKGV4cC5jb3Jkb3ZhUG9wdXBSZWRpcmVjdFJlc29sdmVyKTtcclxuICAgICAgICAvLyBUaGUgYWN0dWFsIHJlc29sdmVyIGluIHVzZTogZWl0aGVyIGJyb3dzZXJSZXNvbHZlciBvciBjb3Jkb3ZhUmVzb2x2ZXIuXHJcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nUmVzb2x2ZXIgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX3JlZGlyZWN0UGVyc2lzdGVuY2UgPSBleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICB0aGlzLl9jb21wbGV0ZVJlZGlyZWN0Rm4gPSBleHAuX2dldFJlZGlyZWN0UmVzdWx0O1xyXG4gICAgICAgIHRoaXMuX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQgPSBleHAuX292ZXJyaWRlUmVkaXJlY3RSZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfaW5pdGlhbGl6ZShhdXRoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFVuZGVybHlpbmdSZXNvbHZlci5faW5pdGlhbGl6ZShhdXRoKTtcclxuICAgIH1cclxuICAgIGFzeW5jIF9vcGVuUG9wdXAoYXV0aCwgcHJvdmlkZXIsIGF1dGhUeXBlLCBldmVudElkKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zZWxlY3RVbmRlcmx5aW5nUmVzb2x2ZXIoKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5hc3NlcnRlZFVuZGVybHlpbmdSZXNvbHZlci5fb3BlblBvcHVwKGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBfb3BlblJlZGlyZWN0KGF1dGgsIHByb3ZpZGVyLCBhdXRoVHlwZSwgZXZlbnRJZCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2VsZWN0VW5kZXJseWluZ1Jlc29sdmVyKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX29wZW5SZWRpcmVjdChhdXRoLCBwcm92aWRlciwgYXV0aFR5cGUsIGV2ZW50SWQpO1xyXG4gICAgfVxyXG4gICAgX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYikge1xyXG4gICAgICAgIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX2lzSWZyYW1lV2ViU3RvcmFnZVN1cHBvcnRlZChhdXRoLCBjYik7XHJcbiAgICB9XHJcbiAgICBfb3JpZ2luVmFsaWRhdGlvbihhdXRoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIuX29yaWdpblZhbGlkYXRpb24oYXV0aCk7XHJcbiAgICB9XHJcbiAgICBnZXQgX3Nob3VsZEluaXRQcm9hY3RpdmVseSgpIHtcclxuICAgICAgICByZXR1cm4gX2lzTGlrZWx5Q29yZG92YSgpIHx8IHRoaXMuYnJvd3NlclJlc29sdmVyLl9zaG91bGRJbml0UHJvYWN0aXZlbHk7XHJcbiAgICB9XHJcbiAgICBnZXQgYXNzZXJ0ZWRVbmRlcmx5aW5nUmVzb2x2ZXIoKSB7XHJcbiAgICAgICAgX2Fzc2VydCQyKHRoaXMudW5kZXJseWluZ1Jlc29sdmVyLCBcImludGVybmFsLWVycm9yXCIgLyogZXhwLkF1dGhFcnJvckNvZGUuSU5URVJOQUxfRVJST1IgKi8pO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnVuZGVybHlpbmdSZXNvbHZlcjtcclxuICAgIH1cclxuICAgIGFzeW5jIHNlbGVjdFVuZGVybHlpbmdSZXNvbHZlcigpIHtcclxuICAgICAgICBpZiAodGhpcy51bmRlcmx5aW5nUmVzb2x2ZXIpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBXZSBoYXZlbid0IHlldCBkZXRlcm1pbmVkIHdoZXRoZXIgb3Igbm90IHdlJ3JlIGluIENvcmRvdmE7IGdvIGFoZWFkXHJcbiAgICAgICAgLy8gYW5kIGRldGVybWluZSB0aGF0IHN0YXRlIG5vdy5cclxuICAgICAgICBjb25zdCBpc0NvcmRvdmEgPSBhd2FpdCBfaXNDb3Jkb3ZhKCk7XHJcbiAgICAgICAgdGhpcy51bmRlcmx5aW5nUmVzb2x2ZXIgPSBpc0NvcmRvdmFcclxuICAgICAgICAgICAgPyB0aGlzLmNvcmRvdmFSZXNvbHZlclxyXG4gICAgICAgICAgICA6IHRoaXMuYnJvd3NlclJlc29sdmVyO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIHVud3JhcChvYmplY3QpIHtcclxuICAgIHJldHVybiBvYmplY3QudW53cmFwKCk7XHJcbn1cclxuZnVuY3Rpb24gd3JhcHBlZChvYmplY3QpIHtcclxuICAgIHJldHVybiBvYmplY3Qud3JhcHBlZCgpO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmZ1bmN0aW9uIGNyZWRlbnRpYWxGcm9tUmVzcG9uc2UodXNlckNyZWRlbnRpYWwpIHtcclxuICAgIHJldHVybiBjcmVkZW50aWFsRnJvbU9iamVjdCh1c2VyQ3JlZGVudGlhbCk7XHJcbn1cclxuZnVuY3Rpb24gYXR0YWNoRXh0cmFFcnJvckZpZWxkcyhhdXRoLCBlKSB7XHJcbiAgICB2YXIgX2E7XHJcbiAgICAvLyBUaGUgcmVzcG9uc2UgY29udGFpbnMgYWxsIGZpZWxkcyBmcm9tIHRoZSBzZXJ2ZXIgd2hpY2ggbWF5IG9yIG1heSBub3RcclxuICAgIC8vIGFjdHVhbGx5IG1hdGNoIHRoZSB1bmRlcmx5aW5nIHR5cGVcclxuICAgIGNvbnN0IHJlc3BvbnNlID0gKF9hID0gZS5jdXN0b21EYXRhKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuX3Rva2VuUmVzcG9uc2U7XHJcbiAgICBpZiAoKGUgPT09IG51bGwgfHwgZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogZS5jb2RlKSA9PT0gJ2F1dGgvbXVsdGktZmFjdG9yLWF1dGgtcmVxdWlyZWQnKSB7XHJcbiAgICAgICAgY29uc3QgbWZhRXJyID0gZTtcclxuICAgICAgICBtZmFFcnIucmVzb2x2ZXIgPSBuZXcgTXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBleHAuZ2V0TXVsdGlGYWN0b3JSZXNvbHZlcihhdXRoLCBlKSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIGlmIChyZXNwb25zZSkge1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBjcmVkZW50aWFsRnJvbU9iamVjdChlKTtcclxuICAgICAgICBjb25zdCBjcmVkRXJyID0gZTtcclxuICAgICAgICBpZiAoY3JlZGVudGlhbCkge1xyXG4gICAgICAgICAgICBjcmVkRXJyLmNyZWRlbnRpYWwgPSBjcmVkZW50aWFsO1xyXG4gICAgICAgICAgICBjcmVkRXJyLnRlbmFudElkID0gcmVzcG9uc2UudGVuYW50SWQgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBjcmVkRXJyLmVtYWlsID0gcmVzcG9uc2UuZW1haWwgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICBjcmVkRXJyLnBob25lTnVtYmVyID0gcmVzcG9uc2UucGhvbmVOdW1iZXIgfHwgdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBjcmVkZW50aWFsRnJvbU9iamVjdChvYmplY3QpIHtcclxuICAgIGNvbnN0IHsgX3Rva2VuUmVzcG9uc2UgfSA9IChvYmplY3QgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yID8gb2JqZWN0LmN1c3RvbURhdGEgOiBvYmplY3QpO1xyXG4gICAgaWYgKCFfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG4gICAgLy8gSGFuZGxlIHBob25lIEF1dGggY3JlZGVudGlhbCByZXNwb25zZXMsIGFzIHRoZXkgaGF2ZSBhIGRpZmZlcmVudCBmb3JtYXRcclxuICAgIC8vIGZyb20gb3RoZXIgYmFja2VuZCByZXNwb25zZXMgKGkuZS4gbm8gcHJvdmlkZXJJZCkuIFRoaXMgaXMgYWxzbyBvbmx5IHRoZVxyXG4gICAgLy8gY2FzZSBmb3IgdXNlciBjcmVkZW50aWFscyAoZG9lcyBub3Qgd29yayBmb3IgZXJyb3JzKS5cclxuICAgIGlmICghKG9iamVjdCBpbnN0YW5jZW9mIEZpcmViYXNlRXJyb3IpKSB7XHJcbiAgICAgICAgaWYgKCd0ZW1wb3JhcnlQcm9vZicgaW4gX3Rva2VuUmVzcG9uc2UgJiYgJ3Bob25lTnVtYmVyJyBpbiBfdG9rZW5SZXNwb25zZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZXhwLlBob25lQXV0aFByb3ZpZGVyLmNyZWRlbnRpYWxGcm9tUmVzdWx0KG9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29uc3QgcHJvdmlkZXJJZCA9IF90b2tlblJlc3BvbnNlLnByb3ZpZGVySWQ7XHJcbiAgICAvLyBFbWFpbCBhbmQgcGFzc3dvcmQgaXMgbm90IHN1cHBvcnRlZCBhcyB0aGVyZSBpcyBubyBzaXR1YXRpb24gd2hlcmUgdGhlXHJcbiAgICAvLyBzZXJ2ZXIgd291bGQgcmV0dXJuIHRoZSBwYXNzd29yZCB0byB0aGUgY2xpZW50LlxyXG4gICAgaWYgKCFwcm92aWRlcklkIHx8IHByb3ZpZGVySWQgPT09IGV4cC5Qcm92aWRlcklkLlBBU1NXT1JEKSB7XHJcbiAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICB9XHJcbiAgICBsZXQgcHJvdmlkZXI7XHJcbiAgICBzd2l0Y2ggKHByb3ZpZGVySWQpIHtcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLkdPT0dMRTpcclxuICAgICAgICAgICAgcHJvdmlkZXIgPSBleHAuR29vZ2xlQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBjYXNlIGV4cC5Qcm92aWRlcklkLkZBQ0VCT09LOlxyXG4gICAgICAgICAgICBwcm92aWRlciA9IGV4cC5GYWNlYm9va0F1dGhQcm92aWRlcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBleHAuUHJvdmlkZXJJZC5HSVRIVUI6XHJcbiAgICAgICAgICAgIHByb3ZpZGVyID0gZXhwLkdpdGh1YkF1dGhQcm92aWRlcjtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgY2FzZSBleHAuUHJvdmlkZXJJZC5UV0lUVEVSOlxyXG4gICAgICAgICAgICBwcm92aWRlciA9IGV4cC5Ud2l0dGVyQXV0aFByb3ZpZGVyO1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICBjb25zdCB7IG9hdXRoSWRUb2tlbiwgb2F1dGhBY2Nlc3NUb2tlbiwgb2F1dGhUb2tlblNlY3JldCwgcGVuZGluZ1Rva2VuLCBub25jZSB9ID0gX3Rva2VuUmVzcG9uc2U7XHJcbiAgICAgICAgICAgIGlmICghb2F1dGhBY2Nlc3NUb2tlbiAmJlxyXG4gICAgICAgICAgICAgICAgIW9hdXRoVG9rZW5TZWNyZXQgJiZcclxuICAgICAgICAgICAgICAgICFvYXV0aElkVG9rZW4gJiZcclxuICAgICAgICAgICAgICAgICFwZW5kaW5nVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFRPRE8oYXZvbGtvdmkpOiB1bmNvbW1lbnQgdGhpcyBhbmQgZ2V0IGl0IHdvcmtpbmcgd2l0aCBTQU1MICYgT0lEQ1xyXG4gICAgICAgICAgICBpZiAocGVuZGluZ1Rva2VuKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvdmlkZXJJZC5zdGFydHNXaXRoKCdzYW1sLicpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGV4cC5TQU1MQXV0aENyZWRlbnRpYWwuX2NyZWF0ZShwcm92aWRlcklkLCBwZW5kaW5nVG9rZW4pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gT0lEQyBhbmQgbm9uLWRlZmF1bHQgcHJvdmlkZXJzIGV4Y2x1ZGluZyBUd2l0dGVyLlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBleHAuT0F1dGhDcmVkZW50aWFsLl9mcm9tUGFyYW1zKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2lnbkluTWV0aG9kOiBwcm92aWRlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nVG9rZW4sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkVG9rZW46IG9hdXRoSWRUb2tlbixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9hdXRoQWNjZXNzVG9rZW5cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGV4cC5PQXV0aFByb3ZpZGVyKHByb3ZpZGVySWQpLmNyZWRlbnRpYWwoe1xyXG4gICAgICAgICAgICAgICAgaWRUb2tlbjogb2F1dGhJZFRva2VuLFxyXG4gICAgICAgICAgICAgICAgYWNjZXNzVG9rZW46IG9hdXRoQWNjZXNzVG9rZW4sXHJcbiAgICAgICAgICAgICAgICByYXdOb25jZTogbm9uY2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgRmlyZWJhc2VFcnJvclxyXG4gICAgICAgID8gcHJvdmlkZXIuY3JlZGVudGlhbEZyb21FcnJvcihvYmplY3QpXHJcbiAgICAgICAgOiBwcm92aWRlci5jcmVkZW50aWFsRnJvbVJlc3VsdChvYmplY3QpO1xyXG59XHJcbmZ1bmN0aW9uIGNvbnZlcnRDcmVkZW50aWFsKGF1dGgsIGNyZWRlbnRpYWxQcm9taXNlKSB7XHJcbiAgICByZXR1cm4gY3JlZGVudGlhbFByb21pc2VcclxuICAgICAgICAuY2F0Y2goZSA9PiB7XHJcbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBGaXJlYmFzZUVycm9yKSB7XHJcbiAgICAgICAgICAgIGF0dGFjaEV4dHJhRXJyb3JGaWVsZHMoYXV0aCwgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRocm93IGU7XHJcbiAgICB9KVxyXG4gICAgICAgIC50aGVuKGNyZWRlbnRpYWwgPT4ge1xyXG4gICAgICAgIGNvbnN0IG9wZXJhdGlvblR5cGUgPSBjcmVkZW50aWFsLm9wZXJhdGlvblR5cGU7XHJcbiAgICAgICAgY29uc3QgdXNlciA9IGNyZWRlbnRpYWwudXNlcjtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBvcGVyYXRpb25UeXBlLFxyXG4gICAgICAgICAgICBjcmVkZW50aWFsOiBjcmVkZW50aWFsRnJvbVJlc3BvbnNlKGNyZWRlbnRpYWwpLFxyXG4gICAgICAgICAgICBhZGRpdGlvbmFsVXNlckluZm86IGV4cC5nZXRBZGRpdGlvbmFsVXNlckluZm8oY3JlZGVudGlhbCksXHJcbiAgICAgICAgICAgIHVzZXI6IFVzZXIuZ2V0T3JDcmVhdGUodXNlcilcclxuICAgICAgICB9O1xyXG4gICAgfSk7XHJcbn1cclxuYXN5bmMgZnVuY3Rpb24gY29udmVydENvbmZpcm1hdGlvblJlc3VsdChhdXRoLCBjb25maXJtYXRpb25SZXN1bHRQcm9taXNlKSB7XHJcbiAgICBjb25zdCBjb25maXJtYXRpb25SZXN1bHRFeHAgPSBhd2FpdCBjb25maXJtYXRpb25SZXN1bHRQcm9taXNlO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB2ZXJpZmljYXRpb25JZDogY29uZmlybWF0aW9uUmVzdWx0RXhwLnZlcmlmaWNhdGlvbklkLFxyXG4gICAgICAgIGNvbmZpcm06ICh2ZXJpZmljYXRpb25Db2RlKSA9PiBjb252ZXJ0Q3JlZGVudGlhbChhdXRoLCBjb25maXJtYXRpb25SZXN1bHRFeHAuY29uZmlybSh2ZXJpZmljYXRpb25Db2RlKSlcclxuICAgIH07XHJcbn1cclxuY2xhc3MgTXVsdGlGYWN0b3JSZXNvbHZlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihhdXRoLCByZXNvbHZlcikge1xyXG4gICAgICAgIHRoaXMucmVzb2x2ZXIgPSByZXNvbHZlcjtcclxuICAgICAgICB0aGlzLmF1dGggPSB3cmFwcGVkKGF1dGgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IHNlc3Npb24oKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVzb2x2ZXIuc2Vzc2lvbjtcclxuICAgIH1cclxuICAgIGdldCBoaW50cygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXNvbHZlci5oaW50cztcclxuICAgIH1cclxuICAgIHJlc29sdmVTaWduSW4oYXNzZXJ0aW9uKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHVud3JhcCh0aGlzLmF1dGgpLCB0aGlzLnJlc29sdmVyLnJlc29sdmVTaWduSW4oYXNzZXJ0aW9uKSk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgVXNlciB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLm11bHRpRmFjdG9yID0gZXhwLm11bHRpRmFjdG9yKF9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZ2V0T3JDcmVhdGUodXNlcikge1xyXG4gICAgICAgIGlmICghVXNlci5VU0VSX01BUC5oYXModXNlcikpIHtcclxuICAgICAgICAgICAgVXNlci5VU0VSX01BUC5zZXQodXNlciwgbmV3IFVzZXIodXNlcikpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXNlci5VU0VSX01BUC5nZXQodXNlcik7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRlbGV0ZSgpO1xyXG4gICAgfVxyXG4gICAgcmVsb2FkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5yZWxvYWQoKTtcclxuICAgIH1cclxuICAgIHRvSlNPTigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudG9KU09OKCk7XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5nZXRJZFRva2VuUmVzdWx0KGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICBnZXRJZFRva2VuKGZvcmNlUmVmcmVzaCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5nZXRJZFRva2VuKGZvcmNlUmVmcmVzaCk7XHJcbiAgICB9XHJcbiAgICBsaW5rQW5kUmV0cmlldmVEYXRhV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxpbmtXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxpbmtXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoQ3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgY3JlZGVudGlhbCkpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgbGlua1dpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lTnVtYmVyLCBhcHBsaWNhdGlvblZlcmlmaWVyKSk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBsaW5rV2l0aFBvcHVwKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuYXV0aCwgZXhwLmxpbmtXaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIGxpbmtXaXRoUmVkaXJlY3QocHJvdmlkZXIpIHtcclxuICAgICAgICBhd2FpdCBfc2F2ZVBlcnNpc3RlbmNlRm9yUmVkaXJlY3QoZXhwLl9jYXN0QXV0aCh0aGlzLmF1dGgpKTtcclxuICAgICAgICByZXR1cm4gZXhwLmxpbmtXaXRoUmVkaXJlY3QodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpO1xyXG4gICAgfVxyXG4gICAgcmVhdXRoZW50aWNhdGVBbmRSZXRyaWV2ZURhdGFXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhdXRoZW50aWNhdGVXaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlYXV0aGVudGljYXRlV2l0aENyZWRlbnRpYWwoY3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLmF1dGgsIGV4cC5yZWF1dGhlbnRpY2F0ZVdpdGhDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICByZWF1dGhlbnRpY2F0ZVdpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuYXV0aCwgZXhwLnJlYXV0aGVudGljYXRlV2l0aFBob25lTnVtYmVyKHRoaXMuX2RlbGVnYXRlLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgcmVhdXRoZW50aWNhdGVXaXRoUG9wdXAocHJvdmlkZXIpIHtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5hdXRoLCBleHAucmVhdXRoZW50aWNhdGVXaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHJlYXV0aGVudGljYXRlV2l0aFJlZGlyZWN0KHByb3ZpZGVyKSB7XHJcbiAgICAgICAgYXdhaXQgX3NhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KGV4cC5fY2FzdEF1dGgodGhpcy5hdXRoKSk7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5yZWF1dGhlbnRpY2F0ZVdpdGhSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICB9XHJcbiAgICBzZW5kRW1haWxWZXJpZmljYXRpb24oYWN0aW9uQ29kZVNldHRpbmdzKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5zZW5kRW1haWxWZXJpZmljYXRpb24odGhpcy5fZGVsZWdhdGUsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBhc3luYyB1bmxpbmsocHJvdmlkZXJJZCkge1xyXG4gICAgICAgIGF3YWl0IGV4cC51bmxpbmsodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVySWQpO1xyXG4gICAgICAgIHJldHVybiB0aGlzO1xyXG4gICAgfVxyXG4gICAgdXBkYXRlRW1haWwobmV3RW1haWwpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnVwZGF0ZUVtYWlsKHRoaXMuX2RlbGVnYXRlLCBuZXdFbWFpbCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQYXNzd29yZChuZXdQYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlUGFzc3dvcmQodGhpcy5fZGVsZWdhdGUsIG5ld1Bhc3N3b3JkKTtcclxuICAgIH1cclxuICAgIHVwZGF0ZVBob25lTnVtYmVyKHBob25lQ3JlZGVudGlhbCkge1xyXG4gICAgICAgIHJldHVybiBleHAudXBkYXRlUGhvbmVOdW1iZXIodGhpcy5fZGVsZWdhdGUsIHBob25lQ3JlZGVudGlhbCk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVQcm9maWxlKHByb2ZpbGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnVwZGF0ZVByb2ZpbGUodGhpcy5fZGVsZWdhdGUsIHByb2ZpbGUpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwobmV3RW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncykge1xyXG4gICAgICAgIHJldHVybiBleHAudmVyaWZ5QmVmb3JlVXBkYXRlRW1haWwodGhpcy5fZGVsZWdhdGUsIG5ld0VtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtYWlsVmVyaWZpZWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmVtYWlsVmVyaWZpZWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgaXNBbm9ueW1vdXMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlzQW5vbnltb3VzO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBwaG9uZU51bWJlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGhvbmVOdW1iZXI7XHJcbiAgICB9XHJcbiAgICBnZXQgcHJvdmlkZXJEYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5wcm92aWRlckRhdGE7XHJcbiAgICB9XHJcbiAgICBnZXQgcmVmcmVzaFRva2VuKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5yZWZyZXNoVG9rZW47XHJcbiAgICB9XHJcbiAgICBnZXQgdGVuYW50SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgZ2V0IGRpc3BsYXlOYW1lKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5kaXNwbGF5TmFtZTtcclxuICAgIH1cclxuICAgIGdldCBlbWFpbCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZW1haWw7XHJcbiAgICB9XHJcbiAgICBnZXQgcGhvdG9VUkwoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnBob3RvVVJMO1xyXG4gICAgfVxyXG4gICAgZ2V0IHByb3ZpZGVySWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnByb3ZpZGVySWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgdWlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS51aWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgYXV0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuYXV0aDtcclxuICAgIH1cclxufVxyXG4vLyBNYWludGFpbiBhIG1hcCBzbyB0aGF0IHRoZXJlJ3MgYWx3YXlzIGEgMToxIG1hcHBpbmcgYmV0d2VlbiBuZXcgVXNlciBhbmRcclxuLy8gbGVnYWN5IGNvbXBhdCB1c2Vyc1xyXG5Vc2VyLlVTRVJfTUFQID0gbmV3IFdlYWtNYXAoKTtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX2Fzc2VydCQxID0gZXhwLl9hc3NlcnQ7XHJcbmNsYXNzIEF1dGgge1xyXG4gICAgY29uc3RydWN0b3IoYXBwLCBwcm92aWRlcikge1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIGlmIChwcm92aWRlci5pc0luaXRpYWxpemVkKCkpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBwcm92aWRlci5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICAgICAgdGhpcy5saW5rVW5kZXJseWluZ0F1dGgoKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCB7IGFwaUtleSB9ID0gYXBwLm9wdGlvbnM7XHJcbiAgICAgICAgLy8gVE9ETzogcGxhdGZvcm0gbmVlZHMgdG8gYmUgZGV0ZXJtaW5lZCB1c2luZyBoZXVyaXN0aWNzXHJcbiAgICAgICAgX2Fzc2VydCQxKGFwaUtleSwgXCJpbnZhbGlkLWFwaS1rZXlcIiAvKiBleHAuQXV0aEVycm9yQ29kZS5JTlZBTElEX0FQSV9LRVkgKi8sIHtcclxuICAgICAgICAgICAgYXBwTmFtZTogYXBwLm5hbWVcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBUT0RPOiBwbGF0Zm9ybSBuZWVkcyB0byBiZSBkZXRlcm1pbmVkIHVzaW5nIGhldXJpc3RpY3NcclxuICAgICAgICBfYXNzZXJ0JDEoYXBpS2V5LCBcImludmFsaWQtYXBpLWtleVwiIC8qIGV4cC5BdXRoRXJyb3JDb2RlLklOVkFMSURfQVBJX0tFWSAqLywge1xyXG4gICAgICAgICAgICBhcHBOYW1lOiBhcHAubmFtZVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIE9ubHkgdXNlIGEgcG9wdXAvcmVkaXJlY3QgcmVzb2x2ZXIgaW4gYnJvd3NlciBlbnZpcm9ubWVudHNcclxuICAgICAgICBjb25zdCByZXNvbHZlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gQ29tcGF0UG9wdXBSZWRpcmVjdFJlc29sdmVyIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gcHJvdmlkZXIuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgIHBlcnNpc3RlbmNlOiBidWlsZFBlcnNpc3RlbmNlSGllcmFyY2h5KGFwaUtleSwgYXBwLm5hbWUpLFxyXG4gICAgICAgICAgICAgICAgcG9wdXBSZWRpcmVjdFJlc29sdmVyOiByZXNvbHZlclxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuX3VwZGF0ZUVycm9yTWFwKGV4cC5kZWJ1Z0Vycm9yTWFwKTtcclxuICAgICAgICB0aGlzLmxpbmtVbmRlcmx5aW5nQXV0aCgpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtdWxhdG9yQ29uZmlnKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbXVsYXRvckNvbmZpZztcclxuICAgIH1cclxuICAgIGdldCBjdXJyZW50VXNlcigpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2RlbGVnYXRlLmN1cnJlbnRVc2VyKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gVXNlci5nZXRPckNyZWF0ZSh0aGlzLl9kZWxlZ2F0ZS5jdXJyZW50VXNlcik7XHJcbiAgICB9XHJcbiAgICBnZXQgbGFuZ3VhZ2VDb2RlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5sYW5ndWFnZUNvZGU7XHJcbiAgICB9XHJcbiAgICBzZXQgbGFuZ3VhZ2VDb2RlKGxhbmd1YWdlQ29kZSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmxhbmd1YWdlQ29kZSA9IGxhbmd1YWdlQ29kZTtcclxuICAgIH1cclxuICAgIGdldCBzZXR0aW5ncygpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuc2V0dGluZ3M7XHJcbiAgICB9XHJcbiAgICBnZXQgdGVuYW50SWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkO1xyXG4gICAgfVxyXG4gICAgc2V0IHRlbmFudElkKHRpZCkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLnRlbmFudElkID0gdGlkO1xyXG4gICAgfVxyXG4gICAgdXNlRGV2aWNlTGFuZ3VhZ2UoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUudXNlRGV2aWNlTGFuZ3VhZ2UoKTtcclxuICAgIH1cclxuICAgIHNpZ25PdXQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnNpZ25PdXQoKTtcclxuICAgIH1cclxuICAgIHVzZUVtdWxhdG9yKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIGV4cC5jb25uZWN0QXV0aEVtdWxhdG9yKHRoaXMuX2RlbGVnYXRlLCB1cmwsIG9wdGlvbnMpO1xyXG4gICAgfVxyXG4gICAgYXBwbHlBY3Rpb25Db2RlKGNvZGUpIHtcclxuICAgICAgICByZXR1cm4gZXhwLmFwcGx5QWN0aW9uQ29kZSh0aGlzLl9kZWxlZ2F0ZSwgY29kZSk7XHJcbiAgICB9XHJcbiAgICBjaGVja0FjdGlvbkNvZGUoY29kZSkge1xyXG4gICAgICAgIHJldHVybiBleHAuY2hlY2tBY3Rpb25Db2RlKHRoaXMuX2RlbGVnYXRlLCBjb2RlKTtcclxuICAgIH1cclxuICAgIGNvbmZpcm1QYXNzd29yZFJlc2V0KGNvZGUsIG5ld1Bhc3N3b3JkKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5jb25maXJtUGFzc3dvcmRSZXNldCh0aGlzLl9kZWxlZ2F0ZSwgY29kZSwgbmV3UGFzc3dvcmQpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgY3JlYXRlVXNlcldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLmNyZWF0ZVVzZXJXaXRoRW1haWxBbmRQYXNzd29yZCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIHBhc3N3b3JkKSk7XHJcbiAgICB9XHJcbiAgICBmZXRjaFByb3ZpZGVyc0ZvckVtYWlsKGVtYWlsKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoZW1haWwpO1xyXG4gICAgfVxyXG4gICAgZmV0Y2hTaWduSW5NZXRob2RzRm9yRW1haWwoZW1haWwpIHtcclxuICAgICAgICByZXR1cm4gZXhwLmZldGNoU2lnbkluTWV0aG9kc0ZvckVtYWlsKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCk7XHJcbiAgICB9XHJcbiAgICBpc1NpZ25JbldpdGhFbWFpbExpbmsoZW1haWxMaW5rKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5pc1NpZ25JbldpdGhFbWFpbExpbmsodGhpcy5fZGVsZWdhdGUsIGVtYWlsTGluayk7XHJcbiAgICB9XHJcbiAgICBhc3luYyBnZXRSZWRpcmVjdFJlc3VsdCgpIHtcclxuICAgICAgICBfYXNzZXJ0JDEoX2lzUG9wdXBSZWRpcmVjdFN1cHBvcnRlZCgpLCB0aGlzLl9kZWxlZ2F0ZSwgXCJvcGVyYXRpb24tbm90LXN1cHBvcnRlZC1pbi10aGlzLWVudmlyb25tZW50XCIgLyogZXhwLkF1dGhFcnJvckNvZGUuT1BFUkFUSU9OX05PVF9TVVBQT1JURUQgKi8pO1xyXG4gICAgICAgIGNvbnN0IGNyZWRlbnRpYWwgPSBhd2FpdCBleHAuZ2V0UmVkaXJlY3RSZXN1bHQodGhpcy5fZGVsZWdhdGUsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICAgICAgaWYgKCFjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBjcmVkZW50aWFsOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgdXNlcjogbnVsbFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIFByb21pc2UucmVzb2x2ZShjcmVkZW50aWFsKSk7XHJcbiAgICB9XHJcbiAgICAvLyBUaGlzIGZ1bmN0aW9uIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBieSBmcmFtZXdvcmtzIChlLmcuIEZpcmViYXNlVUktd2ViKSB0byBsb2cgdGhlaXIgdXNhZ2UuXHJcbiAgICAvLyBJdCBpcyBub3QgaW50ZW5kZWQgZm9yIGRpcmVjdCB1c2UgYnkgZGV2ZWxvcGVyIGFwcHMuIE5PIGpzZG9jIGhlcmUgdG8gaW50ZW50aW9uYWxseSBsZWF2ZSBpdFxyXG4gICAgLy8gb3V0IG9mIGF1dG9nZW5lcmF0ZWQgZG9jdW1lbnRhdGlvbiBwYWdlcyB0byByZWR1Y2UgYWNjaWRlbnRhbCBtaXN1c2UuXHJcbiAgICBhZGRGcmFtZXdvcmtGb3JMb2dnaW5nKGZyYW1ld29yaykge1xyXG4gICAgICAgIGV4cC5hZGRGcmFtZXdvcmtGb3JMb2dnaW5nKHRoaXMuX2RlbGVnYXRlLCBmcmFtZXdvcmspO1xyXG4gICAgfVxyXG4gICAgb25BdXRoU3RhdGVDaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvckZuLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBjb25zdCB7IG5leHQsIGVycm9yLCBjb21wbGV0ZSB9ID0gd3JhcE9ic2VydmVycyhuZXh0T3JPYnNlcnZlciwgZXJyb3JGbiwgY29tcGxldGVkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub25BdXRoU3RhdGVDaGFuZ2VkKG5leHQsIGVycm9yLCBjb21wbGV0ZSk7XHJcbiAgICB9XHJcbiAgICBvbklkVG9rZW5DaGFuZ2VkKG5leHRPck9ic2VydmVyLCBlcnJvckZuLCBjb21wbGV0ZWQpIHtcclxuICAgICAgICBjb25zdCB7IG5leHQsIGVycm9yLCBjb21wbGV0ZSB9ID0gd3JhcE9ic2VydmVycyhuZXh0T3JPYnNlcnZlciwgZXJyb3JGbiwgY29tcGxldGVkKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub25JZFRva2VuQ2hhbmdlZChuZXh0LCBlcnJvciwgY29tcGxldGUpO1xyXG4gICAgfVxyXG4gICAgc2VuZFNpZ25JbkxpbmtUb0VtYWlsKGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnNlbmRTaWduSW5MaW5rVG9FbWFpbCh0aGlzLl9kZWxlZ2F0ZSwgZW1haWwsIGFjdGlvbkNvZGVTZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICBzZW5kUGFzc3dvcmRSZXNldEVtYWlsKGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MpIHtcclxuICAgICAgICByZXR1cm4gZXhwLnNlbmRQYXNzd29yZFJlc2V0RW1haWwodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBhY3Rpb25Db2RlU2V0dGluZ3MgfHwgdW5kZWZpbmVkKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNldFBlcnNpc3RlbmNlKHBlcnNpc3RlbmNlKSB7XHJcbiAgICAgICAgX3ZhbGlkYXRlUGVyc2lzdGVuY2VBcmd1bWVudCh0aGlzLl9kZWxlZ2F0ZSwgcGVyc2lzdGVuY2UpO1xyXG4gICAgICAgIGxldCBjb252ZXJ0ZWQ7XHJcbiAgICAgICAgc3dpdGNoIChwZXJzaXN0ZW5jZSkge1xyXG4gICAgICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLlNFU1NJT046XHJcbiAgICAgICAgICAgICAgICBjb252ZXJ0ZWQgPSBleHAuYnJvd3NlclNlc3Npb25QZXJzaXN0ZW5jZTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFBlcnNpc3RlbmNlLkxPQ0FMOlxyXG4gICAgICAgICAgICAgICAgLy8gTm90IHVzaW5nIGlzSW5kZXhlZERCQXZhaWxhYmxlKCkgc2luY2UgaXQgb25seSBjaGVja3MgaWYgaW5kZXhlZERCIGlzIGRlZmluZWQuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBpc0luZGV4ZWREQkZ1bGx5U3VwcG9ydGVkID0gYXdhaXQgZXhwXHJcbiAgICAgICAgICAgICAgICAgICAgLl9nZXRJbnN0YW5jZShleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZSlcclxuICAgICAgICAgICAgICAgICAgICAuX2lzQXZhaWxhYmxlKCk7XHJcbiAgICAgICAgICAgICAgICBjb252ZXJ0ZWQgPSBpc0luZGV4ZWREQkZ1bGx5U3VwcG9ydGVkXHJcbiAgICAgICAgICAgICAgICAgICAgPyBleHAuaW5kZXhlZERCTG9jYWxQZXJzaXN0ZW5jZVxyXG4gICAgICAgICAgICAgICAgICAgIDogZXhwLmJyb3dzZXJMb2NhbFBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgUGVyc2lzdGVuY2UuTk9ORTpcclxuICAgICAgICAgICAgICAgIGNvbnZlcnRlZCA9IGV4cC5pbk1lbW9yeVBlcnNpc3RlbmNlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZXhwLl9mYWlsKFwiYXJndW1lbnQtZXJyb3JcIiAvKiBleHAuQXV0aEVycm9yQ29kZS5BUkdVTUVOVF9FUlJPUiAqLywge1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcE5hbWU6IHRoaXMuX2RlbGVnYXRlLm5hbWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuc2V0UGVyc2lzdGVuY2UoY29udmVydGVkKTtcclxuICAgIH1cclxuICAgIHNpZ25JbkFuZFJldHJpZXZlRGF0YVdpdGhDcmVkZW50aWFsKGNyZWRlbnRpYWwpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKTtcclxuICAgIH1cclxuICAgIHNpZ25JbkFub255bW91c2x5KCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbkFub255bW91c2x5KHRoaXMuX2RlbGVnYXRlKSk7XHJcbiAgICB9XHJcbiAgICBzaWduSW5XaXRoQ3JlZGVudGlhbChjcmVkZW50aWFsKSB7XHJcbiAgICAgICAgcmV0dXJuIGNvbnZlcnRDcmVkZW50aWFsKHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGNyZWRlbnRpYWwpKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhDdXN0b21Ub2tlbih0b2tlbikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhDdXN0b21Ub2tlbih0aGlzLl9kZWxlZ2F0ZSwgdG9rZW4pKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKGVtYWlsLCBwYXNzd29yZCkge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhFbWFpbEFuZFBhc3N3b3JkKHRoaXMuX2RlbGVnYXRlLCBlbWFpbCwgcGFzc3dvcmQpKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhFbWFpbExpbmsoZW1haWwsIGVtYWlsTGluaykge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q3JlZGVudGlhbCh0aGlzLl9kZWxlZ2F0ZSwgZXhwLnNpZ25JbldpdGhFbWFpbExpbmsodGhpcy5fZGVsZWdhdGUsIGVtYWlsLCBlbWFpbExpbmspKTtcclxuICAgIH1cclxuICAgIHNpZ25JbldpdGhQaG9uZU51bWJlcihwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikge1xyXG4gICAgICAgIHJldHVybiBjb252ZXJ0Q29uZmlybWF0aW9uUmVzdWx0KHRoaXMuX2RlbGVnYXRlLCBleHAuc2lnbkluV2l0aFBob25lTnVtYmVyKHRoaXMuX2RlbGVnYXRlLCBwaG9uZU51bWJlciwgYXBwbGljYXRpb25WZXJpZmllcikpO1xyXG4gICAgfVxyXG4gICAgYXN5bmMgc2lnbkluV2l0aFBvcHVwKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgX2Fzc2VydCQxKF9pc1BvcHVwUmVkaXJlY3RTdXBwb3J0ZWQoKSwgdGhpcy5fZGVsZWdhdGUsIFwib3BlcmF0aW9uLW5vdC1zdXBwb3J0ZWQtaW4tdGhpcy1lbnZpcm9ubWVudFwiIC8qIGV4cC5BdXRoRXJyb3JDb2RlLk9QRVJBVElPTl9OT1RfU1VQUE9SVEVEICovKTtcclxuICAgICAgICByZXR1cm4gY29udmVydENyZWRlbnRpYWwodGhpcy5fZGVsZWdhdGUsIGV4cC5zaWduSW5XaXRoUG9wdXAodGhpcy5fZGVsZWdhdGUsIHByb3ZpZGVyLCBDb21wYXRQb3B1cFJlZGlyZWN0UmVzb2x2ZXIpKTtcclxuICAgIH1cclxuICAgIGFzeW5jIHNpZ25JbldpdGhSZWRpcmVjdChwcm92aWRlcikge1xyXG4gICAgICAgIF9hc3NlcnQkMShfaXNQb3B1cFJlZGlyZWN0U3VwcG9ydGVkKCksIHRoaXMuX2RlbGVnYXRlLCBcIm9wZXJhdGlvbi1ub3Qtc3VwcG9ydGVkLWluLXRoaXMtZW52aXJvbm1lbnRcIiAvKiBleHAuQXV0aEVycm9yQ29kZS5PUEVSQVRJT05fTk9UX1NVUFBPUlRFRCAqLyk7XHJcbiAgICAgICAgYXdhaXQgX3NhdmVQZXJzaXN0ZW5jZUZvclJlZGlyZWN0KHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICByZXR1cm4gZXhwLnNpZ25JbldpdGhSZWRpcmVjdCh0aGlzLl9kZWxlZ2F0ZSwgcHJvdmlkZXIsIENvbXBhdFBvcHVwUmVkaXJlY3RSZXNvbHZlcik7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVDdXJyZW50VXNlcih1c2VyKSB7XHJcbiAgICAgICAgLy8gcmVtb3ZlIHRzLWlnbm9yZSBvbmNlIG92ZXJsb2FkcyBhcmUgZGVmaW5lZCBmb3IgZXhwIGZ1bmN0aW9ucyB0byBhY2NlcHQgY29tcGF0IG9iamVjdHNcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnVwZGF0ZUN1cnJlbnRVc2VyKHVzZXIpO1xyXG4gICAgfVxyXG4gICAgdmVyaWZ5UGFzc3dvcmRSZXNldENvZGUoY29kZSkge1xyXG4gICAgICAgIHJldHVybiBleHAudmVyaWZ5UGFzc3dvcmRSZXNldENvZGUodGhpcy5fZGVsZWdhdGUsIGNvZGUpO1xyXG4gICAgfVxyXG4gICAgdW53cmFwKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIF9kZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLl9kZWxldGUoKTtcclxuICAgIH1cclxuICAgIGxpbmtVbmRlcmx5aW5nQXV0aCgpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS53cmFwcGVkID0gKCkgPT4gdGhpcztcclxuICAgIH1cclxufVxyXG5BdXRoLlBlcnNpc3RlbmNlID0gUGVyc2lzdGVuY2U7XHJcbmZ1bmN0aW9uIHdyYXBPYnNlcnZlcnMobmV4dE9yT2JzZXJ2ZXIsIGVycm9yLCBjb21wbGV0ZSkge1xyXG4gICAgbGV0IG5leHQgPSBuZXh0T3JPYnNlcnZlcjtcclxuICAgIGlmICh0eXBlb2YgbmV4dE9yT2JzZXJ2ZXIgIT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAoeyBuZXh0LCBlcnJvciwgY29tcGxldGUgfSA9IG5leHRPck9ic2VydmVyKTtcclxuICAgIH1cclxuICAgIC8vIFdlIGtub3cgJ25leHQnIGlzIG5vdyBhIGZ1bmN0aW9uXHJcbiAgICBjb25zdCBvbGROZXh0ID0gbmV4dDtcclxuICAgIGNvbnN0IG5ld05leHQgPSAodXNlcikgPT4gb2xkTmV4dCh1c2VyICYmIFVzZXIuZ2V0T3JDcmVhdGUodXNlcikpO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBuZXh0OiBuZXdOZXh0LFxyXG4gICAgICAgIGVycm9yOiBlcnJvcixcclxuICAgICAgICBjb21wbGV0ZVxyXG4gICAgfTtcclxufVxyXG5mdW5jdGlvbiBidWlsZFBlcnNpc3RlbmNlSGllcmFyY2h5KGFwaUtleSwgYXBwTmFtZSkge1xyXG4gICAgLy8gTm90ZSB0aGlzIGlzIHNsaWdodGx5IGRpZmZlcmVudCBiZWhhdmlvcjogaW4gdGhpcyBjYXNlLCB0aGUgc3RvcmVkXHJcbiAgICAvLyBwZXJzaXN0ZW5jZSBpcyBjaGVja2VkICpmaXJzdCogcmF0aGVyIHRoYW4gbGFzdC4gVGhpcyBpcyBiZWNhdXNlIHdlIHdhbnRcclxuICAgIC8vIHRvIHByZWZlciBzdG9yZWQgcGVyc2lzdGVuY2UgdHlwZSBpbiB0aGUgaGllcmFyY2h5LiBUaGlzIGlzIGFuIGVtcHR5XHJcbiAgICAvLyBhcnJheSBpZiB3aW5kb3cgaXMgbm90IGF2YWlsYWJsZSBvciB0aGVyZSBpcyBubyBwZW5kaW5nIHJlZGlyZWN0XHJcbiAgICBjb25zdCBwZXJzaXN0ZW5jZXMgPSBfZ2V0UGVyc2lzdGVuY2VzRnJvbVJlZGlyZWN0KGFwaUtleSwgYXBwTmFtZSk7XHJcbiAgICAvLyBJZiBcInNlbGZcIiBpcyBhdmFpbGFibGUsIGFkZCBpbmRleGVkREJcclxuICAgIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgJiZcclxuICAgICAgICAhcGVyc2lzdGVuY2VzLmluY2x1ZGVzKGV4cC5pbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlKSkge1xyXG4gICAgICAgIHBlcnNpc3RlbmNlcy5wdXNoKGV4cC5pbmRleGVkREJMb2NhbFBlcnNpc3RlbmNlKTtcclxuICAgIH1cclxuICAgIC8vIElmIFwid2luZG93XCIgaXMgYXZhaWxhYmxlLCBhZGQgSFRNTCBTdG9yYWdlIHBlcnNpc3RlbmNlc1xyXG4gICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBwZXJzaXN0ZW5jZSBvZiBbXHJcbiAgICAgICAgICAgIGV4cC5icm93c2VyTG9jYWxQZXJzaXN0ZW5jZSxcclxuICAgICAgICAgICAgZXhwLmJyb3dzZXJTZXNzaW9uUGVyc2lzdGVuY2VcclxuICAgICAgICBdKSB7XHJcbiAgICAgICAgICAgIGlmICghcGVyc2lzdGVuY2VzLmluY2x1ZGVzKHBlcnNpc3RlbmNlKSkge1xyXG4gICAgICAgICAgICAgICAgcGVyc2lzdGVuY2VzLnB1c2gocGVyc2lzdGVuY2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gQWRkIGluLW1lbW9yeSBhcyBhIGZpbmFsIGZhbGxiYWNrXHJcbiAgICBpZiAoIXBlcnNpc3RlbmNlcy5pbmNsdWRlcyhleHAuaW5NZW1vcnlQZXJzaXN0ZW5jZSkpIHtcclxuICAgICAgICBwZXJzaXN0ZW5jZXMucHVzaChleHAuaW5NZW1vcnlQZXJzaXN0ZW5jZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gcGVyc2lzdGVuY2VzO1xyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNsYXNzIFBob25lQXV0aFByb3ZpZGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHRoaXMucHJvdmlkZXJJZCA9ICdwaG9uZSc7XHJcbiAgICAgICAgLy8gVE9ETzogcmVtb3ZlIHRzLWlnbm9yZSB3aGVuIG1vdmluZyB0eXBlcyBmcm9tIGF1dGgtdHlwZXMgdG8gYXV0aC1jb21wYXRcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBuZXcgZXhwLlBob25lQXV0aFByb3ZpZGVyKHVud3JhcChmaXJlYmFzZS5hdXRoKCkpKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBjcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKSB7XHJcbiAgICAgICAgcmV0dXJuIGV4cC5QaG9uZUF1dGhQcm92aWRlci5jcmVkZW50aWFsKHZlcmlmaWNhdGlvbklkLCB2ZXJpZmljYXRpb25Db2RlKTtcclxuICAgIH1cclxuICAgIHZlcmlmeVBob25lTnVtYmVyKHBob25lSW5mb09wdGlvbnMsIGFwcGxpY2F0aW9uVmVyaWZpZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudmVyaWZ5UGhvbmVOdW1iZXIoXHJcbiAgICAgICAgLy8gVGhlIGltcGxlbWVudGF0aW9uIG1hdGNoZXMgYnV0IHRoZSB0eXBlcyBhcmUgc3VidGx5IGluY29tcGF0aWJsZVxyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICAgICAgcGhvbmVJbmZvT3B0aW9ucywgYXBwbGljYXRpb25WZXJpZmllcik7XHJcbiAgICB9XHJcbiAgICB1bndyYXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlO1xyXG4gICAgfVxyXG59XHJcblBob25lQXV0aFByb3ZpZGVyLlBIT05FX1NJR05fSU5fTUVUSE9EID0gZXhwLlBob25lQXV0aFByb3ZpZGVyLlBIT05FX1NJR05fSU5fTUVUSE9EO1xyXG5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRCA9IGV4cC5QaG9uZUF1dGhQcm92aWRlci5QUk9WSURFUl9JRDtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY29uc3QgX2Fzc2VydCA9IGV4cC5fYXNzZXJ0O1xyXG5jbGFzcyBSZWNhcHRjaGFWZXJpZmllciB7XHJcbiAgICBjb25zdHJ1Y3Rvcihjb250YWluZXIsIHBhcmFtZXRlcnMsIGFwcCA9IGZpcmViYXNlLmFwcCgpKSB7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIC8vIEFQSSBrZXkgaXMgcmVxdWlyZWQgZm9yIHdlYiBjbGllbnQgUlBDIGNhbGxzLlxyXG4gICAgICAgIF9hc3NlcnQoKF9hID0gYXBwLm9wdGlvbnMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5hcGlLZXksIFwiaW52YWxpZC1hcGkta2V5XCIgLyogZXhwLkF1dGhFcnJvckNvZGUuSU5WQUxJRF9BUElfS0VZICovLCB7XHJcbiAgICAgICAgICAgIGFwcE5hbWU6IGFwcC5uYW1lXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBuZXcgZXhwLlJlY2FwdGNoYVZlcmlmaWVyKGNvbnRhaW5lciwgXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcclxuICAgICAgICBwYXJhbWV0ZXJzLCBcclxuICAgICAgICAvLyBUT0RPOiByZW1vdmUgdHMtaWdub3JlIHdoZW4gbW92aW5nIHR5cGVzIGZyb20gYXV0aC10eXBlcyB0byBhdXRoLWNvbXBhdFxyXG4gICAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgICAgICBhcHAuYXV0aCgpKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0aGlzLl9kZWxlZ2F0ZS50eXBlO1xyXG4gICAgfVxyXG4gICAgY2xlYXIoKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUuY2xlYXIoKTtcclxuICAgIH1cclxuICAgIHJlbmRlcigpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucmVuZGVyKCk7XHJcbiAgICB9XHJcbiAgICB2ZXJpZnkoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnZlcmlmeSgpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMCBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IEFVVEhfVFlQRSA9ICdhdXRoLWNvbXBhdCc7XHJcbi8vIENyZWF0ZSBhdXRoIGNvbXBvbmVudHMgdG8gcmVnaXN0ZXIgd2l0aCBmaXJlYmFzZS5cclxuLy8gUHJvdmlkZXMgQXV0aCBwdWJsaWMgQVBJcy5cclxuZnVuY3Rpb24gcmVnaXN0ZXJBdXRoQ29tcGF0KGluc3RhbmNlKSB7XHJcbiAgICBpbnN0YW5jZS5JTlRFUk5BTC5yZWdpc3RlckNvbXBvbmVudChuZXcgQ29tcG9uZW50KEFVVEhfVFlQRSwgY29udGFpbmVyID0+IHtcclxuICAgICAgICAvLyBnZXRJbW1lZGlhdGUgZm9yIEZpcmViYXNlQXBwIHdpbGwgYWx3YXlzIHN1Y2NlZWRcclxuICAgICAgICBjb25zdCBhcHAgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2FwcC1jb21wYXQnKS5nZXRJbW1lZGlhdGUoKTtcclxuICAgICAgICBjb25zdCBhdXRoUHJvdmlkZXIgPSBjb250YWluZXIuZ2V0UHJvdmlkZXIoJ2F1dGgnKTtcclxuICAgICAgICByZXR1cm4gbmV3IEF1dGgoYXBwLCBhdXRoUHJvdmlkZXIpO1xyXG4gICAgfSwgXCJQVUJMSUNcIiAvKiBDb21wb25lbnRUeXBlLlBVQkxJQyAqLylcclxuICAgICAgICAuc2V0U2VydmljZVByb3BzKHtcclxuICAgICAgICBBY3Rpb25Db2RlSW5mbzoge1xyXG4gICAgICAgICAgICBPcGVyYXRpb246IHtcclxuICAgICAgICAgICAgICAgIEVNQUlMX1NJR05JTjogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uRU1BSUxfU0lHTklOLFxyXG4gICAgICAgICAgICAgICAgUEFTU1dPUkRfUkVTRVQ6IGV4cC5BY3Rpb25Db2RlT3BlcmF0aW9uLlBBU1NXT1JEX1JFU0VULFxyXG4gICAgICAgICAgICAgICAgUkVDT1ZFUl9FTUFJTDogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uUkVDT1ZFUl9FTUFJTCxcclxuICAgICAgICAgICAgICAgIFJFVkVSVF9TRUNPTkRfRkFDVE9SX0FERElUSU9OOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5SRVZFUlRfU0VDT05EX0ZBQ1RPUl9BRERJVElPTixcclxuICAgICAgICAgICAgICAgIFZFUklGWV9BTkRfQ0hBTkdFX0VNQUlMOiBleHAuQWN0aW9uQ29kZU9wZXJhdGlvbi5WRVJJRllfQU5EX0NIQU5HRV9FTUFJTCxcclxuICAgICAgICAgICAgICAgIFZFUklGWV9FTUFJTDogZXhwLkFjdGlvbkNvZGVPcGVyYXRpb24uVkVSSUZZX0VNQUlMXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIEVtYWlsQXV0aFByb3ZpZGVyOiBleHAuRW1haWxBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgRmFjZWJvb2tBdXRoUHJvdmlkZXI6IGV4cC5GYWNlYm9va0F1dGhQcm92aWRlcixcclxuICAgICAgICBHaXRodWJBdXRoUHJvdmlkZXI6IGV4cC5HaXRodWJBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgR29vZ2xlQXV0aFByb3ZpZGVyOiBleHAuR29vZ2xlQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIE9BdXRoUHJvdmlkZXI6IGV4cC5PQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIFNBTUxBdXRoUHJvdmlkZXI6IGV4cC5TQU1MQXV0aFByb3ZpZGVyLFxyXG4gICAgICAgIFBob25lQXV0aFByb3ZpZGVyOiBQaG9uZUF1dGhQcm92aWRlcixcclxuICAgICAgICBQaG9uZU11bHRpRmFjdG9yR2VuZXJhdG9yOiBleHAuUGhvbmVNdWx0aUZhY3RvckdlbmVyYXRvcixcclxuICAgICAgICBSZWNhcHRjaGFWZXJpZmllcjogUmVjYXB0Y2hhVmVyaWZpZXIsXHJcbiAgICAgICAgVHdpdHRlckF1dGhQcm92aWRlcjogZXhwLlR3aXR0ZXJBdXRoUHJvdmlkZXIsXHJcbiAgICAgICAgQXV0aCxcclxuICAgICAgICBBdXRoQ3JlZGVudGlhbDogZXhwLkF1dGhDcmVkZW50aWFsLFxyXG4gICAgICAgIEVycm9yOiBGaXJlYmFzZUVycm9yXHJcbiAgICB9KVxyXG4gICAgICAgIC5zZXRJbnN0YW50aWF0aW9uTW9kZShcIkxBWllcIiAvKiBJbnN0YW50aWF0aW9uTW9kZS5MQVpZICovKVxyXG4gICAgICAgIC5zZXRNdWx0aXBsZUluc3RhbmNlcyhmYWxzZSkpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyQXV0aENvbXBhdChmaXJlYmFzZSk7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20yMDE3LmpzLm1hcFxuIiwiZXhwb3J0ICogZnJvbSAnQGZpcmViYXNlL2ZpcmVzdG9yZSc7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iLCJpbXBvcnQgZmlyZWJhc2UgZnJvbSAnQGZpcmViYXNlL2FwcC1jb21wYXQnO1xuaW1wb3J0IHsgRmlyZXN0b3JlRXJyb3IsIEJ5dGVzLCBfaXNCYXNlNjRBdmFpbGFibGUsIGVuYWJsZUluZGV4ZWREYlBlcnNpc3RlbmNlLCBlbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlLCBjbGVhckluZGV4ZWREYlBlcnNpc3RlbmNlLCBfRGF0YWJhc2VJZCwgX2xvZ1dhcm4sIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvciwgZW5hYmxlTmV0d29yaywgZGlzYWJsZU5ldHdvcmssIF92YWxpZGF0ZUlzTm90VXNlZFRvZ2V0aGVyLCB3YWl0Rm9yUGVuZGluZ1dyaXRlcywgb25TbmFwc2hvdHNJblN5bmMsIGNvbGxlY3Rpb24sIGRvYywgY29sbGVjdGlvbkdyb3VwLCBydW5UcmFuc2FjdGlvbiwgZW5zdXJlRmlyZXN0b3JlQ29uZmlndXJlZCwgV3JpdGVCYXRjaCBhcyBXcml0ZUJhdGNoJDEsIGV4ZWN1dGVXcml0ZSwgbG9hZEJ1bmRsZSwgbmFtZWRRdWVyeSwgRG9jdW1lbnRTbmFwc2hvdCBhcyBEb2N1bWVudFNuYXBzaG90JDEsIERvY3VtZW50UmVmZXJlbmNlIGFzIERvY3VtZW50UmVmZXJlbmNlJDEsIF9Eb2N1bWVudEtleSwgcmVmRXF1YWwsIHNldERvYywgdXBkYXRlRG9jLCBkZWxldGVEb2MsIG9uU25hcHNob3QsIGdldERvY0Zyb21DYWNoZSwgZ2V0RG9jRnJvbVNlcnZlciwgZ2V0RG9jLCBzbmFwc2hvdEVxdWFsLCBxdWVyeSwgd2hlcmUsIG9yZGVyQnksIGxpbWl0LCBsaW1pdFRvTGFzdCwgc3RhcnRBdCwgc3RhcnRBZnRlciwgZW5kQmVmb3JlLCBlbmRBdCwgcXVlcnlFcXVhbCwgZ2V0RG9jc0Zyb21DYWNoZSwgZ2V0RG9jc0Zyb21TZXJ2ZXIsIGdldERvY3MsIFF1ZXJ5U25hcHNob3QgYXMgUXVlcnlTbmFwc2hvdCQxLCBhZGREb2MsIF9jYXN0LCBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyLCBzZXRMb2dMZXZlbCBhcyBzZXRMb2dMZXZlbCQxLCBRdWVyeURvY3VtZW50U25hcHNob3QgYXMgUXVlcnlEb2N1bWVudFNuYXBzaG90JDEsIF9kZWJ1Z0Fzc2VydCwgRmllbGRQYXRoIGFzIEZpZWxkUGF0aCQxLCBfRmllbGRQYXRoLCBzZXJ2ZXJUaW1lc3RhbXAsIGRlbGV0ZUZpZWxkLCBhcnJheVVuaW9uLCBhcnJheVJlbW92ZSwgaW5jcmVtZW50LCBHZW9Qb2ludCwgVGltZXN0YW1wLCBDQUNIRV9TSVpFX1VOTElNSVRFRCB9IGZyb20gJ0BmaXJlYmFzZS9maXJlc3RvcmUnO1xuaW1wb3J0IHsgZ2V0TW9kdWxhckluc3RhbmNlIH0gZnJvbSAnQGZpcmViYXNlL3V0aWwnO1xuaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGZpcmViYXNlL2NvbXBvbmVudCc7XG5cbmNvbnN0IG5hbWUgPSBcIkBmaXJlYmFzZS9maXJlc3RvcmUtY29tcGF0XCI7XG5jb25zdCB2ZXJzaW9uID0gXCIwLjMuMTJcIjtcblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIxIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuZnVuY3Rpb24gdmFsaWRhdGVTZXRPcHRpb25zKG1ldGhvZE5hbWUsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBtZXJnZTogZmFsc2VcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgaWYgKG9wdGlvbnMubWVyZ2VGaWVsZHMgIT09IHVuZGVmaW5lZCAmJiBvcHRpb25zLm1lcmdlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ludmFsaWQtYXJndW1lbnQnLCBgSW52YWxpZCBvcHRpb25zIHBhc3NlZCB0byBmdW5jdGlvbiAke21ldGhvZE5hbWV9KCk6IFlvdSBjYW5ub3QgYCArXHJcbiAgICAgICAgICAgICdzcGVjaWZ5IGJvdGggXCJtZXJnZVwiIGFuZCBcIm1lcmdlRmllbGRzXCIuJyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gb3B0aW9ucztcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKiogSGVscGVyIGZ1bmN0aW9uIHRvIGFzc2VydCBVaW50OEFycmF5IGlzIGF2YWlsYWJsZSBhdCBydW50aW1lLiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRVaW50OEFycmF5QXZhaWxhYmxlKCkge1xyXG4gICAgaWYgKHR5cGVvZiBVaW50OEFycmF5ID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcigndW5pbXBsZW1lbnRlZCcsICdVaW50OEFycmF5cyBhcmUgbm90IGF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50LicpO1xyXG4gICAgfVxyXG59XHJcbi8qKiBIZWxwZXIgZnVuY3Rpb24gdG8gYXNzZXJ0IEJhc2U2NCBmdW5jdGlvbnMgYXJlIGF2YWlsYWJsZSBhdCBydW50aW1lLiAqL1xyXG5mdW5jdGlvbiBhc3NlcnRCYXNlNjRBdmFpbGFibGUoKSB7XHJcbiAgICBpZiAoIV9pc0Jhc2U2NEF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEZpcmVzdG9yZUVycm9yKCd1bmltcGxlbWVudGVkJywgJ0Jsb2JzIGFyZSB1bmF2YWlsYWJsZSBpbiBGaXJlc3RvcmUgaW4gdGhpcyBlbnZpcm9ubWVudC4nKTtcclxuICAgIH1cclxufVxyXG4vKiogSW1tdXRhYmxlIGNsYXNzIGhvbGRpbmcgYSBibG9iIChiaW5hcnkgZGF0YSkgKi9cclxuY2xhc3MgQmxvYiB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBmcm9tQmFzZTY0U3RyaW5nKGJhc2U2NCkge1xyXG4gICAgICAgIGFzc2VydEJhc2U2NEF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihCeXRlcy5mcm9tQmFzZTY0U3RyaW5nKGJhc2U2NCkpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZyb21VaW50OEFycmF5KGFycmF5KSB7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiBuZXcgQmxvYihCeXRlcy5mcm9tVWludDhBcnJheShhcnJheSkpO1xyXG4gICAgfVxyXG4gICAgdG9CYXNlNjQoKSB7XHJcbiAgICAgICAgYXNzZXJ0QmFzZTY0QXZhaWxhYmxlKCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnRvQmFzZTY0KCk7XHJcbiAgICB9XHJcbiAgICB0b1VpbnQ4QXJyYXkoKSB7XHJcbiAgICAgICAgYXNzZXJ0VWludDhBcnJheUF2YWlsYWJsZSgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b1VpbnQ4QXJyYXkoKTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXNFcXVhbChvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgdG9TdHJpbmcoKSB7XHJcbiAgICAgICAgcmV0dXJuICdCbG9iKGJhc2U2NDogJyArIHRoaXMudG9CYXNlNjQoKSArICcpJztcclxuICAgIH1cclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBpc1BhcnRpYWxPYnNlcnZlcihvYmopIHtcclxuICAgIHJldHVybiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIFsnbmV4dCcsICdlcnJvcicsICdjb21wbGV0ZSddKTtcclxufVxyXG4vKipcclxuICogUmV0dXJucyB0cnVlIGlmIG9iaiBpcyBhbiBvYmplY3QgYW5kIGNvbnRhaW5zIGF0IGxlYXN0IG9uZSBvZiB0aGUgc3BlY2lmaWVkXHJcbiAqIG1ldGhvZHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBpbXBsZW1lbnRzQW55TWV0aG9kcyhvYmosIG1ldGhvZHMpIHtcclxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbiAgICBjb25zdCBvYmplY3QgPSBvYmo7XHJcbiAgICBmb3IgKGNvbnN0IG1ldGhvZCBvZiBtZXRob2RzKSB7XHJcbiAgICAgICAgaWYgKG1ldGhvZCBpbiBvYmplY3QgJiYgdHlwZW9mIG9iamVjdFttZXRob2RdID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBmYWxzZTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vKipcclxuICogVGhlIHBlcnNpc3RlbmNlIHByb3ZpZGVyIGluY2x1ZGVkIHdpdGggdGhlIGZ1bGwgRmlyZXN0b3JlIFNESy5cclxuICovXHJcbmNsYXNzIEluZGV4ZWREYlBlcnNpc3RlbmNlUHJvdmlkZXIge1xyXG4gICAgZW5hYmxlSW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlLCBmb3JjZU93bmVyc2hpcCkge1xyXG4gICAgICAgIHJldHVybiBlbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUuX2RlbGVnYXRlLCB7IGZvcmNlT3duZXJzaGlwIH0pO1xyXG4gICAgfVxyXG4gICAgZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUpIHtcclxuICAgICAgICByZXR1cm4gZW5hYmxlTXVsdGlUYWJJbmRleGVkRGJQZXJzaXN0ZW5jZShmaXJlc3RvcmUuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlKSB7XHJcbiAgICAgICAgcmV0dXJuIGNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UoZmlyZXN0b3JlLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIENvbXBhdCBjbGFzcyBmb3IgRmlyZXN0b3JlLiBFeHBvc2VzIEZpcmVzdG9yZSBMZWdhY3kgQVBJLCBidXQgZGVsZWdhdGVzXHJcbiAqIHRvIHRoZSBmdW5jdGlvbmFsIEFQSSBvZiBmaXJlc3RvcmUtZXhwLlxyXG4gKi9cclxuY2xhc3MgRmlyZXN0b3JlIHtcclxuICAgIGNvbnN0cnVjdG9yKGRhdGFiYXNlSWRPckFwcCwgX2RlbGVnYXRlLCBfcGVyc2lzdGVuY2VQcm92aWRlcikge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgICAgIHRoaXMuX3BlcnNpc3RlbmNlUHJvdmlkZXIgPSBfcGVyc2lzdGVuY2VQcm92aWRlcjtcclxuICAgICAgICB0aGlzLklOVEVSTkFMID0ge1xyXG4gICAgICAgICAgICBkZWxldGU6ICgpID0+IHRoaXMudGVybWluYXRlKClcclxuICAgICAgICB9O1xyXG4gICAgICAgIGlmICghKGRhdGFiYXNlSWRPckFwcCBpbnN0YW5jZW9mIF9EYXRhYmFzZUlkKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQgPSBkYXRhYmFzZUlkT3JBcHA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgZ2V0IF9kYXRhYmFzZUlkKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fZGF0YWJhc2VJZDtcclxuICAgIH1cclxuICAgIHNldHRpbmdzKHNldHRpbmdzTGl0ZXJhbCkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRTZXR0aW5ncyA9IHRoaXMuX2RlbGVnYXRlLl9nZXRTZXR0aW5ncygpO1xyXG4gICAgICAgIGlmICghc2V0dGluZ3NMaXRlcmFsLm1lcmdlICYmXHJcbiAgICAgICAgICAgIGN1cnJlbnRTZXR0aW5ncy5ob3N0ICE9PSBzZXR0aW5nc0xpdGVyYWwuaG9zdCkge1xyXG4gICAgICAgICAgICBfbG9nV2FybignWW91IGFyZSBvdmVycmlkaW5nIHRoZSBvcmlnaW5hbCBob3N0LiBJZiB5b3UgZGlkIG5vdCBpbnRlbmQgJyArXHJcbiAgICAgICAgICAgICAgICAndG8gb3ZlcnJpZGUgeW91ciBzZXR0aW5ncywgdXNlIHttZXJnZTogdHJ1ZX0uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChzZXR0aW5nc0xpdGVyYWwubWVyZ2UpIHtcclxuICAgICAgICAgICAgc2V0dGluZ3NMaXRlcmFsID0gT2JqZWN0LmFzc2lnbihPYmplY3QuYXNzaWduKHt9LCBjdXJyZW50U2V0dGluZ3MpLCBzZXR0aW5nc0xpdGVyYWwpO1xyXG4gICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHByb3BlcnR5IGZyb20gdGhlIHNldHRpbmdzIG9uY2UgdGhlIG1lcmdlIGlzIGNvbXBsZXRlZFxyXG4gICAgICAgICAgICBkZWxldGUgc2V0dGluZ3NMaXRlcmFsLm1lcmdlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5fc2V0U2V0dGluZ3Moc2V0dGluZ3NMaXRlcmFsKTtcclxuICAgIH1cclxuICAgIHVzZUVtdWxhdG9yKGhvc3QsIHBvcnQsIG9wdGlvbnMgPSB7fSkge1xyXG4gICAgICAgIGNvbm5lY3RGaXJlc3RvcmVFbXVsYXRvcih0aGlzLl9kZWxlZ2F0ZSwgaG9zdCwgcG9ydCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVOZXR3b3JrKCkge1xyXG4gICAgICAgIHJldHVybiBlbmFibGVOZXR3b3JrKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGRpc2FibGVOZXR3b3JrKCkge1xyXG4gICAgICAgIHJldHVybiBkaXNhYmxlTmV0d29yayh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBlbmFibGVQZXJzaXN0ZW5jZShzZXR0aW5ncykge1xyXG4gICAgICAgIGxldCBzeW5jaHJvbml6ZVRhYnMgPSBmYWxzZTtcclxuICAgICAgICBsZXQgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIgPSBmYWxzZTtcclxuICAgICAgICBpZiAoc2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgc3luY2hyb25pemVUYWJzID0gISFzZXR0aW5ncy5zeW5jaHJvbml6ZVRhYnM7XHJcbiAgICAgICAgICAgIGV4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiID0gISFzZXR0aW5ncy5leHBlcmltZW50YWxGb3JjZU93bmluZ1RhYjtcclxuICAgICAgICAgICAgX3ZhbGlkYXRlSXNOb3RVc2VkVG9nZXRoZXIoJ3N5bmNocm9uaXplVGFicycsIHN5bmNocm9uaXplVGFicywgJ2V4cGVyaW1lbnRhbEZvcmNlT3duaW5nVGFiJywgZXhwZXJpbWVudGFsRm9yY2VPd25pbmdUYWIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc3luY2hyb25pemVUYWJzXHJcbiAgICAgICAgICAgID8gdGhpcy5fcGVyc2lzdGVuY2VQcm92aWRlci5lbmFibGVNdWx0aVRhYkluZGV4ZWREYlBlcnNpc3RlbmNlKHRoaXMpXHJcbiAgICAgICAgICAgIDogdGhpcy5fcGVyc2lzdGVuY2VQcm92aWRlci5lbmFibGVJbmRleGVkRGJQZXJzaXN0ZW5jZSh0aGlzLCBleHBlcmltZW50YWxGb3JjZU93bmluZ1RhYik7XHJcbiAgICB9XHJcbiAgICBjbGVhclBlcnNpc3RlbmNlKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9wZXJzaXN0ZW5jZVByb3ZpZGVyLmNsZWFySW5kZXhlZERiUGVyc2lzdGVuY2UodGhpcyk7XHJcbiAgICB9XHJcbiAgICB0ZXJtaW5hdGUoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuX2FwcENvbXBhdCkge1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSgnZmlyZXN0b3JlLWNvbXBhdCcpO1xyXG4gICAgICAgICAgICB0aGlzLl9hcHBDb21wYXQuX3JlbW92ZVNlcnZpY2VJbnN0YW5jZSgnZmlyZXN0b3JlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5fZGVsZXRlKCk7XHJcbiAgICB9XHJcbiAgICB3YWl0Rm9yUGVuZGluZ1dyaXRlcygpIHtcclxuICAgICAgICByZXR1cm4gd2FpdEZvclBlbmRpbmdXcml0ZXModGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgb25TbmFwc2hvdHNJblN5bmMoYXJnKSB7XHJcbiAgICAgICAgcmV0dXJuIG9uU25hcHNob3RzSW5TeW5jKHRoaXMuX2RlbGVnYXRlLCBhcmcpO1xyXG4gICAgfVxyXG4gICAgZ2V0IGFwcCgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuX2FwcENvbXBhdCkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRmlyZXN0b3JlRXJyb3IoJ2ZhaWxlZC1wcmVjb25kaXRpb24nLCBcIkZpcmVzdG9yZSB3YXMgbm90IGluaXRpYWxpemVkIHVzaW5nIHRoZSBGaXJlYmFzZSBTREsuICdhcHAnIGlzIFwiICtcclxuICAgICAgICAgICAgICAgICdub3QgYXZhaWxhYmxlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9hcHBDb21wYXQ7XHJcbiAgICB9XHJcbiAgICBjb2xsZWN0aW9uKHBhdGhTdHJpbmcpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IENvbGxlY3Rpb25SZWZlcmVuY2UodGhpcywgY29sbGVjdGlvbih0aGlzLl9kZWxlZ2F0ZSwgcGF0aFN0cmluZykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdjb2xsZWN0aW9uKCknLCAnRmlyZXN0b3JlLmNvbGxlY3Rpb24oKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRvYyhwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLCBkb2ModGhpcy5fZGVsZWdhdGUsIHBhdGhTdHJpbmcpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnZG9jKCknLCAnRmlyZXN0b3JlLmRvYygpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY29sbGVjdGlvbkdyb3VwKGNvbGxlY3Rpb25JZCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcywgY29sbGVjdGlvbkdyb3VwKHRoaXMuX2RlbGVnYXRlLCBjb2xsZWN0aW9uSWQpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnY29sbGVjdGlvbkdyb3VwKCknLCAnRmlyZXN0b3JlLmNvbGxlY3Rpb25Hcm91cCgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcnVuVHJhbnNhY3Rpb24odXBkYXRlRnVuY3Rpb24pIHtcclxuICAgICAgICByZXR1cm4gcnVuVHJhbnNhY3Rpb24odGhpcy5fZGVsZWdhdGUsIHRyYW5zYWN0aW9uID0+IHVwZGF0ZUZ1bmN0aW9uKG5ldyBUcmFuc2FjdGlvbih0aGlzLCB0cmFuc2FjdGlvbikpKTtcclxuICAgIH1cclxuICAgIGJhdGNoKCkge1xyXG4gICAgICAgIGVuc3VyZUZpcmVzdG9yZUNvbmZpZ3VyZWQodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIHJldHVybiBuZXcgV3JpdGVCYXRjaChuZXcgV3JpdGVCYXRjaCQxKHRoaXMuX2RlbGVnYXRlLCBtdXRhdGlvbnMgPT4gZXhlY3V0ZVdyaXRlKHRoaXMuX2RlbGVnYXRlLCBtdXRhdGlvbnMpKSk7XHJcbiAgICB9XHJcbiAgICBsb2FkQnVuZGxlKGJ1bmRsZURhdGEpIHtcclxuICAgICAgICByZXR1cm4gbG9hZEJ1bmRsZSh0aGlzLl9kZWxlZ2F0ZSwgYnVuZGxlRGF0YSk7XHJcbiAgICB9XHJcbiAgICBuYW1lZFF1ZXJ5KG5hbWUpIHtcclxuICAgICAgICByZXR1cm4gbmFtZWRRdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgbmFtZSkudGhlbihleHBRdWVyeSA9PiB7XHJcbiAgICAgICAgICAgIGlmICghZXhwUXVlcnkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcywgXHJcbiAgICAgICAgICAgIC8vIFdlIGNhbiBwYXNzIGBleHBRdWVyeWAgaGVyZSBkaXJlY3RseSBzaW5jZSBuYW1lZCBxdWVyaWVzIGRvbid0IGhhdmUgYSBVc2VyRGF0YUNvbnZlcnRlci5cclxuICAgICAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB3b3VsZCBoYXZlIHRvIGNyZWF0ZSBhIG5ldyBFeHBRdWVyeSBhbmQgcGFzcyB0aGUgb2xkIFVzZXJEYXRhQ29udmVydGVyLlxyXG4gICAgICAgICAgICBleHBRdWVyeSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgVXNlckRhdGFXcml0ZXIgZXh0ZW5kcyBBYnN0cmFjdFVzZXJEYXRhV3JpdGVyIHtcclxuICAgIGNvbnN0cnVjdG9yKGZpcmVzdG9yZSkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5maXJlc3RvcmUgPSBmaXJlc3RvcmU7XHJcbiAgICB9XHJcbiAgICBjb252ZXJ0Qnl0ZXMoYnl0ZXMpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJsb2IobmV3IEJ5dGVzKGJ5dGVzKSk7XHJcbiAgICB9XHJcbiAgICBjb252ZXJ0UmVmZXJlbmNlKG5hbWUpIHtcclxuICAgICAgICBjb25zdCBrZXkgPSB0aGlzLmNvbnZlcnREb2N1bWVudEtleShuYW1lLCB0aGlzLmZpcmVzdG9yZS5fZGF0YWJhc2VJZCk7XHJcbiAgICAgICAgcmV0dXJuIERvY3VtZW50UmVmZXJlbmNlLmZvcktleShrZXksIHRoaXMuZmlyZXN0b3JlLCAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNldExvZ0xldmVsKGxldmVsKSB7XHJcbiAgICBzZXRMb2dMZXZlbCQxKGxldmVsKTtcclxufVxyXG4vKipcclxuICogQSByZWZlcmVuY2UgdG8gYSB0cmFuc2FjdGlvbi5cclxuICovXHJcbmNsYXNzIFRyYW5zYWN0aW9uIHtcclxuICAgIGNvbnN0cnVjdG9yKF9maXJlc3RvcmUsIF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2ZpcmVzdG9yZSA9IF9maXJlc3RvcmU7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBfZGVsZWdhdGU7XHJcbiAgICAgICAgdGhpcy5fdXNlckRhdGFXcml0ZXIgPSBuZXcgVXNlckRhdGFXcml0ZXIoX2ZpcmVzdG9yZSk7XHJcbiAgICB9XHJcbiAgICBnZXQoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGVcclxuICAgICAgICAgICAgLmdldChyZWYpXHJcbiAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiBuZXcgRG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIG5ldyBEb2N1bWVudFNuYXBzaG90JDEodGhpcy5fZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHJlc3VsdC5fa2V5LCByZXN1bHQuX2RvY3VtZW50LCByZXN1bHQubWV0YWRhdGEsIHJlZi5jb252ZXJ0ZXIpKSk7XHJcbiAgICB9XHJcbiAgICBzZXQoZG9jdW1lbnRSZWYsIGRhdGEsIG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICBpZiAob3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YWxpZGF0ZVNldE9wdGlvbnMoJ1RyYW5zYWN0aW9uLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5zZXQocmVmLCBkYXRhLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnNldChyZWYsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHVwZGF0ZShkb2N1bWVudFJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5kZWxldGUocmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxufVxyXG5jbGFzcyBXcml0ZUJhdGNoIHtcclxuICAgIGNvbnN0cnVjdG9yKF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgc2V0KGRvY3VtZW50UmVmLCBkYXRhLCBvcHRpb25zKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdmFsaWRhdGVTZXRPcHRpb25zKCdXcml0ZUJhdGNoLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5zZXQocmVmLCBkYXRhLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2RlbGVnYXRlLnNldChyZWYsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIHVwZGF0ZShkb2N1bWVudFJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgY29uc3QgcmVmID0gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZik7XHJcbiAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fZGVsZWdhdGUudXBkYXRlKHJlZiwgZGF0YU9yRmllbGQsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBkZWxldGUoZG9jdW1lbnRSZWYpIHtcclxuICAgICAgICBjb25zdCByZWYgPSBjYXN0UmVmZXJlbmNlKGRvY3VtZW50UmVmKTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZS5kZWxldGUocmVmKTtcclxuICAgICAgICByZXR1cm4gdGhpcztcclxuICAgIH1cclxuICAgIGNvbW1pdCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuY29tbWl0KCk7XHJcbiAgICB9XHJcbn1cclxuLyoqXHJcbiAqIFdyYXBzIGEgYFB1YmxpY0ZpcmVzdG9yZURhdGFDb252ZXJ0ZXJgIHRyYW5zbGF0aW5nIHRoZSB0eXBlcyBmcm9tIHRoZVxyXG4gKiBleHBlcmltZW50YWwgU0RLIGludG8gY29ycmVzcG9uZGluZyB0eXBlcyBmcm9tIHRoZSBDbGFzc2ljIFNESyBiZWZvcmUgcGFzc2luZ1xyXG4gKiB0aGVtIHRvIHRoZSB3cmFwcGVkIGNvbnZlcnRlci5cclxuICovXHJcbmNsYXNzIEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX3VzZXJEYXRhV3JpdGVyLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX3VzZXJEYXRhV3JpdGVyID0gX3VzZXJEYXRhV3JpdGVyO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZnJvbUZpcmVzdG9yZShzbmFwc2hvdCwgb3B0aW9ucykge1xyXG4gICAgICAgIGNvbnN0IGV4cFNuYXBzaG90ID0gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuX2ZpcmVzdG9yZS5fZGVsZWdhdGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCBzbmFwc2hvdC5fa2V5LCBzbmFwc2hvdC5fZG9jdW1lbnQsIHNuYXBzaG90Lm1ldGFkYXRhLCBcclxuICAgICAgICAvKiBjb252ZXJ0ZXI9ICovIG51bGwpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5mcm9tRmlyZXN0b3JlKG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBleHBTbmFwc2hvdCksIG9wdGlvbnMgIT09IG51bGwgJiYgb3B0aW9ucyAhPT0gdm9pZCAwID8gb3B0aW9ucyA6IHt9KTtcclxuICAgIH1cclxuICAgIHRvRmlyZXN0b3JlKG1vZGVsT2JqZWN0LCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS50b0ZpcmVzdG9yZShtb2RlbE9iamVjdCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUudG9GaXJlc3RvcmUobW9kZWxPYmplY3QsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIFVzZSB0aGUgc2FtZSBpbnN0YW5jZSBvZiBgRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgZm9yIHRoZSBnaXZlbiBpbnN0YW5jZXNcclxuICAgIC8vIG9mIGBGaXJlc3RvcmVgIGFuZCBgUHVibGljRmlyZXN0b3JlRGF0YUNvbnZlcnRlcmAgc28gdGhhdCBpc0VxdWFsKCkgd2lsbFxyXG4gICAgLy8gY29tcGFyZSBlcXVhbCBmb3IgdHdvIG9iamVjdHMgY3JlYXRlZCB3aXRoIHRoZSBzYW1lIGNvbnZlcnRlciBpbnN0YW5jZS5cclxuICAgIHN0YXRpYyBnZXRJbnN0YW5jZShmaXJlc3RvcmUsIGNvbnZlcnRlcikge1xyXG4gICAgICAgIGNvbnN0IGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlID0gRmlyZXN0b3JlRGF0YUNvbnZlcnRlci5JTlNUQU5DRVM7XHJcbiAgICAgICAgbGV0IHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlciA9IGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlLmdldChmaXJlc3RvcmUpO1xyXG4gICAgICAgIGlmICghdW50eXBlZENvbnZlcnRlckJ5Q29udmVydGVyKSB7XHJcbiAgICAgICAgICAgIHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlciA9IG5ldyBXZWFrTWFwKCk7XHJcbiAgICAgICAgICAgIGNvbnZlcnRlck1hcEJ5RmlyZXN0b3JlLnNldChmaXJlc3RvcmUsIHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBpbnN0YW5jZSA9IHVudHlwZWRDb252ZXJ0ZXJCeUNvbnZlcnRlci5nZXQoY29udmVydGVyKTtcclxuICAgICAgICBpZiAoIWluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIGluc3RhbmNlID0gbmV3IEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIoZmlyZXN0b3JlLCBuZXcgVXNlckRhdGFXcml0ZXIoZmlyZXN0b3JlKSwgY29udmVydGVyKTtcclxuICAgICAgICAgICAgdW50eXBlZENvbnZlcnRlckJ5Q29udmVydGVyLnNldChjb252ZXJ0ZXIsIGluc3RhbmNlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgfVxyXG59XHJcbkZpcmVzdG9yZURhdGFDb252ZXJ0ZXIuSU5TVEFOQ0VTID0gbmV3IFdlYWtNYXAoKTtcclxuLyoqXHJcbiAqIEEgcmVmZXJlbmNlIHRvIGEgcGFydGljdWxhciBkb2N1bWVudCBpbiBhIGNvbGxlY3Rpb24gaW4gdGhlIGRhdGFiYXNlLlxyXG4gKi9cclxuY2xhc3MgRG9jdW1lbnRSZWZlcmVuY2Uge1xyXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IG5ldyBVc2VyRGF0YVdyaXRlcihmaXJlc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGZvclBhdGgocGF0aCwgZmlyZXN0b3JlLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICBpZiAocGF0aC5sZW5ndGggJSAyICE9PSAwKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBGaXJlc3RvcmVFcnJvcignaW52YWxpZC1hcmd1bWVudCcsICdJbnZhbGlkIGRvY3VtZW50IHJlZmVyZW5jZS4gRG9jdW1lbnQgJyArXHJcbiAgICAgICAgICAgICAgICAncmVmZXJlbmNlcyBtdXN0IGhhdmUgYW4gZXZlbiBudW1iZXIgb2Ygc2VnbWVudHMsIGJ1dCAnICtcclxuICAgICAgICAgICAgICAgIGAke3BhdGguY2Fub25pY2FsU3RyaW5nKCl9IGhhcyAke3BhdGgubGVuZ3RofWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKGZpcmVzdG9yZSwgbmV3IERvY3VtZW50UmVmZXJlbmNlJDEoZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgY29udmVydGVyLCBuZXcgX0RvY3VtZW50S2V5KHBhdGgpKSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZm9yS2V5KGtleSwgZmlyZXN0b3JlLCBjb252ZXJ0ZXIpIHtcclxuICAgICAgICByZXR1cm4gbmV3IERvY3VtZW50UmVmZXJlbmNlKGZpcmVzdG9yZSwgbmV3IERvY3VtZW50UmVmZXJlbmNlJDEoZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgY29udmVydGVyLCBrZXkpKTtcclxuICAgIH1cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgcGFyZW50KCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgQ29sbGVjdGlvblJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUucGFyZW50KTtcclxuICAgIH1cclxuICAgIGdldCBwYXRoKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5wYXRoO1xyXG4gICAgfVxyXG4gICAgY29sbGVjdGlvbihwYXRoU3RyaW5nKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBjb2xsZWN0aW9uKHRoaXMuX2RlbGVnYXRlLCBwYXRoU3RyaW5nKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2NvbGxlY3Rpb24oKScsICdEb2N1bWVudFJlZmVyZW5jZS5jb2xsZWN0aW9uKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgb3RoZXIgPSBnZXRNb2R1bGFySW5zdGFuY2Uob3RoZXIpO1xyXG4gICAgICAgIGlmICghKG90aGVyIGluc3RhbmNlb2YgRG9jdW1lbnRSZWZlcmVuY2UkMSkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVmRXF1YWwodGhpcy5fZGVsZWdhdGUsIG90aGVyKTtcclxuICAgIH1cclxuICAgIHNldCh2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgICAgIG9wdGlvbnMgPSB2YWxpZGF0ZVNldE9wdGlvbnMoJ0RvY3VtZW50UmVmZXJlbmNlLnNldCcsIG9wdGlvbnMpO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0RG9jKHRoaXMuX2RlbGVnYXRlLCB2YWx1ZSwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2V0RG9jKHRoaXMuX2RlbGVnYXRlLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnc2V0RG9jKCknLCAnRG9jdW1lbnRSZWZlcmVuY2Uuc2V0KCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICB1cGRhdGUoZmllbGRPclVwZGF0ZURhdGEsIHZhbHVlLCAuLi5tb3JlRmllbGRzQW5kVmFsdWVzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVEb2ModGhpcy5fZGVsZWdhdGUsIGZpZWxkT3JVcGRhdGVEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1cGRhdGVEb2ModGhpcy5fZGVsZWdhdGUsIGZpZWxkT3JVcGRhdGVEYXRhLCB2YWx1ZSwgLi4ubW9yZUZpZWxkc0FuZFZhbHVlcyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAndXBkYXRlRG9jKCknLCAnRG9jdW1lbnRSZWZlcmVuY2UudXBkYXRlKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBkZWxldGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIGRlbGV0ZURvYyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBvblNuYXBzaG90KC4uLmFyZ3MpIHtcclxuICAgICAgICBjb25zdCBvcHRpb25zID0gZXh0cmFjdFNuYXBzaG90T3B0aW9ucyhhcmdzKTtcclxuICAgICAgICBjb25zdCBvYnNlcnZlciA9IHdyYXBPYnNlcnZlcihhcmdzLCByZXN1bHQgPT4gbmV3IERvY3VtZW50U25hcHNob3QodGhpcy5maXJlc3RvcmUsIG5ldyBEb2N1bWVudFNuYXBzaG90JDEodGhpcy5maXJlc3RvcmUuX2RlbGVnYXRlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgcmVzdWx0Ll9rZXksIHJlc3VsdC5fZG9jdW1lbnQsIHJlc3VsdC5tZXRhZGF0YSwgdGhpcy5fZGVsZWdhdGUuY29udmVydGVyKSkpO1xyXG4gICAgICAgIHJldHVybiBvblNuYXBzaG90KHRoaXMuX2RlbGVnYXRlLCBvcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICBnZXQob3B0aW9ucykge1xyXG4gICAgICAgIGxldCBzbmFwO1xyXG4gICAgICAgIGlmICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNvdXJjZSkgPT09ICdjYWNoZScpIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvY0Zyb21DYWNoZSh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKChvcHRpb25zID09PSBudWxsIHx8IG9wdGlvbnMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdGlvbnMuc291cmNlKSA9PT0gJ3NlcnZlcicpIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvY0Zyb21TZXJ2ZXIodGhpcy5fZGVsZWdhdGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgc25hcCA9IGdldERvYyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzbmFwLnRoZW4ocmVzdWx0ID0+IG5ldyBEb2N1bWVudFNuYXBzaG90KHRoaXMuZmlyZXN0b3JlLCBuZXcgRG9jdW1lbnRTbmFwc2hvdCQxKHRoaXMuZmlyZXN0b3JlLl9kZWxlZ2F0ZSwgdGhpcy5fdXNlckRhdGFXcml0ZXIsIHJlc3VsdC5fa2V5LCByZXN1bHQuX2RvY3VtZW50LCByZXN1bHQubWV0YWRhdGEsIHRoaXMuX2RlbGVnYXRlLmNvbnZlcnRlcikpKTtcclxuICAgIH1cclxuICAgIHdpdGhDb252ZXJ0ZXIoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyXHJcbiAgICAgICAgICAgID8gdGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihGaXJlc3RvcmVEYXRhQ29udmVydGVyLmdldEluc3RhbmNlKHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXIpKVxyXG4gICAgICAgICAgICA6IHRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIobnVsbCkpO1xyXG4gICAgfVxyXG59XHJcbi8qKlxyXG4gKiBSZXBsYWNlcyB0aGUgZnVuY3Rpb24gbmFtZSBpbiBhbiBlcnJvciB0aHJvd24gYnkgdGhlIGZpcmVzdG9yZS1leHAgQVBJXHJcbiAqIHdpdGggdGhlIGZ1bmN0aW9uIG5hbWVzIHVzZWQgaW4gdGhlIGNsYXNzaWMgQVBJLlxyXG4gKi9cclxuZnVuY3Rpb24gcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCBvcmlnaW5hbCwgdXBkYXRlZCkge1xyXG4gICAgZS5tZXNzYWdlID0gZS5tZXNzYWdlLnJlcGxhY2Uob3JpZ2luYWwsIHVwZGF0ZWQpO1xyXG4gICAgcmV0dXJuIGU7XHJcbn1cclxuLyoqXHJcbiAqIEl0ZXJhdGVzIHRoZSBsaXN0IG9mIGFyZ3VtZW50cyBmcm9tIGFuIGBvblNuYXBzaG90YCBjYWxsIGFuZCByZXR1cm5zIHRoZVxyXG4gKiBmaXJzdCBhcmd1bWVudCB0aGF0IG1heSBiZSBhbiBgU25hcHNob3RMaXN0ZW5PcHRpb25zYCBvYmplY3QuIFJldHVybnMgYW5cclxuICogZW1wdHkgb2JqZWN0IGlmIG5vbmUgaXMgZm91bmQuXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0U25hcHNob3RPcHRpb25zKGFyZ3MpIHtcclxuICAgIGZvciAoY29uc3QgYXJnIG9mIGFyZ3MpIHtcclxuICAgICAgICBpZiAodHlwZW9mIGFyZyA9PT0gJ29iamVjdCcgJiYgIWlzUGFydGlhbE9ic2VydmVyKGFyZykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGFyZztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge307XHJcbn1cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gb2JzZXJ2ZXIgdGhhdCBjYW4gYmUgcGFzc2VkIHRvIHRoZSBmaXJlc3RvcmUtZXhwIFNESy4gVGhlXHJcbiAqIG9ic2VydmVyIGNvbnZlcnRzIGFsbCBvYnNlcnZlZCB2YWx1ZXMgaW50byB0aGUgZm9ybWF0IGV4cGVjdGVkIGJ5IHRoZSBjbGFzc2ljXHJcbiAqIFNESy5cclxuICpcclxuICogQHBhcmFtIGFyZ3MgLSBUaGUgbGlzdCBvZiBhcmd1bWVudHMgZnJvbSBhbiBgb25TbmFwc2hvdGAgY2FsbC5cclxuICogQHBhcmFtIHdyYXBwZXIgLSBUaGUgZnVuY3Rpb24gdGhhdCBjb252ZXJ0cyB0aGUgZmlyZXN0b3JlLWV4cCB0eXBlIGludG8gdGhlXHJcbiAqIHR5cGUgdXNlZCBieSB0aGlzIHNoaW0uXHJcbiAqL1xyXG5mdW5jdGlvbiB3cmFwT2JzZXJ2ZXIoYXJncywgd3JhcHBlcikge1xyXG4gICAgdmFyIF9hLCBfYjtcclxuICAgIGxldCB1c2VyT2JzZXJ2ZXI7XHJcbiAgICBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1swXSkpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSBhcmdzWzBdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAoaXNQYXJ0aWFsT2JzZXJ2ZXIoYXJnc1sxXSkpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSBhcmdzWzFdO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAodHlwZW9mIGFyZ3NbMF0gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgIG5leHQ6IGFyZ3NbMF0sXHJcbiAgICAgICAgICAgIGVycm9yOiBhcmdzWzFdLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogYXJnc1syXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB1c2VyT2JzZXJ2ZXIgPSB7XHJcbiAgICAgICAgICAgIG5leHQ6IGFyZ3NbMV0sXHJcbiAgICAgICAgICAgIGVycm9yOiBhcmdzWzJdLFxyXG4gICAgICAgICAgICBjb21wbGV0ZTogYXJnc1szXVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIG5leHQ6IHZhbCA9PiB7XHJcbiAgICAgICAgICAgIGlmICh1c2VyT2JzZXJ2ZXIubmV4dCkge1xyXG4gICAgICAgICAgICAgICAgdXNlck9ic2VydmVyLm5leHQod3JhcHBlcih2YWwpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IChfYSA9IHVzZXJPYnNlcnZlci5lcnJvcikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmJpbmQodXNlck9ic2VydmVyKSxcclxuICAgICAgICBjb21wbGV0ZTogKF9iID0gdXNlck9ic2VydmVyLmNvbXBsZXRlKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IuYmluZCh1c2VyT2JzZXJ2ZXIpXHJcbiAgICB9O1xyXG59XHJcbmNsYXNzIERvY3VtZW50U25hcHNob3Qge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCByZWYoKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLl9maXJlc3RvcmUsIHRoaXMuX2RlbGVnYXRlLnJlZik7XHJcbiAgICB9XHJcbiAgICBnZXQgaWQoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmlkO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBleGlzdHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmV4aXN0cygpO1xyXG4gICAgfVxyXG4gICAgZGF0YShvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLmRhdGEob3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBnZXQoZmllbGRQYXRoLCBvcHRpb25zXHJcbiAgICAvLyBXZSBhcmUgdXNpbmcgYGFueWAgaGVyZSB0byBhdm9pZCBhbiBleHBsaWNpdCBjYXN0IGJ5IG91ciB1c2Vycy5cclxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuZ2V0KGZpZWxkUGF0aCwgb3B0aW9ucyk7XHJcbiAgICB9XHJcbiAgICBpc0VxdWFsKG90aGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90RXF1YWwodGhpcy5fZGVsZWdhdGUsIG90aGVyLl9kZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUXVlcnlEb2N1bWVudFNuYXBzaG90IGV4dGVuZHMgRG9jdW1lbnRTbmFwc2hvdCB7XHJcbiAgICBkYXRhKG9wdGlvbnMpIHtcclxuICAgICAgICBjb25zdCBkYXRhID0gdGhpcy5fZGVsZWdhdGUuZGF0YShvcHRpb25zKTtcclxuICAgICAgICBfZGVidWdBc3NlcnQoZGF0YSAhPT0gdW5kZWZpbmVkLCAnRG9jdW1lbnQgaW4gYSBRdWVyeURvY3VtZW50U25hcHNob3Qgc2hvdWxkIGV4aXN0Jyk7XHJcbiAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICB9XHJcbn1cclxuY2xhc3MgUXVlcnkge1xyXG4gICAgY29uc3RydWN0b3IoZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgICAgICB0aGlzLl91c2VyRGF0YVdyaXRlciA9IG5ldyBVc2VyRGF0YVdyaXRlcihmaXJlc3RvcmUpO1xyXG4gICAgfVxyXG4gICAgd2hlcmUoZmllbGRQYXRoLCBvcFN0ciwgdmFsdWUpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUaGUgXCJhcyBzdHJpbmdcIiBjYXN0IGlzIGEgbGl0dGxlIGJpdCBvZiBhIGhhY2suIGB3aGVyZWAgYWNjZXB0cyB0aGVcclxuICAgICAgICAgICAgLy8gRmllbGRQYXRoIENvbXBhdCB0eXBlIGFzIGlucHV0LCBidXQgaXMgbm90IHR5cGVkIGFzIHN1Y2ggaW4gb3JkZXIgdG9cclxuICAgICAgICAgICAgLy8gbm90IGV4cG9zZSB0aGlzIHZpYSBvdXIgcHVibGljIHR5cGluZ3MgZmlsZS5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIHdoZXJlKGZpZWxkUGF0aCwgb3BTdHIsIHZhbHVlKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsIC8ob3JkZXJCeXx3aGVyZSlcXChcXCkvLCAnUXVlcnkuJDEoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9yZGVyQnkoZmllbGRQYXRoLCBkaXJlY3Rpb25TdHIpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBUaGUgXCJhcyBzdHJpbmdcIiBjYXN0IGlzIGEgbGl0dGxlIGJpdCBvZiBhIGhhY2suIGBvcmRlckJ5YCBhY2NlcHRzIHRoZVxyXG4gICAgICAgICAgICAvLyBGaWVsZFBhdGggQ29tcGF0IHR5cGUgYXMgaW5wdXQsIGJ1dCBpcyBub3QgdHlwZWQgYXMgc3VjaCBpbiBvcmRlciB0b1xyXG4gICAgICAgICAgICAvLyBub3QgZXhwb3NlIHRoaXMgdmlhIG91ciBwdWJsaWMgdHlwaW5ncyBmaWxlLlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBxdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgb3JkZXJCeShmaWVsZFBhdGgsIGRpcmVjdGlvblN0cikpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAvKG9yZGVyQnl8d2hlcmUpXFwoXFwpLywgJ1F1ZXJ5LiQxKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsaW1pdChuKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIGxpbWl0KG4pKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2xpbWl0KCknLCAnUXVlcnkubGltaXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGxpbWl0VG9MYXN0KG4pIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuZmlyZXN0b3JlLCBxdWVyeSh0aGlzLl9kZWxlZ2F0ZSwgbGltaXRUb0xhc3QobikpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnbGltaXRUb0xhc3QoKScsICdRdWVyeS5saW1pdFRvTGFzdCgpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgc3RhcnRBdCguLi5hcmdzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIHN0YXJ0QXQoLi4uYXJncykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnc3RhcnRBdCgpJywgJ1F1ZXJ5LnN0YXJ0QXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXJ0QWZ0ZXIoLi4uYXJncykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBzdGFydEFmdGVyKC4uLmFyZ3MpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ3N0YXJ0QWZ0ZXIoKScsICdRdWVyeS5zdGFydEFmdGVyKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbmRCZWZvcmUoLi4uYXJncykge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIHF1ZXJ5KHRoaXMuX2RlbGVnYXRlLCBlbmRCZWZvcmUoLi4uYXJncykpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhyb3cgcmVwbGFjZUZ1bmN0aW9uTmFtZShlLCAnZW5kQmVmb3JlKCknLCAnUXVlcnkuZW5kQmVmb3JlKCknKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBlbmRBdCguLi5hcmdzKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWVyeSh0aGlzLmZpcmVzdG9yZSwgcXVlcnkodGhpcy5fZGVsZWdhdGUsIGVuZEF0KC4uLmFyZ3MpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHRocm93IHJlcGxhY2VGdW5jdGlvbk5hbWUoZSwgJ2VuZEF0KCknLCAnUXVlcnkuZW5kQXQoKScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gcXVlcnlFcXVhbCh0aGlzLl9kZWxlZ2F0ZSwgb3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGdldChvcHRpb25zKSB7XHJcbiAgICAgICAgbGV0IHF1ZXJ5O1xyXG4gICAgICAgIGlmICgob3B0aW9ucyA9PT0gbnVsbCB8fCBvcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRpb25zLnNvdXJjZSkgPT09ICdjYWNoZScpIHtcclxuICAgICAgICAgICAgcXVlcnkgPSBnZXREb2NzRnJvbUNhY2hlKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoKG9wdGlvbnMgPT09IG51bGwgfHwgb3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogb3B0aW9ucy5zb3VyY2UpID09PSAnc2VydmVyJykge1xyXG4gICAgICAgICAgICBxdWVyeSA9IGdldERvY3NGcm9tU2VydmVyKHRoaXMuX2RlbGVnYXRlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5ID0gZ2V0RG9jcyh0aGlzLl9kZWxlZ2F0ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBxdWVyeS50aGVuKHJlc3VsdCA9PiBuZXcgUXVlcnlTbmFwc2hvdCh0aGlzLmZpcmVzdG9yZSwgbmV3IFF1ZXJ5U25hcHNob3QkMSh0aGlzLmZpcmVzdG9yZS5fZGVsZWdhdGUsIHRoaXMuX3VzZXJEYXRhV3JpdGVyLCB0aGlzLl9kZWxlZ2F0ZSwgcmVzdWx0Ll9zbmFwc2hvdCkpKTtcclxuICAgIH1cclxuICAgIG9uU25hcHNob3QoLi4uYXJncykge1xyXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSBleHRyYWN0U25hcHNob3RPcHRpb25zKGFyZ3MpO1xyXG4gICAgICAgIGNvbnN0IG9ic2VydmVyID0gd3JhcE9ic2VydmVyKGFyZ3MsIHNuYXAgPT4gbmV3IFF1ZXJ5U25hcHNob3QodGhpcy5maXJlc3RvcmUsIG5ldyBRdWVyeVNuYXBzaG90JDEodGhpcy5maXJlc3RvcmUuX2RlbGVnYXRlLCB0aGlzLl91c2VyRGF0YVdyaXRlciwgdGhpcy5fZGVsZWdhdGUsIHNuYXAuX3NuYXBzaG90KSkpO1xyXG4gICAgICAgIHJldHVybiBvblNuYXBzaG90KHRoaXMuX2RlbGVnYXRlLCBvcHRpb25zLCBvYnNlcnZlcik7XHJcbiAgICB9XHJcbiAgICB3aXRoQ29udmVydGVyKGNvbnZlcnRlcikge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnkodGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlclxyXG4gICAgICAgICAgICA/IHRoaXMuX2RlbGVnYXRlLndpdGhDb252ZXJ0ZXIoRmlyZXN0b3JlRGF0YUNvbnZlcnRlci5nZXRJbnN0YW5jZSh0aGlzLmZpcmVzdG9yZSwgY29udmVydGVyKSlcclxuICAgICAgICAgICAgOiB0aGlzLl9kZWxlZ2F0ZS53aXRoQ29udmVydGVyKG51bGwpKTtcclxuICAgIH1cclxufVxyXG5jbGFzcyBEb2N1bWVudENoYW5nZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZmlyZXN0b3JlLCBfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9maXJlc3RvcmUgPSBfZmlyZXN0b3JlO1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlID0gX2RlbGVnYXRlO1xyXG4gICAgfVxyXG4gICAgZ2V0IHR5cGUoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLnR5cGU7XHJcbiAgICB9XHJcbiAgICBnZXQgZG9jKCkge1xyXG4gICAgICAgIHJldHVybiBuZXcgUXVlcnlEb2N1bWVudFNuYXBzaG90KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUuZG9jKTtcclxuICAgIH1cclxuICAgIGdldCBvbGRJbmRleCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUub2xkSW5kZXg7XHJcbiAgICB9XHJcbiAgICBnZXQgbmV3SW5kZXgoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlLm5ld0luZGV4O1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIFF1ZXJ5U25hcHNob3Qge1xyXG4gICAgY29uc3RydWN0b3IoX2ZpcmVzdG9yZSwgX2RlbGVnYXRlKSB7XHJcbiAgICAgICAgdGhpcy5fZmlyZXN0b3JlID0gX2ZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCBxdWVyeSgpIHtcclxuICAgICAgICByZXR1cm4gbmV3IFF1ZXJ5KHRoaXMuX2ZpcmVzdG9yZSwgdGhpcy5fZGVsZWdhdGUucXVlcnkpO1xyXG4gICAgfVxyXG4gICAgZ2V0IG1ldGFkYXRhKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5tZXRhZGF0YTtcclxuICAgIH1cclxuICAgIGdldCBzaXplKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5zaXplO1xyXG4gICAgfVxyXG4gICAgZ2V0IGVtcHR5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5lbXB0eTtcclxuICAgIH1cclxuICAgIGdldCBkb2NzKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5kb2NzLm1hcChkb2MgPT4gbmV3IFF1ZXJ5RG9jdW1lbnRTbmFwc2hvdCh0aGlzLl9maXJlc3RvcmUsIGRvYykpO1xyXG4gICAgfVxyXG4gICAgZG9jQ2hhbmdlcyhvcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2RlbGVnYXRlXHJcbiAgICAgICAgICAgIC5kb2NDaGFuZ2VzKG9wdGlvbnMpXHJcbiAgICAgICAgICAgIC5tYXAoZG9jQ2hhbmdlID0+IG5ldyBEb2N1bWVudENoYW5nZSh0aGlzLl9maXJlc3RvcmUsIGRvY0NoYW5nZSkpO1xyXG4gICAgfVxyXG4gICAgZm9yRWFjaChjYWxsYmFjaywgdGhpc0FyZykge1xyXG4gICAgICAgIHRoaXMuX2RlbGVnYXRlLmZvckVhY2goc25hcHNob3QgPT4ge1xyXG4gICAgICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIG5ldyBRdWVyeURvY3VtZW50U25hcHNob3QodGhpcy5fZmlyZXN0b3JlLCBzbmFwc2hvdCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiBzbmFwc2hvdEVxdWFsKHRoaXMuX2RlbGVnYXRlLCBvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG59XHJcbmNsYXNzIENvbGxlY3Rpb25SZWZlcmVuY2UgZXh0ZW5kcyBRdWVyeSB7XHJcbiAgICBjb25zdHJ1Y3RvcihmaXJlc3RvcmUsIF9kZWxlZ2F0ZSkge1xyXG4gICAgICAgIHN1cGVyKGZpcmVzdG9yZSwgX2RlbGVnYXRlKTtcclxuICAgICAgICB0aGlzLmZpcmVzdG9yZSA9IGZpcmVzdG9yZTtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIGdldCBpZCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaWQ7XHJcbiAgICB9XHJcbiAgICBnZXQgcGF0aCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUucGF0aDtcclxuICAgIH1cclxuICAgIGdldCBwYXJlbnQoKSB7XHJcbiAgICAgICAgY29uc3QgZG9jUmVmID0gdGhpcy5fZGVsZWdhdGUucGFyZW50O1xyXG4gICAgICAgIHJldHVybiBkb2NSZWYgPyBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvY1JlZikgOiBudWxsO1xyXG4gICAgfVxyXG4gICAgZG9jKGRvY3VtZW50UGF0aCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudFBhdGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQ2FsbCBgZG9jYCB3aXRob3V0IGBkb2N1bWVudFBhdGhgIGlmIGBkb2N1bWVudFBhdGhgIGlzIGB1bmRlZmluZWRgXHJcbiAgICAgICAgICAgICAgICAvLyBhcyBgZG9jYCB2YWxpZGF0ZXMgdGhlIG51bWJlciBvZiBhcmd1bWVudHMgdG8gcHJldmVudCB1c2VycyBmcm9tXHJcbiAgICAgICAgICAgICAgICAvLyBhY2NpZGVudGFsbHkgcGFzc2luZyBgdW5kZWZpbmVkYC5cclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvYyh0aGlzLl9kZWxlZ2F0ZSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBEb2N1bWVudFJlZmVyZW5jZSh0aGlzLmZpcmVzdG9yZSwgZG9jKHRoaXMuX2RlbGVnYXRlLCBkb2N1bWVudFBhdGgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICB0aHJvdyByZXBsYWNlRnVuY3Rpb25OYW1lKGUsICdkb2MoKScsICdDb2xsZWN0aW9uUmVmZXJlbmNlLmRvYygpJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgYWRkKGRhdGEpIHtcclxuICAgICAgICByZXR1cm4gYWRkRG9jKHRoaXMuX2RlbGVnYXRlLCBkYXRhKS50aGVuKGRvY1JlZiA9PiBuZXcgRG9jdW1lbnRSZWZlcmVuY2UodGhpcy5maXJlc3RvcmUsIGRvY1JlZikpO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIHJldHVybiByZWZFcXVhbCh0aGlzLl9kZWxlZ2F0ZSwgb3RoZXIuX2RlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHdpdGhDb252ZXJ0ZXIoY29udmVydGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBDb2xsZWN0aW9uUmVmZXJlbmNlKHRoaXMuZmlyZXN0b3JlLCBjb252ZXJ0ZXJcclxuICAgICAgICAgICAgPyB0aGlzLl9kZWxlZ2F0ZS53aXRoQ29udmVydGVyKEZpcmVzdG9yZURhdGFDb252ZXJ0ZXIuZ2V0SW5zdGFuY2UodGhpcy5maXJlc3RvcmUsIGNvbnZlcnRlcikpXHJcbiAgICAgICAgICAgIDogdGhpcy5fZGVsZWdhdGUud2l0aENvbnZlcnRlcihudWxsKSk7XHJcbiAgICB9XHJcbn1cclxuZnVuY3Rpb24gY2FzdFJlZmVyZW5jZShkb2N1bWVudFJlZikge1xyXG4gICAgcmV0dXJuIF9jYXN0KGRvY3VtZW50UmVmLCBEb2N1bWVudFJlZmVyZW5jZSQxKTtcclxufVxuXG4vKipcclxuICogQGxpY2Vuc2VcclxuICogQ29weXJpZ2h0IDIwMTcgR29vZ2xlIExMQ1xyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxyXG4gKlxyXG4gKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXHJcbiAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcclxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXHJcbiAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcclxuICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXHJcbiAqL1xyXG4vLyBUaGUgb2JqZWN0cyB0aGF0IGFyZSBhIHBhcnQgb2YgdGhpcyBBUEkgYXJlIGV4cG9zZWQgdG8gdGhpcmQtcGFydGllcyBhc1xyXG4vLyBjb21waWxlZCBqYXZhc2NyaXB0IHNvIHdlIHdhbnQgdG8gZmxhZyBvdXIgcHJpdmF0ZSBtZW1iZXJzIHdpdGggYSBsZWFkaW5nXHJcbi8vIHVuZGVyc2NvcmUgdG8gZGlzY291cmFnZSB0aGVpciB1c2UuXHJcbi8qKlxyXG4gKiBBIGBGaWVsZFBhdGhgIHJlZmVycyB0byBhIGZpZWxkIGluIGEgZG9jdW1lbnQuIFRoZSBwYXRoIG1heSBjb25zaXN0IG9mIGFcclxuICogc2luZ2xlIGZpZWxkIG5hbWUgKHJlZmVycmluZyB0byBhIHRvcC1sZXZlbCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLCBvciBhIGxpc3RcclxuICogb2YgZmllbGQgbmFtZXMgKHJlZmVycmluZyB0byBhIG5lc3RlZCBmaWVsZCBpbiB0aGUgZG9jdW1lbnQpLlxyXG4gKi9cclxuY2xhc3MgRmllbGRQYXRoIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIEZpZWxkUGF0aCBmcm9tIHRoZSBwcm92aWRlZCBmaWVsZCBuYW1lcy4gSWYgbW9yZSB0aGFuIG9uZSBmaWVsZFxyXG4gICAgICogbmFtZSBpcyBwcm92aWRlZCwgdGhlIHBhdGggd2lsbCBwb2ludCB0byBhIG5lc3RlZCBmaWVsZCBpbiBhIGRvY3VtZW50LlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSBmaWVsZE5hbWVzIC0gQSBsaXN0IG9mIGZpZWxkIG5hbWVzLlxyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3RvciguLi5maWVsZE5hbWVzKSB7XHJcbiAgICAgICAgdGhpcy5fZGVsZWdhdGUgPSBuZXcgRmllbGRQYXRoJDEoLi4uZmllbGROYW1lcyk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgZG9jdW1lbnRJZCgpIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbnRlcm5hbCBOb3RlOiBUaGUgYmFja2VuZCBkb2Vzbid0IHRlY2huaWNhbGx5IHN1cHBvcnQgcXVlcnlpbmcgYnlcclxuICAgICAgICAgKiBkb2N1bWVudCBJRC4gSW5zdGVhZCBpdCBxdWVyaWVzIGJ5IHRoZSBlbnRpcmUgZG9jdW1lbnQgbmFtZSAoZnVsbCBwYXRoXHJcbiAgICAgICAgICogaW5jbHVkZWQpLCBidXQgaW4gdGhlIGNhc2VzIHdlIGN1cnJlbnRseSBzdXBwb3J0IGRvY3VtZW50SWQoKSwgdGhlIG5ldFxyXG4gICAgICAgICAqIGVmZmVjdCBpcyB0aGUgc2FtZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkUGF0aChfRmllbGRQYXRoLmtleUZpZWxkKCkuY2Fub25pY2FsU3RyaW5nKCkpO1xyXG4gICAgfVxyXG4gICAgaXNFcXVhbChvdGhlcikge1xyXG4gICAgICAgIG90aGVyID0gZ2V0TW9kdWxhckluc3RhbmNlKG90aGVyKTtcclxuICAgICAgICBpZiAoIShvdGhlciBpbnN0YW5jZW9mIEZpZWxkUGF0aCQxKSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0aGlzLl9kZWxlZ2F0ZS5faW50ZXJuYWxQYXRoLmlzRXF1YWwob3RoZXIuX2ludGVybmFsUGF0aCk7XHJcbiAgICB9XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDE3IEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuY2xhc3MgRmllbGRWYWx1ZSB7XHJcbiAgICBjb25zdHJ1Y3RvcihfZGVsZWdhdGUpIHtcclxuICAgICAgICB0aGlzLl9kZWxlZ2F0ZSA9IF9kZWxlZ2F0ZTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBzZXJ2ZXJUaW1lc3RhbXAoKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBzZXJ2ZXJUaW1lc3RhbXAoKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLnNlcnZlclRpbWVzdGFtcCc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBkZWxldGUoKSB7XHJcbiAgICAgICAgY29uc3QgZGVsZWdhdGUgPSBkZWxldGVGaWVsZCgpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuZGVsZXRlJztcclxuICAgICAgICByZXR1cm4gbmV3IEZpZWxkVmFsdWUoZGVsZWdhdGUpO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIGFycmF5VW5pb24oLi4uZWxlbWVudHMpIHtcclxuICAgICAgICBjb25zdCBkZWxlZ2F0ZSA9IGFycmF5VW5pb24oLi4uZWxlbWVudHMpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuYXJyYXlVbmlvbic7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIHN0YXRpYyBhcnJheVJlbW92ZSguLi5lbGVtZW50cykge1xyXG4gICAgICAgIGNvbnN0IGRlbGVnYXRlID0gYXJyYXlSZW1vdmUoLi4uZWxlbWVudHMpO1xyXG4gICAgICAgIGRlbGVnYXRlLl9tZXRob2ROYW1lID0gJ0ZpZWxkVmFsdWUuYXJyYXlSZW1vdmUnO1xyXG4gICAgICAgIHJldHVybiBuZXcgRmllbGRWYWx1ZShkZWxlZ2F0ZSk7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaW5jcmVtZW50KG4pIHtcclxuICAgICAgICBjb25zdCBkZWxlZ2F0ZSA9IGluY3JlbWVudChuKTtcclxuICAgICAgICBkZWxlZ2F0ZS5fbWV0aG9kTmFtZSA9ICdGaWVsZFZhbHVlLmluY3JlbWVudCc7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBGaWVsZFZhbHVlKGRlbGVnYXRlKTtcclxuICAgIH1cclxuICAgIGlzRXF1YWwob3RoZXIpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fZGVsZWdhdGUuaXNFcXVhbChvdGhlci5fZGVsZWdhdGUpO1xyXG4gICAgfVxyXG59XG5cbi8qKlxyXG4gKiBAbGljZW5zZVxyXG4gKiBDb3B5cmlnaHQgMjAyMSBHb29nbGUgTExDXHJcbiAqXHJcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XHJcbiAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cclxuICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XHJcbiAqXHJcbiAqICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmNvbnN0IGZpcmVzdG9yZU5hbWVzcGFjZSA9IHtcclxuICAgIEZpcmVzdG9yZSxcclxuICAgIEdlb1BvaW50LFxyXG4gICAgVGltZXN0YW1wLFxyXG4gICAgQmxvYixcclxuICAgIFRyYW5zYWN0aW9uLFxyXG4gICAgV3JpdGVCYXRjaCxcclxuICAgIERvY3VtZW50UmVmZXJlbmNlLFxyXG4gICAgRG9jdW1lbnRTbmFwc2hvdCxcclxuICAgIFF1ZXJ5LFxyXG4gICAgUXVlcnlEb2N1bWVudFNuYXBzaG90LFxyXG4gICAgUXVlcnlTbmFwc2hvdCxcclxuICAgIENvbGxlY3Rpb25SZWZlcmVuY2UsXHJcbiAgICBGaWVsZFBhdGgsXHJcbiAgICBGaWVsZFZhbHVlLFxyXG4gICAgc2V0TG9nTGV2ZWwsXHJcbiAgICBDQUNIRV9TSVpFX1VOTElNSVRFRFxyXG59O1xyXG4vKipcclxuICogQ29uZmlndXJlcyBGaXJlc3RvcmUgYXMgcGFydCBvZiB0aGUgRmlyZWJhc2UgU0RLIGJ5IGNhbGxpbmcgcmVnaXN0ZXJDb21wb25lbnQuXHJcbiAqXHJcbiAqIEBwYXJhbSBmaXJlYmFzZSAtIFRoZSBGaXJlYmFzZU5hbWVzcGFjZSB0byByZWdpc3RlciBGaXJlc3RvcmUgd2l0aFxyXG4gKiBAcGFyYW0gZmlyZXN0b3JlRmFjdG9yeSAtIEEgZmFjdG9yeSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBuZXcgRmlyZXN0b3JlXHJcbiAqICAgIGluc3RhbmNlLlxyXG4gKi9cclxuZnVuY3Rpb24gY29uZmlndXJlRm9yRmlyZWJhc2UoZmlyZWJhc2UsIGZpcmVzdG9yZUZhY3RvcnkpIHtcclxuICAgIGZpcmViYXNlLklOVEVSTkFMLnJlZ2lzdGVyQ29tcG9uZW50KG5ldyBDb21wb25lbnQoJ2ZpcmVzdG9yZS1jb21wYXQnLCBjb250YWluZXIgPT4ge1xyXG4gICAgICAgIGNvbnN0IGFwcCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignYXBwLWNvbXBhdCcpLmdldEltbWVkaWF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IGZpcmVzdG9yZUV4cCA9IGNvbnRhaW5lci5nZXRQcm92aWRlcignZmlyZXN0b3JlJykuZ2V0SW1tZWRpYXRlKCk7XHJcbiAgICAgICAgcmV0dXJuIGZpcmVzdG9yZUZhY3RvcnkoYXBwLCBmaXJlc3RvcmVFeHApO1xyXG4gICAgfSwgJ1BVQkxJQycpLnNldFNlcnZpY2VQcm9wcyhPYmplY3QuYXNzaWduKHt9LCBmaXJlc3RvcmVOYW1lc3BhY2UpKSk7XHJcbn1cblxuLyoqXHJcbiAqIEBsaWNlbnNlXHJcbiAqIENvcHlyaWdodCAyMDIwIEdvb2dsZSBMTENcclxuICpcclxuICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcclxuICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLlxyXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcclxuICpcclxuICogICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcclxuICpcclxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxyXG4gKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiBcIkFTIElTXCIgQkFTSVMsXHJcbiAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxyXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXHJcbiAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLlxyXG4gKi9cclxuLyoqXHJcbiAqIFJlZ2lzdGVycyB0aGUgbWFpbiBGaXJlc3RvcmUgYnVpbGQgd2l0aCB0aGUgY29tcG9uZW50cyBmcmFtZXdvcmsuXHJcbiAqIFBlcnNpc3RlbmNlIGNhbiBiZSBlbmFibGVkIHZpYSBgZmlyZWJhc2UuZmlyZXN0b3JlKCkuZW5hYmxlUGVyc2lzdGVuY2UoKWAuXHJcbiAqL1xyXG5mdW5jdGlvbiByZWdpc3RlckZpcmVzdG9yZShpbnN0YW5jZSkge1xyXG4gICAgY29uZmlndXJlRm9yRmlyZWJhc2UoaW5zdGFuY2UsIChhcHAsIGZpcmVzdG9yZUV4cCkgPT4gbmV3IEZpcmVzdG9yZShhcHAsIGZpcmVzdG9yZUV4cCwgbmV3IEluZGV4ZWREYlBlcnNpc3RlbmNlUHJvdmlkZXIoKSkpO1xyXG4gICAgaW5zdGFuY2UucmVnaXN0ZXJWZXJzaW9uKG5hbWUsIHZlcnNpb24pO1xyXG59XHJcbnJlZ2lzdGVyRmlyZXN0b3JlKGZpcmViYXNlKTtcblxuZXhwb3J0IHsgcmVnaXN0ZXJGaXJlc3RvcmUgfTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWluZGV4LmVzbTIwMTcuanMubWFwXG4iXSwic291cmNlUm9vdCI6IiJ9